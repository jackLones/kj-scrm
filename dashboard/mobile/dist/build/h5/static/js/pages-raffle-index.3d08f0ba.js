(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-raffle-index"],{"0059":function(t,e,a){t.exports=a.p+"static/img/background.17c3c63c.jpg"},1956:function(t,e,a){t.exports=a.p+"static/img/btn2.c6724bef.png"},3404:function(t,e,a){"use strict";a.d(e,"b",(function(){return r})),a.d(e,"c",(function(){return o})),a.d(e,"a",(function(){return i}));var i={uniPopup:a("1c89").default,uniIcons:a("2ba4").default},r=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",[i("v-uni-view",[i("img",{directives:[{name:"show",rawName:"v-show",value:4==t.status,expression:"status == 4"}],staticClass:"delete",style:{paddingTop:t.imgPaddingTop},attrs:{src:a("76b7"),alt:""}}),t.isLoading||4==t.status?t._e():i("img",{staticStyle:{width:"100%"},attrs:{src:a("0059"),alt:""}}),2==t.status?i("v-uni-view",{staticClass:"content-msg",staticStyle:{top:"0"}},[t._v("活动未开始，仅供预览")]):t._e(),3==t.status?i("v-uni-view",{staticClass:"content-msg",staticStyle:{top:"0"}},[t._v("活动未发布，仅供预览")]):t._e(),t.awardData.length>0?i("v-uni-view",{staticClass:"award-data",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.showAward.apply(void 0,arguments)}}},[t._v("奖品说明")]):t._e(),i("v-uni-view",{directives:[{name:"show",rawName:"v-show",value:!t.isLoading&&4!=t.status,expression:"!isLoading && status != 4"}],staticClass:"draw"},[i("v-uni-view",{staticClass:"light"},[i("v-uni-view",{staticClass:"turntable",attrs:{id:"turntable"}}),i("v-uni-view",{staticClass:"bg",attrs:{id:"turntable_bg"}},[t._l(t.list,(function(e,a){return[i("ul",{style:t.listUlStyle(a,t.list.length)},[i("li",{staticClass:"award-li",style:t.listLiStyle(t.list.length)},[t._v(t._s(e.name)),i("img",{staticStyle:{width:"1.6rem",display:"block",margin:"0.5rem auto 0"},attrs:{src:t.commonUrl+e.image,alt:""}})])])]}))],2),2==t.status||3==t.status?i("img",{staticClass:"start",attrs:{src:a("913f"),alt:""}}):t._e(),0==t.status||1==t.status?i("img",{staticClass:"start",attrs:{src:a("913f"),alt:""},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.startAward.apply(void 0,arguments)}}}):t._e()],1),0==t.is_mine&&1==t.isNeedShare?i("v-uni-view",{staticClass:"text"},[i("p",{staticClass:"text-content1",staticStyle:{"font-size":"0.853rem  /* 16/18.75 */"}},[t._v("每获得1位好友支持，可增加"+t._s(t.chance2)+"次抽奖机会。")]),i("p",{staticClass:"text-content2"},[t._v("【"+t._s(t.nick_name)+"】喜提大奖，近在咫尺，快来支持TA吧！")])]):t._e(),0==t.is_mine&&0==t.isNeedShare?i("v-uni-view",{staticClass:"text"},[i("p",{staticClass:"text-content1",staticStyle:{"font-size":"0.853rem  /* 16/18.75 */",width:"70%","margin-left":"15%"}},[t._v("欢迎您参与，点击“抽奖”，添加员工企业微信后，开始抽奖")])]):t._e(),1==t.is_mine?i("v-uni-view",{staticClass:"text"},[i("p",{staticClass:"text-content1"},[t._v("您还有"),i("span",{staticClass:"text-box"},[t._v(t._s(t.chance))]),t._v("次抽奖机会")]),0!=t.limitNum&&1==t.isNeedShare?i("p",{staticClass:"text-content2"},[t._v("每获得1位好友支持，可增加"+t._s(t.chance2)+"次抽奖机会，单日最多可获得"+t._s(t.chance3)+"次")]):t._e(),0==t.limitNum&&1==t.isNeedShare?i("p",{staticClass:"text-content2"},[t._v("每获得1位好友支持，可增加"+t._s(t.chance2)+"次抽奖机会，单日最多可获得次数不限")]):t._e()]):t._e(),i("v-uni-view",{staticClass:"btn"},[0==t.status?[t.externalId>0&&0==t.is_mine?i("a",{attrs:{href:t.my_url}},[i("img",{staticClass:"btn-img1",attrs:{src:a("b8a0"),alt:""}})]):t._e(),1==t.is_mine?i("v-uni-navigator",{staticClass:"btn-img1",attrs:{url:t.raffleListUrl}},[i("img",{staticStyle:{width:"100%"},attrs:{src:a("7862"),alt:""}})]):t._e()]:t._e(),1==t.status?[t.externalId>0&&0==t.is_mine?i("a",{attrs:{href:t.my_url}},[i("img",{staticClass:"btn-img3",attrs:{src:a("b8a0"),alt:""}})]):t._e(),t.externalId<=0||t.externalId>0&&1==t.is_mine?i("v-uni-navigator",{staticClass:"btn-img3",attrs:{url:t.raffleListUrl}},[i("img",{staticStyle:{width:"100%"},attrs:{src:a("7862"),alt:""}})]):t._e()]:t._e(),0==t.status&&1==t.is_mine&&t.join_id>0&&!t.showPoster?i("img",{staticClass:"btn-img2",attrs:{src:a("1956"),alt:""},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.createPoster.apply(void 0,arguments)}}}):t._e(),0==t.status&&1==t.is_help&&1==t.isNeedShare?i("img",{staticClass:"btn-img2",attrs:{src:a("94f6"),alt:""},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.start3(1)}}}):t._e(),0==t.status&&2==t.is_help&&1==t.isNeedShare?i("img",{staticClass:"btn-img2",attrs:{src:a("94f6"),alt:""},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.createPoster.apply(void 0,arguments)}}}):t._e()],2),i("v-uni-view",{staticClass:"recordList"},[i("v-uni-view",{staticClass:"recordList-title"},[t._v("中奖名单")]),i("v-uni-view",{staticClass:"recordList-content"},t._l(t.recordList,(function(e,a){return i("v-uni-view",{key:a,staticStyle:{"line-height":"1.2rem"}},[i("span",{staticClass:"recordList-content-left"},[t._v(t._s(e.nick_name))]),i("span",{staticClass:"recordList-content-right"},[t._v(t._s(e.award_name))])])})),1)],1),i("v-uni-view",{staticClass:"activeRule"},[i("v-uni-view",{staticClass:"activeRule-title"},[t._v("活动规则")]),i("v-uni-view",{staticClass:"activeRule-content"},[i("v-uni-view",{staticStyle:{overflow:"hidden"}},[t._v("1."),i("div",{staticStyle:{float:"right",width:"calc(100% - 0.8rem)","margin-right":"0.21rem"}},[t._v("抽奖时间："+t._s(t.rules.start_time)+"—"+t._s(t.rules.end_time))])]),t.rules.description?i("v-uni-view",{staticStyle:{overflow:"hidden"}},[t._v("2."),i("div",{staticStyle:{float:"right",width:"calc(100% - 0.8rem)","margin-right":"0.21rem"}},[t._v(t._s(t.rules.description))])]):t._e()],1)],1),i("uni-popup",{ref:"awardPopup",attrs:{type:"center"},on:{change:function(e){arguments[0]=e=t.$handleEvent(e),t.changeAward.apply(void 0,arguments)}}},[i("v-uni-view",{staticClass:"award-pop"},[i("v-uni-view",{staticStyle:{height:"1.92rem  /* 36/18.75 */"}},[i("uni-icons",{staticStyle:{float:"right","margin-right":"0.533rem  /* 10/18.75 */","margin-top":"0.533rem  /* 10/18.75 */"},attrs:{type:"close",size:"26",color:"#bfbabd"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.closeAwardPop.apply(void 0,arguments)}}})],1),i("v-uni-scroll-view",{staticClass:"award-list",attrs:{"scroll-y":"true"}},t._l(t.awardData,(function(e,a){return i("v-uni-view",{staticClass:"award-item"},[i("v-uni-view",{staticClass:"award-name"},[t._v("奖品"+t._s(t.numToChinese[a+1])+"："+t._s(e.name))]),e.description?i("v-uni-view",{staticClass:"award-description"},[t._v("奖品说明："),i("pre",{staticStyle:{"margin-top":"0.16rem","white-space":"break-spaces","word-break":"break-all"},domProps:{innerHTML:t._s(e.description)}})]):t._e()],1)})),1)],1)],1),i("uni-popup",{ref:"popup",attrs:{type:"center"},on:{change:function(e){arguments[0]=e=t.$handleEvent(e),t.openPopup.apply(void 0,arguments)}}},[i("uni-icons",{staticStyle:{position:"absolute",right:"1.45rem",top:"-3.2rem"},attrs:{type:"close",size:"36",color:"#bfbabd"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.closePop.apply(void 0,arguments)}}}),i("img",{staticStyle:{width:"75%"},attrs:{src:a("45a9"),alt:""}}),i("v-uni-button",{staticStyle:{position:"absolute",bottom:"15px",left:"50%",width:"200px","margin-left":"-100px",background:"#FFC100",color:"#FFF"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.again(t.is_refresh,0)}}},[t._v("再玩一次")])],1),i("uni-popup",{ref:"popup2",attrs:{type:"center"}},[i("uni-icons",{staticStyle:{position:"absolute",right:"1.45rem",top:"-3.2rem"},attrs:{type:"close",size:"36",color:"#bfbabd"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.closePop2.apply(void 0,arguments)}}}),i("img",{staticStyle:{width:"100%"},attrs:{src:a("e16e"),alt:""}}),i("v-uni-view",{staticStyle:{height:"6.4rem",position:"absolute",width:"75%",top:"7.57rem",left:"50%","margin-left":"-39%"}},[0==t.awardRes.prize_type?i("img",{staticStyle:{"max-width":"75%","max-height":"100%"},attrs:{src:t.commonUrl+t.awardRes.logo,alt:""}}):t._e(),1==t.awardRes.prize_type?i("img",{staticStyle:{width:"75%"},attrs:{src:a("3a18"),alt:""}}):t._e()]),1==t.awardRes.prize_type?i("v-uni-view",{staticStyle:{position:"absolute",width:"75%",top:"8.533rem  /* 160/18.75 */",left:"50%","margin-left":"-39%",color:"#742B23"}},[i("span",{staticStyle:{"font-size":"1.493rem  /* 28/18.75 */","margin-right":"0.267rem  /* 5/18.75 */"}},[t._v(t._s(t.awardRes.amount))]),t._v("元")]):t._e(),1==t.awardRes.prize_type?i("v-uni-view",{staticStyle:{position:"absolute",width:"50%",top:"10.667rem  /* 200/18.75 */",left:"23%",color:"#742B23","font-size":"0.64rem  /* 12/18.75 */"}},[1==t.awardRes.prize_send_type?i("span",[t._v("红包已发放至个人微信零钱")]):t._e(),2==t.awardRes.prize_send_type?i("span",[t._v("红包将于"+t._s(t.awardRes.end_time)+"发放至个人微信零钱")]):t._e()]):t._e(),0==t.awardRes.prize_type?i("v-uni-view",{staticStyle:{position:"absolute",bottom:"2.3rem",width:"75%",color:"#FFF","font-size":"1.1rem",left:"50%","margin-left":"-39%","white-space":"nowrap","text-overflow":"ellipsis",overflow:"hidden","word-break":"break-all"}},[t._v("恭喜您获得"+t._s(t.awardRes.name)+"产品~")]):t._e(),1==t.awardRes.prize_type?i("v-uni-view",{staticStyle:{position:"absolute",bottom:"2.3rem",width:"75%",color:"#FFF","font-size":"1.1rem",left:"50%","margin-left":"-39%","white-space":"nowrap","text-overflow":"ellipsis",overflow:"hidden","word-break":"break-all"}},[t._v("恭喜您获得红包~")]):t._e()],1),i("uni-popup",{ref:"popup3",attrs:{type:"center"}},[i("uni-icons",{staticStyle:{position:"absolute",right:"1.45rem",top:"-3.2rem"},attrs:{type:"close",size:"36",color:"#bfbabd"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.closePop3.apply(void 0,arguments)}}}),i("img",{staticStyle:{width:"75%"},attrs:{src:a("eb43"),alt:""}})],1),i("uni-popup",{ref:"popup4",attrs:{type:"center"}},[i("uni-icons",{staticStyle:{position:"absolute",right:"1.45rem",top:"-11.2rem  /* -210/18.75 */"},attrs:{type:"close",size:"36",color:"#bfbabd"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.closePop4.apply(void 0,arguments)}}}),i("img",{staticStyle:{width:"50%","margin-top":"-6.933rem  /* -130/18.75 */"},attrs:{src:t.codeUrl,alt:""}}),i("p",{staticStyle:{position:"absolute",left:"15%",top:"4.8rem  /* 90/18.75 */",width:"70%",color:"#FFF"}},[t._v("中奖后，方便商户与您联系")]),i("p",{staticStyle:{position:"absolute",left:"15%",top:"6.4rem  /* 120/18.75 */",width:"70%",color:"#FFF"}},[t._v("请先添加企业成员为好友")]),i("p",{staticStyle:{position:"absolute",left:"2.987rem  /* 56/18.75 */",top:"8.267rem  /* 155/18.75 */",width:"13.973rem  /* 262/18.75 */","word-wrap":"break-word",color:"yellow","font-size":"0.693rem  /* 13/18.75 */","line-height":"1.173rem  /* 22/18.75 */"}},[t._v("*若您已添加员工企微后，依然弹出二维码情况时，可以尝试点击刷新，即可正常参与。"),i("uni-icons",{attrs:{type:"reload",size:"15",color:"yellow"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.reloadPage.apply(void 0,arguments)}}})],1)],1),i("uni-popup",{ref:"popup6",attrs:{type:"center"},on:{change:function(e){arguments[0]=e=t.$handleEvent(e),t.openPopup6.apply(void 0,arguments)}}},[i("img",{staticStyle:{width:"77%"},attrs:{src:a("6d8c"),alt:""}}),i("img",{staticClass:"success-img",attrs:{src:t.avatar2,alt:""}}),i("p",{staticClass:"success-txt1"},[t._v(t._s(t.nick_name2))]),i("p",{staticClass:"success-txt2"},[t._v("帮“"+t._s(t.nick_name)+"”获得"+t._s(t.add_chance)+"次抽奖机会")]),i("p",{staticClass:"success-btn",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.closePop6.apply(void 0,arguments)}}},[t._v("知道了")])])],1),i("uni-popup",{directives:[{name:"show",rawName:"v-show",value:!t.isLoading&&4!=t.status&&t.showPoster,expression:"!isLoading && status != 4 && showPoster"}],ref:"popup5",attrs:{type:"center"},on:{change:function(e){arguments[0]=e=t.$handleEvent(e),t.openPopup5.apply(void 0,arguments)}}},[i("v-uni-image",{staticStyle:{"background-color":"transparent",position:"absolute","z-index":"9999999999999999999",transform:"translate(-50%, -50%)"},style:{height:t.imgHeight,width:t.imgWidth},attrs:{src:t.posterUrl}}),i("v-uni-view",[i("div",{ref:"qrcode",attrs:{id:"qrcode"}})]),i("v-uni-view",{staticClass:"content-msg",style:{bottom:t.bottom}},[t._v("长按保存图片")])],1),i("uni-popup",{ref:"errorPop",attrs:{type:"center"}},[i("v-uni-view",{staticClass:"errorPop"},[i("img",{staticStyle:{width:"4.16rem  /* 78/18.75 */",margin:"1.973rem  /* 37/18.75 */ auto"},attrs:{src:a("cf3b"),alt:""}}),i("p",{staticStyle:{"font-size":"0.96rem  /* 18/18.75 */",color:"#333",width:"90%","margin-left":"5%"}},[t._v(t._s(t.err_msg))]),i("v-uni-button",{staticClass:"errorPop-btn",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.closeErrorPop.apply(void 0,arguments)}}},[t._v("知道了")])],1)],1)],1),1!=t.is_show_copyright||t.isLoading?t._e():i("Footer",{staticStyle:{background:"#4320B0"}})],1)},o=[]},"3a18":function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAY0AAADCCAYAAAC13p7cAAADEklEQVR4nO3cwUkEQRRF0d/20DCZGI4bN6ZtBiYguGl3LZPAeLFXMudEUDwKLtSiluM4XmbmbQDgvo/LzDzPzKuhAPjF+5OFAKhEA4BMNADIRAOATDQAyEQDgEw0AMhEA4BMNADIRAOATDQAyEQDgOxyZqp93y0N8M9s2zbruv7p0KeicXMch/sC8CA8TwGQiQYAmWgAkIkGAJloAJCJBgCZaACQiQYAmWgAkIkGAJloAJCJBgCZaACQiQYAmWgAkIkGAJloAJCJBgCZaACQiQYAmWgAkIkGAJloAJCJBgCZaACQiQYAmWgAkIkGAJloAJCJBgCZaACQiQYAmWgAkIkGAJloAJCJBgCZaACQiQYAmWgAkIkGAJloAJCJBgCZaACQiQYAmWgAkIkGAJloAJCJBgCZaACQiQYAmWgAkIkGAJloAJCJBgCZaACQiQYAmWgAkIkGAJloAJCJBgCZaACQiQYAmWgAkIkGAJloAJCJBgCZaACQiQYAmWgAkIkGAJloAJCJBgCZaACQiQYAmWgAkIkGAJloAJCJBgCZaACQiQYAmWgAkIkGAJloAJCJBgCZaACQiQYAmWgAkIkGAJloAJCJBgCZaACQiQYAmWgAkIkGAJloAJCJBgCZaACQiQYAmWgAkIkGAJloAJCJBgCZaACQiQYAmWgAkIkGAJloAJCJBgCZaACQiQYAmWgAkIkGAJloAJCJBgCZaACQiQYAmWgAkIkGAJloAJCJBgCZaACQiQYAmWgAkIkGAJloAJCJBgCZaACQiQYAmWgAkIkGAJloAJCJBgCZaACQiQYAmWgAkIkGAJloAJCJBgCZaACQiQYAmWgAkIkGAJloAJCJBgCZaACQiQYAmWgAkIkGAJloAJCJBgCZaACQiQYAmWgAkIkGAJloAJCJBgCZaACQiQYAmWgAkIkGAJloAJCJBgCZaACQiQYA2eXsVMuyWBvgQZyKxvV6dU8AHojnKQAy0QAgEw0AMtEAIBMNADLRACATDQAy0QAgEw0AMtEAIBMNALLb31PfM/NpMgDumvn6AZVPEF01OHAZAAAAAElFTkSuQmCC"},"45a9":function(t,e,a){t.exports=a.p+"static/img/noAward.7dbbfa94.png"},"6d8c":function(t,e,a){t.exports=a.p+"static/img/helpBackground.8b8fc053.png"},"76b7":function(t,e,a){t.exports=a.p+"static/img/delete.4a242bbc.png"},7862:function(t,e,a){t.exports=a.p+"static/img/btn1.94d24ee4.png"},"913f":function(t,e,a){t.exports=a.p+"static/img/start.60b41f59.png"},"94f6":function(t,e,a){t.exports=a.p+"static/img/btn4.d8682e48.png"},a635:function(t,e,a){var i=a("24fb"),r=a("1de5"),o=a("c6f5");e=i(!1);var n=r(o);e.push([t.i,".award-pop[data-v-3fbee3fa]{width:18.667rem /* 350/18.75 */;max-height:26.667rem /* 500/18.75 */;background:#fff;float:right;padding-bottom:20px}.award-data[data-v-3fbee3fa]{position:absolute;right:0;top:2.667rem ;background:rgba(0,0,0,.1);padding:.427rem .907rem .427rem .907rem ;font-size:.747rem ;color:#fff;border-radius:.907rem 0 0 .907rem ;letter-spacing:.107rem ;z-index:9999}.award-list[data-v-3fbee3fa]{font-size:.853rem ;text-align:left;padding:0 1.067rem /* 20/18.75 */;max-height:25.067rem /* 470/18.75 */;width:calc(100% - 2.133rem)}.award-item[data-v-3fbee3fa]{margin-bottom:.8rem\n}.award-name[data-v-3fbee3fa]{margin-bottom:.267rem\n}.draw[data-v-3fbee3fa]{position:absolute;top:0;bottom:0;left:0;right:0}.light[data-v-3fbee3fa]{width:16.21rem;height:16.21rem;background:url("+n+");background-size:16.29rem 16.9rem;background-repeat:no-repeat;margin:11.52rem auto 0;position:relative}.turntable[data-v-3fbee3fa]{position:absolute;top:1.07rem;left:1.07rem;width:14.13rem;height:14.13rem;background:#ffd07e;border-radius:50%;overflow:hidden}[data-v-3fbee3fa] .turntable > ul{position:absolute;top:0;left:0;width:7.065rem;height:7.065rem;-webkit-transform-origin:right bottom;transform-origin:right bottom;overflow:hidden}\n\n/*/deep/ .turntable ul:nth-child(4n) {*/\n\n/*\tbackground: #FFECC9;*/\n\n/*}*/[data-v-3fbee3fa] .turntable ul:nth-child(3n){background:#fee4b9}[data-v-3fbee3fa] .turntable ul:nth-child(3n+1){background:#ffdba3}[data-v-3fbee3fa] .turntable ul:nth-child(3n+2){background:#fffaf1}.bg[data-v-3fbee3fa]{position:absolute;top:1.81rem;left:1.76rem;width:12.69rem;height:12.69rem;background:#fff;border-radius:50%;overflow:hidden}[data-v-3fbee3fa] .bg > ul{position:absolute;top:0;left:0;text-align:left;width:6.35rem;height:6.35rem;-webkit-transform-origin:bottom right;transform-origin:bottom right}[data-v-3fbee3fa] .bg > ul:nth-child(3n){background:#ffdba3}[data-v-3fbee3fa] .bg > ul:nth-child(3n+1){background:#fffaf1}[data-v-3fbee3fa] .bg > ul:nth-child(3n+2){background:#fee4b9}\n\n/*/deep/ .bg > ul:nth-child(4n+3) {*/\n\n/*\tbackground: #FFECC9;*/\n\n/*}*/.award-li[data-v-3fbee3fa]{font-size:13px;font-weight:700;color:#f7511e;width:100%;height:100%;text-align:center;white-space:nowrap;text-overflow:ellipsis;overflow:hidden;word-break:break-all;padding:.4rem 1.3rem;box-sizing:border-box;margin-left:50%;-webkit-transform-origin:center bottom;transform-origin:center bottom}.start[data-v-3fbee3fa]{width:3.25rem;position:absolute;left:50%;top:50%;margin-top:-1.83rem;margin-left:-1.63rem}.text[data-v-3fbee3fa]{height:5.73rem;margin-top:1.28rem}.text-box[data-v-3fbee3fa]{display:inline-block;height:1.84rem;background:#fff;border-radius:.16rem;color:#392bcd;margin:0 .53rem;vertical-align:middle;line-height:1.84rem;padding:0 .27rem}.text-content1[data-v-3fbee3fa]{font-size:.96rem;font-weight:400;font-stretch:normal;letter-spacing:0;color:#fff;padding:1.07rem 0 .5rem}.text-content2[data-v-3fbee3fa]{font-size:.64rem;font-weight:700;font-stretch:normal;letter-spacing:0;color:#fdbf14;width:60%;margin:auto}.btn[data-v-3fbee3fa]{margin-top:1.47rem;text-align:left;height:2.24rem}.btn-img1[data-v-3fbee3fa]{width:6.35rem;margin:0 2.19rem 0 2.61rem;cursor:pointer;position:relative;display:inline-block}.btn-img3[data-v-3fbee3fa]{width:6.35rem;margin:0 auto;cursor:pointer;position:relative;display:block}.btn-img1[data-v-3fbee3fa]:active, .btn-img2[data-v-3fbee3fa]:active{top:.11rem /**向下偏移2px **/}.btn-img2[data-v-3fbee3fa]{width:6.35rem;cursor:pointer;position:relative}.recordList[data-v-3fbee3fa]{margin-top:1.92rem}.recordList-title[data-v-3fbee3fa]{font-size:1.07rem;color:#fff;line-height:2.45rem}.recordList-content[data-v-3fbee3fa]{width:100%;height:8.21rem;margin:1.49rem auto .43rem;font-size:.64rem;color:#fff;line-height:1.17rem;padding:.5rem 3rem;text-align:left;box-sizing:border-box;overflow-y:auto}.recordList-content-left[data-v-3fbee3fa]{color:#fed200;margin-right:1.33rem;white-space:nowrap;text-overflow:ellipsis;overflow:hidden;word-break:break-all;width:4rem;display:inline-block}.recordList-content-right[data-v-3fbee3fa]{display:inline-block;width:calc(100% - 5.33rem);white-space:nowrap;text-overflow:ellipsis;overflow:hidden;word-break:break-all}.activeRule[data-v-3fbee3fa]{margin-top:2.51rem;font-size:1.07rem;color:#fff;line-height:2.51rem}.activeRule-content[data-v-3fbee3fa]{width:17.17rem;height:8.21rem;margin:1.49rem auto .43rem;font-size:.64rem;line-height:1.17rem;text-align:left;box-sizing:border-box;overflow-y:auto;padding:1.01rem .91rem;word-wrap:break-word;color:#fed200}.content-msg[data-v-3fbee3fa]{border:1px solid #ffdda6;background:#fff2db;padding:10px;height:1.2rem;font-size:.8rem;z-index:999;position:fixed;left:0;right:0}.back-pic[data-v-3fbee3fa]{margin:0;position:absolute;max-width:1200px;width:94%;padding-bottom:3rem;background-color:#fff;border-radius:.2rem}.back-pic-img[data-v-3fbee3fa]{width:72.38%!important;margin:1rem 0;max-width:1200px}.border50[data-v-3fbee3fa]{border-radius:50%}.success-img[data-v-3fbee3fa]{width:3.42rem;border-radius:50%;position:absolute;left:50%;margin-left:-1.71rem;top:2rem}.success-txt1[data-v-3fbee3fa]{position:absolute;left:11.5%;top:6.42rem;width:77%;color:#fff}.success-txt2[data-v-3fbee3fa]{width:77%;position:absolute;left:11.5%;top:8.42rem;white-space:nowrap;text-overflow:ellipsis;overflow:hidden;word-break:break-all;padding:0 1rem;box-sizing:border-box;color:#fff}.success-btn[data-v-3fbee3fa]{background:#fff;width:8rem;height:2.13rem;line-height:2.13rem;position:absolute;bottom:1.87rem;left:50%;margin-left:-4rem;border-radius:1.07rem;font-size:.85rem;color:#ff683f}[data-v-3fbee3fa] .uni-transition{overflow-y:auto;background-color:rgba(0,0,0,.75)}.delete[data-v-3fbee3fa]{width:125px}.errorPop[data-v-3fbee3fa]{width:16rem /* 300/18.75 */;height:17.067rem /* 320/18.75 */;background:#fff;box-shadow:0 9px 25px 8px rgba(208,6,40,.61);border-radius:5px}.errorPop-btn[data-v-3fbee3fa]{width:240px;height:45px;background-color:#e73424;border-radius:8px;color:#fff;margin-top:1.44rem /* 27/18.75 */}",""]),t.exports=e},a8de:function(t,e,a){"use strict";a.r(e);var i=a("3404"),r=a("ec10");for(var o in r)["default"].indexOf(o)<0&&function(t){a.d(e,t,(function(){return r[t]}))}(o);a("bd6e");var n,s=a("f0c5"),l=Object(s["a"])(r["default"],i["b"],i["c"],!1,null,"3fbee3fa",null,!1,i["a"],n);e["default"]=l.exports},b8a0:function(t,e,a){t.exports=a.p+"static/img/btn3.67b63976.png"},bd6e:function(t,e,a){"use strict";var i=a("f3c2"),r=a.n(i);r.a},c6f5:function(t,e,a){t.exports=a.p+"static/img/circle-bgc.f57cb841.png"},e16e:function(t,e,a){t.exports=a.p+"static/img/award.f25fd84c.png"},eb43:function(t,e,a){t.exports=a.p+"static/img/end.dcca0722.png"},ec10:function(t,e,a){"use strict";a.r(e);var i=a("fb0d"),r=a.n(i);for(var o in i)["default"].indexOf(o)<0&&function(t){a.d(e,t,(function(){return i[t]}))}(o);e["default"]=r.a},f3c2:function(t,e,a){var i=a("a635");"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var r=a("4f06").default;r("d98e2044",i,!0,{sourceMap:!1,shadowMode:!1})},fb0d:function(t,e,a){"use strict";var i=a("ee27");a("99af"),a("c975"),a("d81d"),a("b680"),a("d3b7"),a("e25e"),a("4d63"),a("ac1f"),a("25f0"),a("466d"),a("841c"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,a("96cf");var r=i(a("c964")),o=a("b970"),n=i(a("d044")),s=i(a("2c4b")),l={name:"index",inject:["initPage","getCopyright"],components:{Footer:s.default},data:function(){return{numToChinese:{1:"一",2:"二",3:"三",4:"四",5:"五",6:"六",7:"七",8:"八",9:"九",10:"十"},isLoading:!0,wx:!1,wxWork:!1,commonUrl:this.$store.state.commonUrl,windowWidth:1200,windowHeight:1200,paddingTop:{paddingTop:""},awardData:[],itemNum:6,chance:0,chance2:0,limitNum:0,chance3:0,list:[],recordList:[],rules:[],awardRes:{},status:0,raffleListUrl:"",url:"",shareData:{},awardId:"",externalId:"",isContact:"",my_url:"",join_id:"",codeUrl:"",rotateSpeed:"",startFlag:!0,is_mine:"",area_type:1,lat:"",lng:"",err_msg:"",external_id:"",is_refresh:0,ele_refresh:1,is_help:"",add_chance:"",back_pic_url:"",creatingPoster:!1,fontSize:"14",align:"left",nickNameStyle:{},shape:"",avatarStyle:{},is_avatar:0,head_url:"",qrcode_url:"",qrcodeStyle:{},color:"#F5F5F5",imgHeight:"",imgWidth:"",is_nickname:0,nick_name:"",nickNameLeft:"",posterUrl:"",base64Data:"",bottom:"",imgPaddingTop:"100px",nick_name2:"",avatar2:"",showPoster:!1,is_show_copyright:localStorage.getItem("is_show_copyright"),isNeedShare:1}},onShow:function(){},methods:{showAward:function(){this.$refs.awardPopup.open()},closeAwardPop:function(){this.$refs.awardPopup.close()},changeAward:function(t){t.show||this.$refs.awardPopup.close()},openPopup:function(t){t.show||1==this.is_refresh&&1==this.ele_refresh&&this.getData()},openPopup5:function(t){this.showPoster=t.show},openPopup6:function(t){t.show||this.getData()},createPoster:function(){var t=this;if(this.isLoading=!0,this.$refs.popup5.open(),setTimeout((function(){t.isLoading=!1}),1e3),!this.creatingPoster){this.creatingPoster=!0;var e=document.createElement("canvas"),a=e.getContext("2d"),i=this,r=window.devicePixelRatio,o=new Image;o.setAttribute("crossOrigin","anonymous"),o.src=this.commonUrl+this.back_pic_url,o.onload=function(){if(e.width=.77*i.windowWidth*r,e.height=.77*i.windowWidth*o.height/o.width*r,a.drawImage(o,0,0,e.width,e.height),1==i.is_nickname){a.globalCompositeOperation="source-over";var n=i.nickNameStyle.x/250*i.windowWidth*.77*r,s=(i.nickNameStyle.y/250*i.windowWidth*.77+i.nickNameStyle.h/250*i.windowWidth*.77/1.5)*r,l=i.nickNameStyle.w/250*i.windowWidth*.77*r;a.fillStyle=i.color,a.font=i.fontSize*r+"px 'Avenir',Helvetica,Arial,sans-serif",n<0?(n=0,a.textAlign="left",a.fillText(i.nick_name,n,s)):"left"==t.align?(a.textAlign=t.align,a.fillText(i.nick_name,n,s)):"center"==t.align?(a.textAlign=t.align,a.fillText(i.nick_name,n+l/2,s)):"right"==t.align&&(a.textAlign=t.align,a.fillText(i.nick_name,n+l,s))}var c=new Image;if(c.src=t.commonUrl+t.back_pic_url,c.onload=function(){i.imgHeight=.77*i.windowWidth/c.width*c.height+"px",i.imgWidth=.77*i.windowWidth+"px",i.windowHeight-.77*i.windowWidth/c.width*c.height>0?i.bottom=0:i.bottom=(i.windowHeight-.77*i.windowWidth/c.width*c.height)/18.75-1.97+"rem"},1==i.is_avatar){var d=new Image;d.setAttribute("crossOrigin","anonymous"),d.src=i.base64Data,d.onload=function(){if("circle"==i.shape)d.src=i.circle_image_v2(d,1),d.onload=function(){a.globalCompositeOperation="source-over";var t=i.avatarStyle.x/250*i.windowWidth*.77*r,o=i.avatarStyle.y/250*i.windowWidth*.77*r,n=i.avatarStyle.w/250*i.windowWidth*.77*r;a.drawImage(d,t,o,n,n),i.addQrcode(a,e,r)};else{a.globalCompositeOperation="source-over";var t=i.avatarStyle.x/250*i.windowWidth*.77*r,o=i.avatarStyle.y/250*i.windowWidth*.77*r,n=i.avatarStyle.w/250*i.windowWidth*.77*r;a.drawImage(d,t,o,n,n),i.addQrcode(a,e,r)}}}else i.addQrcode(a,e,r)}}},addQrcode:function(t,e,a){var i=this,r=setInterval((function(){new n.default(i.$refs.qrcode,{text:i.qrcode_url,width:parseInt((i.qrcodeStyle.w/250*i.windowWidth*.77*a).toString()),height:parseInt((i.qrcodeStyle.w/250*i.windowWidth*.77*a).toString()),colorDark:"#000000",colorLight:"#FFFFFF",correctLevel:n.default.CorrectLevel.H});var o=new Image;document.getElementById("qrcode").getElementsByTagName("img").length>0&&(o.src=document.getElementById("qrcode").getElementsByTagName("img")[0].getAttribute("src"),o.src&&null!==o&&(clearInterval(r),o.setAttribute("crossOrigin","anonymous"),o.onload=function(){t.globalCompositeOperation="source-over";var r=i.qrcodeStyle.x/250*i.windowWidth*.77*a,n=i.qrcodeStyle.y/250*i.windowWidth*.77*a,s=i.qrcodeStyle.w/250*i.windowWidth*.77*a;t.drawImage(o,r,n,s,s),t.scale(a,a),i.createUrl(e)}),document.getElementById("qrcode").getElementsByTagName("canvas").length>0&&(clearInterval(r),o.src=document.getElementById("qrcode").getElementsByTagName("canvas")[0].toDataURL("image/png"),o.onload=function(){t.globalCompositeOperation="source-over";var r=i.qrcodeStyle.x/250*i.windowWidth*.77*a,n=i.qrcodeStyle.y/250*i.windowWidth*.77*a,s=i.qrcodeStyle.w/250*i.windowWidth*.77*a;t.drawImage(o,r,n,s,s),t.scale(a,a),i.createUrl(e)}))}),100)},circle_image_v2:function(t,e){var a,i,r,o,n=e||0;if(n?a=t.naturalWidth>t.naturalHeight?t.naturalHeight/2:t.naturalWidth/2:(a=t.width>t.height?t.height/2:t.width/2,o=t.naturalWidth>t.naturalHeight?t.naturalHeight:t.naturalWidth),i=2*a,r=document.createElement("canvas"),!r.getContext)return console.log("您的浏览器版本过低，暂不支持。"),!1;r.width=i,r.height=i;var s=r.getContext("2d");return s.clearRect(0,0,i,i),s.save(),s.beginPath(),s.arc(a,a,a,0,2*Math.PI,!1),s.clip(),n?s.drawImage(t,0,0,i,i,0,0,i,i):s.drawImage(t,0,0,o,o,0,0,i,i),s.restore(),r.toDataURL("image/png")},createUrl:function(t){this.$refs.qrcode.innerHTML="",this.posterUrl=t.toDataURL("image/png"),this.creatingPoster=!1},initPageNew:function(){var t=this;uni.getSystemInfo({success:function(e){t.windowWidth=e.windowWidth>1200?1200:e.windowWidth,t.windowHeight=e.windowHeight>1200?1200:e.windowHeight}}),this.external_id=null!=this.getParameter("external_userid")?this.getParameter("external_userid"):localStorage.getItem("external_int_id"),this.getData()},getData:function(){var t=this;return(0,r.default)(regeneratorRuntime.mark((function e(){var a,i,r,n,s,l,c;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return 0==t.is_refresh&&(t.isLoading=!0),a=t.getParameter("corp_id"),t.getParameter("corpid"),i=t.getParameter("agent_id"),r=t.getParameter("assist"),n=t.$cookies.get(t.$store.state.authKey),e.next=8,t.axios.post("wap-award/get-awards",{corp_id:a,agent_id:i,code:n,assist:r,external_id:t.external_id});case 8:s=e.sent,l=s.data,0!=l.error?(t.limit2(1),o.Toast.fail(l.error_msg)):(0==t.is_refresh&&t.limit2(l.data.is_forbid),t.isLoading=!1,document.title=l.data.title,t.shareData=l.data.shareData,t.chance=l.data.chance,t.list=l.data.info.awards,t.itemNum=t.list.length,t.awardData=l.data.awardData,t.chance2=l.data.info.rules.share_setting[0].total_num,t.limitNum=l.data.info.rules.share_setting[1].limit1,t.chance3=l.data.info.rules.share_setting[1].day_num,t.recordList=l.data.info.records,t.rules=l.data.info.rules,t.status=l.data.status,t.awardId=l.data.awardId,t.externalId=l.data.externalId,t.isContact=l.data.isContact,t.my_url=l.data.my_url,t.join_id=l.data.join_id,t.is_mine=l.data.is_mine,t.raffleListUrl="/pages/raffle/list?id="+t.awardId+"&jid="+t.join_id,t.area_type=l.data.area_type,t.external_id=l.data.external_id,t.is_help=l.data.is_help,t.isNeedShare=l.data.is_share_open,t.$forceUpdate(),t.qrcode_url=l.data.share_url,t.qrcodeStyle=l.data.picRule.qrCode,t.nickNameStyle=l.data.picRule.nickName,t.is_nickname=l.data.picRule.is_nickname,t.nick_name=l.data.nick_name,t.color=l.data.picRule.color,t.align=l.data.picRule.align,t.fontSize=l.data.picRule.font_size,t.head_url=l.data.head_url,t.shape=l.data.picRule.shape,t.avatarStyle=l.data.picRule.avatar,t.is_avatar=l.data.picRule.is_avatar,t.back_pic_url=l.data.picRule.back_pic_url,t.base64Data=l.data.base64Data,0==t.is_refresh&&(t.$nextTick((function(){for(var e=document.createDocumentFragment(),a=0;a<t.itemNum;a++){var i=document.createElement("ul"),r=360/t.itemNum*a,o=90-360/t.itemNum,n=360/t.itemNum;if(180==n){var s=14.13;o=0,i.style.cssText="width: ".concat(s,"rem !important; transform-origin: bottom center; ")}else if(n>90){var l=7.065/Math.cos((n-90)*Math.PI/180),c=7.065-l;i.style.cssText="width: ".concat(l,"rem !important; left: ").concat(c,"rem !important; ")}else if(n<90){var d=7.065*Math.sin(n*Math.PI/180),p=7.065-d;i.style.height=d+"rem!important",i.style.top=p+"rem!important"}(4==t.itemNum&&3==a||7==t.itemNum&&6==a)&&(i.style.background="#FFFAF1"),i.style.transform="rotate(".concat(r,"deg) skewX(").concat(o,"deg)"),e.appendChild(i)}var u=document.getElementsByClassName("turntable")[0];u.appendChild(e)})),localStorage.setItem("openid",l.data.openid),c=setInterval((function(){1==t.ws.websocket.readyState&&(clearInterval(c),t.ws.websocketSend(JSON.stringify({channel:"bind",info:{session_id:t.global.session_id,uid:null!=localStorage.getItem("uid")?localStorage.getItem("uid"):"",subId:2==localStorage.getItem("user_type")&&null!=localStorage.getItem("sub_id")?localStorage.getItem("sub_id"):"",openid:null!=localStorage.getItem("openid")?localStorage.getItem("openid"):"",bindType:3}})))}),300)),1==t.status?t.$nextTick((function(e){t.$refs.popup3.open()})):2==t.status&&(t.startFlag=!1),t.showPoster&&t.$refs.popup5.close(),t.is_refresh=0);case 11:case"end":return e.stop()}}),e)})))()},listUlStyle:function(t,e){var a={transform:"rotate("+360/e*t+"deg) skewX("+(90-360/e)+"deg)"},i=360/e;if(180==i){var r=12.7;a.width=r+"rem !important",a.transformOrigin="bottom center",a.transform="rotate("+360/e*t+"deg)"}else if(i>90){var o=6.35/Math.cos((i-90)*Math.PI/180),n=6.35-o;a.width=o+"rem !important",a.left=n+"rem !important"}else if(i<90){var s=6.35*Math.sin(i*Math.PI/180),l=6.35-s;a.height=s+"rem !important",a.top=l+"rem !important"}return(4==e&&3==t||7==e&&6==t)&&(a.background="#FEE4B9"),a},listLiStyle:function(t){var e={transform:"skewX("+-(90-360/t)+"deg) rotate("+-(90-360/t/2)+"deg)"};return 2==t?e={transform:"skewX(0deg) rotate("+-(90-360/t/2)+"deg)",marginLeft:0}:7==t&&(e={transform:"skewX("+-(90-360/t)+"deg) rotate("+-(90-360/t/2)+"deg)",marginLeft:"2.667rem",marginTop:"-0.533rem"}),e},limit2:function(t){var e=this;return(0,r.default)(regeneratorRuntime.mark((function a(){var i,r,n,s;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return e,e.url=window.location.href,i=e.getParameter("agent_id"),localStorage.setItem("agent_id",i),a.next=6,e.axios.post("chat-message/get-config",{url:e.url,agent_id:i});case 6:r=a.sent,n=r.data,0!=n.error?o.Toast.fail(n.error_msg):(s=e,s.uid=n.data.uid,s.corpid=n.data.corpid,localStorage.setItem("uid",s.uid),localStorage.getItem("uid")&&s.getCopyright(s.refresh),s.$store.dispatch("setCorpId",s.corpid),s.ticketData=n.data.ticketData,s.agentData=n.data.agentData,s.$store.state.wx.config({beta:!0,debug:!1,appId:s.ticketData.corpid,timestamp:s.ticketData.timestamp,nonceStr:s.ticketData.nonceStr,signature:s.ticketData.signature,jsApiList:s.jsApiList}),s.$store.state.wx.error((function(t){if("undefined"!==typeof t.errCode&&2==t.errCode){if("undefined"!==typeof t.err_Info&&"invalid corpid"==t.err_Info&&s.wxWork)return o.Toast.fail({forbidClick:!0,duration:0,message:"请在微信中打开"}),!1}else if("undefined"!==typeof t.errMsg&&-1!=t.errMsg.indexOf("invalid corpid"))return o.Toast.fail({forbidClick:!0,duration:0,message:"请在微信中打开"}),!1;console.log(t,"res"),o.Toast.fail({forbidClick:!0,duration:0,message:"初始化失败，请刷新重试"})})),s.$store.state.wx.ready((function(){if(1==t||s.wx)s.$store.state.wx.hideOptionMenu();else{var e={title:s.shareData.title,desc:s.shareData.desc.length>0?s.shareData.desc:s.shareData.shareUrl,link:s.shareData.shareUrl,imgUrl:s.shareData.pic_url,success:function(){o.Toast.success("分享成功")},fail:function(){o.Toast.fail("分享失败")},complete:function(){}};s.$store.state.wx.onMenuShareAppMessage(e),this.wxWork&&(s.$store.state.wx.onMenuShareWechat(e),s.$store.state.wx.invoke("shareAppMessage",{title:e.title,desc:e.desc,link:e.link,imgUrl:e.imgUrl},(function(t){"shareAppMessage:ok"==t.err_msg?o.Toast.success("分享成功"):o.Toast.fail("分享失败")})),s.$store.state.wx.invoke("shareWechatMessage",{title:e.title,desc:e.desc,link:e.link,imgUrl:e.imgUrl},(function(t){"shareWechatMessage:ok"==t.err_msg?o.Toast.success("分享成功"):o.Toast.fail("分享失败")})),s.$store.state.wx.invoke("shareToExternalContact",{title:e.title,desc:e.desc,link:e.link,imgUrl:e.imgUrl},(function(t){"shareToExternalContact:ok"==t.err_msg?o.Toast.success("分享成功"):o.Toast.fail("分享失败")}))),s.$store.state.wx.onMenuShareTimeline(s.$delete(e,"desc"))}})));case 9:case"end":return a.stop()}}),a)})))()},refresh:function(){this.is_show_copyright=localStorage.getItem("is_show_copyright"),this.$forceUpdate()},getParameter:function(t){var e=new RegExp("(^|&)"+t+"=([^&]*)(&|$)"),a=window.location.search.substr(1).match(e);return null!=a?unescape(a[2]):null},again:function(t,e){this.ele_refresh=e,this.$refs.popup.close(),this.$refs.popup2.close(),this.$refs.popup3.close(),this.start(t,e)},startAward:function(){this.startFlag&&(1==this.status?this.$refs.popup3.open():this.externalId>0&&0==this.is_mine?o.Toast.fail("请点击进入我的，进行抽奖"):1==this.isContact?(this.startFlag=!1,this.start()):(this.startFlag=!1,this.start3()))},getLocation:function(t){var e=this;e.$store.state.wx.getLocation({type:"wgs84",success:function(a){e.lat=a.latitude,e.lng=a.longitude,e.start2(t)},fail:function(t){e.err_msg="仅限部分地区参与，需先知道您当前地址。",e.$refs.errorPop.open()}})},closeErrorPop:function(){this.$refs["errorPop"].close()},start:function(t,e){var a=this;return(0,r.default)(regeneratorRuntime.mark((function i(){var r,n,s,l,c,d,p,u,g;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:if(1!=a.status){i.next=5;break}a.startFlag=!0,a.$refs.popup3.open(),i.next=17;break;case 5:if(a.is_refresh=null!=t&&"undefined"!=typeof t?t:0,a.ele_refresh=null!=e&&"undefined"!=typeof e?e:1,!(a.chance>0)){i.next=15;break}return i.next=10,a.axios.post("wap-award/set-prize",{uid:localStorage.getItem("uid"),id:a.awardId,join_id:a.join_id});case 10:r=i.sent,n=r.data,0!=n.error?(a.startFlag=!0,o.Toast.fail(n.error_msg)):(s=n.data.info.id,a.awardRes=n.data.info,l=0,a.list.map((function(t,e){s==t.id&&(l=e)})),c=-l*(360/a.list.length)+90-Math.floor(45*Math.random()+1),d=c+1800,p=(c/360*1+5).toFixed(2),a.rotateSpeed=1e3*p,u=document.getElementsByClassName("turntable")[0],u.removeAttribute("style"),g=document.getElementsByClassName("bg")[0],g.removeAttribute("style"),setTimeout((function(){u.style.transform="rotate(".concat(d,"deg)"),u.style.transition="transform ".concat(p,"s ease-out"),g.style.transform="rotate(".concat(d,"deg)"),g.style.transition="transform ".concat(p,"s ease-out")}),10),setTimeout((function(){0==s?a.$refs.popup.open():a.$refs.popup2.open(),a.chance=n.data.chance,a.recordList=n.data.records,a.startFlag=!0}),1e3*p)),i.next=17;break;case 15:a.startFlag=!0,o.Toast.fail({message:"您已经抽了很多了，给小伙伴一点机会吧",duration:2e3});case 17:case"end":return i.stop()}}),i)})))()},start2:function(t){var e=this;return(0,r.default)(regeneratorRuntime.mark((function a(){var i,r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(1!=e.status){a.next=5;break}e.startFlag=!0,e.$refs.popup3.open(),a.next=10;break;case 5:return a.next=7,e.axios.post("wap-award/code",{uid:localStorage.getItem("uid"),id:e.awardId,externalId:e.externalId,external_id:e.external_id,lat:e.lat,lng:e.lng});case 7:i=a.sent,r=i.data,0!=r.error?(e.startFlag=!0,o.Toast.fail(r.error_msg)):(0==r.data.open_type?(e.codeUrl=r.data.qr_code,e.$refs.popup4.open()):t&&1==t?(o.Toast.success({message:"成功帮好友获得"+e.chance2+"次抽奖机会",duration:2e3}),setTimeout((function(){e.getData()}),1500)):(e.isContact=r.data.isContact,e.join_id=r.data.join_id,e.is_refresh=r.data.is_refresh,1==e.is_refresh&&e.getData(),e.start(e.is_refresh)),e.startFlag=!0);case 10:case"end":return a.stop()}}),a)})))()},start3:function(t){2==this.area_type?this.getLocation(t):this.start2(t)},closePop:function(){this.$refs.popup.close(),1==this.is_refresh&&this.getData()},closePop2:function(){this.$refs.popup2.close(),1==this.is_refresh&&this.getData()},closePop3:function(){this.$refs.popup3.close()},closePop4:function(){this.$refs.popup4.close()},closePop6:function(){this.$refs.popup6.close()},websocketOnMessage:function(t){"undefined"!=typeof t.type&&"award"==t.type&&"undefined"!=typeof t.has_chat&&t.has_chat&&(this.ws.setCallback(),localStorage.getItem("openid")&&localStorage.removeItem("openid"),this.nick_name2=t.nick_name,this.avatar2=t.avatar,this.add_chance=t.add_chance,this.showPoster&&this.$refs.popup5.close(),t.is_refresh&&"undefined"!=typeof t.is_refresh&&1==t.is_refresh?(this.$refs.popup4.close(),this.initPage(this.getData)):""!=this.add_chance&&this.$refs.popup6.open())},fun:function(){this.$router.go(-4)},reloadPage:function(){this.$refs.popup4.close(),this.initPage(this.getData)}},mounted:function(){window.history&&window.history.pushState&&(history.pushState(null,null,document.URL),window.addEventListener("popstate",this.fun,!1))},destroyed:function(){window.removeEventListener("popstate",this.fun,!1)},onLoad:function(){this.wx=-1!==navigator.userAgent.toLocaleLowerCase().indexOf("micromessenger")&&-1===navigator.userAgent.toLocaleLowerCase().indexOf("wxwork"),this.wxWork=-1!==navigator.userAgent.toLocaleLowerCase().indexOf("micromessenger")&&-1!==navigator.userAgent.toLocaleLowerCase().indexOf("wxwork"),this.wx&&(this.jsApiList=["hideOptionMenu","onMenuShareAppMessage","onMenuShareTimeline","getLocation"]),this.wxWork&&(this.jsApiList=["hideOptionMenu","onMenuShareAppMessage","onMenuShareWechat","onMenuShareTimeline","shareAppMessage","shareWechatMessage","shareToExternalContact","getLocation"]),this.ws.setCallback(this.websocketOnMessage);var t=window.innerHeight,e=(t-40)/2;this.paddingTop.paddingTop=parseInt(e)+"px";var a=(t-314.27)/2;this.imgPaddingTop=parseInt(a)+"px";var i=this;this.$store.dispatch("setWx",(function(){i.initPage(i.initPageNew)}))}};e.default=l}}]);