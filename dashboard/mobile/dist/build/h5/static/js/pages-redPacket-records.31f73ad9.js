(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-redPacket-records"],{"0431":function(t,e,i){var a=i("4d06");"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var n=i("4f06").default;n("860ee8c2",a,!0,{sourceMap:!1,shadowMode:!1})},"0e8a":function(t,e,i){"use strict";i.d(e,"b",(function(){return n})),i.d(e,"c",(function(){return s})),i.d(e,"a",(function(){return a}));var a={uniNavBar:i("f31d").default},n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-uni-view",{staticClass:"box"},[a("v-uni-view",{directives:[{name:"show",rawName:"v-show",value:!t.sendVisible,expression:"!sendVisible"}]},[t.isReady?a("v-uni-view",{staticClass:"list"},[0==t.isSend||t.chatId?t._e():a("v-uni-view",{staticStyle:{"font-size":"0.747rem  /* 14/18.75 */","text-align":"left",padding:"0.533rem  /* 10/18.75 */ 1.067rem  /* 20/18.75 */ 0"}},[t._v("今日，该客户还可继续领取红包"),a("v-uni-text",{staticStyle:{color:"red"}},[t._v(t._s(t.externalHnum))]),t._v("次/"),a("v-uni-text",{staticStyle:{color:"red"}},[t._v(t._s(t.externalHmoney))]),t._v("元；您最多向该客户发放红包"),a("v-uni-text",{staticStyle:{color:"red"}},[t._v(t._s(t.userHnum))]),t._v("次/"),a("v-uni-text",{staticStyle:{color:"red"}},[t._v(t._s(t.userHmoney))]),t._v("元")],1),0===t.is_owner?a("v-uni-view",{staticStyle:{"font-size":"0.747rem  /* 14/18.75 */","text-align":"left",padding:"0.533rem  /* 10/18.75 */ 1.067rem  /* 20/18.75 */ 0"}},[a("v-uni-text",{staticStyle:{color:"red"}},[t._v("只有群主才能发送群红包")])],1):t._e(),0==t.isSend?a("v-uni-view",{staticStyle:{"font-size":"0.747rem  /* 14/18.75 */","text-align":"left",padding:"0.533rem  /* 10/18.75 */ 1.067rem  /* 20/18.75 */ 0",color:"red"}},[t._v(t._s(t.sendMsg))]):t._e(),a("v-uni-view",{staticClass:"list-title-p"},[a("v-uni-view",{staticClass:"list-title"},[t._v("红包记录"),t.count>0?a("v-uni-text",[t._v("（"+t._s(t.count)+"条）")]):t._e()],1),a("v-uni-button",{staticClass:"send-btn",style:1==t.isSend&&0!==t.is_owner?{backgroundColor:"#F25442"}:"",attrs:{type:"primary",disabled:0==t.isSend||0===t.is_owner},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.openSend.apply(void 0,arguments)}}},[t._v("发送红包")])],1),a("v-uni-view",[t._l(t.list,(function(e){return t.list.length>0?a("v-uni-view",{staticClass:"list-content",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.detail(e.id,e.type)}}},[a("v-uni-view",{staticClass:"list-content-col"},[a("v-uni-text",{staticClass:"list-content-title"},[t._v("领取时间")]),""!=e.send_time?a("v-uni-text",{staticClass:"list-content-text"},[t._v(t._s(e.send_time))]):a("v-uni-text",{staticClass:"list-content-text"},[t._v("暂无")])],1),a("v-uni-view",{staticClass:"list-content-col"},[a("v-uni-text",{staticClass:"list-content-title"},[t._v("红包类型")]),a("v-uni-text",{staticClass:"list-content-text"},[t._v(t._s(e.type_name))])],1),e.act_name?a("v-uni-view",{staticClass:"list-content-col"},[a("v-uni-text",{staticClass:"list-content-title"},[t._v("活动名称")]),a("v-uni-text",{staticClass:"list-content-text"},[t._v(t._s(e.act_name))])],1):t._e(),a("v-uni-view",{staticClass:"list-content-col"},[a("v-uni-text",{staticClass:"list-content-title"},[t._v("发送人")]),""!=e.user_name?a("v-uni-text",{staticClass:"list-content-text"},[t._v(t._s(e.user_name))]):a("v-uni-text",{staticClass:"list-content-text"},[t._v("暂无")])],1),a("v-uni-view",{staticClass:"list-content-col"},[a("v-uni-text",{staticClass:"list-content-title"},[t._v("红包金额")]),a("v-uni-text",{staticClass:"list-content-text"},[a("v-uni-text",{staticStyle:{color:"#F25442"}},[t._v(t._s(e.money))]),t._v("元")],1)],1),t.chatId?t._e():a("v-uni-view",{staticClass:"list-content-col"},[a("v-uni-text",{staticClass:"list-content-title"},[t._v("给客户留言")]),""!=e.message?a("v-uni-text",{staticClass:"list-content-text"},[t._v(t._s(e.message))]):a("v-uni-text",{staticClass:"list-content-text"},[t._v("暂无")])],1),t.chatId?a("v-uni-view",{staticClass:"list-content-col"},[a("v-uni-text",{staticClass:"list-content-title"},[t._v("祝福语")]),""!=e.message?a("v-uni-text",{staticClass:"list-content-text"},[t._v(t._s(e.message))]):a("v-uni-text",{staticClass:"list-content-text"},[t._v("恭喜发财，大吉大利")])],1):t._e(),a("v-uni-view",{staticClass:"list-content-col"},[a("v-uni-text",{staticClass:"list-content-title"},[t._v("员工备注")]),""!=e.remark?a("v-uni-text",{staticClass:"list-content-text"},[t._v(t._s(e.remark))]):a("v-uni-text",{staticClass:"list-content-text"},[t._v("暂无")])],1),t.chatId?t._e():a("v-uni-view",{staticClass:"list-content-col"},[a("v-uni-text",{staticClass:"list-content-title"},[t._v("商户订单号")]),""!=e.order_id?a("v-uni-text",{staticClass:"list-content-text"},[t._v(t._s(e.order_id))]):a("v-uni-text",{staticClass:"list-content-text"},[t._v("暂无")])],1),t.chatId?t._e():a("v-uni-view",{staticClass:"list-content-col"},[a("v-uni-text",{staticClass:"list-content-title"},[t._v("微信付款单号")]),""!=e.transaction_id?a("v-uni-text",{staticClass:"list-content-text"},[t._v(t._s(e.transaction_id))]):a("v-uni-text",{staticClass:"list-content-text"},[t._v("暂无")])],1)],1):t._e()})),0==t.list.length?a("img",{staticClass:"list-empty",attrs:{src:i("ed0a"),alt:""}}):t._e()],2),t.list.length>0?a("v-uni-view",{staticClass:"custom-tabs-loading"},[t._v(t._s(t.loadingText))]):t._e(),0==t.list.length?a("Footer",{directives:[{name:"show",rawName:"v-show",value:1==t.is_show_copyright,expression:"is_show_copyright == 1"}],staticStyle:{position:"absolute",bottom:"0",left:"0",right:"0","z-index":"9999999"}}):a("Footer",{directives:[{name:"show",rawName:"v-show",value:1==t.is_show_copyright,expression:"is_show_copyright == 1"}]})],1):t._e()],1),t.sendVisible?a("v-uni-view",{staticClass:"send-pop"},[a("uni-nav-bar",{attrs:{"left-icon":"back",title:"员工发红包",shadow:!1,"background-color":"#FFFFFF"},on:{clickLeft:function(e){arguments[0]=e=t.$handleEvent(e),t.back.apply(void 0,arguments)}}}),a("v-uni-view",{staticStyle:{padding:"0.64rem 0.8rem 2.453rem 0.8rem",background:"#F1F1F1"}},[2==t.redType&&t.chatId?a("v-uni-view",{staticClass:"send-taggle"},[t._v("当前为拼手气红包，"),a("v-uni-text",{staticStyle:{color:"#C49545"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.changeRedType(1)}}},[t._v("改为普通红包")])],1):t._e(),1==t.redType&&t.chatId?a("v-uni-view",{staticClass:"send-taggle"},[t._v("当前为普通红包，"),a("v-uni-text",{staticStyle:{color:"#C49545"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.changeRedType(2)}}},[t._v("改为拼手气红包")])],1):t._e(),a("v-uni-view",{staticClass:"send-scroll",staticStyle:{"margin-top":"0.693rem  /* 13/18.75 */"}},[a("v-uni-view",{staticClass:"send-total"},[2==t.redType?a("v-uni-view",{staticStyle:{width:"4.8rem  /* 90/18.75 */",display:"inline-block"}},[a("v-uni-text",{staticClass:"send-total-icon"},[t._v("拼")]),t._v("总金额")],1):t._e(),1==t.redType?a("v-uni-view",{staticStyle:{width:"4.8rem  /* 90/18.75 */",display:"inline-block"}},[t._v("单个红包")]):t._e(),a("v-uni-view",{staticStyle:{float:"right","text-align":"right",width:"calc(100% - 4.8rem)"}},[a("v-uni-input",{staticStyle:{width:"calc(100% - 4.8rem - 1em)",display:"inline-block","vertical-align":"middle","text-align":"right","margin-right":"0.48rem  /* 9/18.75 */"},attrs:{type:"digit",placeholder:"0.00"},on:{input:function(e){arguments[0]=e=t.$handleEvent(e),t.inputChange.apply(void 0,arguments)},blur:function(e){arguments[0]=e=t.$handleEvent(e),t.inputBlur.apply(void 0,arguments)},focus:function(e){arguments[0]=e=t.$handleEvent(e),t.inputFocus.apply(void 0,arguments)}},model:{value:t.moneyData,callback:function(e){t.moneyData=e},expression:"moneyData"}}),t._v("元")],1)],1),t.moneyList.length>0?a("v-uni-view",{staticClass:"preview-box",style:t.height},[a("v-uni-swiper",{staticClass:"swiper",attrs:{"indicator-dots":t.indicatorDots,autoplay:t.autoplay,interval:t.interval,duration:t.duration}},t._l(t.moneyList,(function(e){return a("v-uni-swiper-item",[a("v-uni-view",{staticClass:"swiper-item"},t._l(e,(function(e){return a("v-uni-view",{staticClass:"checkbox",class:{active:t.moneyData==e.money},on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.chooseMoney(e)}}},[t._v("￥"+t._s(e.money))])})),1)],1)})),1)],1):t._e()],1),t.chatId?a("v-uni-view",{staticClass:"send-total",staticStyle:{"margin-top":"0.693rem  /* 13/18.75 */"}},[t._v("红包个数"),a("v-uni-view",{staticStyle:{float:"right","text-align":"right",width:"calc(100% - 4.8rem)"}},[a("v-uni-input",{staticStyle:{display:"inline-block","vertical-align":"middle","text-align":"right","margin-right":"0.48rem  /* 9/18.75 */",width:"calc(100% - 1.6rem  /* 30/18.75 */)"},attrs:{type:"text",placeholder:"填写个数"},on:{input:function(e){arguments[0]=e=t.$handleEvent(e),t.changeSendNum.apply(void 0,arguments)}},model:{value:t.sendNum,callback:function(e){t.sendNum=e},expression:"sendNum"}}),t._v("个")],1)],1):t._e(),t.chatId?a("v-uni-view",{staticClass:"send-group-num"},[t._v("本群共"+t._s(t.chatInfoNum)+"人")]):t._e(),a("v-uni-view",{staticClass:"send-total",staticStyle:{"margin-top":"0.693rem  /* 13/18.75 */"}},[t._v("祝福语"),a("v-uni-view",{staticStyle:{float:"right","text-align":"right",width:"calc(100% - 4.8rem)"}},[a("v-uni-input",{staticStyle:{display:"inline-block","vertical-align":"middle","text-align":"right"},attrs:{placeholder:"恭喜发财，大吉大利"},model:{value:t.message,callback:function(e){t.message=e},expression:"message"}})],1)],1),a("v-uni-view",{staticClass:"send-total",staticStyle:{"margin-top":"0.693rem  /* 13/18.75 */"}},[a("v-uni-text",{staticStyle:{color:"#F25442"}},[t._v("*")]),t._v("员工备注"),a("v-uni-view",{staticStyle:{float:"right","text-align":"right",width:"calc(100% - 4.8rem)"}},[a("v-uni-input",{staticStyle:{display:"inline-block","vertical-align":"middle","text-align":"right"},attrs:{placeholder:"请输入备注，30字以内",maxlength:"30"},model:{value:t.remark,callback:function(e){t.remark=e},expression:"remark"}})],1)],1),t.chatId?t._e():a("v-uni-view",{staticClass:"send-money"},[a("v-uni-text",{staticStyle:{"font-size":"0.8rem  /* 15/18.75 */"}},[t._v("￥")]),""!=t.moneyData?a("v-uni-text",[t._v(t._s(t.moneyData))]):t._e(),""==t.moneyData?a("v-uni-text",[t._v("0.00")]):t._e()],1),t.chatId?a("v-uni-view",{staticClass:"send-money"},[a("v-uni-text",{staticStyle:{"font-size":"0.8rem  /* 15/18.75 */"}},[t._v("￥")]),2==t.redType?[""!=t.moneyData?a("v-uni-text",[t._v(t._s(t.moneyData))]):t._e(),""==t.moneyData?a("v-uni-text",[t._v("0.00")]):t._e()]:t._e(),1==t.redType?[""==t.sendNum||""==t.moneyData?a("v-uni-text",[t._v("0.00")]):t._e(),""!=t.sendNum&&""!=t.moneyData?a("v-uni-text",[t._v(t._s(t.sendNum*t.moneyData*100/100))]):t._e()]:t._e()],2):t._e(),a("v-uni-view",{staticClass:"send-money-btn",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.send.apply(void 0,arguments)}}},[t._v("立即发放")])],1)],1):t._e()],1)},s=[]},3160:function(t,e,i){"use strict";var a=i("0431"),n=i.n(a);n.a},"4d06":function(t,e,i){var a=i("24fb");e=a(!1),e.push([t.i,".box[data-v-095659f1]{background:#f6f6f6}\n\n/* 提示窗口 */[data-v-095659f1] .uni-popup__wrapper-box{\n\t/*width: 100%;*/\n\t/*height: 100%;*/}.uni-tip[data-v-095659f1]{\n\n\t/*display: flex;*/\n\t/*flex-direction: column;*/\nwidth:15.04rem /* 282/18.75 */;background-color:#fff;border-radius:4px;left:50%;\n\t/*margin-left: -7.52rem;*/\n\t/*position: fixed;*/\n\t/*top: 15%;*/box-sizing:border-box;font-size:.747rem\n}.uni-tip-title[data-v-095659f1]{text-align:center;font-weight:700;font-size:.853rem ;color:#333;padding:.533rem .8rem ;border-bottom:1px solid #ccc}.uni-tip-content[data-v-095659f1]{font-size:.747rem ;color:#666}.uni-tip-group-button[data-v-095659f1]{\ndisplay:-webkit-box;display:-webkit-flex;display:flex;\n-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;flex-direction:row;margin-top:.8rem ;border-top:1px solid #ccc}.uni-tip-button[data-v-095659f1]{-webkit-box-flex:1;-webkit-flex:1;flex:1;text-align:center;font-size:.747rem ;color:#3b4144;cursor:pointer;padding:.533rem 0}.uni-input[data-v-095659f1]{height:1.28rem /* 24/18.75 */;line-height:1.28rem /* 24/18.75 */;font-size:.747rem ;text-align:left;border:1px solid #ccc;border-radius:.213rem ;padding:0 .427rem ;width:7.68rem /* 144/18.75 */;display:inline-block;vertical-align:middle;margin-right:.267rem\n}.uni-textarea[data-v-095659f1]{border:1px solid #ccc;border-radius:.213rem ;font-size:.747rem ;text-align:left;padding:0 .427rem ;box-sizing:border-box;width:calc(100% - 4.053rem);display:inline-block;vertical-align:middle}uni-textarea[data-v-095659f1]{height:1.28rem /* 24/18.75 */;line-height:1.28rem /* 24/18.75 */;width:auto}[data-v-095659f1] .uni-textarea-placeholder,[data-v-095659f1] .uni-input-placeholder{font-size:.747rem\n}[data-v-095659f1] .uni-tip-button{font-size:.853rem\n}.send[data-v-095659f1]{background:#fff;padding:1.067rem /* 20/18.75 */;overflow:hidden;border-bottom:1px solid #f5f5f5}.send-btn[data-v-095659f1]{\n\t/*width: 4.533rem !* 85/18.75 *!;*/height:1.707rem /* 32/18.75 */;font-size:.747rem ;line-height:1.707rem /* 32/18.75 */;float:right;cursor:pointer}.list[data-v-095659f1]{font-size:.747rem ;background:#fff;text-align:left}.list-title-p[data-v-095659f1]{border-bottom:1px solid #f5f5f5;overflow:hidden;padding:.533rem 1.067rem\n}.list-title[data-v-095659f1]{border-left:4px solid #f25442;padding-left:.267rem ;margin-top:.347rem ;display:inline-block}.list-content[data-v-095659f1]{line-height:.747rem;padding:.8rem 1.067rem;text-align:left;border-bottom:1px solid #f5f5f5}.list-content-col[data-v-095659f1]{padding-bottom:.8rem}.list-content-title[data-v-095659f1]{color:#adaeb6;font-size:.693rem;display:inline-block;vertical-align:top;width:4.373rem /* 82/18.75 */;margin-right:.533rem\n}.list-content-text[data-v-095659f1]{color:#666;font-size:.693rem;display:inline-block;width:calc(100% - 4.907rem);word-break:break-all;line-height:.853rem\n}.uni-tip-msg[data-v-095659f1]{text-align:left;padding:0 15px;display:block}.checkbox[data-v-095659f1]{border:.053rem solid #ccc;line-height:1.6rem /* 30/18.75 */;padding:0 .267rem ;border-radius:.267rem ;width:47%;margin-bottom:.533rem ;text-align:center;box-sizing:border-box}.checkbox[data-v-095659f1]:nth-child(n){float:left}.checkbox[data-v-095659f1]:nth-child(2n){margin-right:0;float:right}.checkbox[data-v-095659f1]:nth-child(5), .checkbox[data-v-095659f1]:nth-child(6){margin-bottom:0}.preview-box[data-v-095659f1]{padding:0 .853rem\n}.swiper[data-v-095659f1]{width:100%;height:100%}.swiper-item[data-v-095659f1]{height:100%}.custom-tabs-loading[data-v-095659f1]{text-align:center;line-height:1.6rem;font-size:.693rem;color:#ccc}.active[data-v-095659f1]{background:#f25442;color:#fff}[data-v-095659f1] .uni-textarea-textarea{font-size:14px}.send-btn[disabled][data-v-095659f1]{background:#ebedf0;color:#969799}.send-btn[disabled][data-v-095659f1]:after{border-color:#ebedf0}.list-empty[data-v-095659f1]{width:36%;position:absolute;left:32%;margin-top:calc(50% - 2.843rem)}.send-pop[data-v-095659f1]{position:absolute;top:0;bottom:0;left:0;right:0;background:#f1f1f1;text-align:left}[data-v-095659f1] .uni-navbar--border{border-bottom-color:transparent}.send-total[data-v-095659f1]{padding:.853rem .693rem ;background:#fff;color:#070f20;font-size:.8rem ;border-radius:.267rem\n}.send-total-icon[data-v-095659f1]{background:#c4974c;border-radius:.107rem ;color:#fff;font-size:.587rem ;padding:.107rem ;margin-right:.48rem\n}[data-v-095659f1] .uni-input-placeholder{color:#b4b4b7}.send-taggle[data-v-095659f1]{color:#6f6f6f;font-size:.64rem ;margin-top:.693rem ;text-align:right}.send-scroll[data-v-095659f1]{background:#fff;border-radius:.267rem ;font-size:.693rem ;color:#070f20}.send-scroll-title[data-v-095659f1]{font-size:.8rem ;padding:.853rem\n}.send-group-num[data-v-095659f1]{font-size:.64rem ;color:#6f6f6f;padding-left:.8rem ;margin-top:.693rem\n}.send-money[data-v-095659f1]{font-size:2.133rem /* 40/18.75 */;color:#333;margin:1.067rem 0;text-align:center}.send-money-btn[data-v-095659f1]{position:fixed;width:calc(100% - 1.6rem);bottom:.8rem;background:#f25442;border-radius:.267rem ;color:#fff;font-size:.8rem ;line-height:2.453rem /* 46/18.75 */;text-align:center}",""]),t.exports=e},"5fd4":function(t,e,i){"use strict";i.r(e);var a=i("0e8a"),n=i("7ee6");for(var s in n)["default"].indexOf(s)<0&&function(t){i.d(e,t,(function(){return n[t]}))}(s);i("3160");var o,r=i("f0c5"),l=Object(r["a"])(n["default"],a["b"],a["c"],!1,null,"095659f1",null,!1,a["a"],o);e["default"]=l.exports},"616f":function(t,e,i){"use strict";var a=i("ee27");i("99af"),i("c975"),i("d3b7"),i("e25e"),i("ac1f"),i("25f0"),i("5319"),i("1276"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,i("96cf");var n=a(i("c964")),s=a(i("2c4b")),o={name:"list",inject:["initPage","getExternalId","getParameter","getChatId","forbidden","getContext"],components:{Footer:s.default},data:function(){return{is_owner:1,chatId:"",url:"",ticketData:{},agentData:{},list:[],commonUrl:this.$store.state.commonUrl,isReady:!1,indicatorDots:!0,autoplay:!1,interval:2e3,duration:500,count:0,page:1,isSend:1,sendMsg:"",userHmoney:"",userHnum:"",externalHmoney:"",externalHnum:"",sendVisible:!1,redType:1,moneyList:[],loadingText:"加载中...",moneyData:"",remark:"",message:"",sendNum:"",chatInfoNum:0,height:{height:""},textareaFocusFlag:!1,textareaFocusFlag2:!1,is_show_copyright:localStorage.getItem("is_show_copyright")}},onLoad:function(){uni.setNavigationBarTitle({title:"红包记录"}),this.isReady=!1,uni.showLoading({title:"加载中...",duration:2e3});var t=this;t.$store.dispatch("setWx",(function(){t.initPage(t.limit)}))},onPullDownRefresh:function(){this.page=1,this.getData()},onReachBottom:function(){this.list.length<this.count?(this.page+=1,this.getData(this.page)):this.loadingText="已加载全部"},methods:{textareaFocus:function(){this.textareaFocusFlag=!0},textareaBlur:function(){this.textareaFocusFlag=!1},textareaFocus2:function(){this.textareaFocusFlag2=!0},textareaBlur2:function(){this.textareaFocusFlag2=!1},limit:function(){var t=this;return(0,n.default)(regeneratorRuntime.mark((function e(){var i,a,n,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.url=window.location.href,i=null!==t.getParameter("agentId")?t.getParameter("agentId"):null!==t.getParameter("agent_id")?t.getParameter("agent_id"):"",localStorage.setItem("agent_id",i),e.next=5,t.axios.post("chat-message/get-config",{url:t.url,agent_id:i});case 5:a=e.sent,n=a.data,0!=n.error?(uni.hideLoading(),uni.showToast({title:n.error_msg,image:"/static/fail.png",duration:2e3})):(s=t,s.uid=n.data.uid,s.corpid=n.data.corpid,localStorage.setItem("uid",s.uid),s.$store.dispatch("setCorpId",s.corpid),s.ticketData=n.data.ticketData,s.agentData=n.data.agentData,s.$store.state.wx.config({beta:!0,debug:!1,appId:s.ticketData.corpid,timestamp:s.ticketData.timestamp,nonceStr:s.ticketData.nonceStr,signature:s.ticketData.signature,jsApiList:s.ticketData.jsApiList}),s.$store.state.wx.error((function(t){uni.hideLoading(),uni.showToast({title:t.errMsg,image:"/static/fail.png",duration:2e3})})),s.$store.state.wx.ready((function(){var t;t=setInterval((function(){"function"===typeof s.$store.state.wx.agentConfig&&(clearInterval(t),s.$store.state.wx.agentConfig({corpid:s.agentData.corpid,agentid:s.agentData.agentid,timestamp:s.agentData.timestamp,nonceStr:s.agentData.nonceStr,signature:s.agentData.signature,jsApiList:s.agentData.jsApiList,success:function(){s.getContext((function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";""==t&&(uni.hideLoading(),uni.showToast({title:"版本过低请升级",image:"/static/fail.png",duration:2e3})),"group_chat_tools"==t?s.getExternalId(s.getChatId(s.getInfoData)):s.getExternalId(s.getInfoData)}),(function(){uni.hideLoading(),uni.showToast({title:"版本过低请升级",image:"/static/fail.png",duration:2e3})}))},fail:function(t){t.errMsg.indexOf("function not exist")>-1?(uni.hideLoading(),uni.showToast({title:"版本过低请升级",image:"/static/fail.png",duration:2e3})):"agentConfig:not match any reliable domain."==t.errMsg?(uni.hideLoading(),uni.showToast({title:"可信域名未填写或未验证",image:"/static/fail.png",duration:2e3})):(uni.hideLoading(),uni.showToast({title:t.errMsg,image:"/static/fail.png",duration:2e3}))}}))}),300)})));case 8:case"end":return e.stop()}}),e)})))()},getInfoData:function(){this.is_show_copyright=localStorage.getItem("is_show_copyright"),this.getData()},getData:function(){var t=arguments,e=this;return(0,n.default)(regeneratorRuntime.mark((function i(){var a,n,s;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return a=t.length>0&&void 0!==t[0]?t[0]:1,e.chatId=localStorage.getItem("chatId")||"",uni.showLoading({title:"加载中...",duration:2e3}),i.next=5,e.axios.post("wap-send-money/custom-money-order",{uid:localStorage.getItem("uid"),corp_id:localStorage.getItem("corpid"),userid:localStorage.getItem("user_id"),external_userid:localStorage.getItem("externalId")||localStorage.getItem("external_id"),chat_id:e.chatId,page:a,page_size:15});case 5:n=i.sent,s=n.data,0!=s.error?(uni.hideLoading(),uni.showToast({title:s.error_msg,image:"/static/fail.png",duration:2e3})):(e.isReady=!0,uni.hideLoading(),e.count=s.data.count,e.page=a,1==e.page?(e.is_owner=s.data.is_owner,e.list=s.data.moneyList,e.isSend=s.data.can_send,e.sendMsg=s.data.send_msg,e.userHmoney=s.data.user_hmoney,e.userHnum=s.data.user_hnum,e.externalHmoney=s.data.external_hmoney,e.externalHnum=s.data.external_hnum):e.list=e.list.concat(s.data.moneyList),e.list.length<15&&(e.loadingText="已加载全部"),uni.stopPullDownRefresh());case 8:case"end":return i.stop()}}),i)})))()},getSendData:function(){var t=this;return(0,n.default)(regeneratorRuntime.mark((function e(){var i,a,n,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return uni.showLoading({title:"加载中...",duration:2e3}),e.next=3,t.axios.post("wap-send-money/send-money-info",{uid:localStorage.getItem("uid"),corp_id:localStorage.getItem("corpid"),userid:localStorage.getItem("user_id"),external_userid:localStorage.getItem("externalId")||localStorage.getItem("external_id"),chat_id:t.chatId});case 3:if(i=e.sent,a=i.data,0!=a.error)uni.hideLoading(),uni.showToast({title:a.error_msg,image:"/static/fail.png",duration:2e3});else{for(n=[],t.moneyList=[],t.chatInfoNum=a.data.chatInfoNum,s=0;s<a.data.moneyList.length;s++)n.push(a.data.moneyList[s]),s%6!=5&&s!=a.data.moneyList.length-1||(t.moneyList.push(n),n=[]);t.moneyList.length>1?t.indicatorDots=!0:t.indicatorDots=!1,t.moneyList.length>0&&(0<t.moneyList[0].length&&t.moneyList[0].length<=2?t.height.height="3.2rem  /* 60/18.75 */":2<t.moneyList[0].length&&t.moneyList[0].length<=4?t.height.height="5.333rem  /* 100/18.75 */":4<t.moneyList[0].length&&t.moneyList[0].length<=6&&(t.height.height="8rem  /* 150/18.75 */")),t.isSend=a.data.can_send,t.sendMsg=a.data.send_msg,t.userHmoney=a.data.user_hmoney,t.userHnum=a.data.user_hnum,t.externalHmoney=a.data.external_hmoney,t.externalHnum=a.data.external_hnum,uni.hideLoading(),t.sendVisible=!0,uni.onWindowResize((function(){var e=uni.getSystemInfoSync(),i=e.windowHeight/18.75,a=0,n=1.28;t.textareaFocusFlag&&(a=t.$refs.messageTextarea.$el.offsetTop/18.75),t.textareaFocusFlag2&&(a=t.$refs.remarkTextarea.$el.offsetTop/18.75),a+n+.5>i&&(t.$refs.uniTip.$el.style["margin-bottom"]="1rem")}))}case 6:case"end":return e.stop()}}),e)})))()},openSend:function(){this.getSendData()},detail:function(t,e){this.chatId&&uni.navigateTo({url:"/pages/redPacket/detail?id="+t+"&type="+e+"&agent_id="+this.getParameter("agent_id")})},chooseMoney:function(t){this.moneyData=t.money},send:function(){this.chatId?this.sendGroup():this.sendUser()},sendGroup:function(){var t=this;return(0,n.default)(regeneratorRuntime.mark((function e(){var i,a,n,s,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(""!=t.moneyData){e.next=4;break}return uni.hideLoading(),uni.showToast({title:"请填写金额",image:"/static/fail.png",duration:2e3}),e.abrupt("return",!1);case 4:if(!(t.moneyData<.3)){e.next=8;break}return uni.hideLoading(),uni.showToast({title:"付款金额不能小于0.30元",image:"/static/fail.png",duration:2e3}),e.abrupt("return",!1);case 8:if(!(t.moneyData>2e4)){e.next=12;break}return uni.hideLoading(),uni.showToast({title:"付款金额不能大于20000.00元",image:"/static/fail.png",duration:2e3}),e.abrupt("return",!1);case 12:if(t.sendNum){e.next=16;break}return uni.hideLoading(),uni.showToast({title:"请填写红包数量",image:"/static/fail.png",duration:2e3}),e.abrupt("return",!1);case 16:if(2!=t.redType){e.next=21;break}if(!(t.moneyData/t.sendNum<.3)){e.next=21;break}return uni.hideLoading(),uni.showToast({title:"单个红包不能低于0.3元",image:"/static/fail.png",duration:2e3}),e.abrupt("return",!1);case 21:if(""!=t.remark){e.next=25;break}return uni.hideLoading(),uni.showToast({title:"请填写备注",image:"/static/fail.png",duration:2e3}),e.abrupt("return",!1);case 25:return e.next=27,t.axios.post("wap-send-money/send-chat-manual-money",{uid:localStorage.getItem("uid"),corp_id:localStorage.getItem("corpid"),userid:localStorage.getItem("user_id"),external_userid:localStorage.getItem("externalId")||localStorage.getItem("external_id"),chat_id:t.chatId,type:t.redType,money:2==t.redType?t.moneyData:t.moneyData*t.sendNum,num:t.sendNum,remark:t.remark,message:t.message});case 27:i=e.sent,a=i.data,0!=a.error?(uni.hideLoading(),uni.showToast({title:a.error_msg,image:"/static/fail.png",duration:2e3})):(n=t,uni.hideLoading(),s="",s={msgtype:"news",news:a.data.news},t.sendVisible=!1,o=a.data.assist,n.$store.state.wx.invoke("sendChatMessage",s,(function(t){"sendChatMessage:ok"==t.err_msg?(n.sendVisible=!1,n.moneyData="",n.remark="",n.message="",n.getData()):n.cancelSend(o)})));case 30:case"end":return e.stop()}}),e)})))()},cancelSend:function(t){var e=this;return(0,n.default)(regeneratorRuntime.mark((function i(){var a,n;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return i.next=2,e.axios.post("wap-send-money/send-money-cancel",{assist:t});case 2:a=i.sent,n=a.data,0!=n.error&&(uni.hideLoading(),uni.showToast({title:n.error_msg,image:"/static/fail.png",duration:2e3}));case 5:case"end":return i.stop()}}),i)})))()},sendUser:function(){var t=this;return(0,n.default)(regeneratorRuntime.mark((function e(){var i,a,n,s,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(""!=t.moneyData){e.next=4;break}return uni.hideLoading(),uni.showToast({title:"请填写金额",image:"/static/fail.png",duration:2e3}),e.abrupt("return",!1);case 4:if(""!=t.remark){e.next=8;break}return uni.hideLoading(),uni.showToast({title:"请填写备注",image:"/static/fail.png",duration:2e3}),e.abrupt("return",!1);case 8:if(!(t.moneyData<.3)){e.next=12;break}return uni.hideLoading(),uni.showToast({title:"付款金额不能小于0.30元",image:"/static/fail.png",duration:2e3}),e.abrupt("return",!1);case 12:if(!(t.moneyData>2e4)){e.next=16;break}return uni.hideLoading(),uni.showToast({title:"付款金额不能大于20000.00元",image:"/static/fail.png",duration:2e3}),e.abrupt("return",!1);case 16:return uni.showLoading({title:"发送中...",duration:2e3}),e.next=19,t.axios.post("wap-send-money/send-manual-money",{uid:localStorage.getItem("uid"),corp_id:localStorage.getItem("corpid"),userid:localStorage.getItem("user_id"),external_userid:localStorage.getItem("externalId")||localStorage.getItem("external_id"),money:t.moneyData,remark:t.remark,message:t.message});case 19:i=e.sent,a=i.data,0!=a.error?(uni.hideLoading(),uni.showToast({title:a.error_msg,image:"/static/fail.png",duration:2e3})):(n=t,uni.hideLoading(),s="",s={msgtype:"news",news:a.data.news},t.sendVisible=!1,o=a.data.assist,n.$store.state.wx.invoke("sendChatMessage",s,(function(t){"sendChatMessage:ok"==t.err_msg?(n.sendVisible=!1,n.moneyData="",n.remark="",n.message="",n.getData()):n.cancelSend(o)})));case 22:case"end":return e.stop()}}),e)})))()},changeSendNum:function(t){var e=this;this.$nextTick((function(){parseInt(e.sendNum)?e.sendNum=parseInt(e.sendNum):e.sendNum=e.sendNum.toString().substring(0,e.sendNum.toString().length-1),e.$forceUpdate()}))},inputChange:function(t){var e=this;this.$nextTick((function(){e.moneyData=t.target.value.replace(/^(\d+)(\.)?([\d]{0,2})(.*)$/g,"$1$2$3"),e.moneyData=e.moneyData.replace(/^0([^\.]*)$/g,"0"),e.$forceUpdate()}))},inputBlur:function(){if(this.moneyData.length>0){var t=this.moneyData.split("."),e=t[0],i="undefined"!=typeof t[1]&&""!=t[1]?t[1]:"00";i=2==i.length?i:i+"0",this.moneyData=e+"."+i}},inputFocus:function(){if(this.moneyData.length>0){var t=this.moneyData.split("."),e=t[0],i="undefined"!=typeof t[1]&&"00"==t[1]?"":t[1];0==i[1]&&(i=i[0]),this.moneyData=""==i?e:e+"."+i}},back:function(){this.sendVisible=!1,this.moneyData="",this.remark="",this.message="",this.sendNum="",this.moneyList=[],this.redType=1},changeRedType:function(t){this.redType=t}}};e.default=o},"7ee6":function(t,e,i){"use strict";i.r(e);var a=i("616f"),n=i.n(a);for(var s in a)["default"].indexOf(s)<0&&function(t){i.d(e,t,(function(){return a[t]}))}(s);e["default"]=n.a},ed0a:function(t,e,i){t.exports=i.p+"static/img/empty.2aeb7239.png"}}]);