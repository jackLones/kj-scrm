(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-redForNew-index"],{"1de5":function(e,t,a){"use strict";e.exports=function(e,t){return t||(t={}),e=e&&e.__esModule?e.default:e,"string"!==typeof e?e:(/^['"].*['"]$/.test(e)&&(e=e.slice(1,-1)),t.hash&&(e+=t.hash),/["'() \t\n]/.test(e)||t.needQuotes?'"'.concat(e.replace(/"/g,'\\"').replace(/\n/g,"\\n"),'"'):e)}},"3af8":function(e,t,a){e.exports=a.p+"static/img/open.f55bd613.png"},4589:function(e,t,a){"use strict";a.r(t);var n=a("a36a"),r=a.n(n);for(var i in n)["default"].indexOf(i)<0&&function(e){a.d(t,e,(function(){return n[e]}))}(i);t["default"]=r.a},"6d2e":function(e,t,a){"use strict";var n;a.d(t,"b",(function(){return r})),a.d(t,"c",(function(){return i})),a.d(t,"a",(function(){return n}));var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-uni-view",[e.ready?n("v-uni-view",{staticClass:"index"},[n("v-uni-view",{staticClass:"redPack"},[n("img",{staticStyle:{width:"1.867rem  /* 35/18.75 */",height:"1.867rem  /* 35/18.75 */","margin-top":"3.36rem  /* 63/18.75 */"},attrs:{src:e.avatar}}),n("v-uni-view",{staticClass:"title"},[e._v("来自"+e._s(e.title)+"的红包")]),1==e.canOpen?n("v-uni-view",{staticClass:"thanking"},[e._v(e._s(e.thanking))]):e._e(),0==e.canOpen?n("v-uni-view",{staticClass:"thanking"},[e._v(e._s(e.msg))]):e._e(),1==e.canOpen?n("v-uni-view",[n("img",{staticClass:"open-img",attrs:{src:a("3af8")},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.openRed.apply(void 0,arguments)}}})]):e._e(),0==e.canOpen?n("v-uni-view",{staticClass:"look",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.look.apply(void 0,arguments)}}},[e._v("看看大家的手气 >")]):e._e()],1),n("img",{staticClass:"corpLogo",attrs:{src:e.corpLogo}})],1):e._e()],1)},i=[]},9930:function(e,t,a){"use strict";a.r(t);var n=a("6d2e"),r=a("4589");for(var i in r)["default"].indexOf(i)<0&&function(e){a.d(t,e,(function(){return r[e]}))}(i);a("b2d4");var o,s=a("f0c5"),d=Object(s["a"])(r["default"],n["b"],n["c"],!1,null,"3786a4df",null,!1,n["a"],o);t["default"]=d.exports},"9c22":function(e,t,a){e.exports=a.p+"static/img/redBack.16f57ff5.png"},a36a:function(e,t,a){"use strict";var n=a("ee27");a("c975"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("96cf");var r=n(a("c964")),i={name:"index",data:function(){return{ready:!1,corpid:"",ticketData:{},agentData:{},canOpen:0,msg:"",sendId:"",corpLogo:"",avatar:"",title:"管管",thanking:"恭喜发财，大吉大利",openLoading:!1}},inject:["initPage","getExternalId","getParameter"],components:{},mounted:function(){uni.showLoading({title:"加载中...",duration:2e3});var e=this;e.$store.dispatch("setWx",(function(){e.initPage(e.limit)}))},methods:{limit:function(){var e=this;return(0,r.default)(regeneratorRuntime.mark((function t(){var a,n,r,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=e,e.url=window.location.href,n=e.getParameter("agent_id"),localStorage.setItem("agent_id",n),t.next=6,e.axios.post("chat-message/get-config",{url:e.url,agent_id:n});case 6:r=t.sent,i=r.data,0!=i.error?uni.showToast({title:i.errMsg,image:"/static/fail.png",duration:2e3}):(a.uid=i.data.uid,a.corpid=i.data.corpid,localStorage.setItem("uid",a.uid),a.$store.dispatch("setCorpId",a.corpid),a.ticketData=i.data.ticketData,a.agentData=i.data.agentData,e.jsApiList=["hideOptionMenu"],a.$store.state.wx.config({beta:!0,debug:!1,appId:a.ticketData.corpid,timestamp:a.ticketData.timestamp,nonceStr:a.ticketData.nonceStr,signature:a.ticketData.signature,jsApiList:a.jsApiList}),a.$store.state.wx.error((function(e){if("undefined"!==typeof e.errCode&&2==e.errCode){if("undefined"!==typeof e.err_Info&&"invalid corpid"==e.err_Info&&a.wxWork)return uni.showToast({title:"请在微信中打开",image:"/static/fail.png",duration:2e3}),!1}else if("undefined"!==typeof e.errMsg&&-1!=e.errMsg.indexOf("invalid corpid"))return uni.showToast({title:"请在微信中打开",image:"/static/fail.png",duration:2e3}),!1;uni.showToast({title:"初始化失败，请刷新重试",image:"/static/fail.png",duration:2e3})})),a.$store.state.wx.ready((function(){a.$store.state.wx.hideOptionMenu(),localStorage.getItem("user_id")?a.look():a.getInfoData()})));case 9:case"end":return t.stop()}}),t)})))()},getInfoData:function(){var e=this;return(0,r.default)(regeneratorRuntime.mark((function t(){var a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return uni.showLoading({title:"加载中...",duration:2e3}),t.next=3,e.axios.post("redpacket-open/redpacket-index",{external_id:null!=e.getParameter("external_userid")?e.getParameter("external_userid"):localStorage.getItem("external_id"),corp_id:e.getParameter("corpid"),assist:e.getParameter("assist"),agent_id:e.getParameter("agent_id")});case 3:a=t.sent,n=a.data,0!=n.error?(uni.hideLoading(),uni.showToast({title:n.error_msg,image:"/static/fail.png",duration:2e3})):(uni.setNavigationBarTitle({title:n.data.resData.act_name}),1==n.data.resData.isOpen&&uni.navigateTo({url:"/pages/redForNew/list?corp_id="+e.getParameter("corpid")+"&send_id="+n.data.resData.send_id+"&agent_id="+e.getParameter("agent_id")}),e.sendId=n.data.resData.send_id,e.corpLogo=n.data.resData.corp_logo,e.avatar=n.data.resData.avatar,e.title=n.data.resData.name,e.thanking=n.data.resData.thanking,e.canOpen=n.data.resData.canOpen,e.msg=n.data.resData.msg,uni.hideLoading(),e.ready=!0);case 6:case"end":return t.stop()}}),t)})))()},look:function(){uni.navigateTo({url:"/pages/redForNew/list?corp_id="+this.getParameter("corpid")+"&assist="+this.getParameter("assist")+"&agent_id="+this.getParameter("agent_id")+"&send_id="+this.sendId})},openRed:function(){var e=this;return(0,r.default)(regeneratorRuntime.mark((function t(){var a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.openLoading){t.next=2;break}return t.abrupt("return",!1);case 2:return uni.showLoading({title:"加载中...",duration:2e3}),e.openLoading=!0,t.next=6,e.axios.post("redpacket-open/redpacket-open",{send_id:e.sendId,external_id:null!=e.getParameter("external_userid")?e.getParameter("external_userid"):localStorage.getItem("external_id")});case 6:a=t.sent,n=a.data,0!=n.error?(e.openLoading=!1,uni.hideLoading(),uni.showToast({title:n.error_msg,image:"/static/fail.png",duration:2e3})):(e.openLoading=!1,uni.hideLoading(),uni.navigateTo({url:"/pages/redForNew/list?corp_id="+e.getParameter("corpid")+"&send_id="+e.sendId+"&agent_id="+e.getParameter("agent_id")}));case 9:case"end":return t.stop()}}),t)})))()},formatter:function(e){return e<10?"0"+e:e}}};t.default=i},b2d4:function(e,t,a){"use strict";var n=a("bc53"),r=a.n(n);r.a},bc53:function(e,t,a){var n=a("f5e8");"string"===typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);var r=a("4f06").default;r("567eec10",n,!0,{sourceMap:!1,shadowMode:!1})},dfda:function(e,t,a){e.exports=a.p+"static/img/red.5d032602.png"},f5e8:function(e,t,a){var n=a("24fb"),r=a("1de5"),i=a("9c22"),o=a("dfda");t=n(!1);var s=r(i),d=r(o);t.push([e.i,".index[data-v-3786a4df]{position:absolute;width:100%;height:100%;background:url("+s+") no-repeat;background-size:100% 100%}.redPack[data-v-3786a4df]{position:fixed;left:50%;top:50%;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%);width:17.867rem;height:25.067rem /* 470/18.75 */;\n\t/*margin-top: 6.027rem !* 113/18.75 *!;*/background:url("+d+") no-repeat;background-size:100% 100%}.time[data-v-3786a4df]{margin-top:2.107rem /* 39.5/18.75 */;height:2.624rem /* 49.2/18.75 */;line-height:2.624rem /* 49.2/18.75 */}.time-view[data-v-3786a4df]{background-color:#fff;border-radius:.053rem ;font-size:.747rem ;color:#a22126;\n\t/*width: 1.173rem !* 22/18.75 *!;*/height:1.173rem /* 22/18.75 */;padding:.107rem\n}.question[data-v-3786a4df]{font-size:.907rem ;color:#fff;margin:0 .32rem\n}.title[data-v-3786a4df]{margin-top:.8rem ;height:.853rem ;font-size:.853rem ;font-weight:500;color:#fce3af}.thanking[data-v-3786a4df]{margin:0 auto;padding:0 1.067rem /* 20/18.75 */;margin-top:1.227rem /* 23/18.75 */;height:1.28rem /* 24/18.75 */;width:60%;font-size:.96rem ;color:#fce3af}.open-img[data-v-3786a4df]{margin-top:5.547rem /* 104/18.75 */;width:5.973rem /* 112/18.75 */;height:5.973rem /* 112/18.75 */}.look[data-v-3786a4df]{margin-top:12.8rem ;font-size:.8rem ;color:#fce3af;line-height:1.067rem /* 20/18.75 */}.corpLogo[data-v-3786a4df]{position:fixed;bottom:1.067rem /* 20/18.75 */;left:50%;-webkit-transform:translateX(-50%);transform:translateX(-50%);height:2.133rem /* 40/18.75 */}",""]),e.exports=t}}]);