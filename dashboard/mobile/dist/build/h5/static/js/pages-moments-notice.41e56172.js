(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-moments-notice"],{"018c":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i={props:{},data:function(){return{commonUrl:this.$store.state.commonUrl,copyrightUrl:localStorage.getItem("copyright_url")}},mounted:function(){this.copyrightUrl=localStorage.getItem("copyright_url")},methods:{}};t.default=i},"08a0":function(e,t,a){var i=a("bb02");"string"===typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);var n=a("4f06").default;n("f99fc20c",i,!0,{sourceMap:!1,shadowMode:!1})},"27e4":function(e,t,a){"use strict";a.r(t);var i=a("018c"),n=a.n(i);for(var r in i)["default"].indexOf(r)<0&&function(e){a.d(t,e,(function(){return i[e]}))}(r);t["default"]=n.a},"287b":function(e,t,a){"use strict";var i=a("08a0"),n=a.n(i);n.a},"2c4b":function(e,t,a){"use strict";a.r(t);var i=a("3113"),n=a("27e4");for(var r in n)["default"].indexOf(r)<0&&function(e){a.d(t,e,(function(){return n[e]}))}(r);a("777e");var o,s=a("f0c5"),c=Object(s["a"])(n["default"],i["b"],i["c"],!1,null,"70ef260e",null,!1,i["a"],o);t["default"]=c.exports},3113:function(e,t,a){"use strict";var i;a.d(t,"b",(function(){return n})),a.d(t,"c",(function(){return r})),a.d(t,"a",(function(){return i}));var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-uni-view",{staticClass:"footer-background"},[a("img",{staticClass:"footer-img",attrs:{src:e.commonUrl+e.copyrightUrl,alt:""}})])},r=[]},3427:function(e,t,a){"use strict";function i(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}Object.defineProperty(t,"__esModule",{value:!0}),t.default=i},"49cf":function(e,t,a){"use strict";a.r(t);var i=a("dc7a"),n=a.n(i);for(var r in i)["default"].indexOf(r)<0&&function(e){a.d(t,e,(function(){return i[e]}))}(r);t["default"]=n.a},"5ac2a":function(e,t,a){"use strict";var i;a.d(t,"b",(function(){return n})),a.d(t,"c",(function(){return r})),a.d(t,"a",(function(){return i}));var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-uni-view",[e._l(e.momentList,(function(t,i){return e.momentList!=[]?a("v-uni-view",{staticClass:"moment-flex",on:{click:function(a){arguments[0]=a=e.$handleEvent(a),e.toDetail(t)}}},[a("v-uni-view",{staticClass:"moment-user"},[a("v-uni-image",{staticClass:"moment-avatar",attrs:{src:t.user_info.avatar,mode:"aspectFit"}})],1),a("v-uni-view",{staticClass:"moment-inner-box"},[a("v-uni-view",{staticClass:"moment-name"},[e._v(e._s(t.user_info.name))]),0==t.reply.status&&2==t.type?a("v-uni-view",{staticClass:"del-content-text"},[e._v("该条评论已删除")]):e._e(),1==t.reply.status&&2==t.type?a("v-uni-view",{staticClass:"moment-content"},[t.reply.reply_id?a("v-uni-text",[e._v("回复"),t.reply_user?a("v-uni-text",{staticClass:"moment-name",staticStyle:{margin:"0 0.1rem"}},[e._v(e._s(t.reply_user.name))]):a("v-uni-text",{staticClass:"moment-name",staticStyle:{margin:"0 0.1rem"}},[e._v(e._s(e.nickname))])],1):e._e(),a("v-uni-text",{staticClass:"em",domProps:{innerHTML:e._s(t.reply.content.replace(/\#[\u4E00-\u9FA5]{1,3}\;/gi,e.emotion))}})],1):e._e(),1==t.type?a("svg",{staticClass:"icon",attrs:{t:"1610523854710",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"7763",width:"16",height:"16"}},[a("path",{attrs:{d:"M705.386667 177.536c56.682667 0 109.546667 22.122667 148.8 62.272 76.522667 78.272 72.490667 207.232-9.002667 287.424L509.738667 857.493333 174.250667 527.253333c-81.472-80.213333-85.525333-209.152-9.002667-287.424 39.274667-40.170667 92.117333-62.272 148.8-62.272 55.189333 0 107.029333 21.12 145.962667 59.413334l49.706666 48.938666 49.706667-48.938666a206.741333 206.741333 0 0 1 145.962667-59.434667M314.069333 106.688c-72.512 0-144.981333 27.861333-199.488 83.605333-105.024 107.456-97.109333 282.048 9.962667 387.456L476.586667 924.288a47.125333 47.125333 0 0 0 66.261333 0l352.021333-346.538667c107.093333-105.408 114.986667-280.021333 9.962667-387.456-54.485333-55.744-126.997333-83.605333-199.488-83.605333-70.826667 0-141.610667 26.602667-195.648 79.786667-53.973333-53.205333-124.821333-79.786667-195.626667-79.786667z",fill:"#707070","p-id":"7764"}})]):e._e(),a("v-uni-view",{staticClass:"moment-time"},[e._v(e._s(t.create_time))]),a("v-uni-view",{staticClass:"moment-pic-view"},[1==t.base_type?a("v-uni-view",[e._v(e._s(t.image))]):e._e(),2==t.base_type||4==t.base_type?a("v-uni-image",{staticStyle:{width:"100%",height:"100%"},attrs:{src:e.commonUrl+t.image}}):e._e(),3==t.base_type?a("v-uni-view",{staticClass:"cover"}):e._e(),3==t.base_type?a("v-uni-video",{attrs:{width:"2.667rem","show-center-play-btn":"false"}},[a("source",{attrs:{src:t.image}})]):e._e(),4==t.base_type?a("v-uni-view",{attrs:{src:t.image}}):e._e()],1)],1)],1):e._e()})),e.allLoad?a("v-uni-view",{staticClass:"look_more"},[e._v("已加载全部")]):a("v-uni-view",{staticClass:"look_more",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.toLookMore.apply(void 0,arguments)}}},[e._v("查看更早的消息...")]),1==e.is_show_copyright?a("Footer",{staticStyle:{position:"relative",bottom:"0px",left:"0px",right:"0px","margin-top":"10px"}}):e._e()],2)},r=[]},6005:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=r;var i=n(a("6b75"));function n(e){return e&&e.__esModule?e:{default:e}}function r(e){if(Array.isArray(e))return(0,i.default)(e)}},7513:function(e,t,a){var i=a("a144");"string"===typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);var n=a("4f06").default;n("72cd3616",i,!0,{sourceMap:!1,shadowMode:!1})},"777e":function(e,t,a){"use strict";var i=a("7513"),n=a.n(i);n.a},a144:function(e,t,a){var i=a("24fb");t=i(!1),t.push([e.i,".footer-background[data-v-70ef260e]{padding-bottom:.533rem ;text-align:center}.footer-img[data-v-70ef260e]{width:40%;margin:.533rem 0}",""]),e.exports=t},bb02:function(e,t,a){var i=a("24fb");t=i(!1),t.push([e.i,".del-content-text[data-v-15a6e888]{width:5.5rem;font-size:.747rem;background:#cdcdcd;text-align:center}.moment-user[data-v-15a6e888]{width:2.133rem /* 40/18.75 */;margin:.7rem;box-sizing:border-box}.moment-avatar[data-v-15a6e888]{width:2.133rem /* 40/18.75 */;height:2.133rem /* 40/18.75 */;border-radius:.267rem ;overflow:hidden}.moment-flex[data-v-15a6e888]{display:-webkit-box;display:-webkit-flex;display:flex}.moment-name[data-v-15a6e888]{font-size:.747rem ;color:#546883;font-weight:700;line-height:.8rem ;margin-bottom:.2rem}.moment-inner-box[data-v-15a6e888]{text-align:left;width:calc(100% - 2.133rem);margin:0 8px 0 0;padding-bottom:3px;box-sizing:border-box;border-bottom:1px solid #f1f1f1;position:relative}.moment-name[data-v-15a6e888]{margin-top:.7rem}.moment-content[data-v-15a6e888]{font-size:.747rem ;margin-top:.4rem;-webkit-flex-wrap:wrap;flex-wrap:wrap;word-break:break-all;width:calc(100% - 4rem)}.moment-time[data-v-15a6e888]{color:#a2a2a2;margin-top:.4rem;font-size:.64rem\n}.look_more[data-v-15a6e888]{margin-top:1.067rem;font-size:.853rem}.moment-pic-view[data-v-15a6e888]{width:3.1rem;height:3.1rem;position:absolute;right:.533rem;top:.533rem;font-size:.64rem;overflow:hidden;padding-left:.1rem;background:#ededed;color:#717171;-webkit-box-align:center;-webkit-align-items:center;align-items:center;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center}.cover[data-v-15a6e888]{background:transparent;width:3.11rem;height:3.1rem;position:absolute;z-index:100}.moment-content .em img[data-v-15a6e888]{width:1rem;height:1rem}",""]),e.exports=t},d0ff:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=c;var i=s(a("6005")),n=s(a("db90")),r=s(a("06c5")),o=s(a("3427"));function s(e){return e&&e.__esModule?e:{default:e}}function c(e){return(0,i.default)(e)||(0,n.default)(e)||(0,r.default)(e)||(0,o.default)()}},d99d:function(e,t,a){"use strict";a.r(t);var i=a("5ac2a"),n=a("49cf");for(var r in n)["default"].indexOf(r)<0&&function(e){a.d(t,e,(function(){return n[e]}))}(r);a("287b");var o,s=a("f0c5"),c=Object(s["a"])(n["default"],i["b"],i["c"],!1,null,"15a6e888",null,!1,i["a"],o);t["default"]=c.exports},db90:function(e,t,a){"use strict";function i(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}a("a4d3"),a("e01a"),a("d28b"),a("a630"),a("d3b7"),a("3ca3"),a("ddb0"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=i},dc7a:function(e,t,a){"use strict";var i=a("ee27");a("99af"),a("4160"),a("c975"),a("ac1f"),a("5319"),a("159b"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=i(a("d0ff"));a("96cf");var r=i(a("c964")),o=(i(a("c1df")),i(a("2c4b"))),s={name:"notice",inject:["initPage","getParameter","getExternalId","getCopyright"],components:{Footer:o.default},data:function(){return{commonUrl:this.$store.state.commonUrl,is_new:1,momentList:[],pageSize:0,total_count:0,page:0,page_count:1,allLoad:!1,islook:!1,corpid:this.getParameter("corpid"),nickname:localStorage.getItem("nickname"),count:0,is_show_copyright:localStorage.getItem("is_show_copyright"),jsApiList:[],ticketData:[],agentData:"",wx:!1,wxWork:!1}},mounted:function(){},methods:{limit:function(){var e=this;return(0,r.default)(regeneratorRuntime.mark((function t(){var a,i,n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.url=window.location.href,a=sessionStorage.getItem("agent_id")||localStorage.getItem("agent_id")||e.getParameter("agentId")||e.getParameter("agent_id")||"",null!=e.getParameter("user_id")?e.getParameter("user_id"):e.$route.query.user_id,a&&localStorage.setItem("agent_id",a),t.next=6,e.axios.post("chat-message/get-config",{url:e.url,agent_id:a||e.$route.query.agent_id});case 6:i=t.sent,n=i.data,0!=n.error?uni.showToast({title:n.error_msg,image:"/static/fail.png",duration:2e3}):(r=e,r.uid=n.data.uid,r.corpid=n.data.corpid,localStorage.setItem("uid",r.uid),localStorage.getItem("uid")&&r.getCopyright(r.refresh),localStorage.setItem("corpid",r.corpid),r.ticketData=n.data.ticketData,r.agentData=n.data.agentData,r.$store.state.wx.config({beta:!0,debug:!1,appId:r.ticketData.corpid,timestamp:r.ticketData.timestamp,nonceStr:r.ticketData.nonceStr,signature:r.ticketData.signature,jsApiList:r.jsApiList}),r.$store.state.wx.error((function(e){uni.showToast({title:e.errMsg,image:"/static/fail.png",duration:2e3})})),e.wx&&r.$store.state.wx.ready((function(){r.$store.state.wx.hideOptionMenu()})),e.wxWork&&r.$store.state.wx.ready((function(){r.$store.state.wx.hideMenuItems({menuList:["menuItem:copyUrl"]})})));case 9:case"end":return t.stop()}}),t)})))()},toDetail:function(e){1==e.moment_status?uni.showModal({title:"提示",showCancel:!1,content:"该内容已不可见",success:function(e){}}):uni.navigateTo({url:"/pages/moments/detail?id="+e.moment_id+"&userid="+this.getParameter("moment_user_id")+"&user_id="+localStorage.getItem("user_id")+"&corpid="+localStorage.getItem("corpid")+"&exd="+localStorage.getItem("external_int_id")+"&agentId="+this.getParameter("agentId")})},refresh:function(){this.is_show_copyright=localStorage.getItem("is_show_copyright"),this.$forceUpdate()},emotion:function(e){var t=e.replace(/\#|\;/gi,""),a=["微笑","撇嘴","色","发呆","得意","流泪","害羞","闭嘴","睡","大哭","尴尬","发怒","调皮","呲牙","惊讶","难过","酷","冷汗","抓狂","吐","偷笑","可爱","白眼","傲慢","饥饿","困","惊恐","流汗","憨笑","大兵","奋斗","咒骂","疑问","嘘","晕","折磨","衰","骷髅","敲打","再见","擦汗","抠鼻","鼓掌","糗大了","坏笑","左哼哼","右哼哼","哈欠","鄙视","委屈","快哭了","阴险","亲亲","吓","可怜","菜刀","西瓜","啤酒","篮球","乒乓","咖啡","饭","猪头","玫瑰","凋谢","示爱","爱心","心碎","蛋糕","闪电","炸弹","刀","足球","瓢虫","便便","月亮","太阳","礼物","拥抱","强","弱","握手","胜利","抱拳","勾引","拳头","差劲","爱你","NO","OK","爱情","飞吻","跳跳","发抖","怄火","转圈","磕头","回头","跳绳","挥手"],i=a.indexOf(t);return'<img src="https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/'.concat(i,'.gif" align="middle">')},getNoticeList:function(e){var t=this;return(0,r.default)(regeneratorRuntime.mark((function a(){var i,r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,t.axios.get("moments-web/moment-remind",{params:{user_id:localStorage.getItem("user_id"),is_new:e,pageSize:10,page:t.page,external_id:localStorage.getItem("external_int_id"),moment_user_id:t.getParameter("moment_user_id"),corp_id:t.getParameter("corpid")}});case 2:i=a.sent,r=i.data,1==e?(t.momentList=r.data.data,t.page_count=r.data.page_count||1):0==e&&(t.count++,1==t.count&&(t.momentList=[]),t.momentList=[].concat((0,n.default)(t.momentList),(0,n.default)(r.data.data)),t.momentList.forEach((function(e){new Date(e.create_time).getTime()})),t.page_count=r.data.page_count||1,t.total_count=r.data.total_count);case 5:case"end":return a.stop()}}),a)})))()},toLookNewMore:function(){},toLookMore:function(){this.page_count>this.page?(this.page++,this.getNoticeList(0)):this.allLoad=!0}},onShow:function(){this.timestamp=Date.parse(new Date),this.wx=-1!=navigator.userAgent.toLocaleLowerCase().indexOf("micromessenger")&&-1==navigator.userAgent.toLocaleLowerCase().indexOf("wxwork"),this.wxWork=-1!=navigator.userAgent.toLocaleLowerCase().indexOf("micromessenger")&&-1!==navigator.userAgent.toLocaleLowerCase().indexOf("wxwork"),this.wx&&(this.jsApiList=["hideOptionMenu","onMenuShareAppMessage","onMenuShareTimeline","getLocation"]),this.wxWork&&(this.jsApiList=["hideOptionMenu","hideMenuItems","onMenuShareAppMessage","onMenuShareWechat","onMenuShareTimeline","shareAppMessage","shareWechatMessage","shareToExternalContact","getLocation"]);var e=this;if(this.corpid=this.getParameter("corpid"),this.wx)e.$store.dispatch("setWx",(function(){e.initPage(e.limit)}));else{this.corpid=this.getParameter("corpid")?this.getParameter("corpid"):this.$route.query.corpid;var t=this.getParameter("agentId")?this.getParameter("agentId"):this.$route.query.agentId;localStorage.setItem("agent_id",t),localStorage.setItem("corpid",this.corpid),e.$store.dispatch("setWx",(function(){e.initPage(e.limit)}))}},onPullDownRefresh:function(){this.loadingText="加载中..."},onLoad:function(){this.getNoticeList(1),uni.setNavigationBarTitle({title:"消息详情"})}};t.default=s}}]);