(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-scrm-follow_up_data"],{"22f1":function(e,t,a){"use strict";a.r(t);var o=a("f9fc"),i=a.n(o);for(var n in o)["default"].indexOf(n)<0&&function(e){a.d(t,e,(function(){return o[e]}))}(n);t["default"]=i.a},"2ae0":function(e,t,a){var o=a("24fb"),i=a("1de5"),n=a("301c"),r=a("f808"),s=a("3770"),l=a("5bb5"),d=a("e543");t=o(!1);var c=i(n),h=i(n,{hash:"?#iefix"}),u=i(r),g=i(s),f=i(l),w=i(d,{hash:"#iconfont"});t.push([e.i,".detailed_container[data-v-2e248822]{overflow-y:auto}.detailed_container .top[data-v-2e248822]{position:fixed;top:0;left:0;right:0;\n  /*overflow-y: auto;*/z-index:12;background:#fff}@font-face{font-family:iconfont;src:url("+c+");src:url("+h+') format("embedded-opentype"),url('+u+') format("woff2"),url('+g+') format("woff"),url('+f+') format("truetype"),url('+w+') format("svg")}.detailed_container .iconfont[data-v-2e248822]{font-family:iconfont!important;font-size:.853rem;font-style:normal;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.detailed_container .header[data-v-2e248822]{height:2.4rem;background:#5283ec;text-align:left}.detailed_container .header .data[data-v-2e248822]{font-size:.8rem;font-weight:500;color:#fff;line-height:2.4rem;text-align:center;margin-left:.533rem}.detailed_container .chartColor[data-v-2e248822]{color:#fff!important;background:#5183eb!important;border-color:#5183eb!important}.detailed_container .statuscolor[data-v-2e248822]{color:#fff!important;background:#5183eb!important}.detailed_container[data-v-2e248822] .dropdown-item__selected .selected__name{font-size:.693rem}.detailed_container[data-v-2e248822] .dropdown-item__selected{padding:0}.detailed_container .left[data-v-2e248822]{width:6.88rem;position:absolute;left:0;top:0;box-shadow:.107rem 0 .32rem rgba(31,34,41,.08);z-index:9}.detailed_container .right[data-v-2e248822]{\n  /*width:100%;*/height:100%;margin-left:6.88rem /* 129/18.75 */\n  /*overflow-x: scroll;*/\n  /*background: #A9BFF4;*/}.detailed_container .th[data-v-2e248822]{display:inline-block;width:33.333%;font-size:.64rem ;color:#7a7a7a;line-height:1.6rem /* 30/18.75 */;height:1.6rem /* 30/18.75 */;background:#f3f3f7}.detailed_container .thB[data-v-2e248822]{display:inline-block;width:6.933rem;font-size:.747rem;height:2.667rem;line-height:2.667rem;background:#5183eb}.detailed_container .thC[data-v-2e248822]{\n  /*flex-grow: 1;*/width:33.333%;font-size:.747rem;height:2.667rem;line-height:2.667rem;text-align:center;background:#fff;border-bottom:.053rem solid #f3f3f7}.detailed_container .title[data-v-2e248822]{width:33.333%;font-size:.693rem;padding-top:.213rem;line-height:1.3rem /* 30/18.75 */;color:#333;\n  /*width: 5.333rem;*/overflow:hidden;white-space:nowrap;word-break:break-all;text-overflow:ellipsis;text-align:left;border-bottom:.053rem solid #f3f3f7}.detailed_container .content[data-v-2e248822]{font-size:.587rem ;font-weight:500;text-align:left;max-width:5.333rem;color:#999;\n  /*width: 5.333rem;*/overflow:hidden;white-space:nowrap;\n  /*word-break:break-all;*/text-overflow:ellipsis;line-height:1.067rem /* 20/18.75 */;padding-left:.7rem}.detailed_container .thD[data-v-2e248822]{\n  /*flex-grow: 1;*/width:33.333%;font-size:.747rem;height:2.667rem;line-height:2.667rem;text-align:center;background:#fff;padding-left:.267rem;border-bottom:.053rem solid #f3f3f7}.detailed_container .tdB[data-v-2e248822]{display:inline-block;width:6.88rem;font-size:.747rem;height:2.667rem;line-height:2.667rem;text-align:center;border-bottom:.053rem solid #f3f3f7}.detailed_container #ChangeColor[data-v-2e248822]{\n  /*background: #5183EB;*/color:#5183eb}.detailed_container .custom-tabs-loading[data-v-2e248822]{text-align:center;line-height:1.6rem;font-size:.693rem;color:#ccc}.detailed_container[data-v-2e248822] .dropdown-item:not(:last-child):after{width:0}.detailed_container[data-v-2e248822] .dropdown-item__selected .selected__name{font-size:.747rem;white-space:nowrap;text-overflow:ellipsis;overflow:hidden;word-break:break-all;max-width:3.733rem}.detailed_container[data-v-2e248822] .dropdown-item__content .list.show{z-index:150}.detailed_container uni-view[data-v-2e248822] .scroll-view-item_H{display:inline-block}',""]),e.exports=t},5687:function(e,t,a){var o=a("2ae0");"string"===typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);var i=a("4f06").default;i("93532b0e",o,!0,{sourceMap:!1,shadowMode:!1})},a672:function(e,t,a){"use strict";a.d(t,"b",(function(){return i})),a.d(t,"c",(function(){return n})),a.d(t,"a",(function(){return o}));var o={uniIcons:a("2ba4").default},i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-uni-view",{staticClass:"detailed_container"},[a("root-font-size"),e.showChooseDepartment?e._e():a("v-uni-view",{staticClass:"top"},[a("v-uni-view",{staticClass:"header"},[a("v-uni-view",[a("uni-icons",{staticStyle:{"font-size":"0.8rem",color:"#FFF","margin-left":"0.373rem"},attrs:{type:"arrowleft"},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.goBack()}}}),a("v-uni-text",{staticClass:"data"},[e._v("已跟进")])],1)],1),a("v-uni-view",{staticStyle:{display:"flex","margin-top":"0.8rem",padding:"0 0.533rem 0 0.15rem","justify-content":"center"}},[a("v-uni-view",{staticStyle:{display:"flex","line-height":"1.4rem"}},[a("v-uni-button",{class:1===e.type?"chartColor":"",staticStyle:{width:"3.8rem",height:"1.4rem",background:"#FFFFFF",border:"0.053rem solid #EDEDED","border-right":"0",margin:"0","margin-left":"0.533rem","border-radius":"0","font-size":"0.7rem","font-weight":"500",color:"#333333","line-height":"1.4rem"},attrs:{type:"default",plain:""},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.changeChart(1)}}},[e._v("按日期")]),a("v-uni-button",{class:2===e.type?"chartColor":"",staticStyle:{width:"3.8rem",height:"1.4rem",background:"#FFFFFF","border-radius":"0",border:"0.053rem solid #EDEDED",margin:"0","font-size":"0.7rem","font-weight":"500",color:"#333333","line-height":"1.4rem"},attrs:{type:"default",plain:""},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.changeChart(2)}}},[e._v("按员工")])],1)],1),a("v-uni-view",[a("v-uni-view",{staticStyle:{display:"flex","align-items":"center",height:"2.533rem",color:"#999",background:"#fff","z-index":"150"}},[a("v-uni-view",{directives:[{name:"show",rawName:"v-show",value:0==e.show,expression:"show==0"}],staticStyle:{padding:"0.2rem 0","flex-grow":"1","text-align":"center","line-height":"2.133rem","font-weight":"bold","font-size":"0.747rem"},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.chooseStaff.apply(void 0,arguments)}}},[0==e.userCount?a("v-uni-text",{staticStyle:{cursor:"pointer"}},[e._v("选择成员")]):e._e(),e.userCount>0?a("v-uni-text",{staticStyle:{cursor:"pointer"}},[e._v(e._s(e.userCount)+"个成员")]):e._e(),a("uni-icons",{staticStyle:{"font-size":"0.8rem",color:"#999","margin-left":"0.373rem"},attrs:{type:"arrowdown"}})],1),a("ms-dropdown-menu",{staticStyle:{"font-size":"0.747rem","flex-grow":"1",padding:"0.2rem 0",height:"2.133rem",color:"#333333"}},[a("ms-dropdown-item",{ref:"dropdownItemD",staticStyle:{"z-index":"99999999999",height:"2.133rem","line-height":"2.133rem","font-size":"0.747rem","text-align":"center","font-weight":"bold",color:"#999"},attrs:{hasSlot:!0,title:e.timeName}},[a("v-uni-view",{staticClass:"dropdown-item-content",staticStyle:{"z-index":"99999999999"}},[a("v-uni-view",{attrs:{id:0===e.dateIndex?"ChangeColor":""},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.lastWD(),e.changeDateIndex(0,"上一周")}}},[e._v("上一周")]),a("v-uni-view",{attrs:{id:1===e.dateIndex?"ChangeColor":""},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.lastMD(),e.changeDateIndex(1,"上一月")}}},[e._v("上一月")]),a("v-uni-view",{attrs:{id:2===e.dateIndex?"ChangeColor":""},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.weekD(),e.changeDateIndex(2,"本周")}}},[e._v("本周")]),a("v-uni-view",{attrs:{id:3===e.dateIndex?"ChangeColor":""},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.monthD(),e.changeDateIndex(3,"本月")}}},[e._v("本月")]),a("v-uni-view",{attrs:{id:4===e.dateIndex?"ChangeColor":""},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.onShowDatePicker("range"),e.changeDateIndex(4)}}},[e._v("自定义时间")])],1)],1)],1)],1)],1)],1),a("v-uni-scroll-view",{directives:[{name:"show",rawName:"v-show",value:1===e.type&&!e.showChooseDepartment,expression:"type===1 && !showChooseDepartment"}],staticStyle:{top:"7.132rem",left:"0",right:"0",bottom:"0",position:"fixed"},attrs:{"scroll-x":!1,"scroll-y":!0},on:{scrolltolower:function(t){arguments[0]=t=e.$handleEvent(t),e.loadMore.apply(void 0,arguments)}}},[a("v-uni-view",[a("v-uni-view",{staticStyle:{display:"flex",width:"100%",position:"fixed","z-index":"50"}},[a("v-uni-view",{staticClass:"th"},[e._v("时间")]),a("v-uni-view",{staticClass:"th"},[e._v("跟进客户")]),a("v-uni-view",{staticClass:"th"},[e._v("跟进次数")])],1),a("v-uni-view",{staticStyle:{position:"relative",top:"1.6rem","padding-bottom":"1.6rem"}},e._l(e.dateFollowData,(function(t,o){return a("v-uni-view",{key:o,staticStyle:{display:"flex",width:"100%"}},[a("v-uni-view",{staticClass:"thC"},[e._v(e._s(t.name))]),a("v-uni-view",{staticClass:"thC"},[e._v(e._s(t.userNum))]),a("v-uni-view",{staticClass:"thC"},[e._v(e._s(t.recordNum))])],1)})),1)],1),e.dateFollowData.length>0?a("v-uni-view",{staticClass:"custom-tabs-loading"},[e._v(e._s(e.loadingText))]):e._e(),a("Footer",{directives:[{name:"show",rawName:"v-show",value:1==e.$store.state.is_show_copyright,expression:"$store.state.is_show_copyright == 1"}]})],1),a("v-uni-scroll-view",{directives:[{name:"show",rawName:"v-show",value:2===e.type&&!e.showChooseDepartment,expression:"type===2 && !showChooseDepartment"}],staticStyle:{top:"7.132rem",left:"0",right:"0",bottom:"0",position:"fixed"},attrs:{"scroll-x":!1,"scroll-y":!0},on:{scrolltolower:function(t){arguments[0]=t=e.$handleEvent(t),e.loadMore.apply(void 0,arguments)}}},[a("v-uni-view",[a("v-uni-view",{staticStyle:{display:"flex",width:"100%",position:"fixed","z-index":"50"}},[a("v-uni-view",{staticClass:"th"},[e._v("员工名称")]),a("v-uni-view",{staticClass:"th"},[e._v("跟进客户")]),a("v-uni-view",{staticClass:"th"},[e._v("跟进次数")])],1),a("v-uni-view",{staticStyle:{position:"relative",top:"1.6rem","padding-bottom":"1.6rem"}},e._l(e.userFollowData,(function(t,o){return a("v-uni-view",{key:o,staticStyle:{display:"flex",width:"100%"}},[a("v-uni-view",{staticClass:"title"},[a("v-uni-text",{staticStyle:{"padding-left":"0.7rem"}},[e._v(e._s(t.name))]),a("v-uni-view",{staticClass:"content"},[e._v(e._s(t.depart))])],1),a("v-uni-view",{staticClass:"thC"},[e._v(e._s(t.userNum))]),a("v-uni-view",{staticClass:"thC"},[e._v(e._s(t.recordNum))])],1)})),1)],1),e.userFollowData.length>0?a("v-uni-view",{staticClass:"custom-tabs-loading"},[e._v(e._s(e.loadingText2))]):e._e(),1==e.is_show_copyright?a("Footer"):e._e()],1),a("mx-date-picker",{attrs:{showTips:!0,format:"yyyy-mm-dd",show:e.showPicker,type:e.dtype,value:e.value,"show-tips":!0,"begin-text":"开始","end-text":"结束","show-seconds":!0},on:{confirm:function(t){arguments[0]=t=e.$handleEvent(t),e.onSelected.apply(void 0,arguments)},cancel:function(t){arguments[0]=t=e.$handleEvent(t),e.onSelected.apply(void 0,arguments)}}}),e.showChooseDepartment?a("ChooseDepartment",{attrs:{"call-back":e.replyDepartment,selectArray:e.selectDepartment}}):e._e()],1)},n=[]},e041:function(e,t,a){"use strict";var o=a("5687"),i=a.n(o);i.a},f742:function(e,t,a){"use strict";a.r(t);var o=a("a672"),i=a("22f1");for(var n in i)["default"].indexOf(n)<0&&function(e){a.d(t,e,(function(){return i[e]}))}(n);a("e041");var r,s=a("f0c5"),l=Object(s["a"])(i["default"],o["b"],o["c"],!1,null,"2e248822",null,!1,o["a"],r);t["default"]=l.exports},f9fc:function(e,t,a){"use strict";var o=a("ee27");a("99af"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("96cf");var i=o(a("c964")),n=o(a("0122")),r=o(a("5f2a")),s=o(a("4a6b")),l=o(a("b3b9")),d=o(a("2c4b")),c=o(a("c75b")),h=new Date,u=h.getDay(),g=h.getDate(),f=h.getMonth(),w=h.getYear();w+=w<2e3?1900:0,0==u&&(u=7);var m=new Date;m.setDate(1),m.setMonth(m.getMonth()-1);m.getYear();var p=m.getMonth();function v(e){var t=e.getFullYear(),a=e.getMonth()+1,o=e.getDate();return a<10&&(a="0"+a),o<10&&(o="0"+o),t+"-"+a+"-"+o}function _(e){var t=new Date(w,e,1),a=new Date(w,e+1,1),o=(a-t)/864e5;return o}function D(){var e=new Date(w,f,g+1-u);return v(e)}function y(){var e=new Date(w,f,1);return v(e)}function x(){var e=new Date(w,p,1);return 11==p&&(e=new Date(w-1,p,1)),v(e)}function b(){var e=new Date(w,p,_(p));return 11==p&&(e=new Date(w-1,p,_(p))),v(e)}var k=new Date,C=(k.getFullYear(),k.getMonth(),k.getDate(),new Date),F=new Date(C.getTime()-6048e5),S=new Date(C.getTime()-6048e5),I=F.getDay(),T=F.getDate()-I+(0===I?-6:1),z=new Date(F.setDate(T)),M=z.getFullYear()+"-"+(z.getMonth()+1<10?"0"+(z.getMonth()+1):z.getMonth()+1)+"-"+(z.getDate()<10?"0"+z.getDate():z.getDate()),$=new Date(S.setDate(T+6)),E=$.getFullYear()+"-"+($.getMonth()+1<10?"0"+($.getMonth()+1):$.getMonth()+1)+"-"+($.getDate()<10?"0"+$.getDate():$.getDate());function P(e){var t=new Date,a=t.getMonth()+1;a=a<10?"0"+a:a;var o=t.getDate();o=o<10?"0"+o:o;var i=t.getFullYear()+"-"+a+"-"+o,n=new Date(t);n.getFullYear(),n.getMonth(),n.getDate();return i}function N(e){var t=new Date,a=(t.getFullYear(),t.getMonth(),t.getDate(),new Date(t));a.setDate(t.getDate()-e);var o=a.getMonth()+1;o=o<10?"0"+o:o;var i=a.getDate();i=i<10?"0"+i:i;var n=a.getFullYear()+"-"+o+"-"+i;return n}var L={name:"DetailedData",inject:["initPage","getParameter"],data:function(){return{isLoading:!0,statusName:"全部状态",timeName:"本周",isReady:!1,page:1,loadingText:"加载中...",loadingText2:"加载中...",show:null,yesterday:N(1),months:N(30),nowDay:P(),weekDay:N(6),last_week_s:M,last_week_e:E,week_s:D(),week_e:P(),last_month_s:x(),last_month_e:b(),month_s:y(),month_e:P(),dateIndex:2,range:[],dtype:"range",value:"",showPicker:!1,count:0,count2:0,userFollowData:[],dateFollowData:[],c:[],type:1,s_date:D(),e_date:P(),user_ids:[],userCount:0,NotFollowDays:[],tabWidth:null,statusIndex:"0",statusData:[],scrollTop:0,old:{scrollTop:0},showChooseDepartment:!1,selectDepartment:[],is_show_copyright:localStorage.getItem("is_show_copyright")}},onLoad:function(){var e=this,t=localStorage.getItem("corpid");null==t&&(t=this.getParameter("corpId")),null!=t&&localStorage.setItem("corpid",t),null!=localStorage.getItem("uid")?this.init():this.$store.dispatch("setWx",(function(){e.initPage(e.init)}))},onReachBottom:function(){1==this.type?this.dateFollowData.length<this.count?(this.page+=1,this.getFollowDate(this.page)):this.loadingText="已加载全部":2==this.type&&(this.userFollowData.length<this.count2?(this.page+=1,this.getFollowDate(this.page)):this.loadingText2="已加载全部")},methods:{init:function(){this.is_show_copyright=localStorage.getItem("is_show_copyright"),this.getFollowDate(1,1)},loadMore:function(e){this.isLoading||(this.isLoading=!0,1==this.type?this.dateFollowData.length<this.count?(this.page+=1,this.getFollowDate(this.page)):this.loadingText="已加载全部":2==this.type&&(this.userFollowData.length<this.count2?(this.page+=1,this.getFollowDate(this.page)):this.loadingText2="已加载全部"))},goBack:function(){this.selectDepartment=[];var e=null!==localStorage.getItem("tab3")?localStorage.getItem("tab3"):1,t=this.getParameter("agentId")||this.getParameter("agent_id")||localStorage.getItem("agent_id")||sessionStorage.getItem("agent_id")||"";window.location.href=this.$store.state.h5Url+"/h5/pages/scrm/contents?tax=1&gix="+e+"&agent_id="+t,uni.reLaunch({url:"/pages/scrm/contents"})},lastWD:function(){this.s_date=this.last_week_s,this.e_date=this.last_week_e,this.getFollowDate(),this.$refs.dropdownItemD.closePopup()},lastMD:function(){this.s_date=this.last_month_s,this.e_date=this.last_month_e,this.getFollowDate(),this.$refs.dropdownItemD.closePopup()},weekD:function(){this.s_date=this.week_s,this.e_date=this.week_e,this.getFollowDate(),this.$refs.dropdownItemD.closePopup()},monthD:function(){this.s_date=this.month_s,this.e_date=this.month_e,this.getFollowDate(),this.$refs.dropdownItemD.closePopup()},changeDateIndex:function(e,t){e!=this.dateIndex&&(this.dateIndex=e,uni.pageScrollTo({scrollTop:0,duration:0}),this.range=[],4!=e&&(this.timeName=t)),this.page=1,this.loadingText="加载中...",this.loadingText2="加载中..."},onShowDatePicker:function(e){this.dtype=e,this.showPicker=!0,this.value=this[e]},onSelected:function(e){this.showPicker=!1,e&&(this[this.dtype]=e.value,this.range.length>0&&(this.s_date=this.range[0],this.e_date=this.range[1],this.timeName=this.s_date+"-"+this.e_date,this.page=1,this.loadingText="加载中...",this.loadingText2="加载中...",this.getFollowDate()),this.$refs.dropdownItemD.closePopup())},chooseStaff:function(){uni.pageScrollTo({scrollTop:0,duration:0}),uni.hideTabBar(),this.showChooseDepartment=!0},replyDepartment:function(e){this.showChooseDepartment=!1,uni.showTabBar(),"object"==(0,n.default)(e)&&(this.selectDepartment=e,this.getFollowDate())},getFollowDate:function(){var e=arguments,t=this;return(0,i.default)(regeneratorRuntime.mark((function a(){var o,i,n,r,s;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(o=e.length>0&&void 0!==e[0]?e[0]:1,i=e.length>1?e[1]:void 0,uni.showLoading({title:"加载中...",duration:2e3}),t.user_ids=[],t.selectDepartment.length>0)for(n=0;n<t.selectDepartment.length;n++)t.user_ids.push(t.selectDepartment[n].id);return 1==i&&(t.selectDepartment=[]),a.next=8,t.axios.post("follow-statistic/analysis-three",{corp_id:localStorage.getItem("corpid"),uid:localStorage.getItem("uid"),user_id:localStorage.getItem("user_id"),user_ids:t.user_ids,s_date:t.s_date,e_date:t.e_date,page:o,pageSize:15,type:t.type});case 8:r=a.sent,s=r.data,0!=s.error?(uni.hideLoading(),uni.showToast({title:s.error_msg,image:"/static/fail.png",duration:2e3}),t.isLoading=!1):(uni.hideLoading(),t.isReady=!0,t.page=o,1==i&&(s.data.user_count=0),t.userCount=s.data.user_count,1==t.page?1===t.type?(t.dateFollowData=s.data.allData,t.count=s.data.count):2===t.type&&(t.userFollowData=s.data.users,t.count2=s.data.count):1===t.type?t.dateFollowData=t.dateFollowData.concat(s.data.allData):2===t.type&&(t.userFollowData=t.userFollowData.concat(s.data.users)),t.isLoading=!1,t.show=s.data.show,t.dateFollowData.length==t.count&&1===t.type&&(t.isLoading=!0,t.loadingText="已加载全部"),t.userFollowData.length==t.count2&&2===t.type&&(t.isLoading=!0,t.loadingText2="已加载全部"));case 11:case"end":return a.stop()}}),a)})))()},scroll:function(e){this.old.scrollTop=e.detail.scrollTop},goTop:function(e){this.scrollTop=this.old.scrollTop,this.$nextTick((function(){this.scrollTop=0})),uni.showToast({icon:"none",title:"纵向滚动 scrollTop 值已被修改为 0"})},changeChart:function(e){e!=this.type&&(this.type=e,this.getFollowDate()),this.$refs.dropdownItemD.closePopup(),uni.pageScrollTo({scrollTop:0,duration:0})}},components:{msDropdownMenu:r.default,msDropdownItem:s.default,MxDatePicker:l.default,Footer:d.default,ChooseDepartment:c.default}};t.default=L}}]);