(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-moments-list~pages-moments-publish"],{1753:function(t,e,o){"use strict";o.r(e);var a=o("d5f5"),i=o("d06b");for(var n in i)["default"].indexOf(n)<0&&function(t){o.d(e,t,(function(){return i[t]}))}(n);o("a728");var r,s=o("f0c5"),c=Object(s["a"])(i["default"],a["b"],a["c"],!1,null,"3a2d4d7a",null,!1,a["a"],r);e["default"]=c.exports},"37f7":function(t,e,o){var a=o("24fb");e=a(!1),e.push([t.i,'@font-face{font-family:iconfont;src:url("data:application/x-font-woff2;charset=utf-8;base64,d09GMgABAAAAAAR4AAsAAAAACKgAAAQsAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHEIGVgCDBgqEfIRGATYCJAMMCwgABCAFhG0HShugB8gOJUHBwAAAAAFEBNmwzd4dtatSmmpFoVAEhUThEAYkCozFKDCqCVO6RfH/89v869awDnTR1qrSANFt4GG4SNxreBn91fmV9f3+53J613ieHba+N1zmGM8PA7oXTaCAxpjei8IoLWFsGLu4jPME6vWJJdovqmgAO4U2LRBnep0K7GJmpYQWanXVOWuLuAFrtenK4haAa/f38QnKsCOpyrRFh6eFWsh5KXnfYcn958BGQNKfE8wmMmaAQpzkuo9Z+ukZluoltVV5abUipL5i/ysArlhWVut/eCRBVNPUjYg6oUo7JTHFoaYDSvdacnKTq9GAB4AY5y2dtL3qpFh1DENdnJC6Hq+xYb7pyRMDMzc/fYoJjY8flwO3m98rMucF+IZHj6Cagw5UeKpxyFbt2rHGY/8jpa7CYMvLfcIesLjY3bdqhaf+nqgQs2qT/+rjCH/VfA0VFGuAC3iE8NEr/Vau8vZsXiUy7+V3c3tQQXMAuNjDCC89KDIHH0OFhnUi81GEPwyc7wZUaN7DnUf4g+ZLQsMKYV/94NjK7R7TEM4niTY1oJ5zEU62aNVaasUub08YLUEam5EnT6a61/I17dNk+vTu9jpJjXhsTFwjqTtpCBxBIIgS6iQnc/Zod1YGKp0rAwsD8kkyP6AwcK0hcAwkiQmBhWvxPZWKDu86aUH2nLEdi9rGX1eXq5P6A1SrnAucMVMdZH/GKi/jyfCqJyucfK3mXpVujXOPfFf5LC4Dvx0X/943JyOq4HuCTZ8KiIPPAb6ro8akpT6ufiq39BQrNlk5mp8pO0JlJLk8f5QalRjoP60IMx0N8n7wGhSD3n6/F1zlcTVz/cR+Ev0lkLSTd7UiPbD/wCxGRMA2Krwro2O0bTQtImbwhjAJc0S3N4ROx15/PH60IzaIOjCbEelqkDOfETNxb/FMixnWNzeJp2KPQw9A5d76jGUOQOUvH7RE/o2RfkNatd3OGf9q0QKbnq8WB7qy+hVqJRjJn1BQgP/iErks0yy5iGJTrOayW7C/z0IoZH0qNH+7N+31XXc7G2p1hZDU6IWs1ghaqDNQpcEKVKu1BfWmFW9u0IFhKUodpswCEFodgqTZHWStbqOF+hqqdPsG1VrDEuodhfueDcZCj+QzuIrFtZh6BNNraIowbCzi1dbhOlOfionKXHoTzgzoY5hCKk/minEKZ/pYMDCoU7IsgREM3Y8Vgcvwvj4aMzK0AdewUpJljWkyGZH3IKmG7gfEHgZOhYXTwqiNwOhp0CiE3ZiFpL5fB6dj0keFKcGV+JvgGAP0vWMUpOQ10GI1VQt3LoMHDNJRYrEIPInAoPXDFEEnrk9P0zDG/FEGOA2WFNkiaZRGhuoRddXS8bX917cL6mn9c6TIUXSekybKHKQfJXFq2KSiRklLYU8dNKWDIX0cAA==") format("woff2")}.vue-cropper[data-v-3a2d4d7a]{position:fixed;left:0;right:0;bottom:0;z-index:998;box-sizing:border-box;user-select:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;direction:ltr;touch-action:none;text-align:left;background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQAQMAAAAlPW0iAAAAA3NCSVQICAjb4U/gAAAABlBMVEXMzMz////TjRV2AAAACXBIWXMAAArrAAAK6wGCiw1aAAAAHHRFWHRTb2Z0d2FyZQBBZG9iZSBGaXJld29ya3MgQ1M26LyyjAAAABFJREFUCJlj+M/AgBVhF/0PAH6/D/HkDxOGAAAAAElFTkSuQmCC")}.cropper-canvas[data-v-3a2d4d7a]{position:absolute;top:-9999px;left:-9999px;z-index:-998}.vue-cropper .uni-info__ft[data-v-3a2d4d7a]{position:absolute;line-height:48px;font-size:18px;display:-webkit-box;display:-webkit-flex;display:flex;bottom:0;left:0;right:0;z-index:998}.btn-group[data-v-3a2d4d7a]{position:absolute;right:30px;bottom:78px;z-index:998}.btn-item[data-v-3a2d4d7a]{position:relative;width:40px;height:40px;background:#fff;border-radius:20px;padding:10px;display:inline-block;margin-left:10px}.btn-item[data-v-3a2d4d7a]:active{background:#ccc}.rotate-btn[data-v-3a2d4d7a]{font-family:iconfont!important;font-size:24px;font-style:normal;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;line-height:20px}.rotate-btn[data-v-3a2d4d7a]:before{content:"\\e65c";margin-left:-2px}.reset-btn[data-v-3a2d4d7a]{font-family:iconfont!important;font-size:24px;font-style:normal;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;line-height:20px}.reset-btn[data-v-3a2d4d7a]:before{content:"\\e648";margin-left:-2px}.vue-cropper .uni-info__ft[data-v-3a2d4d7a]:after{content:" ";position:absolute;left:0;top:0;right:0;height:1px;border-top:1px solid #d5d5d6;color:#d5d5d6;-webkit-transform-origin:0 0;transform-origin:0 0;-webkit-transform:scaleY(.5);transform:scaleY(.5);z-index:998}.vue-cropper .uni-modal__btn[data-v-3a2d4d7a]{display:block;-webkit-box-flex:1;-webkit-flex:1;flex:1;color:#3cc51f;text-decoration:none;-webkit-tap-highlight-color:rgba(0,0,0,0);position:relative;text-align:center;background-color:#fff;z-index:998}.vue-cropper .uni-modal__btn[data-v-3a2d4d7a]:first-child:after{display:none}.vue-cropper .uni-modal__btn[data-v-3a2d4d7a]:after{content:" ";position:absolute;left:0;top:0;width:1px;bottom:0;border-left:1px solid #d5d5d6;color:#d5d5d6;-webkit-transform-origin:0 0;transform-origin:0 0;-webkit-transform:scaleX(.5);transform:scaleX(.5);z-index:998}.vue-cropper .uni-modal__btn[data-v-3a2d4d7a]:active{background-color:#eee}.cropper-box[data-v-3a2d4d7a],\n.cropper-box-canvas[data-v-3a2d4d7a],\n.cropper-drag-box[data-v-3a2d4d7a],\n.cropper-crop-box[data-v-3a2d4d7a],\n.cropper-face[data-v-3a2d4d7a]{position:absolute;top:0;right:0;bottom:0;left:0;-webkit-user-select:none;user-select:none;z-index:998}.uni-image[data-v-3a2d4d7a]{width:100%;height:100%}.cropper-box-canvas uni-image[data-v-3a2d4d7a]{position:relative;text-align:left;-webkit-user-select:none;user-select:none;-webkit-transform:none;transform:none;max-width:none;max-height:none;z-index:998}.cropper-box[data-v-3a2d4d7a]{overflow:hidden}.cropper-move[data-v-3a2d4d7a]{cursor:move}.cropper-crop[data-v-3a2d4d7a]{cursor:crosshair}.cropper-modal[data-v-3a2d4d7a]{background:rgba(0,0,0,.5)}.pointer-events[data-v-3a2d4d7a]{pointer-events:none}.cropper-crop-box[data-v-3a2d4d7a]{\n  /*border: 2px solid #39f;*/}.cropper-view-box[data-v-3a2d4d7a]{display:block;overflow:hidden;width:100%;height:100%;outline:1px solid #39f;outline-color:rgba(51,153,255,.75);-webkit-user-select:none;user-select:none}.cropper-view-box uni-image[data-v-3a2d4d7a]{-webkit-user-select:none;user-select:none;text-align:left;max-width:none;max-height:none}.cropper-face[data-v-3a2d4d7a]{top:0;left:0;background-color:#fff;opacity:.1}.crop-line[data-v-3a2d4d7a]{position:absolute;display:block;width:100%;height:100%;opacity:.1;z-index:998}.line-w[data-v-3a2d4d7a]{top:-3px;left:0;height:5px;cursor:n-resize}.line-a[data-v-3a2d4d7a]{top:0;left:-3px;width:5px;cursor:w-resize}.line-s[data-v-3a2d4d7a]{bottom:-3px;left:0;height:5px;cursor:s-resize}.line-d[data-v-3a2d4d7a]{top:0;right:-3px;width:5px;cursor:e-resize}.crop-point[data-v-3a2d4d7a]{position:absolute;width:8px;height:8px;opacity:.75;background-color:#39f;border-radius:100%;z-index:998}.point-lt[data-v-3a2d4d7a]{top:-4px;left:-4px;cursor:nw-resize}.point-mt[data-v-3a2d4d7a]{top:-5px;left:50%;margin-left:-3px;cursor:n-resize}.point-rt[data-v-3a2d4d7a]{top:-4px;right:-4px;cursor:ne-resize}.point-ml[data-v-3a2d4d7a]{top:50%;left:-4px;margin-top:-3px;cursor:w-resize}.point-mr[data-v-3a2d4d7a]{top:50%;right:-4px;margin-top:-3px;cursor:e-resize}.point-lb[data-v-3a2d4d7a]{bottom:-5px;left:-4px;cursor:sw-resize}.point-mb[data-v-3a2d4d7a]{bottom:-5px;left:50%;margin-left:-3px;cursor:s-resize}.point-rb[data-v-3a2d4d7a]{bottom:-5px;right:-4px;cursor:se-resize}',""]),t.exports=e},"3c4d":function(t,e,o){t.exports=o.p+"static/img/download.c5f440ca.png"},5518:function(t,e,o){var a=o("fdb7");"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var i=o("4f06").default;i("ee86fa2e",a,!0,{sourceMap:!1,shadowMode:!1})},"57cf":function(t,e,o){t.exports=o.p+"static/img/video.15bc9b62.jpg"},"606e":function(t,e,o){"use strict";var a=o("5518"),i=o.n(a);i.a},"65cb":function(t,e,o){"use strict";o.r(e);var a=o("85b9"),i=o.n(a);for(var n in a)["default"].indexOf(n)<0&&function(t){o.d(e,t,(function(){return a[t]}))}(n);e["default"]=i.a},"85b9":function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a={props:{autoPlay:{type:Boolean,default:!1},url:{type:String,default:""},poster:{type:String,default:""},showBackBtn:{type:Boolean,default:!1},showDownloadBtn:{type:Boolean,default:!0},processBarColor:{type:String,default:"#39BFFD"}},data:function(){return{screenWidth:200,isFullScreen:!1,isDownloading:!1,downloadTask:null,progressValue:0,processBarWidth:0}},created:function(){this.screenWidth=uni.getSystemInfoSync().windowWidth},methods:{showToast:function(t){uni.showToast({title:t,icon:"none"})},downLoadFile:function(t){var e=this;e.showToast("开始下载"),e.downloadTask=uni.downloadFile({url:t,success:function(t){if(200===t.statusCode){console.log(t.tempFilePath);var o=t.tempFilePath;uni.saveFile({tempFilePath:o,success:function(t){console.log(t.savedFilePath),e.showToast("下载成功,文件已保存到"+t.savedFilePath)},fail:function(){e.showToast("下载失败，请稍后重试")}})}else e.showToast("下载失败")},complete:function(){e.isDownloading=!1}})},download:function(t){var e=this;e.progressValue=0,e.isDownloading?null!=e.downloadTask&&(e.downloadTask.abort(),e.isDownloading=!1,e.showToast("取消下载")):(e.isDownloading=!0,e.downLoadFile(t),e.downloadTask.onProgressUpdate((function(t){e.progressValue=t.progress})))},timeUpdate:function(t){this.processBarWidth=t.detail.currentTime/t.detail.duration*this.screenWidth},setFullScreenStatus:function(t){"horizontal"==t.detail.direction?this.isFullScreen=!0:this.isFullScreen=!1},back:function(){uni.navigateBack()}}};e.default=a},"8c99":function(t,e,o){"use strict";o.r(e);var a=o("d92e"),i=o("65cb");for(var n in i)["default"].indexOf(n)<0&&function(t){o.d(e,t,(function(){return i[t]}))}(n);o("606e");var r,s=o("f0c5"),c=Object(s["a"])(i["default"],a["b"],a["c"],!1,null,"6a96160a",null,!1,a["a"],r);e["default"]=c.exports},a5a1:function(t,e,o){var a=o("37f7");"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var i=o("4f06").default;i("48707899",a,!0,{sourceMap:!1,shadowMode:!1})},a728:function(t,e,o){"use strict";var a=o("a5a1"),i=o.n(a);i.a},bd52:function(t,e,o){t.exports=o.p+"static/img/back-white.309d83b9.png"},d06b:function(t,e,o){"use strict";o.r(e);var a=o("f55c"),i=o.n(a);for(var n in a)["default"].indexOf(n)<0&&function(t){o.d(e,t,(function(){return a[t]}))}(n);e["default"]=i.a},d5f5:function(t,e,o){"use strict";var a;o.d(e,"b",(function(){return i})),o.d(e,"c",(function(){return n})),o.d(e,"a",(function(){return a}));var i=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("v-uni-view",{directives:[{name:"show",rawName:"v-show",value:t.show,expression:"show"}],ref:"cropper",staticClass:"vue-cropper",style:{top:t.containerTop+"px"}},[o("v-uni-view",{staticClass:"cropper-box"},[o("v-uni-view",{staticClass:"cropper-box-canvas",style:{width:t.imageWidth+"px",height:t.imageHeight+"px",transform:"scale("+t.scale+","+t.scale+") translate3d("+t.x/t.scale+"px,"+t.y/t.scale+"px,0)rotateZ("+90*t.rotate+"deg)"},on:{touchstart:function(e){e.stopPropagation(),e.preventDefault(),arguments[0]=e=t.$handleEvent(e),t.imgTouchStart.apply(void 0,arguments)},touchmove:function(e){e.stopPropagation(),e.preventDefault(),arguments[0]=e=t.$handleEvent(e),t.imgMoveing.apply(void 0,arguments)},touchend:function(e){e.stopPropagation(),e.preventDefault(),arguments[0]=e=t.$handleEvent(e),t.imgMoveEnd.apply(void 0,arguments)}}},[o("v-uni-image",{ref:"cropperImg",staticClass:"uni-image",attrs:{src:t.src,alt:"cropper-img",mode:"scaleToFill"}})],1)],1),o("v-uni-view",{staticClass:"cropper-drag-box cropper-modal cropper-move pointer-events"}),o("v-uni-view",{staticClass:"cropper-crop-box",class:{"pointer-events":t.cropFixed},style:{width:t.cropW+"px",height:t.cropH+"px",transform:"translate3d("+t.cropOffsertX+"px,"+t.cropOffsertY+"px,0)"}},[o("v-uni-view",{staticClass:"cropper-view-box"},[o("v-uni-image",{style:{width:t.imageWidth+"px",height:t.imageHeight+"px",transform:"scale("+t.scale+","+t.scale+") translate3d("+(t.x-t.cropOffsertX)/t.scale+"px,"+(t.y-t.cropOffsertY)/t.scale+"px,0)rotateZ("+90*t.rotate+"deg)"},attrs:{mode:"scaleToFill",src:t.src,alt:"cropper-img"}})],1),t.cropFixed?t._e():o("v-uni-view",{staticClass:"cropper-face cropper-move",on:{touchstart:function(e){e.stopPropagation(),e.preventDefault(),arguments[0]=e=t.$handleEvent(e),t.touchStart.apply(void 0,arguments)},touchmove:function(e){e.stopPropagation(),e.preventDefault(),arguments[0]=e=t.$handleEvent(e),t.cropMoveing.apply(void 0,arguments)}}}),o("v-uni-view",{staticClass:"crop-line line-w"}),o("v-uni-view",{staticClass:"crop-line line-a"}),o("v-uni-view",{staticClass:"crop-line line-s"}),o("v-uni-view",{staticClass:"crop-line line-d"}),t.cropFixed?t._e():[o("v-uni-view",{staticClass:"crop-point point-lt",on:{touchstart:function(e){e.stopPropagation(),e.preventDefault(),arguments[0]=e=t.$handleEvent(e),t.touchStart.apply(void 0,arguments)},touchmove:function(e){e.stopPropagation(),e.preventDefault(),arguments[0]=e=t.$handleEvent(e),t.dragMove(e,"left-top")}}}),o("v-uni-view",{staticClass:"crop-point point-mt",on:{touchstart:function(e){e.stopPropagation(),e.preventDefault(),arguments[0]=e=t.$handleEvent(e),t.touchStart.apply(void 0,arguments)},touchmove:function(e){e.stopPropagation(),e.preventDefault(),arguments[0]=e=t.$handleEvent(e),t.dragMove(e,"middle-top")}}}),o("v-uni-view",{staticClass:"crop-point point-rt",on:{touchstart:function(e){e.stopPropagation(),e.preventDefault(),arguments[0]=e=t.$handleEvent(e),t.touchStart.apply(void 0,arguments)},touchmove:function(e){e.stopPropagation(),e.preventDefault(),arguments[0]=e=t.$handleEvent(e),t.dragMove(e,"right-top")}}}),o("v-uni-view",{staticClass:"crop-point point-ml",on:{touchstart:function(e){e.stopPropagation(),e.preventDefault(),arguments[0]=e=t.$handleEvent(e),t.touchStart.apply(void 0,arguments)},touchmove:function(e){e.stopPropagation(),e.preventDefault(),arguments[0]=e=t.$handleEvent(e),t.dragMove(e,"middle-left")}}}),o("v-uni-view",{staticClass:"crop-point point-mr",on:{touchstart:function(e){e.stopPropagation(),e.preventDefault(),arguments[0]=e=t.$handleEvent(e),t.touchStart.apply(void 0,arguments)},touchmove:function(e){e.stopPropagation(),e.preventDefault(),arguments[0]=e=t.$handleEvent(e),t.dragMove(e,"middle-right")}}}),o("v-uni-view",{staticClass:"crop-point point-lb",on:{touchstart:function(e){e.stopPropagation(),e.preventDefault(),arguments[0]=e=t.$handleEvent(e),t.touchStart.apply(void 0,arguments)},touchmove:function(e){e.stopPropagation(),e.preventDefault(),arguments[0]=e=t.$handleEvent(e),t.dragMove(e,"left-bottom")}}}),o("v-uni-view",{staticClass:"crop-point point-mb",on:{touchstart:function(e){e.stopPropagation(),e.preventDefault(),arguments[0]=e=t.$handleEvent(e),t.touchStart.apply(void 0,arguments)},touchmove:function(e){e.stopPropagation(),e.preventDefault(),arguments[0]=e=t.$handleEvent(e),t.dragMove(e,"middle-bottom")}}}),o("v-uni-view",{staticClass:"crop-point point-rb",on:{touchstart:function(e){e.stopPropagation(),e.preventDefault(),arguments[0]=e=t.$handleEvent(e),t.touchStart.apply(void 0,arguments)},touchmove:function(e){e.stopPropagation(),e.preventDefault(),arguments[0]=e=t.$handleEvent(e),t.dragMove(e,"right-bottom")}}})]],2),o("v-uni-canvas",{staticClass:"cropper-canvas",style:{width:t.cropW+"px",height:t.cropH+"px"},attrs:{"canvas-id":"myCanvas"}}),o("v-uni-view",{staticClass:"btn-group"},[o("v-uni-view",{directives:[{name:"show",rawName:"v-show",value:t.showResetBtn,expression:"showResetBtn"}],staticClass:"btn-item reset-btn",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.init.apply(void 0,arguments)}}}),o("v-uni-view",{directives:[{name:"show",rawName:"v-show",value:t.showRotateBtn,expression:"showRotateBtn"}],staticClass:"btn-item rotate-btn",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.rotateHandler.apply(void 0,arguments)}}})],1),o("v-uni-view",{staticClass:"uni-info__ft"},[o("v-uni-view",{staticClass:"uni-modal__btn uni-modal__btn_default",staticStyle:{color:"rgb(0, 0, 0)"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.cancel.apply(void 0,arguments)}}},[t._v("取消")]),o("v-uni-view",{staticClass:"uni-modal__btn uni-modal__btn_primary",staticStyle:{color:"rgb(0, 122, 255)"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.confirm.apply(void 0,arguments)}}},[t._v("确定")])],1)],1)},n=[]},d92e:function(t,e,o){"use strict";var a;o.d(e,"b",(function(){return i})),o.d(e,"c",(function(){return n})),o.d(e,"a",(function(){return a}));var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("v-uni-video",{staticStyle:{width:"100%",height:"100%","z-index":"1",position:"relative"},attrs:{id:"video",loop:"true",autoplay:t.autoPlay,src:t.url,poster:o("57cf")},on:{fullscreenchange:function(e){arguments[0]=e=t.$handleEvent(e),t.setFullScreenStatus.apply(void 0,arguments)},timeupdate:function(e){arguments[0]=e=t.$handleEvent(e),t.timeUpdate.apply(void 0,arguments)}}},[!t.isFullScreen&&t.showBackBtn?a("v-uni-cover-view",{staticClass:"back-button",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.back.apply(void 0,arguments)}}},[a("v-uni-image",{staticClass:"back-icon",attrs:{src:o("bd52")}})],1):t._e(),t.showDownloadBtn&&t.isFullScreen?a("v-uni-cover-view",{staticClass:"download-icon-horizontal",staticStyle:{width:"100%",margin:"0"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.download(t.url)}}},[t.isDownloading?a("v-uni-text",{staticClass:"process-text-horizontal"},[t._v(t._s(t.progressValue)+"%")]):a("v-uni-image",{staticClass:"back-icon",attrs:{src:o("3c4d")}})],1):t._e()],1),a("div",{staticClass:"video-process-bar",style:{"background-color":t.processBarColor,width:t.processBarWidth}})],1)},n=[]},f55c:function(t,e,o){"use strict";o("a9e3"),o("d3b7"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a={name:"image-cropper",props:{cropWidth:{type:Number,default:200},cropHeight:{type:Number,default:200},cropFixed:{type:Boolean,default:!1},src:{type:String},showResetBtn:{type:Boolean,default:!0},showRotateBtn:{type:Boolean,default:!0}},data:function(){var t=uni.getSystemInfoSync(),e=t.pixelRatio;return{show:!1,scale:1,rotate:0,cropW:0,cropH:0,cropOldW:0,cropOldH:0,sysInfo:t,pixelRatio:e,imageRealWidth:0,imageRealHeight:0,cropOffsertX:0,cropOffsertY:0,startX:0,startY:0,border:5,x:0,y:0,startL:0,oldScale:1}},watch:{src:function(t){t.length>0&&this.init()},show:function(t){t||(this.src="")}},computed:{containerTop:function(){var t=0;return t=0,t},containerHeight:function(){return this.windowHeight-48},windowWidth:function(){return this.sysInfo.windowWidth},windowHeight:function(){return this.sysInfo.windowHeight},imageRatio:function(){return this.imageRealHeight>0?this.imageRealWidth/this.imageRealHeight:0},imageWidth:function(){return this.imageRatio>=1?this.windowWidth:this.windowWidth*this.imageRatio},imageHeight:function(){return this.imageRatio>=1?this.windowWidth/this.imageRatio:this.windowWidth}},methods:{rotateHandler:function(){3==this.rotate?this.rotate=0:++this.rotate},init:function(){this.rotate=0,this.scale=1,this.cropW=this.cropWidth,this.cropH=this.cropHeight,uni.showLoading({title:"图片加载中..."}),this.loadImage(this.src).then((function(t){uni.hideLoading()})).catch((function(t){uni.hideLoading(),uni.showModal({title:"标题",content:"图片加载失败"})}))},loadImage:function(t){var e=this;return new Promise((function(o,a){uni.getImageInfo({src:t,success:function(t){e.imageRealWidth=t.width,e.imageRealHeight=t.height,e.cropOffsertX=e.windowWidth/2-e.cropW/2,e.cropOffsertY=e.windowHeight/2-e.cropH/2,e.show=!0,e.$nextTick((function(){e.x=e.windowWidth/2-e.imageWidth/2,e.y=e.containerHeight/2-e.imageHeight/2})),o(t)},fail:function(t){e.show=!1,a(t)}})}))},cancel:function(){this.show=!1,this.$emit("cancel")},confirm:function(t){uni.showLoading({title:"裁剪中..."});var e=this,o=uni.createCanvasContext("myCanvas",e),a=e.pixelRatio,i=e.src,n=e.imageWidth*e.scale,r=e.imageHeight*e.scale,s=e.rotate,c=e.cropOffsertX-e.x-(e.imageWidth-n)/2,d=e.cropOffsertY-e.y-(e.imageHeight-r)/2;switch(o.setFillStyle("white"),o.fillRect(0,0,n,r),o.save(),o.rotate(90*s*Math.PI/180),s){case 1:c+=(r-n)/2,d-=(r-n)/2,o.drawImage(i,-d,c,n,-r);break;case 2:o.drawImage(i,c,d,-n,-r);break;case 3:c+=(r-n)/2,d-=(r-n)/2,o.drawImage(i,d,-c,-n,r);break;default:o.drawImage(i,-c,-d,n,r);break}o.restore(),o.draw(!1,(function(){uni.canvasToTempFilePath({canvasId:"myCanvas",destWidth:e.cropW*a,destHeight:e.cropH*a,success:function(o){uni.hideLoading(),t.detail.tempFilePath=o.tempFilePath,e.show=!1,e.$emit("confirm",t)},fail:function(t){uni.hideLoading(),uni.showModal({title:"提示",content:"裁剪失败"})}},e)}))},imgTouchStart:function(t){if(2==t.touches.length){this.oldScale=this.scale,this.scaling=!0;var e=t.touches[0].pageX-t.touches[1].pageX,o=t.touches[0].pageY-t.touches[1].pageY,a=Math.sqrt(Math.pow(e,2)+Math.pow(o,2));this.startL=Math.max(e,o,a),uni.showModal({content:this.startL})}else this.startX=t.touches[0].pageX-this.x,this.startY=t.touches[0].pageY-this.y},imgMoveing:function(t){if(this.scaling){var e=this.oldScale,o=t.touches[0].pageX-t.touches[1].pageX,a=t.touches[0].pageY-t.touches[1].pageY,i=Math.sqrt(Math.pow(o,2)+Math.pow(a,2)),n=Math.max(o,a,i),r=n-this.startL,s=1;s=s/this.imageWidth>s/this.imageHeight?s/this.imageHeight:s/this.imageWidth,s=s>.1?.1:s;var c=s*r;r>0?e+=Math.abs(c):r<0&&e>Math.abs(c)&&(e-=Math.abs(c)),this.scale=e}else{var d=t.touches[0].pageX-this.startX,p=t.touches[0].pageY-this.startY;this.x=d,this.y=p}},imgMoveEnd:function(){var t=this;setTimeout((function(){t.scaling=!1}),100)},touchStart:function(t){this.startX=t.touches[0].pageX-this.cropOffsertX,this.startY=t.touches[0].pageY-this.cropOffsertY,this.cropOldW=this.cropW,this.cropOldH=this.cropH},cropMoveing:function(t){var e=this._cropX(t.touches[0].pageX-this.startX),o=this._cropY(t.touches[0].pageY-this.startY);this.cropOffsertX=e,this.cropOffsertY=o},dragMove:function(t,e){if(this.cropFixed)return!1;var o=t.touches[0].pageX-this.startX,a=t.touches[0].pageY-this.startY;switch(e){case"left-top":this._cropMoveLeft(o),this._cropMoveTop(a);break;case"middle-top":this._cropMoveTop(a);break;case"right-top":this._cropMoveTop(a),this._cropMoveRight(o);break;case"middle-right":this._cropMoveRight(o);break;case"right-bottom":this._cropMoveRight(o),this._cropMoveBottom(a);break;case"middle-bottom":this._cropMoveBottom(a);break;case"left-bottom":this._cropMoveBottom(a),this._cropMoveLeft(o);break;case"middle-left":this._cropMoveLeft(o);break;default:break}},_cropMoveTop:function(t){var e=this._cropY(t);this.cropH+=this.cropOffsertY-e,this.cropOffsertY=e},_cropMoveRight:function(t){if(this.cropOldW+t>=this.windowWidth-this.border)return!1;this.cropW=this.cropOldW+(t-this.cropOffsertX)},_cropMoveBottom:function(t){if(this.cropOldH+t>=this.windowHeight-this.containerTop-this.border)return!1;this.cropH=this.cropOldH+(t-this.cropOffsertY)},_cropMoveLeft:function(t){var e=this._cropY(t);this.cropW+=this.cropOffsertX-e,this.cropOffsertX=e},_cropX:function(t){return t<=this.border?this.border:t+this.cropW>=this.windowWidth-this.border?this.windowWidth-this.cropW-this.border:t},_cropY:function(t){return t<=this.border?this.border:t+this.cropH>=this.windowHeight-this.containerTop-this.border?this.windowHeight-this.cropH-this.containerTop-this.border:t}}};e.default=a},fdb7:function(t,e,o){var a=o("24fb");e=a(!1),e.push([t.i,'@charset "UTF-8";\n/**\n * 这里是uni-app内置的常用样式变量\n *\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\n *\n */\n/**\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\n *\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\n */\n/* 颜色变量 */\n/* 行为相关颜色 */\n/* 文字基本颜色 */\n/* 背景颜色 */\n/* 边框颜色 */\n/* 尺寸变量 */\n/* 文字尺寸 */\n/* 图片尺寸 */\n/* Border Radius */\n/* 水平间距 */\n/* 垂直间距 */\n/* 透明度 */\n/* 文章场景相关 */.back-button[data-v-6a96160a]{width:30px;height:30px;-webkit-box-align:center;-webkit-align-items:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;opacity:.8;margin-top:25px;margin-left:15px;border-radius:50%;background-color:rgba(0,0,0,.8)}.back-icon[data-v-6a96160a]{width:20px;height:20px}.download-button[data-v-6a96160a]{position:absolute;top:90px;right:15px;width:30px;height:30px;-webkit-box-align:center;-webkit-align-items:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;opacity:.8;border-radius:50%;background-color:rgba(0,0,0,.8)}.process-text[data-v-6a96160a]{color:#fff;font-size:10px}.video-process-bar[data-v-6a96160a]{height:2px}.download-icon-horizontal[data-v-6a96160a]{position:absolute;right:30px;width:30px;height:30px;-webkit-box-align:center;-webkit-align-items:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;opacity:.8;border-radius:50%;background-color:rgba(0,0,0,.8)}.process-text-horizontal[data-v-6a96160a]{color:#fff;font-size:5px}',""]),t.exports=e}}]);