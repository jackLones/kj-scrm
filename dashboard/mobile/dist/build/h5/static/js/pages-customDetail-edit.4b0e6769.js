(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-customDetail-edit"],{"51c0":function(e,t,i){var a=i("24fb");t=a(!1),t.push([e.i,".box[data-v-be571816]{background:#f6f6f6;position:fixed;top:0;bottom:0}[data-v-be571816] .uni-navbar--border{border:0}.custom-tabs-button[data-v-be571816]{width:70px;line-height:30px;font-size:.693rem}.custom-tabs-content[data-v-be571816]{background:#fff;padding:0 .8rem;box-sizing:border-box;position:fixed;left:0;right:0;top:2.667rem /* 50/18.75 */;bottom:0;overflow:auto}.list[data-v-be571816]{line-height:.747rem;padding-top:.8rem;text-align:left;overflow:hidden}.list[data-v-be571816]:nth-child(3n){border-bottom:1px solid #f5f5f5;padding-bottom:.8rem}.list-title[data-v-be571816]{color:#adaeb6;font-size:.693rem;display:inline-block;vertical-align:top;width:2.88rem;margin-right:1.547rem}.list-content[data-v-be571816]{color:#007aff;font-size:.693rem;display:inline-block;width:calc(100% - 4.427rem);float:right}.list-content2[data-v-be571816]{color:#007aff;font-size:.693rem;display:inline-block;width:calc(100% - .907rem)}.phone-line[data-v-be571816]{border-bottom:1px dashed #f5f5f5;float:right;width:calc(100% - 4.427rem);padding-bottom:3px;margin-bottom:3px}.phone-line[data-v-be571816]:last-child{margin-bottom:0}.choose-status[data-v-be571816]{float:left;font-size:.693rem;line-height:15.4629px}.choose-status2[data-v-be571816]{float:left;border:1px solid #007aff;padding:.16rem ;border-radius:.16rem ;margin:0 .16rem .16rem 0}.placeholder-style[data-v-be571816]{color:#c5c5c5}[data-v-be571816] .uni-input-placeholder{color:#c5c5c5}.uni-input[data-v-be571816]{height:28px;line-height:28px;font-size:15px;text-align:left;border:1px solid #ccc;border-radius:4px;padding:0 8px;margin:15px 0}\n\n/* 提示窗口 */.uni-tip[data-v-be571816]{\ndisplay:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;flex-direction:column;\npadding:15px;width:75%;background-color:#fff;border-radius:4px;left:12.5%;position:absolute;top:50%;box-sizing:border-box;margin-top:-50px}[data-v-be571816] .uni-popup__wrapper-box{width:100%;height:100%}.uni-tip-title[data-v-be571816]{margin-bottom:10px;text-align:center;font-weight:700;font-size:16px;color:#333}.uni-tip-content[data-v-be571816]{font-size:14px;color:#666}.uni-tip-group-button[data-v-be571816]{\ndisplay:-webkit-box;display:-webkit-flex;display:flex;\n-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;flex-direction:row;margin-top:20px}.uni-tip-button[data-v-be571816]{-webkit-box-flex:1;-webkit-flex:1;flex:1;text-align:center;font-size:14px;color:#3b4144}.img[data-v-be571816]{width:3.627rem;height:3.627rem;border-radius:.267rem;margin:0 .48rem .4rem 0;position:relative;float:left}.img2[data-v-be571816]{max-width:3.627rem;max-height:3.627rem;border-radius:.267rem}.demo[data-v-be571816]{width:3.627rem;height:3.627rem;text-align:center;font-size:.747rem ;border:1px solid #ccc;\n\t/*padding: 0.267rem 0px;*/border-radius:4px}.preview-box[data-v-be571816]{top:0;right:0;bottom:0;left:0;position:fixed;z-index:9999999;background-color:#000}.swiper-box[data-v-be571816]{height:100%}.swiper-item[data-v-be571816]{height:100%;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center}.img-info[data-v-be571816]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;padding:25% 0}",""]),e.exports=t},"5db9":function(e,t,i){"use strict";i.r(t);var a=i("c224"),n=i.n(a);for(var o in a)["default"].indexOf(o)<0&&function(e){i.d(t,e,(function(){return a[e]}))}(o);t["default"]=n.a},"7aee":function(e,t,i){"use strict";i.d(t,"b",(function(){return n})),i.d(t,"c",(function(){return o})),i.d(t,"a",(function(){return a}));var a={uniNavBar:i("f31d").default,uniPopup:i("1c89").default,uniIcons:i("2ba4").default,pickRegions:i("0cc2").default},n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("v-uni-view",{staticClass:"box content_head"},[i("uni-nav-bar",{attrs:{"left-icon":"back",title:"修改客户画像"},on:{clickLeft:function(t){arguments[0]=t=e.$handleEvent(t),e.back.apply(void 0,arguments)}}},[i("v-uni-button",{staticClass:"custom-tabs-button",attrs:{slot:"right",type:"primary"},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.submit.apply(void 0,arguments)}},slot:"right"},[e._v("提交")])],1),i("uni-popup",{ref:"visible",attrs:{type:"center","mask-click":!1}},[i("v-uni-view",{staticClass:"uni-tip"},[i("v-uni-text",{staticClass:"uni-tip-title"},[e._v("保存本次编辑?")]),i("v-uni-view",{staticClass:"uni-tip-group-button"},[i("v-uni-text",{staticClass:"uni-tip-button",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.unSave.apply(void 0,arguments)}}},[e._v("不保存")]),i("v-uni-text",{staticClass:"uni-tip-button",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.submit.apply(void 0,arguments)}}},[e._v("保存")])],1)],1)],1),e.isLoading?i("v-uni-view",{staticClass:"custom-tabs-content content_head"},[i("v-uni-view",{staticClass:"custom-tabs-list"},[i("v-uni-view",{staticStyle:{padding:"0px 0 0.8rem"}},[e._l(e.list,(function(t,a){return"phone"==t.key&&1!=e.is_hide_phone||"phone"!=t.key?[i("v-uni-view",{staticClass:"list"},[i("v-uni-text",{staticClass:"list-title"},[e._v(e._s(t.title))]),2!=t.type&&3!=t.type&&7!=t.type&&4!=t.type&&8!=t.type&&"phone"!=t.key&&"company"!=t.key?i("v-uni-input",{staticClass:"list-content",attrs:{placeholder:"请输入"+t.title},model:{value:t.value,callback:function(i){e.$set(t,"value",i)},expression:"item.value"}}):e._e(),"phone"==t.key?e._l(e.phone,(function(a,n){return i("div",{staticClass:"phone-line"},[i("v-uni-input",{staticClass:"list-content2",attrs:{placeholder:"请输入手机号",value:a},on:{input:function(i){arguments[0]=i=e.$handleEvent(i),e.changeSpecialInput(i,t.key,n)}}}),n!=e.phone.length-1?i("uni-icons",{staticStyle:{"font-size":"0.907rem  /* 17/18.75 */"},attrs:{type:"close",color:"#c5c5c5"},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.deletePhone(n)}}}):e._e()],1)})):e._e(),"company"==t.key?[i("v-uni-input",{staticClass:"list-content",attrs:{placeholder:"请输入公司",value:e.company},on:{input:function(i){arguments[0]=i=e.$handleEvent(i),e.changeSpecialInput(i,t.key)}}})]:e._e(),8==t.type?i("v-uni-view",{staticClass:"list-content"},[e._l(t.value,(function(t,n){return i("v-uni-view",{staticClass:"img"},[i("v-uni-image",{staticClass:"img2",attrs:{src:e.commonUrl+t.url},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.preview(a,n)}}}),i("uni-icons",{staticStyle:{position:"absolute",right:"0",top:"0.267rem  /* 5/18.75 */"},attrs:{type:"close",size:"20",color:"#1890FF"},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.deleteImg(a,n)}}})],1)})),i("v-uni-view",{staticClass:"uni-hello-addfile demo",staticStyle:{cursor:"pointer",float:"left"},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.chooseImage(a)}}},[i("v-uni-text",{staticStyle:{margin:"0.533rem 0",display:"inline-block","font-size":"1.493rem  /* 28/18.75 */"}},[e._v("+")]),i("v-uni-view",{staticStyle:{"margin-top":"0.267rem  /* 5/18.75 */"}},[e._v("上传")])],1)],2):e._e(),i("v-uni-picker",{staticClass:"list-content",attrs:{value:t.optionValIndex,range:t.optionVal2},on:{change:function(t){arguments[0]=t=e.$handleEvent(t),e.changeOneSelect(t,a)}}},[2==t.type?i("v-uni-view",[-1==t.optionValIndex?i("v-uni-view",{staticClass:"choose-status placeholder-style"},[e._v("请选择"+e._s(t.title))]):e._e(),-2==t.optionValIndex?i("v-uni-view",{staticClass:"choose-status"},[e._v(e._s(t.value))]):i("v-uni-view",{staticClass:"choose-status"},[e._v(e._s(t.optionVal2[t.optionValIndex]))]),i("uni-icons",{staticStyle:{float:"right",color:"#C5C5C5","font-size":"0.8rem  /* 15/18.75 */"},attrs:{type:"arrowright",size:"20"}})],1):e._e()],1),3==t.type?i("v-uni-view",{staticClass:"list-content"},[t.hasOption.length>0?e._l(t.hasOption,(function(t,n){return i("v-uni-view",{staticClass:"choose-status2"},[e._v(e._s(t)),i("uni-icons",{staticStyle:{float:"right",color:"#007AFF"},attrs:{type:"closeempty",size:"20"},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.deleteTag(n,a)}}})],1)})):e._e(),i("v-uni-picker",{attrs:{range:t.optionVal2},on:{change:function(t){arguments[0]=t=e.$handleEvent(t),e.changeSelect(t,a)}}},[0==t.hasOption.length?[i("v-uni-view",{staticClass:"choose-status placeholder-style"},[e._v("请选择"+e._s(t.title))])]:e._e(),i("uni-icons",{staticStyle:{float:"right",color:"#C5C5C5","font-size":"0.8rem  /* 15/18.75 */"},attrs:{type:"arrowright",size:"20"}})],2)],2):e._e(),i("pick-regions",{staticClass:"list-content",attrs:{"default-regions":t.defaultRegions,index:a},on:{getRegions:function(t){arguments[0]=t=e.$handleEvent(t),e.changeArea.apply(void 0,arguments)}}},[7==t.type?i("v-uni-view",[""==t.regionsName?i("v-uni-view",{staticClass:"choose-status placeholder-style"},[e._v("请选择"+e._s(t.title))]):e._e(),""!=t.regionsName?i("v-uni-view",{staticClass:"choose-status"},[e._v(e._s(t.regionsName))]):e._e(),i("uni-icons",{staticStyle:{float:"right",color:"#C5C5C5","font-size":"0.8rem  /* 15/18.75 */"},attrs:{type:"arrowright",size:"20"}})],1):e._e()],1),i("v-uni-picker",{staticClass:"list-content",attrs:{mode:"date",value:t.date,start:t.startDate,end:t.endDate},on:{change:function(t){arguments[0]=t=e.$handleEvent(t),e.bindDateChange(t,a)}}},[4==t.type?i("v-uni-view",[""!=t.date?i("v-uni-view",[e._v(e._s(t.date))]):e._e(),""==t.date?i("v-uni-view",{staticClass:"placeholder-style"},[e._v("请选择"+e._s(t.title))]):e._e()],1):e._e()],1)],2)]:e._e()})),i("v-uni-view",{staticClass:"list"},[i("v-uni-text",{staticClass:"list-title"},[e._v("描述")]),i("v-uni-input",{staticClass:"list-content",attrs:{placeholder:"请输入描述，150字以内",maxlength:"150"},model:{value:e.des,callback:function(t){e.des=t},expression:"des"}})],1)],2)],1),1==e.is_show_copyright?i("Footer"):e._e()],1):e._e(),e.previewShow?i("v-uni-view",{staticClass:"uni-margin-wrap preview-box"},[i("v-uni-swiper",{staticClass:"swiper swiper-box",attrs:{"current-item-id":e.previewIndex}},e._l(e.imgList,(function(t,a){return i("v-uni-swiper-item",{key:a,attrs:{"item-id":String(a)}},[i("v-uni-view",{staticClass:"swiper-item",on:{touchmove:function(t){arguments[0]=t=e.$handleEvent(t),e.touchMove.apply(void 0,arguments)},touchstart:function(t){arguments[0]=t=e.$handleEvent(t),e.touchStart.apply(void 0,arguments)},touchend:function(t){arguments[0]=t=e.$handleEvent(t),e.touchEnd.apply(void 0,arguments)},click:function(t){arguments[0]=t=e.$handleEvent(t),e.closePreview.apply(void 0,arguments)}}},[i("img",{staticClass:"img-info",attrs:{src:e.commonUrl+t.url,width:"75%"}})])],1)})),1)],1):e._e()],1)},o=[]},b381:function(e,t,i){"use strict";i.r(t);var a=i("7aee"),n=i("5db9");for(var o in n)["default"].indexOf(o)<0&&function(e){i.d(t,e,(function(){return n[e]}))}(o);i("e0fa");var s,r=i("f0c5"),l=Object(r["a"])(n["default"],a["b"],a["c"],!1,null,"be571816",null,!1,a["a"],s);t["default"]=l.exports},c224:function(e,t,i){"use strict";var a=i("ee27");i("99af"),i("c975"),i("a15b"),i("d81d"),i("a434"),i("ac1f"),i("1276"),i("498a"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=a(i("0122"));i("96cf");var o=a(i("c964")),s=a(i("0cc2")),r=i("b970"),l=a(i("2c4b"));function c(e){var t=new Date,i=t.getFullYear(),a=t.getMonth()+1,n=t.getDate();return"start"===e?i-=60:"end"===e?i+=2:"today"===e&&(i=i),a=a>9?a:"0"+a,n=n>9?n:"0"+n,"".concat(i,"-").concat(a,"-").concat(n)}var u={name:"list",inject:["getParameter","initPage"],components:{pickRegions:s.default,Footer:l.default},data:function(){return{field_list:[],list:[],commonUrl:this.$store.state.commonUrl,previewShow:!1,imgList:[],previewIndex:0,des:0,imageSrc:"",phone:[],company:[],type:1,is_hide_phone:0,is_show_copyright:localStorage.getItem("is_show_copyright"),isLoading:!1}},onLoad:function(){var e=this;uni.setNavigationBarTitle({title:"客户详情"}),this.type=this.getParameter("type"),this.$store.dispatch("setWx",(function(){e.initPage(e.startPage)}))},methods:{startPage:function(){this.is_show_copyright=localStorage.getItem("is_show_copyright"),1==this.type?this.getData():2==this.type&&this.getData2()},getData:function(){var e=this;return(0,o.default)(regeneratorRuntime.mark((function t(){var i,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r.Toast.loading({message:"加载中...",forbidClick:!0,loadingType:"spinner"}),t.next=3,e.axios.post("wap-custom-detail/custom-field-detail",{uid:localStorage.getItem("uid"),external_userid:e.getParameter("external_userid")||localStorage.getItem("externalId")||localStorage.getItem("external_userid")||localStorage.getItem("external_id"),userid:e.getParameter("user_id")||localStorage.getItem("user_id")});case 3:i=t.sent,a=i.data,0!=a.error?(e.isLoading=!0,r.Toast.clear(),r.Toast.fail(a.error_msg)):(r.Toast.clear(),e.field_list=a.data.field_list,e.is_hide_phone=a.data.is_hide_phone,e.des=a.data.des,e.imageSrc=a.data.path,""!=a.data.phone?(e.phone=a.data.phone.split(","),e.phone.push("")):e.phone.push(""),e.company=a.data.company,e.list=JSON.parse(JSON.stringify(a.data.field_list)),e.list.map((function(e){2==e.type||3==e.type?(e.optionVal2=e.optionVal.split(","),2==e.type&&(""==e.value?e.optionValIndex=-1:-1==e.optionVal2.indexOf(e.value)?e.optionValIndex=-2:e.optionValIndex=e.optionVal2.indexOf(e.value)),3==e.type&&(""!=e.value?e.hasOption=e.value.split(","):e.hasOption=[])):7==e.type?""==e.value?(e.regions=[{name:""},{name:""}],e.defaultRegions=[],e.regionsName=""):(e.regions=[{name:""},{name:""}],e.defaultRegions=e.value.split("-"),e.regions[0].name=e.defaultRegions[0],e.regions[1].name=e.defaultRegions[1],e.regionsName=e.regions.map((function(e){return e.name})).join("-")):4==e.type&&(e.date=e.value,"birthday"==e.key?(e.startDate=c("start"),e.endDate=c("today")):(e.startDate=c("start"),e.endDate=c("end")))})),e.isLoading=!0);case 6:case"end":return t.stop()}}),t)})))()},getData2:function(){var e=this;return(0,o.default)(regeneratorRuntime.mark((function t(){var i,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r.Toast.loading({message:"加载中...",forbidClick:!0,loadingType:"spinner"}),t.next=3,e.axios.post("wap-public-sea/custom-field-detail",{uid:localStorage.getItem("uid"),cid:e.getParameter("cid")});case 3:i=t.sent,a=i.data,0!=a.error?(e.isLoading=!0,r.Toast.clear(),r.Toast.fail(a.error_msg)):(r.Toast.clear(),e.field_list=a.data.field_list,e.des=a.data.des,e.imageSrc=a.data.path,""!=a.data.phone?(e.phone=a.data.phone.split(","),e.phone.push("")):e.phone.push(""),e.company=a.data.company,e.list=JSON.parse(JSON.stringify(a.data.field_list)),e.list.map((function(e){2==e.type||3==e.type?(e.optionVal2=e.optionVal.split(","),2==e.type&&(""==e.value?e.optionValIndex=-1:-1==e.optionVal2.indexOf(e.value)?e.optionValIndex=-2:e.optionValIndex=e.optionVal2.indexOf(e.value)),3==e.type&&(""!=e.value?e.hasOption=e.value.split(","):e.hasOption=[])):7==e.type?""==e.value?(e.regions=[{name:""},{name:""}],e.defaultRegions=[],e.regionsName=""):(e.regions=[{name:""},{name:""}],e.defaultRegions=e.value.split("-"),e.regions[0].name=e.defaultRegions[0],e.regions[1].name=e.defaultRegions[1],e.regionsName=e.regions.map((function(e){return e.name})).join("-")):4==e.type&&(e.date=e.value,"birthday"==e.key?(e.startDate=c("start"),e.endDate=c("today")):(e.startDate=c("start"),e.endDate=c("end")))})),e.isLoading=!0);case 6:case"end":return t.stop()}}),t)})))()},touchMove:function(e){e.changedTouches[0].pageX,e.changedTouches[0].pageY},touchStart:function(e){this.touchStartX=e.changedTouches[0].pageX,this.touchStartY=e.changedTouches[0].pageY},touchEnd:function(e){var t=e.changedTouches[0].pageY;Math.abs(t)-Math.abs(this.touchStartY)>100&&(this.previewShow=!1)},closePreview:function(){this.previewShow=!1},deletePhone:function(e){this.phone.splice(e,1),this.$forceUpdate()},changeSpecialInput:function(e,t,i){if("phone"==t){this.phone[i]=e.target.value;var a=/[^+|-|\d]/;this.phone.length<5&&!a.test(e.target.value)&&e.target.value.length>=5&&e.target.value.length<=32&&this.phone.length-1==i&&(this.phone.push(""),this.$forceUpdate())}else"company"==t&&(this.company=e.target.value)},preview:function(e,t){this.imgList=this.list[e].value,this.previewIndex=String(t),this.previewShow=!0},deleteImg:function(e,t){this.list[e].value.splice(t,1)},previewImageSrc:function(){var e={url:this.imageSrc};this.imgList=[],this.imgList.push(e),this.previewIndex="0",this.previewShow=!0},deleteImageSrc:function(){this.imageSrc=""},chooseImage:function(e){var t=this;uni.chooseImage({count:1,sizeType:["compressed"],sourceType:["album"],success:function(i){if(i.tempFiles[0].size>2097152)return r.Toast.fail("文件大小超过2M"),!1;r.Toast.setDefaultOptions({duration:2e5}),r.Toast.loading({message:"正在上传...",forbidClick:!0,loadingType:"spinner"});var a=i.tempFilePaths[0];uni.uploadFile({url:t.$store.state.commonUrl+"/api/sub-user/upload-image",filePath:a,fileType:"image",name:"fileInfo",formData:{uid:localStorage.getItem("uid")},header:{Authorization:"Bearer "+localStorage.getItem("token")},success:function(i){r.Toast.setDefaultOptions({duration:1e3}),r.Toast.clear(),0==JSON.parse(i.data).error?(uni.showToast({title:"上传成功",icon:"success",duration:2e3}),-1==e?t.imageSrc=JSON.parse(i.data).data.local_path:t.list[e].value.push({uid:(new Date).getTime(),url:JSON.parse(i.data).data.local_path,status:"done",name:"1.png"})):uni.showToast({title:JSON.parse(i.data).error_msg,image:"/static/fail.png",duration:2e3})},fail:function(e){r.Toast.setDefaultOptions({duration:1e3}),r.Toast.clear(),uni.showModal({content:e.errMsg,showCancel:!1})}})},fail:function(e){console.log("chooseImage fail",e)}})},changeOneSelect:function(e,t){this.list[t].optionValIndex=e.detail.value,this.$forceUpdate()},changeSelect:function(e,t){-1==this.list[t].hasOption.indexOf(this.list[t].optionVal2[e.detail.value])?this.list[t].hasOption.push(this.list[t].optionVal2[e.detail.value]):r.Toast.fail("选项不可重复"),this.$forceUpdate()},deleteTag:function(e,t){this.list[t].hasOption.splice(e,1),this.$forceUpdate()},changeArea:function(e,t){this.list[t].regions=e,this.list[t].regionsName=e.map((function(e){return e.name})).join("-"),this.$forceUpdate()},bindDateChange:function(e,t){this.list[t].date=e.detail.value,this.$forceUpdate()},submit:function(){var e=this;return(0,o.default)(regeneratorRuntime.mark((function t(){var i,a,o,s,l,c,u,d,p,h;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:i=[],e.list.map((function(t){if(2==t.type)-1==t.optionValIndex?i.push({fieldid:t.fieldid,key:t.key,type:t.type,value:""}):-2==t.optionValIndex?i.push({fieldid:t.fieldid,key:t.key,type:t.type,value:t.value}):i.push({fieldid:t.fieldid,key:t.key,type:t.type,value:t.optionVal2[t.optionValIndex]});else if(3==t.type)i.push({fieldid:t.fieldid,key:t.key,type:t.type,value:t.hasOption.join(",")});else if(7==t.type)i.push({fieldid:t.fieldid,key:t.key,type:t.type,value:t.regionsName});else if(4==t.type)i.push({fieldid:t.fieldid,key:t.key,type:t.type,value:t.date});else if("phone"==t.key){for(var a=e.phone.length-1;a>=0;a--)""==e.phone[a]&&e.phone.splice(a,1);i.push({fieldid:t.fieldid,key:t.key,type:t.type,value:e.phone.join()})}else"company"==t.key?i.push({fieldid:t.fieldid,key:t.key,type:t.type,value:e.company}):i.push({fieldid:t.fieldid,key:t.key,type:t.type,value:t.value})})),a=/[^+|-|\d]/,o=/^\w[-\w.+]*@([A-Za-z0-9][-A-Za-z0-9]+\.)+[A-Za-z]{2,14}$/,s=i.length-1;case 5:if(!(s>=0)){t.next=40;break}if("wx_num"!=i[s].key||""==i[s].value.trim()){t.next=10;break}if(/^[a-zA-Z]([-_a-zA-Z0-9]{5,19})+$/.test(i[s].value.trim())){t.next=10;break}return r.Toast.fail("微信号格式不正确！"),t.abrupt("return",!1);case 10:if("qq"!=i[s].key||""==i[s].value.trim()){t.next=14;break}if(/^[1-9][0-9]{4,14}$/.test(i[s].value.trim())){t.next=14;break}return r.Toast.fail("QQ号格式不正确！"),t.abrupt("return",!1);case 14:if("idCard"!=i[s].key||""==i[s].value.trim()){t.next=18;break}if(/^[1-9]\d{5}(18|19|20|(3\d))\d{2}((0[1-9])|(1[0-2]))(([0-2][1-9])|10|20|30|31)\d{3}[0-9Xx]$/.test(i[s].value.trim())){t.next=18;break}return r.Toast.fail("身份证号码格式不正确！"),t.abrupt("return",!1);case 18:if("phone"!=i[s].key){t.next=33;break}l=i[s].value.split(","),c=0;case 21:if(!(c<l.length)){t.next=32;break}if(""!=l[c].trim()){t.next=26;break}l.splice(c,1),t.next=29;break;case 26:if(!a.test(l[c].trim())){t.next=29;break}return r.Toast.fail("手机号格式不正确！"),t.abrupt("return",!1);case 29:c++,t.next=21;break;case 32:i[s].value=l.join();case 33:if(6!=i[s].type||""==i[s].value.trim()){t.next=37;break}if(o.test(i[s].value.trim())){t.next=37;break}return r.Toast.fail("邮箱格式不正确！"),t.abrupt("return",!1);case 37:s--,t.next=5;break;case 40:if(1!=e.type){t.next=48;break}return t.next=43,e.axios.post("wap-custom-detail/custom-field-update",{uid:localStorage.getItem("uid"),external_userid:localStorage.getItem("externalId"),userid:e.getParameter("user_id")||localStorage.getItem("user_id"),fieldData:i,des:e.des,path:e.imageSrc,corp_id:localStorage.getItem("corpid")});case 43:u=t.sent,d=u.data,0!=d.error?(r.Toast.fail(d.error_msg),"object"==(0,n.default)(e.phone)&&0==e.phone.length&&e.phone.push("")):uni.navigateBack(),t.next=54;break;case 48:if(2!=e.type){t.next=54;break}return t.next=51,e.axios.post("wap-public-sea/custom-field-update",{uid:localStorage.getItem("uid"),cid:e.getParameter("cid"),fieldData:i,des:e.des,path:e.imageSrc});case 51:p=t.sent,h=p.data,0!=h.error?(r.Toast.fail(h.error_msg),"object"==(0,n.default)(e.phone)&&0==e.phone.length&&e.phone.push("")):uni.navigateBack();case 54:case"end":return t.stop()}}),t)})))()},back:function(){this.$refs["visible"].open()},unSave:function(){this.$refs["visible"].close(),history.back()}}};t.default=u},c237:function(e,t,i){var a=i("51c0");"string"===typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);var n=i("4f06").default;n("33ce90a4",a,!0,{sourceMap:!1,shadowMode:!1})},e0fa:function(e,t,i){"use strict";var a=i("c237"),n=i.n(a);n.a}}]);