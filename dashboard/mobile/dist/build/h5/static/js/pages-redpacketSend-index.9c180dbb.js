(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-redpacketSend-index"],{"1de5":function(e,t,a){"use strict";e.exports=function(e,t){return t||(t={}),e=e&&e.__esModule?e.default:e,"string"!==typeof e?e:(/^['"].*['"]$/.test(e)&&(e=e.slice(1,-1)),t.hash&&(e+=t.hash),/["'() \t\n]/.test(e)||t.needQuotes?'"'.concat(e.replace(/"/g,'\\"').replace(/\n/g,"\\n"),'"'):e)}},"38e6":function(e,t,a){"use strict";var r=a("d421"),n=a.n(r);n.a},"3af8":function(e,t,a){e.exports=a.p+"static/img/open.f55bd613.png"},"5b6b":function(e,t,a){"use strict";var r=a("ee27");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("96cf");var n=r(a("c964")),i={name:"index",data:function(){return{ready:!1,corpid:"",ticketData:{},agentData:{},jsApiList:[],canOpen:0,timeType:0,msg:"",sendId:0,corpLogo:"",avatar:"",title:"",thanking:"",openLoading:!1}},inject:["initPage","getParameter"],components:{},mounted:function(){uni.showLoading({title:"加载中...",duration:2e3});var e=this;e.$store.dispatch("setWx",(function(){e.initPage(e.limit)}))},methods:{limit:function(){var e=this;return(0,n.default)(regeneratorRuntime.mark((function t(){var a,r,n,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=e,e.url=window.location.href,r=e.getParameter("agent_id"),localStorage.setItem("agent_id",r),t.next=6,e.axios.post("chat-message/get-config",{url:e.url,agent_id:r});case 6:n=t.sent,i=n.data,0!=i.error?uni.showToast({title:i.errMsg,image:"/static/fail.png",duration:2e3}):(a.uid=i.data.uid,a.corpid=i.data.corpid,localStorage.setItem("uid",a.uid),a.$store.dispatch("setCorpId",a.corpid),a.ticketData=i.data.ticketData,a.agentData=i.data.agentData,a.$store.state.wx.config({beta:!0,debug:!1,appId:a.ticketData.corpid,timestamp:a.ticketData.timestamp,nonceStr:a.ticketData.nonceStr,signature:a.ticketData.signature,jsApiList:["hideOptionMenu"]}),a.$store.state.wx.error((function(e){uni.showToast({title:e.errMsg,image:"/static/fail.png",duration:2e3})})),a.$store.state.wx.ready((function(){a.$store.state.wx.hideOptionMenu(),localStorage.getItem("user_id")?a.look():a.getInfoData()})));case 9:case"end":return t.stop()}}),t)})))()},getInfoData:function(){var e=this;return(0,n.default)(regeneratorRuntime.mark((function t(){var a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return uni.showLoading({title:"加载中...",duration:2e3}),t.next=3,e.axios.post("redpacket-open/send-redpacket-index",{external_userid:null!=e.getParameter("external_userid")?e.getParameter("external_userid"):localStorage.getItem("external_id"),openid:localStorage.getItem("openid"),corp_id:e.getParameter("corpid"),assist:e.getParameter("assist")});case 3:a=t.sent,r=a.data,0!=r.error?(uni.hideLoading(),uni.showToast({title:r.error_msg,image:"/static/fail.png",duration:2e3})):(uni.setNavigationBarTitle({title:r.data.resData.act_name}),1==r.data.resData.isOpen&&(window.location.href=e.$store.state.h5Url+"/h5/pages/redpacketSend/list?corp_id="+e.getParameter("corpid")+"&assist="+e.getParameter("assist")+"&agent_id="+e.getParameter("agent_id")),r.data.resData.timeType&&(e.timeType=r.data.resData.timeType),e.corpLogo=r.data.resData.corp_logo,e.avatar=r.data.resData.avatar,e.title=r.data.resData.name,e.thanking=r.data.resData.thanking,e.canOpen=r.data.resData.canOpen,r.data.resData.msg&&(e.msg=r.data.resData.msg),uni.hideLoading(),e.ready=!0);case 6:case"end":return t.stop()}}),t)})))()},look:function(){window.location.href=this.$store.state.h5Url+"/h5/pages/redpacketSend/list?corp_id="+this.getParameter("corpid")+"&assist="+this.getParameter("assist")+"&agent_id="+this.getParameter("agent_id")},openRed:function(){var e=this;return(0,n.default)(regeneratorRuntime.mark((function t(){var a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.openLoading){t.next=2;break}return t.abrupt("return",!1);case 2:return uni.showLoading({title:"加载中...",duration:2e3}),e.openLoading=!0,t.next=6,e.axios.post("redpacket-open/send-redpacket-open",{user_id:localStorage.getItem("user_id"),external_userid:null!=e.getParameter("external_userid")?e.getParameter("external_userid"):localStorage.getItem("external_id"),openid:localStorage.getItem("openid"),corp_id:e.getParameter("corpid"),assist:e.getParameter("assist")});case 6:a=t.sent,r=a.data,0!=r.error?(e.openLoading=!1,uni.hideLoading(),uni.showToast({title:r.error_msg,image:"/static/fail.png",duration:2e3})):(uni.hideLoading(),e.openLoading=!1,e.sendId?window.location.href=e.$store.state.h5Url+"/h5/pages/redpacketSend/list?corp_id="+e.getParameter("corpid")+"&assist="+e.getParameter("assist")+"&agent_id="+e.getParameter("agent_id"):e.getInfoData());case 9:case"end":return t.stop()}}),t)})))()},formatter:function(e){return e<10?"0"+e:e}}};t.default=i},"795e":function(e,t,a){"use strict";a.r(t);var r=a("5b6b"),n=a.n(r);for(var i in r)["default"].indexOf(i)<0&&function(e){a.d(t,e,(function(){return r[e]}))}(i);t["default"]=n.a},"884a":function(e,t,a){"use strict";var r;a.d(t,"b",(function(){return n})),a.d(t,"c",(function(){return i})),a.d(t,"a",(function(){return r}));var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-uni-view",[e.ready?r("v-uni-view",{staticClass:"index"},[r("v-uni-view",{staticClass:"redPack"},[r("img",{staticStyle:{width:"1.867rem  /* 35/18.75 */",height:"1.867rem  /* 35/18.75 */","margin-top":"3.36rem  /* 63/18.75 */"},attrs:{src:e.avatar}}),r("v-uni-view",{staticClass:"title"},[e._v("来自"+e._s(e.title)+"的红包")]),1==e.canOpen?r("v-uni-view",{staticClass:"thanking"},[e._v(e._s(e.thanking))]):e._e(),0==e.canOpen?r("v-uni-view",{staticClass:"thanking"},[e._v(e._s(e.msg))]):e._e(),1==e.canOpen?r("v-uni-view",[r("img",{staticClass:"open-img",attrs:{src:a("3af8")},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.openRed.apply(void 0,arguments)}}})]):e._e(),0==e.canOpen?r("v-uni-view",{staticClass:"look",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.look.apply(void 0,arguments)}}},[e._v("看看大家的手气 >")]):e._e()],1),r("img",{staticClass:"corpLogo",attrs:{src:e.corpLogo}})],1):e._e()],1)},i=[]},"8bcc":function(e,t,a){var r=a("24fb"),n=a("1de5"),i=a("9c22"),o=a("dfda");t=r(!1);var s=n(i),d=n(o);t.push([e.i,".index[data-v-2e5d576c]{position:absolute;width:100%;height:100%;background:url("+s+") no-repeat;background-size:100% 100%}.redPack[data-v-2e5d576c]{position:fixed;left:50%;top:50%;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%);margin:0 auto;width:17.867rem;height:25.067rem /* 470/18.75 */;\n\t/*margin-top: 6.027rem !* 113/18.75 *!;*/background:url("+d+") no-repeat;background-size:100% 100%}.time[data-v-2e5d576c]{margin-top:2.107rem /* 39.5/18.75 */;height:2.624rem /* 49.2/18.75 */;line-height:2.624rem /* 49.2/18.75 */}.time-view[data-v-2e5d576c]{background-color:#fff;border-radius:.053rem ;font-size:.747rem ;color:#a22126;\n\t/*width: 1.173rem !* 22/18.75 *!;*/height:1.173rem /* 22/18.75 */;padding:.107rem\n}.question[data-v-2e5d576c]{font-size:.907rem ;color:#fff;margin:0 .32rem\n}.title[data-v-2e5d576c]{margin-top:.8rem ;height:.853rem ;font-size:.853rem ;font-weight:500;color:#fce3af}.thanking[data-v-2e5d576c]{margin:0 auto;padding:0 1.067rem /* 20/18.75 */;margin-top:1.227rem /* 23/18.75 */;height:1.28rem /* 24/18.75 */;width:60%;font-size:.96rem ;color:#fce3af}.open-img[data-v-2e5d576c]{margin-top:5.547rem /* 104/18.75 */;width:5.973rem /* 112/18.75 */;height:5.973rem /* 112/18.75 */}.look[data-v-2e5d576c]{margin-top:12.8rem /* 240/18.75 */;font-size:.8rem ;color:#fce3af;line-height:1.067rem /* 20/18.75 */}.corpLogo[data-v-2e5d576c]{position:fixed;bottom:1.067rem /* 20/18.75 */;left:50%;-webkit-transform:translateX(-50%);transform:translateX(-50%);height:2.133rem /* 40/18.75 */}",""]),e.exports=t},"9c22":function(e,t,a){e.exports=a.p+"static/img/redBack.16f57ff5.png"},d421:function(e,t,a){var r=a("8bcc");"string"===typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);var n=a("4f06").default;n("b1a7c9e2",r,!0,{sourceMap:!1,shadowMode:!1})},dfda:function(e,t,a){e.exports=a.p+"static/img/red.5d032602.png"},ea12:function(e,t,a){"use strict";a.r(t);var r=a("884a"),n=a("795e");for(var i in n)["default"].indexOf(i)<0&&function(e){a.d(t,e,(function(){return n[e]}))}(i);a("38e6");var o,s=a("f0c5"),d=Object(s["a"])(n["default"],r["b"],r["c"],!1,null,"2e5d576c",null,!1,r["a"],o);t["default"]=d.exports}}]);