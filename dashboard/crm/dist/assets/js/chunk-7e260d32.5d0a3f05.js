(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7e260d32"],{"0217":function(t,e,a){"use strict";var s=a("548a"),i=a.n(s);i.a},"058a":function(t,e,a){"use strict";var s=a("b27d"),i=a.n(s);i.a},"060e":function(t,e,a){e=t.exports=a("2350")(!1),e.push([t.i,".w-375[data-v-656b7b16]{width:375px}.ss-prev-box[data-v-656b7b16]{background:#f7f7f7;height:550px;overflow:auto}.ss-sz-time[data-v-656b7b16] .ant-radio-wrapper{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center}[data-v-656b7b16] .ant-modal{max-width:1100px!important}.ss-sop-pop-tip[data-v-656b7b16]{background:#fff2db}.ss-radio-btn[data-v-656b7b16] .ant-radio{display:none!important}.ss-radio-btn[data-v-656b7b16] span.ant-radio+*{padding:0!important}",""])},1044:function(t,e,a){"use strict";var s=a("e8b7"),i=a.n(s);i.a},"21b9":function(t,e,a){var s=a("7949");"string"===typeof s&&(s=[[t.i,s,""]]),s.locals&&(t.exports=s.locals);var i=a("499e").default;i("3db6eebb",s,!0,{sourceMap:!1,shadowMode:!1})},"29dc":function(t,e,a){var s=a("a8ad");"string"===typeof s&&(s=[[t.i,s,""]]),s.locals&&(t.exports=s.locals);var i=a("499e").default;i("a0e19b0e",s,!0,{sourceMap:!1,shadowMode:!1})},"2b5f":function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAAOCAYAAAAfSC3RAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyNpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTQ4IDc5LjE2NDAzNiwgMjAxOS8wOC8xMy0wMTowNjo1NyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIDIxLjAgKFdpbmRvd3MpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjZBNjQ4QkYwNzc0NjExRUI5MTJCOTE5RjkwNjg0REVBIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjZBNjQ4QkYxNzc0NjExRUI5MTJCOTE5RjkwNjg0REVBIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6NkE2NDhCRUU3NzQ2MTFFQjkxMkI5MTlGOTA2ODRERUEiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6NkE2NDhCRUY3NzQ2MTFFQjkxMkI5MTlGOTA2ODRERUEiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz72MkWDAAABKUlEQVR42pTSvUuCURTH8ee5WogJNTWHYFjQEr0sDQ1C0JCDgRH9AbU5B5ZF0BBBLwQNjQ4NQkIlRm2NBtEgBFZ/gJsVRdDQ99B54CI3sAOfBz33/rhez+NfXN161CymsOr9Vjfi8PGCL+1fooZCmMccTrGCQawjjR7d/IGKbMYarmEMjwMs64YHLFohqSjmcY8RpOQACQ6ggSIiVuAIu9b3LpygDwtGm3t6L7vqeG7rhXAod5fgECa8zmsYY+afoaDGjeMnBpVAGY+OtYgEn/4I5pDBtCPckDnKG9BEf9uir6PqxR2S2n/FjZz4rcN1lYS3sGT1tvEZjOMYZx38KefYkQ9BcFTvUsKbI/COKiZ1fF5YFzaxjw3EMKN38vWtklBLT8sj+yPAAKE6NJ6tsBtjAAAAAElFTkSuQmCC"},"2bcf":function(t,e,a){"use strict";var s=a("29dc"),i=a.n(s);i.a},"2d3a":function(t,e,a){"use strict";var s=a("8e3c"),i=a.n(s);i.a},"3b60":function(t,e,a){var s=a("060e");"string"===typeof s&&(s=[[t.i,s,""]]),s.locals&&(t.exports=s.locals);var i=a("499e").default;i("0f98070e",s,!0,{sourceMap:!1,shadowMode:!1})},4169:function(t,e,a){e=t.exports=a("2350")(!1),e.push([t.i,".ss-imgs-box[data-v-aea8d58c]{background:#efefef;-ms-flex-line-pack:center;align-content:center}.flex-w1[data-v-aea8d58c]{-webkit-box-flex:0;-ms-flex:0 0 100%;flex:0 0 100%}.flex-w2[data-v-aea8d58c],.flex-w3[data-v-aea8d58c],.flex-w4[data-v-aea8d58c]{-webkit-box-flex:0;-ms-flex:0 0 50%;flex:0 0 50%}.flex-w5[data-v-aea8d58c],.flex-w6[data-v-aea8d58c],.flex-w7[data-v-aea8d58c],.flex-w8[data-v-aea8d58c],.flex-w9[data-v-aea8d58c]{-webkit-box-flex:0;-ms-flex:0 0 33.3%;flex:0 0 33.3%}",""])},"4ac2":function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t._l(t.rulesData,(function(e,s){return a("div",{key:s,staticClass:"flex"},[t._m(0,!0),a("div",{staticClass:"ss-rules-box -mt-10 mb-10"},[a("div",{staticClass:"flex justify-between items-center"},[a("div",{staticClass:"text-15 font-bold"},[1==e.time_type?a("span",[t.is_chat?a("span",[t._v("加入内容规则后，")]):a("span",[t._v(t._s(1==t.type?"客户添加企微客服":"客户在【"+t.follow_name+"】跟进状态后"))]),a("span",{staticClass:"text-blue-501"},[t._v(t._s(e.time_one)+"小时"+t._s(e.time_two)+"分钟")]),t._v("后提醒推送\n\t\t\t\t\t")]):a("span",[t.is_chat?a("span",[t._v("加入内容规则后，")]):a("span",[t._v(t._s(1==t.type?"客户添加企微客服":"客户在【"+t.follow_name+"】跟进状态后"))]),a("span",{staticClass:"text-blue-501"},[t._v(t._s(e.time_one)+"天后"+t._s(e.time_two))]),t._v("提醒推送\n\t\t\t\t\t")])]),t.is_edit?a("div",{staticClass:"flex items-center"},[a("a-button",{staticClass:"mr-10",attrs:{type:"primary"},on:{click:function(a){return t.openShowAddRulesPop(e,s)}}},[t._v("编辑")]),a("a-button",{attrs:{type:"danger"},on:{click:function(e){return t.delRules(s)}}},[t._v("删除")])],1):a("div",{staticClass:"flex items-center"},[a("a-button",{staticClass:"mr-10",on:{click:function(a){return t.executeHandle(e,s)}}},[t._v("员工执行情况")])],1)]),t.is_edit?t._e():a("div",[a("span",[t._v("员工未完成（"+t._s(e.not_over_num)+"）")]),a("span",[t._v("员工已完成（"+t._s(e.over_num)+"）")])]),a("div",{staticClass:"ss-rules-pay-box px-15 my-20"},[a("rulesPay",{attrs:{rules:e.contentData}})],1)])])})),t.isShowAddRulesPop?a("addRulesPop",{ref:"addRulesPop",attrs:{is_chat:t.is_chat,type:t.type,follow_name:t.follow_name,rulesAdd:t.rulesAdd,index:t.rulesAdd_index,callback:t.addRulesPopCallbackBug}}):t._e()],2)},i=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"ss-rules-l flex flex-col items-center mr-20 ss-rules-l-b ml-7"},[s("img",{attrs:{src:a("2b5f"),alt:""}}),s("div",{staticClass:"h-full "})])}],r=(a("c5f6"),a("7a4a")),n=a("c0c8"),o=a("2ef0"),l=a.n(o),c={name:"rulesList",components:{addRulesPop:r["a"],rulesPay:n["a"]},props:{rulesData:{type:Array,default:function(){return[]}},type:{type:[Number,String],default:function(){return 1}},is_edit:{type:Boolean,default:function(){return!0}},follow_name:{type:String,default:function(){return""}},is_chat:{type:[String,Number],default:function(){return 0}}},data:function(){return{commonUrl:this.$store.state.commonUrl,isShowAddRulesPop:!1,rulesAdd:{},rulesAdd_index:-1}},methods:{executeHandle:function(t,e){this.$emit("executeHandle",t)},addRulesPopCallbackBug:function(t,e,a){this.isShowAddRulesPop=!1,"ok"==t&&this.$emit("updateTimeData",e,a)},openShowAddRulesPop:function(t,e){var a=this;this.rulesAdd=l.a.cloneDeep(t),this.rulesAdd_index=e,this.isShowAddRulesPop=!0,this.$nextTick((function(){a.$refs.addRulesPop.visible=!0}))},delRules:function(t){var e=this;this.$confirm({title:"确定删除吗？",content:"",okText:"确认",cancelText:"取消",onOk:function(){e.rulesData.splice(t,1)}})}}},p=c,u=(a("058a"),a("2877")),d=Object(u["a"])(p,s,i,!1,null,"d82b12fc",null);e["a"]=d.exports},"4bef":function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAQAAADZc7J/AAABAElEQVR42s3VIY7CUBAG4LkEliC4xKJ6BA6AognXQBLCAVBYNBK3pim7zP8XBAJHSLhAZVURi+jC2+681xD4R89nZiYjIhojQRlQicYiolFQ8600EqZNAKbSpB0lyqcCBeYccIA5ihDgtO3JLdseTr7Ap9wFRx+g2HTuge8PH+AsjuBiBzZO4MsOHJzAwQ7kTiD3mcLsoX3muQcaV9s1DtnENUfssssR1i+6hRcD3GPFBaeccoEV9z7AUodoP4yxrUMs/wd26EtN0MeuBuBYDOH4LyDPWhYga1WXugpMxBhMnIBGVqD6S34B9nqvTUwaAUnNpZue689/DnuwTDUSuQJ1pL7YQ6lKkQAAAABJRU5ErkJggg=="},"4ce5":function(t,e,a){var s=a("5fb7");"string"===typeof s&&(s=[[t.i,s,""]]),s.locals&&(t.exports=s.locals);var i=a("499e").default;i("330172c0",s,!0,{sourceMap:!1,shadowMode:!1})},"548a":function(t,e,a){var s=a("8171");"string"===typeof s&&(s=[[t.i,s,""]]),s.locals&&(t.exports=s.locals);var i=a("499e").default;i("5e6b7492",s,!0,{sourceMap:!1,shadowMode:!1})},"57de":function(t,e,a){"use strict";var s=a("7d14"),i=a.n(s);i.a},"5fb7":function(t,e,a){e=t.exports=a("2350")(!1),e.push([t.i,"[data-v-7ef8cc2e] .ant-drawer-content-wrapper{width:820px!important}[data-v-7ef8cc2e] .ant-drawer-wrapper-body{height:calc(100vh - 64px)}",""])},"60fa":function(t,e,a){var s=a("ba97");"string"===typeof s&&(s=[[t.i,s,""]]),s.locals&&(t.exports=s.locals);var i=a("499e").default;i("3ffc277e",s,!0,{sourceMap:!1,shadowMode:!1})},7949:function(t,e,a){e=t.exports=a("2350")(!1),e.push([t.i,".ss-chat-text[data-v-b9b621ca]{max-width:160px}.ss-chat-body[data-v-b9b621ca]{background:#fafafa;border:1px solid #e6e6e6;width:-webkit-fit-content;width:-moz-fit-content;width:fit-content}",""])},"7a4a":function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("a-modal",{attrs:{title:"添加内容规则",width:1100,visible:!0},on:{ok:t.handleOk,cancel:t.handleCancel}},[s("div",{staticClass:" relative clearfix"},[s("div",{staticClass:"sticky top-0 z-3 w-375 float-left "},[s("img",{staticClass:"w-full block",attrs:{src:a("eb7e")}}),s("div",{staticClass:"ss-prev-box px-20"},[s("rulesPay",{attrs:{rules:t.rulesAddClone.contentData,"is-add":1}})],1)]),s("div",{staticStyle:{width:"640px","margin-left":"400px"}},[s("div",{staticClass:"text-14 font-bold text-gray-900 relative b-line py-10"},[t._v("设置提醒时间")]),s("div",{staticClass:"py-20"},[s("a-radio-group",{staticClass:"ss-sz-time",attrs:{name:"radioGroup",value:t.rulesAddClone.time_type},on:{change:t.radioChange}},[1==t.is_chat?s("a-radio",{attrs:{value:1}},[s("div",{staticClass:"flex items-center py-5"},[t.is_chat?s("span",[s("span",{staticClass:"text-14 text-gray-900"},[t._v("加入内容规则后，")])]):s("span",[1==t.type?s("span",{staticClass:"text-14 text-gray-900"},[t._v("客户添加企微客服后")]):s("span",{staticClass:"text-14 text-gray-900"},[t._v("当客户在 "),s("span",{staticClass:"text-blue-501"},[t._v("【"+t._s(t.follow_name)+"】")]),t._v("跟进状态后")])]),s("a-input-number",{staticClass:"w-80 mx-10",attrs:{min:0,max:23,disabled:2==t.rulesAddClone.time_type,value:1==t.rulesAddClone.time_type?t.rulesAddClone.time_one:1},on:{change:function(e){return t.onChangeValue(e,"time_one")}}}),s("span",{staticClass:"text-14 text-gray-900"},[t._v("小时")]),s("a-input-number",{staticClass:"w-80 mx-10",attrs:{min:0,max:59,disabled:2==t.rulesAddClone.time_type,value:1==t.rulesAddClone.time_type?t.rulesAddClone.time_two:0},on:{change:function(e){return t.onChangeValue(e,"time_two")}}}),s("span",{staticClass:"text-14 text-gray-900"},[t._v("分钟后提醒推送")])],1)]):t._e(),s("a-radio",{class:{"ss-radio-btn":0==t.is_chat},attrs:{value:2}},[s("div",{staticClass:"flex items-center py-5"},[t.is_chat?s("span",[s("span",{staticClass:"text-14 text-gray-900"},[t._v("加入内容规则后，")])]):s("span",[1==t.type?s("span",{staticClass:"text-14 text-gray-900"},[t._v("客户添加企微客服后")]):s("span",{staticClass:"text-14 text-gray-900"},[t._v("当客户在 "),s("span",{staticClass:"text-blue-501"},[t._v("【"+t._s(t.follow_name)+"】")]),t._v("跟进状态后")])]),s("a-input-number",{staticClass:"w-80 mx-10",attrs:{min:1,disabled:1==t.rulesAddClone.time_type,value:2==t.rulesAddClone.time_type?t.rulesAddClone.time_one:1},on:{change:function(e){return t.onChangeValue(e,"time_one")}}}),s("span",{staticClass:"text-14 text-gray-900"},[t._v("天后，当日")]),s("a-time-picker",{staticClass:"mx-10",attrs:{inputReadOnly:!0,disabled:1==t.rulesAddClone.time_type,"default-value":t.moment(2==t.rulesAddClone.time_type?t.rulesAddClone.time_two:"00:00","HH:mm"),format:"HH:mm"},on:{change:t.onChangeTimePicker}}),s("span",{staticClass:"text-14 text-gray-900"},[t._v("提醒推送")])],1)])],1)],1),s("div",{staticClass:"text-14 font-bold text-gray-900 relative b-line py-10"},[t._v("推送内容")]),s("div",[t._l(t.rulesAddClone.contentData,(function(e,a){return s("div",{key:a,staticClass:"flex mb-10"},[s("div",{staticClass:"py-15 w-60"},[t._v("消息"+t._s(a+1)+"：")]),s("div",{staticClass:"w-full"},[s("div",{staticClass:"pt-5"},[s("publishContent",{attrs:{"is-one-img":1,"is-sop":1,title:"",detailData:e,callback:t.contentReply,index:a}},[1!==t.rulesAddClone.contentData.length?s("a-button",{attrs:{size:"small",type:"danger"},on:{click:function(e){return t.delMsg(a)}}},[t._v("\n\t\t\t\t\t\t\t\t\t\t删除\n\t\t\t\t\t\t\t\t\t")]):t._e()],1)],1)])])})),s("div",{staticClass:"py-20 ml-60"},[s("a-button",{attrs:{type:"primary"},on:{click:t.addMsg}},[t._v("添加消息")])],1)],2)])])])],1)},i=[],r=(a("96cf"),a("3b8d")),n=(a("a481"),a("c5f6"),function(){var t=this,e=this,s=e.$createElement,i=e._self._c||s;return i("div",{staticClass:"content"},[e.title?i("div",{staticClass:"title"},[e._v(e._s(e.title))]):e._e(),e.title?i("a-divider"):e._e(),i("a-form-model",[i("a-form-model-item",{attrs:{label:"内容类型","label-col":{span:3},align:"left","wrapper-col":{span:21}}},[i("div",{staticClass:"clearfix"},[i("a-radio-group",{on:{change:e.changeType},model:{value:e.publishForm.file_type,callback:function(t){e.$set(e.publishForm,"file_type",t)},expression:"publishForm.file_type"}},[i("a-radio",{attrs:{value:1}},[e._v("\n\t\t\t\t\t\t\t图片/文字\n\t\t\t\t\t\t")]),i("a-radio",{attrs:{value:3}},[e._v("\n\t\t\t\t\t\t\t视频\n\t\t\t\t\t\t")]),i("a-radio",{attrs:{value:4}},[e._v("\n\t\t\t\t\t\t\t图文链接\n\t\t\t\t\t\t")])],1),i("div",{staticClass:"float-right"},[e._t("default")],2)],1)]),i("div",{staticClass:"px-20 pt-20",staticStyle:{background:"#F1F3F5"}},[i("div",[i("a-textarea",{attrs:{maxLength:500,placeholder:"请输入内容",autoSize:{minRows:9,maxRows:9}},on:{change:function(){t.callback("ok",t.publishForm,t.index)}},model:{value:e.publishForm.context,callback:function(t){e.$set(e.publishForm,"context",t)},expression:"publishForm.context"}}),i("div",{staticStyle:{float:"right","line-height":"20px"}},[e._v("\n\t\t\t\t\t\t"+e._s(e.publishForm.context&&e.publishForm.context.length||0)+"/500\n\t\t\t\t\t")])],1)]),3==e.publishForm.file_type||4==e.publishForm.file_type?i("a-form-model-item",{attrs:{label:"添加方式","label-col":{span:3},"wrapper-col":{span:18}}},[i("a-radio-group",{staticStyle:{"line-height":"40px"},on:{change:e.addTypeChange},model:{value:e.publishForm.add_type,callback:function(t){e.$set(e.publishForm,"add_type",t)},expression:"publishForm.add_type"}},[i("a-radio",{attrs:{value:0}},[e._v("\n\t\t\t\t\t\t自定义设定\n\t\t\t\t\t")]),i("a-radio",{attrs:{value:1}},[e._v("\n\t\t\t\t\t\t从素材库导入\n\t\t\t\t\t")])],1)],1):e._e(),i("div",{staticClass:"content_container"},[1==e.publishForm.file_type?i("div",[i("a-spin",{attrs:{tip:"Loading...",size:"large",spinning:e.uploadLoading}}),e.uploadLoading?e._e():i("a-upload",{staticClass:"pic",staticStyle:{width:"95%"},attrs:{action:"https://www.mocky.io/v2/5cc8019d300000980a055e76",multiple:!e.isOneImg,"list-type":"picture-card","file-list":e.publishForm.uploadImg,beforeUpload:e.beforeUploadPic,disabled:e.uploadLoading},on:{preview:e.handlePreview,change:e.handleChange}},[e.is_show_upimg_btn?i("div",{staticClass:"local"},[i("a-icon",{attrs:{type:"plus"}}),i("div",[e._v("本地上传")])],1):e._e(),e.is_show_upimg_btn?i("div",{staticClass:"material_image",on:{click:function(t){return t.stopPropagation(),t.preventDefault(),e.selectMaterial(t)}}},[i("a-icon",{staticStyle:{"font-size":"16px",position:"absolute",transform:"translate(-50%,-50%)"},attrs:{type:"plus"}}),i("div",{staticStyle:{"margin-top":"1.3rem"}},[e._v("素材库导入")])],1):e._e()])],1):e._e(),i("a-modal",{attrs:{visible:e.previewVisible,footer:null},on:{cancel:e.handleCancel}},[i("img",{staticStyle:{width:"100%"},attrs:{alt:"example",src:e.previewImage}})]),3==e.publishForm.file_type?i("div",[i("a-spin",{attrs:{tip:"Loading...",size:"large",spinning:e.uploadLoading}}),0==e.publishForm.add_type&&e.publicOptions.sources.length<=0&&!e.uploadLoading?i("a-upload",{staticStyle:{height:"100%"},attrs:{action:"https://www.mocky.io/v2/5cc8019d300000980a055e76",multiple:!1,fileList:[],beforeUpload:e.beforeUploadVideo}},[i("a-button",{staticStyle:{width:"101.82px",height:"101.82px",background:"#FAFAFA",position:"relative",border:"1px dashed #D9D9D9"}},[i("a-icon",{attrs:{type:"plus"}}),i("div",{staticClass:"selectPhoto"},[e._v("选择视频")])],1)],1):e._e(),1==e.publishForm.add_type&&e.publicOptions.sources.length<=0?i("div",{staticClass:"material_video",on:{click:e.selectMaterial}},[i("a-icon",{staticStyle:{"font-size":"16px",position:"absolute",transform:"translate(-50%,-50%)"},attrs:{type:"plus"}}),i("div",{staticStyle:{"margin-top":"0.75rem"}},[e._v("素材库导入")])],1):e._e()],1):e._e(),3==e.publishForm.file_type&&e.publicOptions.sources.length>0?i("div",{staticClass:"video-show",staticStyle:{position:"relative"}},[i("video-player",{ref:"videoPlayer",staticClass:"video-player vjs-custom-skin",staticStyle:{width:"100%"},attrs:{playsinline:!0,options:e.publicOptions}}),i("img",{staticStyle:{"z-index":"9999",cursor:"pointer",top:"0rem",right:"0",height:"1rem",width:"1rem",position:"absolute"},attrs:{src:a("8add"),alt:""},on:{click:e.deleteVideo}})],1):e._e(),4!=e.publishForm.file_type||1!=e.publishForm.add_type||e.publishForm.materialText.link?e._e():i("div",{staticClass:"before_choose",on:{click:e.selectMaterial}},[i("span",[i("a-icon",{staticStyle:{"margin-left":"6px"},attrs:{type:"plus"}}),e._v("素材库导入")],1)]),4==e.publishForm.file_type&&1==e.publishForm.add_type&&e.publishForm.materialText.link?i("div",{staticClass:"before_choose",on:{click:e.selectMaterial}},[i("img",{staticStyle:{width:"1.5rem","margin-bottom":"0.2rem"},attrs:{src:a("088b"),alt:""}}),e._v("\n\t\t\t\t\t已选择1条图文消息\n\t\t\t\t\t"),i("p",{staticClass:"editMessage",staticStyle:{"margin-top":"-5.993rem"}},[e._v("[修改]")])]):e._e(),4==e.publishForm.file_type&&0==e.publishForm.add_type?i("div",{},[i("a-form-model-item",{attrs:{label:"图文链接","label-col":{span:3},"wrapper-col":{span:18}}},[i("span",{attrs:{slot:"label"},slot:"label"},[i("span",{staticStyle:{color:"red"}},[e._v("*")]),e._v("图文链接\n\t\t\t\t\t")]),i("a-input",{attrs:{placeholder:"请输入图文链接,链接地址以http或https开头","allow-clear":""},on:{blur:e.inputChange,keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.inputChange(t)}},model:{value:e.publishForm.uploadText.link,callback:function(t){e.$set(e.publishForm.uploadText,"link","string"===typeof t?t.trim():t)},expression:"publishForm.uploadText.link"}}),e.showTextContent&&!e.$test.empty(e.publishForm.uploadText.link)?i("div",{staticClass:"content_input"},[i("div",{staticStyle:{"flex-grow":"1",height:"100px"}},[i("div",{staticClass:"input_text1"},[e._v(e._s(e.publishForm.uploadText.title)+"\n\t\t\t\t\t\t\t\t")]),i("div",{staticClass:"input_text2"},[e._v("\n\t\t\t\t\t\t\t\t\t"+e._s(e.publishForm.uploadText.description)+"\n\t\t\t\t\t\t\t\t")])]),i("div",{staticStyle:{width:"100px",height:"100px",padding:"10px"}},[e.publishForm.uploadText.url?i("img",{staticClass:"input_img",attrs:{src:e.commonUrl+e.publishForm.uploadText.url,alt:""}}):e._e(),""==e.publishForm.uploadText.url?i("img",{staticClass:"input_img",attrs:{src:a("b11d"),alt:""}}):e._e()])]):e._e()],1),e.publishForm.uploadText.link?i("a-form-model-item",{attrs:{label:"高级设置","label-col":{span:3},"wrapper-col":{span:18}}},[i("a-switch",{model:{value:e.publishForm.isAdvance,callback:function(t){e.$set(e.publishForm,"isAdvance",t)},expression:"publishForm.isAdvance"}})],1):e._e(),e.publishForm.isAdvance&&e.publishForm.uploadText.link?i("div",[i("a-form-model-item",{attrs:{label:"链接标题","label-col":{span:3},"wrapper-col":{span:18}}},[i("a-input",{attrs:{placeholder:"链接标题",maxLength:40,"allow-clear":""},on:{blur:e.inputCallback},model:{value:e.publishForm.uploadText.title,callback:function(t){e.$set(e.publishForm.uploadText,"title",t)},expression:"publishForm.uploadText.title"}})],1),i("a-form-model-item",{attrs:{label:"链接摘要",maxLength:"255","label-col":{span:3},"wrapper-col":{span:18}}},[i("a-input",{attrs:{placeholder:"链接摘要","allow-clear":""},on:{blur:e.inputCallback},model:{value:e.publishForm.uploadText.description,callback:function(t){e.$set(e.publishForm.uploadText,"description",t)},expression:"publishForm.uploadText.description"}})],1),i("a-form-model-item",{attrs:{label:"链接封面","label-col":{span:3},"wrapper-col":{span:18}}},[i("div",{staticStyle:{position:"relative"}},[e.$test.empty(e.publishForm.uploadText.url)?i("img",{staticStyle:{width:"100px",height:"100px",border:"1px solid #F1F3F5","vertical-align":"bottom"},attrs:{src:a("b11d")}}):i("img",{staticStyle:{width:"100px",height:"100px",border:"1px solid #F1F3F5","vertical-align":"bottom"},attrs:{src:e.commonUrl+e.publishForm.uploadText.url}}),i("a-upload",{staticClass:"link_cover",staticStyle:{border:"none","background-color":"#F1F3F5"},attrs:{action:"https://www.mocky.io/v2/5cc8019d300000980a055e76",multiple:!1,showUploadList:!1,"list-type":"picture-card","before-upload":e.beforeUpload}},[i("span",{staticStyle:{"font-size":"12px",color:"rgb(37, 150, 255)","margin-left":"10px",cursor:"pointer",position:"absolute",width:"50px"}},[e._v("重新选择")])])],1)])],1):e._e()],1):e._e()],1),0==e.publishForm.add_type&&0==e.isSop?i("a-form-model-item",{attrs:{label:"素材同步","label-col":{span:3},"wrapper-col":{span:20}}},[i("a-radio-group",{staticStyle:{"line-height":"40px"},model:{value:e.publishForm.material_sync,callback:function(t){e.$set(e.publishForm,"material_sync",t)},expression:"publishForm.material_sync"}},[i("a-radio",{attrs:{value:0}},[e._v("\n\t\t\t\t\t\t不同步\n\t\t\t\t\t")]),i("a-radio",{attrs:{value:1}},[e._v("\n\t\t\t\t\t\t同步至【内容引擎】\n\t\t\t\t\t")]),i("span",{directives:[{name:"show",rawName:"v-show",value:1==e.publishForm.material_sync,expression:"publishForm.material_sync==1"}]},[e._v("\n                                选择分组：\n                                "),i("a-tree-select",{staticStyle:{width:"225px"},attrs:{dropdownStyle:{maxHeight:"150px",overflow:"auto"},treeData:e.groupList,placeholder:"请选择分组",treeDefaultExpandAll:""},model:{value:e.publishForm.group_id,callback:function(t){e.$set(e.publishForm,"group_id",t)},expression:"publishForm.group_id"}})],1)],1)],1):e._e()],1),i("chooseMsg",{attrs:{show:e.showMaterialModel,type:e.materialType,callback:e.materialReply,news_type:1,chooseId:e.publishForm.chooseId}})],1)}),o=[],l=(a("8e6e"),a("456d"),a("bd86")),c=(a("b54a"),a("ac4d"),a("8a81"),a("ac6a"),a("20d6"),a("7f7f"),a("bc3a")),p=a.n(c),u=a("d6d3"),d=a("2afe"),h=a("8237"),m=a.n(h),f=a("2ef0"),_=a.n(f);function v(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,s)}return a}function g(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?v(a,!0).forEach((function(e){Object(l["a"])(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):v(a).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var b=p.a.CancelToken,x=b.source(),y={name:"publishContent",components:{videoPlayer:u["videoPlayer"],chooseMsg:d["a"]},props:{title:{type:String,default:"编辑内容"},callback:{type:Function,default:null},detailData:{type:Object,default:function(){}},index:{type:Number,default:0},isOneImg:{type:Number,default:function(){return 0}},isSop:{type:Number,default:function(){return 0}}},watch:{"publishForm.isAdvance":function(t){!t&&this.uploadTextSync&&(this.publishForm.uploadText=_.a.cloneDeep(this.uploadTextSync),this.callback("ok",this.publishForm,this.index))},"publishForm.uploadText.link":function(t){var e=this;t||this.$nextTick((function(){e.showTextContent=!1,e.publishForm.uploadText={},e.uploadTextSync={},e.callback("ok",e.publishForm,e.index)}))}},computed:{is_show_upimg_btn:function(){return 1==this.isOneImg?this.publishForm.uploadImg.length<1:this.publishForm.uploadImg.length<9}},data:function(){return{is_exchage:!1,uploadLoading:!1,publishForm:{isAdvance:!1,file_type:1,material_sync:0,add_type:0,uploadImg:[],uploadText:{},materialText:{},corp_id:localStorage.getItem("corpId")?localStorage.getItem("corpId"):""},commonUrl:this.$store.state.commonUrl,showTextContent:!1,groupList:[],previewVisible:!1,previewImage:"",publicOptions:{sources:[],playbackRates:[.7,1,1.5,2],autoplay:!1,muted:!1,loop:!1,preload:"auto",language:"zh-CN",aspectRatio:"16:9",fluid:!0,notSupportedMessage:"此视频暂无法播放，请稍后再试",controlBar:{timeDivider:!0,durationDisplay:!0,remainingTimeDisplay:!1,fullscreenToggle:!0}},showMaterialModel:!1,materialType:2,showImgModel:!1,uploadTextSync:""}},mounted:function(){if(this.getGroupList(),this.detailData&&this.detailData.file_type)switch(this.publishForm=this.detailData,3==this.publishForm.file_type&&(this.publicOptions.sources=[],0==this.publishForm.add_type&&this.publishForm.uploadVideo&&this.publishForm.uploadVideo.local_path?(this.publicOptions.sources=[{src:this.commonUrl+this.publishForm.uploadVideo.local_path,type:"video/mp4"}],this.publishForm.materialVideo={}):1==this.publishForm.add_type&&this.publishForm.materialVideo&&this.publishForm.materialVideo.local_path&&(this.publicOptions.sources=[{src:this.commonUrl+this.publishForm.materialVideo.local_path,type:"video/mp4"}],this.publishForm.uploadVideo={})),4==this.publishForm.file_type&&(0==this.publishForm.add_type?(this.publishForm.materialText={},this.showTextContent=!0):1==this.publishForm.add_type&&(this.publishForm.uploadText={}),this.uploadTextSync=_.a.cloneDeep(this.publishForm.uploadText)),this.publishForm.file_type){case 1:this.materialType=2,this.publishForm.add_type=0;break;case 3:this.materialType=4;break;case 4:this.materialType=1;break}},methods:{addTypeChange:function(){3==this.publishForm.file_type&&(this.publicOptions.sources=[],0==this.publishForm.add_type&&this.publishForm.uploadVideo&&this.publishForm.uploadVideo.local_path?this.publicOptions.sources=[{src:this.commonUrl+this.publishForm.uploadVideo.local_path,type:"video/mp4"}]:1==this.publishForm.add_type&&this.publishForm.materialVideo&&this.publishForm.materialVideo.local_path&&(this.publicOptions.sources=[{src:this.commonUrl+this.publishForm.materialVideo.local_path,type:"video/mp4"}])),this.callback("ok",this.publishForm,this.index)},changeType:function(){switch(this.publishForm.file_type){case 1:this.materialType=2,this.publishForm.add_type=0;break;case 3:this.materialType=4;break;case 4:this.materialType=1;break}this.callback("ok",this.publishForm,this.index)},selectMaterial:function(){this.showMaterialModel=!0},upSopImgReply:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(e){var a,s,i,r,n,o,l,c;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.uploadLoading=!0,t.next=3,this.axios.post("work-material/upload-media",{corp_id:localStorage.getItem("corpId"),attachment_id:e,type:4==this.publishForm.file_type?4:""});case 3:a=t.sent,s=a.data,this.uploadLoading=!1,0!=s.error?this.$message.error(s.error_msg):(s.data&&(i=s.data,1==this.publishForm.file_type?(i.url=i.s_local_path?this.commonUrl+i.s_local_path:this.commonUrl+i.local_path,i.uid=this.publishForm.uploadImg.length+1,r=i.id,n=i.uid,o=i.file_name,l=i.local_path,c=i.url,this.publishForm.uploadImg.push({id:r,uid:n,name:o,local_path:l,url:c})):3==this.publishForm.file_type&&(this.publicOptions.sources=[{src:this.commonUrl+i.local_path,type:"video/mp4"}],this.publishForm.uploadVideo=i)),this.callback("ok",this.publishForm,this.index));case 7:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),inputCallback:function(){this.isSop&&this.callback("ok",this.publishForm,this.index)},materialReply:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(e,a,s){var i,r,n,o,l,c,p,u,d,h,m,f,_;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if("ok"!=e){t.next=31;break}if(this.uploadLoading=!0,!isNaN(s)&&""!=s){t.next=6;break}this.$message.error("请选择素材"),t.next=29;break;case 6:if(!s){t.next=29;break}return s=parseInt(s),t.next=10,this.axios.post("work-material/upload-media",{corp_id:localStorage.getItem("corpId"),attachment_id:s,type:4==this.publishForm.file_type?4:""});case 10:if(i=t.sent,r=i.data,this.uploadLoading=!1,0==r.error){t.next=17;break}this.$message.error(r.error_msg),t.next=29;break;case 17:if(!r.data){t.next=29;break}if(n=r.data,1!=this.publishForm.file_type){t.next=28;break}if(!(this.publishForm.uploadImg.length>8)){t.next=22;break}return t.abrupt("return",this.$message.warning("少于9张"));case 22:n.url=n.s_local_path?this.commonUrl+n.s_local_path:this.commonUrl+n.local_path,n.uid=this.publishForm.uploadImg.length+1,o=n.id,l=n.uid,c=n.file_name,p=n.local_path,u=n.url,this.publishForm.uploadImg.push({id:o,uid:l,name:c,local_path:p,url:u}),t.next=29;break;case 28:3==this.publishForm.file_type?(this.publicOptions.sources=[{src:this.commonUrl+n.local_path,type:"video/mp4"}],this.publishForm.materialVideo=n):4==this.publishForm.file_type&&(d=n.artList[0],h=d.content_source_url,m=d.qy_local_path,f=d.title,_=d.digest,this.publishForm.materialText={link:h,url:m,title:f,description:_},this.publishForm.materialText.id=n.id);case 29:t.next=31;break;case 31:this.showMaterialModel=!1,this.callback("ok",this.publishForm,this.index);case 33:case"end":return t.stop()}}),t,this)})));function e(e,a,s){return t.apply(this,arguments)}return e}(),beforeUploadPic:function(t,e){if("image/jpg"!=t.type&&"image/jpeg"!=t.type&&"image/png"!=t.type)return this.$message.error("图片类型仅支持jpg、jpeg和png类型！"),!1;if(e.length+this.publishForm.uploadImg.length>9)return t.uid==e[0].uid&&(this.$message.destroy(),this.$message.error("上传图片超过九张！")),!1;var a=t.size/1024/1024<2;if(!a)return this.$message.error("图片不超过2M！"),!1;if(t.size<5)return this.$message.error("上传文件大小不符！"),!1;var s=this;this.getFileContent(t,(function(e){s.isSop?s.uploadSop(t):s.upLoadPhoto(t,m()(e))}))},uploadSop:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(e){var a,s,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=new FormData,a.append("uid",localStorage.getItem("uid")),a.append("isMasterAccount",localStorage.getItem("isMasterAccount")),a.append("sub_id",localStorage.getItem("sub_id")),a.append("file_type",this.publishForm.file_type),a.append("fileInfo",e),a.append("is_sync",0),a.append("group_id",this.publishForm.group_id||""),this.uploadLoading=!0,t.next=11,this.axios.post("attachment/add",a,{cancelToken:x.token});case 11:s=t.sent,i=s.data,this.uploadLoading=!1,0==i.error?this.upSopImgReply(i.data.attachment_id):this.$message.error(i.error_msg);case 15:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),upLoadPhoto:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(e,a){var s,i,r,n,o,l,c,p,u,d,h,m,f,_,v,g,b,x,y,w;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return s=new FormData,i=new FormData,s.append("type",e.type),s.append("corp_id",this.publishForm.corp_id),s.append("md5",a),i=s,t.next=8,this.axios.post("moment/moments-upload",s);case 8:if(r=t.sent,n=r.data,0==n.error){t.next=14;break}this.$message.error(n.error_msg),t.next=32;break;case 14:if(""==n.data.local_path){t.next=22;break}n.data.uid=this.publishForm.uploadImg.length+1,n.data.url=this.commonUrl+n.data.local_path,n.data.name=n.data.md5,o=n.data,l=o.url,c=o.md5,p=o.uid,u=o.s_local_path,d=o.local_path,h=o.name,this.publishForm.uploadImg.push({url:l,s_local_path:u,md5:c,uid:p,name:h,local_path:d}),t.next=32;break;case 22:return i.append("fileInfo",e),t.next=25,this.axios.post("moment/moments-upload",i);case 25:m=t.sent,f=m.data,f.data.uid=this.publishForm.uploadImg.length+1,f.data.url=this.commonUrl+f.data.local_path,f.data.name=f.data.md5,_=f.data,v=_.url,g=_.md5,b=_.uid,x=_.s_local_path,y=_.local_path,w=_.name,this.publishForm.uploadImg.push({url:v,s_local_path:x,md5:g,uid:b,name:w,local_path:y});case 32:this.callback("ok",this.publishForm,this.index);case 33:case"end":return t.stop()}}),t,this)})));function e(e,a){return t.apply(this,arguments)}return e}(),getFileContent:function(t,e){if(t&&t.size>0&&window.FileReader){var a=new FileReader;a.onloadend=function(t){t.target.readyState==FileReader.DONE&&e(t.target.result)},a.readAsText(t,"utf-8")}},handlePreview:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.url||e.preview){t.next=4;break}return t.next=3,getBase64(e.originFileObj);case 3:e.preview=t.sent;case 4:this.previewImage=e.url||e.preview,this.previewVisible=!0;case 6:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),handleCancel:function(){this.previewVisible=!1},handleChange:function(t){var e=t.file.size/1024/1024<2,a=!0,s=!1,i=void 0;try{for(var r,n=t.fileList[Symbol.iterator]();!(a=(r=n.next()).done);a=!0){var o=r.value;"error"==o.status&&(o.status="done")}}catch(l){s=!0,i=l}finally{try{a||null==n.return||n.return()}finally{if(s)throw i}}return"removed"==t.file.status&&(this.publishForm.uploadImg.splice(this.publishForm.uploadImg.findIndex((function(e){return e.uid==t.file.uid})),1),1==this.isOneImg&&this.callback("ok",this.publishForm,this.index)),e},beforeUploadVideo:function(t){this.uploadLoading=!0,this.showUploadvideo=!0,this.showMaterialvideo=!1;var e=this;if("video/mp4"!=t.type)return this.uploadLoading=!1,e.$message.error("视频类型仅支持mp4类型！"),!1;var a=t.size/1024/1024<=50;return a?t.size<=5?(this.uploadLoading=!1,e.$message.error("上传的文件大小需大于5字节！"),!1):void e.getFileContent(t,(function(a){e.isSop?e.uploadSop(t):e.selfUploadVideo(t,m()(a))})):(this.uploadLoading=!1,e.$message.error("视频不超过50M！"),!1)},selfUploadVideo:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(e,a){var s,i,r,n,o,l;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return s=new FormData,s.append("type",e.type),s.append("corp_id",this.publishForm.corp_id),s.append("md5",a),i=new FormData,i=s,t.next=8,this.axios.post("moment/moments-upload",s);case 8:if(r=t.sent,n=r.data,""==n.data.local_path){t.next=16;break}this.uploadLoading=!1,this.publicOptions.sources=[{src:this.commonUrl+n.data.local_path,type:"video/mp4"}],this.publishForm.uploadVideo=n.data,t.next=23;break;case 16:if(""!=n.data.local_path){t.next=23;break}return i.append("fileInfo",e),t.next=20,this.axios.post("moment/moments-upload",i);case 20:o=t.sent,l=o.data,""!=l.data.local_path&&(this.uploadLoading=!1,this.publicOptions.sources=[{src:this.commonUrl+l.data.local_path,type:"video/mp4"}],this.publishForm.uploadVideo=l.data);case 23:this.callback("ok",this.publishForm,this.index);case 24:case"end":return t.stop()}}),t,this)})));function e(e,a){return t.apply(this,arguments)}return e}(),deleteVideo:function(){this.publicOptions.sources=[],0==this.publishForm.add_type?this.publishForm.uploadVideo=null:1==this.publishForm.add_type&&(this.publishForm.materialVideo=null),this.callback("ok",this.publishForm,this.index)},inputChange:function(){this.$test.empty(this.publishForm.uploadText.link)||this.getTextInfo()},getTextInfo:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(){var e,a,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return console.log(this.publishForm.uploadText.link,444),t.next=3,this.axios.post("moment/moments-images-text",{corp_id:this.publishForm.corp_id,url:this.publishForm.uploadText.link});case 3:if(e=t.sent,a=e.data,!this.$test.empty(this.publishForm.uploadText.link)){t.next=7;break}return t.abrupt("return");case 7:0!=a.error?(this.showTextContent=!1,this.publishForm.uploadText={},this.uploadTextSync={},this.$message.error(a.error_msg)):(this.showTextContent=!0,s=this.publishForm.uploadText.link,this.publishForm.uploadText=g({},a.data,{link:s}),this.uploadTextSync=g({link:s},a.data)),this.callback("ok",this.publishForm,this.index);case 9:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),beforeUpload:function(t){var e=this;if("image/jpg"!=t.type&&"image/jpeg"!=t.type&&"image/png"!=t.type)return this.$message.error("图片类型仅支持jpg、jpeg和png类型！"),!1;var a=t.size/1024/1024<2;return a?t.size<5?(this.$message.error("上传文件大小不符！"),this.desImgLoading=!1,!1):void this.getFileContent(t,(function(a){e.uploadCover(t,m()(a))})):(this.$message.error("图片不超过2M！"),this.desImgLoading=!1,!1)},uploadCover:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(e,a){var s,i,r,n,o,l;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return s=new FormData,i=new FormData,s.append("type",e.type),s.append("corp_id",this.publishForm.corp_id),s.append("md5",a),i=s,t.next=8,this.axios.post("moment/moments-upload",s);case 8:if(r=t.sent,n=r.data,0==n.error){t.next=14;break}this.$message.error(n.error_msg),t.next=24;break;case 14:if(""==n.data.local_path){t.next=18;break}this.publishForm.uploadText.url=n.data.s_local_path?n.data.s_local_path:n.data.local_path,t.next=24;break;case 18:return i.append("fileInfo",e),t.next=21,this.axios.post("moment/moments-upload",i);case 21:o=t.sent,l=o.data,""!=l.data.local_path&&(this.publishForm.uploadText.url=l.data.s_local_path?l.data.s_local_path:l.data.local_path);case 24:this.callback("ok",this.publishForm,this.index);case 25:case"end":return t.stop()}}),t,this)})));function e(e,a){return t.apply(this,arguments)}return e}(),getGroupList:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(){var e,a,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e={uid:localStorage.getItem("uid"),is_channel:1},t.next=3,this.axios.post("attachment/group",e);case 3:a=t.sent,s=a.data,0!=s.error?this.$message.error(s.error_msg):this.groupList=JSON.parse(JSON.stringify(s.data.group));case 6:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()}},w=y,k=(a("bab6"),a("2877")),C=Object(k["a"])(w,n,o,!1,null,"66c42a49",null),S=C.exports,A=a("c0c8"),D=a("c1df"),F=a.n(D),O={name:"addRulesPop",components:{publishContent:S,rulesPay:A["a"]},props:{rulesAdd:{type:Object,default:function(){return{time_type:1,time_one:"1",time_two:"0",contentData:[{}]}}},callback:{type:Function,default:null},index:{type:Number,default:-1},type:{type:[Number,String],default:function(){return 1}},follow_name:{type:[Number,String],default:function(){return""}},is_chat:{type:[String,Number],default:function(){return 0}}},computed:{contentData:function(){return this.rulesAddClone.contentData}},data:function(){return{rulesAddClone:{},isShowAddRulesPopf:!0}},watch:{index:{handler:function(t){this.rulesAddClone=this.rulesAdd},immediate:!0}},methods:{radioChange:function(t){var e=t.target.value;this.rulesAddClone.time_type=e,this.rulesAddClone.time_one="1",this.rulesAddClone.time_two=1==e?"0":"00:00"},moment:F.a,onChangeTimePicker:function(t,e){this.rulesAddClone.time_two=e},onChangeValue:function(t,e){t+="";var a=/^(\d*)\.\d*$/;switch(e){case"time_one":t=t.replace(a,"$1");break;case"time_two":1==this.rulesAddClone.time_type&&(t=t.replace(a,"$1"));break}var s=this.rulesAddClone;s[e]=t,this.rulesAddClone=s},addMsg:function(){this.rulesAddClone.contentData.push({})},delMsg:function(t){var e=this;this.$confirm({title:"确定删除吗？",content:"",okText:"确认",cancelText:"取消",onOk:function(){var a=_.a.cloneDeep(e.rulesAddClone.contentData);a.splice(t,1),e.rulesAddClone.contentData=[],e.$nextTick((function(){e.rulesAddClone.contentData=a}))}})},handleOk:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(){var e,a,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e=_.a.cloneDeep(this.rulesAddClone.contentData),a=0;case 2:if(!(a<e.length)){t.next=17;break}s=e[a],this.$test.empty(s)&&e.splice(a,1),t.t0=1*s.file_type,t.next=1===t.t0?8:3===t.t0?10:4===t.t0?12:14;break;case 8:return this.$test.empty(s.uploadImg)&&this.$test.empty(s.context)&&e.splice(a,1),t.abrupt("break",14);case 10:return 0==s.add_type?this.$test.empty(s.uploadVideo)&&this.$test.empty(s.context)&&e.splice(a,1):this.$test.empty(s.materialVideo)&&this.$test.empty(s.context)&&e.splice(a,1),t.abrupt("break",14);case 12:return 0==s.add_type?(console.log(s.uploadText,"@@@"),this.$test.empty(s.uploadText)&&this.$test.empty(s.context)&&e.splice(a,1)):this.$test.empty(s.materialText)&&this.$test.empty(s.context)&&e.splice(a,1),t.abrupt("break",14);case 14:a++,t.next=2;break;case 17:if(2==this.rulesAddClone.time_type&&""==this.rulesAddClone.time_two&&(this.rulesAddClone.time_two="00:00"),1!=this.rulesAddClone.time_type||this.rulesAddClone.time_one+this.rulesAddClone.time_two!=0){t.next=22;break}return t.abrupt("return",this.$message.warning("最小时间为0小时1分钟"));case 22:if(2!=this.rulesAddClone.time_type||0!=this.rulesAddClone.time_one){t.next=26;break}return t.abrupt("return",this.$message.warning("至少1天后"));case 26:if(!this.$test.empty(e)){t.next=30;break}return t.abrupt("return",this.$message.warning("消息内容未填写"));case 30:this.rulesAddClone.contentData=e,this.isShowAddRulesPopf=!1,this.callback("ok",this.rulesAddClone,this.index);case 33:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),contentReply:function(t,e,a){console.log(t,e,a,"22");var s=this.rulesAddClone.contentData;s[a]=e,this.rulesAddClone.contentData=_.a.cloneDeep(s),this.isShowAddRulesPopf||this.callback("ok",this.rulesAddClone,this.index)},handleCancel:function(t){this.callback("cancel",this.rulesAddClone,this.index)}}},R=O,T=(a("7e52"),Object(k["a"])(R,s,i,!1,null,"656b7b16",null));e["a"]=T.exports},"7d14":function(t,e,a){var s=a("977c");"string"===typeof s&&(s=[[t.i,s,""]]),s.locals&&(t.exports=s.locals);var i=a("499e").default;i("55f3b070",s,!0,{sourceMap:!1,shadowMode:!1})},"7e52":function(t,e,a){"use strict";var s=a("3b60"),i=a.n(s);i.a},"7fee":function(t,e,a){var s=a("b041");e=t.exports=a("2350")(!1),e.push([t.i,".ss-rules-box[data-v-d82b12fc]{width:720px}.ss-rules-l-b[data-v-d82b12fc]{width:1px;background:url("+s(a("a4b1b"))+") repeat-y}.ss-rules-pay-box[data-v-d82b12fc]{background:#f5f5f5}",""])},8026:function(t,e,a){"use strict";var s=a("99ba"),i=a.n(s);i.a},8171:function(t,e,a){e=t.exports=a("2350")(!1),e.push([t.i,".ss-pre[data-v-5af22e2f]{max-height:13rem;white-space:pre-wrap;overflow:auto}.ss-add-rules[data-v-5af22e2f]{background:#fff}",""])},"8add":function(t,e,a){t.exports=a.p+"assets/img/deleteIcon.236acac9.png"},"8b48":function(t,e,a){e=t.exports=a("2350")(!1),e.push([t.i,"[data-v-40089244] .ant-drawer-content-wrapper{width:800px!important}[data-v-40089244] .ant-drawer-wrapper-body{height:calc(100vh - 64px)}",""])},"8c10c":function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("a-modal",{staticClass:"msg-modal",attrs:{width:"888px!important",title:"选择群聊",zIndex:9999},on:{ok:t.handleOk,cancel:t.handleCancle},model:{value:t.chatVisible,callback:function(e){t.chatVisible=e},expression:"chatVisible"}},[a("div",{staticStyle:{display:"flex","justify-content":"flex-start"}},[a("a-input-search",{staticStyle:{width:"230px","margin-right":"10px"},attrs:{placeholder:"输入群名称"},on:{input:function(e){return t.getChatList(1)}},model:{value:t.searchValue,callback:function(e){t.searchValue=e},expression:"searchValue"}}),a("div",[a("a-select",{staticStyle:{width:"230px"},attrs:{showSearch:"",getPopupContainer:function(t){return t.parentNode},optionFilterProp:"children",placeholder:"群分组",allowClear:!0},on:{change:function(e){return t.getChatList(1)}},model:{value:t.chartGroup,callback:function(e){t.chartGroup=e},expression:"chartGroup"}},t._l(t.chartGroupList,(function(e){return a("a-select-option",{attrs:{value:e.id}},[t._v("\n\t\t\t\t\t\t"+t._s(e.group_name)+"\n\t\t\t\t\t")])})),1)],1),a("div",[1==t.isSop?a("a-button",{staticStyle:{"margin-left":"10px"},on:{click:t.clear}},[t._v("清空")]):t._e()],1)],1),t.noticeTitle?a("div",{staticStyle:{color:"#FF562D","margin-top":"10px"}},[t._v(t._s(t.noticeTitle))]):t._e(),a("p",{staticStyle:{margin:"10px 0"}},[t._v("全部群聊（"+t._s(t.count)+"）：")]),a("div",{staticClass:"chat-checkbox",staticStyle:{height:"300px"}},[a("a-checkbox-group",{key:t.checkedKey,attrs:{value:t.chatData}},t._l(t.chatList,(function(e){return a("a-row",[a("a-checkbox",{attrs:{value:e.chat_id,disabled:1==e.isRemind&&1==t.isDisable&&t.content(t.chatIds,e.chat_id)||1==t.isSop&&t.isSopChooseComp(t.chatData,e)},on:{click:function(a){return t.chooseChat(e.chat_id)}}},[0==e.avatarData.length?a("span",{staticStyle:{background:"#1890FF",width:"36px",height:"36px","margin-right":"5px","vertical-align":"top","border-radius":"4px",float:"left"}},[a("img",{staticStyle:{width:"20px",margin:"8px",height:"20px"},attrs:{src:t.img}})]):1==e.avatarData.length?a("span",{staticStyle:{background:"#DFDFDF",width:"36px",height:"36px","margin-right":"5px","vertical-align":"top","border-radius":"4px",float:"left"}},[""!=e.avatarData[0]?a("img",{staticStyle:{width:"36px",height:"36px"},attrs:{src:e.avatarData[0]}}):t._e(),""==e.avatarData[0]?a("img",{staticStyle:{width:"36px",height:"36px"},attrs:{src:t.img2}}):t._e()]):e.avatarData.length>1&&e.avatarData.length<=4?a("span",{staticStyle:{background:"#DFDFDF",width:"36px",height:"36px","margin-right":"5px","vertical-align":"top",display:"flex","flex-wrap":"wrap","justify-content":"space-around","border-radius":"4px",float:"left","align-items":"center"}},[t._l(e.avatarData,(function(e){return[""!=e?a("img",{staticStyle:{width:"17px",height:"17px"},attrs:{src:e}}):t._e(),""==e?a("img",{staticStyle:{width:"17px",height:"17px"},attrs:{src:t.img2}}):t._e()]}))],2):e.avatarData.length>4?a("span",{staticStyle:{background:"#DFDFDF",width:"36px",height:"36px","margin-right":"5px","vertical-align":"top",display:"flex","flex-wrap":"wrap","justify-content":"space-around","border-radius":"4px",float:"left","align-items":"center"}},[t._l(e.avatarData,(function(e){return[""!=e?a("img",{staticStyle:{width:"10px",height:"10px"},attrs:{src:e}}):t._e(),""==e?a("img",{staticStyle:{width:"10px",height:"10px"},attrs:{src:t.img2}}):t._e()]}))],2):t._e(),a("div",{staticStyle:{display:"inline-block","vertical-align":"top",width:"calc(100% - 80px)"}},[a("div",{staticClass:"flex items-center w-ful justify-between"},[a("div",[a("a-popover",{attrs:{placement:"topLeft",overlayStyle:{"z-index":999999999}}},[a("template",{slot:"content"},[t._v("\n\t\t\t\t\t\t\t\t\t\t\t"+t._s(e.name)+"\n\t\t\t\t\t\t\t\t\t\t")]),a("div",{staticClass:"ss-ellipsis-1 pr-10 ss-break-all"},[t._v("\n\t\t\t\t\t\t\t\t\t\t\t"+t._s(e.name)+"\n\t\t\t\t\t\t\t\t\t\t\t"),e.member_num&&1==t.isShowGroupOwner?a("span",[t._v("（"+t._s(e.member_num)+"）")]):t._e()])],2),e.name&&""!=e.name?t._e():a("div",[t._v("--")]),a("div",[0==t.isShowGroupOwner?a("span",[t._v(t._s(e.member_num)+"/200")]):t._e(),e.owner_name&&1==t.isShowGroupOwner?a("span",{staticStyle:{color:"#AAAAAA"}},[t._v("群主："+t._s(e.owner_name))]):t._e()])],1),1==t.isSop&&t.isSopChooseComp(t.chatData,e)?a("div",{staticClass:"flex-none"},[t._v("\n\t\t\t\t\t\t\t\t\t该群已有规则\n\t\t\t\t\t\t\t\t")]):t._e()])])])],1)})),1),a("div",{directives:[{name:"show",rawName:"v-show",value:t.count>0,expression:"count > 0"}],staticClass:"pagination",staticStyle:{width:"100%",margin:"20px 0px","padding-bottom":"20px",height:"50px"}},[a("div",{staticClass:"pagination",staticStyle:{height:"32px",float:"right"}},[a("a-pagination",{attrs:{total:t.count,showSizeChanger:"",showQuickJumper:!0,current:t.page2,pageSize:t.pageSize2,pageSizeOptions:["15","30","50","100"]},on:{change:t.getChatList,showSizeChange:t.getChatList}})],1)])],1)])],1)},i=[],r=(a("96cf"),a("3b8d")),n=(a("ac4d"),a("8a81"),a("ac6a"),a("c5f6"),a("bc3a")),o=a.n(n),l=a("e306"),c=a.n(l),p=a("4bef"),u=a.n(p),d=o.a.CancelToken,h=d.source(),m={name:"wxModal",props:{show:{type:Boolean,default:!1},chatIds:{type:Array,default:function(){return[]}},chatArr:{type:Array,default:function(){return[]}},chatArrt:{type:Array,default:function(){return[]}},callback:{type:Function,default:null},isDisable:{type:Number,default:0},corpId:{type:String,default:localStorage.getItem("corpId")?localStorage.getItem("corpId"):""},noticeTitle:{type:String,default:""},isRemindAll:{type:Number,default:0},is_list:{type:Number,default:0},isSop:{type:Number,default:0},isShowGroupOwner:{type:Number,default:0}},data:function(){localStorage.getItem("corpId")&&localStorage.getItem("corpId");return{img:c.a,img2:u.a,chartGroupList:[],chatVisible:!1,chatList:[],cancelFlag:!1,checkedKey:0,searchValue:"",page2:1,pageSize2:15,count:0,chatData:[],chooseNum:0,chartGroup:void 0}},methods:{content:function(t,e){var a=!0,s=!1,i=void 0;try{for(var r,n=t[Symbol.iterator]();!(a=(r=n.next()).done);a=!0){var o=r.value;if(o==e)return!1}}catch(l){s=!0,i=l}finally{try{a||null==n.return||n.return()}finally{if(s)throw i}}return!0},getChartGroupList:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(){var e,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.axios.post("work-chat/chat-group-list",{corp_id:this.corpId});case 2:e=t.sent,a=e.data,0!=a.error?this.$message.error(a.error_msg):([{group_name:"群分组",id:0}],this.chartGroupList=a.data.info,this.getChatList());case 5:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),isSopChooseComp:function(t,e){return 1==e.disabled&&-1==this.chatArrt.indexOf(e.chat_id)},getChatList:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(){var e,a,s,i,r=arguments;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=r.length>0&&void 0!==r[0]?r[0]:1,a=r.length>1&&void 0!==r[1]?r[1]:15,this.cancelFlag=!0,t.next=5,this.axios.post("work-chat/chat-list",{corp_id:this.corpId,name:this.searchValue,is_remind_all:this.isRemindAll,page:e,page_size:a,is_list:this.is_list,is_sop:this.isSop,group_id:this.chartGroup},{cancelToken:h.token});case 5:s=t.sent,i=s.data,0!=i.error?this.$message.error(i.error_msg):(this.count=i.data.count,this.cancelFlag=!1,this.page2=e,this.pageSize2=a,this.chatList=i.data.list);case 8:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),chooseChat:function(t){for(var e=!0,a=0;a<this.chatData.length;a++)this.chatData[a]==t&&(this.chatData.splice(a,1),e=!1);e&&this.chatData.push(t)},handleOk:function(){this.searchValue="",this.chooseNum=this.chatData.length,this.chatVisible=!1,null!==this.callback&&"function"===typeof this.callback&&this.callback("ok",this.chooseNum,this.chatData)},clear:function(){this.chooseNum=0,this.chatData=[]},handleCancle:function(){this.checkedKey++,this.cancelFlag&&h.cancel(),this.searchValue="",this.chatVisible=!1,this.chatData=[],this.chatList=[],null!==this.callback&&"function"===typeof this.callback&&this.callback("cancel")}},watch:{show:function(t){this.chatVisible=t,this.chatVisible&&(this.searchValue="",this.chartGroup=void 0,this.chatData=JSON.parse(JSON.stringify(this.chatArr)),this.getChartGroupList())}},mounted:function(){}},f=m,_=(a("2d3a"),a("2877")),v=Object(_["a"])(f,s,i,!1,null,"37bdbcfe",null);e["a"]=v.exports},"8e3c":function(t,e,a){var s=a("9125");"string"===typeof s&&(s=[[t.i,s,""]]),s.locals&&(t.exports=s.locals);var i=a("499e").default;i("1b2c097c",s,!0,{sourceMap:!1,shadowMode:!1})},9125:function(t,e,a){e=t.exports=a("2350")(!1),e.push([t.i,"[data-v-37bdbcfe] .ant-radio-button-wrapper{width:200px;height:55px;line-height:47px;padding:0 10px;margin:10px 5px}[data-v-37bdbcfe] .ant-radio-group{vertical-align:top}.chat-checkbox[data-v-37bdbcfe] .ant-checkbox-wrapper{width:100%;border-bottom:1px dashed #e9e9e9;padding:10px 0}.chat-checkbox[data-v-37bdbcfe] .ant-checkbox{float:right;margin-top:15px}.noMore[data-v-37bdbcfe]{text-align:center;padding:10px 0;font-size:12px;color:#999}.dropdown-style[data-v-37bdbcfe] .ant-select-dropdown{z-index:99999999999!important}",""])},"977c":function(t,e,a){e=t.exports=a("2350")(!1),e.push([t.i,".ss-content-top[data-v-ae3bcd9e]{z-index:100}.ss-content[data-v-ae3bcd9e]{top:52px;position:absolute;overflow:auto;bottom:0}.ss-type-tabs.active[data-v-ae3bcd9e]{color:#fff;background:#1890ff}.ss-usernames[data-v-ae3bcd9e]{max-width:800px}[data-v-ae3bcd9e] .ant-spin-container{height:100%}",""])},"99ba":function(t,e,a){var s=a("ad45");"string"===typeof s&&(s=[[t.i,s,""]]),s.locals&&(t.exports=s.locals);var i=a("499e").default;i("29a9d510",s,!0,{sourceMap:!1,shadowMode:!1})},"9e85":function(t,e,a){var s=a("d4e1");"string"===typeof s&&(s=[[t.i,s,""]]),s.locals&&(t.exports=s.locals);var i=a("499e").default;i("401b7ee3",s,!0,{sourceMap:!1,shadowMode:!1})},a4b1b:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAAFCAIAAAAL5hHIAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyNpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTQ4IDc5LjE2NDAzNiwgMjAxOS8wOC8xMy0wMTowNjo1NyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIDIxLjAgKFdpbmRvd3MpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjk0OUU2QzNFNzc0NTExRUI4MjVFOEQxMzU2MDkyMDc0IiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjk0OUU2QzNGNzc0NTExRUI4MjVFOEQxMzU2MDkyMDc0Ij4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6OTQ5RTZDM0M3NzQ1MTFFQjgyNUU4RDEzNTYwOTIwNzQiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6OTQ5RTZDM0Q3NzQ1MTFFQjgyNUU4RDEzNTYwOTIwNzQiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz5QyPlmAAAAGklEQVR42mK4cf8JEwMDAwgz/P//H0QDBBgAQRwFn64+HBQAAAAASUVORK5CYII="},a8ad:function(t,e,a){e=t.exports=a("2350")(!1),e.push([t.i,".w-280[data-v-0e931554]{width:280px!important}[data-v-0e931554] .ant-drawer-content-wrapper{width:780px!important}[data-v-0e931554] .ant-drawer-wrapper-body{height:calc(100vh - 64px)}[data-v-0e931554] .ant-tabs-top-content{height:0;padding-bottom:0}",""])},aba3:function(t,e,a){var s=a("4169");"string"===typeof s&&(s=[[t.i,s,""]]),s.locals&&(t.exports=s.locals);var i=a("499e").default;i("7ed97489",s,!0,{sourceMap:!1,shadowMode:!1})},acf8:function(t,e,a){"use strict";var s=a("4ce5"),i=a.n(s);i.a},ad45:function(t,e,a){e=t.exports=a("2350")(!1),e.push([t.i,".w-280[data-v-6f5bf639]{width:280px!important}[data-v-6f5bf639] .ant-tabs-top-content{height:0;padding-bottom:0}[data-v-6f5bf639] .ant-modal{max-width:1200px!important}",""])},b11d:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADsAAAA7CAIAAABKR2XkAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAAEXRFWHRTb2Z0d2FyZQBTbmlwYXN0ZV0Xzt0AAAThSURBVGiB7ZrfS9tcGMe/SZPYmlGnrngxFEq3wty0imN0ypChMvGipV2ZN9tf4f/hpci8UPEHIkVQr4YUdlG2QVnFiaAIzkVbstpkmHa11dNmFxm+o74T0jZOoZ+rQ3p4zqdPT57TcxIqm80WCgVCSD6fLxQKuK5QFGUymTiOYwAQQgghqqr+a6vLUFWVEEJRFA0gn89fc91zCCE0gOs8GYpQVZX+1w66qRobT9XYeKrGxlM1Np6bZ8xczTCEEEVRVFW1Wq0sy5YTynBjQsjHjx/X1tay2SwAhmF6e3v7+voYpsShqWw2+/Pnz4pK/sfh4eHq6urXr1+Lrjc1NXm9XofDQVGU3pgGGkuSND4+fnx8DMBut3d3d7MsG4lEtra2ANTX14+MjHAcpzesUcaCICwsLCSTSZ7nPR6Py+Wi6d93+ebm5uLiYi6Xc7vdfr9fb2RDaoUkSfPz88lk0mQyvXr1qrOz81wXQFtb25MnTwB8+vQpk8noDV55Y0EQJicnZVnmef7169cPHjy42Ofx48da4+joSG/8CtcKLbuyLGvZ/V9dALW1tVojn8/rHaKSxqIoTk9Py7JssVgu0QWwvr6uNRoaGvSOUjHj09PTlZUVSZI4jhseHm5tbdV2uxfrVyKReP/+PQCHw3H79m29A1VsHsfj8f39fZPJ5PV6W1tb0+l0MBhcW1sr6qYoSjAYzGQyPM/7fL4SBqpYjqPRKCGkqampvb0dwN7eXiQSAUDT9PPnz00mEwBZlicmJiRJYhimv7/fZrOVMFDFcpxIJADYbLaamhoATqfz/v37AMLh8Pfv3wFks9mZmRlJkmpqagKBwNOnT0tY8Mo1liTp27dvZ2dnAMxmM4B0Oq1NX7PZ7PP56urqMpnMxsYGAEEQ4vE4TdMvXrwoqtBXZCwIwtjY2NjY2OfPnwHcu3dP+w7JZFLr0NjY2NLSAmB3dxeA3W73+Xxv3rzp7u4uLbtlGUuStLCwkEqlLBZLc3MzgPb2dqvVmkql3r17d3JyAoCiqDt37gBIp9MAWJZ1u90PHz4sObulG8disfHxcW0RDgQCd+/eBXDr1q2enh4AX758+fDhAwBVVUVRBFBXV1eOYhG6awUhZHl5+fj4mOf5P5cJmqZ7e3tFURRFUct6PB4/ODgAcMlSchXG4XB4f38fgMfjKVKhaXp4eDiXy1ksllQqFQwG0+m01Wp99OhRpXSh15gQEgqFADidTpfLdbEDTdMWi0WW5fn5+VgsxnHcwMBAaXX3b+gzVhQll8sB6Onp+dsNpCjK1NSUKIosy/r9/o6OjnIqw0X0GZ8fjP9t7/Djx4+5uTlRFDmOGxwc7OjoKLMyXERfOKvVqiVMW4GLUBTl7du3giAwDOP3+y/5HcpBX0SWZbUSFo1Gd3Z2/vwokUjMzs5qi/DQ0FDFJ8M5uvd5Z2dno6OjkiSZzeZnz551dXVxHLe+vh4KhTKZDMMwgUCgs7PTIN1SjAFsb28Hg0FFUYqu8zw/MDDgdruNmAznlGKsqurp6enS0tL5VgKA3W5/+fKlzWYzLrsaZe3+FUU5OjoqFAqNjY0l7H9Kw9gzISO4eWebVWPjqRobT9XYeKrGxlM1Np6baWz0/8MK8vtdLO2o9EbAaA8uOY6jKOqav/JGURTDMCzLUtrD1xvEL6lgHVOz/2g5AAAAAElFTkSuQmCC"},b27d:function(t,e,a){var s=a("7fee");"string"===typeof s&&(s=[[t.i,s,""]]),s.locals&&(t.exports=s.locals);var i=a("499e").default;i("9cc9df56",s,!0,{sourceMap:!1,shadowMode:!1})},ba97:function(t,e,a){e=t.exports=a("2350")(!1),e.push([t.i,".content[data-v-66c42a49]{width:100%}.pic[data-v-66c42a49] .ant-upload.ant-upload-select-picture-card:hover{border-color:#fff;border:1px dashed #d9d9d9}[data-v-66c42a49] .ant-upload{position:relative}.local[data-v-66c42a49]:hover,.material_image[data-v-66c42a49]:hover{color:#0a98d5}.video-show[data-v-66c42a49]{width:14rem;height:8rem;text-align:center;background-color:#000}.material_video[data-v-66c42a49]:hover{color:#0a98d5}.material_video[data-v-66c42a49]{cursor:pointer;position:relative}.material_image[data-v-66c42a49],.material_video[data-v-66c42a49]{width:101.8px;height:101.8px;background-color:#fafafa;border:1px dashed #d9d9d9;text-align:center;padding:2.08rem 0 0 0;color:rgba(0,0,0,.65)}.material_image[data-v-66c42a49]{margin:2px 0 1rem 0;position:absolute;left:7rem;top:-.14rem}.title[data-v-66c42a49]{font-size:16px;font-weight:600}.content_container[data-v-66c42a49]{padding:2% 5%;width:100%;background-color:#f1f3f5}.ant-divider-horizontal[data-v-66c42a49]{margin:.64rem 0}.before_choose[data-v-66c42a49]{height:7.253rem;font-size:.907rem;line-height:7.253rem;text-align:center;cursor:pointer;border:1px dashed #ccc;width:95%;margin:0 2.5%}.content_input[data-v-66c42a49]{background:#fff;min-width:378px;height:100px;margin-top:5px;display:-webkit-box;display:-ms-flexbox;display:flex}.input_text1[data-v-66c42a49]{width:200px;line-height:30px;margin:15px 0 5px 15px;text-overflow:ellipsis;white-space:nowrap;font-size:18px;color:#000}.input_text1[data-v-66c42a49],.input_text2[data-v-66c42a49]{overflow:hidden;word-break:break-all}.input_text2[data-v-66c42a49]{width:250px;line-height:20px;margin:0 0 0 15px;display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:2}.input_img[data-v-66c42a49]{width:80px;height:80px;-o-object-fit:contain;object-fit:contain}.link_cover[data-v-66c42a49] .ant-upload.ant-upload-select-picture-card{width:0;height:0;background-color:#f1f3f5;border:none}",""])},bab6:function(t,e,a){"use strict";var s=a("60fa"),i=a.n(s);i.a},c0c8:function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"py-10"},[t._l(t.rules,(function(e,i){return s("div",{key:i},[e.context?s("div",{staticClass:"p-10 text-14 text-gray-900 ss-pre my-10 block br5 ss-break-all",class:[t.isAdd?"bg-white":"ss-add-rules"]},[t._v(t._s(e.context))]):t._e(),1==e.file_type&&e.uploadImg.length>0?s("div",{staticClass:"my-10 flex flex-wrap"},t._l(e.uploadImg,(function(e,a){return s("div",{key:a,staticClass:"mr-10"},[s("img",{staticClass:"w-100 h-100 object-cover",attrs:{src:t.$store.state.commonUrl+e.local_path,alt:""}})])})),0):t._e(),e.uploadVideo&&e.uploadVideo.local_path&&0==e.add_type&&3==e.file_type?s("div",{staticClass:"my-10"},[s("app-video",{attrs:{src:t.$store.state.commonUrl+e.uploadVideo.local_path}})],1):t._e(),e.materialVideo&&e.materialVideo.local_path&&1==e.add_type&&3==e.file_type?s("div",{staticClass:"my-10"},[s("app-video",{attrs:{src:t.$store.state.commonUrl+e.materialVideo.local_path}})],1):t._e(),e.uploadText&&0==e.add_type&&4==e.file_type&&(e.uploadText.url||e.uploadText.title||e.uploadText.description)?s("div",{staticClass:"p-10 flex bg-white my-10 bg-white flex br5 bg-white"},[s("div",{staticClass:"bg-gray-201 w-80 h-80 mr-10"},[e.uploadText.url?s("img",{staticClass:"w-80 h-80 block object-cover",attrs:{src:t.$store.state.commonUrl+e.uploadText.url,alt:""}}):s("img",{staticClass:"w-80 h-80 block object-cover",attrs:{src:a("b11d"),alt:""}})]),s("div",{staticClass:" "},[s("div",{staticClass:"text-15 text-gray-900 mb-5 ss-break-all ss-ellipsis"},[t._v(t._s(e.uploadText.title))]),s("div",{staticClass:"text-12 text-gray-501 ss-ellipsis-2 ss-break-all"},[t._v(t._s(e.uploadText.description))])])]):t._e(),e.materialText&&1==e.add_type&&4==e.file_type?s("div",{staticClass:"p-10 flex bg-white my-10 bg-white br5 bg-white"},[e.materialText.url?s("div",{staticClass:"bg-gray-201 w-80 h-80 mr-10"},[e.materialText.url?s("img",{staticClass:"w-80  h-80 block object-cover",attrs:{src:t.$store.state.commonUrl+e.materialText.url,alt:""}}):s("img",{staticClass:"w-80 h-80 block object-cover",attrs:{src:a("b11d"),alt:""}})]):t._e(),s("div",{},[s("div",{staticClass:"text-15 text-gray-900 mb-5 ss-break-all ss-ellipsis"},[t._v(t._s(e.materialText.title))]),s("div",{staticClass:"text-12 text-gray-501 ss-ellipsis-2 ss-break-all"},[t._v(t._s(e.materialText.description))])])]):t._e()])})),t.isAdd?t._e():s("div",{staticClass:"py-5 text-gray-501 text-14"},[t._v("共"+t._s(t.count)+"条")])],2)},i=[],r=(a("ac6a"),a("c5f6"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("video-player",{ref:"videoPlayer",staticClass:"video-player vjs-custom-skin",staticStyle:{width:"200px"},attrs:{playsinline:!0,options:t.publicOptions}})],1)}),n=[],o=a("d6d3"),l={name:"Video",props:{src:{type:String,default:function(){return""}}},components:{videoPlayer:o["videoPlayer"]},watch:{src:{handler:function(t){var e=this;t&&this.$nextTick((function(){e.publicOptions.sources=[{src:t,type:"video/mp4"}]}))},immediate:!0}},data:function(){return{publicOptions:{sources:[],playbackRates:[.7,1,1.5,2],autoplay:!1,muted:!1,loop:!1,preload:"auto",language:"zh-CN",aspectRatio:"1:1",fluid:!0,notSupportedMessage:"此视频暂无法播放，请稍后再试",controlBar:{timeDivider:!0,durationDisplay:!0,remainingTimeDisplay:!1,fullscreenToggle:!0}}}}},c=l,p=a("2877"),u=Object(p["a"])(c,r,n,!1,null,"5d90d4d9",null),d=u.exports,h={name:"rulesPay",components:{appVideo:d},props:{rules:{type:Array,default:function(){return[]}},isAdd:{type:[Number,Array],default:function(){return 0}}},computed:{count:function(){var t=0;return this.rules.forEach((function(e,a){e.context&&t++,1==e.file_type&&e.uploadImg.length>0&&t++,e.uploadVideo&&e.uploadVideo.local_path&&0==e.add_type&&3==e.file_type&&t++,e.materialVideo&&e.materialVideo.local_path&&1==e.add_type&&3==e.file_type&&t++,e.uploadText&&0==e.add_type&&4==e.file_type&&(e.uploadText.url||e.uploadText.title||e.uploadText.description)&&t++,e.materialText&&1==e.add_type&&4==e.file_type&&t++})),t}},data:function(){return{}}},m=h,f=(a("0217"),Object(p["a"])(m,s,i,!1,null,"5af22e2f",null));e["a"]=f.exports},c188:function(t,e,a){"use strict";var s=a("aba3"),i=a.n(s);i.a},c6a0:function(t,e,a){"use strict";var s=a("9e85"),i=a.n(s);i.a},cf27:function(t,e,a){"use strict";var s=a("21b9"),i=a.n(s);i.a},d4e1:function(t,e,a){e=t.exports=a("2350")(!1),e.push([t.i,".ss-min-h500[data-v-32adb54e]{min-height:500px}",""])},e306:function(t,e,a){t.exports=a.p+"assets/img/chat.29abd713.png"},e8b7:function(t,e,a){var s=a("8b48");"string"===typeof s&&(s=[[t.i,s,""]]),s.locals&&(t.exports=s.locals);var i=a("499e").default;i("6011d8a0",s,!0,{sourceMap:!1,shadowMode:!1})},f93e:function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("a-spin",{staticClass:"h-full ss-sop-list-content",attrs:{tip:"Loading...",size:"large",spinning:t.isLoading}},[a("div",{staticClass:"flex flex-col h-full"},[a("div",{staticClass:"bg-white px-16 py-15 sticky  b-line  ss-content-top top-0 flex items-center"},[a("div",{staticClass:"text-16 text-gray-900"},[t._v(t._s(t.is_chat?"客户群SOP":"客户SOP"))]),a("div",{staticClass:"text-14 text-gray-501 pl-10"},[a("a",{attrs:{target:"_blank",href:1==t.is_chat?"https://support.qq.com/products/312071/faqs/90125":"https://support.qq.com/products/312071/faqs/90122"}},[t._v("帮助文档")])])]),a("div",{staticClass:"flex h-full "},[t.is_chat?t._e():a("div",{staticClass:"flex-none w-240 bg-white r-line z-2 ss-content-left"},[a("div",{staticClass:"flex text-gray-501 items-center p-20"},[t._v("\n\t\t\t\t\tSOP场景\n\t\t\t\t\t"),a("a-tooltip",{attrs:{placement:"bottom"}},[a("template",{slot:"title"},[a("span",[t._v("对于符合条件的客户（如新添加客户，或者停留在某特定生命周期阶段的客户），SOP则会自动触发提醒员工在什么时间点对哪些客户发送哪些内容，完成新客户的培育和客户转化，提高每个私域用户的生命价值。")])]),a("a-icon",{staticClass:"ml-5",attrs:{type:"question-circle"}})],2)],1),a("div",{},t._l(t.types,(function(e,s){return a("div",{key:s,staticClass:"text-center py-15 ss-type-tabs cursor-pointer text-gray-900",class:{active:t.type==e.value},on:{click:function(a){return t.chooseType(e.value)}}},[t._v(t._s(e.text))])})),0)]),a("div",{ref:"DOM",staticClass:"pb-60 ss-content",style:{left:1==t.is_chat?"0px":"240px"}},[a("div",{staticClass:"m-20"},[a("div",{staticClass:"bg-white p-20 mb-20 flex items-center flex-wrap ss-box-border"},[a("div",{staticClass:"flex items-center mr-30 py-10"},[a("div",{staticClass:"pr-10"},[t._v("规则名称:")]),a("div",[a("a-input",{staticClass:"w-200",attrs:{placeholder:"请输入规则名称"},model:{value:t.title,callback:function(e){t.title=e},expression:"title"}})],1)]),a("div",{staticClass:"flex items-center mr-30 py-10"},[a("div",{staticClass:"pr-10"},[t._v("创建人:")]),a("div",[a("a-button",{staticClass:"w-200",on:{click:function(e){return t.showDepartmentList(0,0)}}},[t.chooseUserNum0+t.chooseDepartmentNum0>0?a("span",[t._v("已选择"+t._s(t.chooseUserNum0)+"名成员"+t._s(t.chooseDepartmentNum0)+"个部门")]):a("span",[t._v("选择部门成员")])])],1)]),a("div",{staticClass:"flex items-center mr-30 py-10"},[a("div",{staticClass:"pr-10"},[t._v(t._s(0==t.is_chat?"选择执行人":"选择群主")+":")]),a("div",[a("a-button",{staticClass:"w-200",on:{click:function(e){return t.showDepartmentList(1,1)}}},[t.chooseUserNum1+t.chooseDepartmentNum1>0?a("span",[t._v("已选择"+t._s(t.chooseUserNum1)+"名成员"+t._s(t.chooseDepartmentNum1)+"个部门")]):a("span",[t._v(t._s(0==t.is_chat?"选择部门成员":"选择群主"))])])],1)]),2==this.type&&0==this.is_chat?a("div",{staticClass:"flex items-center mr-30 py-10"},[a("div",{staticClass:"pr-10"},[t._v("跟进状态:")]),a("div",[a("a-select",{staticClass:"w-200",attrs:{showSearch:"",allowClearf:"",placeholder:"请选择跟进状态",optionFilterProp:"children"},model:{value:t.follow_id,callback:function(e){t.follow_id=e},expression:"follow_id"}},[t._l(t.follows,(function(e,s){return[a("a-select-option",{attrs:{value:e.id}},[t._v("\n\t\t\t\t\t\t\t\t\t\t\t"+t._s(e.title)+"\n\t\t\t\t\t\t\t\t\t\t")])]}))],2)],1)]):t._e(),a("div",{staticClass:"flex items-center mr-30 py-10"},[a("div",{staticClass:"pr-10"},[t._v("SOP状态:")]),a("div",[a("a-select",{staticClass:"w-200",attrs:{value:t.status},on:{change:function(e){t.status=e}}},t._l(t.sopStatus,(function(e,s){return a("a-select-option",{key:s,attrs:{value:e.value}},[t._v("\n\t\t\t\t\t\t\t\t\t\t"+t._s(e.text)+"\n\t\t\t\t\t\t\t\t\t")])})),1)],1)]),a("div",{staticClass:"flex items-center mr-30 py-10"},[a("div",{staticClass:"pr-10"},[t._v("创建时间:")]),a("div",[a("a-range-picker",{staticClass:"w-200",attrs:{"disabled-date":t.disabledDate,"show-time":{defaultValue:[t.moment("00:00","HH:mm"),t.moment("23:59","HH:mm")],format:"HH:mm"}},on:{change:t.onChangeAngePicker},model:{value:t.createTime,callback:function(e){t.createTime=e},expression:"createTime"}})],1)]),a("div",{staticClass:"mr-10 py-10"},[a("a-button",{attrs:{type:"primary"},on:{click:function(e){return t._initData(1)}}},[t._v("查找")])],1),a("div",{staticClass:"mr-10 py-10"},[a("a-button",{on:{click:t.clearSelect}},[t._v("清空")])],1)]),a("div",{staticClass:"flex justify-end mb-20"},[a("div",[a("a-button",{attrs:{icon:"reload"},on:{click:t.syncFollowUser}},[t._v("同步配置了外部联系权限的联系人")])],1),a("a-button",{directives:[{name:"has",rawName:"v-has",value:1==t.is_chat?"chatSopList-addRules":"customSopList-addRules",expression:"is_chat==1? 'chatSopList-addRules':'customSopList-addRules'"}],staticClass:"ml-10",attrs:{type:"primary"},on:{click:function(e){return t.toCustomSopAddRules()}}},[a("div",[a("a-icon",{style:{color:"#fff"},attrs:{type:"plus"}}),a("span",[t._v("创建SOP规则")])],1)])],1),a("div",[a("div",{directives:[{name:"has",rawName:"v-has",value:1==t.is_chat?"chatSopList-list":"customSopList-list",expression:"is_chat==1? 'chatSopList-list':'customSopList-list'"}]},[a("div",{staticClass:"bg-white ss-box-border"},[a("a-table",{attrs:{rowKey:"sop_id",columns:t.columns,"data-source":t.list,pagination:!1},scopedSlots:t._u([{key:"titles",fn:function(e,s){var i=s.title;return a("div",{},[a("span",[t._v(t._s(i.slice(0,10))),a("br"),t._v(t._s(i.slice(10,i.length)))])])}},{key:"user_names",fn:function(e,s){var i=s.user_name;return t.is_chat?t._e():a("div",{staticClass:"flex flex-wrap"},[t._l(i,(function(e,s){return i.length<=4?a("div",{key:s,staticClass:"py-5"},["title"==e.scopedSlots.title?a("div",[a("a-tag",{attrs:{color:"blue"}},[t._v(t._s(e.title))])],1):t._e(),"custom"==e.scopedSlots.title?a("div",[a("a-tag",{attrs:{color:"orange"}},[t._v(t._s(e.title))])],1):t._e()]):t._e()})),i.length>4?a("a-popover",{attrs:{trigger:"hover"}},[a("template",{slot:"content"},[a("div",{staticClass:"flex flex-wrap ss-usernames"},t._l(i,(function(e,s){return a("div",{key:s,staticClass:"py-5"},["title"==e.scopedSlots.title?a("div",[a("a-tag",{attrs:{color:"blue"}},[t._v(t._s(e.title))])],1):t._e(),"custom"==e.scopedSlots.title?a("div",[a("a-tag",{attrs:{color:"orange"}},[t._v(t._s(e.title))])],1):t._e()])})),0)]),[a("div",{staticClass:"flex flex-wrap"},t._l(i.slice(0,4),(function(e,s){return a("div",{key:s,staticClass:"py-5"},["title"==e.scopedSlots.title?a("div",[a("a-tag",{attrs:{color:"blue"}},[t._v(t._s(e.title))])],1):t._e(),"custom"==e.scopedSlots.title?a("div",[a("a-tag",{attrs:{color:"orange"}},[t._v(t._s(e.title))])],1):t._e()])})),0),a("span",[t._v("等共计"+t._s(t._f("user_name_len")(i)[0])+"个成员及"+t._s(t._f("user_name_len")(i)[1])+"部门")])]],2):t._e()],2)}},{key:"chat_data",fn:function(e,s){var i=s.chat_data;return t.is_chat?a("div",{},[t._l(i,(function(e,s){return i.length<=2?a("div",{key:s,staticClass:"mr-10 py-5"},[a("div",{staticClass:"flex"},[a("chatBody",{attrs:{chat_item:e}})],1)]):t._e()})),i.length>2?a("a-popover",{attrs:{trigger:"hover"}},[a("template",{slot:"content"},t._l(i,(function(t,e){return a("div",{key:e,staticClass:"mr-10 py-5"},[a("div",{staticClass:"flex"},[a("chatBody",{attrs:{chat_item:t}})],1)])})),0),[t._l(i.slice(0,2),(function(t,e){return a("div",{key:e,staticClass:"mr-10 py-5"},[a("div",{staticClass:"flex"},[a("chatBody",{attrs:{chat_item:t}})],1)])})),a("span",[t._v("等共计"+t._s(i.length)+"个群聊")])]],2):t._e()],2):t._e()}},{key:"status",fn:function(e,s){var i=s.status,r=s.sop_id,n=s.can_edit;return a("div",{},[1==n&&t.is_show_status?a("a-switch",{attrs:{disabled:0==n,checked:1==i},on:{change:function(e){return t.onChangeStatus(e,r)}}}):a("div",[a("span",{staticClass:"text-14 text-gray-900"},1==i?[t._v("已开启")]:[t._v("已关闭")])])],1)}},{key:"create_times",fn:function(e,s){var i=s.create_time;return a("div",{},[a("span",[t._v(t._s(i.split(" ")[0])),a("br"),t._v(t._s(i.split(" ")[1]))])])}},{key:"action",fn:function(e,s){var i=s.sop_id,r=s.can_edit;return a("div",{staticClass:"flex items-center"},[a("overConditionPop",{directives:[{name:"has",rawName:"v-has",value:1==t.is_chat?"chatSopList-process":"customSopList-process",expression:"is_chat==1? 'chatSopList-process':'customSopList-process'"}],attrs:{is_chat:t.is_chat,sop_id:1*i}},[a("a-button",{staticClass:"mx-2"},[t._v("完成情况")])],1),a("detailDrawer",{directives:[{name:"has",rawName:"v-has",value:1==t.is_chat?"chatSopList-detail":"customSopList-detail",expression:"is_chat==1? 'chatSopList-detail':'customSopList-detail'"}],attrs:{is_chat:t.is_chat,sop_id:1*i}},[a("a-button",{staticClass:"mx-2"},[t._v("查看详情")])],1),0!=r?a("a-button",{directives:[{name:"has",rawName:"v-has",value:1==t.is_chat?"chatSopList-edit":"customSopList-edit",expression:"is_chat==1? 'chatSopList-edit':'customSopList-edit'"}],staticClass:"mx-2",on:{click:function(e){return t.toCustomSopAddRules(i)}}},[t._v("编辑")]):t._e(),0!=r?a("a-button",{directives:[{name:"has",rawName:"v-has",value:1==t.is_chat?"chatSopList-delete":"customSopList-delete",expression:"is_chat==1? 'chatSopList-delete':'customSopList-delete'"}],staticClass:"mx-2",on:{click:function(e){return t.delHandle(i)}}},[t._v("删除")]):t._e()],1)}}],null,!0)})],1),t.count>0?a("div",{staticClass:"flex justify-between py-20"},[a("div",[a("span",[t._v("共"),a("span",{staticClass:"text-blue-501"},[t._v(t._s(t.count))]),t._v("条")])]),a("a-pagination",{attrs:{"show-size-changer":"",total:t.count,pageSize:t.page_size},on:{change:t.changePage,showSizeChange:t.onShowSizeChange},model:{value:t.page,callback:function(e){t.page=e},expression:"page"}})],1):t._e()])])])])]),a("chooseDepartment",{ref:"user",attrs:{show:t.showModalDepartment,callback:t.modalVisibleChange,is_special:t.is_special,is_external:t.is_external}})],1)])},i=[],r=(a("8e6e"),a("ac6a"),a("456d"),a("bd86")),n=a("75fc"),o=(a("96cf"),a("3b8d")),l=(a("28a5"),a("c5f6"),a("c75b")),c=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("a-modal",{attrs:{title:"完成情况",width:1100,visible:t.visible},on:{ok:t.handleOk,cancel:t.handleCancel}},[s("template",{slot:"footer"},[s("a-button",{on:{click:t.handleOk}},[t._v("关闭")])],1),s("div",{},[s("a-spin",{attrs:{tip:"Loading...",size:"large",spinning:t.isLoading}},[s("div",[s("a-tabs",{attrs:{type:"card"},on:{change:t.paneCallback}},[s("a-tab-pane",{key:0,attrs:{tab:"未完成"}}),s("a-tab-pane",{key:1,attrs:{tab:"已完成"}})],1),s("div",[s("div",{staticClass:"w-full"},[s("div",{staticClass:"bg-white"},[s("div",{staticClass:"flex items-center flex-wrap"},[s("div",{staticClass:"flex items-center mr-10 py-10"},[s("div",{staticClass:"pr-10"},[t._v(t._s(0==t.is_chat?"选择执行人":"选择群主")+":")]),s("div",[s("a-button",{staticClass:"w-180",on:{click:t.showDepartmentList}},[t.chooseUserNum+t.chooseDepartmentNum>0?s("span",[t._v("已选择"+t._s(t.chooseUserNum)+"名成员")]):s("span",[t._v(t._s(0==t.is_chat?"选择部门成员":"选择群主"))])])],1)]),s("div",{staticClass:"flex items-center mr-10 py-10"},[s("div",{staticClass:"pr-10"},[t._v(t._s(t.is_chat?"推送群聊":"推送对象")+":")]),s("div",[s("a-input",{staticClass:"w-160",attrs:{placeholder:t.is_chat?"请输入推送群聊":"请输入推送对象"},model:{value:t.name,callback:function(e){t.name=e},expression:"name"}})],1)]),s("div",{staticClass:"flex items-center mr-10 py-10"},[s("div",{staticClass:"pr-10"},[t._v("推送时间:")]),s("div",[s("a-range-picker",{staticClass:"w-280",attrs:{"disabled-date":t.disabledDate,"show-time":{defaultValue:[t.moment("00:00","HH:mm"),t.moment("23:59","HH:mm")],format:"HH:mm"}},on:{change:t.onChangeAngePicker},model:{value:t.pushTime,callback:function(e){t.pushTime=e},expression:"pushTime"}})],1)]),s("div",{staticClass:"mr-10 py-10"},[s("a-button",{attrs:{type:"primary"},on:{click:function(e){return t._initData(1)}}},[t._v("查找")])],1),s("div",{staticClass:"mr-30 py-10"},[s("a-button",{on:{click:function(e){return t.clearSelect(1)}}},[t._v("清空")])],1)]),s("div",{staticClass:"mt-10"},[s("a-table",{attrs:{pagination:!1,columns:t.columns,"data-source":t.list,rowKey:"msg_id","row-selection":t.rowSelection},scopedSlots:t._u([{key:"chat_data",fn:function(e,a){var i=a.avatarData,r=a.member_num,n=a.name,o=a.ownerName;return t.is_chat?s("div",{},[s("div",{},[s("chatBody",{attrs:{chat_item:{avatarData:i,member_num:r,name:n,ownerName:o}}})],1)]):t._e()}},{key:"tnickname",fn:function(e,i){return s("div",{staticClass:"flex items-center"},[s("div",[i.avatar?s("img",{staticClass:"w-40 h-40",attrs:{src:i.avatar,alt:""}}):s("img",{staticClass:"w-40 h-40",attrs:{src:a("4bef"),alt:""}})]),s("div",{staticClass:"text-12 text-gray-900 pl-10 ss-break-all ss-ellipsis-1"},[t._v(t._s(i.nickname))]),s("div",{class:null!=i.corp_name?"corp-name":"wx-name"},[null!=i.corp_name?s("div",{staticClass:"ss-break-all ss-ellipsis-1"},[t._v("@"+t._s(e.corp_name)+"\n\t\t\t\t\t\t\t\t\t\t\t\t")]):s("div",{staticClass:"ss-break-all ss-ellipsis-1"},[t._v("@微信")])]),"男性"==i.gender?s("a-icon",{staticStyle:{color:"#427EBA"},attrs:{type:"man"}}):t._e(),"女性"==i.gender?s("a-icon",{staticStyle:{color:"#ED4997"},attrs:{type:"woman"}}):t._e()],1)}},{key:"tcontent",fn:function(e,a){return s("div",{staticClass:"flex items-center"},[s("prevRulesPop",{attrs:{timeData:JSON.parse(a.content)}},[s("div",{staticClass:"text-blue-501 cursor-pointer"},[t._v("预览")])])],1)}},{key:"action",fn:function(e,a,i){var r=a.msg_id,n=a.is_over,o=a.can_over;return 0==n?s("div",{staticClass:"flex items-center"},[s("div",{staticClass:"text-blue-501 cursor-pointer mr-10",on:{click:function(e){return t._sopMsgRemind([r])}}},[t._v("\n\t\t\t\t\t\t\t\t\t\t\t\t提醒\n\t\t\t\t\t\t\t\t\t\t\t")]),1==o?s("div",{staticClass:"text-blue-501 cursor-pointer",on:{click:function(e){return t.sopMsgSetOver(r)}}},[t._v("\n\t\t\t\t\t\t\t\t\t\t\t\t完成\n\t\t\t\t\t\t\t\t\t\t\t")]):t._e()]):t._e()}}],null,!0)},[s("div",{attrs:{slot:"push_time"},slot:"push_time"},[t._v("\n\t\t\t\t\t\t\t\t\t\t\t推送时间\n\t\t\t\t\t\t\t\t\t\t\t"),s("a-tooltip",{attrs:{placement:"bottom"}},[s("template",{slot:"title"},[s("span",[t._v("根据后台所设置的提醒时间，需要推送给该客户的时间点，例如企业成员2月1日新添加客户，后台所设置的提醒时间为1天后8:00提醒推送，那么推送时间则为2月2日8:00。")])]),s("a-icon",{staticClass:"ml-5",attrs:{type:"question-circle"}})],2)],1),s("div",{attrs:{slot:"over_time"},slot:"over_time"},[t._v("\n\t\t\t\t\t\t\t\t\t\t\t完成时间\n\t\t\t\t\t\t\t\t\t\t\t"),s("a-tooltip",{attrs:{placement:"bottom"}},[s("template",{slot:"title"},[s("span",[t._v("执行人对该条推送内容进行手动操作点击【完成】按钮的时间。")])]),s("a-icon",{staticClass:"ml-5",attrs:{type:"question-circle"}})],2)],1),0==t.is_over?s("div",{attrs:{slot:"customTitle"},slot:"customTitle"},[s("div",[t._v("操作")])]):t._e()])],1),t.count>0?s("div",{staticClass:"flex justify-between py-20"},[s("div",{staticClass:"flex items-center"},[0==t.is_over?s("div",{staticClass:"pr-10 flex items-center"},[s("a-checkbox",{staticClass:"mr-10",on:{click:t.allCheckChange},model:{value:t.allCheck,callback:function(e){t.allCheck=e},expression:"allCheck"}}),s("div",{staticClass:"pr-10"},[s("a-select",{staticClass:"w-80",attrs:{value:t.is_all},on:{change:t.isAllChange}},[s("a-select-option",{attrs:{value:0}},[t._v("当前页")]),s("a-select-option",{attrs:{value:1}},[t._v("全部")])],1)],1),s("a-button",{attrs:{type:"primary",disabled:t.isDisabled},on:{click:function(e){return t._sopMsgRemind(t.is_all?t.selectedRowKeys:t.currentSelectedRowKeys)}}},[t._v("\n\t\t\t\t\t\t\t\t\t\t\t\t批量提醒\n\t\t\t\t\t\t\t\t\t\t\t")])],1):t._e(),s("span",[t._v("共"),s("span",{staticClass:"text-blue-501"},[t._v(t._s(t.count))]),t._v("条")])]),s("a-pagination",{attrs:{"show-size-changer":"",total:t.count,pageSize:t.page_size},on:{change:t.changePage,showSizeChange:t.onShowSizeChange},model:{value:t.page,callback:function(e){t.page=e},expression:"page"}})],1):t._e()])])])],1)])],1)],2),s("chooseDepartment",{ref:"user",attrs:{show:t.showModalDepartment,callback:t.modalVisibleChange,departmentDisabled:1,is_special:1,is_external:1}}),s("div",{on:{click:function(e){t.visible=!0}}},[t._t("default")],2)],1)},p=[],u=(a("7f7f"),a("c1df")),d=a.n(u),h=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("a-modal",{attrs:{title:"推送内容",width:700,visible:t.visible},on:{ok:t.handleOk,cancel:t.handleCancel}},[a("template",{slot:"footer"},[a("a-button",{on:{click:t.handleOk}},[t._v("关闭")])],1),a("div",{staticClass:"px-30 ss-min-h500"},[a("rulesPay",{attrs:{rules:t.timeData}})],1)],2),a("div",{on:{click:function(e){t.visible=!0}}},[t._t("default")],2)],1)},m=[],f=a("c0c8"),v={name:"detailDrawer",components:{rulesPay:f["a"]},props:{timeData:{type:Array,default:function(){return[]}}},data:function(){return{visible:!1}},watch:{timeData:{handler:function(t){},immediate:!0}},methods:{handleOk:function(t){this.visible=!1},handleCancel:function(t){this.visible=!1}}},g=v,b=(a("c6a0"),a("2877")),x=Object(b["a"])(g,h,m,!1,null,"32adb54e",null),y=x.exports,w=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"flex items-center ss-chat-body p-2 br2 pr-10 inline-block"},[a("chatImgs",{attrs:{imgs:t.chat_item.avatarData}}),a("div",{staticClass:"pl-10"},[a("div",{},[a("a-popover",{attrs:{placement:"top"}},[a("div",{attrs:{slot:"content"},slot:"content"},[a("div",[t._v(t._s(t.chat_item.name))])]),a("div",[a("div",{staticClass:"flex items-center text-blue-501"},[a("div",{staticClass:"ss-chat-text ss-ellipsis-1 ss-break-all"},[t._v(t._s(t.chat_item.name))]),a("div",{staticClass:"flex-none"},[t._v("("+t._s(t.chat_item.member_num)+")")])]),a("div",[a("div",{staticClass:"ss-chat-text ss-ellipsis-1 ss-break-all text-gray-501 text-12"},[t._v("群主："+t._s(t.chat_item.ownerName))])])])])],1)])],1)])},k=[],C=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"w-40 h-40 flex items-center justify-center flex-wrap ss-imgs-box br2 pl-1 pt-1"},t._l(t.imgs,(function(e,s){return a("div",{key:s,staticClass:"pr-1 pb-1",class:"flex-w"+t.imgs.length},[a("img",{staticClass:"w-full block",attrs:{src:e}})])})),0)])},S=[],A={name:"chatImgs",props:{imgs:{type:Array,default:function(){return{}}}}},D=A,F=(a("c188"),Object(b["a"])(D,C,S,!1,null,"aea8d58c",null)),O=F.exports,R={name:"chatBody",props:{chat_item:{type:Object,default:function(){return{}}}},components:{chatImgs:O}},T=R,N=(a("cf27"),Object(b["a"])(T,w,k,!1,null,"b9b621ca",null)),L=N.exports,I=a("8c10c"),j=a("2ef0"),M=a.n(j),z={name:"overCondition",components:{ChooseDepartment:l["a"],prevRulesPop:y,chatBody:L,groupChat:I["a"]},props:{sop_id:{type:[Number,String],default:function(){return 0}},is_chat:{type:[String,Number],default:function(){return 0}}},computed:{rowSelection:function(){return{selectedRowKeys:this.selectedRowKeys,onChange:this.onSelectChange,columnTitle:" ",hideDefaultSelections:!0}},isDisabled:function(){return this.is_all?0==this.selectedRowKeys.length:0==this.currentSelectedRowKeys.length}},data:function(){return{selectedRowKeys:[],visible:!1,corp_id:localStorage.getItem("corpId")||"",columns:[{title:"执行人",dataIndex:"user_name"},{title:"推送对象",scopedSlots:{customRender:"tnickname"}},{title:"推送内容",scopedSlots:{customRender:"tcontent"}},{dataIndex:"push_time",scopedSlots:{title:"push_time"}},{dataIndex:"action",key:"action",width:120,slots:{title:"customTitle"},scopedSlots:{customRender:"action"}}],chat_data_colum:{title:"推送群聊",scopedSlots:{customRender:"chat_data"},width:200},over_time_colum:{dataIndex:"over_time",scopedSlots:{title:"over_time"}},chooseUserNum:0,chooseDepartmentNum:0,pushTime:null,is_over:0,name:"",user_ids:[],stime:"",etime:"",is_all:0,all_msg:[],showModalDepartment:!1,userList:[],list:[],page_size:10,count:0,page:1,isLoading:!0,chatVisible:!1,allCheck:!1,currentSelectedRowKeys:[]}},watch:{visible:{handler:function(t){t&&(this.is_all=0,this.selectedRowKeys=[],this.clearSelect(1))},immediate:!0},is_chat:{handler:function(t){1==t&&(this.columns[0].title="群主",this.columns[0].dataIndex="ownerName",this.columns[1]=this.chat_data_colum)},immediate:!0},is_over:{handler:function(t){0==t?this.columns=M.a.filter(this.columns,(function(t){return"over_time"!==t.dataIndex})):1==t&&this.columns.splice(4,0,this.over_time_colum)},immediate:!0},selectedRowKeys:{handler:function(t){this.isAllSelect()}}},methods:{moment:d.a,isAllSelect:function(){this.currentSelectedRowKeys=M.a.intersection(this.selectedRowKeys,M.a.map(this.list,"msg_id")),this.is_all?this.selectedRowKeys.length==this.all_msg.length?this.allCheck=!0:this.allCheck=!1:this.currentSelectedRowKeys.length==this.list.length&&this.list.length>0?this.allCheck=!0:this.allCheck=!1},allCheckChangeHandle:function(){if(this.is_all)this.allCheck?this.selectedRowKeys=this.all_msg:this.selectedRowKeys=M.a.difference(this.selectedRowKeys,M.a.map(this.list,"msg_id"));else if(this.allCheck){var t=M.a.intersection(this.all_msg,M.a.map(this.list,"msg_id")),e=M.a.union(this.selectedRowKeys,t);this.selectedRowKeys=e}else this.selectedRowKeys=M.a.difference(this.selectedRowKeys,M.a.map(this.list,"msg_id")),this.currentSelectedRowKeys=[];this.currentSelectedRowKeys=M.a.intersection(this.selectedRowKeys,M.a.map(this.list,"msg_id"))},_initData:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(){var e,a=this,s=arguments;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=s.length>0&&void 0!==s[0]?s[0]:"",e&&(this.page=e),this.isLoading=!0,t.abrupt("return",new Promise(function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(s,i){var r,n,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r={corp_id:a.corp_id,sop_id:a.sop_id,is_over:a.is_over,name:a.name,user_ids:a.user_ids,stime:a.stime,etime:a.etime,page:e||a.page,page_size:a.page_size},t.next=3,a.axios.post("work-sop/sop".concat(1==a.is_chat?"-chat":"","-msg-list"),r);case 3:n=t.sent,o=n.data,a.isLoading=!1,0==o.error?(a.list=o.data.list,a.count=1*o.data.count,a.all_msg=M.a.map(o.data.all_msg,(function(t){return t+""})),a.isAllSelect()):a.$message.error(o.error_msg);case 7:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}()));case 4:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),allCheckChange:function(t){this.allCheck=t.target.checked,this.allCheckChangeHandle()},sopMsgSetOver:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(e){var a,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.axios.post("work-sop/sop-msg-set-over",{corp_id:this.corp_id,msg_id:e});case 2:a=t.sent,s=a.data,0==s.error&&(this.$message.success("操作成功"),this._initData());case 5:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),_sopMsgRemind:function(t){var e=this;return 0==t.length?this.$message.error("至少选择一项"):new Promise(function(){var a=Object(o["a"])(regeneratorRuntime.mark((function a(s,i){var r,n,o;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return r={corp_id:e.corp_id,msg_ids:t},a.next=3,e.axios.post("work-sop/sop-msg-remind",r);case 3:n=a.sent,o=n.data,0==o.error?e.$message.success("操作成功"):e.$message.error(o.error_msg);case 6:case"end":return a.stop()}}),a)})));return function(t,e){return a.apply(this,arguments)}}())},showDepartmentList:function(){this.$refs.user.rightIdList=JSON.parse(JSON.stringify(this.user_ids)),this.$refs.user.rightList=JSON.parse(JSON.stringify(this.userList)),this.showModalDepartment=!0},modalVisibleChange:function(t,e,a,s,i){"ok"==t&&(e.length>0?(this.user_ids=JSON.parse(JSON.stringify(e)),this.userList=JSON.parse(JSON.stringify(i)),this.chooseUserNum=a,this.chooseDepartmentNum=s):(this.user_ids=[],this.userList=[],this.chooseUserNum=0,this.chooseDepartmentNum=0)),this.showModalDepartment=!1},clearSelect:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";this.name="",this.stime="",this.etime="",this.chooseUserNum=0,this.chooseDepartmentNum=0,this.pushTime=null,this.user_ids=[],this.userList=[],this._initData(t)},disabledDate:function(t){return t&&t>d()().endOf("day")},onChangeAngePicker:function(t,e){this.stime=e[0],this.etime=e[1]},onSelectChange:function(t){this.selectedRowKeys=t},onShowSizeChange:function(t,e){this.page=t,this.page_size=e,this._initData()},changePage:function(t,e){this.page=t,this.page_size=e,this._initData()},paneCallback:function(t){this.is_over=t,this.page=1,this.clearSelect()},showModal:function(){this.visible=!0},handleOk:function(t){this.visible=!1},handleCancel:function(t){this.visible=!1},isAllChange:function(t){this.is_all=t,this.isAllSelect()}}},V=z,P=(a("8026"),Object(b["a"])(V,c,p,!1,null,"6f5bf639",null)),U=P.exports,B=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("a-drawer",{attrs:{title:"查看详情",placement:"right",visible:t.visible,keyboard:!1},on:{close:t.onClose}},[a("div",[a("a-spin",{attrs:{tip:"Loading...",size:"large",spinning:t.isLoading}},[a("div",{staticClass:"m-20 px-30 py-10 bg-white mb-20"},[a("div",{staticClass:"text-16 font-bold pb-10"},[t._v("基本信息")]),a("div",[a("div",{staticClass:"flex items-center py-10 text-gray-900"},[a("div",{staticClass:"w-120 text-right "},[t._v("创建人：")]),a("div",{},[t._v(t._s(t.detailData.creat_name))])]),t.detailData.is_chat?a("div",{staticClass:"flex py-15 text-gray-900 items-center"},[a("div",{staticClass:"w-120 text-right flex-none"},[t._v(" 已选群聊：")]),a("div",{staticClass:"flex flex-wrap"},t._l(t.detailData.chat_data,(function(t,e){return a("div",{key:e,staticClass:"mr-10 py-5"},[a("div",{staticClass:"flex"},[a("chatBody",{attrs:{chat_item:t}})],1)])})),0)]):a("div",[a("div",{staticClass:"flex py-10 text-gray-900 items-center"},[a("div",{staticClass:"w-120 text-right flex-none"},[t._v(" 执行人：")]),a("div",{staticClass:"flex flex-wrap"},t._l(t.detailData.user_names,(function(e,s){return a("div",{key:s,staticClass:"py-5"},["title"==e.scopedSlots.title?a("div",[a("a-tag",{attrs:{color:"blue"}},[t._v(t._s(e.title))])],1):t._e(),"custom"==e.scopedSlots.title?a("div",[a("a-tag",{attrs:{color:"orange"}},[t._v(t._s(e.title))])],1):t._e()])})),0)]),2==t.detailData.type?a("div",{staticClass:"flex items-center py-15 text-gray-900"},[a("div",{staticClass:"w-120 text-right "},[t._v("跟进状态：")]),a("div",{},[t._v(t._s(t.detailData.follow_name))])]):t._e()])]),a("div",{staticClass:"text-16 font-bold pb-30 pt-30"},[t._v("推送内容")]),a("div",[a("rulesList",{attrs:{is_chat:t.detailData.is_chat,follow_name:t.detailData.follow_name,type:t.detailData.type,rulesData:t.detailData.timeData,is_edit:!1},on:{executeHandle:t.executeHandle}})],1)])])],1)]),a("executeDrawer",{ref:"executeDrawer",attrs:{is_chat:t.detailData.is_chat,sop_id:t.sop_id,sop_time_id:t.sop_time_id}}),a("div",{on:{click:function(e){t.visible=!0}}},[t._t("default")],2)],1)},E=[],G=a("4ac2"),$=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{},[a("a-drawer",{attrs:{title:"员工执行情况",placement:"right",visible:t.visible,w:"",o:"",keyboard:!1},on:{close:t.onClose}},[a("div",{staticClass:" "},[a("a-spin",{attrs:{tip:"Loading...",size:"large",spinning:t.isLoading}},[a("div",{staticClass:"p-20 bg-white"},[a("div",{staticClass:"flex items-center flex-wrap"},[a("div",{staticClass:"flex items-center mr-10 py-10"},[a("div",{staticClass:"pr-10"},[t._v("执行人:")]),a("div",[a("a-button",{staticClass:"w-200",on:{click:t.showDepartmentList}},[t.chooseUserNum+t.chooseDepartmentNum>0?a("span",[t._v("已选择"+t._s(t.chooseUserNum)+"名成员")]):a("span",[t._v(t._s(0==t.is_chat?"选择部门成员":"选择群主"))])])],1)]),a("div",{staticClass:"mr-10 py-10"},[a("a-button",{attrs:{type:"primary"},on:{click:function(e){return t._initData(1)}}},[t._v("查找")])],1),a("div",{staticClass:"mr-30 py-10"},[a("a-button",{on:{click:function(e){return t.clearSelect(1)}}},[t._v("清空")])],1)]),a("div",{},[a("a-table",{attrs:{columns:t.columns,"data-source":t.list,rowKey:"user_id",pagination:!1},scopedSlots:t._u([{key:"over_status",fn:function(e,s){var i=s.not_over_num,r=s.over_num;return a("div",{staticClass:"flex items-center"},[a("div",{staticClass:"text-blue-501"},[t._v(t._s(i)+"/"+t._s(r))])])}},{key:"action",fn:function(e,s){var i=s.user_id,r=s.user_name;return a("div",{staticClass:"flex items-center"},[a("div",{staticClass:"text-blue-501 cursor-pointer",on:{click:function(e){return t.lookExecuteDetailsDrawer(i,r)}}},[t._v("客户明细")])])}}])})],1)]),t.count>0?a("div",{staticClass:"flex justify-between py-20 px-20"},[a("div",[a("span",[t._v("共"),a("span",{staticClass:"text-blue-501"},[t._v(t._s(t.count))]),t._v("条")])]),a("a-pagination",{attrs:{"show-size-changer":"",total:t.count,pageSize:t.page_size},on:{change:t.changePage,showSizeChange:t.onShowSizeChange},model:{value:t.page,callback:function(e){t.page=e},expression:"page"}})],1):t._e(),a("chooseDepartment",{ref:"user",attrs:{show:t.showModalDepartment,callback:t.modalVisibleChange,departmentDisabled:1,is_special:1,is_external:1}})],1)],1)]),a("executeDetailsDrawer",{ref:"executeDetailsDrawer",attrs:{is_chat:t.is_chat,sop_id:t.sop_id,user_ids:t.look_user_ids,user_name:t.look_user_name,sop_time_id:t.sop_time_id}})],1)},Z=[],J=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{},[s("a-drawer",{attrs:{title:t.user_name+"客户明细",width:1100,visible:t.visible,keyboard:!1},on:{close:t.onClose}},[s("template",{slot:"footer"},[s("a-button",{on:{click:t.handleOk}},[t._v("关闭")])],1),s("div",{staticClass:"p-20"},[s("a-spin",{attrs:{tip:"Loading...",size:"large",spinning:t.isLoading}},[s("div",{staticClass:"bg-white"},[s("a-tabs",{attrs:{type:"card"},on:{change:t.paneCallback}},[s("a-tab-pane",{key:0,attrs:{tab:"未完成"}}),s("a-tab-pane",{key:1,attrs:{tab:"已完成"}})],1),s("div",{staticClass:"flex items-center flex-wrap"},[s("div",{staticClass:"flex items-center mr-10 py-10"},[s("div",{staticClass:"pr-10"},[t._v(t._s(t.is_chat?"推送群聊":"推送对象")+":")]),s("div",[s("a-input",{staticClass:"w-120",attrs:{placeholder:t.is_chat?"请输入推送群聊":"请输入推送对象"},model:{value:t.name,callback:function(e){t.name=e},expression:"name"}})],1)]),s("div",{staticClass:"flex items-center mr-10 py-10"},[s("div",{staticClass:"pr-10"},[t._v("推送时间:")]),s("div",[s("a-range-picker",{staticClass:"w-280",attrs:{"disabled-date":t.disabledDate,"show-time":{defaultValue:[t.moment("00:00","HH:mm"),t.moment("23:59","HH:mm")],format:"HH:mm"}},on:{change:t.onChangeAngePicker},model:{value:t.pushTime,callback:function(e){t.pushTime=e},expression:"pushTime"}})],1)]),s("div",{staticClass:"mr-10 py-10"},[s("a-button",{attrs:{type:"primary"},on:{click:function(e){return t._initData(1)}}},[t._v("查找")])],1),s("div",{staticClass:"mr-30 py-10"},[s("a-button",{on:{click:function(e){return t.clearSelect(1)}}},[t._v("清空")])],1)]),s("div",{},[s("a-table",{attrs:{pagination:!1,columns:t.columns,"data-source":t.list,rowKey:"msg_id"},scopedSlots:t._u([{key:"tuser",fn:function(e,i){return t.is_chat?t._e():s("div",{staticClass:"flex items-center"},[s("div",[i.avatar?s("img",{staticClass:"w-40 h-40",attrs:{src:i.avatar,alt:""}}):s("img",{staticClass:"w-40 h-40",attrs:{src:a("4bef"),alt:""}})]),s("div",{staticClass:"text-12 text-gray-900 pl-10 ss-break-all ss-ellipsis-1"},[t._v(t._s(i.nickname))]),s("div",{class:null!=i.corp_name?"corp-name":"wx-name"},[null!=i.corp_name?s("div",{staticClass:"ss-break-all ss-ellipsis-1"},[t._v("@"+t._s(e.corp_name)+"\n\t\t\t\t\t\t\t\t\t")]):s("div",{staticClass:"ss-break-all ss-ellipsis-1"},[t._v("@微信")])]),"男性"==i.gender?s("a-icon",{staticStyle:{color:"#427EBA"},attrs:{type:"man"}}):t._e(),"女性"==i.gender?s("a-icon",{staticStyle:{color:"#ED4997"},attrs:{type:"woman"}}):t._e()],1)}},{key:"chat_data",fn:function(e,a){var i=a.avatarData,r=a.member_num,n=a.name,o=a.ownerName;return t.is_chat?s("div",{},[s("div",{},[s("chatBody",{attrs:{chat_item:{avatarData:i,member_num:r,name:n,ownerName:o}}})],1)]):t._e()}},{key:"action",fn:function(e,a,i){var r=a.msg_id,n=a.is_over,o=a.can_over;return 0==n?s("div",{staticClass:"flex items-center"},[s("div",{staticClass:"text-blue-501 cursor-pointer mr-10",on:{click:function(e){return t._sopMsgRemind([r])}}},[t._v("提醒")]),1==o?s("div",{staticClass:"text-blue-501 cursor-pointer",on:{click:function(e){return t.sopMsgSetOver(r)}}},[t._v("完成")]):t._e()]):t._e()}}],null,!0)},[s("div",{attrs:{slot:"push_time"},slot:"push_time"},[t._v("\n\t\t\t\t\t\t\t\t推送时间\n\t\t\t\t\t\t\t\t"),s("a-tooltip",{attrs:{placement:"bottom"}},[s("template",{slot:"title"},[s("span",[t._v("根据后台所设置的提醒时间，需要推送给该客户的时间点，例如企业成员2月1日新添加客户，后台所设置的提醒时间为1天后8:00提醒推送，那么推送时间则为2月2日8:00。")])]),s("a-icon",{staticClass:"ml-5",attrs:{type:"question-circle"}})],2)],1),s("div",{attrs:{slot:"over_time"},slot:"over_time"},[t._v("\n\t\t\t\t\t\t\t\t完成时间\n\t\t\t\t\t\t\t\t"),s("a-tooltip",{attrs:{placement:"bottom"}},[s("template",{slot:"title"},[s("span",[t._v("执行人对该条推送内容进行手动操作点击【完成】按钮的时间。")])]),s("a-icon",{staticClass:"ml-5",attrs:{type:"question-circle"}})],2)],1),0==t.is_over?s("div",{attrs:{slot:"customTitle"},slot:"customTitle"},[s("div",[t._v("操作")])]):t._e()])],1)],1),t.count>0?s("div",{staticClass:"flex justify-between py-20 px-20"},[s("div",[s("span",[t._v("共"),s("span",{staticClass:"text-blue-501"},[t._v(t._s(t.count))]),t._v("条")])]),s("a-pagination",{attrs:{"show-size-changer":"",total:t.count,pageSize:t.page_size},on:{change:t.changePage,showSizeChange:t.onShowSizeChange},model:{value:t.page,callback:function(e){t.page=e},expression:"page"}})],1):t._e()])],1)],2)],1)},H=[],Q={name:"executeDetailsDrawer",components:{chatBody:L},props:{sop_id:{type:Number,default:function(){return 0}},sop_time_id:{type:Number,default:function(){return 0}},user_ids:{type:Array,default:function(){return[]}},user_name:{type:String,default:function(){return""}},is_chat:{type:[String,Number],default:function(){return 0}}},data:function(){return{visible:!1,corp_id:localStorage.getItem("corpId")||"",columns:[{title:"推送对象",scopedSlots:{customRender:"tuser"}},{dataIndex:"push_time",scopedSlots:{title:"push_time"}},{dataIndex:"action",key:"action",width:80,slots:{title:"customTitle"},scopedSlots:{customRender:"action"}}],chat_data_colum:{title:"推送群聊",scopedSlots:{customRender:"chat_data"},width:200},over_time_colum:{dataIndex:"over_time",scopedSlots:{title:"over_time"}},pushTime:null,name:"",stime:"",etime:"",is_over:0,list:[],page_size:10,count:0,page:1,isLoading:!0}},watch:{is_chat:{handler:function(t){1==t&&(this.columns[0]=this.chat_data_colum)},immediate:!0},visible:{handler:function(t){t&&this.clearSelect(1)},immediate:!0},is_over:{handler:function(t){0==t?this.columns=_.filter(this.columns,(function(t){return"over_time"!==t.dataIndex})):1==t&&this.columns.splice(2,0,this.over_time_colum)},immediate:!0}},mounted:function(){},methods:{moment:d.a,_initData:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(){var e,a=this,s=arguments;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=s.length>0&&void 0!==s[0]?s[0]:"",e&&(this.page=e),t.abrupt("return",new Promise(function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(s,i){var r,n,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a.isLoading=!0,r={corp_id:a.corp_id,sop_id:a.sop_id,is_over:a.is_over,name:a.name,user_ids:a.user_ids,stime:a.stime,etime:a.etime,sop_time_id:a.sop_time_id,page:e||a.page,page_size:a.page_size},t.next=4,a.axios.post("work-sop/sop".concat(1==a.is_chat?"-chat":"","-msg-list"),r);case 4:n=t.sent,o=n.data,a.isLoading=!1,0==o.error?(a.list=o.data.list,a.count=1*o.data.count):a.$message.error(o.error_msg);case 8:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}()));case 3:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),sopMsgSetOver:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(e){var a,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.axios.post("work-sop/sop-msg-set-over",{corp_id:this.corp_id,msg_id:e});case 2:a=t.sent,s=a.data,0==s.error&&(this.$message.success("操作成功"),this._initData());case 5:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),_sopMsgRemind:function(t){var e=this;return new Promise(function(){var a=Object(o["a"])(regeneratorRuntime.mark((function a(s,i){var r,n,o;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return r={corp_id:e.corp_id,msg_ids:t},a.next=3,e.axios.post("work-sop/sop-msg-remind",r);case 3:n=a.sent,o=n.data,0==o.error?e.$message.success("操作成功"):e.$message.error(o.error_msg);case 6:case"end":return a.stop()}}),a)})));return function(t,e){return a.apply(this,arguments)}}())},paneCallback:function(t){this.is_over=t,this.page=1,this.clearSelect()},disabledDate:function(t){return t&&t>d()().endOf("day")},onChangeAngePicker:function(t,e){this.stime=e[0],this.etime=e[1]},clearSelect:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";this.stime="",this.etime="",this.name="",this.pushTime=null,this._initData(t)},onShowSizeChange:function(t,e){this.page=t,this.page_size=e,this._initData()},changePage:function(t,e){this.page=t,this.page_size=e,this._initData()},handleOk:function(t){this.callback("cancel")},onClose:function(){this.visible=!1}}},Y=Q,K=(a("2bcf"),Object(b["a"])(Y,J,H,!1,null,"0e931554",null)),W=K.exports,X={name:"detailDrawer",components:{ChooseDepartment:l["a"],executeDetailsDrawer:W},props:{sop_id:{type:Number,default:function(){return 0}},sop_time_id:{type:Number,default:function(){return 0}},is_chat:{type:[String,Number],default:function(){return 0}}},data:function(){return{visible:!1,corp_id:localStorage.getItem("corpId")||"",detailData:{},user_ids:[],userList:[],user_name:"",showModalDepartment:!1,columns:[{title:"执行人",dataIndex:"user_name"},{title:"完成情况(未完成/已完成)",scopedSlots:{customRender:"over_status"}},{title:"操作",scopedSlots:{customRender:"action"}}],look_user_ids:[],look_user_name:"",chooseUserNum:0,chooseDepartmentNum:0,list:[],page_size:10,count:0,page:1,isLoading:!0}},watch:{visible:{handler:function(t){t&&this.clearSelect(1)},immediate:!0}},methods:{_initData:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(){var e,a=this,s=arguments;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=s.length>0&&void 0!==s[0]?s[0]:"",e&&(this.page=e),t.abrupt("return",new Promise(function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(s,i){var r,n,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a.isLoading=!0,r={corp_id:a.corp_id,sop_time_id:a.sop_time_id,user_ids:a.user_ids,page:e||a.page,page_size:a.page_size},t.next=4,a.axios.post("work-sop/sop-time-user-list",r);case 4:n=t.sent,o=n.data,a.isLoading=!1,0==o.error?(a.list=o.data.list,a.count=1*o.data.count):a.$message.error(o.error_msg);case 8:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}()));case 3:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),lookExecuteDetailsDrawer:function(t,e){this.look_user_ids=[t],this.look_user_name=e,this.$refs.executeDetailsDrawer.visible=!0},showDepartmentList:function(){this.$refs.user.rightIdList=JSON.parse(JSON.stringify(this.user_ids)),this.$refs.user.rightList=JSON.parse(JSON.stringify(this.userList)),this.showModalDepartment=!0},modalVisibleChange:function(t,e,a,s,i){"ok"==t&&(e.length>0?(this.user_ids=JSON.parse(JSON.stringify(e)),this.userList=JSON.parse(JSON.stringify(i)),this.chooseUserNum=a,this.chooseDepartmentNum=s):(this.user_ids=[],this.userList=[],this.chooseUserNum=0,this.chooseDepartmentNum=0)),this.showModalDepartment=!1},clearSelect:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";this.user_ids=[],this.userList=[],this.chooseUserNum=0,this.chooseDepartmentNum=0,this._initData(t)},onShowSizeChange:function(t,e){this.page=t,this.page_size=e,this._initData()},changePage:function(t,e){this.page=t,this.page_size=e,this._initData()},onClose:function(){this.visible=!1}}},q=X,tt=(a("1044"),Object(b["a"])(q,$,Z,!1,null,"40089244",null)),et=tt.exports,at={name:"detailDrawer",components:{rulesList:G["a"],executeDrawer:et,chatBody:L},props:{sop_id:{type:Number,default:function(){return 0}},is_chat:{type:[String,Number],default:function(){return 0}}},data:function(){return{visible:!1,corp_id:localStorage.getItem("corpId")||"",sop_time_id:0,detailData:{},isLoading:!0,member_num:0}},watch:{visible:{handler:function(t){var e=this;t&&this._sopDetail().then((function(t){2==t.type&&0==t.is_all&&e._taskTagMemberNum(t.task_id)}))},immediate:!0}},methods:{_taskTagMemberNum:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(e){var a=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise(function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(s,i){var r,n,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r={corp_id:a.corp_id,task_id:e},t.next=3,a.axios.post("work-sop/task-tag-member-num",r);case 3:n=t.sent,o=n.data,0==o.error?a.member_num=o.data.member_num:a.$message.error(o.error_msg);case 6:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}()));case 1:case"end":return t.stop()}}),t)})));function e(e){return t.apply(this,arguments)}return e}(),_sopDetail:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(){var e=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise(function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(a,s){var i,r,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.isLoading=!0,i={corp_id:e.corp_id,sop_id:e.sop_id},t.next=4,e.axios.post("work-sop/sop-detail",i);case 4:r=t.sent,n=r.data,e.isLoading=!1,0==n.error?(e.detailData=n.data.sopInfo,a(e.detailData)):e.$message.error(n.error_msg);case 8:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}()));case 1:case"end":return t.stop()}}),t)})));function e(){return t.apply(this,arguments)}return e}(),executeHandle:function(t){this.sop_time_id=1*t.sop_time_id,this.$refs.executeDrawer.visible=!0},onClose:function(){this.visible=!1}}},st=at,it=(a("acf8"),Object(b["a"])(st,B,E,!1,null,"7ef8cc2e",null)),rt=it.exports;function nt(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,s)}return a}function ot(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?nt(a,!0).forEach((function(e){Object(r["a"])(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):nt(a).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var lt={name:"sopList",components:{overConditionPop:U,detailDrawer:rt,ChooseDepartment:l["a"],chatBody:L,VNodes:{functional:!0,render:function(t,e){return e.props.vnodes}}},props:{is_chat:{type:[Number,String],default:function(){return 0}},type:{type:[Number,String],default:function(){return""}}},data:function(){return{types:[{text:"新客培育",value:1},{text:"客户生命周期",value:2}],columns:[{title:"规则名称",scopedSlots:{customRender:"titles"},width:250},{title:"创建人",dataIndex:"creat_name",width:100},{title:"执行人",dataIndex:"user_names",scopedSlots:{customRender:"user_names"},width:300},{title:"SOP状态",type:"status",scopedSlots:{customRender:"status"},width:120},{title:"创建时间",dataIndex:"create_times",scopedSlots:{customRender:"create_times"},width:150},{title:"操作",scopedSlots:{customRender:"action"},width:100}],chat_data_colum:{title:"群聊",scopedSlots:{customRender:"chat_data"},width:300},follow_name:{title:"跟进状态",dataIndex:"follow_name",width:200},list:[],showModalDepartment:!1,corp_id:localStorage.getItem("corpId")||"",sub_id:[],user_ids:[],title:"",status:-1,stime:"",etime:"",page:1,page_size:10,count:0,chooseUserNum0:0,chooseUserNum1:0,chooseDepartmentNum0:0,chooseDepartmentNum1:0,sopStatus:[{value:-1,text:"全部"},{value:1,text:"开启"},{value:0,text:"关闭"}],createTime:null,isLoading:!0,userList0:[],userList1:[],user_page:1,subUserList:[],is_loading_user:!0,user_is_more:!0,chooseDepartmentType:0,is_external:0,is_special:0,follow_id:"",follows:[],is_show_status:!0}},created:function(){var t=this;this.$nextTick((function(){t.getData()}))},filters:{user_name_len:function(t){return[M.a.reject(t,(function(t){return"title"==t.scopedSlots.title})).length,M.a.reject(t,(function(t){return"custom"==t.scopedSlots.title})).length]}},methods:{moment:d.a,getData:function(){1==this.is_chat&&(this.columns[2]=this.chat_data_colum),2==this.type?(this.getFollowStatus(),this.columns.splice(3,0,this.follow_name)):1==this.type&&M.a.remove(this.columns,(function(t){return"follow_name"==t.dataIndex}));var t=localStorage.getItem("permissionButton").split(",");-1==t.indexOf("all")&&(0==this.is_chat&&-1==t.indexOf("customSopList-status")||1==this.is_chat&&-1==t.indexOf("chatSopList-status"))&&(this.is_show_status=!1),this.clearSelect()},disabledDate:function(t){return t&&t>d()().endOf("day")},getFollowStatus:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(){var e,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.axios.post("custom-field/follow",{uid:localStorage.getItem("uid"),status:1});case 2:e=t.sent,a=e.data,0!=a.error?this.$message.error(a.error_msg):this.follows=[{title:"全部",id:""}].concat(Object(n["a"])(a.data.follow));case 5:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),syncFollowUser:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(){var e,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.isLoading=!0,this.$message.info("已进入后台刷新中，请耐心等待..."),t.next=4,this.axios.post("work-follow-user/refresh-follow-user",{suite_id:1,corp_id:this.corp_id});case 4:e=t.sent,a=e.data,0!=a.error?(this.$message.destroy(),this.$message.error(a.error_msg),this.isLoading=!1):(this.$message.destroy(),this.$message.success("已进入后台刷新中，请稍后重试！"),this.isLoading=!0,this._initData(1));case 7:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),_initData:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(){var e,a,s=this,i=arguments;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e=i.length>0&&void 0!==i[0]?i[0]:"",a=!(i.length>1&&void 0!==i[1])||i[1],1==e&&(this.page=e),this.isLoading=!0,0!=this.is_chat||""!=this.type){t.next=6;break}return t.abrupt("return");case 6:return t.abrupt("return",new Promise(function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(i,r){var n,o,l;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n={corp_id:s.corp_id,type:s.type,title:s.title,sub_id:s.sub_id,user_ids:s.user_ids,status:s.status,stime:s.stime,etime:s.etime,page:e||s.page,page_size:s.page_size,is_chat:s.is_chat},2==s.type&&0==s.is_chat&&(n=ot({},n,{follow_id:s.follow_id})),t.next=4,s.axios.post("work-sop/sop-list",n);case 4:o=t.sent,l=o.data,s.isLoading=!1,0==l.error?(s.list=l.data.list,s.count=1*l.data.count,a&&s.toTop()):s.$message.error(l.error_msg);case 8:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}()));case 7:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),_sopStatusSet:function(t,e){var a=this;return new Promise(function(){var s=Object(o["a"])(regeneratorRuntime.mark((function s(i,r){var n,o,l;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return n={corp_id:a.corp_id,sop_id:t,status:e},s.next=3,a.axios.post("work-sop/sop-status-set",n);case 3:o=s.sent,l=o.data,0==l.error?(a._initData(a.page,!1),2==e&&a.$message.success("删除成功")):a.$message.error(l.error_msg);case 6:case"end":return s.stop()}}),s)})));return function(t,e){return s.apply(this,arguments)}}())},onChangeStatus:function(t,e){var a=t?1:0;this._sopStatusSet(e,a)},delHandle:function(t){var e=this;this.$confirm({title:"确定删除吗？",content:"",okText:"确认",cancelText:"取消",onOk:function(){e._sopStatusSet(t,2)}})},changePage:function(t,e){this.page=t,this.page_size=e,this._initData()},toCustomSopAddRules:function(t){var e="";e=this.is_chat?"/chatSop/addRules":"/sop/addRules";e=t?"".concat(e,"?sop_id=").concat(t,"&type=").concat(this.type):"".concat(e,"?type=").concat(this.type);this.$router.push(e)},onChangeAngePicker:function(t,e){this.stime=e[0],this.etime=e[1]},clearSelect:function(){this.title="",this.status=-1,this.stime="",this.etime="",this.chooseUserNum0=0,this.chooseUserNum1=0,this.chooseDepartmentNum0=0,this.chooseDepartmentNum1=0,this.createTime=null,this.follow_id="",this.sub_id=[],this.user_ids=[],this.userList0=[],this.userList1=[],this._initData(1)},showDepartmentList:function(t,e){this.chooseDepartmentType=t,this.is_external=t,this.is_special=e,0==this.chooseDepartmentType?(this.$refs.user.rightIdList=JSON.parse(JSON.stringify(this.sub_id)),this.$refs.user.rightList=JSON.parse(JSON.stringify(this.userList0))):(this.$refs.user.rightIdList=JSON.parse(JSON.stringify(this.user_ids)),this.$refs.user.rightList=JSON.parse(JSON.stringify(this.userList1))),this.showModalDepartment=!0},modalVisibleChange:function(t,e,a,s,i){"ok"==t&&(e.length>0?(0==this.chooseDepartmentType?this.sub_id=JSON.parse(JSON.stringify(e)):this.user_ids=JSON.parse(JSON.stringify(e)),this["userList"+this.chooseDepartmentType]=JSON.parse(JSON.stringify(i)),this["chooseUserNum"+this.chooseDepartmentType]=a,this["chooseDepartmentNum"+this.chooseDepartmentType]=s):(0==this.chooseDepartmentType?this.sub_id=[]:this.user_ids=[],this.user_ids=[],this["userList"+this.chooseDepartmentType]=[],this["chooseUserNum"+this.chooseDepartmentType]=0,this["chooseDepartmentNum"+this.chooseDepartmentType]=0)),this.showModalDepartment=!1},onShowSizeChange:function(t,e){this.page=t,this.page_size=e,this._initData()},toTop:function(){var t=this;this.$nextTick((function(){try{t.$refs.DOM.scrollTo(100,0)}catch(e){}}))},chooseType:function(t){var e=this;this.$emit("update:type",t),this.$nextTick((function(){e.getData()}))}}},ct=lt,pt=(a("57de"),Object(b["a"])(ct,s,i,!1,null,"ae3bcd9e",null));e["a"]=pt.exports}}]);