(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-60074f5d"],{"0217":function(t,e,a){"use strict";var i=a("548a"),s=a.n(i);s.a},"058a":function(t,e,a){"use strict";var i=a("b27d"),s=a.n(i);s.a},"060e":function(t,e,a){e=t.exports=a("2350")(!1),e.push([t.i,".w-375[data-v-656b7b16]{width:375px}.ss-prev-box[data-v-656b7b16]{background:#f7f7f7;height:550px;overflow:auto}.ss-sz-time[data-v-656b7b16] .ant-radio-wrapper{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center}[data-v-656b7b16] .ant-modal{max-width:1100px!important}.ss-sop-pop-tip[data-v-656b7b16]{background:#fff2db}.ss-radio-btn[data-v-656b7b16] .ant-radio{display:none!important}.ss-radio-btn[data-v-656b7b16] span.ant-radio+*{padding:0!important}",""])},"0b22":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("a-spin",{staticClass:"h-full",attrs:{tip:"Loading...",size:"large",spinning:t.isLoading}},[i("div",{staticClass:"ss-scroll-list w-full"},[i("div",{staticClass:"flex items-center justify-between bg-white px-30 py-11 relative b-line text-16"},[i("div",{staticClass:"flex items-center"},[i("div",{staticClass:"text-gray-900 text-16"},[t._v(t._s(t.sop_id?"编辑SOP规则":"添加SOP规则"))])]),i("a-button",{attrs:{type:"primary",icon:"rollback"},on:{click:function(e){return t.goBack(0)}}},[t._v("返回列表")])],1),i("div",{staticClass:"mx-20 p-30 bg-white mt-20"},[i("div",{staticClass:"text-16 font-bold pb-20 relative b-line mb-20  text-gray-900"},[t._v("规则基本信息")]),i("div",{staticClass:"flex items-center py-15"},[i("div",{staticClass:"pr-20 w-150 text-right"},[i("span",{staticClass:"text-red-501 text-12"},[t._v("*")]),t._v("规则名称:")]),i("a-input",{staticClass:"w-300",attrs:{placeholder:"请输入规则名称",maxLength:20},model:{value:t.detailData.title,callback:function(e){t.$set(t.detailData,"title",e)},expression:"detailData.title"}}),i("div",{staticClass:"text-gray-501 pl-5"},[t._v(t._s(t.detailData.title.length)+"/20")])],1),t.detailData.is_chat?t._e():i("div",[i("div",{staticClass:"flex items-center py-15"},[i("div",{staticClass:"pr-20 w-150 text-right"},[i("span",{staticClass:"text-red-501 text-12"},[t._v("*")]),t._v("选择执行人:")]),i("div",[i("a-button",{on:{click:t.showDepartmentList}},[t.chooseUserNum+t.chooseDepartmentNum>0?i("span",[t._v("已选择"+t._s(t.chooseUserNum)+"名成员"+t._s(t.chooseDepartmentNum)+"个部门 ")]):i("span",[t._v("选择部门成员")])])],1)]),2==t.detailData.type?i("div",[i("div",{staticClass:"flex items-center py-15"},[i("div",{staticClass:"pr-20 w-150 text-right"},[i("span",{staticClass:"text-red-501 text-12"},[t._v("*")]),t._v("跟进状态:")]),i("a-select",{staticClass:"w-200",attrs:{showSearch:"",allowClearf:"",placeholder:"请选择跟进状态",optionFilterProp:"children"},model:{value:t.detailData.follow_id,callback:function(e){t.$set(t.detailData,"follow_id",e)},expression:"detailData.follow_id"}},[t._l(t.follows,(function(e,a){return[i("a-select-option",{attrs:{value:e.id}},[t._v("\n\t\t\t\t\t\t\t\t\t"+t._s(e.title)+"\n\t\t\t\t\t\t\t\t")])]}))],2)],1),0==t.detailData.is_all?i("div",[i("div",{staticClass:"ml-150"},[i("div",{staticClass:"py-10 flex items-center flex-wrap"},[i("div",{staticClass:"text-14 text-blue-501 mr-20 cursor-pointer",on:{click:function(e){t.isShowConditionPop=!0,t.isGet=!0}}},[t._v("\n\t\t\t\t\t\t\t\t\t选择已有标签\n\t\t\t\t\t\t\t\t")]),t.tags.length>0?i("div",[i("div",{staticClass:"text-12 text-gray-501 mr-10"},[t._v("最近使用")]),i("div",{staticClass:"flex flex-wrap items-center"},t._l(t.tags,(function(e,a){return i("div",{key:a,staticClass:"text-gray-501 bg-gray-201 br1000 px-20 py-5 mr-10 my-5"},[t._v("\n\t\t\t\t\t\t\t\t\t\t\t"+t._s(e.tagname)+"\n\t\t\t\t\t\t\t\t\t\t")])})),0)]):t._e(),i("a-button",{on:{click:function(e){t.isShowConditionPop=!0,t.isGet=!1}}},[t._v("添加标签")])],1)]),t.detailData.task_id>0?i("div",{staticClass:"ml-150 flex items-center"},[i("div",{staticClass:"text-white bg-blue-501 br1000 px-20 py-5 mr-10 my-5"},[t._v("\n\t\t\t\t\t\t\t\t"+t._s(t.detailData.task_name)+"\n\t\t\t\t\t\t\t")]),i("div",{staticClass:"pl-5"},[t._v("符合条件约 "),i("span",{staticClass:"text-red-501 font-bold"},[t._v(t._s(t.member_num))]),t._v(" 人\n\t\t\t\t\t\t\t")])]):t._e()]):t._e()]):t._e()]),t.detailData.is_chat?i("div",{staticClass:"flex items-center py-15"},[i("div",{staticClass:"pr-20 w-150 text-right"},[i("span",{staticClass:"text-red-501 text-12"},[t._v("*")]),t._v("选择客户群:")]),i("div",[i("a-button",{on:{click:t.showChatVisible}},[t.detailData.user_ids.length>0?i("span",[t._v("已选择"+t._s(t.detailData.user_ids.length)+"个群")]):i("span",[t._v("选择群聊")])])],1)]):t._e()]),i("div",{staticClass:"mx-20 p-30 bg-white mb-20  "},[i("div",{staticClass:"text-16 font-bold pb-20 relative b-line mb-20 text-gray-900"},[t._v("设置推送周期及内容")]),i("div",{staticClass:"flex items-center"},[t.detailData.is_chat?i("div",{staticClass:"text-gray-900 text-14"},[t._v("设置规则内容后，将会通过应用通知去提醒所选群聊群主发送内容")]):i("div",{staticClass:"text-gray-900 text-14"},[t._v("设置规则后，将会通过应用通知去提醒所选部门成员发送内容")]),i("div",{staticClass:"text-14 text-gray-501 pl-10"},[i("a",{attrs:{target:"_blank",href:1==t.detailData.is_chat?"https://support.qq.com/products/312071/faqs/90125":"https://support.qq.com/products/312071/faqs/90122"}},[t._v("如何发送")])])]),i("div",{staticClass:"mt-30  flex ss-rules-l"},[t.$test.empty(this.detailData.timeData)?t._e():i("div",{staticClass:"ss-rules-l flex flex-col items-center mr-15"},[i("img",{staticClass:"mt-10",attrs:{src:a("5c37"),alt:""}}),i("div",{staticClass:" ss-rules-l-b h-40"})]),i("a-button",{staticClass:"ss-add-btn",on:{click:t.openShowAddRulesPop}},[t._v("+添加内容规则")])],1),i("div",[i("rulesList",{attrs:{is_chat:t.detailData.is_chat,follow_name:t.detailData.follow_name,type:t.detailData.type,rulesData:t.detailData.timeData},on:{updateTimeData:t.updateTimeData}}),i("a-empty",{directives:[{name:"show",rawName:"v-show",value:0==t.detailData.timeData.length,expression:"detailData.timeData.length == 0"}],staticClass:"py-60"},[i("span",{staticClass:"text-gray-501",attrs:{slot:"description"},slot:"description"},[t._v("请添加规则")])])],1),i("div",{staticClass:"sticky bottom-0 z-100 bg-white py-20 t-line"},[i("a-button",{attrs:{type:"primary"},on:{click:t.confirmAddSop}},[t._v("提交")])],1)]),t.isShowAddRulesPop?i("addRulesPop",{ref:"addRulesPop",attrs:{is_chat:t.detailData.is_chat,type:t.detailData.type,follow_name:t.detailData.follow_name,rulesAdd:{time_type:1==t.detailData.is_chat?1:2,time_one:"1",time_two:1==t.detailData.is_chat?"0":"00:00",contentData:[{}]},callback:t.addRulesPopCallback}}):t._e(),t.isShowConditionPop?i("conditionPop",{attrs:{isGet:t.isGet,task_id:t.detailData.task_id,callback:t.conditionPopCallback},on:{delTagHandle:t.delTagHandle}}):t._e(),i("chooseDepartment",{ref:"user",attrs:{show:t.showModalDepartment,callback:t.modalVisibleChange,is_special:1,"is-sop":1,is_external:1,"sop-arr":t.sop_has_user}}),i("groupChat",{attrs:{show:t.chatVisible,chatArr:t.detailData.user_ids,chatArrt:t.chatArr2,isSop:1,is_list:1,isShowGroupOwner:1,callback:t.groupChatCallBack}})],1)])},s=[],r=(a("8e6e"),a("ac6a"),a("456d"),a("bd86")),o=(a("28a5"),a("75fc")),n=(a("96cf"),a("3b8d")),l=a("c1df"),c=a.n(l),p=a("7a4a"),d=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("a-modal",{class:{isGetPopClass:t.isGet},attrs:{title:"添加任务标签",width:1100,visible:!0,cancelText:t.isGet?"删除":"取消"},on:{ok:t.handleOk,cancel:t.handleCancel}},[a("a-spin",{attrs:{tip:"Loading...",size:"large",spinning:t.isLoading}},[a("div",{staticClass:"p-1rem"},[t.isGet?a("a-row",{staticClass:"py-10 relative b-line",attrs:{type:"flex"}},[a("a-col",{attrs:{span:5}},[a("div",{staticClass:"text-right text-gray-900 py-8"},[a("span",{staticClass:"text-red-501"},[t._v("*")]),t._v("任务标签：")])]),a("a-col",{attrs:{span:18}},[t.tags.length>0?a("div",{staticClass:"clearfix"},t._l(t.tags,(function(e,i){return a("div",{key:i,staticClass:"float-left text-gray-501 bg-gray-201 br1000 px-20 py-5 mr-10 my-5 my-5 ss-tag-item cursor-pointer",class:{active:t.chooseItem&&t.chooseItem.tag_id==e.tag_id},on:{click:function(a){return t.chooseTag(e)}}},[a("span",[t._v(t._s(e.tagname))])])})),0):a("div",{staticClass:"py-8"},[t._v("暂无标签")])])],1):a("a-row",{staticClass:"items-center",attrs:{type:"flex"}},[a("a-col",{attrs:{span:5}},[a("div",{staticClass:"text-right text-gray-900"},[a("span",{staticClass:"text-red-501"},[t._v("*")]),t._v("任务标签名称：")])]),a("a-col",{attrs:{span:10}},[a("a-input",{staticClass:"w-200",attrs:{placeholder:"请输入任务标签名称"},model:{value:t.name,callback:function(e){t.name=e},expression:"name"}})],1)],1)],1),a("selectCondition",{attrs:{condition:t.condition,callback:t.getLabelInfo}})],1)],1)},u=[],h=(a("7f7f"),a("ac4d"),a("8a81"),a("c5f6"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"label_box"},[a("a-form-model",{ref:"ruleForm",attrs:{layout:"horizontal",model:t.labelForm}},[a("div",{staticClass:"title"},[a("span",[t._v("目标客户筛选条件")]),a("span",[t._v("（符合条件约"),a("span",{staticStyle:{color:"red"}},[t._v(t._s(t.total))]),t._v("人）")])]),a("a-divider"),a("a-form-model-item",{attrs:{label:"区域","label-col":{span:5},"wrapper-col":{span:10}}},[a("a-cascader",{staticStyle:{width:"195px","text-align":"left"},attrs:{allowClear:!0,options:t.cityData,placeholder:"请选择区域"},on:{change:t.passData},model:{value:t.labelForm.location,callback:function(e){t.$set(t.labelForm,"location",e)},expression:"labelForm.location"}})],1),a("a-form-model-item",{attrs:{label:"性别","label-col":{span:5},"wrapper-col":{span:10}}},[a("a-radio-group",{attrs:{options:[{label:"全部",value:-1},{label:"男",value:1},{label:"女",value:2},{label:"未知",value:3}],"default-value":0},on:{change:t.passData},model:{value:t.labelForm.sex,callback:function(e){t.$set(t.labelForm,"sex",e)},expression:"labelForm.sex"}})],1),t._l(t.selectList,(function(e,i){return a("div",[2!=e.type&&3!=e.type||"性别"==e.label?t._e():a("a-form-model-item",{attrs:{label:e.label,"label-col":{span:5},"wrapper-col":{span:10}}},[a("a-select",{attrs:{showSearch:"",allowClear:"",placeholder:"请选择"+e.label,optionFilterProp:"children",mode:3==e.type?"multiple":"default"},on:{change:t.passData},model:{value:t.labelForm[e.id],callback:function(a){t.$set(t.labelForm,e.id,a)},expression:"labelForm[item.id]"}},[t._l(e.option,(function(e,i){return[a("a-select-option",{attrs:{value:e}},[t._v("\n\t\t\t\t\t\t\t"+t._s(e)+"\n\t\t\t\t\t\t")])]}))],2)],1)],1)})),a("a-form-model-item",{attrs:{label:"绑定店铺","label-col":{span:5},"wrapper-col":{span:10}}},[a("a-select",{attrs:{showSearch:"",allowClear:"",placeholder:"请选择绑定店铺",optionFilterProp:"children"},on:{change:t.passData},model:{value:t.labelForm.signId,callback:function(e){t.$set(t.labelForm,"signId",e)},expression:"labelForm.signId"}},[t._l(t.bindStoreList,(function(e,i){return[a("a-select-option",{attrs:{value:e.key}},[t._v("\n\t\t\t\t\t\t"+t._s(e.username)+"\n\t\t\t\t\t")])]}))],2)],1),a("a-form-model-item",{attrs:{label:"跟进状态","label-col":{span:5},"wrapper-col":{span:10}}},[a("a-select",{attrs:{showSearch:"",allowClear:"",placeholder:"请选择跟进状态",optionFilterProp:"children"},on:{change:t.passData},model:{value:t.labelForm.follow_status,callback:function(e){t.$set(t.labelForm,"follow_status",e)},expression:"labelForm.follow_status"}},[t._l(t.follows,(function(e,i){return[a("a-select-option",{attrs:{value:e.id}},[t._v("\n\t\t\t\t\t\t"+t._s(e.title)+"\n\t\t\t\t\t")])]}))],2)],1),a("a-form-model-item",{attrs:{label:"是否选择公众号粉丝","label-col":{span:5},"wrapper-col":{span:10}}},[a("a-radio-group",{attrs:{options:[{label:"是",value:1},{label:"否",value:0}],"default-value":1},on:{change:t.passData},model:{value:t.labelForm.isPublic,callback:function(e){t.$set(t.labelForm,"isPublic",e)},expression:"labelForm.isPublic"}})],1),a("a-form-model-item",{attrs:{label:"标签","label-col":{span:4},"wrapper-col":{span:20}}},[t.isShowTag?a("corpChooseTag",{attrs:{callback:t.labelCallBack,show_task:0,hasChoose:t.tag_arr}}):t._e()],1)],2)],1)}),m=[],g=a("85d2"),f=a("0cfc"),b={sex:-1,isPublic:0},v={name:"selectCondition",components:{corpChooseTag:f["a"]},props:{user_ids:{type:Array,default:function(){return[]}},condition:{type:Object,default:function(){}},callback:{type:Function,default:null}},watch:{condition:{handler:function(t){this.tag_arr=[],this.condition&&(this.labelForm=this.condition,this.tag_arr=this.condition.tag_arr),this.getStaffNum()},deep:!0}},data:function(){return{labelForm:Object.assign({},b),cityData:g["a"],tag_arr:[],isShowTag:!0,selectList:[],follows:[],bindStoreList:[],total:0,corp_id:localStorage.getItem("corpId")?localStorage.getItem("corpId"):"",isMasterAccount:localStorage.getItem("isMasterAccount")?localStorage.getItem("isMasterAccount"):"",uid:localStorage.getItem("uid")?localStorage.getItem("uid"):"",sub_id:localStorage.getItem("sub_id")?localStorage.getItem("sub_id"):""}},beforeMount:function(){this.getSelectInfo(),this.getFollowStatus(),this.handleChangeSign()},mounted:function(){this.initLabel(),this.getStaffNum()},methods:{initLabel:function(){this.condition&&(this.labelForm=this.condition,this.tag_arr=this.condition.tag_arr)},getSelectInfo:function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(){var e,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.axios.post("custom-field/filter-condition",{uid:localStorage.getItem("uid")?localStorage.getItem("uid"):"",type:0});case 2:e=t.sent,a=e.data,0!=a.error?this.$message.error(a.error_msg):this.selectList=a.data.field;case 5:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),handleChangeSign:function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(e){var a,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.axios.post("third-store/get-merchants",{storeType:[],status:"1",storeName:e,uid:localStorage.getItem("uid"),isAll:1});case 2:a=t.sent,i=a.data,0!=i.error?this.$message.error(i.error_msg):this.bindStoreList=i.data.info;case 5:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),getFollowStatus:function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(){var e,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.axios.post("custom-field/follow",{uid:localStorage.getItem("uid")});case 2:e=t.sent,a=e.data,0!=a.error?this.$message.error(a.error_msg):this.follows=a.data.follow;case 5:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),getStaffNum:function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(){var e,a,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=JSON.parse(JSON.stringify(this.labelForm)),e.user_ids=this.user_ids,e.corp_id=this.corp_id,e.suite_id=1,e.isMasterAccount=this.isMasterAccount,e.uid=this.uid,e.sub_id=this.sub_id,t.next=9,this.axios.post("work-task/task-tag-members",e);case 9:a=t.sent,i=a.data,0!=i.error?this.$message.error(i.error_msg):this.total=i.data.count;case 12:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),labelCallBack:function(t,e){"ok"==t&&(this.tag_arr=e.split(","),""==e.split(",")[0]&&(this.tag_arr=[]),this.labelForm.tag_arr=this.tag_arr,this.callback("ok",this.labelForm))},passData:function(){this.callback("ok",this.labelForm)}}},_=v,x=(a("828e"),a("2877")),y=Object(x["a"])(_,h,m,!1,null,"269d5e34",null),w=y.exports;function k(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,i)}return a}function A(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?k(a,!0).forEach((function(e){Object(r["a"])(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):k(a).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var C={name:"conditionPop",components:{selectCondition:w},props:{isGet:{type:Boolean,default:function(){return!1}},task_id:{type:Number,default:function(){return 0}},callback:{type:Function,default:null}},data:function(){return{corp_id:localStorage.getItem("corpId")||"",name:"",condition:{},tags:[],chooseItem:{},isLoading:!0}},watch:{isGet:{handler:function(t){var e=this;t&&this.taskTags().then((function(){e.isLoading=!1;var t=!0,a=!1,i=void 0;try{for(var s,r=e.tags[Symbol.iterator]();!(t=(s=r.next()).done);t=!0){var o=s.value;o.id==e.task_id&&(e.chooseItem=o,e.condition=o.condition)}}catch(n){a=!0,i=n}finally{try{t||null==r.return||r.return()}finally{if(a)throw i}}})),!t&&(this.isLoading=!1)},immediate:!0}},methods:{handleCancel:function(t){/ant-btn/.test(t.target.className)&&this.isGet?this.taskTagDelHandle():this.callback("cancel")},handleOk:function(){var t=this;return!this.isGet&&this.$test.empty(this.name)?this.$message.warn("标签名称不能为空"):this.isGet&&this.$test.empty(this.chooseItem)?this.$message.warn("请选择一个标签"):this.$test.empty(this.condition)?this.$message.warn("目标客户筛选条件不能为空"):void this.taskTagAdd().then((function(e){t.callback("ok",t.isGet?t.chooseItem:null)}))},getLabelInfo:function(t,e){"ok"==t&&(this.condition=e,console.log(e,"标签选择的集合"))},taskTagDelHandle:function(){var t=this;if(this.$test.empty(this.chooseItem))return this.$message.warn("请选择一个标签");this.$confirm({title:"确定删除吗？",onOk:function(){t.taskTagDel()}})},taskTagDel:function(){var t=this;return new Promise(function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(a,i){var s,r,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return s={corp_id:t.corp_id,task_tag_id:t.chooseItem.task_tag_id},e.next=3,t.axios.post("work-task/task-tag-del",s);case 3:r=e.sent,o=r.data,0==o.error?(t.taskTags(),t.$emit("delTagHandle",t.chooseItem.task_tag_id),t.chooseItem={},t.condition={},t.$message.success("删除成功")):t.$message.error(o.error_msg);case 6:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}())},taskTags:function(){var t=this;return new Promise(function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(a,i){var s,r,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return s={corp_id:t.corp_id,task_id:null,type:0},e.next=3,t.axios.post("work-task/task-tags",s);case 3:r=e.sent,o=r.data,0==o.error?(t.tags=o.data.taskTags,a()):t.$message.error(o.error_msg);case 6:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}())},taskTagAdd:function(){var t=this;return new Promise(function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(a,i){var s,r,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return s={corp_id:t.corp_id,name:t.name,condition:t.condition},t.isGet&&(s=A({},s,{task_tag_id:t.chooseItem.task_tag_id,name:t.chooseItem.tagname})),e.next=4,t.axios.post("work-task/task-tag-add",s);case 4:r=e.sent,o=r.data,0==o.error?a():t.$message.error(o.error_msg);case 7:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}())},chooseTag:function(t){this.chooseItem=t,this.condition=t.condition}}},F=C,S=(a("aa3a"),Object(x["a"])(F,d,u,!1,null,"db0ad3d6",null)),D=S.exports,T=a("4ac2"),I=a("c75b"),O=a("8c10c"),R=a("2ef0"),j=a.n(R);function N(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,i)}return a}function L(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?N(a,!0).forEach((function(e){Object(r["a"])(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):N(a).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var M={name:"customSopAddRules",components:{addRulesPop:p["a"],rulesList:T["a"],ChooseDepartment:I["a"],conditionPop:D,groupChat:O["a"]},data:function(){return{sop_id:0,showModalDepartment:!1,corp_id:localStorage.getItem("corpId")||"",uid:localStorage.getItem("uid"),sub_id:localStorage.getItem("sub_id")||0,isMasterAccount:localStorage.getItem("isMasterAccount"),isShowAddRulesPop:!1,detailData:{type:1,title:"",user_ids:[],is_chat:0,chat_data:[],follow_name:"",is_all:1,task_name:"",task_id:0,no_send_type:0,no_send_stime:"00:00",no_send_etime:"07:00",timeData:[],hasSopUser:[]},rulesAdd:{time_type:2,time_one:0,time_two:0,contentData:[{}]},follows:[],isShowConditionPop:!1,isGet:!1,chooseTag:{},tags:[],userList:[],chooseUserNum:0,chooseDepartmentNum:0,member_num:0,chatVisible:!1,isLoading:!1,sop_has_user:[],chatArr2:[]}},beforeRouteEnter:function(t,e,a){a((function(e){/chatSop/.test(t.path)&&(e.detailData.is_chat=1)}))},watch:{"detailData.type":{handler:function(t){1==t&&this.getFollowStatus(),this.taskTags()},immediate:!0},"detailData.task_id":{handler:function(t){t&&2==this.detailData.type&&this._taskTagMemberNum(t)},immediate:!0},"detailData.follow_id":{handler:function(t){for(var e=0;e<this.follows.length;e++)if(this.follows[e].id==t&&!this.sop_id){this.detailData.follow_name=this.follows[e].title;break}},immediate:!0}},created:function(){this.sop_id=this.$route.query.sop_id||0,this.detailData.type=this.$route.query.type||0,this.sop_id&&this._sopDetail(),this.sopHasUser()},methods:{moment:c.a,_sopDetail:function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(){var e=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise(function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(a,i){var s,r,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.isLoading=!0,s={corp_id:e.corp_id,sop_id:e.sop_id},t.next=4,e.axios.post("work-sop/sop-detail",s);case 4:r=t.sent,o=r.data,e.isLoading=!1,0==o.error?(e.detailData=o.data.sopInfo,e.userList=o.data.sopInfo.user_names,1==e.detailData.is_chat&&(e.chatArr2=o.data.sopInfo.user_ids),0==e.detailData.is_chat&&e.userList.map((function(t){"title"==t.scopedSlots.title?e.chooseDepartmentNum++:"custom"==t.scopedSlots.title&&e.chooseUserNum++}))):e.$message.error(o.error_msg);case 8:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}()));case 1:case"end":return t.stop()}}),t)})));function e(){return t.apply(this,arguments)}return e}(),sopHasUser:function(){var t=this;return new Promise(function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(a,i){var s,r,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return s={corp_id:t.corp_id,type:t.detailData.type},e.next=3,t.axios.post("work-sop/sop-has-user",s);case 3:r=e.sent,o=r.data,0==o.error?t.sop_has_user=o.data.hasSopUser:t.$message.error(o.error_msg);case 6:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}())},_taskTagMemberNum:function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(e){var a=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise(function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(i,s){var r,o,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r={corp_id:a.corp_id,task_id:e},t.next=3,a.axios.post("work-sop/task-tag-member-num",r);case 3:o=t.sent,n=o.data,0==n.error?a.member_num=n.data.member_num:a.$message.error(n.error_msg);case 6:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}()));case 1:case"end":return t.stop()}}),t)})));function e(e){return t.apply(this,arguments)}return e}(),taskTags:function(){var t=this;return new Promise(function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(a,i){var s,r,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return s={corp_id:t.corp_id,task_id:null,type:2},e.next=3,t.axios.post("work-task/task-tags",s);case 3:r=e.sent,o=r.data,0==o.error?(t.tags=o.data.taskTags,a()):t.$message.error(o.error_msg);case 6:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}())},getFollowStatus:function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(){var e,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.axios.post("custom-field/follow",{uid:localStorage.getItem("uid"),status:1});case 2:e=t.sent,a=e.data,0!=a.error?this.$message.error(a.error_msg):this.follows=a.data.follow;case 5:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),delTagHandle:function(t){(this.detailData.task_id=t)&&(this.detailData.task_id=0,this.detailData.task_name="")},isAllChange:function(t){this.detailData.is_all=t.target.value},openShowAddRulesPop:function(){var t=this;this.isShowAddRulesPop=!0,this.$nextTick((function(){t.$refs.addRulesPop.visible=!0}))},showDepartmentList:function(){this.$refs.user.rightIdList=JSON.parse(JSON.stringify(this.detailData.user_ids)),this.$refs.user.rightList=JSON.parse(JSON.stringify(this.userList)),this.showModalDepartment=!0},modalVisibleChange:function(t,e,a,i,s){"ok"==t&&(e.length>0?(this.detailData.user_ids=JSON.parse(JSON.stringify(e)),this.userList=JSON.parse(JSON.stringify(s)),this.chooseUserNum=a,this.chooseDepartmentNum=i):(this.detailData.user_ids=[],this.userList=[],this.chooseUserNum=0,this.chooseDepartmentNum=0)),this.showModalDepartment=!1},changeType:function(t){t?(this.detailData.no_send_type=1,this.detailData.no_send_stime="00:00",this.detailData.no_send_etime="07:00"):this.detailData.no_send_type=0},updateTimeData:function(t,e){var a=j.a.cloneDeep(this.detailData.timeData);a[e]=t,this.detailData.timeData=a},onChangeTimePickerS:function(t,e){this.detailData.no_send_stime=e+""},onChangeTimePickerE:function(t,e){this.detailData.no_send_etime=e+""},addRulesPopCallback:function(t,e){"ok"==t&&(this.detailData.timeData=[].concat(Object(o["a"])(this.detailData.timeData),[j.a.cloneDeep(e)])),this.isShowAddRulesPop=!1},confirmAddSop:function(){return this.$test.empty(this.detailData.title)?this.$message.warning("请输入规则名称"):this.$test.empty(this.detailData.user_ids)?this.$message.warning(1==this.detailData.is_chat?"请选择群聊":"请选择执行人"):2==this.detailData.type&&this.$test.empty(this.detailData.follow_id)?this.$message.warning("请选择一个跟进状态"):2==this.detailData.type&&0==this.detailData.is_all&&this.$test.empty(this.detailData.task_id)?this.$message.warning("请选择一个标签"):1==this.detailData.no_send_type&&this.detailData.no_send_stime.split(":").join("")>this.detailData.no_send_etime.split(":").join("")?this.$message.warning("推送开始时间不能大于结束时间"):this.$test.empty(this.detailData.timeData)?this.$message.warning("请设置一个规则"):void this.addSop()},addSop:function(){var t=this;return new Promise(function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(a,i){var s,r,o,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return s=j.a.pick(t.detailData,["type","title","user_ids","is_chat","follow_id","is_all","task_id","task_name","no_send_type","no_send_stime","no_send_etime","timeData"]),r=L({corp_id:t.corp_id,isMasterAccount:t.isMasterAccount,uid:t.uid,sub_id:t.sub_id},s),t.sop_id&&(r=L({},r,{sop_id:t.sop_id})),e.next=5,t.axios.post("work-sop/add-sop",r);case 5:o=e.sent,n=o.data,0==n.error?(t.$message.success(t.sop_id?"修改完成":"添加成功"),t.goBack()):t.$message.error(n.error_msg);case 8:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}())},conditionPopCallback:function(t,e){"ok"==t&&(e&&(this.detailData.task_name=e.tagname,this.detailData.task_id=e.id),console.log(e)),this.isShowConditionPop=!1},showChatVisible:function(){this.chatVisible=!0},groupChatCallBack:function(t,e,a){"ok"==t&&(this.detailData.user_ids=a),this.chatVisible=!1},goBack:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1500;setTimeout((function(){t.$router.go(-1)}),e)}}},V=M,P=(a("dd44"),Object(x["a"])(V,i,s,!1,null,"19ced1eb",null));e["default"]=P.exports},"0cfc":function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"tabBox"},[a("a-empty",{directives:[{name:"show",rawName:"v-show",value:0==t.groupList.length&&1==t.isNotAdd,expression:"groupList.length == 0 && isNotAdd == 1"}]},[a("span",{attrs:{slot:"description"},slot:"description"},[t._v("\n\t\t\t尚未创建标签，无法选择标签\n\t\t")])]),t._l(t.groupList,(function(e,i){return[t.isMore||!t.isMore&&i<5?a("div",{staticClass:"mb-10"},[a("span",{staticClass:"group-name mb-10"},[e.name&&""!=e.name?a("a-popover",{attrs:{trigger:"hover"}},[a("span",{staticStyle:{display:"inline-block","max-width":"500px","word-wrap":"break-word","word-break":"break-all"},attrs:{slot:"content"},slot:"content"},[t._v("\n\t\t\t\t\t\t"+t._s(e.name)+"\n\t\t\t\t\t")]),a("span",{staticStyle:{"font-weight":"700"}},[t._v(" "+t._s(e.name)+"：")])]):t._e()],1),t._l(e.data,(function(s,r){return a("span",[e.disabled[r]?t._e():a("a-checkable-tag",{staticClass:"h-30 l-h-30 mb-10",on:{change:function(e){return t.changeTags(s.id,i)}},model:{value:e.checked[r],callback:function(a){t.$set(e.checked,r,a)},expression:"item.checked[tagIndex]"}},[t._v("\n\t\t\t\t\t"+t._s(s.tagname)+"\n\t\t\t\t")]),e.disabled[r]&&1==t.isDisabled?a("a-button",{staticStyle:{margin:"5px","line-height":"26px","font-size":"12px",height:"auto !important",padding:"0 7px"},attrs:{disabled:e.disabled[r]&&1==t.isDisabled}},[t._v("\n\t\t\t\t\t"+t._s(s.tagname)+"\n\t\t\t\t")]):t._e()],1)})),1!=t.isNotAdd&&t.showAddTag?a("a-button",{staticStyle:{"font-size":"13px",height:"30px",color:"#1890FF",border:"1px solid #1890FF"},attrs:{icon:"plus"},on:{click:function(a){return t.createTag(e.id)}}},[t._v("\n\t\t\t\t添加\n\t\t\t")]):t._e()],2):t._e()]})),t.groupList.length>5?a("div",{staticStyle:{"font-size":"13px",height:"26px",color:"#1890FF","text-align":"center",cursor:"pointer"},on:{click:t.showMore}},[t.isMore?t._e():[t._v("更多")],t.isMore?[t._v("收起")]:t._e(),a("a-icon",{attrs:{type:t.isMore?"arrow-up":"arrow-down"}})],2):t._e(),t.showAddGroupTag&&t.groupList.length>0&&1!=t.isNotAdd?a("a-button",{staticStyle:{"font-size":"13px",height:"26px","margin-right":"10px",color:"#1E90FF"},attrs:{icon:"plus"},on:{click:t.addTagGroup}},[t._v("\n\t\t新建标签组\n\t")]):t._e(),a("a-modal",{attrs:{title:"新建标签",zIndex:99999,confirmLoading:t.confirmLoading3,width:"550px"},on:{ok:function(e){return t.handleOk(t.inputValue)},cancel:t.cancel},model:{value:t.visible,callback:function(e){t.visible=e},expression:"visible"}},[a("a-form-item",{attrs:{"label-col":{span:4},"wrapper-col":{span:20}}},[a("template",{slot:"label"},[t._v("\n\t\t\t\t选择分组\n\t\t\t")]),a("a-select",{staticStyle:{width:"250px"},attrs:{showSearch:"",optionFilterProp:"children",disabled:""},model:{value:t.group_id,callback:function(e){t.group_id=e},expression:"group_id"}},t._l(t.groupList,(function(e){return a("a-select-option",{attrs:{value:e.id}},[t._v("\n\t\t\t\t\t"+t._s(e.name)+"\n\t\t\t\t")])})),1)],2),a("a-form-item",{attrs:{"label-col":{span:4},"wrapper-col":{span:20}}},[a("template",{slot:"label"},[t._v("\n\t\t\t\t标签名称\n\t\t\t")]),a("p",{staticStyle:{margin:"0px","font-size":"13px",color:"#909399"}},[t._v("\n\t\t\t\t每个标签名称最多15个字。同时新建多个标签时，请用“空格”隔开")]),a("a-input",{attrs:{placeholder:"请输入标签（不得超过15个字符）"},model:{value:t.inputValue,callback:function(e){t.inputValue=e},expression:"inputValue"}})],2)],1),a("a-modal",{staticClass:"add-tag-group",attrs:{zIndex:99999,title:"新建标签组",visible:t.groupVisible,confirmLoading:t.confirmLoading},on:{ok:t.handleOk2,cancel:t.handleCancel}},[a("a-form-item",{staticClass:"current0",attrs:{"label-col":{span:4},"wrapper-col":{span:20}}},[a("template",{slot:"label"},[a("span",{staticStyle:{color:"red"}},[t._v("*")]),t._v("分组名称\n\t\t\t")]),a("a-input",{attrs:{placeholder:"请输入分组名(不得超过15个字符)",maxLength:15},model:{value:t.teamName,callback:function(e){t.teamName=e},expression:"teamName"}},[a("span",{attrs:{slot:"suffix"},slot:"suffix"},[a("span",[t._v(t._s(t.teamName.length))]),t._v("/15\n\t\t\t\t\t\t\t\t\t\t\t")])])],2),a("a-form-item",{staticClass:"current0",attrs:{"label-col":{span:4},"wrapper-col":{span:20}}},[a("template",{slot:"label"},[a("span",{staticStyle:{color:"red"}},[t._v("*")]),t._v("标签名称\n\t\t\t")]),a("p",{staticStyle:{margin:"0px","font-size":"13px",color:"#909399"}},[t._v("\n\t\t\t\t每个标签名称最多15个字。同时新建多个标签时，请用“空格”隔开\n\t\t\t")]),a("a-input",{attrs:{placeholder:"请输入标签（不得超过15个字符）"},model:{value:t.inputValue2,callback:function(e){t.inputValue2=e},expression:"inputValue2"}})],2)],1)],2)},s=[],r=(a("a481"),a("28a5"),a("6762"),a("2fdb"),a("96cf"),a("3b8d")),o=(a("c5f6"),{name:"corpChooseTag",props:{type:{type:Number,default:0},index:{type:Number,default:0},callback:{type:Function,default:null},hasChoose:{type:Array,default:function(){}},isDisabled:{type:Number,default:0},disabledTag:{type:Array,default:function(){}},isNotAdd:{type:Number,default:0},id:{type:String,default:""},isGroup:{type:Number,default:0}},data:function(){return{corpId:"",groupList:[],tag_arr:[],tag_ids:"",group_id:[],checked:[],visible:!1,confirmLoading3:!1,inputValue:"",newTagList:[],isMore:!1,groupVisible:!1,confirmLoading:!1,teamName:"",inputValue2:"",newTagList2:[],showAddTag:!1,showAddGroupTag:!1}},watch:{hasChoose:{handler:function(t){var e=this;"undefined"!=typeof t&&this.groupList.length&&(this.tag_arr=t,this.tag_ids=t.join(),this.hasChoose.map((function(t){e.groupList.map((function(e){e.data.map((function(a,i){t==a.id&&(e.checked[i]=!0)}))}))})),0==t.length&&this.groupList.map((function(t){t.checked=[]})),this.$forceUpdate())},deep:!0},id:{handler:function(t){""!=typeof t&&(this.corpId=t,this.getTags())},deep:!0},disabledTag:{handler:function(t){var e=this;"undefined"!=typeof t&&this.groupList.length&&(this.disabledTag.map((function(t){e.groupList.map((function(e){e.data.map((function(a,i){t==a.id&&(e.disabled[i]=!0)}))}))})),this.$forceUpdate())},deep:!0}},methods:{getTags:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(){var e,a,i=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.axios.post("work-tag-group/tag-group",{corp_id:this.corpId||localStorage.getItem("corpId"),is_not_add:this.isNotAdd,type:this.type});case 2:e=t.sent,a=e.data,0!=a.error?this.$message.error(a.error_msg):(this.groupList=a.data,this.groupList.map((function(t){t.checked=[],t.disabled=[]})),"undefined"!=typeof this.disabledTag&&this.disabledTag.length>0&&this.disabledTag.map((function(t){i.groupList.map((function(e){e.data.map((function(a,i){t==a.id&&(e.disabled[i]=!0)}))}))})),"undefined"!=typeof this.hasChoose&&this.hasChoose.length>0&&(this.tag_arr=this.hasChoose,this.tag_ids=this.hasChoose.join(),this.hasChoose.map((function(t){i.groupList.map((function(e){e.data.map((function(a,i){t==a.id&&(e.checked[i]=!0)}))}))})),this.$forceUpdate()));case 5:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),changeTags:function(t,e){Array.prototype.indexOf=function(t){for(var e=0;e<this.length;e++)if(this[e]==t)return e;return-1},Array.prototype.remove=function(t){var e=this.indexOf(t);e>-1&&this.splice(e,1)};var a=String(t);if(this.tag_arr.includes(a))this.tag_arr.remove(a);else if(this.tag_arr.length+1>9999){this.$message.warning("不可选中，客户标签数量上限9999个");for(var i=0;i<this.groupList[e].data.length;i++)this.groupList[e].data[i].id==a&&(this.groupList[e].checked[i]=!1)}else this.tag_arr.push(a);this.$forceUpdate(),this.tag_ids=this.tag_arr.join(),null!==this.callback&&"function"===typeof this.callback&&this.callback("ok",this.tag_ids,this.index)},createTag:function(t){this.group_id=t;var e=0;if(this.groupList.map((function(t){e+=t.data.length})),e>=9999)return this.$message.warning("标签数量已超过上限9999个，无法创建"),!1;this.visible=!0},handleOk:function(t){var e=this;if(e.confirmLoading3=!0,""==t)return e.$message.warning("不能为空"),e.confirmLoading3=!1,!1;e.newTagList=[];for(var a=0;a<t.split(" ").length;a++){if(t.split(" ")[a].length>15)return e.$message.error("每个标签最多15个字"),e.confirmLoading3=!1,!1;t.split(" ")[a].length>0&&e.newTagList.push(t.split(" ")[a])}e.addTags(),e.inputValue="",e.newTagList=[],e.confirmLoading3=!1},addTags:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(){var e,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.axios.post("work-tag/add",{corp_id:this.corpId||localStorage.getItem("corpId"),suite_id:1,type:this.type,group_id:this.group_id,name:this.newTagList});case 2:e=t.sent,a=e.data,0!=a.error?(this.$message.error(a.error_msg),this.confirmLoading3=!1):(this.isLoading=!1,this.visible=!1,this.confirmLoading3=!1,this.getTags(),this.inputValue="",this.newTagList=[],this.$emit("addTag"));case 5:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),cancel:function(){this.visible=!1,this.inputValue=""},showMore:function(){this.isMore=!this.isMore},addTagGroup:function(){this.groupVisible=!0},handleCancel:function(){this.groupVisible=!1,this.teamName="",this.newTagList2=[],this.inputValue2=""},handleOk2:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(){var e,a,i,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(String.prototype.Trim=function(){return this.replace(/(^\s*)|(\s*$)/g,"")},this.teamName=this.teamName.Trim(),this.teamName){t.next=5;break}return this.$message.error("请输入分组名"),t.abrupt("return",!1);case 5:if(""!=this.inputValue2){t.next=10;break}return this.$message.warning("标签名称不能为空"),t.abrupt("return",!1);case 10:this.newTagList2=[],e=JSON.parse(JSON.stringify(this.inputValue2)).split(" "),a=0;case 13:if(!(a<e.length)){t.next=24;break}if(!(e[a].length>15)){t.next=20;break}return this.$message.error("每个标签最多15个字"),this.inputValue2="",t.abrupt("return",!1);case 20:e[a].length>0&&this.newTagList2.push(e[a]);case 21:a++,t.next=13;break;case 24:return this.confirmLoading=!0,t.next=27,this.axios.post("work-tag-group/add",{corp_id:this.corpId||localStorage.getItem("corpId"),suite_id:1,name:this.teamName,type:this.type,isMasterAccount:localStorage.getItem("isMasterAccount"),sub_id:localStorage.getItem("sub_id"),tag_name:this.newTagList2});case 27:i=t.sent,s=i.data,0!=s.error?this.$message.error(s.error_msg):(this.teamName="",this.newTagList2=[],this.inputValue2="",this.groupVisible=!1,this.getTags(),this.$emit("addTag")),this.confirmLoading=!1;case 31:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},mounted:function(){if(this.corpId=this.id||localStorage.getItem("corpId"),1==localStorage.getItem("isMasterAccount"))this.showAddTag=!0,this.showAddGroupTag=!0;else{var t=JSON.parse(JSON.stringify(localStorage.getItem("permissionButton"))).split(",");0==this.isGroup?(t.indexOf("client-tag-add")>-1?this.showAddTag=!0:this.showAddTag=!1,t.indexOf("client-tag-group-add")>-1?this.showAddGroupTag=!0:this.showAddGroupTag=!1):1==this.isGroup&&(t.indexOf("groupTag-add")>-1?this.showAddTag=!0:this.showAddTag=!1,t.indexOf("groupTag-group-add")>-1?this.showAddGroupTag=!0:this.showAddGroupTag=!1)}this.getTags()}}),n=o,l=(a("e33a"),a("2877")),c=Object(l["a"])(n,i,s,!1,null,"1dc98380",null);e["a"]=c.exports},"2b5f":function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAAOCAYAAAAfSC3RAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyNpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTQ4IDc5LjE2NDAzNiwgMjAxOS8wOC8xMy0wMTowNjo1NyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIDIxLjAgKFdpbmRvd3MpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjZBNjQ4QkYwNzc0NjExRUI5MTJCOTE5RjkwNjg0REVBIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjZBNjQ4QkYxNzc0NjExRUI5MTJCOTE5RjkwNjg0REVBIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6NkE2NDhCRUU3NzQ2MTFFQjkxMkI5MTlGOTA2ODRERUEiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6NkE2NDhCRUY3NzQ2MTFFQjkxMkI5MTlGOTA2ODRERUEiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz72MkWDAAABKUlEQVR42pTSvUuCURTH8ee5WogJNTWHYFjQEr0sDQ1C0JCDgRH9AbU5B5ZF0BBBLwQNjQ4NQkIlRm2NBtEgBFZ/gJsVRdDQ99B54CI3sAOfBz33/rhez+NfXN161CymsOr9Vjfi8PGCL+1fooZCmMccTrGCQawjjR7d/IGKbMYarmEMjwMs64YHLFohqSjmcY8RpOQACQ6ggSIiVuAIu9b3LpygDwtGm3t6L7vqeG7rhXAod5fgECa8zmsYY+afoaDGjeMnBpVAGY+OtYgEn/4I5pDBtCPckDnKG9BEf9uir6PqxR2S2n/FjZz4rcN1lYS3sGT1tvEZjOMYZx38KefYkQ9BcFTvUsKbI/COKiZ1fF5YFzaxjw3EMKN38vWtklBLT8sj+yPAAKE6NJ6tsBtjAAAAAElFTkSuQmCC"},"2d3a":function(t,e,a){"use strict";var i=a("8e3c"),s=a.n(i);s.a},"3b60":function(t,e,a){var i=a("060e");"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var s=a("499e").default;s("0f98070e",i,!0,{sourceMap:!1,shadowMode:!1})},"3ff8":function(t,e,a){e=t.exports=a("2350")(!1),e.push([t.i,"[data-v-1dc98380] .ant-tree-checkbox{float:right}[data-v-1dc98380] .ant-tree-iconEle{display:none!important}[data-v-1dc98380] .ant-tree-node-content-wrapper.ant-tree-node-selected{background-color:#fff!important}[data-v-1dc98380] .ant-list-item{border-bottom:0;padding:0}[data-v-1dc98380] .ant-list-item-meta-title{font-weight:400;line-height:32px}[data-v-1dc98380] .ant-tree li span.ant-tree-checkbox{margin:4px 20px 0 2px}.content-msg[data-v-1dc98380]{color:red;margin:0 20px 12px 0}.group-name[data-v-1dc98380]{overflow:hidden;white-space:nowrap;text-overflow:ellipsis;width:calc(100% - 4px);display:inline-block;vertical-align:bottom;line-height:21px}.tabBox[data-v-1dc98380]{display:block!important;background:#fff;padding:20px;-webkit-box-sizing:border-box;box-sizing:border-box;margin-bottom:20px;border:1px solid #d8d8d8}[data-v-1dc98380] .ant-tag-checkable{background-color:#fafafa;border-color:#d9d9d9;font-size:13px}[data-v-1dc98380] .ant-tag-checkable-checked{background-color:#1890ff}.l-h-30[data-v-1dc98380]{line-height:30px}",""])},"466b":function(t,e,a){var i=a("b041");e=t.exports=a("2350")(!1),e.push([t.i,".ss-rules-l-b[data-v-19ced1eb]{width:1px;background:url("+i(a("a4b1b"))+") repeat-y}.ss-scroll-list[data-v-19ced1eb]{height:100%;overflow:auto;position:absolute;width:100%}[data-v-19ced1eb] .ant-layout-header{background:#fff}[data-v-19ced1eb] .ant-spin-container{height:100%}.ss-add-btn[data-v-19ced1eb]{border-color:#1890ff;color:#1890ff}.z-100[data-v-19ced1eb]{z-index:100}",""])},"4ac2":function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t._l(t.rulesData,(function(e,i){return a("div",{key:i,staticClass:"flex"},[t._m(0,!0),a("div",{staticClass:"ss-rules-box -mt-10 mb-10"},[a("div",{staticClass:"flex justify-between items-center"},[a("div",{staticClass:"text-15 font-bold"},[1==e.time_type?a("span",[t.is_chat?a("span",[t._v("加入内容规则后，")]):a("span",[t._v(t._s(1==t.type?"客户添加企微客服":"客户在【"+t.follow_name+"】跟进状态后"))]),a("span",{staticClass:"text-blue-501"},[t._v(t._s(e.time_one)+"小时"+t._s(e.time_two)+"分钟")]),t._v("后提醒推送\n\t\t\t\t\t")]):a("span",[t.is_chat?a("span",[t._v("加入内容规则后，")]):a("span",[t._v(t._s(1==t.type?"客户添加企微客服":"客户在【"+t.follow_name+"】跟进状态后"))]),a("span",{staticClass:"text-blue-501"},[t._v(t._s(e.time_one)+"天后"+t._s(e.time_two))]),t._v("提醒推送\n\t\t\t\t\t")])]),t.is_edit?a("div",{staticClass:"flex items-center"},[a("a-button",{staticClass:"mr-10",attrs:{type:"primary"},on:{click:function(a){return t.openShowAddRulesPop(e,i)}}},[t._v("编辑")]),a("a-button",{attrs:{type:"danger"},on:{click:function(e){return t.delRules(i)}}},[t._v("删除")])],1):a("div",{staticClass:"flex items-center"},[a("a-button",{staticClass:"mr-10",on:{click:function(a){return t.executeHandle(e,i)}}},[t._v("员工执行情况")])],1)]),t.is_edit?t._e():a("div",[a("span",[t._v("员工未完成（"+t._s(e.not_over_num)+"）")]),a("span",[t._v("员工已完成（"+t._s(e.over_num)+"）")])]),a("div",{staticClass:"ss-rules-pay-box px-15 my-20"},[a("rulesPay",{attrs:{rules:e.contentData}})],1)])])})),t.isShowAddRulesPop?a("addRulesPop",{ref:"addRulesPop",attrs:{is_chat:t.is_chat,type:t.type,follow_name:t.follow_name,rulesAdd:t.rulesAdd,index:t.rulesAdd_index,callback:t.addRulesPopCallbackBug}}):t._e()],2)},s=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"ss-rules-l flex flex-col items-center mr-20 ss-rules-l-b ml-7"},[i("img",{attrs:{src:a("2b5f"),alt:""}}),i("div",{staticClass:"h-full "})])}],r=(a("c5f6"),a("7a4a")),o=a("c0c8"),n=a("2ef0"),l=a.n(n),c={name:"rulesList",components:{addRulesPop:r["a"],rulesPay:o["a"]},props:{rulesData:{type:Array,default:function(){return[]}},type:{type:[Number,String],default:function(){return 1}},is_edit:{type:Boolean,default:function(){return!0}},follow_name:{type:String,default:function(){return""}},is_chat:{type:[String,Number],default:function(){return 0}}},data:function(){return{commonUrl:this.$store.state.commonUrl,isShowAddRulesPop:!1,rulesAdd:{},rulesAdd_index:-1}},methods:{executeHandle:function(t,e){this.$emit("executeHandle",t)},addRulesPopCallbackBug:function(t,e,a){this.isShowAddRulesPop=!1,"ok"==t&&this.$emit("updateTimeData",e,a)},openShowAddRulesPop:function(t,e){var a=this;this.rulesAdd=l.a.cloneDeep(t),this.rulesAdd_index=e,this.isShowAddRulesPop=!0,this.$nextTick((function(){a.$refs.addRulesPop.visible=!0}))},delRules:function(t){var e=this;this.$confirm({title:"确定删除吗？",content:"",okText:"确认",cancelText:"取消",onOk:function(){e.rulesData.splice(t,1)}})}}},p=c,d=(a("058a"),a("2877")),u=Object(d["a"])(p,i,s,!1,null,"d82b12fc",null);e["a"]=u.exports},"4bef":function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAQAAADZc7J/AAABAElEQVR42s3VIY7CUBAG4LkEliC4xKJ6BA6AognXQBLCAVBYNBK3pim7zP8XBAJHSLhAZVURi+jC2+681xD4R89nZiYjIhojQRlQicYiolFQ8600EqZNAKbSpB0lyqcCBeYccIA5ihDgtO3JLdseTr7Ap9wFRx+g2HTuge8PH+AsjuBiBzZO4MsOHJzAwQ7kTiD3mcLsoX3muQcaV9s1DtnENUfssssR1i+6hRcD3GPFBaeccoEV9z7AUodoP4yxrUMs/wd26EtN0MeuBuBYDOH4LyDPWhYga1WXugpMxBhMnIBGVqD6S34B9nqvTUwaAUnNpZue689/DnuwTDUSuQJ1pL7YQ6lKkQAAAABJRU5ErkJggg=="},"548a":function(t,e,a){var i=a("8171");"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var s=a("499e").default;s("5e6b7492",i,!0,{sourceMap:!1,shadowMode:!1})},5510:function(t,e,a){e=t.exports=a("2350")(!1),e.push([t.i,".p-1rem[data-v-db0ad3d6]{padding:0 1rem}.ss-tag-item.active[data-v-db0ad3d6]{background:#1890ff;color:#fff}",""])},"5b44":function(t,e,a){var i=a("466b");"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var s=a("499e").default;s("00f86bdc",i,!0,{sourceMap:!1,shadowMode:!1})},"5c37":function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAAOCAIAAACQKrqGAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyNpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTQ4IDc5LjE2NDAzNiwgMjAxOS8wOC8xMy0wMTowNjo1NyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIDIxLjAgKFdpbmRvd3MpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjIxQUNGMzYxNzc0QTExRUI4MDMzQjc4NDMyOTVFNkY0IiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjIxQUNGMzYyNzc0QTExRUI4MDMzQjc4NDMyOTVFNkY0Ij4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6MjFBQ0YzNUY3NzRBMTFFQjgwMzNCNzg0MzI5NUU2RjQiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6MjFBQ0YzNjA3NzRBMTFFQjgwMzNCNzg0MzI5NUU2RjQiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz7UuXLDAAAAgklEQVR42mL8//8/A3GAiYFoQIJSFjT+i1dvHzx89vHzlz9//goL8qsqywkL8UOkGJHdClR39sJ1NM0WJroQ1SgOuP/wGaa9t+4+wuLWd+8/Yir99PkLZSEgJMiPqYKPlweLUkV5KUylaspyWEIAEghAz30CBxbQEjVcgTUQEQsQYADH4TYPhQZ7CAAAAABJRU5ErkJggg=="},"60fa":function(t,e,a){var i=a("ba97");"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var s=a("499e").default;s("3ffc277e",i,!0,{sourceMap:!1,shadowMode:!1})},6193:function(t,e,a){e=t.exports=a("2350")(!1),e.push([t.i,".label_box[data-v-269d5e34]{width:100%;padding:1rem}.title[data-v-269d5e34]{font-size:15px;font-weight:600}.ant-divider-horizontal[data-v-269d5e34]{margin:.64rem 0}",""])},"6b96":function(t,e,a){var i=a("5510");"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var s=a("499e").default;s("0b4eb32b",i,!0,{sourceMap:!1,shadowMode:!1})},"7a4a":function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("a-modal",{attrs:{title:"添加内容规则",width:1100,visible:!0},on:{ok:t.handleOk,cancel:t.handleCancel}},[i("div",{staticClass:" relative clearfix"},[i("div",{staticClass:"sticky top-0 z-3 w-375 float-left "},[i("img",{staticClass:"w-full block",attrs:{src:a("eb7e")}}),i("div",{staticClass:"ss-prev-box px-20"},[i("rulesPay",{attrs:{rules:t.rulesAddClone.contentData,"is-add":1}})],1)]),i("div",{staticStyle:{width:"640px","margin-left":"400px"}},[i("div",{staticClass:"text-14 font-bold text-gray-900 relative b-line py-10"},[t._v("设置提醒时间")]),i("div",{staticClass:"py-20"},[i("a-radio-group",{staticClass:"ss-sz-time",attrs:{name:"radioGroup",value:t.rulesAddClone.time_type},on:{change:t.radioChange}},[1==t.is_chat?i("a-radio",{attrs:{value:1}},[i("div",{staticClass:"flex items-center py-5"},[t.is_chat?i("span",[i("span",{staticClass:"text-14 text-gray-900"},[t._v("加入内容规则后，")])]):i("span",[1==t.type?i("span",{staticClass:"text-14 text-gray-900"},[t._v("客户添加企微客服后")]):i("span",{staticClass:"text-14 text-gray-900"},[t._v("当客户在 "),i("span",{staticClass:"text-blue-501"},[t._v("【"+t._s(t.follow_name)+"】")]),t._v("跟进状态后")])]),i("a-input-number",{staticClass:"w-80 mx-10",attrs:{min:0,max:23,disabled:2==t.rulesAddClone.time_type,value:1==t.rulesAddClone.time_type?t.rulesAddClone.time_one:1},on:{change:function(e){return t.onChangeValue(e,"time_one")}}}),i("span",{staticClass:"text-14 text-gray-900"},[t._v("小时")]),i("a-input-number",{staticClass:"w-80 mx-10",attrs:{min:0,max:59,disabled:2==t.rulesAddClone.time_type,value:1==t.rulesAddClone.time_type?t.rulesAddClone.time_two:0},on:{change:function(e){return t.onChangeValue(e,"time_two")}}}),i("span",{staticClass:"text-14 text-gray-900"},[t._v("分钟后提醒推送")])],1)]):t._e(),i("a-radio",{class:{"ss-radio-btn":0==t.is_chat},attrs:{value:2}},[i("div",{staticClass:"flex items-center py-5"},[t.is_chat?i("span",[i("span",{staticClass:"text-14 text-gray-900"},[t._v("加入内容规则后，")])]):i("span",[1==t.type?i("span",{staticClass:"text-14 text-gray-900"},[t._v("客户添加企微客服后")]):i("span",{staticClass:"text-14 text-gray-900"},[t._v("当客户在 "),i("span",{staticClass:"text-blue-501"},[t._v("【"+t._s(t.follow_name)+"】")]),t._v("跟进状态后")])]),i("a-input-number",{staticClass:"w-80 mx-10",attrs:{min:1,disabled:1==t.rulesAddClone.time_type,value:2==t.rulesAddClone.time_type?t.rulesAddClone.time_one:1},on:{change:function(e){return t.onChangeValue(e,"time_one")}}}),i("span",{staticClass:"text-14 text-gray-900"},[t._v("天后，当日")]),i("a-time-picker",{staticClass:"mx-10",attrs:{inputReadOnly:!0,disabled:1==t.rulesAddClone.time_type,"default-value":t.moment(2==t.rulesAddClone.time_type?t.rulesAddClone.time_two:"00:00","HH:mm"),format:"HH:mm"},on:{change:t.onChangeTimePicker}}),i("span",{staticClass:"text-14 text-gray-900"},[t._v("提醒推送")])],1)])],1)],1),i("div",{staticClass:"text-14 font-bold text-gray-900 relative b-line py-10"},[t._v("推送内容")]),i("div",[t._l(t.rulesAddClone.contentData,(function(e,a){return i("div",{key:a,staticClass:"flex mb-10"},[i("div",{staticClass:"py-15 w-60"},[t._v("消息"+t._s(a+1)+"：")]),i("div",{staticClass:"w-full"},[i("div",{staticClass:"pt-5"},[i("publishContent",{attrs:{"is-one-img":1,"is-sop":1,title:"",detailData:e,callback:t.contentReply,index:a}},[1!==t.rulesAddClone.contentData.length?i("a-button",{attrs:{size:"small",type:"danger"},on:{click:function(e){return t.delMsg(a)}}},[t._v("\n\t\t\t\t\t\t\t\t\t\t删除\n\t\t\t\t\t\t\t\t\t")]):t._e()],1)],1)])])})),i("div",{staticClass:"py-20 ml-60"},[i("a-button",{attrs:{type:"primary"},on:{click:t.addMsg}},[t._v("添加消息")])],1)],2)])])])],1)},s=[],r=(a("96cf"),a("3b8d")),o=(a("a481"),a("c5f6"),function(){var t=this,e=this,i=e.$createElement,s=e._self._c||i;return s("div",{staticClass:"content"},[e.title?s("div",{staticClass:"title"},[e._v(e._s(e.title))]):e._e(),e.title?s("a-divider"):e._e(),s("a-form-model",[s("a-form-model-item",{attrs:{label:"内容类型","label-col":{span:3},align:"left","wrapper-col":{span:21}}},[s("div",{staticClass:"clearfix"},[s("a-radio-group",{on:{change:e.changeType},model:{value:e.publishForm.file_type,callback:function(t){e.$set(e.publishForm,"file_type",t)},expression:"publishForm.file_type"}},[s("a-radio",{attrs:{value:1}},[e._v("\n\t\t\t\t\t\t\t图片/文字\n\t\t\t\t\t\t")]),s("a-radio",{attrs:{value:3}},[e._v("\n\t\t\t\t\t\t\t视频\n\t\t\t\t\t\t")]),s("a-radio",{attrs:{value:4}},[e._v("\n\t\t\t\t\t\t\t图文链接\n\t\t\t\t\t\t")])],1),s("div",{staticClass:"float-right"},[e._t("default")],2)],1)]),s("div",{staticClass:"px-20 pt-20",staticStyle:{background:"#F1F3F5"}},[s("div",[s("a-textarea",{attrs:{maxLength:500,placeholder:"请输入内容",autoSize:{minRows:9,maxRows:9}},on:{change:function(){t.callback("ok",t.publishForm,t.index)}},model:{value:e.publishForm.context,callback:function(t){e.$set(e.publishForm,"context",t)},expression:"publishForm.context"}}),s("div",{staticStyle:{float:"right","line-height":"20px"}},[e._v("\n\t\t\t\t\t\t"+e._s(e.publishForm.context&&e.publishForm.context.length||0)+"/500\n\t\t\t\t\t")])],1)]),3==e.publishForm.file_type||4==e.publishForm.file_type?s("a-form-model-item",{attrs:{label:"添加方式","label-col":{span:3},"wrapper-col":{span:18}}},[s("a-radio-group",{staticStyle:{"line-height":"40px"},on:{change:e.addTypeChange},model:{value:e.publishForm.add_type,callback:function(t){e.$set(e.publishForm,"add_type",t)},expression:"publishForm.add_type"}},[s("a-radio",{attrs:{value:0}},[e._v("\n\t\t\t\t\t\t自定义设定\n\t\t\t\t\t")]),s("a-radio",{attrs:{value:1}},[e._v("\n\t\t\t\t\t\t从素材库导入\n\t\t\t\t\t")])],1)],1):e._e(),s("div",{staticClass:"content_container"},[1==e.publishForm.file_type?s("div",[s("a-spin",{attrs:{tip:"Loading...",size:"large",spinning:e.uploadLoading}}),e.uploadLoading?e._e():s("a-upload",{staticClass:"pic",staticStyle:{width:"95%"},attrs:{action:"https://www.mocky.io/v2/5cc8019d300000980a055e76",multiple:!e.isOneImg,"list-type":"picture-card","file-list":e.publishForm.uploadImg,beforeUpload:e.beforeUploadPic,disabled:e.uploadLoading},on:{preview:e.handlePreview,change:e.handleChange}},[e.is_show_upimg_btn?s("div",{staticClass:"local"},[s("a-icon",{attrs:{type:"plus"}}),s("div",[e._v("本地上传")])],1):e._e(),e.is_show_upimg_btn?s("div",{staticClass:"material_image",on:{click:function(t){return t.stopPropagation(),t.preventDefault(),e.selectMaterial(t)}}},[s("a-icon",{staticStyle:{"font-size":"16px",position:"absolute",transform:"translate(-50%,-50%)"},attrs:{type:"plus"}}),s("div",{staticStyle:{"margin-top":"1.3rem"}},[e._v("素材库导入")])],1):e._e()])],1):e._e(),s("a-modal",{attrs:{visible:e.previewVisible,footer:null},on:{cancel:e.handleCancel}},[s("img",{staticStyle:{width:"100%"},attrs:{alt:"example",src:e.previewImage}})]),3==e.publishForm.file_type?s("div",[s("a-spin",{attrs:{tip:"Loading...",size:"large",spinning:e.uploadLoading}}),0==e.publishForm.add_type&&e.publicOptions.sources.length<=0&&!e.uploadLoading?s("a-upload",{staticStyle:{height:"100%"},attrs:{action:"https://www.mocky.io/v2/5cc8019d300000980a055e76",multiple:!1,fileList:[],beforeUpload:e.beforeUploadVideo}},[s("a-button",{staticStyle:{width:"101.82px",height:"101.82px",background:"#FAFAFA",position:"relative",border:"1px dashed #D9D9D9"}},[s("a-icon",{attrs:{type:"plus"}}),s("div",{staticClass:"selectPhoto"},[e._v("选择视频")])],1)],1):e._e(),1==e.publishForm.add_type&&e.publicOptions.sources.length<=0?s("div",{staticClass:"material_video",on:{click:e.selectMaterial}},[s("a-icon",{staticStyle:{"font-size":"16px",position:"absolute",transform:"translate(-50%,-50%)"},attrs:{type:"plus"}}),s("div",{staticStyle:{"margin-top":"0.75rem"}},[e._v("素材库导入")])],1):e._e()],1):e._e(),3==e.publishForm.file_type&&e.publicOptions.sources.length>0?s("div",{staticClass:"video-show",staticStyle:{position:"relative"}},[s("video-player",{ref:"videoPlayer",staticClass:"video-player vjs-custom-skin",staticStyle:{width:"100%"},attrs:{playsinline:!0,options:e.publicOptions}}),s("img",{staticStyle:{"z-index":"9999",cursor:"pointer",top:"0rem",right:"0",height:"1rem",width:"1rem",position:"absolute"},attrs:{src:a("8add"),alt:""},on:{click:e.deleteVideo}})],1):e._e(),4!=e.publishForm.file_type||1!=e.publishForm.add_type||e.publishForm.materialText.link?e._e():s("div",{staticClass:"before_choose",on:{click:e.selectMaterial}},[s("span",[s("a-icon",{staticStyle:{"margin-left":"6px"},attrs:{type:"plus"}}),e._v("素材库导入")],1)]),4==e.publishForm.file_type&&1==e.publishForm.add_type&&e.publishForm.materialText.link?s("div",{staticClass:"before_choose",on:{click:e.selectMaterial}},[s("img",{staticStyle:{width:"1.5rem","margin-bottom":"0.2rem"},attrs:{src:a("088b"),alt:""}}),e._v("\n\t\t\t\t\t已选择1条图文消息\n\t\t\t\t\t"),s("p",{staticClass:"editMessage",staticStyle:{"margin-top":"-5.993rem"}},[e._v("[修改]")])]):e._e(),4==e.publishForm.file_type&&0==e.publishForm.add_type?s("div",{},[s("a-form-model-item",{attrs:{label:"图文链接","label-col":{span:3},"wrapper-col":{span:18}}},[s("span",{attrs:{slot:"label"},slot:"label"},[s("span",{staticStyle:{color:"red"}},[e._v("*")]),e._v("图文链接\n\t\t\t\t\t")]),s("a-input",{attrs:{placeholder:"请输入图文链接,链接地址以http或https开头","allow-clear":""},on:{blur:e.inputChange,keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.inputChange(t)}},model:{value:e.publishForm.uploadText.link,callback:function(t){e.$set(e.publishForm.uploadText,"link","string"===typeof t?t.trim():t)},expression:"publishForm.uploadText.link"}}),e.showTextContent&&!e.$test.empty(e.publishForm.uploadText.link)?s("div",{staticClass:"content_input"},[s("div",{staticStyle:{"flex-grow":"1",height:"100px"}},[s("div",{staticClass:"input_text1"},[e._v(e._s(e.publishForm.uploadText.title)+"\n\t\t\t\t\t\t\t\t")]),s("div",{staticClass:"input_text2"},[e._v("\n\t\t\t\t\t\t\t\t\t"+e._s(e.publishForm.uploadText.description)+"\n\t\t\t\t\t\t\t\t")])]),s("div",{staticStyle:{width:"100px",height:"100px",padding:"10px"}},[e.publishForm.uploadText.url?s("img",{staticClass:"input_img",attrs:{src:e.commonUrl+e.publishForm.uploadText.url,alt:""}}):e._e(),""==e.publishForm.uploadText.url?s("img",{staticClass:"input_img",attrs:{src:a("b11d"),alt:""}}):e._e()])]):e._e()],1),e.publishForm.uploadText.link?s("a-form-model-item",{attrs:{label:"高级设置","label-col":{span:3},"wrapper-col":{span:18}}},[s("a-switch",{model:{value:e.publishForm.isAdvance,callback:function(t){e.$set(e.publishForm,"isAdvance",t)},expression:"publishForm.isAdvance"}})],1):e._e(),e.publishForm.isAdvance&&e.publishForm.uploadText.link?s("div",[s("a-form-model-item",{attrs:{label:"链接标题","label-col":{span:3},"wrapper-col":{span:18}}},[s("a-input",{attrs:{placeholder:"链接标题",maxLength:40,"allow-clear":""},on:{blur:e.inputCallback},model:{value:e.publishForm.uploadText.title,callback:function(t){e.$set(e.publishForm.uploadText,"title",t)},expression:"publishForm.uploadText.title"}})],1),s("a-form-model-item",{attrs:{label:"链接摘要",maxLength:"255","label-col":{span:3},"wrapper-col":{span:18}}},[s("a-input",{attrs:{placeholder:"链接摘要","allow-clear":""},on:{blur:e.inputCallback},model:{value:e.publishForm.uploadText.description,callback:function(t){e.$set(e.publishForm.uploadText,"description",t)},expression:"publishForm.uploadText.description"}})],1),s("a-form-model-item",{attrs:{label:"链接封面","label-col":{span:3},"wrapper-col":{span:18}}},[s("div",{staticStyle:{position:"relative"}},[e.$test.empty(e.publishForm.uploadText.url)?s("img",{staticStyle:{width:"100px",height:"100px",border:"1px solid #F1F3F5","vertical-align":"bottom"},attrs:{src:a("b11d")}}):s("img",{staticStyle:{width:"100px",height:"100px",border:"1px solid #F1F3F5","vertical-align":"bottom"},attrs:{src:e.commonUrl+e.publishForm.uploadText.url}}),s("a-upload",{staticClass:"link_cover",staticStyle:{border:"none","background-color":"#F1F3F5"},attrs:{action:"https://www.mocky.io/v2/5cc8019d300000980a055e76",multiple:!1,showUploadList:!1,"list-type":"picture-card","before-upload":e.beforeUpload}},[s("span",{staticStyle:{"font-size":"12px",color:"rgb(37, 150, 255)","margin-left":"10px",cursor:"pointer",position:"absolute",width:"50px"}},[e._v("重新选择")])])],1)])],1):e._e()],1):e._e()],1),0==e.publishForm.add_type&&0==e.isSop?s("a-form-model-item",{attrs:{label:"素材同步","label-col":{span:3},"wrapper-col":{span:20}}},[s("a-radio-group",{staticStyle:{"line-height":"40px"},model:{value:e.publishForm.material_sync,callback:function(t){e.$set(e.publishForm,"material_sync",t)},expression:"publishForm.material_sync"}},[s("a-radio",{attrs:{value:0}},[e._v("\n\t\t\t\t\t\t不同步\n\t\t\t\t\t")]),s("a-radio",{attrs:{value:1}},[e._v("\n\t\t\t\t\t\t同步至【内容引擎】\n\t\t\t\t\t")]),s("span",{directives:[{name:"show",rawName:"v-show",value:1==e.publishForm.material_sync,expression:"publishForm.material_sync==1"}]},[e._v("\n                                选择分组：\n                                "),s("a-tree-select",{staticStyle:{width:"225px"},attrs:{dropdownStyle:{maxHeight:"150px",overflow:"auto"},treeData:e.groupList,placeholder:"请选择分组",treeDefaultExpandAll:""},model:{value:e.publishForm.group_id,callback:function(t){e.$set(e.publishForm,"group_id",t)},expression:"publishForm.group_id"}})],1)],1)],1):e._e()],1),s("chooseMsg",{attrs:{show:e.showMaterialModel,type:e.materialType,callback:e.materialReply,news_type:1,chooseId:e.publishForm.chooseId}})],1)}),n=[],l=(a("8e6e"),a("456d"),a("bd86")),c=(a("b54a"),a("ac4d"),a("8a81"),a("ac6a"),a("20d6"),a("7f7f"),a("bc3a")),p=a.n(c),d=a("d6d3"),u=a("2afe"),h=a("8237"),m=a.n(h),g=a("2ef0"),f=a.n(g);function b(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,i)}return a}function v(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?b(a,!0).forEach((function(e){Object(l["a"])(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):b(a).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var _=p.a.CancelToken,x=_.source(),y={name:"publishContent",components:{videoPlayer:d["videoPlayer"],chooseMsg:u["a"]},props:{title:{type:String,default:"编辑内容"},callback:{type:Function,default:null},detailData:{type:Object,default:function(){}},index:{type:Number,default:0},isOneImg:{type:Number,default:function(){return 0}},isSop:{type:Number,default:function(){return 0}}},watch:{"publishForm.isAdvance":function(t){!t&&this.uploadTextSync&&(this.publishForm.uploadText=f.a.cloneDeep(this.uploadTextSync),this.callback("ok",this.publishForm,this.index))},"publishForm.uploadText.link":function(t){var e=this;t||this.$nextTick((function(){e.showTextContent=!1,e.publishForm.uploadText={},e.uploadTextSync={},e.callback("ok",e.publishForm,e.index)}))}},computed:{is_show_upimg_btn:function(){return 1==this.isOneImg?this.publishForm.uploadImg.length<1:this.publishForm.uploadImg.length<9}},data:function(){return{is_exchage:!1,uploadLoading:!1,publishForm:{isAdvance:!1,file_type:1,material_sync:0,add_type:0,uploadImg:[],uploadText:{},materialText:{},corp_id:localStorage.getItem("corpId")?localStorage.getItem("corpId"):""},commonUrl:this.$store.state.commonUrl,showTextContent:!1,groupList:[],previewVisible:!1,previewImage:"",publicOptions:{sources:[],playbackRates:[.7,1,1.5,2],autoplay:!1,muted:!1,loop:!1,preload:"auto",language:"zh-CN",aspectRatio:"16:9",fluid:!0,notSupportedMessage:"此视频暂无法播放，请稍后再试",controlBar:{timeDivider:!0,durationDisplay:!0,remainingTimeDisplay:!1,fullscreenToggle:!0}},showMaterialModel:!1,materialType:2,showImgModel:!1,uploadTextSync:""}},mounted:function(){if(this.getGroupList(),this.detailData&&this.detailData.file_type)switch(this.publishForm=this.detailData,3==this.publishForm.file_type&&(this.publicOptions.sources=[],0==this.publishForm.add_type&&this.publishForm.uploadVideo&&this.publishForm.uploadVideo.local_path?(this.publicOptions.sources=[{src:this.commonUrl+this.publishForm.uploadVideo.local_path,type:"video/mp4"}],this.publishForm.materialVideo={}):1==this.publishForm.add_type&&this.publishForm.materialVideo&&this.publishForm.materialVideo.local_path&&(this.publicOptions.sources=[{src:this.commonUrl+this.publishForm.materialVideo.local_path,type:"video/mp4"}],this.publishForm.uploadVideo={})),4==this.publishForm.file_type&&(0==this.publishForm.add_type?(this.publishForm.materialText={},this.showTextContent=!0):1==this.publishForm.add_type&&(this.publishForm.uploadText={}),this.uploadTextSync=f.a.cloneDeep(this.publishForm.uploadText)),this.publishForm.file_type){case 1:this.materialType=2,this.publishForm.add_type=0;break;case 3:this.materialType=4;break;case 4:this.materialType=1;break}},methods:{addTypeChange:function(){3==this.publishForm.file_type&&(this.publicOptions.sources=[],0==this.publishForm.add_type&&this.publishForm.uploadVideo&&this.publishForm.uploadVideo.local_path?this.publicOptions.sources=[{src:this.commonUrl+this.publishForm.uploadVideo.local_path,type:"video/mp4"}]:1==this.publishForm.add_type&&this.publishForm.materialVideo&&this.publishForm.materialVideo.local_path&&(this.publicOptions.sources=[{src:this.commonUrl+this.publishForm.materialVideo.local_path,type:"video/mp4"}])),this.callback("ok",this.publishForm,this.index)},changeType:function(){switch(this.publishForm.file_type){case 1:this.materialType=2,this.publishForm.add_type=0;break;case 3:this.materialType=4;break;case 4:this.materialType=1;break}this.callback("ok",this.publishForm,this.index)},selectMaterial:function(){this.showMaterialModel=!0},upSopImgReply:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(e){var a,i,s,r,o,n,l,c;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.uploadLoading=!0,t.next=3,this.axios.post("work-material/upload-media",{corp_id:localStorage.getItem("corpId"),attachment_id:e,type:4==this.publishForm.file_type?4:""});case 3:a=t.sent,i=a.data,this.uploadLoading=!1,0!=i.error?this.$message.error(i.error_msg):(i.data&&(s=i.data,1==this.publishForm.file_type?(s.url=s.s_local_path?this.commonUrl+s.s_local_path:this.commonUrl+s.local_path,s.uid=this.publishForm.uploadImg.length+1,r=s.id,o=s.uid,n=s.file_name,l=s.local_path,c=s.url,this.publishForm.uploadImg.push({id:r,uid:o,name:n,local_path:l,url:c})):3==this.publishForm.file_type&&(this.publicOptions.sources=[{src:this.commonUrl+s.local_path,type:"video/mp4"}],this.publishForm.uploadVideo=s)),this.callback("ok",this.publishForm,this.index));case 7:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),inputCallback:function(){this.isSop&&this.callback("ok",this.publishForm,this.index)},materialReply:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(e,a,i){var s,r,o,n,l,c,p,d,u,h,m,g,f;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if("ok"!=e){t.next=31;break}if(this.uploadLoading=!0,!isNaN(i)&&""!=i){t.next=6;break}this.$message.error("请选择素材"),t.next=29;break;case 6:if(!i){t.next=29;break}return i=parseInt(i),t.next=10,this.axios.post("work-material/upload-media",{corp_id:localStorage.getItem("corpId"),attachment_id:i,type:4==this.publishForm.file_type?4:""});case 10:if(s=t.sent,r=s.data,this.uploadLoading=!1,0==r.error){t.next=17;break}this.$message.error(r.error_msg),t.next=29;break;case 17:if(!r.data){t.next=29;break}if(o=r.data,1!=this.publishForm.file_type){t.next=28;break}if(!(this.publishForm.uploadImg.length>8)){t.next=22;break}return t.abrupt("return",this.$message.warning("少于9张"));case 22:o.url=o.s_local_path?this.commonUrl+o.s_local_path:this.commonUrl+o.local_path,o.uid=this.publishForm.uploadImg.length+1,n=o.id,l=o.uid,c=o.file_name,p=o.local_path,d=o.url,this.publishForm.uploadImg.push({id:n,uid:l,name:c,local_path:p,url:d}),t.next=29;break;case 28:3==this.publishForm.file_type?(this.publicOptions.sources=[{src:this.commonUrl+o.local_path,type:"video/mp4"}],this.publishForm.materialVideo=o):4==this.publishForm.file_type&&(u=o.artList[0],h=u.content_source_url,m=u.qy_local_path,g=u.title,f=u.digest,this.publishForm.materialText={link:h,url:m,title:g,description:f},this.publishForm.materialText.id=o.id);case 29:t.next=31;break;case 31:this.showMaterialModel=!1,this.callback("ok",this.publishForm,this.index);case 33:case"end":return t.stop()}}),t,this)})));function e(e,a,i){return t.apply(this,arguments)}return e}(),beforeUploadPic:function(t,e){if("image/jpg"!=t.type&&"image/jpeg"!=t.type&&"image/png"!=t.type)return this.$message.error("图片类型仅支持jpg、jpeg和png类型！"),!1;if(e.length+this.publishForm.uploadImg.length>9)return t.uid==e[0].uid&&(this.$message.destroy(),this.$message.error("上传图片超过九张！")),!1;var a=t.size/1024/1024<2;if(!a)return this.$message.error("图片不超过2M！"),!1;if(t.size<5)return this.$message.error("上传文件大小不符！"),!1;var i=this;this.getFileContent(t,(function(e){i.isSop?i.uploadSop(t):i.upLoadPhoto(t,m()(e))}))},uploadSop:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(e){var a,i,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=new FormData,a.append("uid",localStorage.getItem("uid")),a.append("isMasterAccount",localStorage.getItem("isMasterAccount")),a.append("sub_id",localStorage.getItem("sub_id")),a.append("file_type",this.publishForm.file_type),a.append("fileInfo",e),a.append("is_sync",0),a.append("group_id",this.publishForm.group_id||""),this.uploadLoading=!0,t.next=11,this.axios.post("attachment/add",a,{cancelToken:x.token});case 11:i=t.sent,s=i.data,this.uploadLoading=!1,0==s.error?this.upSopImgReply(s.data.attachment_id):this.$message.error(s.error_msg);case 15:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),upLoadPhoto:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(e,a){var i,s,r,o,n,l,c,p,d,u,h,m,g,f,b,v,_,x,y,w;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return i=new FormData,s=new FormData,i.append("type",e.type),i.append("corp_id",this.publishForm.corp_id),i.append("md5",a),s=i,t.next=8,this.axios.post("moment/moments-upload",i);case 8:if(r=t.sent,o=r.data,0==o.error){t.next=14;break}this.$message.error(o.error_msg),t.next=32;break;case 14:if(""==o.data.local_path){t.next=22;break}o.data.uid=this.publishForm.uploadImg.length+1,o.data.url=this.commonUrl+o.data.local_path,o.data.name=o.data.md5,n=o.data,l=n.url,c=n.md5,p=n.uid,d=n.s_local_path,u=n.local_path,h=n.name,this.publishForm.uploadImg.push({url:l,s_local_path:d,md5:c,uid:p,name:h,local_path:u}),t.next=32;break;case 22:return s.append("fileInfo",e),t.next=25,this.axios.post("moment/moments-upload",s);case 25:m=t.sent,g=m.data,g.data.uid=this.publishForm.uploadImg.length+1,g.data.url=this.commonUrl+g.data.local_path,g.data.name=g.data.md5,f=g.data,b=f.url,v=f.md5,_=f.uid,x=f.s_local_path,y=f.local_path,w=f.name,this.publishForm.uploadImg.push({url:b,s_local_path:x,md5:v,uid:_,name:w,local_path:y});case 32:this.callback("ok",this.publishForm,this.index);case 33:case"end":return t.stop()}}),t,this)})));function e(e,a){return t.apply(this,arguments)}return e}(),getFileContent:function(t,e){if(t&&t.size>0&&window.FileReader){var a=new FileReader;a.onloadend=function(t){t.target.readyState==FileReader.DONE&&e(t.target.result)},a.readAsText(t,"utf-8")}},handlePreview:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.url||e.preview){t.next=4;break}return t.next=3,getBase64(e.originFileObj);case 3:e.preview=t.sent;case 4:this.previewImage=e.url||e.preview,this.previewVisible=!0;case 6:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),handleCancel:function(){this.previewVisible=!1},handleChange:function(t){var e=t.file.size/1024/1024<2,a=!0,i=!1,s=void 0;try{for(var r,o=t.fileList[Symbol.iterator]();!(a=(r=o.next()).done);a=!0){var n=r.value;"error"==n.status&&(n.status="done")}}catch(l){i=!0,s=l}finally{try{a||null==o.return||o.return()}finally{if(i)throw s}}return"removed"==t.file.status&&(this.publishForm.uploadImg.splice(this.publishForm.uploadImg.findIndex((function(e){return e.uid==t.file.uid})),1),1==this.isOneImg&&this.callback("ok",this.publishForm,this.index)),e},beforeUploadVideo:function(t){this.uploadLoading=!0,this.showUploadvideo=!0,this.showMaterialvideo=!1;var e=this;if("video/mp4"!=t.type)return this.uploadLoading=!1,e.$message.error("视频类型仅支持mp4类型！"),!1;var a=t.size/1024/1024<=50;return a?t.size<=5?(this.uploadLoading=!1,e.$message.error("上传的文件大小需大于5字节！"),!1):void e.getFileContent(t,(function(a){e.isSop?e.uploadSop(t):e.selfUploadVideo(t,m()(a))})):(this.uploadLoading=!1,e.$message.error("视频不超过50M！"),!1)},selfUploadVideo:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(e,a){var i,s,r,o,n,l;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return i=new FormData,i.append("type",e.type),i.append("corp_id",this.publishForm.corp_id),i.append("md5",a),s=new FormData,s=i,t.next=8,this.axios.post("moment/moments-upload",i);case 8:if(r=t.sent,o=r.data,""==o.data.local_path){t.next=16;break}this.uploadLoading=!1,this.publicOptions.sources=[{src:this.commonUrl+o.data.local_path,type:"video/mp4"}],this.publishForm.uploadVideo=o.data,t.next=23;break;case 16:if(""!=o.data.local_path){t.next=23;break}return s.append("fileInfo",e),t.next=20,this.axios.post("moment/moments-upload",s);case 20:n=t.sent,l=n.data,""!=l.data.local_path&&(this.uploadLoading=!1,this.publicOptions.sources=[{src:this.commonUrl+l.data.local_path,type:"video/mp4"}],this.publishForm.uploadVideo=l.data);case 23:this.callback("ok",this.publishForm,this.index);case 24:case"end":return t.stop()}}),t,this)})));function e(e,a){return t.apply(this,arguments)}return e}(),deleteVideo:function(){this.publicOptions.sources=[],0==this.publishForm.add_type?this.publishForm.uploadVideo=null:1==this.publishForm.add_type&&(this.publishForm.materialVideo=null),this.callback("ok",this.publishForm,this.index)},inputChange:function(){this.$test.empty(this.publishForm.uploadText.link)||this.getTextInfo()},getTextInfo:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(){var e,a,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return console.log(this.publishForm.uploadText.link,444),t.next=3,this.axios.post("moment/moments-images-text",{corp_id:this.publishForm.corp_id,url:this.publishForm.uploadText.link});case 3:if(e=t.sent,a=e.data,!this.$test.empty(this.publishForm.uploadText.link)){t.next=7;break}return t.abrupt("return");case 7:0!=a.error?(this.showTextContent=!1,this.publishForm.uploadText={},this.uploadTextSync={},this.$message.error(a.error_msg)):(this.showTextContent=!0,i=this.publishForm.uploadText.link,this.publishForm.uploadText=v({},a.data,{link:i}),this.uploadTextSync=v({link:i},a.data)),this.callback("ok",this.publishForm,this.index);case 9:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),beforeUpload:function(t){var e=this;if("image/jpg"!=t.type&&"image/jpeg"!=t.type&&"image/png"!=t.type)return this.$message.error("图片类型仅支持jpg、jpeg和png类型！"),!1;var a=t.size/1024/1024<2;return a?t.size<5?(this.$message.error("上传文件大小不符！"),this.desImgLoading=!1,!1):void this.getFileContent(t,(function(a){e.uploadCover(t,m()(a))})):(this.$message.error("图片不超过2M！"),this.desImgLoading=!1,!1)},uploadCover:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(e,a){var i,s,r,o,n,l;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return i=new FormData,s=new FormData,i.append("type",e.type),i.append("corp_id",this.publishForm.corp_id),i.append("md5",a),s=i,t.next=8,this.axios.post("moment/moments-upload",i);case 8:if(r=t.sent,o=r.data,0==o.error){t.next=14;break}this.$message.error(o.error_msg),t.next=24;break;case 14:if(""==o.data.local_path){t.next=18;break}this.publishForm.uploadText.url=o.data.s_local_path?o.data.s_local_path:o.data.local_path,t.next=24;break;case 18:return s.append("fileInfo",e),t.next=21,this.axios.post("moment/moments-upload",s);case 21:n=t.sent,l=n.data,""!=l.data.local_path&&(this.publishForm.uploadText.url=l.data.s_local_path?l.data.s_local_path:l.data.local_path);case 24:this.callback("ok",this.publishForm,this.index);case 25:case"end":return t.stop()}}),t,this)})));function e(e,a){return t.apply(this,arguments)}return e}(),getGroupList:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(){var e,a,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e={uid:localStorage.getItem("uid"),is_channel:1},t.next=3,this.axios.post("attachment/group",e);case 3:a=t.sent,i=a.data,0!=i.error?this.$message.error(i.error_msg):this.groupList=JSON.parse(JSON.stringify(i.data.group));case 6:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()}},w=y,k=(a("bab6"),a("2877")),A=Object(k["a"])(w,o,n,!1,null,"66c42a49",null),C=A.exports,F=a("c0c8"),S=a("c1df"),D=a.n(S),T={name:"addRulesPop",components:{publishContent:C,rulesPay:F["a"]},props:{rulesAdd:{type:Object,default:function(){return{time_type:1,time_one:"1",time_two:"0",contentData:[{}]}}},callback:{type:Function,default:null},index:{type:Number,default:-1},type:{type:[Number,String],default:function(){return 1}},follow_name:{type:[Number,String],default:function(){return""}},is_chat:{type:[String,Number],default:function(){return 0}}},computed:{contentData:function(){return this.rulesAddClone.contentData}},data:function(){return{rulesAddClone:{},isShowAddRulesPopf:!0}},watch:{index:{handler:function(t){this.rulesAddClone=this.rulesAdd},immediate:!0}},methods:{radioChange:function(t){var e=t.target.value;this.rulesAddClone.time_type=e,this.rulesAddClone.time_one="1",this.rulesAddClone.time_two=1==e?"0":"00:00"},moment:D.a,onChangeTimePicker:function(t,e){this.rulesAddClone.time_two=e},onChangeValue:function(t,e){t+="";var a=/^(\d*)\.\d*$/;switch(e){case"time_one":t=t.replace(a,"$1");break;case"time_two":1==this.rulesAddClone.time_type&&(t=t.replace(a,"$1"));break}var i=this.rulesAddClone;i[e]=t,this.rulesAddClone=i},addMsg:function(){this.rulesAddClone.contentData.push({})},delMsg:function(t){var e=this;this.$confirm({title:"确定删除吗？",content:"",okText:"确认",cancelText:"取消",onOk:function(){var a=f.a.cloneDeep(e.rulesAddClone.contentData);a.splice(t,1),e.rulesAddClone.contentData=[],e.$nextTick((function(){e.rulesAddClone.contentData=a}))}})},handleOk:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(){var e,a,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e=f.a.cloneDeep(this.rulesAddClone.contentData),a=0;case 2:if(!(a<e.length)){t.next=17;break}i=e[a],this.$test.empty(i)&&e.splice(a,1),t.t0=1*i.file_type,t.next=1===t.t0?8:3===t.t0?10:4===t.t0?12:14;break;case 8:return this.$test.empty(i.uploadImg)&&this.$test.empty(i.context)&&e.splice(a,1),t.abrupt("break",14);case 10:return 0==i.add_type?this.$test.empty(i.uploadVideo)&&this.$test.empty(i.context)&&e.splice(a,1):this.$test.empty(i.materialVideo)&&this.$test.empty(i.context)&&e.splice(a,1),t.abrupt("break",14);case 12:return 0==i.add_type?(console.log(i.uploadText,"@@@"),this.$test.empty(i.uploadText)&&this.$test.empty(i.context)&&e.splice(a,1)):this.$test.empty(i.materialText)&&this.$test.empty(i.context)&&e.splice(a,1),t.abrupt("break",14);case 14:a++,t.next=2;break;case 17:if(2==this.rulesAddClone.time_type&&""==this.rulesAddClone.time_two&&(this.rulesAddClone.time_two="00:00"),1!=this.rulesAddClone.time_type||this.rulesAddClone.time_one+this.rulesAddClone.time_two!=0){t.next=22;break}return t.abrupt("return",this.$message.warning("最小时间为0小时1分钟"));case 22:if(2!=this.rulesAddClone.time_type||0!=this.rulesAddClone.time_one){t.next=26;break}return t.abrupt("return",this.$message.warning("至少1天后"));case 26:if(!this.$test.empty(e)){t.next=30;break}return t.abrupt("return",this.$message.warning("消息内容未填写"));case 30:this.rulesAddClone.contentData=e,this.isShowAddRulesPopf=!1,this.callback("ok",this.rulesAddClone,this.index);case 33:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),contentReply:function(t,e,a){console.log(t,e,a,"22");var i=this.rulesAddClone.contentData;i[a]=e,this.rulesAddClone.contentData=f.a.cloneDeep(i),this.isShowAddRulesPopf||this.callback("ok",this.rulesAddClone,this.index)},handleCancel:function(t){this.callback("cancel",this.rulesAddClone,this.index)}}},I=T,O=(a("7e52"),Object(k["a"])(I,i,s,!1,null,"656b7b16",null));e["a"]=O.exports},"7e52":function(t,e,a){"use strict";var i=a("3b60"),s=a.n(i);s.a},"7fee":function(t,e,a){var i=a("b041");e=t.exports=a("2350")(!1),e.push([t.i,".ss-rules-box[data-v-d82b12fc]{width:720px}.ss-rules-l-b[data-v-d82b12fc]{width:1px;background:url("+i(a("a4b1b"))+") repeat-y}.ss-rules-pay-box[data-v-d82b12fc]{background:#f5f5f5}",""])},8171:function(t,e,a){e=t.exports=a("2350")(!1),e.push([t.i,".ss-pre[data-v-5af22e2f]{max-height:13rem;white-space:pre-wrap;overflow:auto}.ss-add-rules[data-v-5af22e2f]{background:#fff}",""])},"828e":function(t,e,a){"use strict";var i=a("c0a8"),s=a.n(i);s.a},"875d":function(t,e,a){var i=a("3ff8");"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var s=a("499e").default;s("0c85575b",i,!0,{sourceMap:!1,shadowMode:!1})},"8add":function(t,e,a){t.exports=a.p+"assets/img/deleteIcon.236acac9.png"},"8c10c":function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("a-modal",{staticClass:"msg-modal",attrs:{width:"888px!important",title:"选择群聊",zIndex:9999},on:{ok:t.handleOk,cancel:t.handleCancle},model:{value:t.chatVisible,callback:function(e){t.chatVisible=e},expression:"chatVisible"}},[a("div",{staticStyle:{display:"flex","justify-content":"flex-start"}},[a("a-input-search",{staticStyle:{width:"230px","margin-right":"10px"},attrs:{placeholder:"输入群名称"},on:{input:function(e){return t.getChatList(1)}},model:{value:t.searchValue,callback:function(e){t.searchValue=e},expression:"searchValue"}}),a("div",[a("a-select",{staticStyle:{width:"230px"},attrs:{showSearch:"",getPopupContainer:function(t){return t.parentNode},optionFilterProp:"children",placeholder:"群分组",allowClear:!0},on:{change:function(e){return t.getChatList(1)}},model:{value:t.chartGroup,callback:function(e){t.chartGroup=e},expression:"chartGroup"}},t._l(t.chartGroupList,(function(e){return a("a-select-option",{attrs:{value:e.id}},[t._v("\n\t\t\t\t\t\t"+t._s(e.group_name)+"\n\t\t\t\t\t")])})),1)],1),a("div",[1==t.isSop?a("a-button",{staticStyle:{"margin-left":"10px"},on:{click:t.clear}},[t._v("清空")]):t._e()],1)],1),t.noticeTitle?a("div",{staticStyle:{color:"#FF562D","margin-top":"10px"}},[t._v(t._s(t.noticeTitle))]):t._e(),a("p",{staticStyle:{margin:"10px 0"}},[t._v("全部群聊（"+t._s(t.count)+"）：")]),a("div",{staticClass:"chat-checkbox",staticStyle:{height:"300px"}},[a("a-checkbox-group",{key:t.checkedKey,attrs:{value:t.chatData}},t._l(t.chatList,(function(e){return a("a-row",[a("a-checkbox",{attrs:{value:e.chat_id,disabled:1==e.isRemind&&1==t.isDisable&&t.content(t.chatIds,e.chat_id)||1==t.isSop&&t.isSopChooseComp(t.chatData,e)},on:{click:function(a){return t.chooseChat(e.chat_id)}}},[0==e.avatarData.length?a("span",{staticStyle:{background:"#1890FF",width:"36px",height:"36px","margin-right":"5px","vertical-align":"top","border-radius":"4px",float:"left"}},[a("img",{staticStyle:{width:"20px",margin:"8px",height:"20px"},attrs:{src:t.img}})]):1==e.avatarData.length?a("span",{staticStyle:{background:"#DFDFDF",width:"36px",height:"36px","margin-right":"5px","vertical-align":"top","border-radius":"4px",float:"left"}},[""!=e.avatarData[0]?a("img",{staticStyle:{width:"36px",height:"36px"},attrs:{src:e.avatarData[0]}}):t._e(),""==e.avatarData[0]?a("img",{staticStyle:{width:"36px",height:"36px"},attrs:{src:t.img2}}):t._e()]):e.avatarData.length>1&&e.avatarData.length<=4?a("span",{staticStyle:{background:"#DFDFDF",width:"36px",height:"36px","margin-right":"5px","vertical-align":"top",display:"flex","flex-wrap":"wrap","justify-content":"space-around","border-radius":"4px",float:"left","align-items":"center"}},[t._l(e.avatarData,(function(e){return[""!=e?a("img",{staticStyle:{width:"17px",height:"17px"},attrs:{src:e}}):t._e(),""==e?a("img",{staticStyle:{width:"17px",height:"17px"},attrs:{src:t.img2}}):t._e()]}))],2):e.avatarData.length>4?a("span",{staticStyle:{background:"#DFDFDF",width:"36px",height:"36px","margin-right":"5px","vertical-align":"top",display:"flex","flex-wrap":"wrap","justify-content":"space-around","border-radius":"4px",float:"left","align-items":"center"}},[t._l(e.avatarData,(function(e){return[""!=e?a("img",{staticStyle:{width:"10px",height:"10px"},attrs:{src:e}}):t._e(),""==e?a("img",{staticStyle:{width:"10px",height:"10px"},attrs:{src:t.img2}}):t._e()]}))],2):t._e(),a("div",{staticStyle:{display:"inline-block","vertical-align":"top",width:"calc(100% - 80px)"}},[a("div",{staticClass:"flex items-center w-ful justify-between"},[a("div",[a("a-popover",{attrs:{placement:"topLeft",overlayStyle:{"z-index":999999999}}},[a("template",{slot:"content"},[t._v("\n\t\t\t\t\t\t\t\t\t\t\t"+t._s(e.name)+"\n\t\t\t\t\t\t\t\t\t\t")]),a("div",{staticClass:"ss-ellipsis-1 pr-10 ss-break-all"},[t._v("\n\t\t\t\t\t\t\t\t\t\t\t"+t._s(e.name)+"\n\t\t\t\t\t\t\t\t\t\t\t"),e.member_num&&1==t.isShowGroupOwner?a("span",[t._v("（"+t._s(e.member_num)+"）")]):t._e()])],2),e.name&&""!=e.name?t._e():a("div",[t._v("--")]),a("div",[0==t.isShowGroupOwner?a("span",[t._v(t._s(e.member_num)+"/200")]):t._e(),e.owner_name&&1==t.isShowGroupOwner?a("span",{staticStyle:{color:"#AAAAAA"}},[t._v("群主："+t._s(e.owner_name))]):t._e()])],1),1==t.isSop&&t.isSopChooseComp(t.chatData,e)?a("div",{staticClass:"flex-none"},[t._v("\n\t\t\t\t\t\t\t\t\t该群已有规则\n\t\t\t\t\t\t\t\t")]):t._e()])])])],1)})),1),a("div",{directives:[{name:"show",rawName:"v-show",value:t.count>0,expression:"count > 0"}],staticClass:"pagination",staticStyle:{width:"100%",margin:"20px 0px","padding-bottom":"20px",height:"50px"}},[a("div",{staticClass:"pagination",staticStyle:{height:"32px",float:"right"}},[a("a-pagination",{attrs:{total:t.count,showSizeChanger:"",showQuickJumper:!0,current:t.page2,pageSize:t.pageSize2,pageSizeOptions:["15","30","50","100"]},on:{change:t.getChatList,showSizeChange:t.getChatList}})],1)])],1)])],1)},s=[],r=(a("96cf"),a("3b8d")),o=(a("ac4d"),a("8a81"),a("ac6a"),a("c5f6"),a("bc3a")),n=a.n(o),l=a("e306"),c=a.n(l),p=a("4bef"),d=a.n(p),u=n.a.CancelToken,h=u.source(),m={name:"wxModal",props:{show:{type:Boolean,default:!1},chatIds:{type:Array,default:function(){return[]}},chatArr:{type:Array,default:function(){return[]}},chatArrt:{type:Array,default:function(){return[]}},callback:{type:Function,default:null},isDisable:{type:Number,default:0},corpId:{type:String,default:localStorage.getItem("corpId")?localStorage.getItem("corpId"):""},noticeTitle:{type:String,default:""},isRemindAll:{type:Number,default:0},is_list:{type:Number,default:0},isSop:{type:Number,default:0},isShowGroupOwner:{type:Number,default:0}},data:function(){localStorage.getItem("corpId")&&localStorage.getItem("corpId");return{img:c.a,img2:d.a,chartGroupList:[],chatVisible:!1,chatList:[],cancelFlag:!1,checkedKey:0,searchValue:"",page2:1,pageSize2:15,count:0,chatData:[],chooseNum:0,chartGroup:void 0}},methods:{content:function(t,e){var a=!0,i=!1,s=void 0;try{for(var r,o=t[Symbol.iterator]();!(a=(r=o.next()).done);a=!0){var n=r.value;if(n==e)return!1}}catch(l){i=!0,s=l}finally{try{a||null==o.return||o.return()}finally{if(i)throw s}}return!0},getChartGroupList:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(){var e,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.axios.post("work-chat/chat-group-list",{corp_id:this.corpId});case 2:e=t.sent,a=e.data,0!=a.error?this.$message.error(a.error_msg):([{group_name:"群分组",id:0}],this.chartGroupList=a.data.info,this.getChatList());case 5:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),isSopChooseComp:function(t,e){return 1==e.disabled&&-1==this.chatArrt.indexOf(e.chat_id)},getChatList:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(){var e,a,i,s,r=arguments;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=r.length>0&&void 0!==r[0]?r[0]:1,a=r.length>1&&void 0!==r[1]?r[1]:15,this.cancelFlag=!0,t.next=5,this.axios.post("work-chat/chat-list",{corp_id:this.corpId,name:this.searchValue,is_remind_all:this.isRemindAll,page:e,page_size:a,is_list:this.is_list,is_sop:this.isSop,group_id:this.chartGroup},{cancelToken:h.token});case 5:i=t.sent,s=i.data,0!=s.error?this.$message.error(s.error_msg):(this.count=s.data.count,this.cancelFlag=!1,this.page2=e,this.pageSize2=a,this.chatList=s.data.list);case 8:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),chooseChat:function(t){for(var e=!0,a=0;a<this.chatData.length;a++)this.chatData[a]==t&&(this.chatData.splice(a,1),e=!1);e&&this.chatData.push(t)},handleOk:function(){this.searchValue="",this.chooseNum=this.chatData.length,this.chatVisible=!1,null!==this.callback&&"function"===typeof this.callback&&this.callback("ok",this.chooseNum,this.chatData)},clear:function(){this.chooseNum=0,this.chatData=[]},handleCancle:function(){this.checkedKey++,this.cancelFlag&&h.cancel(),this.searchValue="",this.chatVisible=!1,this.chatData=[],this.chatList=[],null!==this.callback&&"function"===typeof this.callback&&this.callback("cancel")}},watch:{show:function(t){this.chatVisible=t,this.chatVisible&&(this.searchValue="",this.chartGroup=void 0,this.chatData=JSON.parse(JSON.stringify(this.chatArr)),this.getChartGroupList())}},mounted:function(){}},g=m,f=(a("2d3a"),a("2877")),b=Object(f["a"])(g,i,s,!1,null,"37bdbcfe",null);e["a"]=b.exports},"8e3c":function(t,e,a){var i=a("9125");"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var s=a("499e").default;s("1b2c097c",i,!0,{sourceMap:!1,shadowMode:!1})},9125:function(t,e,a){e=t.exports=a("2350")(!1),e.push([t.i,"[data-v-37bdbcfe] .ant-radio-button-wrapper{width:200px;height:55px;line-height:47px;padding:0 10px;margin:10px 5px}[data-v-37bdbcfe] .ant-radio-group{vertical-align:top}.chat-checkbox[data-v-37bdbcfe] .ant-checkbox-wrapper{width:100%;border-bottom:1px dashed #e9e9e9;padding:10px 0}.chat-checkbox[data-v-37bdbcfe] .ant-checkbox{float:right;margin-top:15px}.noMore[data-v-37bdbcfe]{text-align:center;padding:10px 0;font-size:12px;color:#999}.dropdown-style[data-v-37bdbcfe] .ant-select-dropdown{z-index:99999999999!important}",""])},a4b1b:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAAFCAIAAAAL5hHIAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyNpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTQ4IDc5LjE2NDAzNiwgMjAxOS8wOC8xMy0wMTowNjo1NyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIDIxLjAgKFdpbmRvd3MpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjk0OUU2QzNFNzc0NTExRUI4MjVFOEQxMzU2MDkyMDc0IiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjk0OUU2QzNGNzc0NTExRUI4MjVFOEQxMzU2MDkyMDc0Ij4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6OTQ5RTZDM0M3NzQ1MTFFQjgyNUU4RDEzNTYwOTIwNzQiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6OTQ5RTZDM0Q3NzQ1MTFFQjgyNUU4RDEzNTYwOTIwNzQiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz5QyPlmAAAAGklEQVR42mK4cf8JEwMDAwgz/P//H0QDBBgAQRwFn64+HBQAAAAASUVORK5CYII="},aa3a:function(t,e,a){"use strict";var i=a("6b96"),s=a.n(i);s.a},b11d:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADsAAAA7CAIAAABKR2XkAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAAEXRFWHRTb2Z0d2FyZQBTbmlwYXN0ZV0Xzt0AAAThSURBVGiB7ZrfS9tcGMe/SZPYmlGnrngxFEq3wty0imN0ypChMvGipV2ZN9tf4f/hpci8UPEHIkVQr4YUdlG2QVnFiaAIzkVbstpkmHa11dNmFxm+o74T0jZOoZ+rQ3p4zqdPT57TcxIqm80WCgVCSD6fLxQKuK5QFGUymTiOYwAQQgghqqr+a6vLUFWVEEJRFA0gn89fc91zCCE0gOs8GYpQVZX+1w66qRobT9XYeKrGxlM1Np6bZ8xczTCEEEVRVFW1Wq0sy5YTynBjQsjHjx/X1tay2SwAhmF6e3v7+voYpsShqWw2+/Pnz4pK/sfh4eHq6urXr1+Lrjc1NXm9XofDQVGU3pgGGkuSND4+fnx8DMBut3d3d7MsG4lEtra2ANTX14+MjHAcpzesUcaCICwsLCSTSZ7nPR6Py+Wi6d93+ebm5uLiYi6Xc7vdfr9fb2RDaoUkSfPz88lk0mQyvXr1qrOz81wXQFtb25MnTwB8+vQpk8noDV55Y0EQJicnZVnmef7169cPHjy42Ofx48da4+joSG/8CtcKLbuyLGvZ/V9dALW1tVojn8/rHaKSxqIoTk9Py7JssVgu0QWwvr6uNRoaGvSOUjHj09PTlZUVSZI4jhseHm5tbdV2uxfrVyKReP/+PQCHw3H79m29A1VsHsfj8f39fZPJ5PV6W1tb0+l0MBhcW1sr6qYoSjAYzGQyPM/7fL4SBqpYjqPRKCGkqampvb0dwN7eXiQSAUDT9PPnz00mEwBZlicmJiRJYhimv7/fZrOVMFDFcpxIJADYbLaamhoATqfz/v37AMLh8Pfv3wFks9mZmRlJkmpqagKBwNOnT0tY8Mo1liTp27dvZ2dnAMxmM4B0Oq1NX7PZ7PP56urqMpnMxsYGAEEQ4vE4TdMvXrwoqtBXZCwIwtjY2NjY2OfPnwHcu3dP+w7JZFLr0NjY2NLSAmB3dxeA3W73+Xxv3rzp7u4uLbtlGUuStLCwkEqlLBZLc3MzgPb2dqvVmkql3r17d3JyAoCiqDt37gBIp9MAWJZ1u90PHz4sObulG8disfHxcW0RDgQCd+/eBXDr1q2enh4AX758+fDhAwBVVUVRBFBXV1eOYhG6awUhZHl5+fj4mOf5P5cJmqZ7e3tFURRFUct6PB4/ODgAcMlSchXG4XB4f38fgMfjKVKhaXp4eDiXy1ksllQqFQwG0+m01Wp99OhRpXSh15gQEgqFADidTpfLdbEDTdMWi0WW5fn5+VgsxnHcwMBAaXX3b+gzVhQll8sB6Onp+dsNpCjK1NSUKIosy/r9/o6OjnIqw0X0GZ8fjP9t7/Djx4+5uTlRFDmOGxwc7OjoKLMyXERfOKvVqiVMW4GLUBTl7du3giAwDOP3+y/5HcpBX0SWZbUSFo1Gd3Z2/vwokUjMzs5qi/DQ0FDFJ8M5uvd5Z2dno6OjkiSZzeZnz551dXVxHLe+vh4KhTKZDMMwgUCgs7PTIN1SjAFsb28Hg0FFUYqu8zw/MDDgdruNmAznlGKsqurp6enS0tL5VgKA3W5/+fKlzWYzLrsaZe3+FUU5OjoqFAqNjY0l7H9Kw9gzISO4eWebVWPjqRobT9XYeKrGxlM1Np6baWz0/8MK8vtdLO2o9EbAaA8uOY6jKOqav/JGURTDMCzLUtrD1xvEL6lgHVOz/2g5AAAAAElFTkSuQmCC"},b27d:function(t,e,a){var i=a("7fee");"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var s=a("499e").default;s("9cc9df56",i,!0,{sourceMap:!1,shadowMode:!1})},ba97:function(t,e,a){e=t.exports=a("2350")(!1),e.push([t.i,".content[data-v-66c42a49]{width:100%}.pic[data-v-66c42a49] .ant-upload.ant-upload-select-picture-card:hover{border-color:#fff;border:1px dashed #d9d9d9}[data-v-66c42a49] .ant-upload{position:relative}.local[data-v-66c42a49]:hover,.material_image[data-v-66c42a49]:hover{color:#0a98d5}.video-show[data-v-66c42a49]{width:14rem;height:8rem;text-align:center;background-color:#000}.material_video[data-v-66c42a49]:hover{color:#0a98d5}.material_video[data-v-66c42a49]{cursor:pointer;position:relative}.material_image[data-v-66c42a49],.material_video[data-v-66c42a49]{width:101.8px;height:101.8px;background-color:#fafafa;border:1px dashed #d9d9d9;text-align:center;padding:2.08rem 0 0 0;color:rgba(0,0,0,.65)}.material_image[data-v-66c42a49]{margin:2px 0 1rem 0;position:absolute;left:7rem;top:-.14rem}.title[data-v-66c42a49]{font-size:16px;font-weight:600}.content_container[data-v-66c42a49]{padding:2% 5%;width:100%;background-color:#f1f3f5}.ant-divider-horizontal[data-v-66c42a49]{margin:.64rem 0}.before_choose[data-v-66c42a49]{height:7.253rem;font-size:.907rem;line-height:7.253rem;text-align:center;cursor:pointer;border:1px dashed #ccc;width:95%;margin:0 2.5%}.content_input[data-v-66c42a49]{background:#fff;min-width:378px;height:100px;margin-top:5px;display:-webkit-box;display:-ms-flexbox;display:flex}.input_text1[data-v-66c42a49]{width:200px;line-height:30px;margin:15px 0 5px 15px;text-overflow:ellipsis;white-space:nowrap;font-size:18px;color:#000}.input_text1[data-v-66c42a49],.input_text2[data-v-66c42a49]{overflow:hidden;word-break:break-all}.input_text2[data-v-66c42a49]{width:250px;line-height:20px;margin:0 0 0 15px;display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:2}.input_img[data-v-66c42a49]{width:80px;height:80px;-o-object-fit:contain;object-fit:contain}.link_cover[data-v-66c42a49] .ant-upload.ant-upload-select-picture-card{width:0;height:0;background-color:#f1f3f5;border:none}",""])},bab6:function(t,e,a){"use strict";var i=a("60fa"),s=a.n(i);s.a},c0a8:function(t,e,a){var i=a("6193");"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var s=a("499e").default;s("1bb57796",i,!0,{sourceMap:!1,shadowMode:!1})},c0c8:function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"py-10"},[t._l(t.rules,(function(e,s){return i("div",{key:s},[e.context?i("div",{staticClass:"p-10 text-14 text-gray-900 ss-pre my-10 block br5 ss-break-all",class:[t.isAdd?"bg-white":"ss-add-rules"]},[t._v(t._s(e.context))]):t._e(),1==e.file_type&&e.uploadImg.length>0?i("div",{staticClass:"my-10 flex flex-wrap"},t._l(e.uploadImg,(function(e,a){return i("div",{key:a,staticClass:"mr-10"},[i("img",{staticClass:"w-100 h-100 object-cover",attrs:{src:t.$store.state.commonUrl+e.local_path,alt:""}})])})),0):t._e(),e.uploadVideo&&e.uploadVideo.local_path&&0==e.add_type&&3==e.file_type?i("div",{staticClass:"my-10"},[i("app-video",{attrs:{src:t.$store.state.commonUrl+e.uploadVideo.local_path}})],1):t._e(),e.materialVideo&&e.materialVideo.local_path&&1==e.add_type&&3==e.file_type?i("div",{staticClass:"my-10"},[i("app-video",{attrs:{src:t.$store.state.commonUrl+e.materialVideo.local_path}})],1):t._e(),e.uploadText&&0==e.add_type&&4==e.file_type&&(e.uploadText.url||e.uploadText.title||e.uploadText.description)?i("div",{staticClass:"p-10 flex bg-white my-10 bg-white flex br5 bg-white"},[i("div",{staticClass:"bg-gray-201 w-80 h-80 mr-10"},[e.uploadText.url?i("img",{staticClass:"w-80 h-80 block object-cover",attrs:{src:t.$store.state.commonUrl+e.uploadText.url,alt:""}}):i("img",{staticClass:"w-80 h-80 block object-cover",attrs:{src:a("b11d"),alt:""}})]),i("div",{staticClass:" "},[i("div",{staticClass:"text-15 text-gray-900 mb-5 ss-break-all ss-ellipsis"},[t._v(t._s(e.uploadText.title))]),i("div",{staticClass:"text-12 text-gray-501 ss-ellipsis-2 ss-break-all"},[t._v(t._s(e.uploadText.description))])])]):t._e(),e.materialText&&1==e.add_type&&4==e.file_type?i("div",{staticClass:"p-10 flex bg-white my-10 bg-white br5 bg-white"},[e.materialText.url?i("div",{staticClass:"bg-gray-201 w-80 h-80 mr-10"},[e.materialText.url?i("img",{staticClass:"w-80  h-80 block object-cover",attrs:{src:t.$store.state.commonUrl+e.materialText.url,alt:""}}):i("img",{staticClass:"w-80 h-80 block object-cover",attrs:{src:a("b11d"),alt:""}})]):t._e(),i("div",{},[i("div",{staticClass:"text-15 text-gray-900 mb-5 ss-break-all ss-ellipsis"},[t._v(t._s(e.materialText.title))]),i("div",{staticClass:"text-12 text-gray-501 ss-ellipsis-2 ss-break-all"},[t._v(t._s(e.materialText.description))])])]):t._e()])})),t.isAdd?t._e():i("div",{staticClass:"py-5 text-gray-501 text-14"},[t._v("共"+t._s(t.count)+"条")])],2)},s=[],r=(a("ac6a"),a("c5f6"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("video-player",{ref:"videoPlayer",staticClass:"video-player vjs-custom-skin",staticStyle:{width:"200px"},attrs:{playsinline:!0,options:t.publicOptions}})],1)}),o=[],n=a("d6d3"),l={name:"Video",props:{src:{type:String,default:function(){return""}}},components:{videoPlayer:n["videoPlayer"]},watch:{src:{handler:function(t){var e=this;t&&this.$nextTick((function(){e.publicOptions.sources=[{src:t,type:"video/mp4"}]}))},immediate:!0}},data:function(){return{publicOptions:{sources:[],playbackRates:[.7,1,1.5,2],autoplay:!1,muted:!1,loop:!1,preload:"auto",language:"zh-CN",aspectRatio:"1:1",fluid:!0,notSupportedMessage:"此视频暂无法播放，请稍后再试",controlBar:{timeDivider:!0,durationDisplay:!0,remainingTimeDisplay:!1,fullscreenToggle:!0}}}}},c=l,p=a("2877"),d=Object(p["a"])(c,r,o,!1,null,"5d90d4d9",null),u=d.exports,h={name:"rulesPay",components:{appVideo:u},props:{rules:{type:Array,default:function(){return[]}},isAdd:{type:[Number,Array],default:function(){return 0}}},computed:{count:function(){var t=0;return this.rules.forEach((function(e,a){e.context&&t++,1==e.file_type&&e.uploadImg.length>0&&t++,e.uploadVideo&&e.uploadVideo.local_path&&0==e.add_type&&3==e.file_type&&t++,e.materialVideo&&e.materialVideo.local_path&&1==e.add_type&&3==e.file_type&&t++,e.uploadText&&0==e.add_type&&4==e.file_type&&(e.uploadText.url||e.uploadText.title||e.uploadText.description)&&t++,e.materialText&&1==e.add_type&&4==e.file_type&&t++})),t}},data:function(){return{}}},m=h,g=(a("0217"),Object(p["a"])(m,i,s,!1,null,"5af22e2f",null));e["a"]=g.exports},dd44:function(t,e,a){"use strict";var i=a("5b44"),s=a.n(i);s.a},e306:function(t,e,a){t.exports=a.p+"assets/img/chat.29abd713.png"},e33a:function(t,e,a){"use strict";var i=a("875d"),s=a.n(i);s.a}}]);