(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3b13c249"],{"95bf":function(t,e,a){"use strict";var n=a("af02"),i=a.n(n);i.a},af02:function(t,e,a){var n=a("e223");"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var i=a("499e").default;i("0bbb01c9",n,!0,{sourceMap:!1,shadowMode:!1})},d13f:function(t,e){t.exports="data:image/png;base64,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"},d6f9:function(t,e,a){t.exports=a.p+"assets/img/staging.22253d22.jpg"},e223:function(t,e,a){e=t.exports=a("2350")(!1),e.push([t.i,".content-msg[data-v-4709f3c6]{width:100%;border:1px solid #ffdda6;background:#fff2db;padding:10px;margin-top:12px}.agent-box[data-v-4709f3c6]{border:1px solid #e8e8e8;height:95px;padding:24px;cursor:pointer;-webkit-transition:all .3s;transition:all .3s;margin-bottom:12px}.agent-box[data-v-4709f3c6]:hover{border-color:rgba(0,0,0,.09);-webkit-box-shadow:0 2px 8px rgba(0,0,0,.09);box-shadow:0 2px 8px rgba(0,0,0,.09)}.agent-box.agent-add[data-v-4709f3c6]{text-align:center}.agent-box .agent-logo[data-v-4709f3c6]{float:left;padding-right:16px}.agent-box .agent-info[data-v-4709f3c6]{overflow:hidden}.agent-box .agent-info>div[data-v-4709f3c6]:not(:last-child){margin-bottom:8px}.agent-box .agent-info .agent-title[data-v-4709f3c6]{color:rgba(0,0,0,.85);font-weight:500;font-size:16px;white-space:nowrap;text-overflow:ellipsis;overflow:hidden}.agent-box .agent-info .agent-desc[data-v-4709f3c6]{color:rgba(0,0,0,.45);white-space:nowrap;text-overflow:ellipsis;overflow:hidden}.agent-box .add-btn[data-v-4709f3c6]{height:47px;font-size:25px;line-height:47px}.agent-info-box .agent-info-item[data-v-4709f3c6]{margin-bottom:15px}.agent-info-box .agent-info-item .agent-info-logo[data-v-4709f3c6]{float:right;width:60px;height:60px;margin-top:5px;margin-right:5px}.agent-info-box .agent-info-item .agent-info-label[data-v-4709f3c6]{text-align:right}.agent-info-box .agent-info-item .agent-name-box[data-v-4709f3c6]{height:40px;padding:5px 0}.agent-info-box .agent-info-item .agent-name-box .agent-name[data-v-4709f3c6]{font-size:20px;line-height:30px;display:inline-block;vertical-align:middle}.agent-info-box .agent-info-item .agent-description-box[data-v-4709f3c6]{height:32px}.agent-info-box .agent-info-item .agent-description-box .agent-description[data-v-4709f3c6]{font-size:14px;line-height:21px;display:inline-block;vertical-align:middle;margin-top:5px}.agent-info-box .agent-info-item .agent-description-box .agent-description-edit[data-v-4709f3c6]{display:inline-block;margin-top:5px}.agent-info-box .agent-info-item .agent-info-edit[data-v-4709f3c6]{margin-left:10px;cursor:pointer;vertical-align:middle}.agent-id[data-v-4709f3c6]{display:inline-block;width:276px;overflow:hidden;white-space:nowrap;text-overflow:ellipsis}[data-v-4709f3c6] .ant-upload-list{display:none}.prompt[data-v-4709f3c6]{position:absolute;right:0;top:0;background:rgba(255,0,0,.6);color:#fff;padding:2px 5px;border-radius:8px}",""])},ff2b:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticStyle:{width:"100%","max-height":"100%",position:"absolute","overflow-y":"auto","padding-bottom":"30px"}},[n("div",[n("a-card",{staticStyle:{"margin-bottom":"20px",padding:"10px 20px"}},[n("label",{staticClass:"tpl-title"},[t._v("应用中心")])]),t.corpInfo.length>1?n("a-row",{staticStyle:{"margin-bottom":"20px",padding:"0 20px"}},[n("a-col",{staticStyle:{float:"left"}},[n("a-select",{staticStyle:{width:"200px"},attrs:{showSearch:"",optionFilterProp:"children"},on:{change:t.handleChange},model:{value:t.corpId,callback:function(e){t.corpId=e},expression:"corpId"}},[t._l(t.corpInfo,(function(e){return[n("a-select-option",{attrs:{value:e.corpid}},[t._v("\n\t\t\t\t\t\t\t"+t._s(e.corp_full_name||e.corp_name)+"\n\t\t\t\t\t\t")])]}))],2)],1)],1):t._e(),n("div",{staticClass:"content-bd"},[n("a-spin",{attrs:{tip:"Loading...",size:"large",spinning:t.isLoading}},[n("div",{staticClass:"spin-content"},[n("a-row",{staticStyle:{"margin-bottom":"20px",padding:"0 20px"}},[n("a-col",{attrs:{span:24}},[n("a-card",{attrs:{title:"系统应用"}},[n("div",{staticStyle:{padding:"32px 32px 20px 32px"}},[n("a-row",{attrs:{gutter:10}},t._l(t.auth,(function(e){return n("a-col",{directives:[{name:"has",rawName:"v-has",value:"agent-list",expression:"'agent-list'"}],attrs:{span:6}},[n("div",{staticClass:"agent-box",on:{click:function(a){return t.addAccount(e.id,e.has_auth,e.forbidden_auth)}}},[n("div",{staticClass:"agent-logo"},[n("a-avatar",{attrs:{slot:"avatar",src:e.logo_url},slot:"avatar"})],1),n("div",{staticClass:"agent-info"},[n("div",{staticClass:"agent-title"},[t._v(t._s(e.name))]),n("div",{staticClass:"agent-desc"},[t._v(t._s(e.description))])])])])})),1)],1)])],1)],1),t.corpInfo.length>0?n("a-row",{staticStyle:{"margin-bottom":"20px",padding:"0 20px"}},[n("a-col",{attrs:{span:24}},[n("a-card",[n("div",{attrs:{slot:"title"},slot:"title"},[t._v("基础应用\n\t\t\t\t\t\t\t\t")]),n("div",{staticStyle:{padding:"32px 32px 20px 32px"}},[n("a-row",{attrs:{gutter:10}},[n("a-col",{attrs:{span:6}},[t.hasConfigure?t._e():n("div",{staticClass:"prompt"},[t._v("未配置")]),n("div",{staticClass:"agent-box",on:{click:t.showPaymentVisible}},[n("div",{staticClass:"agent-logo"},[n("a-avatar",{attrs:{slot:"avatar",shape:"square",src:t.png},slot:"avatar"})],1),n("div",{staticClass:"agent-info"},[n("div",{staticClass:"agent-title"},[t._v("企业支付")])])])])],1)],1)])],1)],1):t._e(),t.corpInfo.length>0?[n("a-row",{staticStyle:{"margin-bottom":"20px",padding:"0 20px"}},[n("a-col",{attrs:{span:24}},[n("a-card",[n("span",{attrs:{slot:"title"},slot:"title"},[n("span",{staticStyle:{"line-height":"32px"}},[t._v("自建应用")]),n("a-button",{staticStyle:{float:"right"},attrs:{type:"primary",icon:"reload",loading:t.updateLoading},on:{click:t.updateAgent}},[t._v("同步应用")])],1),n("a-row",[n("a-col",{staticStyle:{padding:"0 32px"}},[n("div",{staticClass:"content-msg"},[n("p",{staticStyle:{"margin-bottom":"0px",color:"red"}},[t._v("\n\t\t\t\t\t\t\t\t\t\t\t\t\t配置的应用名称必须以【"+t._s(t.$store.state.shortName)+"】开头。（例如："+t._s(t.$store.state.siteName)+"）\n\t\t\t\t\t\t\t\t\t\t\t\t")])])])],1),n("div",{staticStyle:{padding:"32px 32px 20px 32px"}},[n("a-row",{attrs:{gutter:16}},[t._l(t.normal.custom,(function(e,a){return n("a-col",{directives:[{name:"has",rawName:"v-has",value:"agent-list",expression:"'agent-list'"}],attrs:{span:6}},[n("div",{staticClass:"agent-box",on:{click:function(n){return t.getAgentInfo(e.id,a)}}},[n("div",{staticClass:"agent-logo"},[n("a-avatar",{attrs:{slot:"avatar",src:e.square_logo_url},slot:"avatar"})],1),n("div",{staticClass:"agent-info"},[n("div",{staticClass:"agent-title"},[t._v(t._s(e.name))]),n("div",{staticClass:"agent-desc"},[t._v(t._s(e.description))])])])])})),n("a-col",{directives:[{name:"has",rawName:"v-has",value:"agent-add",expression:"'agent-add'"}],attrs:{span:6}},[n("div",{staticClass:"agent-box agent-add",on:{click:function(e){return t.showAddAgent()}}},[n("span",{staticClass:"add-btn"},[n("a-icon",{attrs:{type:"plus"}})],1)])])],2)],1)],1)],1)],1)]:t._e()],2)])],1)],1),n("authorize-corp",{attrs:{show:t.showCorpModal,cnfId:t.cnfId},on:{cancel:t.cancel}}),n("a-modal",{attrs:{title:t.addAgentModalTitle,width:"600px"},on:{ok:t.addAgent,cancel:t.addAgentCancel},model:{value:t.showAddAgentModal,callback:function(e){t.showAddAgentModal=e},expression:"showAddAgentModal"}},["配置企业支付应用"==t.addAgentModalTitle?n("div",{staticClass:"content-msg",staticStyle:{"margin-top":"0","margin-bottom":"15px"}},[n("p",{staticStyle:{"margin-bottom":"0px"}},[t._v('\n\t\t\t\t请前往企业微信管理后台— “应用管理"--"应用”—“企业支付”，申请开通企业支付。\n\t\t\t\t开通后，请将企业支付的Agentid和Secret复制填到此处。\n\t\t\t')])]):t._e(),"添加自建应用"==t.addAgentModalTitle?n("div",{staticClass:"content-msg",staticStyle:{"margin-top":"0","margin-bottom":"15px"}},[0==t.agentCount?n("p",{staticStyle:{"margin-bottom":"2px"}},[t._v("\n\t\t\t\t请先添加自建应用，系统才可使用。\n\t\t\t")]):t._e(),n("p",{staticStyle:{"margin-bottom":"0px"}},[t._v("\n\t\t\t\t请登录企业微信官方后台，在应用管理-应用-自建应用，找到您已建好应用的AgentId和Secret，并复制到下面的输入框。提交后将该应用添加到本系统里。\n\t\t\t")])]):t._e(),n("a-form-item",{attrs:{"label-col":{span:4},"wrapper-col":{span:18}}},[n("template",{slot:"label"},[n("span",{staticStyle:{color:"red"}},[t._v(" * ")]),t._v("应用Id\n\t\t\t")]),n("a-input",{attrs:{placeholder:"请输入应用AgentId"},model:{value:t.addAgentId,callback:function(e){t.addAgentId=e},expression:"addAgentId"}})],2),n("a-form-item",{attrs:{"label-col":{span:4},"wrapper-col":{span:18}}},[n("template",{slot:"label"},[n("span",{staticStyle:{color:"red"}},[t._v(" * ")]),t._v("应用Secret\n\t\t\t")]),n("a-input",{attrs:{placeholder:"请输入应用Secret"},model:{value:t.addAgentSecret,callback:function(e){t.addAgentSecret=e},expression:"addAgentSecret"}})],2)],1),n("a-modal",{attrs:{title:"应用详情",width:"600px"},on:{cancel:t.agentInfoCancel},model:{value:t.showAgentInfoModal,callback:function(e){t.showAgentInfoModal=e},expression:"showAgentInfoModal"}},[n("template",{slot:"footer"},[n("a-button",{attrs:{type:"primary",loading:t.refreshLoading},on:{click:function(e){return t.refreshAgent(t.agentInfo.id)}}},[t._v("同步")])],1),n("div",{staticClass:"agent-info-box"},[n("a-row",{staticClass:"agent-info-item",attrs:{gutter:16}},[n("a-col",{attrs:{span:8}},[n("a-avatar",{staticClass:"agent-info-logo",attrs:{shape:"square",size:"large",src:t.agentInfo.square_logo_url}})],1),n("a-col",{attrs:{span:16}},[n("div",{staticClass:"agent-name-box"},[2==t.agentInfo.agentType?[n("span",{directives:[{name:"show",rawName:"v-show",value:!t.agentNameVisible,expression:"!agentNameVisible"}],staticClass:"agent-name"},[t._v(t._s(t.agentInfo.name))]),n("span",{directives:[{name:"show",rawName:"v-show",value:!t.agentNameVisible,expression:"!agentNameVisible"}],staticClass:"agent-info-edit",on:{click:function(e){return t.modifyAgentName(t.agentInfo.name,t.agentInfo.name.length)}}},[n("a-icon",{attrs:{type:"edit",alt:""}})],1),n("a-input-search",{directives:[{name:"show",rawName:"v-show",value:t.agentNameVisible,expression:"agentNameVisible"}],ref:"agent_name_input",staticClass:"agent-name-input",attrs:{placeholder:"输入应用名称","data-aid":t.agentInfo.id,maxLength:32},on:{search:t.setAgentName,change:t.agentNameChange},model:{value:t.agentInfoName,callback:function(e){t.agentInfoName=e},expression:"agentInfoName"}},[n("span",{attrs:{slot:"suffix"},slot:"suffix"},[n("span",[t._v(t._s(t.agentNameLength))]),t._v("/32\n\t\t\t\t\t\t\t")]),n("a-button",{attrs:{slot:"enterButton","data-wk":t.corpId,"data-aid":t.agentInfo.id,type:"primary"},slot:"enterButton"},[n("a-icon",{attrs:{type:"check"}})],1)],1)]:[n("span",{staticClass:"agent-name"},[t._v(t._s(t.agentInfo.name))])]],2),n("div",{staticClass:"agent-description-box"},[2==t.agentInfo.agentType?[n("span",{directives:[{name:"show",rawName:"v-show",value:!t.agentDescVisible,expression:"!agentDescVisible"}],staticClass:"agent-description"},[t._v(t._s(t.agentInfo.description))]),n("span",{directives:[{name:"show",rawName:"v-show",value:!t.agentDescVisible,expression:"!agentDescVisible"}],staticClass:"agent-info-edit agent-description-edit",on:{click:function(e){null!=t.agentInfo.description?t.modifyAgentDesc(t.agentInfo.description,t.agentInfo.description.length):t.modifyAgentDesc(t.agentInfo.description,0)}}},[n("a-icon",{attrs:{type:"edit",alt:""}})],1),n("a-input-search",{directives:[{name:"show",rawName:"v-show",value:t.agentDescVisible,expression:"agentDescVisible"}],ref:"agent_description_input",staticClass:"agent-description-input",attrs:{placeholder:"输入应用详情","data-aid":t.agentInfo.id,minlength:"4",maxLength:120},on:{search:t.setAgentDesc,change:t.agentDescChange},model:{value:t.agentInfoDesc,callback:function(e){t.agentInfoDesc=e},expression:"agentInfoDesc"}},[n("span",{attrs:{slot:"suffix"},slot:"suffix"},[n("span",[t._v(t._s(t.agentDescLength))]),t._v("/120\n\t\t\t\t\t\t\t\t")]),n("a-button",{attrs:{slot:"enterButton","data-wk":t.corpId,"data-aid":t.agentInfo.id,type:"primary"},slot:"enterButton"},[n("a-icon",{attrs:{type:"check"}})],1)],1)]:[n("span",{staticClass:"agent-description"},[t._v(t._s(t.agentInfo.description))])]],2)])],1),n("a-row",{staticClass:"agent-info-item",attrs:{gutter:16}},[n("a-col",{staticClass:"agent-info-label",attrs:{span:8}},[t._v("可信域名：")]),n("a-col",{attrs:{span:16}},[t._v(t._s(t.agentInfo.redirect_domain))]),t.agentInfo.redirect_domain?t._e():n("a-col",{attrs:{span:16}},[n("a",{staticClass:"el-link el-link&#45;&#45;primary",attrs:{href:"https://work.weixin.qq.com/wework_admin/loginpage_wx?from=myhome_0010506211&ref_from=myhome_ref_sem_baidu_p",target:"_blank"}},[n("span",{staticClass:"el-link&#45;&#45;inner"},[t._v("去设置")])]),t._v("\n\t\t\t\t\t（\n\t\t\t\t\t"),n("a",{staticClass:"el-link el-link&#45;&#45;primary",attrs:{href:t.$store.state.commonUrl+"/upload/slider.png",target:"_blank"}},[n("span",{staticClass:"el-link&#45;&#45;inner"},[t._v(" 查看图示")])]),t._v("\n\t\t\t\t\t）\n\t\t\t\t\t"),n("a-tooltip",{attrs:{placement:"top"}},[n("template",{slot:"title"},[n("span",[t._v("进入企业微信官方后台--应用管理--点击进入某个自用应用，将 "+t._s(t.$store.state.redirectDomain)+" 复制填写到输入框内")])]),n("a-icon",{staticStyle:{"margin-left":"5px"},attrs:{type:"question-circle"}})],2)],1)],1),n("a-row",{staticClass:"agent-info-item",attrs:{gutter:16}},[n("a-col",{staticClass:"agent-info-label",attrs:{span:8}},[t._v("主页地址：")]),n("a-col",{attrs:{span:16}},[t._v(t._s(t.agentInfo.home_url))])],1),n("a-row",{staticClass:"agent-info-item",attrs:{gutter:16}},[n("a-col",{staticClass:"agent-info-label",attrs:{span:8}},[t._v("地理位置：")]),0==t.agentInfo.report_location_flag?n("a-col",{attrs:{span:16}},[t._v("不上报")]):n("a-col",{attrs:{span:16}},[t._v("上报")])],1),n("a-row",{staticClass:"agent-info-item",attrs:{gutter:16}},[n("a-col",{staticClass:"agent-info-label",attrs:{span:8}},[t._v("用户进入应用事件：")]),0==t.agentInfo.isreportenter?n("a-col",{attrs:{span:16}},[t._v("不接收")]):n("a-col",{attrs:{span:16}},[t._v("接收")])],1),n("a-row",{staticClass:"agent-info-item",attrs:{gutter:16}},[n("a-col",{staticClass:"agent-info-label",attrs:{span:8}},[t._v("上传校验文件：")]),n("a-upload",{attrs:{name:"file",accept:".txt",multiple:!0,action:"https://www.mocky.io/v2/5cc8019d300000980a055e76",beforeUpload:t.beforeUpLoadInfo,customRequest:t.selfUpLoadInfo},on:{change:t.handleSidebarCancel}},[n("a-button",[n("a-icon",{attrs:{type:"upload"}}),t._v("\n\t\t\t\t\t\t上传文件\n\t\t\t\t\t")],1)],1),n("a",{staticClass:"el-link el-link--primary",attrs:{href:t.$store.state.commonUrl+"/upload/slider.png",target:"_blank"}},[n("span",{staticClass:"el-link--inner"},[t._v(" 查看图示")])])],1),n("a-row",{staticClass:"agent-info-item",attrs:{gutter:16}},[n("a-col",{staticClass:"agent-info-label",attrs:{span:8}}),n("div",{staticStyle:{color:"rgb(153, 153, 153)"}},[t._v("请上传txt格式的校验文件，用于完成域名归属验证。")])],1),n("a-row",{staticClass:"agent-info-item",attrs:{gutter:16}},[n("a-col",{staticClass:"agent-info-label",attrs:{span:8}},[t._v("内容引擎页面地址：")]),n("span",{staticClass:"agent-id"},[t._v("\n\t\t\t\t\t"+t._s(t.$store.state.h5Url)+"/h5/pages/slider/index?agentId="+t._s(t.agentInfo.id)+"&corpid="+t._s(t.corpId)+"\n\t\t\t\t")]),n("a",{staticStyle:{"margin-left":"10px","vertical-align":"top"},on:{click:function(e){return t.copyText(t.$store.state.h5Url+"/h5/pages/slider/index?agentId="+t.agentInfo.id+"&corpid="+t.corpId)}}},[t._v("复制")])],1),n("a-row",{staticClass:"agent-info-item",attrs:{gutter:16}},[n("a-col",{staticClass:"agent-info-label",attrs:{span:8}},[t._v("客户详情页地址：")]),n("span",{staticClass:"agent-id"},[t._v("\n\t\t\t\t\t"+t._s(t.$store.state.h5Url)+"/h5/pages/customDetail/index?agent_id="+t._s(t.agentInfo.id)+"&corpid="+t._s(t.corpId)+"\n\t\t\t\t")]),n("a",{staticStyle:{"margin-left":"10px","vertical-align":"top"},on:{click:function(e){return t.copyText(t.$store.state.h5Url+"/h5/pages/customDetail/index?agent_id="+t.agentInfo.id+"&corpid="+t.corpId)}}},[t._v("复制")])],1),n("a-row",{staticClass:"agent-info-item",attrs:{gutter:16}},[n("a-col",{staticClass:"agent-info-label",attrs:{span:8}},[t._v("发红包地址：")]),n("span",{staticClass:"agent-id"},[t._v("\n\t\t\t\t\t"+t._s(t.$store.state.h5Url)+"/h5/pages/redPacket/records?agent_id="+t._s(t.agentInfo.id)+"&corpid="+t._s(t.corpId)+"\n\t\t\t\t")]),n("a",{staticStyle:{"margin-left":"10px","vertical-align":"top"},on:{click:function(e){return t.copyText(t.$store.state.h5Url+"/h5/pages/redPacket/records?agent_id="+t.agentInfo.id+"&corpid="+t.corpId)}}},[t._v("复制")])],1),n("a-form-item",[n("a-alert",{attrs:{banner:""}},[n("span",{attrs:{slot:"message"},slot:"message"},[t._v("\n\t\t\t\t\t\t\t\t\t\t\t\t\t请务必保证该应用已开启 "),n("b",[t._v("接收消息")]),t._v(" 并且已经将下边的信息配置到 "),n("b",[t._v("API接收消息")])])])],1),n("a-row",{staticClass:"agent-info-item",staticStyle:{"margin-top":"15px"},attrs:{gutter:16}},[n("a-col",{staticClass:"agent-info-label",attrs:{span:8}},[t._v("应用接收消息URL：")]),n("span",{staticClass:"agent-id"},[t._v("\n\t\t\t\t"+t._s(t.$store.state.commonUrl+"/work/event/agent/"+t.agentInfo.id)+"\n\t\t\t\t")]),n("a",{staticStyle:{"margin-left":"10px","vertical-align":"top"},on:{click:function(e){return t.copyText(t.$store.state.commonUrl+"/work/event/agent/"+t.agentInfo.id)}}},[t._v("复制")])],1),n("a-row",{staticClass:"agent-info-item",attrs:{gutter:16}},[n("a-col",{staticClass:"agent-info-label",attrs:{span:8}},[t._v("Token：")]),n("span",{staticClass:"agent-id"},[t._v(t._s(t.agentToken))]),n("a",{staticStyle:{"margin-left":"10px","vertical-align":"top"},on:{click:function(e){return t.copyText(t.agentToken)}}},[t._v("复制")])],1),n("a-row",{staticClass:"agent-info-item",attrs:{gutter:16}},[n("a-col",{staticClass:"agent-info-label",attrs:{span:8}},[t._v("EncodingAESKey：")]),n("span",{staticClass:"agent-id"},[t._v(t._s(t.agentEncodingAESKey))]),n("a",{staticStyle:{"margin-left":"10px","vertical-align":"top"},on:{click:function(e){return t.copyText(t.agentEncodingAESKey)}}},[t._v("复制")])],1),n("a-row",{staticClass:"agent-info-item",attrs:{gutter:16}},[n("a-col",{staticClass:"agent-info-label",attrs:{span:8}},[t._v("工作台应用中心地址：")]),n("span",{staticClass:"agent-id"},[t._v("\n\t\t\t\t\t"+t._s(t.$store.state.h5Url)+"/h5/pages/scrm/staging?agent_id="+t._s(t.agentInfo.id)+"&corpid="+t._s(t.corpId)+"\n\t\t\t\t")]),n("a",{staticStyle:{"margin-left":"10px","vertical-align":"top"},on:{click:function(e){return t.copyText(t.$store.state.h5Url+"/h5/pages/scrm/staging?agent_id="+t.agentInfo.id+"&corpid="+t.corpId)}}},[t._v("复制")]),n("a-tooltip",{attrs:{placement:"left"}},[n("template",{slot:"title"},[n("img",{staticStyle:{width:"100%"},attrs:{src:a("d6f9"),alt:""}})]),n("a-icon",{staticStyle:{cursor:"pointer","vertical-align":"text-top","margin-left":"10px"},attrs:{type:"question-circle"}})],2)],1),n("a-row",{staticClass:"agent-info-item",staticStyle:{"margin-top":"-8px"},attrs:{gutter:16}},[n("a-col",{staticClass:"agent-info-label",staticStyle:{height:"36px"},attrs:{span:8}}),n("div",{staticStyle:{color:"rgb(153, 153, 153)","font-size":"12px"}},[t._v("\n\t\t\t\t\t可以在手机端查看客户、客户群、跟进统计、内容统计等信息，简单来说，将日思夜想SCRM后台搬到了手机上进行查看和管理。"),n("a",{attrs:{href:"https://support.qq.com/products/104790/faqs/80903",target:"_blank"}},[t._v("如何设置")])])],1)],1)],2),n("a-modal",{attrs:{title:"企业支付",width:"600px"},on:{cancel:t.paymentVisibleCancel,ok:t.paymentVisibleOk},model:{value:t.paymentVisible,callback:function(e){t.paymentVisible=e},expression:"paymentVisible"}},[n("div",{staticClass:"agent-info-box"},[n("div",[n("a-avatar",{staticStyle:{width:"68px",height:"68px",margin:"0 10px 0 86px"},attrs:{slot:"avatar",shape:"square",src:t.png},slot:"avatar"}),n("span",{staticStyle:{"font-size":"20px"}},[t._v("企业支付")]),t.editPaymentVisible?t._e():n("a-button",{staticStyle:{float:"right"},on:{click:function(e){return t.editPayment(1)}}},[t._v("修改")]),t.editPaymentVisible?n("a-button",{staticStyle:{float:"right"},on:{click:function(e){return t.editPayment(2)}}},[t._v("取消")]):t._e()],1),n("div",{staticClass:"content-msg",staticStyle:{"margin-bottom":"15px"}},[n("p",{staticStyle:{"margin-bottom":"0px"}},[t._v("\n\t\t\t\t\t只需要绑定已有的微信支付商户号，即可在企业微信内使用支付能力，企业成员可以给客户发红包（直接付款到客户的微信零钱）。"),n("a",{attrs:{href:"https://support.qq.com/products/104790/faqs/66058",target:"_blank"}},[t._v("如何配置企业支付？")])])]),n("a-form-item",{attrs:{"label-col":{span:7},"wrapper-col":{span:16}}},[n("template",{slot:"label"},[t._v("IP地址\n\t\t\t\t")]),n("div",[n("span",{staticStyle:{color:"#1890FF"}},[t._v(t._s(t.$store.state.systemIp))]),n("a",{staticStyle:{"margin-left":"10px",background:"#1890FF",color:"#FFF",padding:"3px 5px","border-radius":"3px","font-size":"12px"},on:{click:function(e){return t.copyText(t.$store.state.systemIp)}}},[t._v("复制")])]),n("div",{staticStyle:{color:"#00000073","line-height":"16px","font-size":"13px"}},[t._v("\n\t\t\t\t\t请在商户平台，将该IP地址填入【企业付款API安全】中，以保证支付功能正常使用\n\t\t\t\t")])],2),n("a-form-item",{attrs:{"label-col":{span:7},"wrapper-col":{span:16}}},[n("template",{slot:"label"},[t._v("微信支付商户号\n\t\t\t\t")]),t.editPaymentVisible?n("a-input",{attrs:{placeholder:"请输入微信支付商户号"},model:{value:t.paymentMerchant,callback:function(e){t.paymentMerchant=e},expression:"paymentMerchant"}}):t._e(),t.editPaymentVisible?t._e():[""==t.paymentMerchant?n("span",[t._v("暂未配置")]):t._e(),""!=t.paymentMerchant?n("span",[t._v(t._s(t.paymentMerchant))]):t._e()]],2),n("a-form-item",{attrs:{"label-col":{span:7},"wrapper-col":{span:16}}},[n("template",{slot:"label"},[t._v("微信支付商户密钥\n\t\t\t\t")]),t.editPaymentVisible?n("a-input",{attrs:{placeholder:"请输入微信支付商户秘钥"},model:{value:t.paymentMerchantSecretKey,callback:function(e){t.paymentMerchantSecretKey=e},expression:"paymentMerchantSecretKey"}}):t._e(),t.editPaymentVisible?t._e():[""==t.paymentMerchantSecretKey?n("span",[t._v("暂未配置")]):t._e(),""!=t.paymentMerchantSecretKey?n("span",[t._v(t._s(t.paymentMerchantSecretKey))]):t._e()]],2),n("a-form-item",{attrs:{"label-col":{span:7},"wrapper-col":{span:16}}},[n("template",{slot:"label"},[t._v("apiclient_cert文件\n\t\t\t\t")]),n("a-upload",{attrs:{name:"file",accept:".pem",multiple:!0,action:"https://www.mocky.io/v2/5cc8019d300000980a055e76",customRequest:t.selfUpLoadInfo2},on:{change:function(e){return t.upLoadCertificate(1)}}},[t.editPaymentVisible?t._e():[""!=t.certificateInfo?n("span",{staticStyle:{"margin-right":"5px"}},[n("a-icon",{staticStyle:{"margin-right":"5px"},attrs:{type:"file"}}),t._v("apiclient_cert文件已传")],1):t._e(),""==t.certificateInfo?n("span",[t._v("暂未配置")]):t._e()],t.editPaymentVisible?[""!=t.certificateInfo?n("span",{staticStyle:{"margin-right":"5px"}},[n("a-icon",{staticStyle:{"margin-right":"5px"},attrs:{type:"file"}}),t._v("apiclient_cert文件已传")],1):t._e(),n("a-button",[n("a-icon",{attrs:{type:"upload"}}),""==t.certificateInfo?n("span",[t._v("上传文件")]):t._e(),""!=t.certificateInfo?n("span",[t._v("重新上传")]):t._e()],1)]:t._e()],2)],2),n("a-form-item",{attrs:{"label-col":{span:7},"wrapper-col":{span:16}}},[n("template",{slot:"label"},[t._v("apiclient_key文件\n\t\t\t\t")]),n("a-upload",{attrs:{name:"file",accept:".pem",multiple:!0,action:"https://www.mocky.io/v2/5cc8019d300000980a055e76",customRequest:t.selfUpLoadInfo2},on:{change:function(e){return t.upLoadCertificate(2)}}},[t.editPaymentVisible?t._e():[""!=t.certificateInfo2?n("span",{staticStyle:{"margin-right":"5px"}},[n("a-icon",{staticStyle:{"margin-right":"5px"},attrs:{type:"file"}}),t._v("apiclient_key文件已传")],1):t._e(),""==t.certificateInfo2?n("span",[t._v("暂未配置")]):t._e()],t.editPaymentVisible?[""!=t.certificateInfo2?n("span",{staticStyle:{"margin-right":"5px"}},[n("a-icon",{staticStyle:{"margin-right":"5px"},attrs:{type:"file"}}),t._v("apiclient_key文件已传")],1):t._e(),n("a-button",[n("a-icon",{attrs:{type:"upload"}}),""==t.certificateInfo2?n("span",[t._v("上传文件")]):t._e(),""!=t.certificateInfo2?n("span",[t._v("重新上传")]):t._e()],1)]:t._e()],2)],2)],1)])],1)},i=[],s=(a("7514"),a("ac6a"),a("456d"),a("7f7f"),a("96cf"),a("3b8d")),o=a("d3d6"),r=a("bc3a"),c=a.n(r),l=a("d13f"),g=a.n(l),d=c.a.CancelToken,p=d.source(),f={name:"list",components:{authorizeCorp:o["a"]},data:function(){var t=localStorage.getItem("corpId")?localStorage.getItem("corpId"):"";return{png:g.a,isLoading:!0,showCorpModal:!1,showAddAgentModal:!1,showAgentInfoModal:!1,cnfId:this.$store.state.sid,corpId:t,updateLoading:!1,corpInfo:[],agentCount:"0",auth:[],normal:{normal:[],custom:[],mini:[]},addAgentType:"",addAgentId:"",addAgentSecret:"",agentToken:"",agentEncodingAESKey:"",agentInfo:{key:0,id:0,agentid:0,agentType:"2",agentUseType:0,name:"",description:"",square_logo_url:"",redirect_domain:"",home_url:"",report_location_flag:0,isreportenter:0},agentNameVisible:!1,agentNameLength:0,agentInfoName:"",agentDescVisible:!1,agentDescLength:0,agentInfoDesc:"",refreshLoading:!1,paymentVisible:!1,paymentAgentId:"",paymentAgentSecret:"",paymentMerchant:"",paymentMerchantSecretKey:"",headers:{authorization:"authorization-text"},certificateInfo:"",certificateInfo2:"",hasConfigure:!1,addAgentModalTitle:"",editPaymentVisible:!1}},methods:{updateAgent:function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(){var e,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.updateLoading=!0,t.next=3,this.axios.post("work-agent/sync-agent",{corp_id:this.corpId});case 3:e=t.sent,a=e.data,0!=a.error?(this.updateLoading=!1,this.$message.error(a.error_msg)):(this.updateLoading=!1,window.location.reload());case 6:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),showPaymentVisible:function(){this.hasConfigure?(this.paymentVisible=!0,this.getPaymentDetail()):(this.showAddAgentModal=!0,this.addAgentModalTitle="配置企业支付应用")},getPaymentDetail:function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(){var e,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.axios.post("send-money-manage/pay-config",{corp_id:this.corpId,uid:localStorage.getItem("uid")});case 2:e=t.sent,a=e.data,0!=a.error?this.$message.error(a.error_msg):null!=a.data.payConfig&&(this.paymentAgentId=a.data.payConfig.id,this.paymentMerchant=a.data.payConfig.mchid,this.paymentMerchantSecretKey=a.data.payConfig.key,this.certificateInfo=a.data.payConfig.apiclient_cert,this.certificateInfo2=a.data.payConfig.apiclient_key);case 5:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),editPayment:function(t){1==t?this.editPaymentVisible=!0:2==t&&(this.editPaymentVisible=!1),this.$forceUpdate()},paymentVisibleCancel:function(){this.paymentVisible=!1,this.paymentMerchant="",this.paymentMerchantSecretKey="",this.certificateInfo="",this.certificateInfo2="",this.editPaymentVisible=!1},paymentVisibleOk:function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(){var e,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(""!=this.paymentMerchant||""!=this.paymentMerchantSecretKey||""!=this.certificateInfo||""!=this.certificateInfo2){t.next=3;break}return this.$message.warning("请填写企业微信配置信息！"),t.abrupt("return",!1);case 3:return t.next=5,this.axios.post("send-money-manage/pay-config-set",{id:this.paymentAgentId,corp_id:this.corpId,uid:localStorage.getItem("uid"),mchid:this.paymentMerchant,key:this.paymentMerchantSecretKey,apiclient_cert:this.certificateInfo,apiclient_key:this.certificateInfo2});case 5:e=t.sent,a=e.data,0!=a.error?this.$message.error(a.error_msg):(this.$message.success("企业支付配置成功"),this.paymentVisible=!1,this.paymentMerchant="",this.paymentMerchantSecretKey="",this.certificateInfo="",this.certificateInfo2="",this.editPaymentVisible=!1);case 8:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),upLoadCertificate:function(t){if(!this.fileInfo.uid)return this.$message.warning("请选择文件！"),!1;this.upLoadCertificateInfo(this.fileInfo,t)},selfUpLoadInfo2:function(t){var e=this,a=(t.action,t.file);t.onSuccess,t.onError,t.onProgress,new Promise((function(t){var n=new FileReader;n.readAsDataURL(a),e.fileName=a.name,n.onload=function(){t(n.result)}}));this.fileInfo=a},upLoadCertificateInfo:function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(e,a){var n,i,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n={},n=new FormData,n.append("uid",localStorage.getItem("uid")),n.append("corp_id",this.corpId),n.append("fileInfo",e),t.next=7,this.axios.post("send-money-manage/upload-pem",n,{cancelToken:p.token});case 7:i=t.sent,s=i.data,0!=s.error?this.$message.error(s.error_msg):(this.$message.success("上传文件成功"),1==a?this.certificateInfo=s.data.local_path:2==a&&(this.certificateInfo2=s.data.local_path));case 10:case"end":return t.stop()}}),t,this)})));function e(e,a){return t.apply(this,arguments)}return e}(),handleChange:function(t){var e=this;this.corpInfo.map((function(a){t==a.corpid&&(e.$store.commit("changeCorpAuthType",a.auth_type),e.$store.commit("changeCorpName",a.corp_name))})),this.$store.commit("changeCorpId",t),this.isLoading=!0,this.getList(),2==localStorage.getItem("isMasterAccount")&&this.$store.dispatch("getPermissionButton")},addAccount:function(t,e,a){a?this.$message.warning("已开启通讯录同步，不允许授权通讯录套件。"):e?this.$message.info("已授权，无需重复授权。"):(this.showCorpModal=!0,this.cnfId=t)},cancel:function(){this.showCorpModal=!1},showAddAgent:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";this.addAgentType=t,this.addAgentId="",this.addAgentSecret="",this.showAddAgentModal=!0,this.addAgentModalTitle="添加自建应用"},addAgent:function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(){var e,a,n,i,s,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(""!=this.addAgentId){t.next=3;break}return this.$message.error("请输入应用Id！"),t.abrupt("return",!1);case 3:if(""!=this.addAgentSecret){t.next=6;break}return this.$message.error("请输入应用Secret！"),t.abrupt("return",!1);case 6:return e="",a="","添加自建应用"==this.addAgentModalTitle?(e=this.addAgentType,a=""):"配置企业支付应用"==this.addAgentModalTitle&&(e=1,a="moneyPay"),t.next=11,this.axios.post("work-agent/add",{corp_id:this.corpId,agent_id:this.addAgentId,agent_secret:this.addAgentSecret,agent_type:e,basic_agent_type:a});case 11:if(n=t.sent,i=n.data,0==i.error){t.next=17;break}this.$message.error("添加失败，请检查是否正确！"),t.next=22;break;case 17:return t.next=19,this.axios.post("work-agent/get",{corp_id:this.corpId,agent_id:i.data.agent_id,is_tip:1});case 19:s=t.sent,o=s.data,0!=o.error?this.$message.error("添加失败，请检查是否正确！错误描述："+o.error_msg):window.location.reload();case 22:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),refreshAgent:function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(e){var a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.refreshLoading=!0,t.next=3,this.axios.post("work-agent/get",{corp_id:this.corpId,agent_id:e,ignore:!0});case 3:a=t.sent,n=a.data,0!=n.error?(this.refreshLoading=!1,this.$message.error("同步失败！错误描述："+n.error_msg)):window.location.reload();case 6:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),addAgentCancel:function(){this.showAddAgentModal=!1,this.addAgentId="",this.addAgentSecret=""},resetAgentInfo:function(){this.agentInfo={key:0,id:0,agentid:0,agentType:"2",agentUseType:0,name:"",description:"",square_logo_url:"",redirect_domain:"",home_url:"",report_location_flag:0,isreportenter:0},this.agentNameVisible=!1,this.agentNameLength=0,this.agentInfoName="",this.agentDescVisible=!1,this.agentDescLength=0,this.agentInfoDesc=""},agentInfoCancel:function(){this.showAgentInfoModal=!1,this.resetAgentInfo()},modifyAgentName:function(t,e){this.agentInfoName=t,this.agentNameLength=e,this.agentNameVisible=!this.agentNameVisible},agentNameChange:function(t){this.agentNameLength=t.target.value.length},setAgentName:function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(e,a){var n,i,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(this.agentInfo.name==e){t.next=19;break}return n={corp_id:this.corpId,agent_id:a.target.dataset.aid,name:e},t.next=4,this.axios.post("work-agent/set",n);case 4:if(i=t.sent,s=i.data,0==s.error){t.next=10;break}this.$message.error(s.error_msg),t.next=17;break;case 10:this.agentInfo.name=e,t.t0=this.agentInfo.agentType,t.next=2===t.t0?14:16;break;case 14:return this.normal.custom[this.agentInfo.key].name=e,t.abrupt("break",16);case 16:this.agentNameVisible=!this.agentNameVisible;case 17:t.next=21;break;case 19:return this.agentNameVisible=!this.agentNameVisible,t.abrupt("return",!1);case 21:case"end":return t.stop()}}),t,this)})));function e(e,a){return t.apply(this,arguments)}return e}(),modifyAgentDesc:function(t,e){this.agentInfoDesc=t,this.agentDescLength=e,this.agentDescVisible=!this.agentDescVisible},agentDescChange:function(t){this.agentDescLength=t.target.value.length},setAgentDesc:function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(e,a){var n,i,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(this.agentInfo.description==e){t.next=19;break}return n={corp_id:this.corpId,agent_id:a.target.dataset.aid,description:e},t.next=4,this.axios.post("work-agent/set",n);case 4:if(i=t.sent,s=i.data,0==s.error){t.next=10;break}this.$message.error(s.error_msg),t.next=17;break;case 10:this.agentInfo.description=e,t.t0=this.agentInfo.agentType,t.next=2===t.t0?14:16;break;case 14:return this.normal.custom[this.agentInfo.key].description=e,t.abrupt("break",16);case 16:this.agentDescVisible=!this.agentDescVisible;case 17:t.next=21;break;case 19:return this.agentDescVisible=!this.agentDescVisible,t.abrupt("return",!1);case 21:case"end":return t.stop()}}),t,this)})));function e(e,a){return t.apply(this,arguments)}return e}(),getAgentInfo:function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(e,a){var n,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.axios.post("work-agent/info",{corp_id:this.corpId,agent_id:e});case 2:n=t.sent,i=n.data,0!=i.error?this.$message.error(i.error_msg):(this.agentInfo.key=a,this.agentInfo.id=i.data.id,this.agentInfo.agentid=i.data.agentid,this.agentInfo.agentType=i.data.agent_type,this.agentInfo.agentUseType=i.data.agent_use_type,this.agentInfo.name=i.data.name,this.agentInfo.description=i.data.description,this.agentInfo.square_logo_url=i.data.square_logo_url,this.agentInfo.redirect_domain=i.data.redirect_domain,this.agentInfo.home_url=i.data.home_url,this.agentInfo.report_location_flag=i.data.report_location_flag,this.agentInfo.isreportenter=i.data.isreportenter,this.showAgentInfoModal=!0);case 5:case"end":return t.stop()}}),t,this)})));function e(e,a){return t.apply(this,arguments)}return e}(),getList:function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(){var e,a,n,i=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.auth=[],this.normal={normal:[],custom:[],mini:[]},t.next=4,this.axios.post("work-agent/list",{corp_id:this.corpId});case 4:e=t.sent,a=e.data,0!=a.error?this.$message.error(a.error_msg):(this.agentToken=a.data.normal.token,this.agentEncodingAESKey=a.data.normal.encoding_AES_key,n=Object.keys(a.data.auth),n.length>0&&n.map((function(t){i.auth.push(a.data.auth[t])})),a.data.normal.normal.length>0&&a.data.normal.normal.map((function(t){i.normal.normal.push(t)})),a.data.normal.custom.length>0&&a.data.normal.custom.map((function(t){i.normal.custom.push(t)})),a.data.normal.mini.length>0&&a.data.normal.mini.map((function(t){i.normal.mini.push(t)})),0==a.data.normal.has_moneyPay?this.hasConfigure=!1:this.hasConfigure=!0,this.isLoading=!1);case 7:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),handleSidebarCancel:function(){if(!this.fileInfo.uid)return this.$message.warning("请选择文件！"),!1;this.upLoadInfo(this.fileInfo)},selfUpLoadInfo:function(t){var e=this,a=(t.action,t.file);t.onSuccess,t.onError,t.onProgress,new Promise((function(t){var n=new FileReader;n.readAsDataURL(a),e.fileName=a.name,n.onload=function(){t(n.result)}}));this.fileInfo=a},beforeUpLoadInfo:function(t){var e="text/plain"===t.type;if(!e)return this.$message.error("只能上传txt文件"),!1;var a=t.size/1024/1024<=1;return a?t.size<=1?(this.$message.error("上传的文件大小需大于1字节！"),!1):a:(this.$message.error("文件不超过1M！"),!1)},upLoadInfo:function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(){var e,a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e={},e=new FormData,e.append("uid",localStorage.getItem("uid")),e.append("fileInfo",this.fileInfo),t.next=6,this.axios.post("attachment/upload-txt",e,{cancelToken:p.token});case 6:a=t.sent,n=a.data,0!=n.error?this.$message.error(n.error_msg):this.$message.success("上传文件成功");case 9:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),handleSidebarOk:function(){window.open("https://support.qq.com/products/104790/faqs/59786","_blank")},copyText:function(t){var e=this,a=document.createElement("input");document.body.appendChild(a),a.setAttribute("value",t),a.select(),document.execCommand("copy")&&(document.execCommand("copy"),e.$message.success("复制成功！")),document.body.removeChild(a)}},created:function(){var t=this;this.$store.dispatch("getCorp",(function(e){t.corpInfo=e,t.corpInfo.length>0?t.agentCount=t.corpInfo.find((function(t){return t.corpid==localStorage.getItem("corpId")})).agent_count:t.agentCount="0",0==t.agentCount&&(t.addAgentType="",t.addAgentId="",t.addAgentSecret="",t.showAddAgentModal=!0,t.addAgentModalTitle="添加自建应用"),t.$emit("changeCorpId",t.corpId),t.getList()}))}},m=f,h=(a("95bf"),a("2877")),u=Object(h["a"])(m,n,i,!1,null,"4709f3c6",null);e["default"]=u.exports}}]);