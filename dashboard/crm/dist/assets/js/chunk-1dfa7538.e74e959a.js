(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1dfa7538"],{"1c4c":function(t,e,i){"use strict";var a=i("9b43"),n=i("5ca1"),s=i("4bf8"),r=i("1fa8"),o=i("33a4"),c=i("9def"),l=i("f1ae"),d=i("27ee");n(n.S+n.F*!i("5cc5")((function(t){Array.from(t)})),"Array",{from:function(t){var e,i,n,u,p=s(t),h="function"==typeof this?this:Array,g=arguments.length,m=g>1?arguments[1]:void 0,f=void 0!==m,v=0,x=d(p);if(f&&(m=a(m,g>2?arguments[2]:void 0,2)),void 0==x||h==Array&&o(x))for(e=c(p.length),i=new h(e);e>v;v++)l(i,v,f?m(p[v],v):p[v]);else for(u=x.call(p),i=new h;!(n=u.next()).done;v++)l(i,v,f?r(u,m,[n.value,v],!0):n.value);return i.length=v,i}})},"4f7f":function(t,e,i){"use strict";var a=i("c26b"),n=i("b39a"),s="Set";t.exports=i("e0b8")(s,(function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}}),{add:function(t){return a.def(n(this,s),t=0===t?0:t,t)}},a)},"73f2":function(t,e,i){e=t.exports=i("2350")(!1),e.push([t.i,".wx-info[data-v-04e19165]{width:100%;position:absolute;left:0;top:100px;bottom:0;overflow:hidden}.wx-info[data-v-04e19165]::-webkit-scrollbar{width:2px;height:100%}.wx-info[data-v-04e19165]::-webkit-scrollbar-track-piece{background-color:#fff}.wx-info[data-v-04e19165]::-webkit-scrollbar-thumb{background:#fff}#components-layout-demo-basic[data-v-04e19165]{height:100%}#components-layout-demo-basic .ant-layout-header[data-v-04e19165]{background:#fff;border-bottom:1px solid #e2e2e2;height:50px;min-width:885px;width:100%;line-height:50px}[data-v-04e19165] .ant-layout-header{padding:0 20px;font-size:16px;text-align:left}#components-layout-demo-basic .ant-layout-sider[data-v-04e19165]{background:#fff;-webkit-box-flex:0!important;-ms-flex:0 0 250px!important;flex:0 0 250px!important;max-width:250px!important;min-width:250px!important;width:250px!important;border-right:1px solid #e2e2e2}#components-layout-demo-basic .ant-layout-content[data-v-04e19165]{margin:0 20px 20px;min-width:885px;width:100%;padding-right:40px}.content-hd[data-v-04e19165]{height:60px;width:100%;min-width:885px;line-height:60px}.content-msg[data-v-04e19165]{width:100%;border:1px solid #ffdda6;background:#fff2db;padding:10px;margin-top:12px}.msg-info[data-v-04e19165]{color:#ffdda6;margin-right:10px}.content-bd[data-v-04e19165]{background:#fff;min-height:120px;border:1px solid #e2e2e2;min-width:885px;width:100%}#components-layout-demo-basic>.ant-layout[data-v-04e19165]{margin-bottom:48px}#components-layout-demo-basic>.ant-layout[data-v-04e19165]:last-child{margin:0}.list[data-v-04e19165]{margin-left:16px}.ant-layout.ant-layout-has-sider[data-v-04e19165],.list[data-v-04e19165]{height:100%}.content-hd-left[data-v-04e19165]{float:left}.content-hd-right[data-v-04e19165]{float:right}.btn-primary[data-v-04e19165]{margin-left:20px}.sider-one[data-v-04e19165]{padding:0 20px}.sider-one-txt[data-v-04e19165]{height:60px;line-height:60px;text-align:left}.selectWx[data-v-04e19165]{width:200px;margin-left:20px;height:50px;line-height:50px;cursor:pointer;padding-left:10px}.active[data-v-04e19165]{background:#1e90ff;color:#fff}.tag-name[data-v-04e19165]{padding:6px 14px;height:34px;font-size:13px;border:1px solid #d9d9d9;background-color:transparent!important;color:rgba(0,0,0,.65)}[data-v-04e19165] .dark-row{background:#fafafa}[data-v-04e19165] .light-row{background:#fff}[data-v-04e19165] .ant-radio-button-wrapper{width:200px;height:55px;line-height:47px;padding:0 10px;margin:10px 5px}[data-v-04e19165] .wxtpl .ant-radio-button-wrapper-checked{border:2px solid #1890ff!important}[data-v-04e19165] .ant-dropdown-trigger>.anticon.anticon-down{font-size:14px;color:#000}",""])},7687:function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"list"},[a("div",{attrs:{id:"components-layout-demo-basic"}},[a("a-layout",{staticStyle:{position:"relative"}},[a("a-layout-sider",[a("team",{ref:"tagTeam",attrs:{callback:t.changeGroupId}})],1),a("a-layout",{staticClass:"scroll",staticStyle:{position:"absolute",left:"250px",top:"0",bottom:"0",right:"0"}},[a("a-layout-header",[t._v("客户标签管理")]),a("a-layout-content",[a("div",{staticClass:"content-msg"},[a("p",{staticStyle:{"margin-bottom":"2px"}},[t._v("\n\t\t\t\t\t\t\t\t1、标签分组名称不能重复。")]),a("p",{staticStyle:{"margin-bottom":"2px"}},[t._v("\n\t\t\t\t\t\t\t\t2、标签总数量不限制。\n")]),a("p",{staticStyle:{"margin-bottom":"2px"}},[t._v("3、标签分组一旦被删除，归属于该分组的标签均将移至【未分组】。")]),a("p",{staticStyle:{"margin-bottom":"2px"}},[t._v("4、【未分组】为固定存在，不可修改名称，亦不可删除。")]),t.noSecret?a("p",{staticStyle:{"margin-bottom":"2px"}},[t._v("\n\t\t\t\t\t\t\t\t5、自建应用只能编辑/删除自建的标签，如需全量编辑/删除请填写客户联系secret")]):t._e(),t.noSecret?a("p",{staticStyle:{"margin-bottom":"2px"}},[t._v("\n\t\t\t\t\t\t\t\t6、外部联系人Secret：可在"),a("a",{attrs:{target:"_blank",href:"https://work.weixin.qq.com/wework_admin/frame"}},[t._v("\n\t\t\t\t\t\t\t\t企业微信管理后台")]),t._v("- 客户联系 – 客户 – 点开 API 小按钮获得。\n\t\t\t\t\t\t\t\t"),a("a-popover",{staticStyle:{"margin-left":"5px"},attrs:{placement:"bottom"}},[a("template",{slot:"content"},[a("img",{staticStyle:{width:"700px"},attrs:{src:i("d8e9")}})]),a("a-icon",{staticStyle:{"margin-left":"5px"},attrs:{type:"question-circle"}})],2)],1):t._e()]),a("div",{staticClass:"content-hd"},[t.noSecret?a("a-button",{directives:[{name:"has",rawName:"v-has",value:"client-tag-sync",expression:"'client-tag-sync'"}],attrs:{type:"primary",icon:"key"},on:{click:function(e){return t.addSecret()}}},[t._v("\n\t\t\t\t\t\t\t\t填写密钥\n\t\t\t\t\t\t\t")]):t._e(),a("div",{staticClass:"content-hd-right"},[t.lastTagTime&&!t.noBindFlag?a("label",[t._v("最后一次同步时间："+t._s(t.lastTagTime))]):t._e(),t.noBindFlag?t._e():a("a-button",{directives:[{name:"has",rawName:"v-has",value:"client-tag-sync",expression:"'client-tag-sync'"}],staticClass:"btn-primary",attrs:{icon:"reload"},on:{click:function(e){return t.sysTag()}}},[t._v("\n\t\t\t\t\t\t\t\t\t同步企业微信标签\n\t\t\t\t\t\t\t\t")]),a("a-button",{directives:[{name:"has",rawName:"v-has",value:"client-tag-delete",expression:"'client-tag-delete'"}],staticClass:"btn-primary",attrs:{icon:"delete",disabled:0==t.selectedRowKeys.length,type:"primary"},on:{click:function(e){return t.deleteCoustomTags()}}},[t._v("\n\t\t\t\t\t\t\t\t\t删除标签\n\t\t\t\t\t\t\t\t")]),a("a-button",{directives:[{name:"has",rawName:"v-has",value:"client-tag-remove",expression:"'client-tag-remove'"}],staticClass:"btn-primary",attrs:{icon:"retweet",disabled:0==t.selectedRowKeys.length,type:"primary"},on:{click:function(e){return t.showModalGroup()}}},[t._v("\n\t\t\t\t\t\t\t\t\t移动标签\n\t\t\t\t\t\t\t\t")]),a("a-button",{directives:[{name:"has",rawName:"v-has",value:"client-tag-add",expression:"'client-tag-add'"}],staticClass:"btn-primary",attrs:{icon:"plus",type:"primary"},on:{click:function(e){return t.showModal("add")}}},[t._v("\n\t\t\t\t\t\t\t\t\t新建标签\n\t\t\t\t\t\t\t\t")]),a("a-modal",{staticStyle:{height:"500px"},attrs:{title:"新建标签",confirmLoading:t.confirmLoading3},on:{ok:function(e){return t.handleOk(t.inputValue)},cancel:t.cancel},model:{value:t.visible,callback:function(e){t.visible=e},expression:"visible"}},[a("a-form-item",{attrs:{"label-col":{span:4},"wrapper-col":{span:20}}},[a("template",{slot:"label"},[t._v("\n\t\t\t\t\t\t\t\t\t\t\t选择分组\n\t\t\t\t\t\t\t\t\t\t")]),a("a-select",{staticStyle:{width:"180px"},attrs:{showSearch:"",optionFilterProp:"children",dropdownStyle:{overflow:"hidden"}},model:{value:t.editGroupId,callback:function(e){t.editGroupId=e},expression:"editGroupId"}},t._l(t.groupList,(function(e){return a("a-select-option",{attrs:{value:e.id}},[t._v("\n\t\t\t\t\t\t\t\t\t\t\t\t"+t._s(e.group_name)+"\n\t\t\t\t\t\t\t\t\t\t\t")])})),1)],2),a("a-form-item",{attrs:{"label-col":{span:4},"wrapper-col":{span:20}}},[a("template",{slot:"label"},[t._v("\n\t\t\t\t\t\t\t\t\t\t\t标签名称\n\t\t\t\t\t\t\t\t\t\t")]),a("p",{staticStyle:{margin:"0px","font-size":"13px",color:"#909399"}},[t._v("\n\t\t\t\t\t\t\t\t\t\t\t每个标签名称最多15个字。同时新建多个标签时，请用“空格”隔开\n\t\t\t\t\t\t\t\t\t\t")]),a("a-input",{attrs:{placeholder:"请输入标签（不得超过15个字符）"},model:{value:t.inputValue,callback:function(e){t.inputValue=e},expression:"inputValue"}})],2)],1)],1)],1),a("div",{staticClass:"content-bd"},[a("a-spin",{attrs:{tip:"Loading...",size:"large",spinning:t.isLoading}},[a("a-table",{directives:[{name:"has",rawName:"v-has",value:"client-tag-list",expression:"'client-tag-list'"}],attrs:{columns:t.columns,dataSource:t.tagsList,pagination:!1,rowSelection:t.rowSelection,rowClassName:t.rowClassName},scopedSlots:t._u([{key:"tags",fn:function(e){return a("span",{},[a("a-tag",{staticClass:"tag-name",attrs:{color:"#2db7f5"}},[t._v(t._s(e))])],1)}},{key:"action",fn:function(e,i){return a("span",{},[a("span",{directives:[{name:"has",rawName:"v-has",value:"client-tag-edit",expression:"'client-tag-edit'"}],staticStyle:{color:"#1890FF","margin-right":"25px",cursor:"pointer"},on:{click:function(a){return t.showModal2(e,i)}}},[t._v("编辑")]),a("span",{directives:[{name:"has",rawName:"v-has",value:"client-tag-delete",expression:"'client-tag-delete'"}],staticStyle:{color:"#1890FF",cursor:"pointer"},on:{click:function(a){return t.showModal3(e,i)}}},[t._v("删除")])])}}])},[a("span",{attrs:{slot:"num"},slot:"num"},[t._v("\n\t\t\t\t\t\t                  客户数\n\t\t\t\t\t\t                  "),a("a-tooltip",{attrs:{placement:"bottom"}},[a("template",{slot:"title"},[a("span",[t._v("包含企微客户、非企微客户和导入客户。存在多个企业成员管理同一个客户，他们对该客户均打了同一个标签，则标签下的客户数重复计入。 ")])]),a("a-icon",{staticStyle:{"margin-left":"5px"},attrs:{type:"question-circle"}})],2)],1)]),a("a-modal",{attrs:{title:"修改标签名称",confirmLoading:t.confirmLoading},on:{ok:t.handleOk2},model:{value:t.visible2,callback:function(e){t.visible2=e},expression:"visible2"}},[a("div",[a("a-form-item",{attrs:{"label-col":{span:4},"wrapper-col":{span:20}}},[a("template",{slot:"label"},[t._v("\n\t\t\t\t\t\t\t\t\t\t\t\t选择分组\n\t\t\t\t\t\t\t\t\t\t\t")]),a("a-select",{staticStyle:{width:"180px"},attrs:{showSearch:"",optionFilterProp:"children",disabled:t.groupDisabled},model:{value:t.editGroupId,callback:function(e){t.editGroupId=e},expression:"editGroupId"}},t._l(t.groupList,(function(e){return a("a-select-option",{attrs:{value:e.id}},[t._v("\n\t\t\t\t\t\t\t\t\t\t\t\t\t"+t._s(e.group_name)+"\n\t\t\t\t\t\t\t\t\t\t\t\t")])})),1)],2),a("a-form-item",{attrs:{"label-col":{span:4},"wrapper-col":{span:20}}},[a("template",{slot:"label"},[t._v("\n\t\t\t\t\t\t\t\t\t\t\t\t标签名称\n\t\t\t\t\t\t\t\t\t\t\t")]),a("a-input",{attrs:{placeholder:"请输入标签",maxLength:15},model:{value:t.inputValue2,callback:function(e){t.inputValue2=e},expression:"inputValue2"}},[a("span",{attrs:{slot:"suffix"},slot:"suffix"},[a("span",[t._v(t._s(t.inputValue2.length))]),t._v("/15\n\t\t\t\t\t\t\t\t\t\t\t\t")])])],2)],1)]),a("a-modal",{attrs:{title:"删除标签",confirmLoading:t.confirmLoading2},on:{ok:t.handleOk3},model:{value:t.visible3,callback:function(e){t.visible3=e},expression:"visible3"}},[a("div",{staticStyle:{margin:"19px 0px"}},[a("a-icon",{staticStyle:{color:"#F7BA2A","font-size":"22px","margin-right":"10px"},attrs:{type:"exclamation-circle"}}),a("span",{staticStyle:{"font-size":"16px",display:"inline-block",width:"90%","line-height":"22px","vertical-align":"top","white-space":"normal","word-break":"break-all"}},[a("span",{staticStyle:{color:"red"}},[t._v(t._s(t.inputValue3))]),t._v("  标签删除后，则相应的用户失去了该标签属性。确定删除吗？")])],1)]),a("div",{directives:[{name:"show",rawName:"v-show",value:t.total>0,expression:"total > 0"},{name:"has",rawName:"v-has",value:"client-tag-list",expression:"'client-tag-list'"}],staticClass:"pagination",staticStyle:{margin:"20px auto",height:"32px"}},[a("div",{staticClass:"content-hd-left",staticStyle:{"margin-left":"10px"}},[t._v("\n\t\t\t\t\t\t\t\t\t\t共有\n\t\t\t\t\t\t\t\t\t\t"),a("span",{staticStyle:{color:"blue"}},[t._v(t._s(t.total))]),t._v("个标签\n\t\t\t\t\t\t\t\t\t")]),a("div",{staticStyle:{float:"right"}},[a("a-pagination",{attrs:{total:t.total,showSizeChanger:"",showQuickJumper:t.quickJumper,current:t.page,pageSize:t.pageSize,pageSizeOptions:["15","30","50","100"]},on:{change:t.changePage,showSizeChange:t.showSizeChange}})],1)])],1)],1)])],1)],1)],1),a("a-modal",{attrs:{title:"选择分组",width:"888"},on:{ok:t.handleGroupOk,cancel:t.handleCancel},model:{value:t.visibleGroup,callback:function(e){t.visibleGroup=e},expression:"visibleGroup"}},[a("a-spin",{attrs:{tip:"Loading...",size:"large",spinning:t.handleLoading}},[a("div",{staticStyle:{height:"340px"}},[a("a-select",{staticStyle:{width:"200px","margin-bottom":"20px","margin-left":"5px"},attrs:{showSearch:"",optionFilterProp:"children"},on:{change:t.changeGroup},model:{value:t.moveGroupId,callback:function(e){t.moveGroupId=e},expression:"moveGroupId"}},[t._l(t.groupList,(function(e){return[a("a-select-option",{attrs:{value:e.id}},[t._v("\n\t\t\t\t\t\t\t\t"+t._s(e.group_name)+"\n\t\t\t\t\t\t\t")])]}))],2),a("div",{staticClass:"wxtpl",staticStyle:{height:"300px"}},[t._l(t.groupList,(function(e,i){return[[a("a-radio-group",{on:{change:function(i){return t.changeGroup(e.id)}},model:{value:t.moveGroupId,callback:function(e){t.moveGroupId=e},expression:"moveGroupId"}},[a("a-radio-button",{attrs:{value:e.id}},[a("div",[a("span",{staticStyle:{display:"inline-block",width:"100%","margin-left":"5px","white-space":"nowrap","text-overflow":"ellipsis","-o-text-overflow":"ellipsis",overflow:"hidden","vertical-align":"middle"}},[t._v(t._s(e.group_name))])])])],1)]]}))],2)],1)])],1),a("a-modal",{attrs:{title:"添加外部联系人管理secret",width:"666px!important"},on:{cancel:t.handleCancelSecret},model:{value:t.secretVisible,callback:function(e){t.secretVisible=e},expression:"secretVisible"}},[a("template",{slot:"footer"},[a("a-button",{key:"back",on:{click:t.handleCancelSecret}},[t._v("取消")]),a("a-button",{key:"submit",attrs:{type:"primary",loading:t.loading2},on:{click:t.handleSecretOk}},[t._v("提交\n\t\t\t\t")])],1),a("a-form",[a("div",{staticClass:"content-msg"},[a("p",{staticStyle:{"margin-bottom":"0px"}},[t._v("\n\t\t\t\t\t\t外部联系人Secret：可在"),a("a",{attrs:{target:"_blank",href:"https://work.weixin.qq.com/wework_admin/frame"}},[t._v("\n\t\t\t\t\t\t企业微信管理后台")]),t._v("- 客户联系 – 客户 – 点开 API 小按钮获得。\n\t\t\t\t\t\t"),a("a-popover",{staticStyle:{"margin-left":"5px"},attrs:{placement:"bottom"}},[a("template",{slot:"content"},[a("img",{staticStyle:{width:"700px"},attrs:{src:i("d8e9")}})]),a("a-icon",{staticStyle:{"margin-left":"5px"},attrs:{type:"question-circle"}})],2)],1)]),a("a-form-item",{staticStyle:{"margin-top":"10px"},attrs:{label:"外部联系人管理secret","label-col":{span:6},"wrapper-col":{span:17}}},[a("a-input",{attrs:{placeholder:"填写外部联系人管理secret"},model:{value:t.secret,callback:function(e){t.secret=e},expression:"secret"}})],1)],1)],2)],1)},n=[],s=(i("7514"),i("7f7f"),i("28a5"),i("a481"),i("96cf"),i("3b8d")),r=(i("ac6a"),i("4f7f"),i("5df3"),i("1c4c"),i("75fc")),o=(i("20d6"),i("f64c")),c=i("f467"),l=[{title:"标签名称",dataIndex:"tagname",scopedSlots:{customRender:"tags"},key:"tagname"},{dataIndex:"num",key:"num",slots:{title:"num"}},{title:"客户群数",dataIndex:"chatNum",key:"chatNum"},{title:"操作",dataIndex:"action",key:"action",scopedSlots:{customRender:"action"}}],d={components:{team:c["a"]},computed:{rowSelection:function(){var t=this,e=this,i=this.selectedRowKeys;return{selectedRowKeys:i,onChange:this.onSelectChange,hideDefaultSelections:!0,selections:[{key:"current-data",text:"当前页",onSelect:function(e){var i=t;t.tagsList.map((function(t){var e=i.selectedRowKeys.findIndex((function(e){return e===t.id}));e>=0&&i.selectedRowKeys.splice(e,1)}));for(var a=0;a<e.length;a++)i.selectedRowKeys.push(e[a])}},{key:"all-data",text:"选择所有项",onSelect:function(){e.selectedRowKeys=Object(r["a"])(e.tagKeys.valueOf())}}],onSelection:this.onSelection}}},data:function(){var t=localStorage.getItem("wxNum")?localStorage.getItem("wxNum"):"";return{noSecret:!1,secretVisible:!1,secret:"",loading2:!1,tagKeys:[],selectedRowKeys:[],suite_id:"",lastTagTime:"",groupId:"",tagsList:[],isLoading:!0,columns:l,wxInfo:[],visible:!1,inputValue:"",newTagList:[],visible2:!1,inputValue2:"",tagId:"",visible3:!1,inputValue3:"",total:1,quickJumper:!1,page:1,pageSize:15,changeBackground:t,confirmLoading:!1,confirmLoading2:!1,confirmLoading3:!1,oldValue:"",groupList:[],editGroupId:"",groupName:"",moveGroupId:"",visibleGroup:!1,noBindFlag:!1,groupDisabled:!1,handleLoading:!1}},methods:{unique:function(t){return Array.from(new Set(t))},handleGroupOk:function(){this.handleLoading=!0,this.moveGroupIds()},handleCancel:function(){this.handleLoading=!1,this.visibleGroup=!1},moveGroupIds:function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(){var e,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.axios.post("work-tag/remove-tag",{new_group_id:this.moveGroupId,tag_id:this.selectedRowKeys,type:0});case 2:e=t.sent,i=e.data,0!=i.error?(this.handleLoading=!1,this.$message.error(i.error_msg)):(this.visibleGroup=!1,this.selectedRowKeys=[],this.$message.info(i.data.textHtml),this.isLoading=!0,this.handleLoading=!1,this.getTags());case 5:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),changeGroup:function(t){this.moveGroupId=t},showModalGroup:function(){this.getTeamsList(2)},addSecret:function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:this.secretVisible=!0;case 1:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),handleSecretOk:function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(){var e,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(this.loading2=!0,""!=this.secret.trim()&&""!=this.secret.replace(/\n/g,"")){t.next=6;break}return this.$message.destroy(),this.$message.warning("请输入外部联系人管理secret"),this.loading2=!1,t.abrupt("return",!1);case 6:return t.next=8,this.axios.post("work-corp/supply-data",{corp_id:this.corpId,external_secret:this.secret});case 8:e=t.sent,i=e.data,0!=i.error?(this.loading2=!1,this.$message.error(i.error_msg)):(this.$message.success("添加成功"),setTimeout((function(){location.reload()}),1e3));case 11:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),handleCancelSecret:function(){this.secretVisible=!1,this.secret=""},sysTag:function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(){var e,i,a=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.isLoading=!0,t.next=3,this.axios.post("work-tag/sync-work-tag-external",{corp_id:this.corpId,suite_id:this.suite_id});case 3:e=t.sent,i=e.data,0!=i.error?(this.isLoading=!1,this.$message.info("已进入后台刷新中，请耐心等待...",2.5).then((function(){return a.$message.error(i.error_msg,2.5)}))):(o["a"].info("已进入后台刷新中，请耐心等待..."),this.$refs.tagTeam.getTeamsList(this.groupId));case 6:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),deleteCoustomTags:function(){var t=this;t.$confirm({title:"确定删除选中的标签?",okText:"确定",okType:"primary",cancelText:"取消",onOk:function(){t.isLoading=!0,t.removeCoustomTags()}})},removeCoustomTags:function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(){var e,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.axios.post("work-tag/delete-more",{ids:this.selectedRowKeys});case 2:e=t.sent,i=e.data,0!=i.error?(this.isLoading=!1,this.$message.error(i.error_msg)):(this.visibleGroup=!1,this.selectedRowKeys=[],this.isLoading=!0,this.$message.info(i.data.textHtml),this.getTags());case 5:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),onSelectChange:function(t){this.selectedRowKeys=t},getTeamsList:function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(e){var i,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.axios.post("work-tag-group/list",{corp_id:this.corpId,type:this.type,suite_id:this.suite_id});case 2:i=t.sent,a=i.data,0!=a.error?this.$message.error(a.error_msg):(this.groupList=a.data.info,this.editGroupId=this.groupId,1==e?this.visible2=!0:0==e?this.visible=!0:2==e&&(this.moveGroupId=this.groupId,this.visibleGroup=!0));case 5:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),changeGroupId:function(t,e,i,a,n){this.selectedRowKeys=[],this.corpId=t,this.groupId=a,this.suite_id=e,this.type=i,this.groupName=n,this.noBindFlag=!1;for(var s=0;s<this.$store.state.noBindCorpArr.length;s++)this.corpId==this.$store.state.noBindCorpArr[s].corpid&&(this.noBindFlag=!0);this.isLoading=!0,this.getTags(1,this.pageSize)},rowClassName:function(t,e){var i="dark-row";return e%2===0&&(i="light-row"),i},wxInfoMouseOver:function(){this.$refs.wxInfo.style.overflowY="auto"},wxInfoMouseOut:function(){this.$refs.wxInfo.style.overflowY="hidden"},handleChange:function(t){var e=this;this.wxInfo.map((function(i){t==i.wx_id&&(e.$store.commit("changeAuthorizerType",i.authorizer_type),e.$store.commit("changeWxNickName",i.nick_name))})),this.$store.dispatch("changeWxNum",t),this.getTags(),this.isLoading=!0,this.changeBackground=t},selectWx:function(t,e,i){this.$store.dispatch("changeWxNum",t),this.getTags(),this.isLoading=!0,this.changeBackground=t,this.$store.commit("changeAuthorizerType",e),this.$store.commit("changeWxNickName",i)},showConfirmWx:function(){this.$success({title:this.$store.state.wxNickName+"已取消授权，无法操作"})},showModal:function(){this.getTeamsList(0)},handleOk:function(t){var e=this;if(e.confirmLoading3=!0,""==t)return e.$message.warning("不能为空"),e.confirmLoading3=!1,!1;this.newTagList=[];for(var i=0;i<t.split(" ").length;i++){if(t.split(" ")[i].length>15)return e.$message.error("每个标签最多15个字"),e.confirmLoading3=!1,e.inputValue="",!1;t.split(" ")[i].length>0&&(e.newTagList.push(t.split(" ")[i]),e.confirmLoading3=!1)}e.addTags(),e.newTagList=[],e.inputValue=""},addTags:function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(){var e,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.axios.post("work-tag/add",{name:this.newTagList,group_id:this.editGroupId,type:this.type,suite_id:this.suite_id,corp_id:this.corpId});case 2:e=t.sent,i=e.data,0!=i.error?("标签名非法，请注意不能和其他标签重名"==i.error_msg?this.$message.error("该标签名称与微信标签重复，请手动同步微信标签即可。"):this.$message.error(i.error_msg),this.confirmLoading3=!1):(this.$message.success("添加成功"),this.isLoading=!0,this.getTags(1,15),this.inputValue="",this.newTagList=[]);case 5:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),cancel:function(){this.inputValue="",this.visible=!1},showModal2:function(t,e){this.getTeamsList(1);var i=localStorage.getItem("permissionButton").split(",");1==i.length&&"all"===i[0]?this.groupDisabled=!1:-1!=i.indexOf("client-tag-remove")?this.groupDisabled=!1:this.groupDisabled=!0,this.oldValue=e.name,this.inputValue2=e.tagname,this.tagId=e.key},handleOk2:function(t){if(this.confirmLoading=!0,""==this.inputValue2)return this.$message.error("请填写标签名称"),this.confirmLoading=!1,!1;this.inputValue2==this.oldValue?(this.$message.success("提交成功"),this.confirmLoading=!1,this.visible2=!1):this.editTag()},editTag:function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(){var e,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.axios.post("work-tag/update",{name:this.inputValue2,group_id:this.editGroupId,type:this.type,suite_id:this.suite_id,corp_id:this.corpId,id:this.tagId});case 2:e=t.sent,i=e.data,0!=i.error?(this.$message.error(i.error_msg),this.confirmLoading=!1):(this.$message.success("修改成功"),this.isLoading=!0,this.editGroupId!=this.groupId&&1==this.tagsList.length&&this.page>1?this.getTags(this.page-1,this.pageSize):this.getTags(this.page,this.pageSize),this.editGroupId="");case 5:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),showModal3:function(t,e){this.visible3=!0,this.tagId=e.key,this.inputValue3=e.tagname},handleOk3:function(t){this.confirmLoading2=!0,this.deleteTags()},deleteTags:function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(){var e,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.axios.post("work-tag/delete",{id:this.tagId});case 2:e=t.sent,i=e.data,0!=i.error?(this.$message.error(i.error_msg),this.confirmLoading2=!1):(this.isLoading=!0,1==this.tagsList.length&&this.page>1?this.getTags(this.page-1,this.pageSize):this.getTags(this.page,this.pageSize));case 5:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),getTags:function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(){var e,i,a,n,s,r=arguments;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=r.length>0&&void 0!==r[0]?r[0]:1,i=r.length>1&&void 0!==r[1]?r[1]:this.pageSize,a=[],a.push(String(this.groupId)),t.next=6,this.axios.post("work-tag/list",{corp_id:this.corpId,suite_id:this.suite_id,group_id:a,type:this.type,page:e,pageSize:i,is_all:0});case 6:n=t.sent,s=n.data,0!=s.error?(this.isLoading=!1,this.$message.error(s.error_msg),this.confirmLoading=!1):(this.tagsList=s.data.info,this.tagKeys=s.data.tag_ids,this.lastTagTime=s.data.last_customer_tag_time,this.isLoading=!1,this.total=parseInt(s.data.count),this.page=e,this.pageSize=i,this.quickJumper=this.total>this.pageSize,this.confirmLoading=!1,this.visible2=!1,this.confirmLoading2=!1,this.visible3=!1,this.confirmLoading3=!1,this.visible=!1);case 9:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),changePage:function(t,e){this.isLoading=!0,this.getTags(t,e),this.$nextTick((function(){document.getElementsByClassName("scroll")[0].scrollTo(0,140)}))},showSizeChange:function(t,e){this.isLoading=!0,this.getTags(1,e)}},created:function(){this.noSecret=1==JSON.parse(localStorage.getItem("corpArr")).find((function(t){return t.corpid==localStorage.getItem("corpId")})).is_supply}},u=d,p=(i("e232"),i("2877")),h=Object(p["a"])(u,a,n,!1,null,"04e19165",null);e["default"]=h.exports},aa28:function(t,e,i){var a=i("73f2");"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var n=i("499e").default;n("7ea84877",a,!0,{sourceMap:!1,shadowMode:!1})},b39a:function(t,e,i){var a=i("d3f4");t.exports=function(t,e){if(!a(t)||t._t!==e)throw TypeError("Incompatible receiver, "+e+" required!");return t}},c26b:function(t,e,i){"use strict";var a=i("86cc").f,n=i("2aeb"),s=i("dcbc"),r=i("9b43"),o=i("f605"),c=i("4a59"),l=i("01f9"),d=i("d53b"),u=i("7a56"),p=i("9e1e"),h=i("67ab").fastKey,g=i("b39a"),m=p?"_s":"size",f=function(t,e){var i,a=h(e);if("F"!==a)return t._i[a];for(i=t._f;i;i=i.n)if(i.k==e)return i};t.exports={getConstructor:function(t,e,i,l){var d=t((function(t,a){o(t,d,e,"_i"),t._t=e,t._i=n(null),t._f=void 0,t._l=void 0,t[m]=0,void 0!=a&&c(a,i,t[l],t)}));return s(d.prototype,{clear:function(){for(var t=g(this,e),i=t._i,a=t._f;a;a=a.n)a.r=!0,a.p&&(a.p=a.p.n=void 0),delete i[a.i];t._f=t._l=void 0,t[m]=0},delete:function(t){var i=g(this,e),a=f(i,t);if(a){var n=a.n,s=a.p;delete i._i[a.i],a.r=!0,s&&(s.n=n),n&&(n.p=s),i._f==a&&(i._f=n),i._l==a&&(i._l=s),i[m]--}return!!a},forEach:function(t){g(this,e);var i,a=r(t,arguments.length>1?arguments[1]:void 0,3);while(i=i?i.n:this._f){a(i.v,i.k,this);while(i&&i.r)i=i.p}},has:function(t){return!!f(g(this,e),t)}}),p&&a(d.prototype,"size",{get:function(){return g(this,e)[m]}}),d},def:function(t,e,i){var a,n,s=f(t,e);return s?s.v=i:(t._l=s={i:n=h(e,!0),k:e,v:i,p:a=t._l,n:void 0,r:!1},t._f||(t._f=s),a&&(a.n=s),t[m]++,"F"!==n&&(t._i[n]=s)),t},getEntry:f,setStrong:function(t,e,i){l(t,e,(function(t,i){this._t=g(t,e),this._k=i,this._l=void 0}),(function(){var t=this,e=t._k,i=t._l;while(i&&i.r)i=i.p;return t._t&&(t._l=i=i?i.n:t._t._f)?d(0,"keys"==e?i.k:"values"==e?i.v:[i.k,i.v]):(t._t=void 0,d(1))}),i?"entries":"values",!i,!0),u(e)}}},d8e9:function(t,e,i){t.exports=i.p+"assets/img/secret.43d717d4.png"},e0b8:function(t,e,i){"use strict";var a=i("7726"),n=i("5ca1"),s=i("2aba"),r=i("dcbc"),o=i("67ab"),c=i("4a59"),l=i("f605"),d=i("d3f4"),u=i("79e5"),p=i("5cc5"),h=i("7f20"),g=i("5dbc");t.exports=function(t,e,i,m,f,v){var x=a[t],w=x,b=f?"set":"add",y=w&&w.prototype,_={},k=function(t){var e=y[t];s(y,t,"delete"==t?function(t){return!(v&&!d(t))&&e.call(this,0===t?0:t)}:"has"==t?function(t){return!(v&&!d(t))&&e.call(this,0===t?0:t)}:"get"==t?function(t){return v&&!d(t)?void 0:e.call(this,0===t?0:t)}:"add"==t?function(t){return e.call(this,0===t?0:t),this}:function(t,i){return e.call(this,0===t?0:t,i),this})};if("function"==typeof w&&(v||y.forEach&&!u((function(){(new w).entries().next()})))){var S=new w,L=S[b](v?{}:-0,1)!=S,I=u((function(){S.has(1)})),T=p((function(t){new w(t)})),G=!v&&u((function(){var t=new w,e=5;while(e--)t[b](e,e);return!t.has(-0)}));T||(w=e((function(e,i){l(e,w,t);var a=g(new x,e,w);return void 0!=i&&c(i,f,a[b],a),a})),w.prototype=y,y.constructor=w),(I||G)&&(k("delete"),k("has"),f&&k("get")),(G||L)&&k(b),v&&y.clear&&delete y.clear}else w=m.getConstructor(e,t,f,b),r(w.prototype,i),o.NEED=!0;return h(w,t),_[t]=w,n(n.G+n.W+n.F*(w!=x),_),v||m.setStrong(w,t,f),w}},e232:function(t,e,i){"use strict";var a=i("aa28"),n=i.n(a);n.a}}]);