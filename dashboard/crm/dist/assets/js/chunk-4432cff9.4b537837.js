(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4432cff9"],{"1b2b9":function(t,e,a){var i=a("659a");"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var n=a("499e").default;n("2c760f3f",i,!0,{sourceMap:!1,shadowMode:!1})},"659a":function(t,e,a){e=t.exports=a("2350")(!1),e.push([t.i,".content-editable[data-v-78efdf6a] p,.item-info[data-v-78efdf6a] p{margin:0;display:inline-block}#components-layout-demo-basic[data-v-78efdf6a]{height:100%}#components-layout-demo-basic .ant-layout-header[data-v-78efdf6a]{background:#fff;border-bottom:1px solid #e2e2e2;height:50px;min-width:885px;width:100%;line-height:50px}[data-v-78efdf6a] .ant-layout-header{padding:0 20px;font-size:16px;text-align:left}[data-v-78efdf6a] .ant-radio-button-wrapper{width:200px;height:55px;line-height:55px;padding:0 10px;margin:10px 5px}#components-layout-demo-basic .ant-layout-sider[data-v-78efdf6a]{background:#fff;-webkit-box-flex:0!important;-ms-flex:0 0 250px!important;flex:0 0 250px!important;max-width:250px!important;min-width:250px!important;width:250px!important;border-right:1px solid #e2e2e2}#components-layout-demo-basic .ant-layout-content[data-v-78efdf6a]{margin:0 20px 20px;min-width:885px;width:100%;padding-right:40px}.content-hd[data-v-78efdf6a]{height:60px;line-height:60px}.content-bd[data-v-78efdf6a],.content-hd[data-v-78efdf6a]{width:100%;min-width:885px}.content-bd[data-v-78efdf6a]{background:#fff;min-height:120px;border:1px solid #e2e2e2}#components-layout-demo-basic>.ant-layout[data-v-78efdf6a]{margin-bottom:48px}#components-layout-demo-basic>.ant-layout[data-v-78efdf6a]:last-child{margin:0}[data-v-78efdf6a] .detail-drawer .ant-drawer-mask{background-color:rgba(0,0,0,.65)!important}.list[data-v-78efdf6a]{margin-left:16px}.ant-layout.ant-layout-has-sider[data-v-78efdf6a],.list[data-v-78efdf6a]{height:100%}.sider-one[data-v-78efdf6a]{padding:0 20px}.sider-one-txt[data-v-78efdf6a]{height:60px;line-height:60px;text-align:left}.selectWx[data-v-78efdf6a]{width:200px;margin-left:20px;height:50px;line-height:50px;cursor:pointer;padding-left:10px}.active[data-v-78efdf6a]{background:#1e90ff;color:#fff}[data-v-78efdf6a] .ant-tabs-bar{padding:0 20px!important}.msg_content[data-v-78efdf6a]{border:1px solid #e2d6d6;height:100%;width:420px;margin:auto;overflow-y:auto}.msg_content .msg_content_header[data-v-78efdf6a]{width:100%}.msg_content .msg_content_body[data-v-78efdf6a]{background:#fff;border:1px solid #e9e9e9;border-radius:4px;margin:auto;padding:16px 13px;font-size:14px;color:#333;line-height:24px;margin:20px}.msg_content_txt[data-v-78efdf6a]{float:right;width:340px;border:1px solid #e2d6d6;line-height:50px;padding:0 15px;overflow-wrap:break-word;-webkit-hyphens:auto;-ms-hyphens:auto;hyphens:auto}[data-v-78efdf6a] .dark-row{background:#fafafa}[data-v-78efdf6a] .light-row{background:#fff}.wx-info[data-v-78efdf6a]{width:100%;position:absolute;left:0;top:100px;bottom:0;overflow:hidden}.wx-info[data-v-78efdf6a]::-webkit-scrollbar{width:2px;height:100%}.wx-info[data-v-78efdf6a]::-webkit-scrollbar-track-piece{background-color:#fff}.wx-info[data-v-78efdf6a]::-webkit-scrollbar-thumb{background:#fff}.content-msg[data-v-78efdf6a]{width:100%;border:1px solid #ffdda6;background:#fff2db;padding:10px;margin-top:12px;text-align:left}.content-msg a[data-v-78efdf6a]:link,.content-msg a[data-v-78efdf6a]:visited{text-decoration:none}.template-title[data-v-78efdf6a]{font-size:16px;vertical-align:top}.help[data-v-78efdf6a]{display:inline-block;margin-left:10px}.help-icon[data-v-78efdf6a]{margin-right:5px;font-size:14px;margin-top:4px}.help-transition[data-v-78efdf6a]{-webkit-animation:help-data-v-78efdf6a 1s infinite;animation:help-data-v-78efdf6a 1s infinite}.help a[data-v-78efdf6a]{font-size:14px}.help a[data-v-78efdf6a]:link,.help a[data-v-78efdf6a]:visited{color:#1890ff;text-decoration:none}.help-transition1[data-v-78efdf6a]{-webkit-animation:help1-data-v-78efdf6a 1s infinite;animation:help1-data-v-78efdf6a 1s infinite}@-webkit-keyframes help-data-v-78efdf6a{0%{-webkit-transform:translate(0);transform:translate(0)}50%{-webkit-transform:translateY(-8px);transform:translateY(-8px)}to{-webkit-transform:translateY(3px);transform:translateY(3px)}}@keyframes help-data-v-78efdf6a{0%{-webkit-transform:translate(0);transform:translate(0)}50%{-webkit-transform:translateY(-8px);transform:translateY(-8px)}to{-webkit-transform:translateY(3px);transform:translateY(3px)}}@-webkit-keyframes help1-data-v-78efdf6a{0%{-webkit-transform:translateY(3px);transform:translateY(3px)}50%{-webkit-transform:translateY(-4px);transform:translateY(-4px)}to{-webkit-transform:translate(0);transform:translate(0)}}@keyframes help1-data-v-78efdf6a{0%{-webkit-transform:translateY(3px);transform:translateY(3px)}50%{-webkit-transform:translateY(-4px);transform:translateY(-4px)}to{-webkit-transform:translate(0);transform:translate(0)}}",""])},"83a8":function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("a-modal",{attrs:{title:"选择公众号",width:"888"},on:{ok:t.handleOk,cancel:t.handleCancel},model:{value:t.showModal,callback:function(e){t.showModal=e},expression:"showModal"}},[a("div",{staticStyle:{height:"270px"}},[t.wxInfo[0]?a("a-select",{staticStyle:{width:"200px","margin-bottom":"20px","margin-left":"5px"},attrs:{showSearch:"",optionFilterProp:"children"},on:{change:t.changeWx},model:{value:t.changeBackground,callback:function(e){t.changeBackground=e},expression:"changeBackground"}},[t._l(t.wxInfo,(function(e){return["unauthorized"!=e.authorizer_type&&"已认证"==e.verify_type?a("a-select-option",{attrs:{value:e.wx_id}},[t._v("\n\t\t\t\t\t\t"+t._s(e.nick_name)+"\n\t\t\t\t\t")]):t._e()]}))],2):t._e(),a("div",{staticClass:"wxtpl",staticStyle:{height:"230px"}},[t._l(t.wxInfo,(function(e,i){return["scene"!=t.routeName&&"template"!=t.routeName?["unauthorized"!=e.authorizer_type&&"已认证"==e.verify_type?a("a-radio-group",{on:{change:function(a){return t.changeWx2(e.wx_id,e.nick_name)}},model:{value:t.changeBackground,callback:function(e){t.changeBackground=e},expression:"changeBackground"}},[a("a-radio-button",{attrs:{value:e.wx_id}},[a("div",[a("a-avatar",{attrs:{src:e.head_img,shape:"square"}}),a("span",{staticClass:"text"},[t._v(t._s(e.nick_name))])],1),t.material_type?a("div",{staticStyle:{"font-size":"10px","line-height":"20px","margin-top":"5px"}},[a("span",[t._v("最后时间：")]),t._v(t._s(e.pull_time||"暂无")+"\n\t\t\t\t\t\t\t")]):t._e()])],1):t._e()]:t._e(),"scene"==t.routeName||"template"==t.routeName?["unauthorized"!=e.authorizer_type&&2==e.service_type?a("a-radio-group",{on:{change:function(a){return t.changeWx2(e.wx_id,e.nick_name)}},model:{value:t.changeBackground,callback:function(e){t.changeBackground=e},expression:"changeBackground"}},[a("a-radio-button",{attrs:{value:e.wx_id}},[a("div",[a("a-avatar",{attrs:{src:e.head_img,shape:"square"}}),a("span",{staticClass:"text"},[t._v(t._s(e.nick_name))])],1)])],1):t._e()]:t._e()]}))],2)],1)])],1)},n=[],s=(a("7f7f"),a("ac4d"),a("8a81"),a("ac6a"),a("28a5"),a("96cf"),a("3b8d")),o=a("bc3a"),r=a.n(o),l=a("f64c"),c={name:"wxModal",props:{material_type:{type:String,default:""},show:{type:Boolean,default:!1},callback:{type:Function,default:null},hasName:{type:String,default:""},source:{type:String,default:""},type:{type:String,default:""},corpId1:{type:String,default:""},wxId:{type:String,default:""}},data:function(){var t=localStorage.getItem("wxNum")?localStorage.getItem("wxNum"):"";return{showModal:!1,wxInfo:[],changeBackground:t,wxNum:t,authorizer_type:"",wxNickName:this.$store.state.wxNickName,routeName:""}},methods:{handleOk:function(t,e){2==localStorage.getItem("isMasterAccount")?this.getPermissionButton():(this.showModal=!1,this.$store.dispatch("changeWxNum",this.wxNum),this.$store.commit("changeWxNickName",this.wxNickName),null!==this.callback&&"function"===typeof this.callback&&this.callback("ok",this.wxNum,this.wxNickName))},handleCancel:function(t){null!==this.callback&&"function"===typeof this.callback&&this.callback("cancel"),this.showModal=!1},changeWx:function(t){var e=this;this.wxInfo.map((function(a){t==a.wx_id&&(e.wxNickName=a.nick_name)})),this.wxNum=t},changeWx2:function(t,e){this.wxNum=t,this.wxNickName=e},getPermissionButton:function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(){var e,a,i,n,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,r.a.post("sub-user/get-sub-user-authority",{isMasterAccount:localStorage.getItem("isMasterAccount"),sub_id:localStorage.getItem("sub_id"),account_id:this.wxNum,type:""!=this.type?this.type:localStorage.getItem("type"),source:this.source,corp_id:2==this.type?this.corpId1:"",wx_id:2==this.type?this.wxNum:""});case 2:if(e=t.sent,a=e.data,0!=a.error){t.next=33;break}if(!(a.data.length>0)){t.next=30;break}if(""==this.hasName){t.next=25;break}if(i=this.hasName.split(","),n=!0,!(i.length>0)){t.next=22;break}s=0;case 11:if(!(s<i.length)){t.next=19;break}if(-1!=a.data.indexOf(i[s])){t.next=16;break}return l["a"].error("该公众号未配置相关功能权限，无法选择"),n=!1,t.abrupt("return",!1);case 16:s++,t.next=11;break;case 19:n&&(this.showModal=!1,this.$store.dispatch("changeWxNum",this.wxNum),this.$store.commit("changeWxNickName",this.wxNickName),null!==this.callback&&"function"===typeof this.callback&&this.callback("ok",this.wxNum,this.wxNickName)),t.next=23;break;case 22:-1==a.data.indexOf(this.hasName)?l["a"].error("该公众号未配置相关功能权限，无法选择"):(this.showModal=!1,this.$store.dispatch("changeWxNum",this.wxNum),this.$store.commit("changeWxNickName",this.wxNickName),null!==this.callback&&"function"===typeof this.callback&&this.callback("ok",this.wxNum,this.wxNickName));case 23:t.next=28;break;case 25:this.showModal=!1,this.$store.dispatch("changeWxNum",this.wxNum),null!==this.callback&&"function"===typeof this.callback&&this.callback("ok",this.wxNum,this.wxNickName);case 28:t.next=31;break;case 30:l["a"].error("无权限");case 31:t.next=34;break;case 33:l["a"].error("获取权限按钮列表失败！");case 34:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),getWx:function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(){var e,a,i,n,s,o,l,c,d;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=0,"/filingCabinet/list"==this.$route.path&&(e=1),t.next=4,r.a.post("wx-authorize-info/get-authrize-info",{uid:localStorage.getItem("uid"),isMasterAccount:localStorage.getItem("isMasterAccount"),sub_id:localStorage.getItem("sub_id"),material_type:this.material_type,is_from_content:e});case 4:a=t.sent,i=a.data,this.wxInfo=i.data.info,n=!0,s=!1,o=void 0,t.prev=10,l=this.wxInfo[Symbol.iterator]();case 12:if(n=(c=l.next()).done){t.next=21;break}if(d=c.value,"已认证"!=d.verify_type){t.next=18;break}return this.wxNum=d.wx_id,this.changeBackground=d.wx_id,t.abrupt("return",!1);case 18:n=!0,t.next=12;break;case 21:t.next=27;break;case 23:t.prev=23,t.t0=t["catch"](10),s=!0,o=t.t0;case 27:t.prev=27,t.prev=28,n||null==l.return||l.return();case 30:if(t.prev=30,!s){t.next=33;break}throw o;case 33:return t.finish(30);case 34:return t.finish(27);case 35:case"end":return t.stop()}}),t,this,[[10,23,27,35],[28,,30,34]])})));function e(){return t.apply(this,arguments)}return e}()},watch:{show:function(t){var e=this;this.showModal=t,this.changeBackground=localStorage.getItem("wxNum"),this.material_type?this.getWx():this.$store.dispatch("getWx",(function(t){e.wxInfo=t,e.wxNum=e.$store.state.wxNum,!e.changeBackground&&e.wxInfo.length>0&&(e.changeBackground=e.$store.state.wxNum,e.wxNum=e.$store.state.wxNum,e.wxNickName=e.$store.state.wxNickName)})),this.routeName=this.$route.name}},created:function(){}},d=c,h=(a("adcd"),a("2877")),p=Object(h["a"])(d,i,n,!1,null,"2bf4494e",null);e["a"]=p.exports},"8bb4":function(t,e,a){e=t.exports=a("2350")(!1),e.push([t.i,"[data-v-2bf4494e] .ant-radio-button-wrapper{width:200px;height:55px;line-height:47px;padding:0 10px;margin:10px 5px}[data-v-2bf4494e] .wxtpl .ant-radio-button-wrapper-checked{border:2px solid #1890ff!important}.text[data-v-2bf4494e]{margin-left:5px;vertical-align:middle;display:inline-block;width:calc(100% - 37px);overflow:hidden;text-overflow:ellipsis;white-space:nowrap}[data-v-2bf4494e] .ant-radio-group{vertical-align:top}",""])},abd9:function(t,e,a){var i=a("8bb4");"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var n=a("499e").default;n("13e4dda0",i,!0,{sourceMap:!1,shadowMode:!1})},adcd:function(t,e,a){"use strict";var i=a("abd9"),n=a.n(i);n.a},c758:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"list"},[i("div",{attrs:{id:"components-layout-demo-basic"}},[i("a-layout",{staticStyle:{position:"relative",height:"100%",overflow:"hidden"}},[t.wxLen>1?i("a-layout-sider",[i("div",{staticClass:"sider-one"},[i("div",{staticClass:"sider-one-txt"},[t._v("选择公众号")]),t.wxInfo[0]?i("a-select",{staticStyle:{width:"200px","margin-bottom":"20px"},attrs:{showSearch:"",optionFilterProp:"children"},on:{change:t.handleChange},model:{value:t.changeBackground,callback:function(e){t.changeBackground=e},expression:"changeBackground"}},[t._l(t.wxInfo,(function(e){return[i("a-select-option",{attrs:{value:e.wx_id}},[t._v(t._s(e.nick_name))])]}))],2):t._e(),i("div",{ref:"wxInfo",staticClass:"wx-info",on:{mousemove:t.wxInfoMouseOver,mouseout:t.wxInfoMouseOut}},[t._l(t.wxInfo,(function(e,a){return[i("div",{staticClass:"selectWx",class:{active:t.changeBackground==e.wx_id},on:{click:function(a){return t.selectWx(e.wx_id,e.authorizer_type,e.nick_name,e.verify_type,e.service_type)}}},[i("a-avatar",{attrs:{src:e.head_img,shape:"square"}}),i("span",{staticStyle:{"text-overflow":"ellipsis","white-space":"nowrap",overflow:"hidden",float:"right",width:"calc(100% - 35px)"}},[t._v(t._s(e.nick_name))])],1)]}))],2)],1)]):t._e(),i("a-layout",{staticClass:"scroll",staticStyle:{position:"absolute",top:"0",bottom:"0",right:"0","overflow-x":"hidden","overflow-y":"auto"},style:t.wxLen>1?{left:"250px"}:{left:"0px"}},[i("a-layout-header",[i("label",{staticClass:"template-title"},[t._v("模板消息")]),i("span",{staticStyle:{"vertical-align":"top","font-size":"14px",margin:"0 10px"}},[t._v("仅认证服务号可用")]),i("div",{staticClass:"help",class:0==t.showTransition?"help-transition":1==t.showTransition?"help-transition1":""},[i("a",{attrs:{href:"https://support.qq.com/products/312071/faqs/90140",target:"_blank"}},[i("a-icon",{staticClass:"help-icon",attrs:{type:"question-circle"}}),i("span",{staticStyle:{float:"right"}},[t._v("点我帮助")])],1)])]),i("a-layout-content",[i("div",{staticClass:"content-msg"},[i("p",{staticStyle:{"margin-bottom":"2px"}},[t._v("\n\t\t\t\t\t\t\t\t1、不同行业可用的模板不一样，需要在微信公众号后台设置选择。如果没有合并的模板也可以在公众平台后台提交新的模板，微信审核通过后即可使用。")]),i("p",{staticStyle:{"margin-bottom":"2px"}},[t._v("\n\t\t\t\t\t\t\t\t2、模板消息可以随时对粉丝推送消息，可跳转链接，但请控制群发频次，≤3次即可。也请勿发送广告等营销类消息以及其它所有可能对用户造成骚扰的消息，避免影响公众号使用（\n\t\t\t\t\t\t\t\t"),i("a",{attrs:{href:"https://support.qq.com/products/312071/faqs/90145",target:"_blank"}},[t._v("查看模版消息注意事项")]),t._v("）。\n\t\t\t\t\t\t\t")]),i("p",{staticStyle:{"margin-bottom":"0px"}},[t._v("\n\t\t\t\t\t\t\t\t3、在微信公众平台将模板ID删除后，在新建模板消息时，会重新请求微信最新模板ID数据。若模板消息已处于发送中时将模板ID删除，则尚未发送完的粉丝就接收不到了。")])]),i("div",{staticClass:"content-hd"},[i("a-col",{staticStyle:{float:"left"}},[i("a-select",{staticStyle:{width:"174px","margin-right":"15px"},attrs:{showSearch:"",optionFilterProp:"children",allowClear:"",value:t.titleIndex,placeholder:"请选择消息名称",filterOption:t.filterOption},on:{change:t.changeMsgTitle}},[t._l(t.dataSource,(function(e,a){return[i("a-select-option",{attrs:{value:a}},[t._v(t._s(e))])]}))],2),i("a-select",{staticStyle:{width:"174px","margin-right":"15px"},on:{change:t.changeStatus},model:{value:t.status,callback:function(e){t.status=e},expression:"status"}},[i("a-select-option",{attrs:{value:"0"}},[t._v("全部状态")]),i("a-select-option",{attrs:{value:"1"}},[t._v("未发送")]),i("a-select-option",{attrs:{value:"4"}},[t._v("发送中")]),i("a-select-option",{attrs:{value:"2"}},[t._v("已发送")]),i("a-select-option",{attrs:{value:"3"}},[t._v("发送失败")])],1),i("a-date-picker",{staticStyle:{"margin-right":"15px"},on:{change:t.changeDate},model:{value:t.date,callback:function(e){t.date=e},expression:"date"}}),i("a-button",{staticStyle:{"margin-right":"15px"},attrs:{type:"primary"},on:{click:t.find}},[t._v("查找")]),i("a-button",{on:{click:t.clear}},[t._v("清空")])],1),i("a-col",{staticStyle:{float:"right"}},["unauthorized"!=t.$store.state.authorizer_type&&t.verify_service?i("a-button",{directives:[{name:"has",rawName:"v-has",value:"template-add",expression:"'template-add'"}],staticStyle:{width:"150px","font-size":"14px"},attrs:{type:"primary",icon:"plus"},on:{click:t.add}},[t._v("新建模板消息\n\t\t\t\t\t\t\t\t")]):t._e(),"unauthorized"==t.$store.state.authorizer_type?i("a-button",{directives:[{name:"has",rawName:"v-has",value:"template-add",expression:"'template-add'"}],staticStyle:{width:"150px","font-size":"14px"},attrs:{type:"primary",icon:"plus"},on:{click:t.showConfirmWx}},[t._v("\n\t\t\t\t\t\t\t\t\t新建模板消息\n\t\t\t\t\t\t\t\t")]):t._e(),"unauthorized"==t.$store.state.authorizer_type||t.verify_service?t._e():i("a-button",{directives:[{name:"has",rawName:"v-has",value:"template-add",expression:"'template-add'"}],staticStyle:{width:"150px","font-size":"14px"},attrs:{type:"primary",icon:"plus"},on:{click:t.showVerify}},[t._v("\n\t\t\t\t\t\t\t\t\t新建模板消息\n\t\t\t\t\t\t\t\t")])],1)],1),i("wxModal",{attrs:{show:t.showModal2,callback:t.modalVisibleChange,hasName:"template-add"}}),i("div",{staticClass:"content-bd"},[i("a-spin",{attrs:{tip:"Loading...",size:"large",spinning:t.isLoading}},[i("a-table",{directives:[{name:"has",rawName:"v-has",value:"template-list",expression:"'template-list'"}],attrs:{columns:t.columns,dataSource:t.templateList,pagination:!1,rowClassName:t.rowClassName},scopedSlots:t._u([{key:"status",fn:function(e,a){return i("span",{},[i("a-tooltip",[i("template",{slot:"title"},[t._v(t._s(a.error_msg))]),"发送失败"==a.status?i("span",{staticStyle:{color:"red"}},[t._v(t._s(a.status))]):t._e()],2),"发送失败"!=a.status?i("span",[t._v(t._s(a.status))]):t._e()],1)}},{key:"action",fn:function(e,a,n){return i("span",{},["未发送"==a.status?["unauthorized"!=t.$store.state.authorizer_type?i("a-button",{directives:[{name:"has",rawName:"v-has",value:"template-edit",expression:"'template-edit'"}],staticStyle:{"margin-right":"5px","margin-bottom":"5px"},on:{click:function(e){return t.edit(a.id)}}},[t._v("修改")]):t._e(),"unauthorized"==t.$store.state.authorizer_type?i("a-button",{directives:[{name:"has",rawName:"v-has",value:"template-edit",expression:"'template-edit'"}],staticStyle:{"margin-right":"5px","margin-bottom":"5px"},on:{click:t.showConfirmWx}},[t._v("修改")]):t._e(),i("a-button",{directives:[{name:"has",rawName:"v-has",value:"template-info",expression:"'template-info'"}],staticStyle:{"margin-right":"5px","margin-bottom":"5px"},on:{click:function(e){return t.detail(a.id,a.tpl_id)}}},[t._v("详情")]),"unauthorized"!=t.$store.state.authorizer_type?i("a-button",{directives:[{name:"has",rawName:"v-has",value:"template-delete",expression:"'template-delete'"}],on:{click:function(e){return t.deleteList(a.id)}}},[t._v("删除")]):t._e(),"unauthorized"==t.$store.state.authorizer_type?i("a-button",{directives:[{name:"has",rawName:"v-has",value:"template-delete",expression:"'template-delete'"}],on:{click:t.showConfirmWx}},[t._v("删除")]):t._e()]:t._e(),"已发送"==a.status?[i("a-button",{directives:[{name:"has",rawName:"v-has",value:"template-info",expression:"'template-info'"}],staticStyle:{"margin-right":"5px","margin-bottom":"5px"},on:{click:function(e){return t.detail(a.id,a.tpl_id)}}},[t._v("详情")])]:t._e(),"发送中"==a.status?[i("a-button",{directives:[{name:"has",rawName:"v-has",value:"template-info",expression:"'template-info'"}],staticStyle:{"margin-right":"5px","margin-bottom":"5px"},on:{click:function(e){return t.detail(a.id,a.tpl_id)}}},[t._v("详情")])]:t._e(),"发送失败"==a.status?[i("a-button",{directives:[{name:"has",rawName:"v-has",value:"template-info",expression:"'template-info'"}],staticStyle:{"margin-right":"5px","margin-bottom":"5px"},on:{click:function(e){return t.detail(a.id,a.tpl_id)}}},[t._v("详情")]),"unauthorized"!=t.$store.state.authorizer_type?i("a-button",{directives:[{name:"has",rawName:"v-has",value:"template-delete",expression:"'template-delete'"}],on:{click:function(e){return t.deleteList(a.id)}}},[t._v("删除")]):t._e(),"unauthorized"==t.$store.state.authorizer_type?i("a-button",{directives:[{name:"has",rawName:"v-has",value:"template-delete",expression:"'template-delete'"}],on:{click:t.showConfirmWx}},[t._v("删除")]):t._e()]:t._e()],2)}}])}),i("div",{directives:[{name:"show",rawName:"v-show",value:t.total>0,expression:"total > 0"},{name:"has",rawName:"v-has",value:"template-list",expression:"'template-list'"}],staticStyle:{width:"100%",position:"absolute","margin-top":"20px","margin-bottom":"20px"}},[i("div",{staticStyle:{height:"32px",float:"left","line-height":"32px"}},[t._v("\n\t\t\t\t\t\t\t\t\t\t共有\n\t\t\t\t\t\t\t\t\t\t"),i("span",{staticStyle:{color:"blue"}},[t._v(t._s(t.total))]),t._v("条消息\n\t\t\t\t\t\t\t\t\t")]),i("div",{staticClass:"pagination",staticStyle:{height:"32px",float:"right"}},[i("a-pagination",{attrs:{total:t.total,showSizeChanger:"",showQuickJumper:t.quickJumper,current:t.page,pageSize:t.pageSize,pageSizeOptions:["15","30","50","100"]},on:{change:t.changePage,showSizeChange:t.showSizeChange}})],1)]),[i("a-drawer",{staticClass:"detail-drawer",attrs:{placement:"right",mask:!0,closable:!1,visible:t.visible},on:{close:t.onClose}},[i("a-tabs",{attrs:{defaultActiveKey:"1"}},[i("a-tab-pane",{key:"1",attrs:{tab:"消息内容"}},[i("div",{staticClass:"msg_content"},[i("img",{staticClass:"msg_content_header",attrs:{src:a("eb7e"),alt:""}}),i("div",{staticClass:"msg_content_body"},[i("h3",[t._v(t._s(t.templateData.title))]),t._l(t.templateData.data,(function(e,a){return i("div",{staticStyle:{margin:"5px 0"}},[i("span",{directives:[{name:"show",rawName:"v-show",value:1==e.type||3==e.type,expression:"item.type == 1 || item.type == 3"}],style:{color:e.start.color}},[t._v(t._s(e.start.value))]),i("span",{directives:[{name:"show",rawName:"v-show",value:2==e.type||3==e.type,expression:"item.type == 2 || item.type == 3"}],style:{color:e.end.color}},[t._v(t._s(e.end.value))]),i("span",[t._v(t._s(e.title))]),i("span",{staticClass:"item-info",style:{color:t.fc(a)},domProps:{innerHTML:t._s(t.textAreaValue[a])}})])}))],2)])])],1)],1)]],2)],1)],1)],1)],1)],1)])},n=[],s=(a("a481"),a("96cf"),a("3b8d")),o=a("83a8"),r=[{title:"消息名称",dataIndex:"msg_title",key:"msg_title",width:"180px"},{title:"发送对象",dataIndex:"send_people",key:"send_people"},{title:"模板",dataIndex:"tpl_name",key:"tpl_name"},{title:"发送时间",dataIndex:"push_time",key:"push_time"},{title:"预计发送人数",dataIndex:"will_fans_num",key:"will_fans_num"},{title:"实际发送人数",dataIndex:"fans_num",key:"fans_num"},{title:"发送状态",dataIndex:"status",key:"status",scopedSlots:{customRender:"status"}},{title:"操作",dataIndex:"action",width:"18%",key:"action",scopedSlots:{customRender:"action"}}],l={name:"templateList",components:{wxModal:o["a"]},data:function(){var t=localStorage.getItem("wxNum")?localStorage.getItem("wxNum"):"";return{showTransition:1,isLoading:!1,wxLen:JSON.parse(localStorage.getItem("wxArr")).length,wxInfo:[],changeBackground:t,status:"0",push_time:"",columns:r,templateList:[],visible:!1,dataSource:[],showModal2:!1,wxNum:t,page:1,pageSize:15,total:0,quickJumper:!1,templateData:[],detailList:[{color:"#FF0000",value:""},{color:"#FF0000",value:""}],color1:"#333",color2:"#333",textAreaValue:[],verify_service:!1,title:"",titleIndex:[],date:null}},methods:{initHelp:function(){var t=this;setInterval((function(){t.showTransition=(t.showTransition+1)%5}),1e3)},wxInfoMouseOver:function(){this.$refs.wxInfo.style.overflowY="auto"},wxInfoMouseOut:function(){this.$refs.wxInfo.style.overflowY="hidden"},rowClassName:function(t,e){var a="dark-row";return e%2===0&&(a="light-row"),a},handleChange:function(t){var e=this;this.verify_service=!1,this.wxInfo.map((function(a){t==a.wx_id&&(e.$store.commit("changeAuthorizerType",a.authorizer_type),e.$store.commit("changeWxNickName",a.nick_name),"已认证"==a.verify_type&&2==a.service_type&&(e.verify_service=!0))})),this.$store.dispatch("changeWxNum",t),this.isLoading=!0,this.changeBackground=t,this.wxNum=t,this.getTemplates(),2==localStorage.getItem("isMasterAccount")&&this.$store.dispatch("getPermissionButton")},selectWx:function(t,e,a,i,n){this.verify_service=!1,this.$store.dispatch("changeWxNum",t),this.isLoading=!0,this.changeBackground=t,this.wxNum=t,"已认证"==i&&2==n&&(this.verify_service=!0),this.$store.commit("changeAuthorizerType",e),this.$store.commit("changeWxNickName",a),this.getTemplates(),2==localStorage.getItem("isMasterAccount")&&this.$store.dispatch("getPermissionButton")},showConfirmWx:function(){this.$success({title:this.$store.state.wxNickName+"已取消授权，无法操作"})},showVerify:function(){this.$success({title:"仅针对认证的服务号开放使用"})},changeStatus:function(t){this.status=t},changeDate:function(t,e){this.push_time=e},changeMsgTitle:function(t){this.title=this.dataSource[t],this.titleIndex=t},filterOption:function(t,e){return e.componentOptions.children[0].text.toLowerCase().indexOf(t.toLowerCase())>=0},find:function(){this.isLoading=!0,this.getTemplates()},clear:function(){this.isLoading=!0,location.reload()},getTemplates:function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(){var e,a,i,n,s=arguments;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=s.length>0&&void 0!==s[0]?s[0]:1,a=s.length>1&&void 0!==s[1]?s[1]:this.pageSize,this.isLoading=!0,this.wxInfo=this.$store.state.wxArr,t.next=6,this.axios.post("template-push-msg/get-all-template-msg",{wx_id:localStorage.getItem("wxNum"),page:e,status:this.status,pageSize:a,date:this.push_time,title:this.title});case 6:i=t.sent,n=i.data,0!=n.error?(this.isLoading=!1,this.$message.error(n.error_msg)):(this.isLoading=!1,this.templateList=n.data.info,this.total=parseInt(n.data.count),this.page=e,this.pageSize=a,this.quickJumper=this.total>this.pageSize);case 9:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),edit:function(t){this.$router.push({path:"/template/add",query:{id:t}})},detail:function(t,e){this.visible=!0,this.textAreaValue=[],this.getDetailContent(t,e)},onClose:function(){this.visible=!1},fc:function(t){return this.detailList[t]?this.detailList[t].color:"#FF0000"},getTemplateContent:function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(e){var a,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.axios.post("template/get-template-content",{id:e});case 2:a=t.sent,i=a.data,0!=i.error?this.$message.error(i.error_msg):this.templateData=i.data;case 5:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),getDetailContent:function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(e,a){var i,n,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.axios.post("template-push-msg/preview",{id:e});case 2:if(i=t.sent,n=i.data,0!=n.error)this.$message.error(n.error_msg);else{for(this.detailList=n.data.info,s=0;s<this.detailList.length;s++)this.detailList[s].value&&(this.detailList[s].value=this.detailList[s].value.replace(/{nickname}/g,'&nbsp;<span contenteditable="false" class="ant-tag ant-tag-orange">粉丝昵称</span>&nbsp;').replace(/\n/g,"<br/>")),this.textAreaValue.push(this.detailList[s].value);this.getTemplateContent(a)}case 5:case"end":return t.stop()}}),t,this)})));function e(e,a){return t.apply(this,arguments)}return e}(),deleteList:function(t){var e=this;e.$confirm({title:"确定删除模板消息?",okText:"确定",okType:"primary",cancelText:"取消",onOk:function(){e.isLoading=!0,e.deleteTemplate(t)}})},deleteTemplate:function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(e){var a,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.axios.post("template-push-msg/delete-template-message",{id:e});case 2:a=t.sent,i=a.data,0!=i.error?(this.isLoading=!1,this.$message.error(i.error_msg)):(this.isLoading=!1,1==this.templateList.length?this.getTemplates(this.page-1,this.pageSize):this.getTemplates(this.page,this.pageSize));case 5:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),add:function(){this.wxInfo.length>1?this.showModal2=!0:this.$router.push("/template/add")},modalVisibleChange:function(t,e){"ok"==t?(this.showModal2=!1,this.$store.dispatch("changeWxNum",e),this.$router.push("/template/add")):this.showModal2=!1},changePage:function(t,e){this.getTemplates(t,e),this.$nextTick((function(){document.getElementsByClassName("scroll")[0].scrollTo(0,110)}))},showSizeChange:function(t,e){this.getTemplates(1,e)},getTitles:function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(){var e,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.axios.post("template-push-msg/get-title",{wx_id:localStorage.getItem("wxNum")});case 2:e=t.sent,a=e.data,0!=a.error?this.$message.error(a.error_msg):this.dataSource=a.data;case 5:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},created:function(){var t=this;this.$store.dispatch("getWx",(function(e){t.wxInfo=e,!t.changeBackground&&t.wxInfo.length>0&&(t.changeBackground=t.$store.state.wxNum,t.wxNum=t.$store.state.wxNum),t.wxInfo.map((function(e){e.wx_id==t.changeBackground&&"已认证"==e.verify_type&&2==e.service_type&&(t.verify_service=!0)}))})),this.getTemplates(),this.getTitles()},mounted:function(){this.initHelp()},beforeRouteEnter:function(t,e,a){"/template/add"==e.path&&"undefined"!=typeof t.query.isRefresh&&"1"==t.query.isRefresh?a((function(t){t.getTemplates(t.page,t.pageSize)})):"/template/add"==e.path&&"undefined"==typeof t.query.isRefresh&&a((function(t){t.isLoading=!0,t.status="0",t.title="",t.titleIndex=[],t.date=null,t.page=1,t.pageSize=15,t.push_time="",t.getTemplates()})),a()}},c=l,d=(a("ee19"),a("2877")),h=Object(d["a"])(c,i,n,!1,null,"78efdf6a",null);e["default"]=h.exports},eb7e:function(t,e){t.exports="data:image/png;base64,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"},ee19:function(t,e,a){"use strict";var i=a("1b2b9"),n=a.n(i);n.a}}]);