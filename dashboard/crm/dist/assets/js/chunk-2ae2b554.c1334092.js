(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2ae2b554"],{"0cfc":function(t,e,i){"use strict";var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"tabBox"},[i("a-empty",{directives:[{name:"show",rawName:"v-show",value:0==t.groupList.length&&1==t.isNotAdd,expression:"groupList.length == 0 && isNotAdd == 1"}]},[i("span",{attrs:{slot:"description"},slot:"description"},[t._v("\n\t\t\t尚未创建标签，无法选择标签\n\t\t")])]),t._l(t.groupList,(function(e,a){return[t.isMore||!t.isMore&&a<5?i("a-form-item",{staticClass:"current0",attrs:{"label-col":{span:4},"wrapper-col":{span:20}}},[i("span",{staticClass:"group-name",attrs:{slot:"label"},slot:"label"},[e.name&&""!=e.name?i("a-popover",{attrs:{trigger:"hover"}},[i("span",{staticStyle:{display:"inline-block","max-width":"500px","word-wrap":"break-word","word-break":"break-all"},attrs:{slot:"content"},slot:"content"},[t._v("\n\t\t\t\t\t\t"+t._s(e.name)+"\n\t\t\t\t\t")]),t._v("\n\t\t\t\t\t"+t._s(e.name)+"\n\t\t\t\t")]):t._e()],1),t._l(e.data,(function(s,n){return i("span",[e.disabled[n]?t._e():i("a-checkable-tag",{on:{change:function(e){return t.changeTags(s.id,a)}},model:{value:e.checked[n],callback:function(i){t.$set(e.checked,n,i)},expression:"item.checked[tagIndex]"}},[t._v("\n\t\t\t\t\t"+t._s(s.tagname)+"\n\t\t\t\t")]),e.disabled[n]&&1==t.isDisabled?i("a-button",{staticStyle:{margin:"5px","line-height":"26px","font-size":"12px",height:"auto !important",padding:"0 7px"},attrs:{disabled:e.disabled[n]&&1==t.isDisabled}},[t._v("\n\t\t\t\t\t"+t._s(s.tagname)+"\n\t\t\t\t")]):t._e()],1)})),1!=t.isNotAdd?i("a-button",{directives:[{name:"has",rawName:"v-has",value:"client-tag-add",expression:"'client-tag-add'"}],staticStyle:{"font-size":"13px",height:"26px",color:"#1890FF",border:"1px solid #1890FF"},attrs:{icon:"plus"},on:{click:function(i){return t.createTag(e.id)}}},[t._v("\n\t\t\t\t新建标签\n\t\t\t")]):t._e()],2):t._e()]})),t.groupList.length>0&&1!=t.isNotAdd?i("a-button",{directives:[{name:"has",rawName:"v-has",value:"client-tag-group-add",expression:"'client-tag-group-add'"}],staticStyle:{"font-size":"13px",height:"26px","margin-right":"10px","margin-left":"16.7%",color:"#1890FF",border:"1px solid #1890FF"},attrs:{icon:"plus"},on:{click:t.addTagGroup}},[t._v("\n\t\t新建标签组\n\t")]):t._e(),t.groupList.length>5?i("div",{staticStyle:{"font-size":"13px",height:"26px",color:"#1890FF","text-align":"center",cursor:"pointer"},on:{click:t.showMore}},[t.isMore?t._e():[t._v("更多")],t.isMore?[t._v("收起")]:t._e(),i("a-icon",{attrs:{type:t.isMore?"arrow-up":"arrow-down"}})],2):t._e(),i("a-modal",{attrs:{title:"新建标签",zIndex:99999,confirmLoading:t.confirmLoading3,width:"550px"},on:{ok:function(e){return t.handleOk(t.inputValue)},cancel:t.cancel},model:{value:t.visible,callback:function(e){t.visible=e},expression:"visible"}},[i("a-form-item",{attrs:{"label-col":{span:4},"wrapper-col":{span:20}}},[i("template",{slot:"label"},[t._v("\n\t\t\t\t选择分组\n\t\t\t")]),i("a-select",{staticStyle:{width:"250px"},attrs:{showSearch:"",optionFilterProp:"children",disabled:""},model:{value:t.group_id,callback:function(e){t.group_id=e},expression:"group_id"}},t._l(t.groupList,(function(e){return i("a-select-option",{attrs:{value:e.id}},[t._v("\n\t\t\t\t\t"+t._s(e.name)+"\n\t\t\t\t")])})),1)],2),i("a-form-item",{attrs:{"label-col":{span:4},"wrapper-col":{span:20}}},[i("template",{slot:"label"},[t._v("\n\t\t\t\t标签名称\n\t\t\t")]),i("p",{staticStyle:{margin:"0px","font-size":"13px",color:"#909399"}},[t._v("\n\t\t\t\t每个标签名称最多15个字。同时新建多个标签时，请用“空格”隔开")]),i("a-input",{attrs:{placeholder:"请输入标签（不得超过15个字符）"},model:{value:t.inputValue,callback:function(e){t.inputValue=e},expression:"inputValue"}})],2)],1),i("a-modal",{staticClass:"add-tag-group",attrs:{zIndex:99999,title:"新建标签组",visible:t.groupVisible,confirmLoading:t.confirmLoading},on:{ok:t.handleOk2,cancel:t.handleCancel}},[i("a-form-item",{staticClass:"current0",attrs:{"label-col":{span:4},"wrapper-col":{span:20}}},[i("template",{slot:"label"},[i("span",{staticStyle:{color:"red"}},[t._v("*")]),t._v("分组名称\n\t\t\t")]),i("a-input",{attrs:{placeholder:"请输入分组名(不得超过15个字符)",maxLength:15},model:{value:t.teamName,callback:function(e){t.teamName=e},expression:"teamName"}},[i("span",{attrs:{slot:"suffix"},slot:"suffix"},[i("span",[t._v(t._s(t.teamName.length))]),t._v("/15\n\t\t\t\t\t\t\t\t\t\t\t")])])],2),i("a-form-item",{staticClass:"current0",attrs:{"label-col":{span:4},"wrapper-col":{span:20}}},[i("template",{slot:"label"},[i("span",{staticStyle:{color:"red"}},[t._v("*")]),t._v("标签名称\n\t\t\t")]),i("p",{staticStyle:{margin:"0px","font-size":"13px",color:"#909399"}},[t._v("\n\t\t\t\t每个标签名称最多15个字。同时新建多个标签时，请用“空格”隔开\n\t\t\t")]),i("a-input",{attrs:{placeholder:"请输入标签（不得超过15个字符）"},model:{value:t.inputValue2,callback:function(e){t.inputValue2=e},expression:"inputValue2"}})],2)],1)],2)},s=[],n=(i("a481"),i("28a5"),i("6762"),i("2fdb"),i("96cf"),i("3b8d")),o=(i("c5f6"),{name:"chooseDepartment",props:{callback:{type:Function,default:null},hasChoose:{type:Array,default:function(){}},isDisabled:{type:Number,default:0},disabledTag:{type:Array,default:function(){}},isNotAdd:{type:Number,default:0},id:{type:String,default:""}},data:function(){return{corpId:"",groupList:[],tag_arr:[],tag_ids:"",group_id:[],checked:[],visible:!1,confirmLoading3:!1,inputValue:"",newTagList:[],isMore:!1,groupVisible:!1,confirmLoading:!1,teamName:"",inputValue2:"",newTagList2:[]}},watch:{hasChoose:{handler:function(t){var e=this;"undefined"!=typeof t&&this.groupList.length&&(this.tag_arr=t,this.tag_ids=t.join(),this.hasChoose.map((function(t){e.groupList.map((function(e){e.data.map((function(i,a){t==i.id&&(e.checked[a]=!0)}))}))})),0==t.length&&this.groupList.map((function(t){t.checked=[]})),this.$forceUpdate())},deep:!0},id:{handler:function(t){""!=typeof t&&(this.corpId=t,this.getTags())},deep:!0},disabledTag:{handler:function(t){var e=this;"undefined"!=typeof t&&this.groupList.length&&(this.disabledTag.map((function(t){e.groupList.map((function(e){e.data.map((function(i,a){t==i.id&&(e.disabled[a]=!0)}))}))})),this.$forceUpdate())},deep:!0}},methods:{getTags:function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(){var e,i,a=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.axios.post("work-tag-group/tag-group",{corp_id:this.corpId||localStorage.getItem("corpId"),is_not_add:this.isNotAdd});case 2:e=t.sent,i=e.data,0!=i.error?this.$message.error(i.error_msg):(this.groupList=i.data,this.groupList.map((function(t){t.checked=[],t.disabled=[]})),"undefined"!=typeof this.disabledTag&&this.disabledTag.length>0&&this.disabledTag.map((function(t){a.groupList.map((function(e){e.data.map((function(i,a){t==i.id&&(e.disabled[a]=!0)}))}))})),"undefined"!=typeof this.hasChoose&&this.hasChoose.length>0&&(this.tag_arr=this.hasChoose,this.tag_ids=this.hasChoose.join(),this.hasChoose.map((function(t){a.groupList.map((function(e){e.data.map((function(i,a){t==i.id&&(e.checked[a]=!0)}))}))})),this.$forceUpdate()));case 5:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),changeTags:function(t,e){Array.prototype.indexOf=function(t){for(var e=0;e<this.length;e++)if(this[e]==t)return e;return-1},Array.prototype.remove=function(t){var e=this.indexOf(t);e>-1&&this.splice(e,1)};var i=String(t);if(this.tag_arr.includes(i))this.tag_arr.remove(i);else if(this.tag_arr.length+1>9999){this.$message.warning("不可选中，客户标签数量上限9999个");for(var a=0;a<this.groupList[e].data.length;a++)this.groupList[e].data[a].id==i&&(this.groupList[e].checked[a]=!1)}else this.tag_arr.push(i);this.$forceUpdate(),this.tag_ids=this.tag_arr.join(),null!==this.callback&&"function"===typeof this.callback&&this.callback("ok",this.tag_ids)},createTag:function(t){this.group_id=t;var e=0;if(this.groupList.map((function(t){e+=t.data.length})),e>=9999)return this.$message.warning("标签数量已超过上限9999个，无法创建"),!1;this.visible=!0},handleOk:function(t){var e=this;if(e.confirmLoading3=!0,""==t)return e.$message.warning("不能为空"),e.confirmLoading3=!1,!1;e.newTagList=[];for(var i=0;i<t.split(" ").length;i++){if(t.split(" ")[i].length>15)return e.$message.error("每个标签最多15个字"),e.confirmLoading3=!1,!1;t.split(" ")[i].length>0&&e.newTagList.push(t.split(" ")[i])}e.addTags(),e.inputValue="",e.newTagList=[],e.confirmLoading3=!1},addTags:function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(){var e,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.axios.post("work-tag/add",{corp_id:this.corpId||localStorage.getItem("corpId"),suite_id:1,type:0,group_id:this.group_id,name:this.newTagList});case 2:e=t.sent,i=e.data,0!=i.error?(this.$message.error(i.error_msg),this.confirmLoading3=!1):(this.isLoading=!1,this.visible=!1,this.confirmLoading3=!1,this.getTags(),this.inputValue="",this.newTagList=[]);case 5:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),cancel:function(){this.visible=!1,this.inputValue=""},showMore:function(){this.isMore=!this.isMore},addTagGroup:function(){this.groupVisible=!0},handleCancel:function(){this.groupVisible=!1,this.teamName="",this.newTagList2=[],this.inputValue2=""},handleOk2:function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(){var e,i,a,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(String.prototype.Trim=function(){return this.replace(/(^\s*)|(\s*$)/g,"")},this.teamName=this.teamName.Trim(),this.teamName){t.next=5;break}return this.$message.error("请输入分组名"),t.abrupt("return",!1);case 5:if(""!=this.inputValue2){t.next=10;break}return this.$message.warning("标签名称不能为空"),t.abrupt("return",!1);case 10:this.newTagList2=[],e=JSON.parse(JSON.stringify(this.inputValue2)).split(" "),i=0;case 13:if(!(i<e.length)){t.next=24;break}if(!(e[i].length>15)){t.next=20;break}return this.$message.error("每个标签最多15个字"),this.inputValue2="",t.abrupt("return",!1);case 20:e[i].length>0&&this.newTagList2.push(e[i]);case 21:i++,t.next=13;break;case 24:return this.confirmLoading=!0,t.next=27,this.axios.post("work-tag-group/add",{corp_id:this.corpId||localStorage.getItem("corpId"),suite_id:1,name:this.teamName,type:0,isMasterAccount:localStorage.getItem("isMasterAccount"),sub_id:localStorage.getItem("sub_id"),tag_name:this.newTagList2});case 27:a=t.sent,s=a.data,0!=s.error?this.$message.error(s.error_msg):(this.teamName="",this.newTagList2=[],this.inputValue2="",this.groupVisible=!1,this.getTags()),this.confirmLoading=!1;case 31:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},mounted:function(){this.corpId=this.id||localStorage.getItem("corpId"),this.getTags()}}),r=o,l=(i("d22e"),i("2877")),c=Object(l["a"])(r,a,s,!1,null,"1c74f8e2",null);e["a"]=c.exports},"5b06":function(t,e,i){e=t.exports=i("2350")(!1),e.push([t.i,'[data-v-46989321] .ant-card-bordered{border:0}.audio_box[data-v-46989321]{float:left;overflow:auto;cursor:pointer}.wifi-symbol[data-v-46989321]{width:20px;height:20px;-webkit-box-sizing:border-box;box-sizing:border-box;overflow:hidden;-webkit-transform:rotate(132deg);transform:rotate(132deg);position:absolute;left:13px;top:6px}.wifi-circle[data-v-46989321]{border:2px solid #fff;border-radius:50%;position:absolute}.first[data-v-46989321]{width:5px;height:5px;background:#fff;top:15px;left:15px}.second[data-v-46989321]{width:15px;height:15px;top:10px;left:10px}.third[data-v-46989321]{width:24px;height:24px;top:5px;left:5px}.second1[data-v-46989321]{width:15px;height:15px;top:10px;left:10px;-webkit-animation:fadeInOut-data-v-46989321 1s .2s infinite;animation:fadeInOut-data-v-46989321 1s .2s infinite}.third1[data-v-46989321]{width:24px;height:24px;top:5px;left:5px;-webkit-animation:fadeInOut-data-v-46989321 1s .4s infinite;animation:fadeInOut-data-v-46989321 1s .4s infinite}@-webkit-keyframes fadeInOut-data-v-46989321{0%{opacity:0}to{opacity:1}}@keyframes fadeInOut-data-v-46989321{0%{opacity:0}to{opacity:1}}.audio_container[data-v-46989321]{width:140px;height:30px;line-height:30px;background-color:#3291f8;color:#fff;text-align:center;border-radius:10px;position:relative}.tpl-title[data-v-46989321]{float:left;font-size:16px;vertical-align:top}.content-bd[data-v-46989321]{background:#fff;min-height:120px;border:1px solid #e2e2e2;min-width:885px;margin:0 20px}.custom-info[data-v-46989321]{padding:20px}.custom-info-text[data-v-46989321]{width:calc(100% - 132px);display:inline-block;height:132px;padding:0 15px}.col[data-v-46989321]{margin-bottom:5px}.custom-info-box[data-v-46989321]{margin-top:20px;overflow:hidden;text-align:center}.box[data-v-46989321]{padding:20px 20px 0;height:115px;width:25%;border:1px solid #e9e9e9;background-color:#f9f9f9;float:left;overflow:auto}.box[data-v-46989321]:first-child,.box[data-v-46989321]:nth-child(2),.box[data-v-46989321]:nth-child(3){border-right:0}.box-first[data-v-46989321]{font-size:16px}.box-second[data-v-46989321]{padding:0;margin:0;overflow:hidden}.custom-info-tab[data-v-46989321]{margin-top:20px}.col2[data-v-46989321]{overflow:hidden}.half[data-v-46989321]{width:50%;float:left;line-height:40px;padding:0 20px;border-top:1px solid #e9e9e9}.half-text[data-v-46989321]{float:right;word-break:break-all;max-width:calc(100% - 120px)}[data-v-46989321] .ant-tabs-top-content{padding-bottom:0}.time[data-v-46989321]{border:1px solid #e9e9e9;padding:20px 20px 0}.textArea-btn[data-v-46989321]{padding:20px 0 10px;overflow:hidden}.upload-file[data-v-46989321] .ant-upload-picture-card-wrapper{display:inline}.upload-file[data-v-46989321] .ant-upload.ant-upload-select-picture-card{background-color:#fff;border:0;height:32px}[data-v-46989321] .ant-upload.ant-upload-select-picture-card>.ant-upload{padding:0}.time-line-title[data-v-46989321]{background:#f9f9f9;padding:10px;margin-top:5px}.preview-box[data-v-46989321]{width:104px;height:104px;margin:0 8px 8px 0;padding:8px;border:1px solid #d9d9d9;border-radius:4px;position:relative;float:left}.preview-cover[data-v-46989321],.preview-cover img[data-v-46989321]{display:block;width:100%;height:100%;-o-object-fit:cover;object-fit:cover;position:relative}.preview-cover[data-v-46989321]:before{z-index:1;width:100%;height:100%;background-color:rgba(0,0,0,.5);content:" "}.preview-cover-icon[data-v-46989321],.preview-cover[data-v-46989321]:before{position:absolute;opacity:0;-webkit-transition:all .3s;transition:all .3s}.preview-cover-icon[data-v-46989321]{top:50%;left:50%;z-index:10;white-space:nowrap;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%);cursor:pointer;color:#fff;font-size:18px}.preview-box:hover .preview-cover-icon[data-v-46989321],.preview-box:hover .preview-cover[data-v-46989321]:before{opacity:1}[data-v-46989321] .ant-input-affix-wrapper .ant-input:not(:last-child){padding-right:58px}.upload-pic[data-v-46989321] .ant-upload-list-picture-card-container,.upload-pic[data-v-46989321] .ant-upload-list-picture-card .ant-upload-list-item,.upload-pic[data-v-46989321] .ant-upload.ant-upload-select-picture-card{width:70px;height:70px}.upload-pic[data-v-46989321] .ant-upload-select-picture-card i{font-size:32px;color:#999}.upload-pic[data-v-46989321] .ant-upload-select-picture-card .ant-upload-text{margin-top:8px;color:#666}[data-v-46989321] .ant-input-group-addon{padding:0}.custom-info-project[data-v-46989321]{border:1px solid #e9e9e9;background-color:#f9f9f9;margin-top:20px;padding:20px;overflow-x:auto}.ant-steps-dot.ant-steps-small .ant-steps-item-process .ant-steps-item-icon[data-v-46989321],[data-v-46989321] .ant-steps-dot .ant-steps-item-process .ant-steps-item-icon{width:8px;height:8px}.ant-steps-dot.ant-steps-small .ant-steps-item-content[data-v-46989321],[data-v-46989321] .ant-steps-dot .ant-steps-item-content{width:200px}.ant-steps-dot.ant-steps-small .ant-steps-item-icon[data-v-46989321],[data-v-46989321] .ant-steps-dot .ant-steps-item-icon{margin-left:97px}.ant-steps-dot.ant-steps-small .ant-steps-item-tail[data-v-46989321],[data-v-46989321] .ant-steps-dot .ant-steps-item-tail{margin:0 0 0 100px}.single-accout-card[data-v-46989321]::-webkit-scrollbar{width:10px;height:10px}[data-v-46989321] .ant-steps-item-finish>.ant-steps-item-container>.ant-steps-item-content>.ant-steps-item-title{color:rgba(0,0,0,.85)}[data-v-46989321] .ant-steps-item-finish>.ant-steps-item-container>.ant-steps-item-content>.ant-steps-item-description{color:rgba(0,0,0,.65)}[data-v-46989321] .ant-tooltip-inner{background-color:#fff5a7!important;width:640px!important}.over-width[data-v-46989321]{width:500px!important;max-height:400px!important;overflow-y:auto!important}',""])},"941cb":function(t,e,i){var a=i("5b06");"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var s=i("499e").default;s("82ec693c",a,!0,{sourceMap:!1,shadowMode:!1})},af86:function(t,e){t.exports="data:image/png;base64,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"},b884:function(t,e,i){e=t.exports=i("2350")(!1),e.push([t.i,"[data-v-1c74f8e2] .ant-tree-checkbox{float:right}[data-v-1c74f8e2] .ant-tree-iconEle{display:none!important}[data-v-1c74f8e2] .ant-tree-node-content-wrapper.ant-tree-node-selected{background-color:#fff!important}[data-v-1c74f8e2] .ant-list-item{border-bottom:0;padding:0}[data-v-1c74f8e2] .ant-list-item-meta-title{font-weight:400;line-height:32px}[data-v-1c74f8e2] .ant-tree li span.ant-tree-checkbox{margin:4px 20px 0 2px}.content-msg[data-v-1c74f8e2]{color:red;margin:0 20px 12px 0}.group-name[data-v-1c74f8e2]{overflow:hidden;white-space:nowrap;text-overflow:ellipsis;width:calc(100% - 4px);display:inline-block;vertical-align:bottom}.tabBox[data-v-1c74f8e2]{background:#fff;padding:10px;-webkit-box-sizing:border-box;box-sizing:border-box;margin-right:20px;border:1px solid #d8d8d8}[data-v-1c74f8e2] .ant-tag-checkable{background-color:#fafafa;border-color:#d9d9d9;height:26px;line-height:25px}[data-v-1c74f8e2] .ant-tag-checkable-checked{background-color:#1890ff}[data-v-1c74f8e2] .ant-col-20{margin-left:20px;width:calc(83.33333% - 20px)}.add-tag-group[data-v-1c74f8e2] .ant-col-20{margin-left:0;width:83.33333333%}",""])},c814:function(t,e,i){var a=i("b884");"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var s=i("499e").default;s("688da18d",a,!0,{sourceMap:!1,shadowMode:!1})},cdaab:function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticStyle:{width:"100%","max-height":"100%",position:"absolute","overflow-y":"auto","padding-bottom":"30px"}},[a("div",[a("a-card",{staticStyle:{"margin-bottom":"20px",padding:"10px 20px"}},[a("label",{staticClass:"tpl-title"},[t._v("客户详情")]),a("a-button",{staticStyle:{"font-size":"14px",float:"right"},attrs:{type:"primary",icon:"rollback"},on:{click:t.goBack}},[t._v("返回列表\n\t\t\t\t")])],1),a("div",{staticClass:"content-bd"},[a("a-spin",{attrs:{tip:"Loading...",size:"large",spinning:t.isLoading}},[a("div",{staticClass:"custom-info"},[a("a-avatar",{staticStyle:{"vertical-align":"top"},attrs:{shape:"square",size:132,src:t.avatar}}),a("div",{staticClass:"custom-info-text"},[a("div",{staticClass:"col"},[a("span",{staticStyle:{"font-size":"20px","font-weight":"700"}},[t._v(t._s(t.name)+"\n\t\t\t\t\t\t\t\t"),t.remarkVisible||""==t.nickname?t._e():a("span",[t._v("（"+t._s(t.nickname)+"）")]),"男性"==t.gender?a("a-icon",{staticStyle:{color:"#427EBA"},attrs:{slot:"prefix",type:"man"},slot:"prefix"}):t._e(),"女性"==t.gender?a("a-icon",{staticStyle:{color:"#ED4997"},attrs:{slot:"prefix",type:"woman"},slot:"prefix"}):t._e()],1),t.remarkVisible?t._e():a("a-icon",{staticStyle:{"margin-left":"10px"},attrs:{type:"edit"},on:{click:t.modifyRemark}}),t.remarkVisible?a("a-input-search",{staticStyle:{width:"260px","margin-left":"10px"},attrs:{placeholder:"输入用户的备注",maxLength:10},on:{search:t.setRemark},model:{value:t.nickname,callback:function(e){t.nickname=e},expression:"nickname"}},[a("span",{attrs:{slot:"suffix"},slot:"suffix"},[a("span",[t._v(t._s(t.nickname.length))]),t._v("/10\n                                    ")]),a("a-button",{attrs:{slot:"enterButton",type:"primary"},slot:"enterButton"},[a("a-icon",{attrs:{type:"check"}})],1)],1):t._e(),t.followTitle?a("a-tag",{staticStyle:{float:"right","margin-right":"0",height:"25px","line-height":"25px"},attrs:{color:"#67c23a"}},[t._v(t._s(t.followTitle)+"\n\t\t\t\t\t\t\t\t")]):t._e()],1),a("div",{staticClass:"col"},[a("label",[t._v("\n\t\t\t\t\t\t\t\t\t手机："),t.phone&&""!=t.phone?a("span",[t._v(t._s(t.phone))]):a("span",[t._v("暂无")]),a("span",{staticStyle:{margin:"0 1rem"}},[t.dialout_exten&&t.dialout_phone?a("a-button",{attrs:{type:"primary"},on:{click:t.contact}},[t._v("\n\t\t\t\t\t\t\t\t\t\t\t联系TA\n\t\t\t\t\t\t\t\t\t\t")]):t._e()],1),a("span",[a("a-tooltip",{attrs:{placement:"bottom"}},[a("template",{slot:"title"},[a("p",[t._v("鼠标移入展示，移出隐藏")]),a("p",[t._v("根据相关法律法规和监管部门的要求，拨打商业性电话前请您阅读并严格遵守以下内容：")]),a("p",{staticStyle:{"margin-bottom":"2px","font-size":"13px"}},[t._v("\n\t\t\t\t\t\t\t\t\t\t\t\t\t1、禁止在非工作时间拨打商业性电话，具体可外呼时间段请咨询您所在企业管理员或线路服务商；")]),a("p",{staticStyle:{"margin-bottom":"10px","font-size":"13px"}}),a("p",{staticStyle:{"margin-bottom":"2px","font-size":"13px"}},[t._v("\n\t\t\t\t\t\t\t\t\t\t\t\t\t2、禁止对同一号码在24小时内发起多次呼叫，同一号码可被外呼频次请咨询您所在企业管理员或在用线路服务商；")]),a("p",{staticStyle:{"margin-bottom":"10px","font-size":"13px"}}),a("p",{staticStyle:{"margin-bottom":"2px","font-size":"13px"}},[t._v("3、拨打商业性营销电话须事先经过用户本人同意，运营商可能会拦截对已申明不愿意接受商业性电话的用户外呼请求；")]),a("p",{staticStyle:{"margin-bottom":"10px","font-size":"13px"}}),a("p",{staticStyle:{"margin-bottom":"0","font-size":"13px"}},[t._v("\n\t\t\t\t\t\t\t\t\t\t\t\t\t4、禁止使用云呼叫功能开展分裂国家、传播宗教极端思想、煽动民族仇恨、破坏民族团结、扰乱社会秩序、传播封建迷信、诈骗等活动或其他违反国家法律法规、违背社会公序良俗的活动。")])]),a("a-icon",{attrs:{type:"question-circle"}})],2)],1)])]),a("div",{staticClass:"col"},[a("label",[t._v("\n\t\t\t\t\t\t\t\t\t所在地："),t.area&&""!=t.area?a("span",[t._v(t._s(t.area))]):a("span",[t._v("暂无")])])]),a("div",{staticClass:"col"},[a("span",[a("label",[t._v("标签：")]),a("span",{staticStyle:{display:"inline-block",width:"calc(100% - 45px)","vertical-align":"text-top"}},[0==t.hasTagsValue.length?a("span",[t._v("暂无")]):t._e(),t.hasTagsValue&&t.hasTagsValue.length>5?a("span",[a("a-popover",[a("span",{attrs:{slot:"content"},slot:"content"},[a("div",{staticClass:"over-width"},t._l(t.hasTagsValue,(function(e){return a("a-tag",{staticStyle:{"margin-bottom":"5px"},attrs:{color:"blue"}},[t._v(t._s(e))])})),1)]),t._l(t.hasTagsValue,(function(e,i){return a("span",[i<5?a("a-tag",{staticStyle:{"margin-bottom":"5px"},attrs:{color:"blue"}},[t._v(t._s(e))]):t._e()],1)}))],2),a("span",[t._v("等"+t._s(t.hasTagsValue.length)+"个标签")])],1):t._e(),t.hasTagsValue&&t.hasTagsValue.length<=5?a("span",t._l(t.hasTagsValue,(function(e){return a("a-tag",{staticStyle:{"margin-bottom":"5px"},attrs:{color:"blue"}},[t._v(t._s(e))])})),1):t._e(),t.isShowTag?a("a-icon",{staticStyle:{"margin-left":"5px"},attrs:{type:"edit"},on:{click:t.showModal}}):t._e()],1)])]),a("div",{staticClass:"col"},[a("span",[a("label",[t._v("描述：")]),t.des&&""!=t.des?a("span",[t._v(t._s(t.des))]):t._e(),""==t.des?a("span",[t._v("暂无")]):t._e(),t.file3?a("img",{staticStyle:{"max-width":"100px","max-height":"100px",margin:"0 0 10px 10px"},attrs:{src:this.commonUrl+t.file3,alt:"avatar"}}):t._e()]),a("a-icon",{staticStyle:{"margin-left":"10px"},attrs:{type:"edit"},on:{click:t.showDesVisible}}),a("a-modal",{attrs:{title:"修改描述",visible:t.desVisible},on:{cancel:t.desVisibleCancel,ok:t.setDetail}},[a("div",{staticClass:"textArea"},[a("a-textarea",{attrs:{placeholder:"请输入用户的描述，150字以内",autoSize:{minRows:4,maxRows:4},maxLength:150},on:{change:t.changeTextarea},model:{value:t.desText,callback:function(e){t.desText=e},expression:"desText"}}),a("div",{staticStyle:{"text-align":"right","margin-top":"10px"}},[t._v(t._s(t.desText.length)+"/150\n\t\t\t\t\t\t\t\t\t\t")])],1)])],1)]),a("div",{staticClass:"custom-info-box"},[a("div",{staticClass:"box"},[a("p",{staticClass:"box-first"},[t._v("预计成交率")]),a("p",{staticClass:"box-second"},[t.closeRateVisible||null===t.close_rate?t._e():a("span",[t._v(t._s(t.close_rate)+" %")]),t.closeRateVisible||null!==t.close_rate?t._e():a("span",[t._v("暂无")]),t.closeRateVisible?t._e():a("a-icon",{staticStyle:{"margin-left":"10px"},attrs:{type:"edit"},on:{click:t.modifyCloseRate}}),t.closeRateVisible?a("a-input-search",{staticStyle:{width:"200px"},attrs:{defaultValue:t.close_rate,placeholder:"输入预计成交率",maxLength:10},on:{search:t.setCloseRate}},[a("span",{attrs:{slot:"suffix"},slot:"suffix"},[t._v("%")]),a("a-button",{attrs:{slot:"enterButton",type:"primary"},slot:"enterButton"},[a("a-icon",{attrs:{type:"check"}})],1)],1):t._e()],1)]),a("div",{staticClass:"box"},[a("p",{staticClass:"box-first"},[t._v("上次联系")]),a("p",{staticClass:"box-second"},[t.follow_time&&""!=t.follow_time?a("span",[t._v(t._s(t.follow_time))]):a("span",[t._v("暂无")])])]),a("div",{staticClass:"box"},[a("p",{staticClass:"box-first"},[t._v("联系次数")]),a("p",{staticClass:"box-second"},[a("a-popover",{attrs:{placement:"top"}},[a("template",{slot:"content"},[a("div",{staticStyle:{"max-height":"300px","overflow-y":"auto"}},t._l(t.follow_times,(function(e){return a("div",[t._v(t._s(e.name)+"："+t._s(e.follow_num)+"次\n\t\t\t\t\t\t\t\t\t\t\t\t")])})),0)]),t.follow_num&&""!=t.follow_num?a("span",{staticStyle:{cursor:"pointer"}},[t._v(t._s(t.follow_num))]):t._e()],2),""==t.follow_num||null==t.follow_num?a("span",[t._v("暂无")]):t._e()],1)]),a("div",{staticClass:"box"},[a("p",{staticClass:"box-first"},[t._v("认领成员")]),t._l(t.memberInfo,(function(e){return t.memberInfo&&t.memberInfo.length>0?a("p",{staticClass:"box-second"},[a("a-popover",{attrs:{placement:"top"}},[a("template",{slot:"content"},[t._v("\n\t\t\t\t\t\t\t\t\t\t\t认领第"+t._s(e.num)+"次："+t._s(e.name)+"\n\t\t\t\t\t\t\t\t\t\t\t"+t._s(e.claim_time)+"\n\t\t\t\t\t\t\t\t\t\t")]),a("span",{staticStyle:{display:"inline-block","max-width":"250px","white-space":"nowrap","text-overflow":"ellipsis",overflow:"hidden",cursor:"pointer"}},[t._v("\n\t\t\t\t\t\t\t\t\t\t\t认领第"+t._s(e.num)+"次："+t._s(e.name)+"\n\t\t\t\t\t\t\t\t\t\t\t\t\t"+t._s(e.claim_time)+"\n\t\t\t\t\t\t\t\t\t\t")])],2)],1):a("p",[t._v("暂无")])}))],2)]),t.projectList.length>0?a("div",{staticClass:"custom-info-project single-accout-card"},[a("a-steps",{attrs:{"progress-dot":"",current:t.projectList.length-1}},t._l(t.projectList,(function(e){return a("a-step",[a("template",{slot:"title"},[t._v("\n\t\t\t\t\t\t\t\t\t\t"+t._s(e.project_name)+"\n\t\t\t\t\t\t\t\t\t")]),a("div",{attrs:{slot:"description"},slot:"description"},[3==e.status?a("div",[t._v("实际结束："+t._s(e.finish_time)+"\n\t\t\t\t\t\t\t\t\t\t\t"),1==e.is_finish?a("span",[t._v("（按时完成）")]):t._e(),2==e.is_finish?a("span",{staticStyle:{color:"red"}},[t._v("（逾期"+t._s(e.delay_days)+"天完成）")]):t._e(),3==e.is_finish?a("span",[t._v("（提前"+t._s(e.pre_days)+"天完成）")]):t._e()]):t._e(),1!=e.status?a("div",[t._v("开始时间："+t._s(e.start_time))]):t._e(),1!=e.status?a("div",[t._v("预计结束："+t._s(e.end_time))]):t._e(),1==e.status?a("div",[t._v("项目规则：接到任务起，需要在"+t._s(e.days)+"天内完成")]):t._e(),a("div",[t._v("项目完成人："+t._s(e.name))])])],2)})),1)],1):t._e(),a("div",{staticClass:"custom-info-tab"},[a("a-tabs",{attrs:{type:"card"},on:{change:t.changeTab},model:{value:t.tabKey,callback:function(e){t.tabKey=e},expression:"tabKey"}},[a("a-tab-pane",{key:"1",attrs:{tab:"跟进记录"}},[a("div",{staticClass:"time"},[a("div",{staticStyle:{margin:"20px 0"}},[t._v("\n\t\t\t\t\t\t\t\t\t\t\t跟进状态：\n\t\t\t\t\t\t\t\t\t\t\t"),a("a-select",{staticStyle:{width:"220px"},on:{change:t.changeState},model:{value:t.follow_id,callback:function(e){t.follow_id=e},expression:"follow_id"}},t._l(t.follows,(function(e){return a("a-select-option",{attrs:{value:e.id,disabled:1!=t.canEdit}},[t._v("\n\t\t\t\t\t\t\t\t\t\t\t\t\t"+t._s(e.title)+"\n\t\t\t\t\t\t\t\t\t\t\t\t")])})),1)],1),1==t.followItem.lose_one?a("div",{staticStyle:{margin:"20px 0"}},[t._v("\n\t\t\t\t\t\t\t\t\t\t\t输单原因：\n\t\t\t\t\t\t\t\t\t\t\t"),a("a-select",{staticStyle:{width:"220px"},attrs:{placeholder:"请选择输单原因"},on:{change:t.changeLose},model:{value:t.lose,callback:function(e){t.lose=e},expression:"lose"}},t._l(t.loseReason,(function(e,i){return a("a-select-option",{key:i,attrs:{value:e.id}},[t._v("\n\t\t\t\t\t\t\t\t\t\t\t\t\t"+t._s(e.context)+"\n\t\t\t\t\t\t\t\t\t\t\t\t")])})),1)],1):t._e(),a("div",{staticClass:"textArea"},[a("a-textarea",{attrs:{placeholder:"添加跟进记录，1000字以内",autoSize:{minRows:5,maxRows:5},maxLength:1e3},on:{change:t.changeTextarea},model:{value:t.msg,callback:function(e){t.msg=e},expression:"msg"}}),a("div",{staticStyle:{"text-align":"right","margin-top":"10px"}},[t._v(t._s(t.msg.length)+"/1000\n\t\t\t\t\t\t\t\t\t\t\t")])],1),a("div",{staticClass:"textArea-btn"},[a("a-upload",{staticClass:"upload-file",attrs:{action:"https://www.mocky.io/v2/5cc8019d300000980a055e76",listType:"picture-card",beforeUpload:t.beforeUpload,fileList:t.imageUrl},on:{preview:t.handlePreview,change:function(e){return t.changeMsg(e)}}},[t.imageUrl.length<9?a("div",[a("a-button",[a("a-icon",{attrs:{type:"link"}}),t._v("\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t图片 "+t._s(t.imgNum)+"/9\n\t\t\t\t\t\t\t\t\t\t\t\t\t")],1)],1):t._e()]),a("a-modal",{attrs:{visible:t.previewVisible,footer:null},on:{cancel:t.handleCancel}},[a("img",{staticStyle:{width:"100%"},attrs:{alt:"example",src:t.previewImage}})]),a("a-button",{staticStyle:{left:"50%",width:"110px"},attrs:{type:"primary",disabled:t.submitDisabled},on:{click:t.submitFollowRecord}},[t._v("\n\t\t\t\t\t\t\t\t\t\t\t\t提交\n\t\t\t\t\t\t\t\t\t\t\t")])],1),a("a-timeline",{staticClass:"time-line"},t._l(t.followRecord,(function(e,s){return a("a-timeline-item",[a("div",{staticClass:"time-line-time"},[t._v(t._s(e.time))]),1!=e.record_type?a("img",{staticStyle:{width:"18px"},attrs:{slot:"dot",src:i("ff27")},slot:"dot"}):t._e(),1==e.record_type?a("img",{staticStyle:{width:"18px"},attrs:{slot:"dot",src:i("df74")},slot:"dot"}):t._e(),1!=e.record_type?a("div",[a("div",{staticStyle:{margin:"10px 0"}},[a("span",{staticStyle:{color:"#1989FA"}},[t._v(t._s(e.name))]),t._v(" 发表：\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t"),""!=e.follow_status?a("span",{staticStyle:{color:"red"}},[t._v("【"+t._s(e.follow_status)+"】")]):t._e(),a("span",{staticStyle:{float:"right"}},[1==e.can_edit?a("a-icon",{directives:[{name:"has",rawName:"v-has",value:"client-addFollow",expression:"'client-addFollow'"}],attrs:{type:"edit"},on:{click:function(i){return t.editFollowRecord(e)}}}):t._e()],1)]),a("div",{staticClass:"time-line-title"},[e.context?a("p",{staticStyle:{color:"red"}},[t._v("\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t输单原因："+t._s(e.context))]):t._e(),a("p",[t._v(t._s(e.record))]),e.file.length>0?a("div",{staticStyle:{"margin-top":"5px",overflow:"hidden"}},t._l(e.file,(function(e){return a("div",{staticClass:"preview-box"},[a("div",{staticClass:"preview-cover"},[a("img",{attrs:{src:t.commonUrl+e,alt:""}})]),a("span",{staticClass:"preview-cover-icon",on:{click:function(i){return t.previewHasImg(t.commonUrl+e)}}},[a("a-icon",{attrs:{type:"eye"}})],1)])})),0):t._e()])]):t._e(),1==e.record_type?a("div",[a("div",{staticStyle:{margin:"10px 0"}},[a("span",{staticStyle:{color:"#1989FA"}},[t._v(t._s(e.name))]),a("span",{staticStyle:{color:"red"}},[t._v("【打电话】")]),a("span",[t._v("联系了他")])]),0==e.call_info.state?a("div",{staticStyle:{color:"red"}},[t._v("\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t"+t._s(e.call_info.msg)+"\n\t\t\t\t\t\t\t\t\t\t\t\t\t")]):t._e(),1==e.call_info.state?a("div",{staticClass:"audio"},[a("div",{staticClass:"audio_container"},[a("div",{staticClass:"audio"},[a("div",{directives:[{name:"show",rawName:"v-show",value:t.clickIndex!=s,expression:"clickIndex != index"}],staticClass:"audio_box",staticStyle:{float:"left"},on:{click:function(e){return t.playMusic(s,!0)}}},[a("div",{staticClass:"wifi-symbol"},[a("div",{staticClass:"wifi-circle first"}),a("div",{staticClass:"wifi-circle second"}),a("div",{staticClass:"wifi-circle third"})]),a("audio",{attrs:{name:s,"data-index":s},on:{canplay:t.oncanplay}},[a("source",{attrs:{src:e.call_info.file,type:"audio/mpeg"}})])]),a("div",{directives:[{name:"show",rawName:"v-show",value:t.clickIndex==s,expression:"clickIndex == index"}],staticClass:"audio_box",staticStyle:{float:"left"},on:{click:function(e){return t.playMusic(s,!1)}}},[a("div",{staticClass:"wifi-symbol"},[a("div",{staticClass:"wifi-circle first"}),a("div",{staticClass:"wifi-circle second1"}),a("div",{staticClass:"wifi-circle third1"})])]),a("span",[t._v(t._s(t._f("dateFormat")(t.playTime[s])))])])])]):t._e()]):t._e()])})),1),a("div",{directives:[{name:"show",rawName:"v-show",value:t.total>0,expression:"total > 0"}],staticClass:"pagination",staticStyle:{margin:"20px 0","box-sizing":"border-box",overflow:"hidden"}},[a("div",{staticStyle:{height:"32px",float:"left","line-height":"32px"}},[t._v("\n\t\t\t\t\t\t\t\t\t\t\t\t共\n\t\t\t\t\t\t\t\t\t\t\t\t"),a("span",{staticStyle:{color:"blue"}},[t._v(t._s(t.total))]),t._v("条\n\t\t\t\t\t\t\t\t\t\t\t")]),a("div",{staticClass:"pagination",staticStyle:{height:"32px",float:"right"}},[a("a-pagination",{attrs:{total:t.total,showSizeChanger:"",showQuickJumper:t.quickJumper,current:t.page,pageSize:t.pageSize,pageSizeOptions:["15","30","50","100"]},on:{change:t.changePage,showSizeChange:t.showSizeChange}})],1)]),a("a-modal",{attrs:{title:"修改跟进记录",width:"800px"},on:{ok:t.submitFollowRecord,cancel:t.cancelFollowRecord},model:{value:t.editVisible,callback:function(e){t.editVisible=e},expression:"editVisible"}},[a("div",{staticStyle:{margin:"20px 0"}},[t._v("\n\t\t\t\t\t\t\t\t\t\t\t\t跟进状态：\n\t\t\t\t\t\t\t\t\t\t\t\t"),a("a-select",{staticStyle:{width:"220px"},on:{change:t.changeState1},model:{value:t.status,callback:function(e){t.status=e},expression:"status"}},t._l(t.follows,(function(e){return a("a-select-option",{attrs:{value:e.id,disabled:1!=t.canEdit}},[t._v("\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t"+t._s(e.title)+"\n\t\t\t\t\t\t\t\t\t\t\t\t\t")])})),1)],1),1==t.followItem.lose_one?a("div",{staticStyle:{margin:"20px 0"}},[t._v("\n\t\t\t\t\t\t\t\t\t\t\t\t输单原因：\n\t\t\t\t\t\t\t\t\t\t\t\t"),a("a-select",{staticStyle:{width:"220px"},attrs:{placeholder:"请选择输单原因"},model:{value:t.followItem.lose_id,callback:function(e){t.$set(t.followItem,"lose_id",e)},expression:"followItem.lose_id"}},t._l(t.loseReason,(function(e,i){return a("a-select-option",{key:i,attrs:{value:e.id}},[t._v("\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t"+t._s(e.context)+"\n\t\t\t\t\t\t\t\t\t\t\t\t\t")])})),1)],1):t._e(),a("div",{staticClass:"textArea"},[1!=t.followItem.lose_one?a("span",{staticStyle:{color:"red",display:"inline-block",width:"2%","margin-bottom":"12%"}},[t._v(" * ")]):t._e(),a("a-textarea",{staticStyle:{display:"inline-block",width:"95%"},attrs:{placeholder:"添加跟进记录，1000字以内",autoSize:{minRows:5,maxRows:5},maxLength:1e3},model:{value:t.msg2,callback:function(e){t.msg2=e},expression:"msg2"}}),a("div",{staticStyle:{"text-align":"right","margin-top":"10px"}},[t._v(t._s(t.msg2.length)+"/1000\n\t\t\t\t\t\t\t\t\t\t\t\t")])],1),a("div",{staticClass:"textArea-btn"},[a("a-upload",{staticClass:"upload-file",attrs:{action:"https://www.mocky.io/v2/5cc8019d300000980a055e76",listType:"picture-card",beforeUpload:t.beforeUpload2,fileList:t.imageUrl2},on:{preview:t.handlePreview2,change:function(e){return t.changeMsg2(e)}}},[t.imageUrl2.length<9?a("div",[a("a-button",[a("a-icon",{attrs:{type:"link"}}),t._v("\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t图片 "+t._s(t.imgNum2)+"/9\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t")],1)],1):t._e()]),a("a-modal",{attrs:{visible:t.previewVisible2,footer:null},on:{cancel:t.handleCancel2}},[a("img",{staticStyle:{width:"100%"},attrs:{alt:"example",src:t.previewImage2}})])],1)])],1)]),a("a-tab-pane",{key:"2",attrs:{tab:"互动轨迹"}},[a("a-timeline",{staticClass:"time-line",staticStyle:{margin:"20px"}},t._l(t.interactList,(function(e){return a("a-timeline-item",[13==e.icon?a("a-icon",{attrs:{slot:"dot",type:"pay-circle"},slot:"dot"}):t._e(),a("div",{staticStyle:{"min-height":"40px"}},[a("div",{staticClass:"time-line-time"},[t._v(t._s(e.event_time))]),a("div",{staticClass:"time-line-title"},[t._v(t._s(e.content))])])],1)})),1),a("div",{staticStyle:{"text-align":"center"}},[1==t.btnFlag?a("a-button",{attrs:{type:"primary"},on:{click:t.loadMore}},[t._v("加载更多")]):t._e(),2==t.btnFlag?a("span",{attrs:{type:"primary"}},[t._v("没有更多数据了")]):t._e()],1)],1),a("a-tab-pane",{key:"3",attrs:{tab:"用户画像"}},[a("div",{staticStyle:{overflow:"hidden","margin-bottom":"10px"}},[a("div",{staticStyle:{float:"right"}},[t.badicInfoVisible?t._e():a("a-button",{attrs:{type:"primary"},on:{click:t.editBadicInfo}},[t._v("编辑\n\t\t\t\t\t\t\t\t\t\t\t")]),t.badicInfoVisible?a("a-button",{staticStyle:{"margin-right":"15px"},on:{click:t.cancleBadicInfo}},[t._v("取消\n\t\t\t\t\t\t\t\t\t\t\t")]):t._e(),t.badicInfoVisible?a("a-button",{attrs:{type:"primary"},on:{click:t.submitBadicInfo}},[t._v("提交\n\t\t\t\t\t\t\t\t\t\t\t")]):t._e()],1)]),a("div",{staticClass:"col2"},t._l(t.field_list,(function(e,i){return a("div",{staticClass:"half"},[a("a-tag",{attrs:{color:"#1890FF"}},[t._v(t._s(e.title))]),t.badicInfoVisible||""==e.value||8==e.type||"phone"==e.key||"company"==e.key?t._e():a("span",{staticClass:"half-text"},[t._v(t._s(e.value))]),t.badicInfoVisible||"phone"!=e.key?t._e():a("span",{staticClass:"half-text"},[""!=t.phone?a("span",[t._v(t._s(t.phone))]):t._e(),""==t.phone?a("span",[t._v("暂无")]):t._e()]),t.badicInfoVisible||"company"!=e.key?t._e():a("span",{staticClass:"half-text"},[""!=t.company?a("span",[t._v(t._s(t.company))]):t._e(),""==t.company?a("span",[t._v("暂无")]):t._e()]),t.badicInfoVisible||0==e.value.length||8!=e.type?t._e():a("span",{staticClass:"half-text"},t._l(e.value,(function(e){return a("img",{staticStyle:{"max-width":"70px","max-height":"70px",margin:"2px","line-height":"0px",cursor:"pointer"},attrs:{src:t.commonUrl+e.url},on:{click:function(i){return t.preview(t.commonUrl+e.url)}}})})),0),t.badicInfoVisible||""!=e.value&&0!=e.value.length||"phone"==e.key||"company"==e.key?t._e():a("span",{staticClass:"half-text"},[t._v("暂无")]),t.badicInfoVisible?[2==e.type?a("a-select",{staticStyle:{width:"35%",float:"right","margin-top":"4px"},attrs:{defaultValue:e.hasOption,placeholder:"请选择"+e.title,allowClear:""},on:{change:function(i){return t.handleChange(i,e.fieldid)}}},t._l(e.optionVal2,(function(e){return a("a-select-option",{attrs:{value:e}},[t._v("\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t"+t._s(e)+"\n\t\t\t\t\t\t\t\t\t\t\t\t\t")])})),1):t._e(),3==e.type?a("a-select",{staticStyle:{width:"35%",float:"right","margin-top":"4px"},attrs:{mode:"multiple",defaultValue:e.hasOption,placeholder:"请选择"+e.title},on:{change:function(i){return t.handleChange2(i,e.fieldid)}}},t._l(e.optionVal2,(function(e){return a("a-select-option",{attrs:{value:e}},[t._v("\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t"+t._s(e)+"\n\t\t\t\t\t\t\t\t\t\t\t\t\t")])})),1):t._e(),8==e.type?a("span",{staticClass:"clearfix",staticStyle:{width:"35%",float:"right","margin-top":"4px","line-height":"0px"}},[a("a-upload",{staticClass:"upload-pic",attrs:{action:"https://www.mocky.io/v2/5cc8019d300000980a055e76","list-type":"picture-card",fileList:e.picUrl||[],beforeUpload:t.beforeUploadPic},on:{preview:t.handlePreview,change:function(e){return t.handleChangePic(e,i)}}},[a("div",[a("a-icon",{attrs:{type:"plus"}}),a("div",{staticClass:"ant-upload-text",staticStyle:{"font-size":"12px"}},[t._v("\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t上传图片\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t")])],1)])],1):t._e(),2!=e.type&&3!=e.type&&7!=e.type&&4!=e.type&&8!=e.type&&"phone"!=e.key&&"company"!=e.key?a("a-input",{staticStyle:{width:"35%",float:"right","margin-top":"4px"},attrs:{defaultValue:e.value,placeholder:"请输入"+e.title},on:{change:function(i){return t.changeInput(i.target.value,e.fieldid)}}}):t._e(),2!=e.type&&3!=e.type&&7!=e.type&&4!=e.type&&8!=e.type&&"phone"==e.key?a("a-input",{staticStyle:{width:"35%",float:"right","margin-top":"4px"},attrs:{defaultValue:t.phone2,placeholder:"请输入手机号"},on:{change:function(i){return t.changeSpecialInput(i.target.value,e.key)}}}):t._e(),2!=e.type&&3!=e.type&&7!=e.type&&4!=e.type&&8!=e.type&&"company"==e.key?a("a-input",{staticStyle:{width:"35%",float:"right","margin-top":"4px"},attrs:{defaultValue:t.company2,placeholder:"请输入公司"},on:{change:function(i){return t.changeSpecialInput(i.target.value,e.key)}}}):t._e(),7==e.type?a("a-cascader",{staticStyle:{width:"35%",float:"right","margin-top":"4px"},attrs:{options:t.cityData,defaultValue:e.provice,placeholder:"请选择"+e.title},on:{change:function(i){return t.changeArea(i,e.fieldid)}}}):t._e(),4==e.type?[""==e.data?a("a-date-picker",{staticStyle:{width:"35%",float:"right","margin-top":"4px"},attrs:{placeholder:"请选择"+e.title,allowClear:!1},on:{change:function(i){return t.selectDate(i,e.fieldid)}}}):t._e(),""!=e.data?a("a-date-picker",{staticStyle:{width:"35%",float:"right","margin-top":"4px"},attrs:{placeholder:"请选择"+e.title,defaultValue:t.moment(e.data),allowClear:!1},on:{change:function(i){return t.selectDate(i,e.fieldid)}}}):t._e()]:t._e()]:t._e()],2)})),0)])],1)],1)],1)])],1)],1),a("a-modal",{attrs:{visible:t.previewVisible,footer:null},on:{cancel:t.handleCancel}},[a("img",{staticStyle:{width:"100%"},attrs:{alt:"example",src:t.previewImage}})]),a("a-modal",{attrs:{title:"打标签",confirmLoading:t.confirmLoading2,width:"800px"},on:{ok:t.handleOk,cancel:t.cancelVisible},model:{value:t.visible,callback:function(e){t.visible=e},expression:"visible"}},[a("corpChooseTag",{attrs:{callback:t.modalVisibleChange4,hasChoose:t.tagCheckValue}})],1),a("a-modal",{attrs:{title:"Modal","ok-text":"确认","cancel-text":"取消"},on:{ok:t.hideModal,cancel:t.handleCancel},model:{value:t.showAddPhone,callback:function(e){t.showAddPhone=e},expression:"showAddPhone"}},[a("p",[t._v("需要添加对方的个人微信吗？")])])],1)},s=[],n=(i("20d6"),i("75fc")),o=(i("a481"),i("ac4d"),i("8a81"),i("ac6a"),i("28a5"),i("7f7f"),i("96cf"),i("3b8d")),r=i("0f2e"),l=i("c1df"),c=i.n(l),d=(i("5c3a"),i("af86")),p=i.n(d),h=i("0cfc"),u=i("911a"),g=i.n(u);function f(t){return new Promise((function(e,i){var a=new FileReader;a.readAsDataURL(t),a.onload=function(){return e(a.result)}}))}c.a.locale("zh-cn");var m={components:{corpChooseTag:h["a"]},data:function(){var t=localStorage.getItem("corpId")?localStorage.getItem("corpId"):"";return{showAddPhone:!1,dialout_phone:"",dialout_exten:"",loseReason:[],lose:void 0,followItem:{},corpId:t,isLoading:!1,commonUrl:this.$store.state.commonUrl,remarkVisible:!1,confirmLoading2:!1,id:"",avatar:p.a,name:"",corp_name:"",nickname:"",gender:"",followTitle:"",is_follow_del:"",phone:"",phone2:"",company:"",company2:"",area:"",des:"",visible:!1,hasTags:[],hasTagsValue:[],tagCheckValue:[],desVisible:!1,imageUrl3:"",file3:"",desImgLoading:!1,desText:"",follow_id:"",followStatus:"",follows:[],closeRateVisible:!1,close_rate:"",follow_time:"",follow_times:[],follow_num:"",memberInfo:"",chatName:[],field_list:[],fieldData:[],badicInfoVisible:!1,projectList:[],cityData:r["a"],moment:c.a,followRecord:[],imageUrl:[],file:[],imgNum:0,msg:"",previewVisible:!1,previewImage:"",isImg:!0,submitDisabled:!0,record_id:"",editVisible:!1,imageUrl2:[],file2:[],imgNum2:0,msg2:"",previewVisible2:!1,previewImage2:"",isImg2:!0,submitDisabled2:!0,total:1,quickJumper:!1,page:1,pageSize:15,status:[],interactList:[],picFile:{},isImg3:!0,page2:1,btnFlag:1,tabKey:"1",isMasterAccount:localStorage.getItem("isMasterAccount"),canEdit:1,isShowTag:!0,clickIndex:-1,flag:!1,playTime:[],t1:[]}},methods:{contact:function(){var t=this;this.$confirm({title:"是否拨打电话",okText:"确定",okType:"primary",cancelText:"取消",onOk:function(){g.a.publish("showCall",{showCall:!0,avatar:"",nickname:t.nickname,follow_id:t.id,phone:t.phone,type:1,from:1})}})},hideModal:function(){var t=this;this.$copyText(this.phone).then((function(e){console.log(e),t.$message.success("已成功复制，可直接去粘贴")}),(function(e){t.$message.error("复制失败")}))},handleCancel3:function(){this.showAddPhone=!1},playMusic:function(t,e){var i=this;if(clearInterval(this.t1),console.log(e),-1!=this.clickIndex&&document.getElementsByName(t)[0].pause(),!e)return this.clickIndex=-1,void(this.flag=!this.flag);document.getElementsByName(t)[0].play(),this.clickIndex=t,this.t1=setInterval((function(){i.playTime[t]--,i.$set(i.playTime,t,i.playTime[t]),i.playTime[t]<=0&&(i.clickIndex=-1,clearInterval(i.t1),i.$set(i.playTime,t,Math.ceil(document.getElementsByName(t)[0].duration)))}),1e3)},oncanplay:function(t){var e=t.target.dataset.index;this.$set(this.playTime,e,Math.ceil(t.target.duration))},getLoseReason:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(){var e,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.axios.post("custom-field/get-lose-msg",{corp_id:localStorage.getItem("corpId")});case 2:e=t.sent,i=e.data,0!=i.error?this.$message.error(i.error_msg):this.loseReason=i.data;case 5:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),goBack:function(){this.$router.go(-1)},getInfo:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(){var e,i,a=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.isLoading=!0,t.next=3,this.axios.post("public-sea-customer/custom-detail",{uid:localStorage.getItem("uid"),cid:this.id,isMasterAccount:localStorage.getItem("isMasterAccount"),sub_id:localStorage.getItem("sub_id")});case 3:e=t.sent,i=e.data,0!=i.error?(this.isLoading=!1,this.$message.error(i.message)):(this.isLoading=!1,this.name=i.data.name,this.corp_name=i.data.corp_name,this.nickname=i.data.nickname,this.gender=i.data.gender,this.phone=i.data.phone,this.company=i.data.company,this.followTitle=i.data.follow_title,this.is_follow_del=i.data.is_follow_del,this.area=i.data.area,this.des=i.data.des,this.file3=i.data.path,this.hasTags=[],this.tagCheckValue=[],this.hasTagsValue=[],i.data.tag_name.map((function(t){a.hasTags.push(t.tid),a.tagCheckValue.push(t.tid),a.hasTagsValue.push(t.tname)})),this.follow_id=JSON.parse(JSON.stringify(i.data.follow_id)),""==this.follow_id&&(this.follow_id=this.follows[0]&&this.follows[0].id?this.follows[0].id:""),this.status=this.follow_id,this.followStatus=this.follow_id,this.close_rate=i.data.close_rate,this.follow_time=i.data.follow_time,this.follow_times=i.data.follow_times,this.follow_num=i.data.follow_num,this.memberInfo=i.data.memberInfo,this.chatName=i.data.chat_name,this.dialout_phone=i.data.dialout_phone,this.dialout_exten=i.data.dialout_exten,this.getFollowStatus(),this.field_list=i.data.field_list,this.field_list.map((function(t){2==t.type||3==t.type?(t.optionVal2=t.optionVal.split(","),2==t.type?""==t.value?t.hasOption=t.value.split(""):t.hasOption=t.value:3==t.type&&""!=t.value&&(t.hasOption=t.value.split(","))):7==t.type?""==t.value?t.provice=[]:t.provice=t.value.split("-"):4==t.type&&(t.data=t.value)})),this.fieldData=i.data.field_list,this.projectList=i.data.project);case 6:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),modifyRemark:function(){this.remarkVisible=!this.remarkVisible},setRemark:function(t){var e=this;if(t.length>10)return e.$message.warning("备注不可超过10个字"),!1;this.editInfo(t,"nickname")},editInfo:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(e,i){var a,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.axios.post("public-sea-customer/custom-update",{isMasterAccount:localStorage.getItem("isMasterAccount"),sub_id:localStorage.getItem("sub_id"),cid:this.id,type:i,value:e,path:this.imageUrl3});case 2:a=t.sent,s=a.data,0==s.error?("nickname"==i?this.remarkVisible=!this.remarkVisible:"des"==i?this.desVisible=!1:"close_rate"==i&&(this.closeRateVisible=!this.closeRateVisible),this.getInfo(),2==this.tabKey&&this.getInteract()):this.$message.error(s.error_msg);case 5:case"end":return t.stop()}}),t,this)})));function e(e,i){return t.apply(this,arguments)}return e}(),showModal:function(){this.visible=!0,this.tagCheckValue=JSON.parse(JSON.stringify(this.hasTags))},modalVisibleChange4:function(t,e){"ok"==t&&(this.tagCheckValue=""==e?[]:e.split(","))},handleOk:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(){var e,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.confirmLoading2=!0,t.next=3,this.axios.post("public-sea-customer/give-user-tags",{tag_ids:this.tagCheckValue,user_ids:this.id,type:0,bitch_all:1});case 3:e=t.sent,i=e.data,0!=i.error?(this.$message.error(i.error_msg),this.confirmLoading2=!1):(this.$message.success(i.error_msg),this.visible=!1,this.confirmLoading2=!1,this.getInfo());case 6:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),cancelVisible:function(){this.visible=!1,this.tagCheckValue=[]},showDesVisible:function(){this.desText=this.des,this.imageUrl3=this.file3,this.desVisible=!0},desVisibleCancel:function(){this.desVisible=!1},setDetail:function(){if(this.desText.length>150)return this.$message.warning("描述不可超过150个字"),!1;this.editInfo(this.desText,"des")},uploadMaterial3:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(e){var i,a,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return i=new FormData,i.append("uid",localStorage.getItem("uid")),i.append("fileInfo",e),t.next=5,this.axios.post("sub-user/upload-image",i);case 5:a=t.sent,s=a.data,0==s.error?s.data&&(this.imageUrl3=s.data.local_path,this.desImgLoading=!1):(this.$message.error(s.error_msg),this.desImgLoading=!1);case 8:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),beforeUpload3:function(t){if(this.desImgLoading=!0,"image/png"!=t.type&&"image/jpg"!=t.type&&"image/jpeg"!=t.type)return this.$message.error("图片类型仅支持png、jpg、jpeg类型！"),this.desImgLoading=!1,!1;var e=t.size/1024/1024<2;return e?t.size<5?(this.$message.error("上传文件大小不符！"),this.desImgLoading=!1,!1):(this.uploadMaterial3(t),e):(this.$message.error("图片不超过2M！"),this.desImgLoading=!1,!1)},modifyCloseRate:function(){this.closeRateVisible=!this.closeRateVisible},setCloseRate:function(t){var e=/^(?:0|[1-9][0-9]?|100)$/;return t>100?(this.$message.warning("成交率不可超过100"),!1):null==t||""==t||e.test(t)?void this.editInfo(t,"close_rate"):(this.$message.warning("成交率必须为0-100正整数"),!1)},editBadicInfo:function(){this.fieldData=JSON.parse(JSON.stringify(this.field_list));for(var t=0;t<this.field_list.length;t++){if(this.field_list[t]["picUrl"]=[],8==this.field_list[t].type&&this.field_list[t].value){var e=!0,i=!1,a=void 0;try{for(var s,n=this.field_list[t].value[Symbol.iterator]();!(e=(s=n.next()).done);e=!0){var o=s.value;this.field_list[t]["picUrl"].push({uid:o.uid,url:this.commonUrl+o.url,status:o.status,name:"image.png"})}}catch(l){i=!0,a=l}finally{try{e||null==n.return||n.return()}finally{if(i)throw a}}}if("phone"==this.field_list[t].key&&this.phone){var r=JSON.parse(JSON.stringify(this.phone));this.phone2=r.replace(/,/g," ")}"company"==this.field_list[t].key&&this.company&&(this.company2=JSON.parse(JSON.stringify(this.company)))}this.badicInfoVisible=!0},handleChange:function(t,e){var i=Object(n["a"])(this.field_list),a=i.filter((function(t){return e===t.fieldid}))[0];a&&(a.value=t,this.field_list=i)},handleChange2:function(t,e){var i=Object(n["a"])(this.field_list),a=i.filter((function(t){return e===t.fieldid}))[0];a&&(a.value=t.join(","),this.field_list=i)},changeInput:function(t,e){var i=Object(n["a"])(this.field_list),a=i.filter((function(t){return e===t.fieldid}))[0];a&&(a.value=t,this.field_list=i)},changeSpecialInput:function(t,e){"phone"==e?this.phone2=t:"company"==e&&(this.company2=t)},changeArea:function(t,e){var i=Object(n["a"])(this.field_list),a=i.filter((function(t){return e===t.fieldid}))[0];a&&(a.value=t.join("-"),this.field_list=i)},selectDate:function(t,e){var i=Object(n["a"])(this.field_list),a=i.filter((function(t){return e===t.fieldid}))[0];a&&(a.value=t.format("YYYY-MM-DD"),this.field_list=i)},disabledStartDate:function(t){return t.valueOf()>(new Date).getTime()},submitBadicInfo:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(){var e,i,a,s,n,o,r,l,c,d,p,h,u,g,f,m;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:/^[1][3,4,5,6,7,8,9][0-9]{9}$/,/^0\d{2,3}-?\d{7,8}$/,e=/[^+|-|\d]/,i=/^\w[-\w.+]*@([A-Za-z0-9][-A-Za-z0-9]+\.)+[A-Za-z]{2,14}$/,a=JSON.parse(JSON.stringify(this.field_list)),s=!0,n=0;case 7:if(!(n<this.field_list.length)){t.next=59;break}if("phone"!=this.field_list[n].key){t.next=27;break}for(o=this.phone2.split(" "),r=o.length-1;r>=0;r--)""==o[r]&&o.splice(r,1);if(!(o.length>5)){t.next=15;break}return this.$message.error("手机号不能多于5个！"),s=!1,t.abrupt("return",!1);case 15:l=0;case 16:if(!(l<o.length)){t.next=24;break}if(!e.test(o[l])){t.next=21;break}return this.$message.error("手机号格式不正确！"),s=!1,t.abrupt("return",!1);case 21:l++,t.next=16;break;case 24:if(s){t.next=26;break}return t.abrupt("return",!1);case 26:a[n].value=o.join();case 27:if("company"==this.field_list[n].key&&(a[n].value=this.company2),6!=a[n].type||""==a[n].value){t.next=33;break}if(i.test(a[n].value)){t.next=33;break}return this.$message.error("邮箱格式不正确！"),s=!1,t.abrupt("return",!1);case 33:if(8!=a[n].type){t.next=55;break}for(c=!0,d=!1,p=void 0,t.prev=37,h=a[n].picUrl[Symbol.iterator]();!(c=(u=h.next()).done);c=!0)g=u.value,g.url=g.url.replace(this.commonUrl,""),delete g.response,delete g.xhr,delete g.percent;t.next=45;break;case 41:t.prev=41,t.t0=t["catch"](37),d=!0,p=t.t0;case 45:t.prev=45,t.prev=46,c||null==h.return||h.return();case 48:if(t.prev=48,!d){t.next=51;break}throw p;case 51:return t.finish(48);case 52:return t.finish(45);case 53:a[n].value=JSON.parse(JSON.stringify(a[n].picUrl)),delete a[n].picUrl;case 55:"undefined"==typeof a[n].value&&(a[n].value="");case 56:n++,t.next=7;break;case 59:if(s){t.next=61;break}return t.abrupt("return",!1);case 61:return t.next=63,this.axios.post("public-sea-customer/custom-field-update",{uid:localStorage.getItem("uid"),cid:this.id,fieldData:a});case 63:f=t.sent,m=f.data,0!=m.error?this.$message.error(m.error_msg):(this.badicInfoVisible=!1,this.getInfo());case 66:case"end":return t.stop()}}),t,this,[[37,41,45,53],[46,,48,52]])})));function e(){return t.apply(this,arguments)}return e}(),cancleBadicInfo:function(){this.badicInfoVisible=!1,this.field_list=JSON.parse(JSON.stringify(this.fieldData))},changeTab:function(t){2==t?(this.btnFlag=1,this.getInteract(1)):1==t&&this.getFollowRecord()},getFollowRecord:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(){var e,i,a,s,n=arguments;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=n.length>0&&void 0!==n[0]?n[0]:1,i=n.length>1&&void 0!==n[1]?n[1]:this.pageSize,this.isLoading=!0,t.next=5,this.axios.post("public-sea-customer/follow-record",{isMasterAccount:localStorage.getItem("isMasterAccount"),uid:localStorage.getItem("uid"),cid:this.id,sub_id:localStorage.getItem("sub_id"),page:e,page_size:i});case 5:a=t.sent,s=a.data,0!=s.error?(this.isLoading=!1,this.$message.error(s.error_msg)):(this.isLoading=!1,this.total=parseInt(s.data.count),this.page=e,this.pageSize=i,this.quickJumper=this.total>this.pageSize,this.followRecord=s.data.followRecord);case 8:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),changePage:function(t,e){this.getFollowRecord(t,e)},showSizeChange:function(t,e){this.getFollowRecord(1,e)},changeTextarea:function(){0==this.followItem.lose_one&&(""==this.msg&&0==this.file.length?this.submitDisabled=!0:this.submitDisabled=!1)},handleCancel:function(){this.previewVisible=!1},beforeUploadPic:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(e){var i,a,s,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if("image/png"==e.type||"image/jpg"==e.type||"image/jpeg"==e.type){t.next=4;break}return this.$message.error("图片类型仅支持png、jpg、jpeg类型！"),this.isImg3=!1,t.abrupt("return",!1);case 4:if(i=e.size/1024/1024<2,i){t.next=11;break}return this.$message.error("图片不超过2M！"),this.isImg3=!1,t.abrupt("return",!1);case 11:if(!(e.size<5)){t.next=15;break}return this.$message.error("上传文件大小不符！"),this.isImg3=!1,t.abrupt("return",!1);case 15:return this.isImg3=!0,a=new FormData,a.append("uid",localStorage.getItem("uid")),a.append("fileInfo",e),t.next=21,this.axios.post("sub-user/upload-image",a);case 21:if(s=t.sent,n=s.data,0!=n.error){t.next=29;break}if(!n.data){t.next=27;break}return this.picFile={uid:e.uid,url:this.commonUrl+n.data.local_path,status:"done"},t.abrupt("return",i);case 27:t.next=30;break;case 29:this.$message.error(n.error_msg);case 30:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),handleChangePic:function(t,e){if("removed"==t.file.status&&this.field_list[e]["picUrl"].splice(this.field_list[e]["picUrl"].findIndex((function(e){return e.url==t.file.url})),1),"done"==this.picFile.status){var i=this.field_list[e]["picUrl"].findIndex((function(e){return t.file==e}));-1!=i?this.field_list[e]["picUrl"].splice(i,1):this.field_list[e]["picUrl"].push(this.picFile)}var a=!0,s=!1,n=void 0;try{for(var o,r=this.field_list[e]["picUrl"][Symbol.iterator]();!(a=(o=r.next()).done);a=!0){var l=o.value;"error"==l.status&&(l.status="done")}}catch(c){s=!0,n=c}finally{try{a||null==r.return||r.return()}finally{if(s)throw n}}this.picFile={}},preview:function(t){this.previewImage=t,this.previewVisible=!0},handlePreview:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.url||e.preview){t.next=4;break}return t.next=3,f(e.originFileObj);case 3:e.preview=t.sent;case 4:this.previewImage=e.url||e.preview,this.previewVisible=!0;case 6:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),changeMsg:function(t){-1!=this.imageUrl.indexOf(t.file)&&this.file.splice(this.imageUrl.indexOf(t.file),1),this.isImg&&(this.imageUrl=t.fileList,this.imgNum=t.fileList.length);var e=!0,i=!1,a=void 0;try{for(var s,n=this.imageUrl[Symbol.iterator]();!(e=(s=n.next()).done);e=!0){var o=s.value;"error"==o.status&&(o.status="done")}}catch(r){i=!0,a=r}finally{try{e||null==n.return||n.return()}finally{if(i)throw a}}0==this.file.length&&""==this.msg&&(this.submitDisabled=!0)},uploadMaterial:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(e){var i,a,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return i=new FormData,i.append("uid",localStorage.getItem("uid")),i.append("fileInfo",e),t.next=5,this.axios.post("sub-user/upload-image",i);case 5:a=t.sent,s=a.data,0==s.error?s.data&&(this.file.push(s.data.local_path),1!=this.followItem.lose_one||this.lose?this.submitDisabled=!1:this.submitDisabled=!0):(this.$message.error(s.error_msg),1!=this.followItem.lose_one||this.lose?this.submitDisabled=!1:this.submitDisabled=!0);case 8:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),beforeUpload:function(t){if("image/png"!=t.type&&"image/jpg"!=t.type&&"image/jpeg"!=t.type)return this.$message.error("图片类型仅支持png、jpg、jpeg类型！"),this.isImg=!1,!1;var e=t.size/1024/1024<2;return e?t.size<5?(this.$message.error("上传文件大小不符！"),this.isImg=!1,!1):(this.isImg=!0,this.uploadMaterial(t),e):(this.$message.error("图片不超过2M！"),this.isImg=!1,!1)},previewHasImg:function(t){this.previewImage=t,this.previewVisible=!0},submitFollowRecord:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(){var e,i,a,s,n,o,r,l,c,d=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e="",i=[],""==this.record_id?(e=this.msg,i=this.file):(e=this.msg2,i=this.file2),0!=this.followItem.lose_one){t.next=9;break}if(""!=e.trim()||0!=i.length){t.next=7;break}return this.$message.error("跟进内容和图片至少要填写一个！"),t.abrupt("return",!1);case 7:t.next=12;break;case 9:if(""!=this.lose){t.next=12;break}return this.$message.error("请选择原因！"),t.abrupt("return",!1);case 12:if(a=0,this.editVisible){t.next=18;break}a=this.follow_id,s=1==this.followItem.lose_one?this.lose:"",t.next=25;break;case 18:if(a=this.status,n=this.follows.findIndex((function(t){return t.id==d.status})),o=this.follows[n],s=1==o.lose_one?this.followItem.lose_id:"",1!=o.lose_one||s&&""!=s){t.next=25;break}return this.$message.error("请选择原因！"),t.abrupt("return",!1);case 25:if(""!=a){t.next=28;break}return this.$message.warning("请选择跟进状态！"),t.abrupt("return",!1);case 28:r=0;case 29:if(!(r<this.follows.length)){t.next=40;break}if(this.follows[r].id!=a){t.next=37;break}if(0!=this.follows[r].status){t.next=36;break}return this.$message.warning("跟进状态已被删除，请更换！"),t.abrupt("return",!1);case 36:return t.abrupt("break",40);case 37:r++,t.next=29;break;case 40:return t.next=42,this.axios.post("public-sea-customer/follow-record-set",{isMasterAccount:localStorage.getItem("isMasterAccount"),corp_id:this.corpId,uid:localStorage.getItem("uid"),cid:this.id,sub_id:localStorage.getItem("sub_id"),record_id:this.record_id,record:e,file:i,follow_id:a,lose:s});case 42:l=t.sent,c=l.data,0!=c.error?this.$message.error(c.error_msg):(localStorage.setItem("followid",a),this.submitDisabled=!0,this.msg="",this.file=[],this.record_id="",this.imageUrl=[],this.imgNum=0,this.msg2="",this.file2=[],this.lose=void 0,this.imageUrl2=[],this.imgNum2=0,this.editVisible=!1,this.getFollowRecord(),this.canEditFollow(),this.getInfo());case 45:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),editFollowRecord:function(t){var e=this;this.followItem=t,this.status=parseInt(this.followItem.follow_id);var i=this.follows.findIndex((function(t){return t.id==e.status}));this.followItem.lose_one=this.follows[i].lose_one,this.editVisible=!0,this.record_id=t.id,this.msg2=t.record,this.file2=JSON.parse(JSON.stringify(t.file)),t.file.map((function(t,i){var a={uid:i,name:"image.png",status:"done",url:e.commonUrl+t};e.imageUrl2.push(a)})),this.imgNum2=t.file.length},cancelFollowRecord:function(){this.editVisible=!1,this.record_id="",this.status=this.followStatus,this.msg2="",this.file2=[],this.imageUrl2=[],this.imgNum2=0},changeState:function(t){var e=this,i=this.follows.findIndex((function(t){return t.id==e.follow_id}));this.followItem=this.follows[i],this.submitDisabled=!1,1!=this.followItem.lose_one||this.lose&&""!=this.lose?0==this.followItem.lose_one&&(!this.msg&&""==this.msg&&this.file.length<=0?this.submitDisabled=!0:this.submitDisabled=!1):this.submitDisabled=!0},changeState1:function(t){var e=this,i=this.follows.findIndex((function(t){return t.id==e.status}));this.followItem.lose_one=this.follows[i].lose_one},changeLose:function(){1==this.followItem.lose_one&&(this.lose&&""!=this.lose?this.submitDisabled=!1:this.submitDisabled=!0)},handleCancel2:function(){this.previewVisible2=!1},handlePreview2:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.url||e.preview){t.next=4;break}return t.next=3,f(e.originFileObj);case 3:e.preview=t.sent;case 4:this.previewImage2=e.url||e.preview,this.previewVisible2=!0;case 6:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),changeMsg2:function(t){-1!=this.imageUrl2.indexOf(t.file)&&this.file2.splice(this.imageUrl2.indexOf(t.file),1),this.isImg2&&(this.imageUrl2=t.fileList,this.imgNum2=t.fileList.length);var e=!0,i=!1,a=void 0;try{for(var s,n=this.imageUrl2[Symbol.iterator]();!(e=(s=n.next()).done);e=!0){var o=s.value;"error"==o.status&&(o.status="done")}}catch(r){i=!0,a=r}finally{try{e||null==n.return||n.return()}finally{if(i)throw a}}},uploadMaterial2:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(e){var i,a,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return i=new FormData,i.append("uid",localStorage.getItem("uid")),i.append("fileInfo",e),t.next=5,this.axios.post("sub-user/upload-image",i);case 5:a=t.sent,s=a.data,0==s.error?s.data&&this.file2.push(s.data.local_path):this.$message.error(s.error_msg);case 8:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),beforeUpload2:function(t){if("image/png"!=t.type&&"image/jpg"!=t.type&&"image/jpeg"!=t.type)return this.$message.error("图片类型仅支持png、jpg、jpeg类型！"),this.isImg2=!1,!1;var e=t.size/1024/1024<2;return e?t.size<5?(this.$message.error("上传文件大小不符！"),this.isImg2=!1,!1):(this.isImg2=!0,this.uploadMaterial2(t),e):(this.$message.error("图片不超过2M！"),this.isImg2=!1,!1)},getInteract:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(){var e,i,a,s=arguments;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=s.length>0&&void 0!==s[0]?s[0]:1,this.isLoading=!0,t.next=4,this.axios.post("public-sea-customer/custom-track",{isMasterAccount:localStorage.getItem("isMasterAccount"),uid:localStorage.getItem("uid"),cid:this.id,sub_id:localStorage.getItem("sub_id"),page:e,page_size:15});case 4:i=t.sent,a=i.data,0!=a.error?(this.isLoading=!1,this.$message.error(a.error_msg)):(this.isLoading=!1,this.page2=e,a.data.length<15?this.btnFlag=2:this.btnFlag=1,this.interactList=1==e?a.data:this.interactList.concat(a.data));case 7:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),loadMore:function(){this.page2++,this.getInteract(this.page2)},getFollowStatus:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(){var e,i,a,s,n=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.axios.post("custom-field/follow",{uid:localStorage.getItem("uid"),status:1,corp_id:localStorage.getItem("corpId")});case 2:e=t.sent,i=e.data,0!=i.error?this.$message.error(i.error_msg):(this.follows=i.data.follow,1==this.is_follow_del&&(a={id:this.follow_id,title:this.followTitle,status:0},this.follows.unshift(a)),s=this.follows.findIndex((function(t){return t.id==n.follow_id})),this.followItem=this.follows[s]);case 5:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),canEditFollow:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(){var e,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.axios.post("wait-project/can-edit-follow",{cid:this.id,type:0});case 2:e=t.sent,i=e.data,0!=i.error?this.$message.error(i.error_msg):this.canEdit=i.data.can_edit_follow;case 5:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},created:function(){var t=this;if("all"==localStorage.getItem("permissionButton"))this.isShowTag=!0;else{var e=localStorage.getItem("permissionButton").split(",");e.indexOf("client-add-tag")>-1&&e.indexOf("client-remove-tag")>-1?this.isShowTag=!0:this.isShowTag=!1}this.id=this.$route.query.id,this.getInfo(),this.getFollowRecord(),this.canEditFollow(),this.getLoseReason();g.a.subscribe("closeCall",(function(e,i){i.showCall||(t.showAddPhone=!0)}))}},v=m,b=(i("e011"),i("2877")),x=Object(b["a"])(v,a,s,!1,null,"46989321",null);e["default"]=x.exports},d22e:function(t,e,i){"use strict";var a=i("c814"),s=i.n(a);s.a},df74:function(t,e,i){t.exports=i.p+"assets/img/call.179c83e9.png"},e011:function(t,e,i){"use strict";var a=i("941cb"),s=i.n(a);s.a}}]);