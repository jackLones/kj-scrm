(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3aab9e00"],{"1a8d":function(t,e,a){e=t.exports=a("2350")(!1),e.push([t.i,"[data-v-62eb064a] .ant-card-bordered{border:0}.tpl-title[data-v-62eb064a]{float:left;font-size:16px;vertical-align:top}.help[data-v-62eb064a]{float:left;margin-left:18px}.help-icon[data-v-62eb064a]{margin-right:5px;font-size:14px;margin-top:4px}.help-transition[data-v-62eb064a]{-webkit-animation:help-data-v-62eb064a 1s infinite;animation:help-data-v-62eb064a 1s infinite}.help a[data-v-62eb064a]{font-size:14px}.help a[data-v-62eb064a]:link,.help a[data-v-62eb064a]:visited{color:#1890ff;text-decoration:none}.help-transition1[data-v-62eb064a]{-webkit-animation:help1-data-v-62eb064a 1s infinite;animation:help1-data-v-62eb064a 1s infinite}@-webkit-keyframes help-data-v-62eb064a{0%{-webkit-transform:translate(0);transform:translate(0)}50%{-webkit-transform:translateY(-8px);transform:translateY(-8px)}to{-webkit-transform:translateY(3px);transform:translateY(3px)}}@keyframes help-data-v-62eb064a{0%{-webkit-transform:translate(0);transform:translate(0)}50%{-webkit-transform:translateY(-8px);transform:translateY(-8px)}to{-webkit-transform:translateY(3px);transform:translateY(3px)}}@-webkit-keyframes help1-data-v-62eb064a{0%{-webkit-transform:translateY(3px);transform:translateY(3px)}50%{-webkit-transform:translateY(-4px);transform:translateY(-4px)}to{-webkit-transform:translate(0);transform:translate(0)}}@keyframes help1-data-v-62eb064a{0%{-webkit-transform:translateY(3px);transform:translateY(3px)}50%{-webkit-transform:translateY(-4px);transform:translateY(-4px)}to{-webkit-transform:translate(0);transform:translate(0)}}.content-bd[data-v-62eb064a]{background:#fff;min-height:120px;border:1px solid #e2e2e2;min-width:885px;margin:0 20px}[data-v-62eb064a] .dark-row{background:#fafafa}[data-v-62eb064a] .light-row{background:#fff}[data-v-62eb064a] .ant-col-2{text-align:center}",""])},"471f":function(t,e,a){"use strict";var n=a("f44a"),s=a.n(n);s.a},"63e0":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"scroll",staticStyle:{width:"100%","max-height":"100%",position:"absolute","overflow-y":"auto","padding-bottom":"30px"}},[a("div",[a("a-card",{staticStyle:{padding:"0 20px","line-height":"50px","border-bottom":"1px solid #E2E2E2",height:"50px","min-width":"760px",width:"100%","margin-bottom":"12px"}},[a("label",{staticClass:"tpl-title"},[t._v("客户管理")])]),a("div",{directives:[{name:"has",rawName:"v-has",value:"user-add",expression:"'user-add'"}],staticStyle:{margin:"0 20px","margin-bottom":"12px",background:"#FFF",position:"relative",padding:"20px"}},[a("a-form",[a("a-form-item",{attrs:{label:"客户手机","label-col":{span:2},"wrapper-col":{span:22}}},[a("a-radio-group",{on:{change:t.changeUseType},model:{value:t.is_import,callback:function(e){t.is_import=e},expression:"is_import"}},[a("a-radio",{attrs:{value:0}},[t._v("输入手机号")]),a("a-radio",{staticStyle:{"margin-left":"15px"},attrs:{value:1}},[t._v("从Excel表格导入\n\t\t\t\t\t\t\t"),a("span",{directives:[{name:"show",rawName:"v-show",value:1==t.is_import,expression:"is_import == 1"}],staticStyle:{"padding-top":"15px"}},[a("a-upload",{attrs:{name:"avatar",showUploadList:!1,action:"https://www.mocky.io/v2/5cc8019d300000980a055e76",beforeUpload:t.beforeUpload}},[a("a-button",{staticStyle:{"margin-left":"10px",height:"28px","font-size":"14px"},attrs:{type:"primary"}},[t._v("上传excel")])],1),a("span",[a("a",{staticStyle:{margin:"10px"},attrs:{href:t.$store.state.commonUrl+"/upload/customer.xlsx"}},[t._v("示例数据")]),t._v("请按照模板中的要求整理用户信息")]),a("span",[t._v(t._s(t.file_name))])],1)])],1),a("div",{directives:[{name:"show",rawName:"v-show",value:0==t.is_import,expression:"is_import == 0"}]},[a("a-textarea",{staticStyle:{height:"110px",border:"1px solid #D9D9D9",resize:"none"},attrs:{placeholder:"手机号之间使用,分割",autosize:!1},model:{value:t.phoneTxt,callback:function(e){t.phoneTxt=e},expression:"phoneTxt"}})],1)],1),a("div",{staticStyle:{"margin-top":"15px","text-align":"center"}},[a("a-button",{directives:[{name:"show",rawName:"v-show",value:0==t.is_import,expression:"is_import == 0"}],attrs:{icon:"plus",type:"primary"},on:{click:function(e){return t.postPhone()}}},[t._v("新增客户资源\n\t\t\t\t\t")]),a("a-button",{directives:[{name:"show",rawName:"v-show",value:1==t.is_import,expression:"is_import == 1"}],attrs:{icon:"plus",type:"primary"},on:{click:function(e){return t.postFile()}}},[t._v("新增客户资源\n\t\t\t\t\t")])],1)],1)],1),a("div",{staticStyle:{margin:"0 20px",background:"#FFF","padding-bottom":"20px"}},[a("a-row",{staticStyle:{padding:"30px 20px"}},[a("a-col",{staticStyle:{float:"left"}},[a("a-input",{staticStyle:{width:"350px","margin-right":"15px"},attrs:{placeholder:"请输入手机号码"},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.find(e)},search:t.onSearch},model:{value:t.searchInput,callback:function(e){t.searchInput=e},expression:"searchInput"}}),a("a-button",{staticStyle:{"margin-right":"15px"},attrs:{type:"primary"},on:{click:t.find}},[t._v("查找")]),a("a-button",{staticStyle:{"margin-right":"15px"},on:{click:t.clear}},[t._v("清空")])],1)],1),a("div",{staticClass:"content-bd"},[a("a-spin",{attrs:{tip:"Loading...",size:"large",spinning:t.isLoading}},[a("div",{staticClass:"spin-content"},[a("a-table",{directives:[{name:"has",rawName:"v-has",value:"user-list",expression:"'user-list'"}],attrs:{columns:t.columns,dataSource:t.accountList,pagination:!1,rowClassName:t.rowClassName},scopedSlots:t._u([{key:"name",fn:function(e,n,s){return[""==n.name?a("span",[t._v("--")]):t._e(),""!=n.name?a("span",[t._v(t._s(n.name))]):t._e()]}},{key:"nickname",fn:function(e,n,s){return[""==n.nickname?a("span",[t._v("--")]):t._e(),""!=n.nickname?a("span",[t._v(t._s(n.nickname))]):t._e()]}},{key:"sex",fn:function(e,n,s){return[0==n.sex?a("span",[t._v("--")]):t._e(),1==n.sex?a("span",[t._v("男")]):t._e(),2==n.sex?a("span",[t._v("女")]):t._e()]}},{key:"remark",fn:function(e,n,s){return[""==n.remark?a("span",[t._v("--")]):t._e(),""!=n.remark?a("span",[t._v(t._s(n.remark))]):t._e()]}}])}),a("div",{directives:[{name:"show",rawName:"v-show",value:t.total>0,expression:"total > 0"},{name:"has",rawName:"v-has",value:"user-list",expression:"'user-list'"}],staticClass:"pagination",staticStyle:{margin:"20px auto",height:"32px"}},[a("span",{staticStyle:{float:"left","margin-left":"20px"}},[t._v("共"+t._s(t.total)+"条")]),a("a-pagination",{staticStyle:{float:"right"},attrs:{total:t.total,showSizeChanger:"",showQuickJumper:t.quickJumper,current:t.page,pageSize:t.page_size,pageSizeOptions:["15","30","50","100"]},on:{change:t.changePage,showSizeChange:t.showSizeChange}})],1)],1)])],1)],1)],1)])},s=[],i=(a("7f7f"),a("96cf"),a("3b8d")),r=[{title:"手机号",dataIndex:"phone",width:"15%",key:"phone"},{title:"姓名",dataIndex:"name",width:"8%",key:"name",scopedSlots:{customRender:"name"}},{title:"微信昵称",dataIndex:"nickname",width:"10%",key:"nickname",scopedSlots:{customRender:"nickname"}},{title:"性别",dataIndex:"sex",width:"10%",key:"sex",scopedSlots:{customRender:"sex"}},{title:"备注",dataIndex:"remark",width:"10%",key:"remark",scopedSlots:{customRender:"remark"}}],o={data:function(){return{showTransition:1,accountList:[],flag:!1,searchInput:"",isLoading:!0,commonUrl:this.$store.state.commonUrl,showWxModal:!1,phone:"",is_import:0,phoneTxt:"",fileInfo:{},file_name:"",columns:r,page:1,page_size:15,total:0,quickJumper:!1}},mounted:function(){this.initHelp()},methods:{rowClassName:function(t,e){var a="dark-row";return e%2===0&&(a="light-row"),a},initHelp:function(){var t=this;setInterval((function(){t.showTransition=(t.showTransition+1)%5}),1e3)},onSearch:function(t){this.phone=t,this.getAccount()},getAccount:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){var e,a,n,s,i=arguments;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=i.length>0&&void 0!==i[0]?i[0]:1,a=i.length>1&&void 0!==i[1]?i[1]:this.page_size,t.next=4,this.axios.post("short-message/customer",{uid:localStorage.getItem("uid"),phone:this.phone,page:e,pageSize:a});case 4:n=t.sent,s=n.data,0!=s.error?(this.isLoading=!1,this.$message.error(s.message)):(this.accountList=s.data.customer,this.total=parseInt(s.data.count),this.page=e,this.page_size=a,this.quickJumper=this.total>this.page_size,this.isLoading=!1),0==this.accountList.length&&(this.flag=!0);case 8:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),find:function(){this.phone=this.searchInput,this.isLoading=!0,this.getAccount()},clear:function(){this.searchInput="",this.phone=this.searchInput,this.isLoading=!0,this.getAccount()},changeUseType:function(t){this.is_is_import=t.target.value},beforeUpload:function(t){var e=".xls"===t.name.substr(t.name.lastIndexOf(".")).toLowerCase(),a=".xlsx"===t.name.substr(t.name.lastIndexOf(".")).toLowerCase(),n=t.size/1024/1024<5;if(e||a){if(n)return this.fileInfo=t,this.file_name=t.name,!1;this.$message.warning("上传模板大小不能超过 5MB!")}else this.$message.warning("上传模板只能是 xls、xlsx格式!")},postPhone:function(){this.isLoading=!0,this.addPhone()},addPhone:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){var e,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(""!=this.phoneTxt){t.next=4;break}return this.$message.error("请输入手机号"),this.isLoading=!1,t.abrupt("return",!1);case 4:return t.next=6,this.axios.post("short-message/add-customer",{uid:localStorage.getItem("uid"),is_import:0,phoneTxt:this.phoneTxt});case 6:e=t.sent,a=e.data,0!=a.error?(this.isLoading=!1,this.$message.error(a.error_msg)):(this.isLoading=!1,this.$message.success(a.data.textHtml),this.phoneTxt="",this.phone="",this.getAccount());case 9:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),postFile:function(){this.isLoading=!0,this.uploadFile()},uploadFile:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){var e,a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if("{}"!=JSON.stringify(this.fileInfo)){t.next=4;break}return this.$message.error("请选择导入文件"),this.isLoading=!1,t.abrupt("return",!1);case 4:return e=new FormData,e.append("uid",localStorage.getItem("uid")),e.append("is_import",1),e.append("importFile",this.fileInfo),t.next=10,this.axios.post("short-message/add-customer",e);case 10:a=t.sent,n=a.data,0!=n.error?(this.isLoading=!1,this.$message.error(n.error_msg)):(this.isLoading=!1,this.$message.success(n.data.textHtml),this.file_name="",this.fileInfo={},this.getAccount());case 13:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),changePage:function(t,e){this.getAccount(t,e),this.$nextTick((function(){document.getElementsByClassName("scroll")[0].scrollTo(0,260)}))},showSizeChange:function(t,e){this.getAccount(1,e)}},created:function(){this.getAccount()}},p=o,l=(a("471f"),a("2877")),c=Object(l["a"])(p,n,s,!1,null,"62eb064a",null);e["default"]=c.exports},f44a:function(t,e,a){var n=a("1a8d");"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var s=a("499e").default;s("4adb29d1",n,!0,{sourceMap:!1,shadowMode:!1})}}]);