(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7910271a"],{"19be":function(t,e){t.exports="data:image/gif;base64,R0lGODlhagAgAKIGAPb4/Ozx+MfW6pCt1kZ2u////wAAAAAAACH/C05FVFNDQVBFMi4wAwEAAAAh/wtYTVAgRGF0YVhNUDw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMDY3IDc5LjE1Nzc0NywgMjAxNS8wMy8zMC0yMzo0MDo0MiAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTUgKE1hY2ludG9zaCkiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6NjM3MjIyN0VCRDUwMTFFNkJBMTVEOEEwNDNEQ0JCMTUiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6NjM3MjIyN0ZCRDUwMTFFNkJBMTVEOEEwNDNEQ0JCMTUiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo2MzcyMjI3Q0JENTAxMUU2QkExNUQ4QTA0M0RDQkIxNSIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo2MzcyMjI3REJENTAxMUU2QkExNUQ4QTA0M0RDQkIxNSIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PgH//v38+/r5+Pf29fTz8vHw7+7t7Ovq6ejn5uXk4+Lh4N/e3dzb2tnY19bV1NPS0dDPzs3My8rJyMfGxcTDwsHAv769vLu6ubi3trW0s7KxsK+urayrqqmop6alpKOioaCfnp2cm5qZmJeWlZSTkpGQj46NjIuKiYiHhoWEg4KBgH9+fXx7enl4d3Z1dHNycXBvbm1sa2ppaGdmZWRjYmFgX15dXFtaWVhXVlVUU1JRUE9OTUxLSklIR0ZFRENCQUA/Pj08Ozo5ODc2NTQzMjEwLy4tLCsqKSgnJiUkIyIhIB8eHRwbGhkYFxYVFBMSERAPDg0MCwoJCAcGBQQDAgEAACH5BAUeAAYALAAAAABqACAAAANQWLrc/jDKSau9OOvNu/9gKI5kaZ5oqq5s675wLM90bd94ru9870OAoDD4mw2HRdlRmIwtic3XExCVPquuKbal3Xq/4LB4TC6bz+i0es1mJQAAIfkEBR4ABgAsHQAOAAgACAAAAwgYutz+MMqYAAAh+QQFHgAGACwxAA4ACAAIAAADCCi63P4wypgAACH5BAUeAAYALEUADgAIAAgAAAMIOLrc/jDKmAAAIfkEBR4ABgAsWQAOAAgACAAAAwhIutz+MMqYAAAh+QQFHgAGACwJAA4AWAAIAAADGli63P4wykmrvTjrzbv/YCiOZGmeaKqubFskADs="},"1dfd":function(t,e,a){var s=a("a674");"string"===typeof s&&(s=[[t.i,s,""]]),s.locals&&(t.exports=s.locals);var i=a("499e").default;i("3a0a6453",s,!0,{sourceMap:!1,shadowMode:!1})},3273:function(t,e,a){"use strict";var s=a("1dfd"),i=a.n(s);i.a},"47f8":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"scroll",staticStyle:{width:"100%","max-height":"100%",position:"absolute","overflow-y":"auto","padding-bottom":"30px"}},[s("div",[s("a-card",{staticStyle:{"margin-bottom":"20px",padding:"10px 20px"}},[s("label",{staticClass:"tpl-title"},[t._v("客户导入分配")])]),s("div",{staticClass:"content-msg",staticStyle:{margin:"0 20px 20px"}},[t._v("\n\t\t\t在合规的情况下，以手机号作为客户的线索，下载Ecxel模板表格后输入手机号上传。上传后，表格内手机号将平均分配给选择的员工，分配完成后员工会在企业微信收到添加好友的任务，需要员工手动添加客户。\n\t\t")]),s("div",{staticStyle:{padding:"0 20px"}},[s("span",{directives:[{name:"has",rawName:"v-has",value:"customImportList-all-list",expression:"'customImportList-all-list'"}],staticClass:"tabBtn",class:{activeBtn:1==t.tabKey},on:{click:function(e){return t.changeTab(1)}}},[t._v("批量列表")]),s("span",{directives:[{name:"has",rawName:"v-has",value:"customImportList-people",expression:"'customImportList-people'"}],staticClass:"tabBtn",class:{activeBtn:2==t.tabKey},on:{click:function(e){return t.changeTab(2)}}},[t._v("客户列表")])]),s("div",{directives:[{name:"show",rawName:"v-show",value:1==t.tabKey,expression:"tabKey == 1"}],staticStyle:{padding:"15px 0",margin:"0px 20px",background:"#FFF"}},[s("a-col",{staticStyle:{background:"#FFF",padding:"10px",margin:"0 20px","margin-top":"1px",overflow:"hidden"}},[s("a-button",{directives:[{name:"has",rawName:"v-has",value:"customImportList-all-export",expression:"'customImportList-all-export'"}],staticStyle:{float:"right"},attrs:{type:"primary"},on:{click:t.importExcel}},[t._v("导入Excel\n\t\t\t\t")]),s("div",{staticStyle:{float:"left"}},[s("a-input",{staticStyle:{width:"170px"},attrs:{placeholder:"请输入Excel名称",autoComplete:"off"},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.find(e)}},model:{value:t.ExcelName,callback:function(e){t.ExcelName=e},expression:"ExcelName"}}),s("a-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"primary"},on:{click:t.find}},[t._v("查找")]),s("a-button",{staticStyle:{"margin-left":"10px"},on:{click:t.clear}},[t._v("清空")])],1)],1),s("div",{staticClass:"content-bd"},[s("a-spin",{attrs:{tip:"Loading...",size:"large",spinning:t.isLoading}},[s("div",{staticClass:"spin-content"},[s("a-table",{attrs:{columns:t.columns,dataSource:t.batchList,pagination:!1,rowClassName:t.rowClassName},scopedSlots:t._u([{key:"userName",fn:function(e,a,i){return[s("div",{staticStyle:{"max-width":"300px"}},[a.userName.length>5?[s("a-popover",{attrs:{trigger:"hover"}},[s("span",{staticStyle:{display:"inline-block","max-width":"500px","word-wrap":"break-word","word-break":"break-all"},attrs:{slot:"content"},slot:"content"},[t._l(a.userName,(function(e){return["name"==e.title?s("a-tag",{staticStyle:{"margin-top":"5px"},attrs:{color:"orange"}},[t._v(t._s(e.name))]):t._e()]})),t._l(a.userName,(function(e){return["name"!=e.title?s("a-tag",{staticStyle:{"margin-top":"5px"},attrs:{color:"blue"}},[t._v(t._s(e.name))]):t._e()]}))],2),t._l(a.userName,(function(e,a){return[a<5&&"name"==e.title?s("a-tag",{staticStyle:{"margin-top":"5px"},attrs:{color:"orange"}},[t._v(t._s(e.name))]):t._e()]})),t._l(a.userName,(function(e){return[i<5&&"name"!=e.title?s("a-tag",{staticStyle:{"margin-top":"5px"},attrs:{color:"blue"}},[t._v(t._s(e.name))]):t._e()]})),s("span",{staticStyle:{cursor:"pointer"}},[t._v("等共计"+t._s(t.getUserNum(a.userName))+"位成员、"+t._s(a.userName.length-t.getUserNum(a.userName))+"个部门")])],2)]:[t._l(a.userName,(function(e){return["name"==e.title?s("a-tag",{staticStyle:{"margin-top":"5px"},attrs:{color:"orange"}},[t._v(t._s(e.name))]):t._e()]})),t._l(a.userName,(function(e){return["name"!=e.title?s("a-tag",{staticStyle:{"margin-top":"5px"},attrs:{color:"blue"}},[t._v(t._s(e.name))]):t._e()]}))]],2)]}},{key:"action",fn:function(e,a,i){return[s("a-button",{directives:[{name:"has",rawName:"v-has",value:"customImportList-all-info",expression:"'customImportList-all-info'"}],staticStyle:{margin:"10px 5px 0 0"},on:{click:function(e){return t.detailList(a.import_id)}}},[t._v("\n\t\t\t\t\t\t\t\t\t详情\n\t\t\t\t\t\t\t\t")]),s("a-popconfirm",{attrs:{title:"确定删除吗?",okText:"确定",cancelText:"取消"},on:{confirm:function(e){return t.deleteList(a.import_id)}}},[s("a-button",{directives:[{name:"has",rawName:"v-has",value:"customImportList-all-delete",expression:"'customImportList-all-delete'"}]},[t._v("删除")])],1)]}}])},[s("template",{slot:"addNum"},[t._v("\n\t\t\t\t\t\t\t\t添加客户数\n\t\t\t\t\t\t\t\t"),s("a-tooltip",{attrs:{placement:"bottom"}},[s("template",{slot:"title"},[s("div",[t._v("成功将手机号客户添加到企业微信里")])]),s("a-icon",{staticStyle:{"margin-left":"5px"},attrs:{type:"question-circle"}})],2)],1)],2),s("div",{directives:[{name:"show",rawName:"v-show",value:t.total>0,expression:"total > 0"}],staticClass:"pagination",staticStyle:{width:"100%",position:"absolute",margin:"20px 0px"}},[s("div",{staticStyle:{height:"32px",float:"left","line-height":"32px"}},[t._v("\n\t\t\t\t\t\t\t\t共\n\t\t\t\t\t\t\t\t"),s("span",{staticStyle:{color:"blue"}},[t._v(t._s(t.total))]),t._v("\n\t\t\t\t\t\t\t\t条\n\t\t\t\t\t\t\t")]),s("div",{staticClass:"pagination",staticStyle:{height:"32px",float:"right"}},[s("a-pagination",{attrs:{total:t.total,showSizeChanger:"",showQuickJumper:t.quickJumper,current:t.page,pageSize:t.pageSize,pageSizeOptions:["2","3","15","30","50","100"]},on:{change:t.changePage,showSizeChange:t.showSizeChange}})],1)])],1)])],1)],1),s("div",{directives:[{name:"show",rawName:"v-show",value:2==t.tabKey,expression:"tabKey == 2"}],staticStyle:{padding:"15px 0",margin:"0px 20px",background:"#FFF"}},[s("a-col",{staticStyle:{background:"#FFF",padding:"10px",margin:"0 20px","margin-top":"1px"}},[s("a-input",{staticStyle:{width:"170px","margin-right":"10px"},attrs:{value:t.phone,placeholder:"请输入客户电话"},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.find2(e)},change:t.phoneChange}}),s("a-select",{staticStyle:{width:"170px"},attrs:{showSearch:"",optionFilterProp:"children",placeholder:"请选择添加状态"},model:{value:t.addStatus,callback:function(e){t.addStatus=e},expression:"addStatus"}},[s("a-select-option",{attrs:{value:-1}},[t._v("全部状态")]),s("a-select-option",{attrs:{value:1}},[t._v("未添加")]),s("a-select-option",{attrs:{value:2}},[t._v("已添加")])],1),s("a-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"primary"},on:{click:t.find2}},[t._v("查找")]),s("a-button",{staticStyle:{"margin-left":"10px"},on:{click:t.clear2}},[t._v("清空")])],1),s("div",{staticClass:"content-bd"},[s("a-spin",{attrs:{tip:"Loading...",size:"large",spinning:t.isLoading2}},[s("div",{staticClass:"spin-content"},[s("a-table",{attrs:{columns:t.columns2,dataSource:t.customList,pagination:!1,rowClassName:t.rowClassName},scopedSlots:t._u([{key:"name",fn:function(e,a,i){return[""==a.name?s("span",[t._v("--/")]):t._e(),""!=a.name?s("span",[t._v(t._s(a.name)+"/")]):t._e(),""==a.sex?s("span",[t._v("--/")]):t._e(),""!=a.sex?s("span",[t._v(t._s(a.sex)+"/")]):t._e(),""==a.area?s("span",[t._v("--")]):t._e(),""!=a.area?s("span",[t._v(t._s(a.area))]):t._e()]}},{key:"des",fn:function(e,a,i){return[""==a.des?s("span",[t._v("--")]):t._e(),""!=a.des?s("span",[t._v(t._s(a.des))]):t._e()]}},{key:"userName",fn:function(e,a,i){return[s("a-tag",{attrs:{color:"orange"}},[t._v("\n\t\t\t\t\t\t\t\t\t"+t._s(e)+"\n\t\t\t\t\t\t\t\t")])]}},{key:"is_add",fn:function(e,a,i){return[0==a.is_add?s("span",[t._v("未添加")]):t._e(),1==a.is_add?s("span",[t._v("已添加")]):t._e()]}}])}),s("div",{directives:[{name:"show",rawName:"v-show",value:t.total2>0,expression:"total2 > 0"}],staticClass:"pagination",staticStyle:{width:"100%",position:"absolute",margin:"20px 0px"}},[s("div",{staticStyle:{height:"32px",float:"left","line-height":"32px"}},[t._v("\n\t\t\t\t\t\t\t\t共\n\t\t\t\t\t\t\t\t"),s("span",{staticStyle:{color:"blue"}},[t._v(t._s(t.total2))]),t._v("\n\t\t\t\t\t\t\t\t条\n\t\t\t\t\t\t\t")]),s("div",{staticClass:"pagination",staticStyle:{height:"32px",float:"right"}},[s("a-pagination",{attrs:{total:t.total2,showSizeChanger:"",showQuickJumper:t.quickJumper2,current:t.page2,pageSize:t.pageSize2,pageSizeOptions:["15","30","50","100"]},on:{change:t.changePage2,showSizeChange:t.showSizeChange2}})],1)])],1)])],1)],1)],1),s("a-modal",{attrs:{title:"上传表格",width:"750px",confirmLoading:t.modalLoading},on:{cancel:t.handleCancel,ok:t.handleOk},model:{value:t.showModal,callback:function(e){t.showModal=e},expression:"showModal"}},[s("div",{staticStyle:{padding:"10px 0px","min-height":"300px",overflow:"auto"}},[s("div",{staticStyle:{color:"red"}},[t._v("为了避免导入时出现等待时间过长，建议单次上传不超过5000条，最多可支持3万条。")]),s("a-form-item",{attrs:{"label-col":{span:4},"wrapper-col":{span:20}}},[s("span",{attrs:{slot:"label"},slot:"label"},[s("span",{staticStyle:{color:"red"}},[t._v(" * ")]),t._v("选择表格\n                ")]),s("a-upload",{attrs:{name:"avatar",showUploadList:!1,action:"https://www.mocky.io/v2/5cc8019d300000980a055e76",beforeUpload:t.beforeUpload}},[s("a-button",{staticStyle:{height:"28px","font-size":"14px"},attrs:{type:"primary"}},[t._v("上传Excel\n\t\t\t\t\t")])],1),""!=t.file_name?[s("span",{staticStyle:{"margin-left":"5px"}},[t._v(t._s(t.file_name))]),s("a-icon",{staticStyle:{"vertical-align":"text-top","margin-left":"3px"},attrs:{type:"close-circle"},on:{click:t.closeExcel}})]:t._e(),s("div",{staticStyle:{"line-height":"normal","margin-bottom":"20px",color:"#999"}},[t._v("下载"),s("a",{attrs:{href:t.$store.state.commonUrl+"/upload/import_customer.xlsx"}},[t._v("Excel模板")]),t._v("。"),s("span",[t._v("请按照模板的要求上传客户资料，若有重复手机号或空行将会自动过滤，以及不符合规范的填写格式，上传后直接显示”--“")])])],2),s("a-form-item",{staticClass:"current0",attrs:{"label-col":{span:4},"wrapper-col":{span:20}}},[s("span",{attrs:{slot:"label"},slot:"label"},[s("span",{staticStyle:{color:"red"}},[t._v(" * ")]),t._v("选择应用\n                ")]),[s("a-select",{staticStyle:{width:"200px"},attrs:{showSearch:"",optionFilterProp:"children",placeholder:"请选择应用"},on:{change:t.chooseAgent},model:{value:t.agent_id,callback:function(e){t.agent_id=e},expression:"agent_id"}},[t._l(t.agentList,(function(e){return[s("a-select-option",{attrs:{value:e.id}},[t._v(t._s(e.name)+"\n\t\t\t\t\t\t\t")])]}))],2),s("div",{staticStyle:{color:"#999","line-height":"normal","margin-bottom":"5px"}},[t._v("\n\t\t\t\t\t\t关联应用后，员工在企业微信会收到添加好友（分配的客户）的任务通知。\n\t\t\t\t\t")]),s("div",{staticClass:"content-msg",staticStyle:{"font-size":"13px"}},[s("p",{staticStyle:{height:"20px","line-height":"20px","margin-bottom":"2px"}},[t._v("1、前往"),s("a",{attrs:{target:"_blank",href:"https://work.weixin.qq.com/wework_admin/loginpage_wx?from=myhome_baidu"}},[t._v("\n\t\t\t\t\t\t\t企业微信后台")]),t._v("创建自建应用。"),s("a",{attrs:{target:"_blank",href:"https://support.qq.com/products/312071/faqs/90047"}},[t._v("\n\t\t\t\t\t\t\t教程")])]),s("p",{staticStyle:{"line-height":"20px",height:"20px","margin-bottom":"0px"}},[t._v("\n\t\t\t\t\t\t\t2、选择此应用，请确认已设置过应用的可信域名。\n\t\t\t\t\t\t\t"),s("a",{staticClass:"el-link el-link--primary",attrs:{href:t.$store.state.commonUrl+"/upload/slider.png",target:"_blank"}},[s("span",{staticClass:"el-link--inner"},[t._v("查看图示")])])])])]],2),s("a-form-item",{attrs:{"label-col":{span:4},"wrapper-col":{span:20}}},[s("span",{attrs:{slot:"label"},slot:"label"},[s("span",{staticStyle:{color:"red"}},[t._v(" * ")]),t._v("选择企业成员\n                ")]),s("a-button",{on:{click:t.showDepartmentList}},[t._v("\n\t\t\t\t\t选择\n\t\t\t\t")]),s("span",{directives:[{name:"show",rawName:"v-show",value:t.chooseNum>0,expression:"chooseNum > 0"}],staticStyle:{"margin-left":"5px"}},[t._v("已选择"+t._s(t.chooseUserNum)+"名成员，"+t._s(t.chooseDepartmentNum)+"个部门")]),s("a",{directives:[{name:"show",rawName:"v-show",value:t.chooseNum>0,expression:"chooseNum > 0"}],staticStyle:{"margin-left":"10px"},on:{click:t.clearDepartmentList}},[t._v("\n\t\t\t\t\t重置\n\t\t\t\t")]),s("div",{staticStyle:{"line-height":"normal",color:"#999"}},[t._v("表格内手机号将平均分配给选择的员工。")])],1)],1)]),s("a-drawer",{attrs:{placement:"right",closable:!1,visible:t.detailVisible,width:"1000px!important"},on:{close:t.detailDrawerClose}},[s("template",{slot:"title"},[t._v("\n\t\t\t"+t._s(t.detailTitle)+"\n\t\t")]),s("div",[s("a-col",{staticStyle:{background:"#FFF",padding:"10px 0",margin:"1px 20px 0"}},[s("a-input",{staticStyle:{width:"170px","margin-right":"10px"},attrs:{value:t.phone,placeholder:"请输入客户电话"},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.find2(e)},change:t.phoneChange}}),s("a-select",{staticStyle:{width:"170px"},attrs:{showSearch:"",optionFilterProp:"children",placeholder:"请选择添加状态"},model:{value:t.addStatus,callback:function(e){t.addStatus=e},expression:"addStatus"}},[s("a-select-option",{attrs:{value:-1}},[t._v("全部状态")]),s("a-select-option",{attrs:{value:1}},[t._v("未添加")]),s("a-select-option",{attrs:{value:2}},[t._v("已添加")])],1),s("a-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"primary"},on:{click:t.find2}},[t._v("查找")]),s("a-button",{staticStyle:{"margin-left":"10px"},on:{click:t.clear2}},[t._v("清空")])],1),s("div",{staticClass:"content-bd"},[s("a-table",{attrs:{columns:t.columns2,dataSource:t.customList,pagination:!1,rowClassName:t.rowClassName},scopedSlots:t._u([{key:"name",fn:function(e,a,i){return[""==a.name?s("span",[t._v("--/")]):t._e(),""!=a.name?s("span",[t._v(t._s(a.name)+"/")]):t._e(),""==a.sex?s("span",[t._v("--/")]):t._e(),""!=a.sex?s("span",[t._v(t._s(a.sex)+"/")]):t._e(),""==a.area?s("span",[t._v("--")]):t._e(),""!=a.area?s("span",[t._v(t._s(a.area))]):t._e()]}},{key:"des",fn:function(e,a,i){return[""==a.des?s("span",[t._v("--")]):t._e(),""!=a.des?s("span",[t._v(t._s(a.des))]):t._e()]}},{key:"userName",fn:function(e,a,i){return[s("a-tag",{attrs:{color:"orange"}},[t._v("\n\t\t\t\t\t\t\t"+t._s(e)+"\n\t\t\t\t\t\t")])]}},{key:"is_add",fn:function(e,a,i){return[0==a.is_add?s("span",[t._v("未添加")]):t._e(),1==a.is_add?s("span",[t._v("已添加")]):t._e()]}}])}),s("div",{directives:[{name:"show",rawName:"v-show",value:t.total2>0,expression:"total2 > 0"}],staticClass:"pagination",staticStyle:{overflow:"hidden",margin:"20px"}},[s("div",{staticStyle:{height:"32px",float:"left","line-height":"32px"}},[t._v("\n\t\t\t\t\t\t共\n\t\t\t\t\t\t"),s("span",{staticStyle:{color:"blue"}},[t._v(t._s(t.total2))]),t._v("\n\t\t\t\t\t\t条\n\t\t\t\t\t")]),s("div",{staticClass:"pagination",staticStyle:{height:"32px",float:"right"}},[s("a-pagination",{attrs:{total:t.total2,showSizeChanger:"",showQuickJumper:t.quickJumper2,current:t.page2,pageSize:t.pageSize2,pageSizeOptions:["15","30","50","100"]},on:{change:t.changePage2,showSizeChange:t.showSizeChange2}})],1)])],1)],1)],2),s("chooseDepartment",{ref:"user",attrs:{id:t.corpId,agentid:t.agent_id,show:t.showModalDepartment,is_special:1,chooseNum:t.chooseNum,noticeTitle:"当前只显示自建应用下可见范围内的成员，即可在企业微信收到添加好友的任务。",callback:t.modalVisibleChange3}}),s("a-modal",{attrs:{title:"上传进度",footer:!1,closable:!1,maskClosable:!1,maskStyle:{left:t.leftSiderWidth},wrapClassName:"mask-dialog"},model:{value:t.progressVisible,callback:function(e){t.progressVisible=e},expression:"progressVisible"}},[s("div",{staticStyle:{"text-align":"center"}},[s("a-progress",{attrs:{"stroke-linecap":"square",percent:t.progressNum,type:"circle"}}),s("div",[s("img",{attrs:{src:a("19be"),alt:""}})]),s("p",{staticStyle:{margin:"0 auto 20px"}},[t._v("已成功上传"+t._s(t.successNum)+"个客户，失败"+t._s(t.failNum)+"个客户，还有"+t._s(t.notImportNum)+"个客户待上传")])],1)])],1)},i=[],n=(a("28a5"),a("7618")),o=(a("96cf"),a("3b8d")),r=(a("7f7f"),a("c75b")),l=[{title:"Excel名称",dataIndex:"title",key:"title"},{title:"上传时间",dataIndex:"add_time",key:"add_time"},{title:"分配员工",dataIndex:"userName",key:"userName",scopedSlots:{customRender:"userName"}},{title:"总人数",dataIndex:"all_num",key:"all_num"},{dataIndex:"addNum",key:"addNum",slots:{title:"addNum"}},{title:"导入成功的人数",dataIndex:"snum",key:"snum"},{title:"导入失败的人数",dataIndex:"fail_num",key:"fail_num"},{title:"操作",dataIndex:"action",key:"action",scopedSlots:{customRender:"action"}}],c=[{title:"客户电话",dataIndex:"phone",key:"phone"},{title:"姓名/性别/地区",dataIndex:"name",key:"name",scopedSlots:{customRender:"name"}},{title:"备注",dataIndex:"des",key:"des",scopedSlots:{customRender:"des"}},{title:"分配员工",dataIndex:"userName",key:"userName",scopedSlots:{customRender:"userName"}},{title:"添加状态",dataIndex:"is_add",key:"is_add",scopedSlots:{customRender:"is_add"}}],p={components:{chooseDepartment:r["a"]},data:function(){var t=localStorage.getItem("corpId")?localStorage.getItem("corpId"):"";return{corpId:t,tabKey:1,isLoading:!1,ExcelName:"",batchList:[],id:"",total:0,quickJumper:!1,page:1,pageSize:15,showModal:!1,modalLoading:!1,fileInfo:{},file_name:"",agentList:[],agent_id:"",chooseNum:0,chooseUserNum:0,chooseDepartmentNum:0,staffList:[],showModalDepartment:!1,columns:l,isLoading2:!1,customList:[],phone:"",addStatus:-1,columns2:c,total2:0,quickJumper2:!1,page2:1,pageSize2:15,detailVisible:!1,detailTitle:"",progressVisible:!1,progressNum:0,leftSiderWidth:document.getElementsByClassName("menu-sider")[0].style.width,successNum:0,failNum:0,notImportNum:0}},methods:{getUserNum:function(t){for(var e=0,a=0;a<t.length;a++)"name"==t[a].title&&e++;return e},rowClassName:function(t,e){var a="dark-row";return e%2===0&&(a="light-row"),a},changeTab:function(t){this.tabKey=t,1==this.tabKey?(this.ExcelName="",this.pageSize=15,this.getList()):2==this.tabKey&&(this.phone="",this.addStatus=-1,this.pageSize2=15,this.id="",this.getCustomList())},importExcel:function(){this.getAgentList(),this.file_name="",this.fileInfo={},this.staffList=[],this.chooseNum=0,this.chooseUserNum=0,this.chooseDepartmentNum=0,this.showModal=!0},beforeUpload:function(t){var e=".xls"===t.name.substr(t.name.lastIndexOf(".")).toLowerCase(),a=".xlsx"===t.name.substr(t.name.lastIndexOf(".")).toLowerCase(),s=t.size/1024/1024<5;if(e||a){if(s)return this.fileInfo=t,this.file_name=t.name,!1;this.$message.warning("上传模板大小不能超过 5MB!")}else this.$message.warning("上传模板只能是 xls、xlsx格式!")},closeExcel:function(){this.fileInfo={},this.file_name=""},chooseAgent:function(t){this.staffList=[],this.chooseNum=0,this.chooseUserNum=0,this.chooseDepartmentNum=0},showDepartmentList:function(){var t=[];this.staffList.map((function(e){t.push(e.id)})),this.$refs.user.rightIdList=JSON.parse(JSON.stringify(t)),this.$refs.user.rightList=JSON.parse(JSON.stringify(this.staffList)),this.showModalDepartment=!0},modalVisibleChange3:function(t,e,a,s,i){"ok"==t&&(this.chooseNum=parseInt(a)+parseInt(s),this.chooseUserNum=a,this.chooseDepartmentNum=s,this.chooseNum>0?this.staffList=JSON.parse(JSON.stringify(i)):this.staffList=[]),this.showModalDepartment=!1},clearDepartmentList:function(){this.staffList=[],this.chooseNum=0,this.chooseUserNum=0,this.chooseDepartmentNum=0},handleOk:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(){var e,a,s,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(this.modalLoading=!0,"{}"!=JSON.stringify(this.fileInfo)){t.next=5;break}return this.$message.error("请选择上传Excel"),this.modalLoading=!1,t.abrupt("return",!1);case 5:if("object"!=Object(n["a"])(this.agent_id)||0!=this.agent_id.length){t.next=9;break}return this.$message.error("请选择应用"),this.modalLoading=!1,t.abrupt("return",!1);case 9:if("object"!=Object(n["a"])(this.staffList)||0!=this.staffList.length){t.next=13;break}return this.$message.error("请选择员工"),this.modalLoading=!1,t.abrupt("return",!1);case 13:return this.showModal=!1,this.$message.info("已进入后台导入中，请耐心等待..."),e=[],this.staffList.map((function(t){e.push(t.id)})),this.progressNum=0,this.successNum=0,this.failNum=0,this.notImportNum=0,this.progressVisible=!0,this.leftSiderWidth=document.getElementsByClassName("menu-sider")[0].style.width,this.$nextTick((function(){document.getElementsByClassName("mask-dialog")[0].style.left=document.getElementsByClassName("menu-sider")[0].style.width})),a=new FormData,a.append("corp_id",this.corpId),a.append("agentid",this.agent_id),a.append("user_ids",e),a.append("importFile",this.fileInfo),2==localStorage.getItem("isMasterAccount")&&a.append("sub_id",localStorage.getItem("sub_id")),t.next=32,this.axios.post("work-import-customer/import-customer",a);case 32:s=t.sent,i=s.data,0!=i.error&&(this.modalLoading=!1,this.progressVisible=!1,this.$message.error(i.error_msg));case 35:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),handleCancel:function(){this.agent_id="",this.fileInfo={},this.file_name="",this.staffList=[],this.chooseNum=0,this.chooseUserNum=0,this.chooseDepartmentNum=0,this.modalLoading=!1,this.showModal=!1},getList:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(){var e,a,s,i,n=arguments;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=n.length>0&&void 0!==n[0]?n[0]:1,a=n.length>1&&void 0!==n[1]?n[1]:this.pageSize,this.isLoading=!0,t.next=5,this.axios.post("work-import-customer/import-customer-list",{corp_id:this.corpId,title:this.ExcelName,page:e,page_size:a});case 5:s=t.sent,i=s.data,0!=i.error?(this.isLoading=!1,this.$message.error(i.error_msg)):(this.batchList=i.data.list,this.isLoading=!1,this.total=parseInt(i.data.count),this.page=e,this.pageSize=a,this.quickJumper=this.total>this.pageSize);case 8:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),changePage:function(t,e){this.getList(t,e),this.$nextTick((function(){document.getElementsByClassName("scroll")[0].scrollTo(0,90)}))},showSizeChange:function(t,e){this.getList(1,e)},find:function(){this.getList()},clear:function(){this.ExcelName="",this.getList()},deleteList:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(e){var a,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.axios.post("work-import-customer/import-customer-delete",{import_id:e});case 2:a=t.sent,s=a.data,0!=s.error?this.$message.error(s.error_msg):this.getList(this.page,this.pageSize);case 5:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),getAgentList:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(e){var a,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.axios.post("work-group-sending/agent-list",{corp_id:this.corpId,suite_id:1,agent_type:2});case 2:a=t.sent,s=a.data,0!=s.error?(this.isLoading=!1,this.$message.error(s.error_msg)):(this.agentList=s.data,e?this.agent_id=e:0==this.agentList.length||e||(this.agent_id=this.agentList[0].id));case 5:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),getCustomList:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(){var e,a,s,i,n=arguments;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=n.length>0&&void 0!==n[0]?n[0]:1,a=n.length>1&&void 0!==n[1]?n[1]:this.pageSize2,this.isLoading2=!0,t.next=5,this.axios.post("work-import-customer/import-customer-detail-list",{corp_id:this.corpId,import_id:this.id,status:this.addStatus,phone:this.phone,page:e,page_size:a});case 5:s=t.sent,i=s.data,0!=i.error?(this.isLoading2=!1,this.$message.error(i.error_msg)):(this.customList=i.data.list,this.isLoading2=!1,this.total2=parseInt(i.data.count),this.page2=e,this.pageSize2=a,this.quickJumper2=this.total2>this.pageSize2,""!=this.id&&(this.detailVisible=!0,this.detailTitle=i.data.importTitle));case 8:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),phoneChange:function(t){var e=t.target.value,a=/^-?(0|[0-9][0-9]*)(\.[0-9]*)?$/;(!isNaN(e)&&a.test(e)||""===e||"-"===e)&&(this.phone=e)},find2:function(){this.getCustomList()},clear2:function(){this.phone="",this.addStatus=-1,this.getCustomList()},changePage2:function(t,e){this.getCustomList(t,e),1==this.tabKey?document.getElementsByClassName("ant-drawer-wrapper-body")[0].scrollTo(0,0):this.$nextTick((function(){document.getElementsByClassName("scroll")[0].scrollTo(0,90)}))},showSizeChange2:function(t,e){this.getCustomList(1,e)},detailList:function(t){this.id=t,this.phone="",this.addStatus=-1,this.pageSize2=15,this.getCustomList()},detailDrawerClose:function(){this.detailVisible=!1},websocketOnMessage:function(t){"undefined"!=typeof t.type&&"import_customer"==t.type&&(1==localStorage.getItem("isMasterAccount")&&""==t.sub_id||2==localStorage.getItem("isMasterAccount")&&t.sub_id==localStorage.getItem("sub_id"))&&(this.progressVisible=!0,this.leftSiderWidth=document.getElementsByClassName("menu-sider")[0].style.width,this.$nextTick((function(){document.getElementsByClassName("mask-dialog")[0].style.left=document.getElementsByClassName("menu-sider")[0].style.width})),this.showModal=!1,this.progressNum=parseInt(t.import_num/t.snum*100),this.successNum=t.successNum,this.failNum=t.failNum,this.notImportNum=t.notImportNum,""!=t.textHtml&&(0==t.error?(this.modalLoading=!1,this.showModal=!1,this.$message.success(t.textHtml),this.getList()):this.$message.error(t.textHtml)),100==this.progressNum&&(this.progressVisible=!1))}},created:function(){if(2==localStorage.getItem("isMasterAccount")){var t=localStorage.getItem("permissionButton").split(","),e=this;-1!=t.indexOf("customImportList-all-list")?(e.tabKey=1,e.ws.setCallback(this.websocketOnMessage),e.getList()):(e.tabKey=2,e.getCustomList()),e.$forceUpdate()}else this.tabKey=1,this.ws.setCallback(this.websocketOnMessage),this.getList()}},d=p,m=(a("3273"),a("2877")),u=Object(m["a"])(d,s,i,!1,null,"69a7e8e8",null);e["default"]=u.exports},a674:function(t,e,a){e=t.exports=a("2350")(!1),e.push([t.i,"[data-v-69a7e8e8] .ant-card-bordered{border:0}.tpl-title[data-v-69a7e8e8]{float:left;font-size:16px;vertical-align:top}.content-bd[data-v-69a7e8e8]{background:#fff;min-height:120px;border:1px solid #e2e2e2;min-width:885px;margin:0 20px 60px}[data-v-69a7e8e8] .dark-row{background:#fafafa}[data-v-69a7e8e8] .light-row{background:#fff}[data-v-69a7e8e8] .ant-tabs-bar{padding:0 20px!important;background:none!important;margin:0!important}.content-msg[data-v-69a7e8e8]{border:1px solid #ffdda6;background:#fff2db;padding:10px;text-align:left;margin:0 0 20px}[data-v-69a7e8e8] .ant-table-placeholder{border-bottom:0}[data-v-69a7e8e8] .ant-tabs-top-content{padding-bottom:0}.tabBtn[data-v-69a7e8e8]{margin:0;margin-right:2px;padding:10px 16px;line-height:38px;background:#fafafa;border:1px solid #e8e8e8;border-bottom:0;border-radius:4px 4px 0 0;cursor:pointer}.activeBtn[data-v-69a7e8e8]{color:#1890ff;background:#fff}",""])}}]);