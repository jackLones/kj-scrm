(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-16a69232"],{2870:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"list"},[s("a-layout",{staticClass:"fans-content"},[s("a-layout",{staticClass:"scroll"},[s("a-layout-header",[t._v("坐席员工")]),s("a-layout-content",[s("div",{staticClass:"content_table"},[s("div",{staticClass:"search_card"},[s("div",{staticClass:"search_content"},[s("a-input",{attrs:{placeholder:"请输入成员名称或手机号进行查找"},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.getList(e)}},model:{value:t.listQuery.keyword,callback:function(e){t.$set(t.listQuery,"keyword","string"===typeof e?e.trim():e)},expression:"listQuery.keyword"}})],1),s("div",{staticClass:"search_content",staticStyle:{width:"10%"}},[s("a-select",{attrs:{showSearch:"",allowClear:"",placeholder:"请选择状态",optionFilterProp:"children"},model:{value:t.listQuery.status,callback:function(e){t.$set(t.listQuery,"status",e)},expression:"listQuery.status"}},[t._l(t.statusList,(function(e){return[s("a-select-option",{attrs:{value:e.value}},[t._v("\n\t\t\t\t\t\t\t\t\t\t"+t._s(e.title)+"\n\t\t\t\t\t\t\t\t\t")])]}))],2)],1),s("div",{staticClass:"search_content",staticStyle:{width:"auto","text-align":"left"}},[s("a-button",{attrs:{type:"primary"},on:{click:function(e){return t.getList()}}},[t._v("查找\n\t\t\t\t\t\t\t")]),s("a-button",{staticStyle:{margin:"0 0.5rem"},on:{click:function(e){return t.clear()}}},[t._v("清空")])],1),s("a-button",{staticStyle:{position:"absolute",right:"14px"},attrs:{type:"primary"},on:{click:function(e){return t.addStaff()}}},[t._v("添加员工坐席\n\t\t\t\t\t\t")])],1),s("a-spin",{attrs:{tip:"Loading...",size:"large",spinning:t.isLoading}},[s("a-table",{attrs:{"data-source":t.recordList,pagination:!1,rowClassName:t.rowClassName}},[s("a-table-column",{key:"task_type",attrs:{title:"成员/坐席号","data-index":"tags"},scopedSlots:t._u([{key:"default",fn:function(e,i){return[s("div",{staticStyle:{display:"flex","justify-content":"flex-start"}},[s("div",[i.avatar?s("a-avatar",{attrs:{shape:"square",size:42,src:i.avatar}}):t._e(),i.avatar?t._e():s("img",{staticStyle:{width:"42px",height:"42px"},attrs:{src:a("4bef")}})],1),s("div",{staticStyle:{"margin-left":"10px"}},[s("span",[t._v(t._s(i.user_name+"("+i.department+")"))]),1==i.gender?s("a-icon",{staticStyle:{color:"#427EBA","margin-left":"0.2rem"},attrs:{type:"man"}}):t._e(),0==i.gender?s("a-icon",{staticStyle:{color:"#ED4997","margin-left":"0.2rem"},attrs:{type:"woman"}}):t._e(),s("div",[s("a-tag",{attrs:{color:"orange"}},[t._v("\n\t\t\t\t\t\t\t\t\t\t\t\t\t"+t._s(i.exten)+"\n\t\t\t\t\t\t\t\t\t\t\t\t")])],1)],1)])]}}])}),s("a-table-column",{key:"task_type2",attrs:{title:"外呼手机号","data-index":"tags2"},scopedSlots:t._u([{key:"default",fn:function(e,a){return[s("span",[t._v(t._s(a.small_phone?a.small_phone:"--"))])]}}])}),s("a-table-column",{key:"task_type1",attrs:{title:"话费消耗","data-index":"tags"},scopedSlots:t._u([{key:"default",fn:function(e,a){return[s("span",[t._v("￥"+t._s(a.phone_money?a.phone_money:"--"))])]}}])}),s("a-table-column",{key:"duration_turth",attrs:{title:"实际通话时长","data-index":"duration_turth"},scopedSlots:t._u([{key:"default",fn:function(e,a){return[s("span",[t._v(t._s(a.duration_turth?a.duration_turth:"--"))])]}}])}),s("a-table-column",{key:"duration",attrs:{"data-index":"duration"},scopedSlots:t._u([{key:"default",fn:function(e,a){return[s("span",[t._v(t._s(a.duration?a.duration:"--"))])]}}])},[s("span",{attrs:{slot:"title"},slot:"title"},[t._v("计费通话时长\n\t\t\t\t\t\t\t\t\t"),s("a-tooltip",{attrs:{placement:"bottom"}},[s("template",{slot:"title"},[s("span",[t._v("根据运营商要求，通话不满一分钟按一分钟计算。")])]),s("a-icon",{staticStyle:{"margin-left":"5px"},attrs:{type:"question-circle"}})],2)],1)]),s("a-table-column",{key:"member2",attrs:{title:"状态","data-index":"tags"},scopedSlots:t._u([{key:"default",fn:function(e,a){return[t._v("\n\t\t\t\t\t\t\t\t\t"+t._s(1==a.status?"启用":"禁用")+"\n\t\t\t\t\t\t\t\t")]}}])}),s("a-table-column",{key:"action",attrs:{title:"操作","data-index":"action"},scopedSlots:t._u([{key:"default",fn:function(e,a){return[1==a.status?s("a-button",{staticStyle:{"margin-right":"5px"},on:{click:function(e){return t.seatOperation(a,1)}}},[t._v("\n\t\t\t\t\t\t\t\t\t\t禁用\n\t\t\t\t\t\t\t\t\t")]):t._e(),2==a.status?s("a-button",{staticStyle:{"margin-right":"5px"},on:{click:function(e){return t.seatOperation(a,2)}}},[t._v("\n\t\t\t\t\t\t\t\t\t\t启用\n\t\t\t\t\t\t\t\t\t")]):t._e(),s("a-button",{staticStyle:{"margin-right":"5px"},on:{click:function(e){return t.goDetail(3,a)}}},[t._v("外呼明细")])]}}])})],1)],1),t.recordList.length>0?s("div",{staticClass:"pagination",staticStyle:{display:"flex","justify-content":"space-between",margin:"20px 0"}},[s("div",{staticStyle:{height:"32px","line-height":"32px"}},[t._v("\n\t\t\t\t\t\t\t共"),s("span",{staticStyle:{color:"blue"}},[t._v(t._s(t.total))]),t._v("条\n\t\t\t\t\t\t")]),s("div",{staticStyle:{height:"32px"}},[s("a-pagination",{attrs:{total:t.total,showSizeChanger:"",showQuickJumper:!1,current:1,pageSize:t.listQuery.page_size,pageSizeOptions:["15","30","50","100"]},on:{change:t.changePage,showSizeChange:t.showSizeChange},model:{value:t.listQuery.page,callback:function(e){t.$set(t.listQuery,"page",e)},expression:"listQuery.page"}})],1)]):t._e()],1)])],1)],1),s("a-modal",{attrs:{title:t.isTransform?"坐席转移":"添加员工坐席",visible:t.showAddStaffSeat},on:{ok:t.confirmAddStaffSeat,cancel:t.handleCancelModal}},[s("a-form-model",{ref:"ruleForm2",attrs:{layout:"horizontal",model:t.addSeatForm}},[s("div",{staticStyle:{color:"red","margin-left":"0.853rem"}},[t._v("\n\t\t\t\t开通坐席号或需增加坐席号时，请联系渠道经理\n\t\t\t")]),t.isTransform?t._e():s("a-form-model-item",{staticStyle:{margin:"1rem 0"},attrs:{label:"选择坐席号","label-col":{span:5},"wrapper-col":{span:13},prop:"name"}},[s("a-select",{attrs:{showSearch:"",allowClear:"",placeholder:"请选择坐席号",optionFilterProp:"children"},on:{change:t.changeSeat},model:{value:t.addSeatForm.exten,callback:function(e){t.$set(t.addSeatForm,"exten",e)},expression:"addSeatForm.exten"}},[t._l(t.seatList,(function(e,a){return[s("a-select-option",{key:a,attrs:{value:e.exten}},[t._v("\n\t\t\t\t\t\t\t"+t._s(e.exten)+"\n\t\t\t\t\t\t")])]}))],2),""!=t.phoneNum?s("div",[t._v("\n\t\t\t\t\t该坐席号对应外呼手机号："+t._s(t.phoneNum)+"\n\t\t\t\t")]):t._e()],1),t.isTransform?s("a-form-model-item",{attrs:{label:"当前成员","label-col":{span:5},"wrapper-col":{span:13}}},[s("span",[t._v(t._s(this.selectedStaff.user_name))])]):t._e(),s("a-form-model-item",{attrs:{label:"坐席成员","label-col":{span:5},"wrapper-col":{span:13}}},[s("chooseStaffSelect",{ref:"staffSelected",attrs:{callback:t.replyMsg,isAll:1,ignore_dialout:1}})],1)],1)],1)],1)},i=[],n=(a("20d6"),a("96cf"),a("3b8d")),r=a("95204"),o={page:1,page_size:15,corp_id:localStorage.getItem("corpId"),status:1},l={components:{chooseStaffSelect:r["a"]},data:function(){return{total:0,listQuery:Object.assign({},o),statusList:[{value:0,title:"成员状态"},{value:1,title:"启用"},{value:2,title:"禁用"}],isLoading:!1,recordList:[],seatList:[],showAddStaffSeat:!1,isTransform:!1,addSeatForm:{},phoneNum:"",currentStaff:"",selectedStaff:{}}},mounted:function(){this.getList()},methods:{getList:function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(){var e,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.isLoading=!0,t.next=3,this.axios.post("dialout/exten-user-list",this.listQuery);case 3:e=t.sent,a=e.data,0!=a.error?this.$message.error(a.error_msg):(this.total=parseInt(a.data.count),this.recordList=a.data.list),this.isLoading=!1;case 7:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),clear:function(){this.listQuery=Object.assign({},o),this.getList()},replyMsg:function(t,e,a,s){this.addSeatForm.user_id=e},addStaff:function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(){var e,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.showAddStaffSeat=!0,this.isTransform=!1,t.next=4,this.axios.post("dialout/get-usable-exten",{corp_id:localStorage.getItem("corpId")});case 4:e=t.sent,a=e.data,0!=a.error?(this.isLoading=!1,this.$message.error(a.error_msg)):this.seatList=a.data.list;case 7:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),changeSeat:function(){var t=this,e=JSON.parse(JSON.stringify(this.seatList)),a=e.findIndex((function(e){return e.exten==t.addSeatForm.exten}));-1!=a&&(this.phoneNum=e[a].small_phone,this.$forceUpdate())},confirmAddStaffSeat:function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(){var e,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!this.isTransform){t.next=3;break}return this.confirmOperation(this.selectedStaff.id,3),t.abrupt("return");case 3:return this.addSeatForm.corp_id=localStorage.getItem("corpId"),t.next=6,this.axios.post("dialout/bind-exten",this.addSeatForm);case 6:e=t.sent,a=e.data,0!=a.error?this.$message.error(a.error_msg):(this.getList(),this.showAddStaffSeat=!1);case 9:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),seatOperation:function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(e,a){var s,i,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return s=this,this.selectedStaff=e,t.next=4,this.axios.post("dialout/cheak-state",{corp_id:localStorage.getItem("corpId"),id:e.id,option_type:a});case 4:i=t.sent,n=i.data,0!=n.error?(this.isLoading=!1,this.$message.error(n.error_msg)):(1==n.data.state&&1==a?n.data.msg="禁用后，【"+this.selectedStaff.user_name+"】没有外呼客户的权限，且坐席管理中对应坐席将一同被禁用。确定禁用吗":2==n.data.state&&1==a?n.data.msg="【"+n.data.user_name+"】正在通话中，不可禁用":2==n.data.state&&2==a?n.data.msg="【"+n.data.user_name+"】正在通话中，不可启用":2==n.data.state&&3==a&&(n.data.msg="【"+n.data.user_name+"】正在通话中，不可转移给其他员工使用"),this.$confirm({title:n.data.msg,okText:"确定",okType:"primary",cancelText:"取消",onOk:function(){if(3==a)return s.isTransform=!0,void(s.showAddStaffSeat=!0);s.confirmOperation(e.id,a)}}));case 7:case"end":return t.stop()}}),t,this)})));function e(e,a){return t.apply(this,arguments)}return e}(),confirmOperation:function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(e,a){var s,i,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return s=1==a?"forbidden":2==a?"open":"shift-exten",t.next=3,this.axios.post("/dialout/"+s,{corp_id:localStorage.getItem("corpId"),id:e,user_id:this.addSeatForm.user_id});case 3:i=t.sent,n=i.data,0!=n.error?this.$message.error(n.error_msg):(this.showAddStaffSeat=!1,this.getList());case 6:case"end":return t.stop()}}),t,this)})));function e(e,a){return t.apply(this,arguments)}return e}(),handleCancelModal:function(){this.addSeatForm={},this.showAddStaffSeat=!1},goDetail:function(t,e){this.$router.push({path:"/call/accountBalance",query:{type:t,from:"callStaff",id:e.id}})},rowClassName:function(t,e){var a="dark-row";return e%2===0&&(a="light-row"),a},changePage:function(){this.getList()},showSizeChange:function(t,e){this.listQuery.page_size=e,this.getList()}}},c=l,u=(a("8bb7"),a("2877")),d=Object(u["a"])(c,s,i,!1,null,"88291ea4",null);e["default"]=d.exports},"4bef":function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAQAAADZc7J/AAABAElEQVR42s3VIY7CUBAG4LkEliC4xKJ6BA6AognXQBLCAVBYNBK3pim7zP8XBAJHSLhAZVURi+jC2+681xD4R89nZiYjIhojQRlQicYiolFQ8600EqZNAKbSpB0lyqcCBeYccIA5ihDgtO3JLdseTr7Ap9wFRx+g2HTuge8PH+AsjuBiBzZO4MsOHJzAwQ7kTiD3mcLsoX3muQcaV9s1DtnENUfssssR1i+6hRcD3GPFBaeccoEV9z7AUodoP4yxrUMs/wd26EtN0MeuBuBYDOH4LyDPWhYga1WXugpMxBhMnIBGVqD6S34B9nqvTUwaAUnNpZue689/DnuwTDUSuQJ1pL7YQ6lKkQAAAABJRU5ErkJggg=="},"648f":function(t,e,a){var s=a("92e0");"string"===typeof s&&(s=[[t.i,s,""]]),s.locals&&(t.exports=s.locals);var i=a("499e").default;i("9ee9a3e4",s,!0,{sourceMap:!1,shadowMode:!1})},"8bb7":function(t,e,a){"use strict";var s=a("648f"),i=a.n(s);i.a},"92e0":function(t,e,a){e=t.exports=a("2350")(!1),e.push([t.i,"[data-v-88291ea4] .dark-row{background:#fafafa}[data-v-88291ea4] .light-row{background:#fff}.list[data-v-88291ea4]{overflow-y:hidden}.fans-content[data-v-88291ea4]{height:100%;position:absolute;top:0;left:0;bottom:0;right:0}.ant-layout-header[data-v-88291ea4]{background:#fff;border-bottom:1px solid #e2e2e2;height:50px;min-width:885px;width:100%;line-height:50px;font-size:16px;padding:0 20px}.search_card[data-v-88291ea4]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:start;-ms-flex-pack:start;justify-content:flex-start;-ms-flex-wrap:wrap;flex-wrap:wrap;-webkit-box-align:center;-ms-flex-align:center;align-items:center;margin-bottom:16px}.search_card .search_content[data-v-88291ea4]{width:20%}.search_card .search_content .ant-input[data-v-88291ea4]{width:96%}.search_card .search_content .ant-select[data-v-88291ea4]{width:90%}.search_card .search_content .ant-radio-button-wrapper[data-v-88291ea4]{width:4rem;text-align:center}.static[data-v-88291ea4]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:start;-ms-flex-pack:start;justify-content:flex-start;-webkit-box-align:center;-ms-flex-align:center;align-items:center;margin-top:2rem}.static .static_content[data-v-88291ea4]{background-color:#ececec;width:12.213rem;height:5.76rem;padding:.64rem 1.067rem;margin-right:16px}.content_table[data-v-88291ea4]{padding:16px;margin:auto}",""])},95204:function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("a-select",{staticStyle:{width:"100%"},attrs:{showSearch:"",optionFilterProp:"children",filterOption:!1,placeholder:2==t.type?"请选择导购":"请选择企业成员",disabled:t.disabled},on:{focus:t.focusSelect,select:t.changeSelect,popupScroll:t.popScroll,search:t.searchName},scopedSlots:t._u([{key:"dropdownRender",fn:function(e){return a("div",{},[a("v-nodes",{attrs:{vnodes:e}}),a("a-spin",{staticStyle:{position:"absolute",bottom:"50%",left:"0",right:"0"},attrs:{tip:"Loading...",size:"large",spinning:t.isLoading}})],1)}}]),model:{value:t.userId,callback:function(e){t.userId=e},expression:"userId"}},t._l(t.userList,(function(e,s){return a("a-select-option",{key:2==t.type?s:e.id},[t._v("\n\t\t\t"+t._s(e.name)),2==t.type&&e.group_name?a("span",[t._v("("+t._s(e.group_name)+")")]):t._e()])})),1)],1)},i=[],n=(a("96cf"),a("3b8d")),r=(a("c5f6"),{props:{callback:{type:Function,default:null},index:{type:Number,default:-1},index2:{type:Number,default:-1},disabled:{type:Boolean,default:!1},getFisrstStaff:{type:Boolean,default:!1},type:{type:Number,default:0},ignore_dialout:{type:Number,default:0}},components:{VNodes:{functional:!0,render:function(t,e){return e.props.vnodes}}},data:function(){var t=localStorage.getItem("corpId")?localStorage.getItem("corpId"):"";return{corpId:t,userList:[],userId:[],userName:"",page:1,count:0,isLoading:!1}},created:function(){var t=this;this.$nextTick((function(){t.getAllStaffList()}))},mounted:function(){},methods:{getAllStaffList:function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(){var e,a,s,i,n,r=arguments;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=r.length>0&&void 0!==r[0]?r[0]:1,this.isLoading=!0,2==this.type?(a={corp_id:this.corpId,guide_keyword:this.userName,operator:0,page:e,page_size:10},s="shop-customer-guide/list"):(a={corp_id:this.corpId,name:this.userName,user_id:this.userId,is_all:0,page:e,ignore_dialout:this.ignore_dialout},1==this.type&&(a.sub_id=localStorage.getItem("sub_id"),a.isMasterAccount=localStorage.getItem("isMasterAccount")),s="work-user/get-all-user"),t.next=5,this.axios.post(s,a);case 5:i=t.sent,n=i.data,0!=n.error?(this.isLoading=!1,this.$message.error(n.error_msg)):(this.isLoading=!1,this.count=n.data.count,this.getFisrstStaff&&(this.userId=n.data.info[0].id,null!==this.callback&&"function"===typeof this.callback&&(-1===this.index&&-1===this.index2?this.callback("ok",n.data.info[0].id):this.callback("ok",n.data.info[0].id,this.index,this.index2,n.data.info[0]))),1==e?2==this.type?this.userList=n.data.result:this.userList=n.data.info:2==this.type?this.userList=this.userList.concat(n.data.result):this.userList=this.userList.concat(n.data.info),this.page=e);case 8:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),changeSelect:function(t){null!==this.callback&&"function"===typeof this.callback&&(2==this.type?-1===this.index&&-1===this.index2?this.callback("ok",this.userList[t].id):this.callback("ok",this.userList[t].id,this.index,this.index2,this.userList[t]):-1===this.index&&-1===this.index2?this.callback("ok",t):this.callback("ok",t,this.index,this.index2))},focusSelect:function(){""!=this.userName&&(this.page=1,this.userList=[],this.userName="",this.getAllStaffList())},searchName:function(t){this.userName=t,this.getAllStaffList()},popScroll:function(t){var e=t.target;e.scrollTop+e.offsetHeight===e.scrollHeight&&this.userList.length<this.count&&(this.page++,this.getAllStaffList(this.page))}},watch:{userId:{handler:function(t){this.getAllStaffList()},deep:!0},getFisrstStaff:{handler:function(t){this.getAllStaffList()},deep:!0}}}),o=r,l=a("2877"),c=Object(l["a"])(o,s,i,!1,null,"2fbfc039",null);e["a"]=c.exports}}]);