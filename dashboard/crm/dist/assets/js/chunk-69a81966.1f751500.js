(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-69a81966"],{"69f5":function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABYAAAAWCAQAAABuvaSwAAAAY0lEQVR42r2SQQ1AIQxDkYIEJCFlacMdR+CIOeAnYKAkH7brO7x1DeHplFSSiLJycrJq8Nyrwb5gF43R0WXrW4OMgYF8cCDG/2kg0+mixs0asbGJTzlL46hItmATrS1afJvTB40bQb8Be38ZAAAAAElFTkSuQmCC"},d874:function(t,e,s){var i=s("da9f");"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var a=s("499e").default;a("6d1361ae",i,!0,{sourceMap:!1,shadowMode:!1})},da9f:function(t,e,s){e=t.exports=s("2350")(!1),e.push([t.i,".sider-content[data-v-7d2004ba]{float:left;width:100%;width:calc(100% - 3px);width:-webkit-calc(100% - 3px);height:100%;max-height:100%;overflow:hidden}.scroll-content[data-v-7d2004ba]{width:calc(100% - 40px);height:calc(100% - 162px);overflow:hidden;position:absolute;top:162px}.scro-right[data-v-7d2004ba]{position:relative;float:right;height:100%;background-color:#fff}.scro-line[data-v-7d2004ba],.scro-right[data-v-7d2004ba]{width:3px;overflow:hidden}.scro-line[data-v-7d2004ba]{position:absolute;z-index:1;top:0;right:0;border-radius:3px;background-color:#d3d3d3}.sider-one[data-v-7d2004ba]{padding:0 20px;height:100%;overflow-y:hidden}.sider-one-txt[data-v-7d2004ba]{height:60px;line-height:60px;text-align:left;overflow-y:hidden}.team[data-v-7d2004ba]{width:100%;padding:0 10px}.team[data-v-7d2004ba],.team-type[data-v-7d2004ba]{height:50px;line-height:50px}.team-type[data-v-7d2004ba]{display:inline-block;margin-right:20px;min-width:60px;text-align:center}.team-add[data-v-7d2004ba]{width:calc(100% - 3px);height:50px;line-height:50px;background-color:#f5f5f5}.team-name[data-v-7d2004ba]{display:inline-block;width:160px;overflow:hidden;white-space:nowrap;text-overflow:ellipsis}.team-add-title[data-v-7d2004ba]{display:inline-block;margin-left:76px}.team-add-icon[data-v-7d2004ba]{float:right;color:#1e90ff;margin-top:18px;margin-right:20px;cursor:pointer}.team-operation[data-v-7d2004ba]{margin-top:4px;cursor:pointer;margin-bottom:8px!important}.team-operation1[data-v-7d2004ba]{margin-top:4px;cursor:pointer;margin-bottom:4px!important}.team-operation[data-v-7d2004ba]:hover{color:#1890ff}.active-key[data-v-7d2004ba]{border-bottom:2px solid #1e90ff;color:#1e90ff}.active[data-v-7d2004ba]{background:#1e90ff;color:#fff}[data-v-7d2004ba] .ant-popover-inner .ant-popover-inner-content .ant-popover-buttons,[data-v-7d2004ba] .ant-tooltip-placement-bottom .ant-tooltip-arrow{display:none!important}",""])},ee0a:function(t,e,s){"use strict";var i=s("d874"),a=s.n(i);a.a},f467:function(t,e,s){"use strict";var i=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"sider-one"},[i("div",{staticClass:"sider-one-txt"},[t._v("选择企业微信")]),i("a-select",{staticStyle:{width:"200px","margin-bottom":"20px"},attrs:{showSearch:"",optionFilterProp:"children"},on:{change:t.handleChange},model:{value:t.corpId,callback:function(e){t.corpId=e},expression:"corpId"}},[t._l(t.corpInfo,(function(e){return[i("a-select-option",{attrs:{value:e.corpid}},[t._v(t._s(e.corp_full_name||e.corp_name))])]}))],2),i("div",{staticClass:"team-add"},[i("span",{staticClass:"team-add-title"},[t._v("分组管理")]),i("a-icon",{directives:[{name:"has",rawName:"v-has",value:t.hasAddName,expression:"hasAddName"}],staticClass:"team-add-icon",attrs:{type:"plus"},on:{click:t.addTeamModal}})],1),i("div",{directives:[{name:"has",rawName:"v-has",value:t.hasGroupName,expression:"hasGroupName"}],ref:"scroll",staticClass:"sider-content scroll-content",on:{mousewheel:t.scrollWheel,mouseover:t.scrollOver,mouseout:t.scrollOut,mousemove:t.scroLineMove,mouseup:t.scroLineUp}},[i("div",{ref:"scroLeft",staticClass:"sider-content"},[i("div",{staticStyle:{width:"100%"}},[2==t.type&&"/group/groupTag"!=this.$route.path?i("div",{staticClass:"team",class:{active:0==t.teamId},on:{click:function(e){return t.selectTeam(0,"所有分组")}}},[i("label",{staticClass:"team-name"},[t._v("所有分组")])]):t._e(),i("vuedraggable",{on:{end:t.changeGroupSort},model:{value:t.teamsList1,callback:function(e){t.teamsList1=e},expression:"teamsList1"}},[t._l(t.teamsList1,(function(e,a){return[i("div",{staticClass:"team",class:{active:t.teamId==e.id},on:{click:function(s){return t.selectTeam(e.id,e.group_name)},mouseleave:t.hideTip,mouseover:function(s){return t.showOperation(e.id)}}},[i("a-popover",[i("template",{slot:"content"},[t._v("\n                                        "+t._s(e.group_name)+"\n                                    ")]),i("label",{staticClass:"team-name"},[t._v(t._s(e.group_name))])],2),t.mouseOverId==e.id&&"未分组"!=e.group_name&&t.isShowPop?i("a-popover",{staticStyle:{display:"inline-block",float:"right",cursor:"pointer"},attrs:{placement:"right",trigger:"hover"}},[i("template",{slot:"content"},[i("div",{staticStyle:{width:"100%","text-align":"center"},on:{mouseover:t.showTip,mouseleave:t.hidePopover}},[i("p",{directives:[{name:"has",rawName:"v-has",value:t.hasEditName,expression:"hasEditName"}],staticClass:"team-operation",on:{click:function(e){return t.editTeamName(a)}}},[t._v("\n                                                编辑小组")]),i("p",{directives:[{name:"has",rawName:"v-has",value:t.hasDeleteName,expression:"hasDeleteName"}],staticClass:"team-operation1",on:{click:function(s){return t.removeTeam(e.id,e.group_name)}}},[t._v("\n                                                删除小组")])])]),i("img",{staticStyle:{float:"right","vertical-align":"middle","margin-top":"14px"},attrs:{src:s("69f5")}})],2):t._e()],1)]}))],2)],1)]),i("div",{ref:"scroRight",staticClass:"scro-right",on:{mouseup:t.jumpScroll}},[i("div",{directives:[{name:"show",rawName:"v-show",value:t.scrollFlag&&t.scroRight,expression:"scrollFlag && scroRight"}],ref:"scroLine",staticClass:"scro-line",on:{mousedown:t.scroLineDown}})])]),i("a-modal",{attrs:{title:t.title,destroyOnClose:!0,visible:t.visible,confirmLoading:t.confirmLoading},on:{ok:t.handleOk,cancel:t.handleCancel}},[i("a-form-item",{staticClass:"current0",attrs:{"label-col":{span:4},"wrapper-col":{span:20}}},[i("template",{slot:"label"},[i("span",{staticStyle:{color:"red"}},[t._v("*")]),t._v("分组名称\n                ")]),i("a-input",{attrs:{placeholder:"请输入分组名(不得超过15个字符)",maxLength:15},model:{value:t.teamName,callback:function(e){t.teamName=e},expression:"teamName"}},[i("span",{attrs:{slot:"suffix"},slot:"suffix"},[i("span",[t._v(t._s(t.teamName.length))]),t._v("/15\n\t\t\t\t\t")])])],2),0!=t.type||t.isEdit?t._e():i("a-form-item",{staticClass:"current0",attrs:{"label-col":{span:4},"wrapper-col":{span:20}}},[i("template",{slot:"label"},[i("span",{staticStyle:{color:"red"}},[t._v("*")]),t._v("标签名称\n                ")]),i("p",{staticStyle:{margin:"0px","font-size":"13px",color:"#909399"}},[t._v("\n                    每个标签名称最多15个字。同时新建多个标签时，请用“空格”隔开\n                ")]),i("a-input",{attrs:{placeholder:"请输入标签（不得超过15个字符）"},model:{value:t.inputValue,callback:function(e){t.inputValue=e},expression:"inputValue"}})],2)],1)],1)},a=[],r=(s("a481"),s("96cf"),s("3b8d")),o=(s("28a5"),s("b76a")),n=s.n(o),c={name:"team",components:{vuedraggable:n.a},props:{callback:{type:Function,default:null}},data:function(){var t=localStorage.getItem("corpId")?localStorage.getItem("corpId"):"";return{mouseEnterFlag:!1,startY:0,scrollFlag:!1,scroRight:!0,scrollOutFlag:!1,corpInfo:[],corpId:t,suite_id:1,key:1,visible:!1,editGroupId:"",title:"新建分组",teamsList:[],teamsList1:[],isEdit:!1,timeOut:"",teamId:"",mouseOverId:"",editFlag:!1,confirmLoading:!1,type:1,teamName:"",hasDeleteName:"",hasEditName:"",hasAddName:"",hasGroupName:"",isShowPop:!0,inputValue:"",newTagList:[]}},created:function(){if("/label/list"==this.$route.path?(this.type=1,this.hasDeleteName="work-tag-group-delete",this.hasEditName="work-tag-group-edit",this.hasAddName="work-tag-group-add",this.hasGroupName="work-tag-group"):"/customTags/list"==this.$route.path?(this.type=0,this.hasDeleteName="client-tag-group-del",this.hasEditName="client-tag-group-edit",this.hasAddName="client-tag-group-add",this.hasGroupName="client-tag-group"):"/group/groupTag"==this.$route.path?(this.type=2,this.hasDeleteName="groupTag-group-delete",this.hasEditName="groupTag-group-edit",this.hasAddName="groupTag-group-add",this.hasGroupName="groupTag-group-list"):"/group/list"==this.$route.path&&(this.type=2,this.hasDeleteName="groupList-del",this.hasEditName="groupList-edit",this.hasAddName="groupList-add",this.hasGroupName="groupList-group"),"all"==localStorage.getItem("permissionButton"))this.isShowPop=!0;else{var t=localStorage.getItem("permissionButton").split(",");-1==t.indexOf(this.hasDeleteName)&&-1==t.indexOf(this.hasEditName)?this.isShowPop=!1:this.isShowPop=!0}},mounted:function(){var t=this;this.$store.dispatch("getCorp",(function(e){t.corpInfo=e,t.$emit("changeCorpId",t.corpId),t.getTeamsList();var s=new MutationObserver(t.setScroLineHeight);s.observe(t.$refs.scroLine,{attributes:!0,attributeFilter:["style"],attributeOldValue:!0}),t.setScroLineHeight(),t.initFirefoxScroll()}))},methods:{changeGroupSort:function(){this.sortGroup()},sortGroup:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(){var e,s,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=[],this.teamsList1.map((function(t){e.push(t.id)})),s="",2==this.type&&"/group/groupTag"!=this.$route.path?s="work-chat/chat-group-sort":1!=this.type&&0!=this.type&&"/group/groupTag"!=this.$route.path||(s="work-tag-group/group-sort"),t.next=6,this.axios.post(s,{ids:e,isMasterAccount:localStorage.getItem("isMasterAccount"),sub_id:localStorage.getItem("sub_id")});case 6:i=t.sent,i.data,this.getTeamsList();case 9:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),showOperation:function(t){clearTimeout(this.timeOut),this.mouseOverId=t},showTip:function(){clearTimeout(this.timeOut)},hideTip:function(){var t=this;this.timeOut=setTimeout((function(){t.mouseOverId=""}),500)},hidePopover:function(){this.mouseOverId=""},addTeamModal:function(){this.title="新增分组",this.teamName="",this.isEdit=!1,this.visible=!0},handleOk:function(){if(String.prototype.Trim=function(){return this.replace(/(^\s*)|(\s*$)/g,"")},this.teamName=this.teamName.Trim(),!this.teamName)return this.$message.destroy(),this.$message.error("请输入分组名"),!1;this.editGroupId?this.sureRemark():this.addTeam()},addTeam:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(){var e,s,i,a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e="",2!=this.type||"/group/groupTag"==this.$route.path){t.next=5;break}e="work-chat/chat-group-add",t.next=29;break;case 5:if(1!=this.type&&0!=this.type&&"/group/groupTag"!=this.$route.path){t.next=29;break}if(e="work-tag-group/add",0!=this.type){t.next=29;break}if(""!=this.inputValue){t.next=14;break}return this.$message.destroy(),this.$message.warning("标签名称不能为空"),t.abrupt("return",!1);case 14:s=JSON.parse(JSON.stringify(this.inputValue)).split(" "),this.newTagList=[],i=0;case 17:if(!(i<s.length)){t.next=29;break}if(!(s[i].length>15)){t.next=25;break}return this.$message.destroy(),this.$message.error("每个标签最多15个字"),this.inputValue="",t.abrupt("return",!1);case 25:s[i].length>0&&this.newTagList.push(s[i]);case 26:i++,t.next=17;break;case 29:return t.next=31,this.axios.post(e,{corp_id:this.corpId,id:this.editGroupId,suite_id:this.suite_id,name:this.teamName,type:this.type,isMasterAccount:localStorage.getItem("isMasterAccount"),sub_id:localStorage.getItem("sub_id"),tag_name:this.newTagList});case 31:a=t.sent,r=a.data,0!=r.error?(this.$message.destroy(),this.$message.error(r.error_msg)):(this.teamName="",this.newTagList=[],this.inputValue="",this.visible=!1,this.getTeamsList());case 34:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),handleCancel:function(){this.editGroupId="",this.newTagList=[],this.inputValue="",this.visible=!1},handleChange:function(t){var e=this;this.corpInfo.map((function(s){t==s.corpid&&e.$store.dispatch("changeCorp",s)})),this.isLoading=!0,this.teamId="",this.getTeamsList(),2==localStorage.getItem("isMasterAccount")&&this.$store.dispatch("getPermissionButton")},changetype:function(t){this.key=t},selectTeam:function(t,e){if(t==this.teamId)return!1;this.editFlag=!1,this.teamId=t,this.teamName=e,null!==this.callback&&"function"===typeof this.callback&&this.callback(this.corpId,this.suite_id,this.type,this.teamId,e)},sureRemark:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(){var e,s,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e="",2==this.type&&"/group/groupTag"!=this.$route.path?e="work-chat/chat-group-update":1!=this.type&&0!=this.type&&"/group/groupTag"!=this.$route.path||(e="work-tag-group/update"),t.next=4,this.axios.post(e,{id:this.editGroupId,name:this.teamName,type:this.type,isMasterAccount:localStorage.getItem("isMasterAccount"),sub_id:localStorage.getItem("sub_id")});case 4:s=t.sent,i=s.data,0!=i.error?(this.$message.destroy(),this.$message.error(i.error_msg)):(this.editGroupId="",this.visible=!1,this.getTeamsList());case 7:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),editTeamName:function(t){this.mouseOverId="",this.editGroupId=this.teamsList[t].id,this.title="编辑分组",this.teamName=this.teamsList[t].group_name,this.isEdit=!0,this.visible=!0},removeTeam:function(t,e){this.mouseOverId="";var s=this;s.$confirm({title:"【"+e+"】一旦删除，归属于该分组的"+(2==this.type?"群":"标签")+"都将被移至【未分组】，确定删除分组吗?",okText:"确定",okType:"primary",cancelText:"取消",onOk:function(){s.delTeam(t)}})},delTeam:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(e){var s,i,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return s="",2==this.type&&"/group/groupTag"!=this.$route.path?s="work-chat/chat-group-delete":1!=this.type&&0!=this.type&&"/group/groupTag"!=this.$route.path||(s="work-tag-group/delete"),t.next=4,this.axios.post(s,{id:e,corp_id:this.corpId,isMasterAccount:localStorage.getItem("isMasterAccount"),sub_id:localStorage.getItem("sub_id")});case 4:i=t.sent,a=i.data,0!=a.error?(this.$message.destroy(),this.$message.error(a.error_msg)):this.getTeamsList(e);case 7:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),getTeamsList:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(e){var s,i,a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return s={},i="",0==this.type||1==this.type||2==this.type&&"/group/groupTag"==this.$route.path?(s={corp_id:this.corpId,type:this.type,suite_id:this.suite_id,isMasterAccount:localStorage.getItem("isMasterAccount"),sub_id:localStorage.getItem("sub_id")},i="work-tag-group/list"):2==this.type&&"/group/groupTag"!=this.$route.path&&(s={corp_id:this.corpId},i="work-chat/chat-group-list"),t.next=5,this.axios.post(i,s);case 5:a=t.sent,r=a.data,0!=r.error?(this.isLoading=!1,this.$message.destroy(),this.$message.error(r.error_msg)):(this.isLoading=!1,this.teamsList=r.data.info,this.teamsList1=JSON.parse(JSON.stringify(this.teamsList)),this.teamId&&this.teamId!=e||(2!=this.type||"/group/groupTag"==this.$route.path?(this.teamId=this.teamsList[0].id,this.teamName=this.teamsList[0].group_name):(this.teamId=0,this.teamName="所有分组")),null!==this.callback&&"function"===typeof this.callback&&this.callback(this.corpId,this.suite_id,this.type,this.teamId,this.teamName));case 8:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),setScroLineHeight:function(){var t=this,e=0;e=t.$refs.scroLeft.clientHeight,e>=t.$refs.scroLeft.scrollHeight?t.scroRight=!1:(t.$refs.scroLine.style.height=(e-50)/t.$refs.scroLeft.scrollHeight*(t.$refs.scroRight.scrollHeight-50)+"px",t.scroRight=!0)},initFirefoxScroll:function(){var t=this;document.addEventListener&&document.addEventListener("DOMMouseScroll",(function(e){var s=window.event||e,i=t.$refs.scroLeft.scrollTop,a=t.$refs.scroLeft.scrollHeight-t.$refs.scroLeft.clientHeight;s.detail>=0?i+=80:i-=80,i<0&&(i=0),i>a-50&&(i=a),t.$refs.scroLeft.scrollTop=i;var r=i/a*this.$refs.scroRight.clientHeight-this.$refs.scroLine.clientHeight;i>0&&i<a-50&&(r=i/this.$refs.scroLeft.scrollHeight*this.$refs.scroRight.clientHeight),r>this.$refs.scroRight.clientHeight-this.$refs.scroLine.clientHeight&&(r=this.$refs.scroRight.clientHeight-this.$refs.scroLine.clientHeight),r<0&&(r=0),t.$refs.scroLine.style.top=r+"px"}),!1)},scrollWheel:function(){var t=t||(window.event?window.event:null),e=this.$refs.scroLeft.scrollTop,s=this.$refs.scroLeft.scrollHeight-this.$refs.scroLeft.clientHeight;t.wheelDelta,e-=.5*t.wheelDelta,e<0&&(e=0),e>s&&(e=s),this.$refs.scroLeft.scrollTop=e;var i=e/s*this.$refs.scroRight.clientHeight-this.$refs.scroLine.clientHeight;e>0&&e<s&&(i=e/this.$refs.scroLeft.scrollHeight*this.$refs.scroRight.clientHeight),i<0&&(i=0),this.$refs.scroLine.style.top=i+"px"},jumpScroll:function(){var t=this;if(!t.mouseEnterFlag){var e=e||(window.event?window.event:null),s=t.$refs.scroLeft.scrollTop,i=t.$refs.scroLeft.scrollHeight-t.$refs.scroLeft.clientHeight;e.y,t.startY,s+=(e.y-t.startY)/t.$refs.scroLeft.clientHeight*t.$refs.scroLeft.scrollHeight,t.$refs.scroLeft.scrollTop=s,s<0&&(s=0),s>i&&(s=i);var a=s/i*this.$refs.scroRight.clientHeight-this.$refs.scroLine.clientHeight;s>0&&s<i&&(a=s/this.$refs.scroLeft.scrollHeight*this.$refs.scroRight.clientHeight),a<0&&(a=0),t.$refs.scroLine.style.top=a+"px",t.startY=e.y}},scroLineDown:function(){this.mouseEnterFlag=!0,this.startY=event.y,window.addEventListener&&(window.addEventListener("mouseup",this.scroLineUp,!1),window.addEventListener("mousemove",this.scroLineMove,!1)),this.$emit("banUserSelect")},scroLineMove:function(){var t=this;if(t.mouseEnterFlag){var e=e||(window.event?window.event:null),s=t.$refs.scroLeft.scrollTop,i=t.$refs.scroLeft.scrollHeight-t.$refs.scroLeft.clientHeight,a=(e.y-t.startY)/t.$refs.scroLeft.clientHeight*t.$refs.scroLeft.scrollHeight;s+=a,t.$refs.scroLeft.scrollTop=s,s<0&&(s=0),s>i&&(s=i);var r=s/i*this.$refs.scroRight.clientHeight-this.$refs.scroLine.clientHeight;s>0&&s<i&&(r=s/this.$refs.scroLeft.scrollHeight*this.$refs.scroRight.clientHeight),r<0&&(r=0),t.$refs.scroLine.style.top=r+"px",t.startY=e.y}},scroLineUp:function(){if(1==this.mouseEnterFlag){var t=t||(window.event?window.event:null);this.mouseEnterFlag=!1,this.changeWidthSmallFlag&&(this.changeWidthSmall(),this.changeWidthSmallFlag=!1),this.scrollOutFlag&&(this.scrollOut(),this.scrollOutFlag=!1),window.removeEventListener&&(window.removeEventListener("mouseup",this.scroLineUp,!1),window.removeEventListener("mousemove",this.scroLineMove,!1)),this.$emit("userSelect")}},scrollOver:function(){this.scrollFlag=!0},scrollOut:function(){this.mouseEnterFlag||(this.scrollFlag=!1),this.scrollOutFlag=!0}}},h=c,l=(s("ee0a"),s("2877")),p=Object(l["a"])(h,i,a,!1,null,"7d2004ba",null);e["a"]=p.exports}}]);