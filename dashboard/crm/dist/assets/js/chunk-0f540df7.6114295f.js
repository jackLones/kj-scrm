(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0f540df7"],{"166e":function(t,e,a){var i=a("fb10");"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var s=a("499e").default;s("42418184",i,!0,{sourceMap:!1,shadowMode:!1})},"2ff3":function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("a-modal",{attrs:{title:t.title,visible:t.visible,width:"800px"},on:{cancel:t.closePlayTags}},[a("template",{slot:"footer"},[a("a-button",{on:{click:t.closePlayTags}},[t._v("取消")]),a("a-button",{attrs:{type:"primary"},on:{click:t.playTags}},[t._v("确定")])],1),t.isTabs?a("div",{staticClass:"mb-10"},[a("a-radio-group",{on:{change:t.onChange},model:{value:t.type,callback:function(e){t.type=e},expression:"type"}},[a("a-radio-button",{staticStyle:{"min-width":"156px"},attrs:{value:1}},[a("a-icon",{attrs:{type:"check-circle",theme:"filled"}}),t._v("\n\t\t\t\t\t\t满足任意选中的标签\n\t\t\t\t\t")],1),a("a-radio-button",{staticStyle:{"min-width":"156px"},attrs:{value:2}},[a("a-icon",{attrs:{type:"check-circle",theme:"filled"}}),t._v("\n\t\t\t\t\t\t满足所有选中的标签\n\t\t\t\t\t")],1),a("a-radio-button",{staticStyle:{"min-width":"156px"},attrs:{value:3}},[a("a-icon",{attrs:{type:"check-circle",theme:"filled"}}),t._v("\n\t\t\t\t\t\t不包含选中的标签\n\t\t\t\t\t")],1)],1)],1):t._e(),t.visible&&t.groupList.length>0?a("div",{staticClass:"label-list"},[t._l(t.groupList,(function(e,i){return[t.isMore||!t.isMore&&i<5?a("div",{key:i,staticClass:"mb-10"},[a("span",{staticClass:"group-name mb-10"},[e.name&&""!=e.name?a("a-popover",{attrs:{trigger:"hover"}},[a("span",{staticStyle:{display:"inline-block","max-width":"500px","word-wrap":"break-word","word-break":"break-all"},attrs:{slot:"content"},slot:"content"},[t._v("\n\t\t\t\t\t\t\t"+t._s(e.name)+"\n\t\t\t\t\t\t")]),a("span",{staticStyle:{"font-weight":"700"}},[t._v(" "+t._s(e.name)+"：")])]):t._e()],1),t._l(e.data,(function(i,s){return a("span",{key:s},[a("a-checkable-tag",{staticClass:"h-30 l-h-30 mb-10",on:{change:function(e){return t.changeTags(i)}},model:{value:i.checked,callback:function(e){t.$set(i,"checked",e)},expression:"tag.checked"}},[t._v("\n\t\t\t\t\t\t"+t._s(i.tagname)+"\n\t\t\t\t\t")]),0==e.data.length?a("span",{staticStyle:{"margin-right":"8px"}},[t._v("暂无")]):t._e()],1)})),t.isTabs?t._e():a("a-button",{directives:[{name:"has",rawName:"v-has",value:"client-tag-add",expression:"'client-tag-add'"}],staticStyle:{"font-size":"13px",height:"30px",color:"#1E90FF","border-color":"#1E90FF"},attrs:{icon:"plus"},on:{click:function(a){return t.createTag(e.id)}}},[t._v("\n\t\t\t\t\t\t\t添加\n\t\t\t\t\t\t")])],2):t._e()]})),t.groupList.length>5?a("div",{staticStyle:{"font-size":"13px",height:"26px",color:"#1890FF","text-align":"center",cursor:"pointer"},on:{click:t.showMore}},[t.isMore?t._e():[t._v("更多")],t.isMore?[t._v("收起")]:t._e(),a("a-icon",{attrs:{type:t.isMore?"arrow-up":"arrow-down"}})],2):t._e()],2):t._e(),t.groupList.length>0&&!t.isTabs?a("a-button",{directives:[{name:"has",rawName:"v-has",value:"client-tag-group-add",expression:"'client-tag-group-add'"}],staticStyle:{"font-size":"13px",height:"26px","margin-right":"10px",color:"#1E90FF"},attrs:{icon:"plus"},on:{click:t.addTagGroup}},[t._v("\n\t\t\t\t新建标签组\n\t\t\t")]):t._e(),a("a-empty",{directives:[{name:"show",rawName:"v-show",value:0==t.groupList.length,expression:"groupList.length == 0"}]},[a("span",{attrs:{slot:"description"},slot:"description"},[t._v("\n\t\t\t\t    尚未创建标签，无法选择标签\n\t\t\t    ")])]),a("a-modal",{staticStyle:{height:"500px"},attrs:{title:"新建标签"},on:{ok:t.onSearch,cancel:t.addTagCancel},model:{value:t.addTagVisible,callback:function(e){t.addTagVisible=e},expression:"addTagVisible"}},[a("a-form-item",{attrs:{"label-col":{span:4},"wrapper-col":{span:20}}},[a("template",{slot:"label"},[t._v("\n\t\t\t\t\t\t标签名称\n\t\t\t\t\t")]),a("p",{staticStyle:{margin:"0px","font-size":"13px",color:"#909399"}},[t._v("\n\t\t\t\t\t\t每个标签名称最多15个字。同时新建多个标签时，请按回车键分割。\n\t\t\t\t\t")]),a("divInput",{ref:"divInput",attrs:{msg:t.tagValue,maxLength:15,placeholder:"请输入标签名,按回车键可输入多个标签名"},on:{func:t.getTagsList}})],2)],1),a("a-modal",{staticClass:"add-tag-group",attrs:{title:"新建标签组",visible:t.groupVisible,confirmLoading:t.confirmLoading},on:{ok:t.handleOk2,cancel:t.handleCancel}},[a("a-form-item",{staticClass:"current0",attrs:{"label-col":{span:4},"wrapper-col":{span:20}}},[a("template",{slot:"label"},[a("span",{staticStyle:{color:"red"}},[t._v("*")]),t._v("分组名称\n\t\t\t\t\t")]),a("a-input",{attrs:{placeholder:"请输入分组名(不得超过15个字符)",maxLength:15},model:{value:t.teamName,callback:function(e){t.teamName=e},expression:"teamName"}},[a("span",{attrs:{slot:"suffix"},slot:"suffix"},[a("span",[t._v(t._s(t.teamName.length))]),t._v("/15\n\t\t\t\t\t\t\t\t\t\t\t\t")])])],2),a("a-form-item",{staticClass:"current0",attrs:{"label-col":{span:4},"wrapper-col":{span:20}}},[a("template",{slot:"label"},[a("span",{staticStyle:{color:"red"}},[t._v("*")]),t._v("标签名称\n\t\t\t\t\t")]),a("p",{staticStyle:{margin:"0px","font-size":"13px",color:"#909399"}},[t._v("\n\t\t\t\t\t\t每个标签名称最多15个字。同时新建多个标签时，请按回车键分割。\n\t\t\t\t\t")]),a("divInput",{ref:"divInput",attrs:{msg:t.tagValue,maxLength:15,placeholder:"请输入标签名,按回车键可输入多个标签名"},on:{func:t.getTagsList}})],2)],1)],2)],1)},s=[],n=(a("28a5"),a("7618")),r=(a("ac4d"),a("8a81"),a("20d6"),a("96cf"),a("3b8d")),o=(a("a481"),a("c5f6"),a("ac6a"),a("2ef0")),c=a.n(o),l=a("eaaf"),d={name:"labels1",components:{divInput:l["a"]},watch:{isTabs:function(t){var e=this;t&&this.groupList.forEach((function(t){t.data.forEach((function(t){e.$set(t,"checked",!1)}))}))},selectedTags:{handler:function(t){this.selectedTags=t},deep:!0}},props:{flag:{type:Boolean,default:!1},title:{type:String,default:"为筛选出的所有客户增加标签"},isExcel:{type:Boolean,default:!1},isNotAdd:{type:Number,default:1},currentTab:{type:Number,default:1},selectedIds:{type:Array,default:function(){return[]}},visible:{type:Boolean,default:!1},tagsList:{type:Array,default:function(){return[]}},selectedTags:{type:Array,default:function(){return[]}},tagCheckIndex:{type:Number,default:0},isTabs:{type:Boolean,default:!1},tagLoading:{type:Boolean,default:!1},gid:{type:String||Number,default:"-1"}},data:function(){var t=localStorage.getItem("corpId")?localStorage.getItem("corpId"):"";return{tagNameStr:"",confirmLoading:!1,newTagList2:[],teamName:"",inputValue2:"",groupVisible:!1,inverseSelectedIds:[],ids:[],reserveSelectValue:[],corp_id:t,tagValue:[],editGroupId:"",group_id:"",addTagVisible:!1,inputValue:"",isScreen:!1,type:1,isMore:!1,groupList:[]}},mounted:function(){this.type=this.currentTab,this.getTags()},methods:{getTagsList:function(t,e){this.tagNameStr=e.replace(/\s+/g,""),this.tagValue=[];for(var a=0;a<t.length;a++)this.tagValue.push(t[a].replace(/\s+/,""))},addTagGroup:function(){this.groupVisible=!0},handleCancel:function(){this.tagValue=[],this.$refs.divInput.msgTitle="",this.tagNameStr="",this.teamName="",this.groupVisible=!1},handleOk2:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(){var e,a,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(String.prototype.Trim=function(){return this.replace(/(^\s*)|(\s*$)/g,"")},this.teamName=this.teamName.Trim(),this.teamName){t.next=5;break}return this.$message.error("请输入分组名"),t.abrupt("return");case 5:if(0!=this.tagNameStr.trim().length||0!=this.tagValue.length){t.next=8;break}return this.$message.error("请输入标签名称"),t.abrupt("return");case 8:return e=JSON.parse(JSON.stringify(this.tagValue)),0!=this.tagNameStr.trim().length&&e.push(this.tagNameStr.trim()),this.confirmLoading=!0,t.next=13,this.axios.post("work-tag-group/add",{corp_id:this.corp_id,suite_id:1,name:this.teamName,type:0,isMasterAccount:localStorage.getItem("isMasterAccount"),sub_id:localStorage.getItem("sub_id"),tag_name:e});case 13:a=t.sent,i=a.data,0!=i.error?this.$message.error(i.error_msg):(this.$refs.divInput.msgTitle="",this.teamName="",this.newTagList2=[],this.inputValue2="",this.tagValue=[],this.tagNameStr="",this.groupVisible=!1,this.getTags()),this.confirmLoading=!1;case 17:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),closePlayTags:function(){3==this.type&&this.inverseSelect(),this.$emit("closePlayTags")},playTags:function(){if(this.isTabs)3==this.type&&this.inverseSelect(),this.$emit("playTags",{currentTab:this.type,ids:this.selectedIds});else{if(this.flag);else if(0==this.lookCheckedTagLength())return this.$message.warning("至少选择一个标签!");this.ids=this.getSelectedTagIds(this.groupList),this.$emit("playTags",{currentTab:this.type,ids:this.ids})}},getSelectedTagIds:function(t){var e=[];return t.forEach((function(t){t.data.forEach((function(t){t.checked&&1==t.checked&&e.push(t.id)}))})),e},getIndexOf:function(t){var e=this.selectedTags.findIndex((function(e){return e==t.tagname}));return e},lookCheckedTagLength:function(){var t=this,e=0;return this.groupList.forEach((function(a){a.data.forEach((function(a){1==a.checked&&-1==t.getIndexOf(a)&&e++}))})),e},preventChecked:function(t){this.groupList.forEach((function(e){e.data.forEach((function(e){t.id==e.id&&(e.checked=!1)}))}))},preventCanclechecked:function(t){this.groupList.forEach((function(e){e.data.forEach((function(e){t.id==e.id&&(e.checked=!0)}))}))},queryNoTagIsSelected:function(t){var e=0,a=0,i=!0,s=!1,n=void 0;try{for(var r,o=t[Symbol.iterator]();!(i=(r=o.next()).done);i=!0){var c=r.value,l=!0,d=!1,h=void 0;try{for(var u,g=c.data[Symbol.iterator]();!(l=(u=g.next()).done);l=!0){var p=u.value;-1==p.id&&p.checked&&(e=-1),-1!=p.id&&p.checked&&(a=-1)}}catch(f){d=!0,h=f}finally{try{l||null==g.return||g.return()}finally{if(d)throw h}}}}catch(f){s=!0,n=f}finally{try{i||null==o.return||o.return()}finally{if(s)throw n}}return e+a},changeTags:function(t){if(2==this.type&&-2==this.queryNoTagIsSelected(this.groupList)&&(this.preventChecked({checked:!0,id:-1,tagname:"无标签"}),this.$message.warning("不可同时选择无标签与其他标签！")),!this.isTabs){var e=this.selectedTags.findIndex((function(e){return e==t.tagname}));-1!=e&&this.preventCanclechecked(t),this.lookCheckedTagLength()>20&&(this.preventChecked(t),this.$message.warning("很抱歉，最多可选择20个标签!"))}3==this.currentTab?(this.ids=this.getSelectedTagIds(this.groupList),this.inverseSelect()):(this.ids=this.getSelectedTagIds(this.groupList),this.$emit("getIds",this.ids))},createTag:function(t){this.group_id=t;var e=0;if(this.groupList.map((function(t){e+=t.data.length})),e>=9999)return this.$message.warning("标签数量已超过上限9999个，无法创建"),!1;this.addTagVisible=!0},showMore:function(){this.isMore=!this.isMore},onChange:function(){2==this.type&&-2==this.queryNoTagIsSelected(this.groupList)&&(this.preventChecked({checked:!0,id:-1,tagname:"无标签"}),this.selectedIds.splice(0,1)),3==this.type&&(this.ids=this.selectedIds,this.inverseSelect())},inverseSelect:function(){var t=c.a.cloneDeep(this.groupList),e=[];t.forEach((function(t){t.data.forEach((function(t){0!=t.checked&&t.checked||e.push(t.id)}))})),this.inverseSelectedIds=e,this.$emit("inverseSelectedIds",{currentTab:this.type,inverseIds:this.inverseSelectedIds,ids:this.ids})},excelAddAttr:function(t){var e=this,a=this;t.forEach((function(t){a.selectedIds.length>t.data.length?a.selectedIds.forEach((function(a){t.data.forEach((function(t){t.id==a&&e.$set(t,"checked",!0)}))})):t.data.forEach((function(t){a.selectedIds.forEach((function(a){a==t.id&&e.$set(t,"checked",!0)}))}))}))},addAttr:function(t){for(var e=this,a=this,i=[],s=function(s){if(i>5)return{v:void 0};a.selectedTags.length>t[s].data.length?a.selectedTags.forEach((function(a){t[s].data.forEach((function(t){t.tagname==a&&(e.$set(t,"checked",!0),i.push(t))}))})):t[s].data.forEach((function(t){a.selectedTags.forEach((function(a){a==t.tagname&&(e.$set(t,"checked",!0),i.push(t))}))}))},r=0;r<t.length;r++){var o=s(r);if("object"===Object(n["a"])(o))return o.v}},selectedAddAttr:function(t){var e=this,a=this;t.forEach((function(t){a.selectedIds.length>t.data.length?a.selectedIds.forEach((function(a){t.data.forEach((function(t){t.id==a&&e.$set(t,"checked",!0)}))})):t.data.forEach((function(t){a.selectedIds.forEach((function(a){a==t.id&&e.$set(t,"checked",!0)}))}))}))},modalVisibleChange:function(t,e){"ok"==t&&(this.wordIds=""==e?[]:e.split(","))},getTotalTagNum:function(){var t=0;return this.groupList.forEach((function(e){e.data.forEach((function(e){t++}))})),t},getTags:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(){var e,a,i,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.axios.post("work-tag-group/tag-group",{corp_id:this.corp_id,is_not_add:this.isNotAdd});case 2:e=t.sent,a=e.data,0!=a.error?this.$message.error(a.error_msg):(this.groupList=a.data,this.isTabs&&(i={id:-1,name:"无标签",data:[{id:-1,tagname:"无标签"}]},this.groupList.unshift(i)),s=this.getTotalTagNum(),this.$emit("getTagTotalNum",s),this.isTabs?this.selectedAddAttr(this.groupList):this.addAttr(this.groupList),this.isExcel&&this.excelAddAttr(this.groupList));case 5:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),onSearch:function(){if(0==this.tagValue.length&&!this.tagNameStr)return this.$message.destroy(),this.$message.warning("请填写标签名称"),!1;var t=JSON.parse(JSON.stringify(this.tagValue));0!=this.tagNameStr.trim().length&&t.push(this.tagNameStr.trim()),this.addTags(t),this.newTagList=[]},addTags:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(e){var a,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.axios.post("work-tag/add",{name:e,corp_id:this.corp_id,suite_id:1,type:0,group_id:this.group_id});case 2:if(a=t.sent,i=a.data,0==i.error){t.next=9;break}"标签名非法，请注意不能和其他标签重名"==i.error_msg?this.$message.error("该标签名称与微信标签重复，请手动同步微信标签即可。"):this.$message.error(i.error_msg),this.$refs.divInput.msgTitle="",t.next=18;break;case 9:return this.$message.success("新建标签成功"),this.inputValue="",this.tagValue=[],this.tagNameStr="",this.addTagVisible=!1,this.$refs.divInput.msgTitle="",this.group_id="",t.next=18,this.getTags();case 18:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),addTagCancel:function(){this.inputValue="",this.tagValue=[]}}},h=d,u=(a("68c4"),a("2877")),g=Object(u["a"])(h,i,s,!1,null,"8f3ad1cc",null);e["a"]=g.exports},"68c4":function(t,e,a){"use strict";var i=a("776f"),s=a.n(i);s.a},"776f":function(t,e,a){var i=a("c574");"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var s=a("499e").default;s("73ce15bb",i,!0,{sourceMap:!1,shadowMode:!1})},"99a6":function(t,e,a){"use strict";var i=a("166e"),s=a.n(i);s.a},c574:function(t,e,a){e=t.exports=a("2350")(!1),e.push([t.i,".ant-radio-button-wrapper[data-v-8f3ad1cc]{margin:0!important;padding:0 5px!important}.group-name[data-v-8f3ad1cc]{overflow:hidden;white-space:nowrap;text-overflow:ellipsis;width:calc(100% - 4px);display:inline-block;vertical-align:bottom;line-height:21px}[data-v-8f3ad1cc] .ant-tag-checkable{background-color:#fafafa;border-color:#d9d9d9;font-size:13px}[data-v-8f3ad1cc] .ant-tag-checkable-checked{background-color:#1890ff!important}.l-h-30[data-v-8f3ad1cc]{line-height:30px}",""])},eaaf:function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"input-box"},[t._l(t.msgList,(function(e,i){return a("a-tag",{staticStyle:{height:"22px",margin:"5px 5px 5px 0"}},[t._v(t._s(e)+"\n\t\t"),a("a-icon",{attrs:{type:"close"},on:{click:function(e){return t.delTag(i)}}})],1)})),a("a-input",{staticClass:"input-area",attrs:{placeholder:t.placeholder,disabled:t.msg.length==t.keyLength,maxLength:t.maxLength},on:{pressEnter:t.onSearch,change:t.onChange},model:{value:t.msgTitle,callback:function(e){t.msgTitle=e},expression:"msgTitle"}})],2)},s=[],n=(a("c5f6"),{name:"inputRecommended",props:{msg:{type:Array,default:[]},placeholder:{type:String,default:""},maxLength:{type:Number,default:10},keyLength:{type:Number,default:-1}},watch:{msg:function(t){this.msgList=t}},data:function(){return{msgTitle:"",msgList:[]}},methods:{onChange:function(t){this.$emit("func",this.msgList,this.msgTitle.trim())},onSearch:function(t){""!=t.target.value.trim()&&(-1==this.msgList.indexOf(t.target.value.trim())?(this.msgList.push(t.target.value.trim()),this.msgTitle="",this.$emit("func",this.msgList,this.msgTitle)):this.$message.error("已有重复值，请重新输入！"))},delTag:function(t){this.msgList.splice(t,1),this.$emit("func",this.msgList)}}}),r=n,o=(a("99a6"),a("2877")),c=Object(o["a"])(r,i,s,!1,null,"84adffa8",null);e["a"]=c.exports},fb10:function(t,e,a){e=t.exports=a("2350")(!1),e.push([t.i,".input-box[data-v-84adffa8]{background:#fff;padding:0 10px;border:1px solid #ccc;display:-webkit-box;display:-ms-flexbox;display:flex;-ms-flex-wrap:wrap;flex-wrap:wrap}.input-area[data-v-84adffa8]{min-width:200px;-webkit-box-flex:1;-ms-flex:1;flex:1}.ant-input[data-v-84adffa8],.ant-input[data-v-84adffa8]:focus,.ant-input[data-v-84adffa8]:hover{border:0;-webkit-box-shadow:none;box-shadow:none}.ant-input[data-v-84adffa8]{padding:4px 0}",""])}}]);