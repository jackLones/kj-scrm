(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7b57f559"],{"0cfc":function(t,e,i){"use strict";var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"tabBox"},[i("a-empty",{directives:[{name:"show",rawName:"v-show",value:0==t.groupList.length&&1==t.isNotAdd,expression:"groupList.length == 0 && isNotAdd == 1"}]},[i("span",{attrs:{slot:"description"},slot:"description"},[t._v("\n\t\t\t尚未创建标签，无法选择标签\n\t\t")])]),t._l(t.groupList,(function(e,s){return[t.isMore||!t.isMore&&s<5?i("a-form-item",{staticClass:"current0",attrs:{"label-col":{span:4},"wrapper-col":{span:20}}},[i("span",{staticClass:"group-name",attrs:{slot:"label"},slot:"label"},[e.name&&""!=e.name?i("a-popover",{attrs:{trigger:"hover"}},[i("span",{staticStyle:{display:"inline-block","max-width":"500px","word-wrap":"break-word","word-break":"break-all"},attrs:{slot:"content"},slot:"content"},[t._v("\n\t\t\t\t\t\t"+t._s(e.name)+"\n\t\t\t\t\t")]),t._v("\n\t\t\t\t\t"+t._s(e.name)+"\n\t\t\t\t")]):t._e()],1),t._l(e.data,(function(a,o){return i("span",[e.disabled[o]?t._e():i("a-checkable-tag",{on:{change:function(e){return t.changeTags(a.id,s)}},model:{value:e.checked[o],callback:function(i){t.$set(e.checked,o,i)},expression:"item.checked[tagIndex]"}},[t._v("\n\t\t\t\t\t"+t._s(a.tagname)+"\n\t\t\t\t")]),e.disabled[o]&&1==t.isDisabled?i("a-button",{staticStyle:{margin:"5px","line-height":"26px","font-size":"12px",height:"auto !important",padding:"0 7px"},attrs:{disabled:e.disabled[o]&&1==t.isDisabled}},[t._v("\n\t\t\t\t\t"+t._s(a.tagname)+"\n\t\t\t\t")]):t._e()],1)})),1!=t.isNotAdd?i("a-button",{directives:[{name:"has",rawName:"v-has",value:"client-tag-add",expression:"'client-tag-add'"}],staticStyle:{"font-size":"13px",height:"26px"},attrs:{icon:"plus"},on:{click:function(i){return t.createTag(e.id)}}},[t._v("\n\t\t\t\t新建标签\n\t\t\t")]):t._e()],2):t._e()]})),t.groupList.length>0&&1!=t.isNotAdd?i("a-button",{directives:[{name:"has",rawName:"v-has",value:"client-tag-group-add",expression:"'client-tag-group-add'"}],staticStyle:{"font-size":"13px",height:"26px","margin-right":"10px","margin-left":"16.7%"},attrs:{icon:"plus"},on:{click:t.addTagGroup}},[t._v("\n\t\t新建标签组\n\t")]):t._e(),t.groupList.length>5?i("div",{staticStyle:{"font-size":"13px",height:"26px",color:"#1890FF","text-align":"center",cursor:"pointer"},on:{click:t.showMore}},[t.isMore?t._e():[t._v("更多")],t.isMore?[t._v("收起")]:t._e(),i("a-icon",{attrs:{type:t.isMore?"arrow-up":"arrow-down"}})],2):t._e(),i("a-modal",{attrs:{title:"新建标签",zIndex:99999,confirmLoading:t.confirmLoading3,width:"550px"},on:{ok:function(e){return t.handleOk(t.inputValue)},cancel:t.cancel},model:{value:t.visible,callback:function(e){t.visible=e},expression:"visible"}},[i("a-form-item",{attrs:{"label-col":{span:4},"wrapper-col":{span:20}}},[i("template",{slot:"label"},[t._v("\n\t\t\t\t选择分组\n\t\t\t")]),i("a-select",{staticStyle:{width:"250px"},attrs:{showSearch:"",optionFilterProp:"children",disabled:""},model:{value:t.group_id,callback:function(e){t.group_id=e},expression:"group_id"}},t._l(t.groupList,(function(e){return i("a-select-option",{attrs:{value:e.id}},[t._v("\n\t\t\t\t\t"+t._s(e.name)+"\n\t\t\t\t")])})),1)],2),i("a-form-item",{attrs:{"label-col":{span:4},"wrapper-col":{span:20}}},[i("template",{slot:"label"},[t._v("\n\t\t\t\t标签名称\n\t\t\t")]),i("p",{staticStyle:{margin:"0px","font-size":"13px",color:"#909399"}},[t._v("\n\t\t\t\t每个标签名称最多15个字。同时新建多个标签时，请用“空格”隔开")]),i("a-input",{attrs:{placeholder:"请输入标签（不得超过15个字符）"},model:{value:t.inputValue,callback:function(e){t.inputValue=e},expression:"inputValue"}})],2)],1),i("a-modal",{staticClass:"add-tag-group",attrs:{zIndex:99999,title:"新建标签组",visible:t.groupVisible,confirmLoading:t.confirmLoading},on:{ok:t.handleOk2,cancel:t.handleCancel}},[i("a-form-item",{staticClass:"current0",attrs:{"label-col":{span:4},"wrapper-col":{span:20}}},[i("template",{slot:"label"},[i("span",{staticStyle:{color:"red"}},[t._v("*")]),t._v("分组名称\n\t\t\t")]),i("a-input",{attrs:{placeholder:"请输入分组名(不得超过15个字符)",maxLength:15},model:{value:t.teamName,callback:function(e){t.teamName=e},expression:"teamName"}},[i("span",{attrs:{slot:"suffix"},slot:"suffix"},[i("span",[t._v(t._s(t.teamName.length))]),t._v("/15\n\t\t\t\t\t\t\t\t\t\t\t")])])],2),i("a-form-item",{staticClass:"current0",attrs:{"label-col":{span:4},"wrapper-col":{span:20}}},[i("template",{slot:"label"},[i("span",{staticStyle:{color:"red"}},[t._v("*")]),t._v("标签名称\n\t\t\t")]),i("p",{staticStyle:{margin:"0px","font-size":"13px",color:"#909399"}},[t._v("\n\t\t\t\t每个标签名称最多15个字。同时新建多个标签时，请用“空格”隔开\n\t\t\t")]),i("a-input",{attrs:{placeholder:"请输入标签（不得超过15个字符）"},model:{value:t.inputValue2,callback:function(e){t.inputValue2=e},expression:"inputValue2"}})],2)],1)],2)},a=[],o=(i("a481"),i("28a5"),i("6762"),i("2fdb"),i("96cf"),i("3b8d")),n=(i("c5f6"),{name:"chooseDepartment",props:{callback:{type:Function,default:null},hasChoose:{type:Array,default:function(){}},isDisabled:{type:Number,default:0},disabledTag:{type:Array,default:function(){}},isNotAdd:{type:Number,default:0},id:{type:String,default:""}},data:function(){return{corpId:"",groupList:[],tag_arr:[],tag_ids:"",group_id:[],checked:[],visible:!1,confirmLoading3:!1,inputValue:"",newTagList:[],isMore:!1,groupVisible:!1,confirmLoading:!1,teamName:"",inputValue2:"",newTagList2:[]}},watch:{hasChoose:{handler:function(t){var e=this;"undefined"!=typeof t&&this.groupList.length&&(this.tag_arr=t,this.tag_ids=t.join(),this.hasChoose.map((function(t){e.groupList.map((function(e){e.data.map((function(i,s){t==i.id&&(e.checked[s]=!0)}))}))})),0==t.length&&this.groupList.map((function(t){t.checked=[]})),this.$forceUpdate())},deep:!0},id:{handler:function(t){""!=typeof t&&(this.corpId=t,this.getTags())},deep:!0},disabledTag:{handler:function(t){var e=this;"undefined"!=typeof t&&this.groupList.length&&(this.disabledTag.map((function(t){e.groupList.map((function(e){e.data.map((function(i,s){t==i.id&&(e.disabled[s]=!0)}))}))})),this.$forceUpdate())},deep:!0}},methods:{getTags:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(){var e,i,s=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.axios.post("work-tag-group/tag-group",{corp_id:this.corpId||localStorage.getItem("corpId"),is_not_add:this.isNotAdd});case 2:e=t.sent,i=e.data,0!=i.error?this.$message.error(i.error_msg):(this.groupList=i.data,this.groupList.map((function(t){t.checked=[],t.disabled=[]})),"undefined"!=typeof this.disabledTag&&this.disabledTag.length>0&&this.disabledTag.map((function(t){s.groupList.map((function(e){e.data.map((function(i,s){t==i.id&&(e.disabled[s]=!0)}))}))})),"undefined"!=typeof this.hasChoose&&this.hasChoose.length>0&&(this.tag_arr=this.hasChoose,this.tag_ids=this.hasChoose.join(),this.hasChoose.map((function(t){s.groupList.map((function(e){e.data.map((function(i,s){t==i.id&&(e.checked[s]=!0)}))}))})),this.$forceUpdate()));case 5:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),changeTags:function(t,e){Array.prototype.indexOf=function(t){for(var e=0;e<this.length;e++)if(this[e]==t)return e;return-1},Array.prototype.remove=function(t){var e=this.indexOf(t);e>-1&&this.splice(e,1)};var i=String(t);if(this.tag_arr.includes(i))this.tag_arr.remove(i);else if(this.tag_arr.length+1>9999){this.$message.warning("不可选中，客户标签数量上限9999个");for(var s=0;s<this.groupList[e].data.length;s++)this.groupList[e].data[s].id==i&&(this.groupList[e].checked[s]=!1)}else this.tag_arr.push(i);this.$forceUpdate(),this.tag_ids=this.tag_arr.join(),null!==this.callback&&"function"===typeof this.callback&&this.callback("ok",this.tag_ids)},createTag:function(t){this.group_id=t;var e=0;if(this.groupList.map((function(t){e+=t.data.length})),e>=9999)return this.$message.warning("标签数量已超过上限9999个，无法创建"),!1;this.visible=!0},handleOk:function(t){var e=this;if(e.confirmLoading3=!0,""==t)return e.$message.warning("不能为空"),e.confirmLoading3=!1,!1;e.newTagList=[];for(var i=0;i<t.split(" ").length;i++){if(t.split(" ")[i].length>15)return e.$message.error("每个标签最多15个字"),e.confirmLoading3=!1,!1;t.split(" ")[i].length>0&&e.newTagList.push(t.split(" ")[i])}e.addTags(),e.inputValue="",e.newTagList=[],e.confirmLoading3=!1},addTags:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(){var e,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.axios.post("work-tag/add",{corp_id:this.corpId||localStorage.getItem("corpId"),suite_id:1,type:0,group_id:this.group_id,name:this.newTagList});case 2:e=t.sent,i=e.data,0!=i.error?(this.$message.error(i.error_msg),this.confirmLoading3=!1):(this.isLoading=!1,this.visible=!1,this.confirmLoading3=!1,this.getTags(),this.inputValue="",this.newTagList=[]);case 5:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),cancel:function(){this.visible=!1,this.inputValue=""},showMore:function(){this.isMore=!this.isMore},addTagGroup:function(){this.groupVisible=!0},handleCancel:function(){this.groupVisible=!1,this.teamName="",this.newTagList2=[],this.inputValue2=""},handleOk2:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(){var e,i,s,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(String.prototype.Trim=function(){return this.replace(/(^\s*)|(\s*$)/g,"")},this.teamName=this.teamName.Trim(),this.teamName){t.next=5;break}return this.$message.error("请输入分组名"),t.abrupt("return",!1);case 5:if(""!=this.inputValue2){t.next=10;break}return this.$message.warning("标签名称不能为空"),t.abrupt("return",!1);case 10:this.newTagList2=[],e=JSON.parse(JSON.stringify(this.inputValue2)).split(" "),i=0;case 13:if(!(i<e.length)){t.next=24;break}if(!(e[i].length>15)){t.next=20;break}return this.$message.error("每个标签最多15个字"),this.inputValue2="",t.abrupt("return",!1);case 20:e[i].length>0&&this.newTagList2.push(e[i]);case 21:i++,t.next=13;break;case 24:return this.confirmLoading=!0,t.next=27,this.axios.post("work-tag-group/add",{corp_id:this.corpId||localStorage.getItem("corpId"),suite_id:1,name:this.teamName,type:0,isMasterAccount:localStorage.getItem("isMasterAccount"),sub_id:localStorage.getItem("sub_id"),tag_name:this.newTagList2});case 27:s=t.sent,a=s.data,0!=a.error?this.$message.error(a.error_msg):(this.teamName="",this.newTagList2=[],this.inputValue2="",this.groupVisible=!1,this.getTags()),this.confirmLoading=!1;case 31:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},mounted:function(){this.corpId=this.id||localStorage.getItem("corpId"),this.getTags()}}),r=n,c=(i("378c"),i("2877")),l=Object(c["a"])(r,s,a,!1,null,"049270fe",null);e["a"]=l.exports},"1ecb":function(t,e,i){e=t.exports=i("2350")(!1),e.push([t.i,"[data-v-72b54fa1] .ant-card-bordered{border:0}.content-bd[data-v-72b54fa1]::-webkit-scrollbar{width:4px;height:10px}.content-bd[data-v-72b54fa1]::-webkit-scrollbar-thumb{border-radius:10px;-webkit-box-shadow:inset 0 0 5px rgba(0,0,0,.2);background:#535353}p[data-v-72b54fa1]{margin-bottom:0}.select-option[data-v-72b54fa1]{display:inline-block;margin-right:10px;margin-bottom:10px}.select-option label[data-v-72b54fa1]{display:inline-block;text-align:right;width:100px}.tpl-title[data-v-72b54fa1]{float:left;font-size:16px;vertical-align:top}.content-bd[data-v-72b54fa1]{min-width:885px;margin:0 20px;overflow-y:hidden;overflow-x:auto;white-space:nowrap;padding-bottom:20px}a[data-v-72b54fa1]:active,a[data-v-72b54fa1]:hover,a[data-v-72b54fa1]:link,a[data-v-72b54fa1]:visited{text-decoration:none}.part[data-v-72b54fa1]{width:300px;height:100%;display:inline-block;background:#f7f7f7;margin-right:15px;-webkit-box-shadow:0 2px 8px rgba(0,0,0,.2);box-shadow:0 2px 8px rgba(0,0,0,.2);position:relative;cursor:-webkit-grabbing;cursor:grabbing}.part[data-v-72b54fa1]:hover{background:#f9f9f9}.part-title[data-v-72b54fa1]{padding:15px;overflow:hidden;height:56px;width:100%;position:absolute}.part-body[data-v-72b54fa1]{padding:0 16px;-webkit-box-sizing:border-box;box-sizing:border-box;overflow:auto;position:absolute;top:57px;bottom:0;width:300px}.part-title-left[data-v-72b54fa1]{float:left;color:rgba(0,0,0,.6);font-size:16px;font-weight:700}.part-title-right[data-v-72b54fa1]{float:right;margin-top:4.5px;font-size:18px;cursor:pointer}.part-body-card[data-v-72b54fa1],.part-body-card2[data-v-72b54fa1]{background:#fff;margin-bottom:15px;-webkit-box-shadow:0 1px 4px 0 rgba(0,0,0,.08);box-shadow:0 1px 4px 0 rgba(0,0,0,.08);width:100%}.part-body-card2[data-v-72b54fa1]:hover,.part-body-card[data-v-72b54fa1]:hover{-webkit-box-shadow:0 2px 8px 0 rgba(0,0,0,.12);box-shadow:0 2px 8px 0 rgba(0,0,0,.12)}.url-btn[data-v-72b54fa1]{cursor:pointer}.part-title-right[data-v-72b54fa1]:hover,.url-btn[data-v-72b54fa1]:hover{color:#1890ff}.textArea[data-v-72b54fa1]{padding:0 20px}.textArea-btn[data-v-72b54fa1]{padding:20px;overflow:hidden}.upload-file[data-v-72b54fa1] .ant-upload.ant-upload-select-picture-card{background-color:#fff;border:0;height:32px}[data-v-72b54fa1] .ant-upload.ant-upload-select-picture-card>.ant-upload{padding:0}.footer[data-v-72b54fa1]{position:absolute;bottom:63px;width:100%;border-top:1px solid #e8e8e8;padding:10px 16px;text-align:right;background:#fff}[data-v-72b54fa1] .ant-spin-spinning:first-child{width:100%;margin-top:100px}[data-v-72b54fa1] .ant-spin-container,[data-v-72b54fa1] .ant-spin-nested-loading:first-child{height:100%}[data-v-72b54fa1] .ant-input-number-handler-wrap{display:none}[data-v-72b54fa1] .ant-popover-inner-content{padding:8px 16px}.content-bd[data-v-72b54fa1] .ant-spin-container:first-child{display:-webkit-box;display:-ms-flexbox;display:flex}.part[data-v-72b54fa1] .ant-spin-container{width:300px}.tabBtn[data-v-72b54fa1]{margin:0;margin-right:2px;padding:10px 16px;line-height:38px;background:#fafafa;border:1px solid #e8e8e8;border-bottom:0;border-radius:4px 4px 0 0;cursor:pointer}.activeBtn[data-v-72b54fa1]{color:#1890ff;background:#fff}",""])},"2e86":function(t,e,i){e=t.exports=i("2350")(!1),e.push([t.i,"[data-v-049270fe] .ant-tree-checkbox{float:right}[data-v-049270fe] .ant-tree-iconEle{display:none!important}[data-v-049270fe] .ant-tree-node-content-wrapper.ant-tree-node-selected{background-color:#fff!important}[data-v-049270fe] .ant-list-item{border-bottom:0;padding:0}[data-v-049270fe] .ant-list-item-meta-title{font-weight:400;line-height:32px}[data-v-049270fe] .ant-tree li span.ant-tree-checkbox{margin:4px 20px 0 2px}.content-msg[data-v-049270fe]{color:red;margin:0 20px 12px 0}.group-name[data-v-049270fe]{overflow:hidden;white-space:nowrap;text-overflow:ellipsis;width:calc(100% - 4px);display:inline-block;vertical-align:bottom}.tabBox[data-v-049270fe]{background:#fff;padding:10px;-webkit-box-sizing:border-box;box-sizing:border-box;margin-right:20px;border:1px solid #d8d8d8}[data-v-049270fe] .ant-tag-checkable{background-color:#fafafa;border-color:#d9d9d9;height:26px;line-height:25px}[data-v-049270fe] .ant-tag-checkable-checked{background-color:#1890ff}[data-v-049270fe] .ant-col-20{margin-left:20px;width:calc(83.33333% - 20px)}.add-tag-group[data-v-049270fe] .ant-col-20{margin-left:0;width:83.33333333%}",""])},"378c":function(t,e,i){"use strict";var s=i("da1d"),a=i.n(s);a.a},"487a":function(t,e,i){(function(e,i){t.exports=i()})(0,(function(){"use strict";var t="@@InfiniteScroll",e=function(t,e){var i,s,a,o,n,r=function(){t.apply(o,n),s=i};return function(){if(o=this,n=arguments,i=Date.now(),a&&(clearTimeout(a),a=null),s){var t=e-(i-s);t<0?r():a=setTimeout((function(){r()}),t)}else r()}},i=function(t){return t===window?Math.max(window.pageYOffset||0,document.documentElement.scrollTop):t.scrollTop},s=document.defaultView.getComputedStyle,a=function(t){var e=t;while(e&&"HTML"!==e.tagName&&"BODY"!==e.tagName&&1===e.nodeType){var i=s(e).overflowY;if("scroll"===i||"auto"===i)return e;e=e.parentNode}return window},o=function(t){return t===window?document.documentElement.clientHeight:t.clientHeight},n=function(t){return t===window?i(window):t.getBoundingClientRect().top+i(window)},r=function(t){var e=t.parentNode;while(e){if("HTML"===e.tagName)return!0;if(11===e.nodeType)return!1;e=e.parentNode}return!1},c=function(){if(!this.binded){this.binded=!0;var t=this,i=t.el,s=i.getAttribute("infinite-scroll-throttle-delay"),o=200;s&&(o=Number(t.vm[s]||s),(isNaN(o)||o<0)&&(o=200)),t.throttleDelay=o,t.scrollEventTarget=a(i),t.scrollListener=e(l.bind(t),t.throttleDelay),t.scrollEventTarget.addEventListener("scroll",t.scrollListener),this.vm.$on("hook:beforeDestroy",(function(){t.scrollEventTarget.removeEventListener("scroll",t.scrollListener)}));var n=i.getAttribute("infinite-scroll-disabled"),r=!1;n&&(this.vm.$watch(n,(function(e){t.disabled=e,!e&&t.immediateCheck&&l.call(t)})),r=Boolean(t.vm[n])),t.disabled=r;var c=i.getAttribute("infinite-scroll-distance"),h=0;c&&(h=Number(t.vm[c]||c),isNaN(h)&&(h=0)),t.distance=h;var p=i.getAttribute("infinite-scroll-immediate-check"),d=!0;p&&(d=Boolean(t.vm[p])),t.immediateCheck=d,d&&l.call(t);var u=i.getAttribute("infinite-scroll-listen-for-event");u&&t.vm.$on(u,(function(){l.call(t)}))}},l=function(t){var e=this.scrollEventTarget,s=this.el,a=this.distance;if(!0===t||!this.disabled){var r=i(e),c=r+o(e),l=!1;if(e===s)l=e.scrollHeight-c<=a;else{var h=n(s)-n(e)+s.offsetHeight+r;l=c+a>=h}l&&this.expression&&this.expression()}},h={bind:function(e,i,s){e[t]={el:e,vm:s.context,expression:i.value};var a=arguments;e[t].vm.$on("hook:mounted",(function(){e[t].vm.$nextTick((function(){r(e)&&c.call(e[t],a),e[t].bindTryCount=0;var i=function i(){e[t].bindTryCount>10||(e[t].bindTryCount++,r(e)?c.call(e[t],a):setTimeout(i,50))};i()}))}))},unbind:function(e){e&&e[t]&&e[t].scrollEventTarget&&e[t].scrollEventTarget.removeEventListener("scroll",e[t].scrollListener)}},p=function(t){t.directive("InfiniteScroll",h)};return window.Vue&&(window.infiniteScroll=h,Vue.use(p)),h.install=p,h}))},"4bef":function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAQAAADZc7J/AAABAElEQVR42s3VIY7CUBAG4LkEliC4xKJ6BA6AognXQBLCAVBYNBK3pim7zP8XBAJHSLhAZVURi+jC2+681xD4R89nZiYjIhojQRlQicYiolFQ8600EqZNAKbSpB0lyqcCBeYccIA5ihDgtO3JLdseTr7Ap9wFRx+g2HTuge8PH+AsjuBiBzZO4MsOHJzAwQ7kTiD3mcLsoX3muQcaV9s1DtnENUfssssR1i+6hRcD3GPFBaeccoEV9z7AUodoP4yxrUMs/wd26EtN0MeuBuBYDOH4LyDPWhYga1WXugpMxBhMnIBGVqD6S34B9nqvTUwaAUnNpZue689/DnuwTDUSuQJ1pL7YQ6lKkQAAAABJRU5ErkJggg=="},"6bc2":function(t,e,i){var s=i("1ecb");"string"===typeof s&&(s=[[t.i,s,""]]),s.locals&&(t.exports=s.locals);var a=i("499e").default;a("f599ea76",s,!0,{sourceMap:!1,shadowMode:!1})},"6fb7":function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticStyle:{width:"100%",height:"100%"}},[s("div",{staticStyle:{height:"100%"}},[s("a-card",{staticStyle:{"margin-bottom":"20px",padding:"10px 20px"}},[s("label",{staticClass:"tpl-title"},[t._v("客户看板")])]),s("div",{staticStyle:{padding:"0 20px"}},[s("span",{staticClass:"tabBtn",class:{activeBtn:1==t.tabKey},on:{click:function(e){return t.changeTab(1)}}},[t._v("企微客户")]),s("span",{staticClass:"tabBtn",class:{activeBtn:2==t.tabKey},on:{click:function(e){return t.changeTab(2)}}},[t._v("非企微客户")])]),s("div",{directives:[{name:"show",rawName:"v-show",value:1==t.tabKey,expression:"tabKey == 1"}],staticStyle:{height:"calc(100% - 122px)"}},[s("a-row",{ref:"searchArea",staticStyle:{margin:"0 20px 20px",padding:"20px 20px 5px",background:"#FFF","line-height":"40px"}},[t.corpLen>1?s("span",{staticClass:"select-option"},[s("label",{staticStyle:{"margin-right":"5px"}},[t._v("企业微信：")]),t.corpLen>1?s("a-select",{staticStyle:{width:"210px","margin-right":"5px"},attrs:{showSearch:"",optionFilterProp:"children"},on:{change:t.changeWx},model:{value:t.corpId,callback:function(e){t.corpId=e},expression:"corpId"}},[t._l(t.corpInfo,(function(e){return[s("a-select-option",{attrs:{value:e.corpid}},[t._v("\n\t\t\t\t\t\t\t"+t._s(e.corp_name)+"\n\t\t\t\t\t\t")])]}))],2):t._e()],1):t._e(),s("span",{staticClass:"select-option"},[s("label",{staticStyle:{"margin-right":"5px"}},[t._v("关键词：")]),s("a-input",{staticStyle:{width:"210px","margin-right":"5px"},attrs:{placeholder:"客户姓名/昵称/备注/公司名称"},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.find(e)}},model:{value:t.name,callback:function(e){t.name=e},expression:"name"}})],1),s("span",{staticClass:"select-option"},[s("label",{staticStyle:{"margin-right":"5px"}},[t._v("手机号：")]),s("a-input",{staticStyle:{width:"210px","margin-right":"5px"},attrs:{placeholder:"请输入手机号码"},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.find(e)}},model:{value:t.phone,callback:function(e){t.phone=e},expression:"phone"}})],1),s("span",{staticClass:"select-option"},[s("label",{staticStyle:{"margin-right":"5px"}},[t._v("是否粉丝：")]),s("a-select",{staticStyle:{width:"210px","margin-right":"5px"},attrs:{showSearch:"",optionFilterProp:"children"},model:{value:t.is_fans,callback:function(e){t.is_fans=e},expression:"is_fans"}},[s("a-select-option",{attrs:{value:0}},[t._v("全部")]),s("a-select-option",{attrs:{value:1}},[t._v("是")]),s("a-select-option",{attrs:{value:2}},[t._v("否")])],1)],1),s("span",{staticClass:"select-option"},[s("label",{staticStyle:{"margin-right":"5px"}},[t._v("联系时间：")]),s("a-select",{staticStyle:{width:"210px","margin-right":"5px"},attrs:{dropdownStyle:{width:"200px"}},model:{value:t.timeType,callback:function(e){t.timeType=e},expression:"timeType"}},[s("a-select-option",{attrs:{value:0}},[t._v("全部客户")]),s("a-select-option",{attrs:{value:1}},[t._v("一直未沟通")]),s("a-select-option",{attrs:{value:2}},[t._v("近3天未联系")]),s("a-select-option",{attrs:{value:3}},[t._v("近7天未联系")]),s("a-select-option",{attrs:{value:4}},[t._v("近15天未联系")]),s("a-select-option",{attrs:{value:5}},[t._v("近30天未联系")]),s("a-select-option",{attrs:{value:6}},[t._v("近90天未联系")]),s("a-select-option",{attrs:{value:7}},[t._v("近180天未联系")]),s("a-select-option",{attrs:{value:8}},[t._v("近一年未联系")]),s("a-select-option",{attrs:{value:9}},[t._v("一年以上未联系")])],1)],1),s("span",{staticClass:"select-option"},[s("label",{staticStyle:{"margin-right":"5px"}},[t._v("排序方式：")]),s("a-select",{staticStyle:{width:"210px","margin-right":"5px"},model:{value:t.sortType,callback:function(e){t.sortType=e},expression:"sortType"}},[s("a-select-option",{attrs:{value:0}},[t._v("创建时间从近到远")]),s("a-select-option",{attrs:{value:1}},[t._v("创建时间从远到近")]),s("a-select-option",{attrs:{value:2}},[t._v("最后一次跟进时间从近到远")]),s("a-select-option",{attrs:{value:3}},[t._v("最后一次跟进时间从远到近")])],1)],1),s("span",{staticClass:"select-option"},[s("label",{staticStyle:{"margin-right":"5px"}},[t._v("是否保护：")]),s("a-select",{staticStyle:{width:"210px","margin-right":"5px"},model:{value:t.other_way,callback:function(e){t.other_way=e},expression:"other_way"}},[s("a-select-option",{attrs:{value:-1}},[t._v("全部")]),s("a-select-option",{attrs:{value:1}},[t._v("已保护")]),s("a-select-option",{attrs:{value:0}},[t._v("未保护")])],1)],1),s("span",{staticClass:"select-option"},[s("label",{staticStyle:{"margin-right":"5px"}},[t._v("部门成员：")]),s("a-button",{staticStyle:{width:"210px",margin:"0 10px 10px 0"},on:{click:t.showDepartmentList}},[t.chooseNum>0?s("span",[t._v("已选择"+t._s(t.chooseUserNum)+"名成员，"+t._s(t.chooseDepartmentNum)+"个部门")]):s("span",[t._v("选择成员")])])],1),s("span",{staticClass:"select-option"},[s("label",{staticStyle:{"margin-right":"5px"}},[t._v("加入时间：")]),s("a-range-picker",{staticStyle:{width:"320px","margin-right":"5px"},attrs:{"show-time":{defaultValue:[t.moment("00:00:00","HH:mm:ss"),t.moment("23:59:59","HH:mm:ss")]},format:"YYYY-MM-DD HH:mm:ss",allowClear:"","disabled-date":t.disabledDate},on:{change:t.changeTime},model:{value:t.joinTime,callback:function(e){t.joinTime=e},expression:"joinTime"}})],1),s("a-button",{staticStyle:{margin:"0 10px 10px 0"},attrs:{type:"primary"},on:{click:t.find}},[t._v("查找")]),s("a-button",{on:{click:t.clear}},[t._v("清空")])],1),s("div",{ref:"scroll",staticClass:"content-bd"},[s("a-spin",{attrs:{tip:"Loading...",size:"large",spinning:t.isLoading}},[s("a-empty",{directives:[{name:"show",rawName:"v-show",value:0==t.list.length,expression:"list.length == 0"}],staticStyle:{margin:"100px auto 0"}}),t._l(t.list,(function(e,a){return s("div",{directives:[{name:"show",rawName:"v-show",value:t.list.length>0,expression:"list.length > 0"}],staticClass:"part",attrs:{id:"part"+e.id}},[s("a-spin",{attrs:{tip:"Loading...",spinning:e.isLoading}},[s("div",{staticClass:"part-title"},[s("span",{staticClass:"part-title-left"},[t._v(t._s(e.title)+"（"+t._s(e.count)+"）")]),0==e.status?s("a-tag",{staticStyle:{margin:"3px"},attrs:{color:"red"}},[t._v("已删除")]):t._e()],1),s("a-row",{directives:[{name:"perfect-scroll-bar",rawName:"v-perfect-scroll-bar",value:t.perfectScrollBarOptions,expression:"perfectScrollBarOptions"}],ref:"part_body_"+e.id,refInFor:!0,staticClass:"part-body",staticStyle:{position:"absolute"},attrs:{id:"partBody"+e.id},on:{"ps-scroll-down":function(i){return t.handleScroll(e.id)},"ps-scroll-y":function(i){return t.changeScrollPosition(i,e.id)}}},[e.members&&0==e.members.length?s("a-empty"):t._e(),t._l(e.members,(function(a){return e.members&&e.members.length>0?s("div",{ref:"part_body_card_"+a.cid,refInFor:!0,staticClass:"part-body-card",attrs:{id:a.cid},on:{click:function(i){t.isJumpCustomDetail&&t.customDetail(a.cid,e.id)}}},[s("div",{staticStyle:{overflow:"hidden",padding:"10px 5px 10px 10px"}},[a.avatar?s("img",{staticStyle:{float:"left",width:"47px","margin-right":"5px",height:"47px","border-radius":"5px"},attrs:{src:a.avatar,alt:""}}):t._e(),a.avatar?t._e():s("img",{staticStyle:{float:"left",width:"47px","margin-right":"5px",height:"47px","border-radius":"5px"},attrs:{src:i("4bef"),alt:""}}),s("div",{staticStyle:{float:"left",width:"135px","font-size":"12px"}},[s("div",{staticStyle:{"word-wrap":"break-word","word-break":"break-all","white-space":"normal"}},[s("a-popover",{attrs:{placement:"top"}},[s("template",{slot:"content"},[s("p",[t._v(t._s(a.name))])]),s("span",[t._v(t._s(a.nickname))]),s("span",{class:null!=a.corp_name?"corp-name":"wx-name"},[null!=a.corp_name?[t._v("@"+t._s(a.corp_name))]:[t._v("@微信")]],2)],2),1==a.is_protect?s("a-tag",{attrs:{color:"green"}},[t._v("已保护")]):t._e()],1),a.wx_name&&""!=a.wx_name?s("p",{staticStyle:{overflow:"hidden","white-space":"nowrap","text-overflow":"ellipsis"}},[t._v("\n\t\t\t\t\t\t\t\t\t\t\t\t公众号："+t._s(a.wx_name))]):t._e(),""!=a.company_name?s("a-tag",{staticStyle:{overflow:"hidden","white-space":"nowrap","text-overflow":"ellipsis","max-width":"100%","margin-top":"5px"},attrs:{color:"orange"}},[t._v("\n\t\t\t\t\t\t\t\t\t\t\t\t"+t._s(a.company_name)+"\n\t\t\t\t\t\t\t\t\t\t\t")]):t._e()],1),s("a-progress",{staticStyle:{float:"left","margin-left":"5px","font-size":"12px","margin-right":"5px"},attrs:{type:"circle",percent:Number(a.close_rate),width:40}}),s("a-popover",{directives:[{name:"has",rawName:"v-has",value:"client-info",expression:"'client-info'"}],attrs:{placement:"right"}},[s("template",{slot:"content"},[s("div",[s("p",{staticClass:"url-btn",staticStyle:{"margin-bottom":"6px"},on:{click:function(i){return t.addRecord(a.cid,e.id,a.close_rate,a.nickname)}}},[t._v("\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t添加跟进")]),s("p",{staticClass:"url-btn",staticStyle:{"margin-bottom":"6px"},on:{click:function(i){return t.customDetail(a.cid,e.id)}}},[t._v("\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t客户详情")]),0==a.is_protect?s("p",{directives:[{name:"has",rawName:"v-has",value:"client-assign",expression:"'client-assign'"}],staticClass:"url-btn",staticStyle:{"margin-bottom":"6px"},on:{click:function(i){return t.handleMenuClick(a,e.id,1)}}},[t._v("\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t客户转交给成员")]):t._e(),0==a.is_protect?s("p",{directives:[{name:"has",rawName:"v-has",value:"client-backHighSea",expression:"'client-backHighSea'"}],staticClass:"url-btn",staticStyle:{"margin-bottom":"6px"},on:{click:function(i){return t.assignHighSea(a,e.id,1)}}},[t._v("\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t客户退回公海")]):t._e(),0==a.is_protect&&1==a.is_show&&1==a.is_rest?s("p",{directives:[{name:"has",rawName:"v-has",value:"client-protect",expression:"'client-protect'"}],staticClass:"url-btn",on:{click:function(i){return t.setProtect(a,e.id,1)}}},[t._v("\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t设为保护对象")]):t._e(),1==a.is_protect?s("p",{directives:[{name:"has",rawName:"v-has",value:"client-protect",expression:"'client-protect'"}],staticClass:"url-btn",on:{click:function(i){return t.cancelProtect(a,e.id,1)}}},[t._v("\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t取消保护")]):t._e()])]),s("a-icon",{staticStyle:{"font-size":"18px"},attrs:{type:"more"}})],2)],1),a.tag_name.length>0&&0==a.per_name.length?[s("div",{staticStyle:{width:"100%",padding:"0 10px","margin-bottom":"10px","white-space":"normal"}},t._l(a.tag_name,(function(e){return s("a-tag",{staticStyle:{"margin-bottom":"5px"},attrs:{color:"blue"}},[t._v("\n\t\t\t\t\t\t\t\t\t\t\t\t"+t._s(e)+"\n\t\t\t\t\t\t\t\t\t\t\t")])})),1)]:[a.tag_name.length>0?s("div",{staticStyle:{width:"100%",padding:"0 10px","margin-bottom":"10px","white-space":"normal"}},[t._v("\n\t\t\t\t\t\t\t\t\t\t\t公有标签：\n\t\t\t\t\t\t\t\t\t\t\t"),t._l(a.tag_name,(function(e){return s("a-tag",{staticStyle:{"margin-bottom":"5px"},attrs:{color:"blue"}},[t._v("\n\t\t\t\t\t\t\t\t\t\t\t\t"+t._s(e)+"\n\t\t\t\t\t\t\t\t\t\t\t")])}))],2):t._e(),a.per_name.length>0?s("div",{staticStyle:{width:"100%",padding:"0 10px","margin-bottom":"10px","white-space":"normal"}},[t._v("\n\t\t\t\t\t\t\t\t\t\t\t私有标签：\n\t\t\t\t\t\t\t\t\t\t\t"),t._l(a.per_name,(function(e){return s("a-tag",{staticStyle:{"margin-bottom":"5px"},attrs:{color:"blue"}},[t._v("\n\t\t\t\t\t\t\t\t\t\t\t\t"+t._s(e)+"\n\t\t\t\t\t\t\t\t\t\t\t")])}))],2):t._e()],s("div",{staticStyle:{background:"#F3F3F3",padding:"7px 10px",overflow:"hidden","font-size":"12px"}},["一直未沟通"==a.chat?s("span",{staticStyle:{float:"left",color:"red"}},[t._v(t._s(a.chat))]):t._e(),"一直未沟通"!=a.chat?s("span",{staticStyle:{float:"left"}},[s("span",{staticStyle:{color:"#1890FF"}},[t._v(t._s(a.chat))]),t._v("  沟通过")]):t._e(),a.has_remark?s("span",{staticStyle:{float:"right",width:"calc(100% - 100px)","white-space":"nowrap","text-overflow":"ellipsis",overflow:"hidden","word-break":"break-all"}},[t._v(t._s(a.employee+"（备注："+a.remark+"）"))]):s("span",{staticStyle:{float:"right"}},[t._v(t._s(a.employee))])])],2):t._e()}))],2)],1)],1)}))],2)],1)],1),s("div",{directives:[{name:"show",rawName:"v-show",value:2==t.tabKey,expression:"tabKey == 2"}],staticStyle:{height:"calc(100% - 122px)"}},[s("a-row",{ref:"searchArea2",staticStyle:{margin:"0 20px 20px",padding:"20px 20px 5px",background:"#FFF","line-height":"40px"}},[s("span",{staticClass:"select-option"},[s("label",{staticStyle:{"margin-right":"5px"}},[t._v("关键词：")]),s("a-input",{staticStyle:{width:"210px","margin-right":"5px"},attrs:{placeholder:"客户姓名/备注/公司名称"},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.find2(e)}},model:{value:t.name2,callback:function(e){t.name2=e},expression:"name2"}})],1),s("span",{staticClass:"select-option"},[s("label",{staticStyle:{"margin-right":"5px"}},[t._v("手机号：")]),s("a-input",{staticStyle:{width:"210px","margin-right":"5px"},attrs:{placeholder:"请输入手机号码"},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.find2(e)}},model:{value:t.phone2,callback:function(e){t.phone2=e},expression:"phone2"}})],1),s("span",{staticClass:"select-option"},[s("label",{staticStyle:{"margin-right":"5px"}},[t._v("联系时间：")]),s("a-select",{staticStyle:{width:"210px","margin-right":"5px"},attrs:{dropdownStyle:{width:"200px"}},model:{value:t.timeType2,callback:function(e){t.timeType2=e},expression:"timeType2"}},[s("a-select-option",{attrs:{value:0}},[t._v("全部客户")]),s("a-select-option",{attrs:{value:1}},[t._v("一直未沟通")]),s("a-select-option",{attrs:{value:2}},[t._v("近3天未联系")]),s("a-select-option",{attrs:{value:3}},[t._v("近7天未联系")]),s("a-select-option",{attrs:{value:4}},[t._v("近15天未联系")]),s("a-select-option",{attrs:{value:5}},[t._v("近30天未联系")]),s("a-select-option",{attrs:{value:6}},[t._v("近90天未联系")]),s("a-select-option",{attrs:{value:7}},[t._v("近180天未联系")]),s("a-select-option",{attrs:{value:8}},[t._v("近一年未联系")]),s("a-select-option",{attrs:{value:9}},[t._v("一年以上未联系")])],1)],1),s("span",{staticClass:"select-option"},[s("label",{staticStyle:{"margin-right":"5px"}},[t._v("排序方式：")]),s("a-select",{staticStyle:{width:"210px","margin-right":"5px"},model:{value:t.sortType2,callback:function(e){t.sortType2=e},expression:"sortType2"}},[s("a-select-option",{attrs:{value:0}},[t._v("创建时间从近到远")]),s("a-select-option",{attrs:{value:1}},[t._v("创建时间从远到近")]),s("a-select-option",{attrs:{value:2}},[t._v("最后一次跟进时间从近到远")]),s("a-select-option",{attrs:{value:3}},[t._v("最后一次跟进时间从远到近")])],1)],1),s("span",{staticClass:"select-option"},[s("label",{staticStyle:{"margin-right":"5px"}},[t._v("是否保护：")]),s("a-select",{staticStyle:{width:"210px","margin-right":"5px"},model:{value:t.other_way2,callback:function(e){t.other_way2=e},expression:"other_way2"}},[s("a-select-option",{attrs:{value:-1}},[t._v("全部")]),s("a-select-option",{attrs:{value:1}},[t._v("已保护")]),s("a-select-option",{attrs:{value:0}},[t._v("未保护")])],1)],1),s("span",{staticClass:"select-option"},[s("label",{staticStyle:{"margin-right":"5px"}},[t._v("部门成员：")]),s("a-button",{staticStyle:{width:"210px",margin:"0 10px 10px 0"},on:{click:t.showDepartmentList}},[t.chooseNum2>0?s("span",[t._v("已选择"+t._s(t.chooseUserNum2)+"名成员，"+t._s(t.chooseDepartmentNum2)+"个部门")]):s("span",[t._v("选择成员")])])],1),s("span",{staticClass:"select-option"},[s("label",{staticStyle:{"margin-right":"5px"}},[t._v("加入时间：")]),s("a-range-picker",{staticStyle:{width:"320px","margin-right":"5px"},attrs:{"show-time":{defaultValue:[t.moment("00:00:00","HH:mm:ss"),t.moment("23:59:59","HH:mm:ss")]},format:"YYYY-MM-DD HH:mm:ss",allowClear:"","disabled-date":t.disabledDate},on:{change:t.changeTime},model:{value:t.joinTime2,callback:function(e){t.joinTime2=e},expression:"joinTime2"}})],1),s("a-button",{staticStyle:{margin:"0 10px 10px 0"},attrs:{type:"primary"},on:{click:t.find2}},[t._v("查找")]),s("a-button",{on:{click:t.clear2}},[t._v("清空")])],1),s("div",{ref:"scroll2",staticClass:"content-bd"},[s("a-spin",{attrs:{tip:"Loading...",size:"large",spinning:t.isLoading2}},[s("a-empty",{directives:[{name:"show",rawName:"v-show",value:0==t.list2.length,expression:"list2.length == 0"}],staticStyle:{margin:"100px auto 0"}}),t._l(t.list2,(function(e,i){return s("div",{directives:[{name:"show",rawName:"v-show",value:t.list2.length>0,expression:"list2.length > 0"}],staticClass:"part",attrs:{id:"part"+e.id}},[s("a-spin",{attrs:{tip:"Loading...",spinning:e.isLoading}},[s("div",{staticClass:"part-title"},[s("span",{staticClass:"part-title-left"},[t._v(t._s(e.title)+"（"+t._s(e.count)+"）")]),0==e.status?s("a-tag",{staticStyle:{margin:"3px"},attrs:{color:"red"}},[t._v("已删除")]):t._e()],1),s("a-row",{directives:[{name:"perfect-scroll-bar",rawName:"v-perfect-scroll-bar",value:t.perfectScrollBarOptions,expression:"perfectScrollBarOptions"}],ref:"part_body2_"+e.id,refInFor:!0,staticClass:"part-body",staticStyle:{position:"absolute"},attrs:{id:"partBody"+e.id},on:{"ps-scroll-down":function(i){return t.handleScroll(e.id)},"ps-scroll-y":function(i){return t.changeScrollPosition(i,e.id)}}},[e.members&&0==e.members.length?s("a-empty",{staticStyle:{"margin-top":"100px"}}):t._e(),t._l(e.members,(function(i){return e.members&&e.members.length>0?s("div",{ref:"part_body2_card_"+i.cid,refInFor:!0,staticClass:"part-body-card2",attrs:{id:i.cid},on:{click:function(s){t.isJumpCustomDetail&&t.customDetail2(i.cid,e.id)}}},[s("div",{staticStyle:{overflow:"hidden",padding:"10px 5px 10px 10px"}},[s("a-avatar",{staticStyle:{float:"left",width:"47px","margin-right":"5px",height:"47px"},attrs:{src:t.avatar,shape:"square"}}),s("div",{staticStyle:{float:"left",width:"135px","font-size":"12px"}},[s("div",{staticStyle:{"word-wrap":"break-word","word-break":"break-all","white-space":"normal"}},[s("a-popover",{attrs:{placement:"top"}},[s("template",{slot:"content"},[s("p",[t._v(t._s(i.name))])]),s("span",[t._v(t._s(i.name))])],2),1==i.is_protect?s("a-tag",{staticStyle:{margin:"0 0 0 5px"},attrs:{color:"green"}},[t._v("已保护\n\t\t\t\t\t\t\t\t\t\t\t\t")]):t._e()],1),""!=i.company_name?s("a-tag",{staticStyle:{overflow:"hidden","white-space":"nowrap","text-overflow":"ellipsis","max-width":"100%","margin-top":"5px"},attrs:{color:"orange"}},[t._v("\n\t\t\t\t\t\t\t\t\t\t\t\t"+t._s(i.company_name)+"\n\t\t\t\t\t\t\t\t\t\t\t")]):t._e()],1),s("a-progress",{staticStyle:{float:"left","margin-left":"5px","font-size":"12px","margin-right":"5px"},attrs:{type:"circle",percent:Number(i.close_rate),width:40}}),s("a-popover",{directives:[{name:"has",rawName:"v-has",value:"client-info",expression:"'client-info'"}],attrs:{placement:"right"}},[s("template",{slot:"content"},[s("div",[s("p",{staticClass:"url-btn",staticStyle:{"margin-bottom":"6px"},on:{click:function(s){return t.addRecord(i.cid,e.id,i.close_rate,i.nickname)}}},[t._v("\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t添加跟进")]),s("p",{staticClass:"url-btn",staticStyle:{"margin-bottom":"6px"},on:{click:function(s){return t.customDetail2(i.cid,e.id)}}},[t._v("\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t客户详情")]),0==i.is_protect?s("p",{directives:[{name:"has",rawName:"v-has",value:"client-assign",expression:"'client-assign'"}],staticClass:"url-btn",staticStyle:{"margin-bottom":"6px"},on:{click:function(s){return t.handleMenuClick(i,e.id,0)}}},[t._v("\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t客户转交给成员")]):t._e(),0==i.is_protect?s("p",{directives:[{name:"has",rawName:"v-has",value:"client-backHighSea",expression:"'client-backHighSea'"}],staticClass:"url-btn",staticStyle:{"margin-bottom":"6px"},on:{click:function(e){return t.assignHighSea(i,0)}}},[t._v("\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t客户退回公海")]):t._e(),0==i.is_protect&&1==i.is_show&&1==i.is_rest?s("p",{directives:[{name:"has",rawName:"v-has",value:"client-protect",expression:"'client-protect'"}],staticClass:"url-btn",on:{click:function(s){return t.setProtect(i,e.id,0)}}},[t._v("\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t设为保护对象")]):t._e(),1==i.is_protect?s("p",{directives:[{name:"has",rawName:"v-has",value:"client-protect",expression:"'client-protect'"}],staticClass:"url-btn",on:{click:function(s){return t.cancelProtect(i,e.id,0)}}},[t._v("\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t取消保护")]):t._e()])]),s("a-icon",{staticStyle:{"font-size":"18px"},attrs:{type:"more"}})],2)],1),i.tag_name.length>0?[s("div",{staticStyle:{width:"100%",padding:"0 10px","margin-bottom":"10px","white-space":"normal"}},t._l(i.tag_name,(function(e){return s("a-tag",{staticStyle:{"margin-bottom":"5px"},attrs:{color:"blue"}},[t._v("\n\t\t\t\t\t\t\t\t\t\t\t\t"+t._s(e)+"\n\t\t\t\t\t\t\t\t\t\t\t")])})),1)]:t._e(),s("div",{staticStyle:{background:"#F3F3F3",padding:"7px 10px",overflow:"hidden","font-size":"12px"}},["一直未沟通"==i.chat?s("span",{staticStyle:{float:"left",color:"red"}},[t._v(t._s(i.chat))]):t._e(),"一直未沟通"!=i.chat?s("span",{staticStyle:{float:"left"}},[s("span",{staticStyle:{color:"#1890FF"}},[t._v(t._s(i.chat))]),t._v("  沟通过")]):t._e(),i.remark?s("span",{staticStyle:{float:"right",width:"calc(100% - 100px)","white-space":"nowrap","text-overflow":"ellipsis",overflow:"hidden","word-break":"break-all"}},[t._v(t._s(i.employee+"（备注："+i.remark+"）"))]):s("span",{staticStyle:{float:"right"}},[t._v(t._s(i.employee))])])],2):t._e()}))],2)],1)],1)}))],2)],1)],1),s("a-drawer",{attrs:{title:t.drawTitle,placement:"right",closable:!1,visible:t.recordVisible,width:"460px!important"},on:{close:t.onClose}},[s("div",{staticStyle:{height:"calc(100% - 51px)",overflow:"auto"}},[s("div",{staticStyle:{padding:"20px 20px 0"}},[t._v("\n\t\t\t\t\t跟进状态：\n\t\t\t\t\t"),s("a-select",{staticStyle:{width:"180px"},model:{value:t.status,callback:function(e){t.status=e},expression:"status"}},t._l(t.follows,(function(e){return s("a-select-option",{attrs:{value:e.id,disabled:1!=t.canEdit}},[t._v("\n\t\t\t\t\t\t\t"+t._s(e.title)+"\n\t\t\t\t\t\t")])})),1)],1),s("div",{staticStyle:{padding:"20px"}},[t._v("\n\t\t\t\t\t预估成交率：\n\t\t\t\t\t"),s("a-input-number",{staticStyle:{width:"165px","margin-right":"5px"},attrs:{placeholder:"请输入预估成交率"},model:{value:t.close_rate,callback:function(e){t.close_rate=e},expression:"close_rate"}}),t._v("\n\t\t\t\t\t%\n\t\t\t\t")],1),s("div",{staticClass:"textArea"},[t.showTextArea?s("a-textarea",{attrs:{placeholder:"添加跟进记录，1000字以内","auto-size":{minRows:5,maxRows:20},maxLength:1e3},on:{change:t.changeText}}):t._e(),s("div",{staticStyle:{"text-align":"right","margin-top":"10px"}},[t._v(t._s(t.followMsg.length)+"/1000\n\t\t\t\t\t")])],1),s("div",{staticClass:"textArea-btn"},[s("a-upload",{staticClass:"upload-file",attrs:{action:"https://www.mocky.io/v2/5cc8019d300000980a055e76",listType:"picture-card",beforeUpload:t.beforeUpload2,fileList:t.imageUrl2},on:{preview:t.handlePreview2,change:function(e){return t.changeMsg2(e)}}},[t.imageUrl2.length<9?s("div",[s("a-button",[s("a-icon",{attrs:{type:"link"}}),t._v("\n\t\t\t\t\t\t\t\t图片 "+t._s(t.imgNum2)+"/9\n\t\t\t\t\t\t\t")],1)],1):t._e()]),s("a-modal",{attrs:{visible:t.previewVisible2,footer:null},on:{cancel:t.handleCancel2}},[s("img",{staticStyle:{width:"100%"},attrs:{alt:"example",src:t.previewImage2}})])],1),s("div",{directives:[{name:"has",rawName:"v-has",value:"client-add-tag",expression:"'client-add-tag'"}],staticStyle:{padding:"0 0 20px 20px"}},[s("div",{staticStyle:{"margin-bottom":"10px"}},[t._v("客户标签：")]),s("corpChooseTag",{ref:"chooseTag",attrs:{callback:t.modalVisibleChange4,hasChoose:t.tag_arr}})],1)]),s("div",{staticClass:"footer"},[s("a-button",{staticStyle:{marginRight:"8px"},on:{click:t.onClose}},[t._v("\n\t\t\t\t\t取消\n\t\t\t\t")]),s("a-button",{attrs:{type:"primary"},on:{click:t.onSure}},[t._v("\n\t\t\t\t\t确定\n\t\t\t\t")])],1)])],1),s("chooseDepartment",{ref:"user",attrs:{show:t.showModalDepartment,chooseNum:t.chooseNum,callback:t.modalVisibleChange,is_special:1}}),s("a-modal",{attrs:{title:"选择成员"},on:{cancel:t.chooseStaffCancel,ok:t.chooseStaffHandel},model:{value:t.showModalStaff,callback:function(e){t.showModalStaff=e},expression:"showModalStaff"}},[s("div",{staticStyle:{color:"red","margin-bottom":"10px"}},[t._v("指定分配给具有外部联系人权限的成员")]),t.showModalStaff?s("chooseStaffSelect",{ref:"staff",attrs:{index:0,index2:0,type:1,callback:t.selectStaffCallback}}):t._e()],1)],1)},a=[],o=(i("6762"),i("2fdb"),i("c5f6"),i("ac4d"),i("8a81"),i("96cf"),i("3b8d")),n=(i("28a5"),i("ac6a"),i("7f7f"),i("c75b")),r=i("487a"),c=i.n(r),l=i("c1df"),h=i.n(l),p=i("0cfc"),d=i("4bef"),u=i.n(d),m=i("95204");function g(t){return new Promise((function(e,i){var s=new FileReader;s.readAsDataURL(t),s.onload=function(){return e(s.result)}}))}var f={directives:{infiniteScroll:c.a},name:"customCrmKanban",components:{chooseDepartment:n["a"],corpChooseTag:p["a"],chooseStaffSelect:m["a"]},data:function(){var t=localStorage.getItem("corpId")?localStorage.getItem("corpId"):"";return{moment:h.a,corpInfo:[],corpId:t,corpLen:JSON.parse(localStorage.getItem("corpArr")).length,isLoading:!1,name:"",phone:"",is_fans:0,timeType:0,sortType:2,other_way:-1,joinTime:null,showModalDepartment:!1,chooseNum:0,chooseUserNum:0,chooseDepartmentNum:0,checkedList:[],user:[],startX:0,scrollX:0,recordVisible:!1,showTextArea:!1,status:[],follows:[],followMsg:"",followMsgTimeout:"",imageUrl2:[],file2:[],imgNum2:0,previewVisible2:!1,previewImage2:"",isImg2:!0,submitDisabled2:!0,close_rate:"",list:[],timeout:"",page:1,id:"",count:"",cid:"",drawTitle:"",isMasterAccount:localStorage.getItem("isMasterAccount")?localStorage.getItem("isMasterAccount"):"",customItem:{corpId:localStorage.getItem("corpId")?localStorage.getItem("corpId"):"",name:"",phone:"",timeType:0,sortType:2,other_way:-1,checkedList:[],user:[],chooseNum:0,chooseUserNum:0,chooseDepartmentNum:0,joinTime:null},perfectScrollBarOptions:{suppressScrollX:!0,minScrollbarLength:15},scrollData:[],isJumpCustomDetail:!0,tag_arr:[],tabKey:1,isLoading2:!1,list2:[],page2:1,id2:"",count2:"",scrollData2:[],cid2:"",avatar:u.a,name2:"",phone2:"",timeType2:0,sortType2:2,other_way2:-1,joinTime2:null,chooseNum2:0,chooseUserNum2:0,chooseDepartmentNum2:0,checkedList2:[],user2:[],customItem2:{name:"",phone:"",timeType:0,sortType:2,other_way:-1,checkedList:[],user:[],chooseNum:0,chooseUserNum:0,chooseDepartmentNum:0,joinTime:null},assignType:1,assignRecord:"",showModalStaff:!1,userId:[],userName:[],canEdit:1}},methods:{changeWx:function(t){this.corpId=t},showDepartmentList:function(){1==this.tabKey?(this.$refs.user.rightIdList=JSON.parse(JSON.stringify(this.checkedList)),this.$refs.user.rightList=JSON.parse(JSON.stringify(this.user))):2==this.tabKey&&(this.$refs.user.rightIdList=JSON.parse(JSON.stringify(this.checkedList2)),this.$refs.user.rightList=JSON.parse(JSON.stringify(this.user2))),this.showModalDepartment=!0},modalVisibleChange:function(t,e,i,s,a){"ok"==t&&(1==this.tabKey?(this.checkedList=e,this.user=a,this.chooseNum=parseInt(i)+parseInt(s),this.chooseUserNum=i,this.chooseDepartmentNum=s):2==this.tabKey&&(this.checkedList2=e,this.user2=a,this.chooseNum2=parseInt(i)+parseInt(s),this.chooseUserNum2=i,this.chooseDepartmentNum2=s)),this.showModalDepartment=!1},disabledDate:function(t){return t&&t>h()().endOf("day")},changeTime:function(t,e){this.joinTime=t},find:function(){var t=this;this.id="",this.customItem.corpId=this.corpId,this.customItem.name=this.name,this.customItem.phone=this.phone,this.customItem.timeType=this.timeType,this.customItem.sortType=this.sortType,this.customItem.other_way=this.other_way,this.customItem.checkedList=this.checkedList,this.customItem.user=this.user,this.customItem.chooseNum=this.chooseNum,this.customItem.chooseUserNum=this.chooseUserNum,this.customItem.chooseDepartmentNum=this.chooseDepartmentNum,this.customItem.joinTime=this.joinTime,this.scrollData=[],this.cid="",this.getAccount(),this.$nextTick((function(){t.list.map((function(e){t.changeScrollTop(!1,0,e.id)}))}));var e=document.getElementsByClassName("part-body-card");Array.prototype.forEach.call(e,(function(t){t.style.border=""}))},clear:function(){var t=this;this.corpId=localStorage.getItem("corpId")?localStorage.getItem("corpId"):"",this.name="",this.id="",this.cid="",this.phone="",this.is_fans=0,this.timeType=0,this.sortType=2,this.other_way=-1,this.checkedList=[],this.user=[],this.chooseNum=0,this.chooseUserNum=0,this.chooseDepartmentNum=0,this.joinTime=null,this.customItem.corpId=this.corpId,this.customItem.name=this.name,this.customItem.phone=this.phone,this.customItem.timeType=this.timeType,this.customItem.sortType=this.sortType,this.customItem.other_way=this.other_way,this.customItem.checkedList=this.checkedList,this.customItem.user=this.user,this.customItem.chooseNum=this.chooseNum,this.customItem.chooseUserNum=this.chooseUserNum,this.customItem.chooseDepartmentNum=this.chooseDepartmentNum,this.customItem.joinTime=this.joinTime,this.scrollData=[],this.getAccount(),this.$nextTick((function(){t.list.map((function(e){t.changeScrollTop(!1,0,e.id)}))}));var e=document.getElementsByClassName("part-body-card");Array.prototype.forEach.call(e,(function(t){t.style.border=""}))},groupSend:function(t){this.customItem.id=t,this.$router.push({path:"/massMessage/add",query:{item:this.customItem}})},addRecord:function(t,e,i,s){1==this.tabKey?(this.cid=t,this.id=e):2==this.tabKey&&(this.cid2=t,this.id2=e),this.status=1,this.getFollowStatus(e,i),this.canEditFollow(t),this.drawTitle=s,this.followMsg="";var a=document.getElementsByClassName("part-body-card");Array.prototype.forEach.call(a,(function(t){t.style.border=""}))},changeText:function(t){var e=this;clearTimeout(this.followMsgTimeout),this.followMsgTimeout=setTimeout((function(){e.followMsg=t.target.value}),3)},modalVisibleChange4:function(t,e){"ok"==t&&""!=e&&(this.tag_arr=e.split(","))},onSure:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(){var e,i,s,a,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(""!=this.followMsg.trim()||0!=this.file2.length){t.next=3;break}return this.$message.error("跟进内容不能为空！"),t.abrupt("return",!1);case 3:if(""!=this.status){t.next=6;break}return this.$message.warning("请选择跟进状态！"),t.abrupt("return",!1);case 6:if(e=/^(?:0|[1-9][0-9]?|100)$/,null==this.close_rate||""==this.close_rate||!(this.close_rate<0||this.close_rate>100)&&e.test(this.close_rate)){t.next=10;break}return this.$message.warning("成交率必须为0-100正整数"),t.abrupt("return",!1);case 10:return i="",s="",1==this.tabKey?(i="work-external-contact-follow-user/custom-follow-record-set",s=this.cid):2==this.tabKey&&(i="public-sea-customer/follow-record-set",s=this.cid2),t.next=15,this.axios.post(i,{isMasterAccount:this.isMasterAccount,uid:localStorage.getItem("uid"),cid:s,sub_id:localStorage.getItem("sub_id"),record_id:this.record_id,record:this.followMsg,file:this.file2,follow_id:this.status,close_rate:this.close_rate,corp_id:this.corpId,tag_ids:this.tag_arr});case 15:a=t.sent,o=a.data,0!=o.error?this.$message.error(o.error_msg):(this.recordVisible=!1,this.canEditFollow(s),1==this.tabKey?this.id==this.status?this.getAccount(this.id):(this.getAccount(this.id),this.getAccount(this.status)):2==this.tabKey&&(this.id2==this.status?this.getCustomList(this.id2):(this.getCustomList(this.id2),this.getCustomList(this.status))),this.followMsg="",this.file2=[],this.imageUrl2=[],this.imgNum2=0,this.close_rate="",this.showTextArea=!1);case 18:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),onClose:function(){this.recordVisible=!1,this.status=1,this.followMsg="",this.file2=[],this.imageUrl2=[],this.imgNum2=0,this.close_rate="",this.tag_arr=[],this.showTextArea=!1,this.id="",this.id2="",this.cid="",this.cid2=""},changeMsg2:function(t){-1!=this.imageUrl2.indexOf(t.file)&&this.file2.splice(this.imageUrl2.indexOf(t.file),1),this.isImg2&&(this.imageUrl2=t.fileList,this.imgNum2=t.fileList.length);var e=!0,i=!1,s=void 0;try{for(var a,o=this.imageUrl2[Symbol.iterator]();!(e=(a=o.next()).done);e=!0){var n=a.value;"error"==n.status&&(n.status="done")}}catch(r){i=!0,s=r}finally{try{e||null==o.return||o.return()}finally{if(i)throw s}}},uploadMaterial2:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(e){var i,s,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return i=new FormData,i.append("uid",localStorage.getItem("uid")),i.append("fileInfo",e),t.next=5,this.axios.post("sub-user/upload-image",i);case 5:s=t.sent,a=s.data,0==a.error?a.data&&this.file2.push(a.data.local_path):this.$message.error(a.error_msg);case 8:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),beforeUpload2:function(t){if("image/png"!=t.type&&"image/jpg"!=t.type&&"image/jpeg"!=t.type)return this.$message.error("图片类型仅支持png、jpg、jpeg类型！"),this.isImg2=!1,!1;var e=t.size/1024/1024<2;return e?t.size<5?(this.$message.error("上传文件大小不符！"),this.isImg2=!1,!1):(this.isImg2=!0,this.uploadMaterial2(t),e):(this.$message.error("图片不超过2M！"),this.isImg2=!1,!1)},handleCancel2:function(){this.previewVisible2=!1},handlePreview2:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.url||e.preview){t.next=4;break}return t.next=3,g(e.originFileObj);case 3:e.preview=t.sent;case 4:this.previewImage2=e.url||e.preview,this.previewVisible2=!0;case 6:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),customDetail:function(t,e){this.cid=t,this.id=e,this.$forceUpdate();var i=document.getElementsByClassName("part-body-card");Array.prototype.forEach.call(i,(function(t){t.style.border=""})),this.$router.push("/customManage/detail?id="+t)},handleMenuClick:function(t,e,i){this.assignRecord=t,this.assignType=i,1==i?(this.id=e,this.cid=t.cid):0==i&&(this.id2=e,this.cid2=t.cid),this.showModalStaff=!0;for(var s=document.getElementsByClassName("ant-popover"),a=0;a<s.length;a++)s[a].style.display="none"},selectStaffCallback:function(t,e){var i=this;"ok"==t&&(this.userId=e,this.$nextTick((function(){i.userName=i.$refs.staff.$el.innerText})))},chooseStaffCancel:function(){this.userId="",this.userName="",this.assignRecord="",this.showModalStaff&&(this.$refs.staff.userId=[],this.showModalStaff=!1),this.id="",this.id2="",this.cid="",this.cid2=""},chooseStaffHandel:function(){var t=this,e="";if(0==this.userId.length)return this.$message.error("请先选择成员"),!1;0==this.assignType?e="一旦确定将【"+t.assignRecord.name+"】转交给【"+this.userName+"】，则进入该成员的客户列表。确定转交吗？":1==this.assignType&&(e="一旦确定将【"+t.assignRecord.nickname+"】转交给【"+this.userName+"】，则进入该成员的客户列表。确定转交吗？"),t.showModalStaff=!1,t.$confirm({title:e,okText:"确定",okType:"primary",cancelText:"取消",onOk:function(){t.assignStaff()},onCancel:function(){t.userId=[],t.userName="",t.showModalStaff=!0}})},assignStaff:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(){var e,i,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.axios.post("public-sea-customer/transfer",{uid:localStorage.getItem("uid"),corp_id:this.corpId,user_id:this.userId,type:this.assignType,follow_id:this.assignRecord.cid});case 2:e=t.sent,i=e.data,0!=i.error?(this.userId=[],this.userName="",this.$message.error(i.error_msg)):(s=this,this.$success({title:i.data.textHtml,onOk:function(){s.id="",s.id2="",s.cid="",s.cid2="",s.userId=[],s.userName=""}}),this.chooseStaffCancel(),0==this.assignType?this.getCustomList():1==this.assignType&&this.getAccount());case 5:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),assignHighSea:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(e,i,s){var a,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return 0==s?(this.id2=i,this.cid2=e.cid):1==s&&(this.id=i,this.cid=e.cid),t.next=3,this.axios.post("public-sea-customer/give-up",{uid:localStorage.getItem("uid"),corp_id:this.corpId,type:s,follow_id:e.cid});case 3:a=t.sent,o=a.data,0!=o.error?this.$message.error(o.error_msg):(this.$success({title:o.data.textHtml}),this.id="",this.id2="",this.cid="",this.cid2="",0==s?this.getCustomList():1==s&&this.getAccount());case 6:case"end":return t.stop()}}),t,this)})));function e(e,i,s){return t.apply(this,arguments)}return e}(),setProtect:function(t,e,i){this.assignType=i,this.assignRecord=t,1==i?(this.cid=t.cid,this.id=e):0==i&&(this.cid2=t.cid,this.id2=e);for(var s=document.getElementsByClassName("ant-popover"),a=0;a<s.length;a++)s[a].style.display="none";var o=this,n="";n=1==t.is_rest?1==this.assignType?"确定保护【"+t.nickname+"】永不进入公海池吗？":"确定保护【"+t.name+"】永不进入公海池吗？":"永不进入公海池的客户数已达上限，无法再设置。",o.$confirm({title:n,okText:"确定",okType:"primary",cancelText:"取消",onOk:function(){o.protectStaff()},onCancel:function(){o.cid="",o.id="",o.cid2="",o.id2=""}})},protectStaff:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(){var e,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.axios.post("public-sea-customer/protect",{uid:localStorage.getItem("uid"),isMasterAccount:localStorage.getItem("isMasterAccount"),sub_id:localStorage.getItem("sub_id"),corp_id:this.corpId,type:this.assignType,follow_id:this.assignRecord.cid});case 2:e=t.sent,i=e.data,0!=i.error?this.$message.error(i.error_msg):(this.$success({title:i.data.textHtml}),this.assignRecord="",0==this.assignType?this.getCustomList():1==this.assignType&&this.getAccount());case 5:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),cancelProtect:function(t,e,i){this.assignType=i,this.assignRecord=t,1==i?(this.cid=t.cid,this.id=e):0==i&&(this.cid2=t.cid,this.id2=e);for(var s=document.getElementsByClassName("ant-popover"),a=0;a<s.length;a++)s[a].style.display="none";var o=this,n="一旦取消保护，当符合客户回收规则后，客户将自动进入公海池，被其他同事认领，确定取消保护吗？";o.$confirm({title:n,okText:"确定",okType:"primary",cancelText:"取消",onOk:function(){o.cancelProtectStaff()},onCancel:function(){o.cid="",o.id="",o.cid2="",o.id2=""}})},cancelProtectStaff:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(){var e,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.axios.post("public-sea-customer/no-protect",{uid:localStorage.getItem("uid"),isMasterAccount:localStorage.getItem("isMasterAccount"),sub_id:localStorage.getItem("sub_id"),corp_id:this.corpId,type:this.assignType,follow_id:this.assignRecord.cid});case 2:e=t.sent,i=e.data,0!=i.error?this.$message.error(i.error_msg):(this.$success({title:i.data.textHtml}),this.assignRecord="",0==this.assignType?this.getCustomList():1==this.assignType&&this.getAccount());case 5:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),getAccount:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(e){var i,s,a,o,n,r,c,l,h,p,d,u,m=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(""==this.id)this.isLoading=!0;else for(i=0;i<this.list.length;i++)this.list[i].isLoading=!1,this.list[i].id!=this.id&&this.list[i].id!=e||(this.list[i].isLoading=!0);if(this.$forceUpdate(),s=1,""!=this.id&&this.list.length>0)for(a=0;a<this.list.length;a++)this.list[a].id==this.id&&(s=this.list[a].page),this.list[a].id==e&&(this.list[a].page=1,s=1);else s=1;return e&&(this.cid=""),t.next=7,this.axios.post("work-external-contact-follow-user/custom-board",{uid:localStorage.getItem("uid"),isMasterAccount:this.isMasterAccount,sub_id:localStorage.getItem("sub_id"),corp_id:this.corpId,name:this.name,phone:this.phone,is_fans:this.is_fans,user_ids:this.checkedList,sort:this.sortType,is_protect:this.other_way,day:this.timeType,page:s,id:e||this.id,cid:this.cid,start_time:this.joinTime&&this.joinTime.length>1?this.joinTime[0].format("YYYY-MM-DD HH:mm:ss"):"",end_time:this.joinTime&&this.joinTime.length>1?this.joinTime[1].format("YYYY-MM-DD HH:mm:ss"):""});case 7:if(o=t.sent,n=o.data,0!=n.error){if(""==this.id)this.isLoading=!1;else for(r=0;r<this.list.length;r++)this.list[r].id==this.id&&(this.list[r].isLoading=!1);this.$message.error(n.message)}else{if(c=this,""==this.cid){if(1==s)if(e)for(l=0;l<c.list.length;l++)c.list[l].id==e&&(c.list[l].members=n.data[0].members,c.list[l].count=n.data[0].count,c.list[l]["isLoading"]=!1);else if(this.id)for(h=0;h<c.list.length;h++)c.list[h].id==this.id&&(c.list[h].members=n.data[0].members,c.list[h].count=n.data[0].count,c.list[h]["isLoading"]=!1);else c.list=n.data,c.list.map((function(t,e){t.page=1,t.isLoading=!1,c.scrollData[e]={position:null}}));s>1&&c.list.map((function(t,e){t.id&&t.id==c.id&&(t.isLoading=!1,t.members.length<t.count&&(t.members=t.members.concat(n.data[0].members)))}))}else for(p=0;p<c.list.length;p++)if(c.list[p].id==c.id)for(c.list[p].isLoading=!1,d=0;d<c.list[p].members.length;d++)c.list[p].members[d].cid==c.cid&&(c.list[p].members[d]=JSON.parse(JSON.stringify(n.data[0])));e==localStorage.getItem("followid")&&localStorage.removeItem("followid"),c.isLoading=!1,this.$forceUpdate(),u=this.$refs.searchArea.$el.clientHeight,this.$refs.scroll.style.height="calc(100% - "+u+"px)",""!=this.cid&&this.$nextTick((function(){var t=m.$refs["part_body_card_"+m.cid][0];t.style.boxShadow="0 2px 8px 0 rgba(0, 0, 0, .12)",t.style.border="2px solid #1890ff"}))}case 10:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),handleScroll:function(t){var e=this;if(1==this.tabKey){var i=this.$refs["part_body_"+t][0].$el._ps_.reach.y;t!=this.id&&(this.id=t,this.list.map((function(t){t.id==e.id&&(e.page=t.page)}))),this.list.map((function(t){t.id==e.id&&(e.count=t.count)})),"end"===i&&this.count/15>this.page&&(++this.page,this.list.map((function(t){t.id==e.id&&(t.page=e.page)})),this.cid="",this.corpId=this.customItem.corpId,this.name=this.customItem.name,this.phone=this.customItem.phone,this.timeType=this.customItem.timeType,this.sortType=this.customItem.sortType,this.other_way=this.customItem.other_way,this.checkedList=this.customItem.checkedList,this.user=this.customItem.user,this.chooseNum=this.customItem.chooseNum,this.chooseUserNum=this.customItem.chooseUserNum,this.chooseDepartmentNum=this.customItem.chooseDepartmentNum,this.joinTime=this.customItem.joinTime,this.getAccount())}else if(2==this.tabKey){var s=this.$refs["part_body2_"+t][0].$el._ps_.reach.y;t!=this.id2&&(this.id2=t,this.list2.map((function(t){t.id==e.id2&&(e.page2=t.page)}))),this.list2.map((function(t){t.id==e.id2&&(e.count2=t.count)})),"end"===s&&this.count2/15>this.page2&&(++this.page2,this.list2.map((function(t){t.id==e.id2&&(t.page=e.page2)})),this.cid2="",this.name2=this.customItem2.name,this.phone2=this.customItem2.phone,this.timeType2=this.customItem2.timeType,this.sortType2=this.customItem2.sortType,this.other_way2=this.customItem2.other_way,this.checkedList2=this.customItem2.checkedList,this.user2=this.customItem2.user,this.chooseNum2=this.customItem2.chooseNum,this.chooseUserNum2=this.customItem2.chooseNum,this.chooseUserNum2=this.customItem2.chooseNum,this.joinTime2=this.customItem2.joinTime,this.getCustomList())}},getFollowStatus:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(e,i){var s,a,o,n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.axios.post("custom-field/follow",{uid:localStorage.getItem("uid"),status:1,id:e});case 2:if(s=t.sent,a=s.data,0==a.error){t.next=8;break}this.$message.error(a.error_msg),t.next=24;break;case 8:this.follows=a.data.follow,o=0;case 10:if(!(o<this.follows.length)){t.next=17;break}if(this.follows[o].id!=e){t.next=14;break}return this.status=Number(e),t.abrupt("break",17);case 14:o++,t.next=10;break;case 17:for(""==this.status&&(this.status=Number(this.follows[0].id)),this.close_rate=i,this.recordVisible=!0,this.tag_arr=[],this.showTextArea=!0,n=document.getElementsByClassName("ant-popover"),r=0;r<n.length;r++)n[r].style.display="none";case 24:case"end":return t.stop()}}),t,this)})));function e(e,i){return t.apply(this,arguments)}return e}(),changeScrollPosition:function(t,e){var i=this;i.list.map((function(s,a){s.id==e&&i.scrollData.length>0&&"undefined"!=typeof i.scrollData[a].position&&(i.scrollData[a].position=t.srcElement.scrollTop)}))},changeScrollTop:function(){var t=this,e=(arguments.length>0&&void 0!==arguments[0]&&arguments[0],arguments.length>1&&void 0!==arguments[1]?arguments[1]:null),i=arguments.length>2?arguments[2]:void 0;1==this.tabKey?this.$nextTick((function(){t.$refs["part_body_"+i][0].$el.scrollTop=e})):2==this.tabKey&&this.$nextTick((function(){t.$refs["part_body2_"+i][0].$el.scrollTop=e}))},changeTab:function(t){this.tabKey=t,this.corpId=localStorage.getItem("corpId")?localStorage.getItem("corpId"):"",1==this.tabKey?this.clear():2==this.tabKey&&this.clear2()},getCustomList:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(e){var i,s,a,o,n,r,c,l,h,p,d,u,m=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(""==this.id2)this.isLoading2=!0;else for(i=0;i<this.list2.length;i++)this.list2[i].isLoading=!1,this.list2[i].id!=this.id2&&this.list2[i].id!=e||(this.list2[i].isLoading=!0);if(this.$forceUpdate(),s=1,""!=this.id2&&this.list2.length>0)for(a=0;a<this.list2.length;a++)this.list2[a].id==this.id2&&(s=this.list2[a].page),this.list2[a].id==e&&(this.list2[a].page=1,s=1);else s=1;return e&&(this.cid2=""),t.next=7,this.axios.post("public-sea-customer/custom-board",{uid:localStorage.getItem("uid"),isMasterAccount:this.isMasterAccount,sub_id:localStorage.getItem("sub_id"),corp_id:localStorage.getItem("corpId")?localStorage.getItem("corpId"):"",name:this.name2,phone:this.phone2,user_ids:this.checkedList2,sort:this.sortType2,is_protect:this.other_way2,day:this.timeType2,page:s,id:e||this.id2,cid:this.cid2,start_time:this.joinTime2&&this.joinTime2.length>1?this.joinTime2[0].format("YYYY-MM-DD HH:mm:ss"):"",end_time:this.joinTime2&&this.joinTime2.length>1?this.joinTime2[1].format("YYYY-MM-DD HH:mm:ss"):""});case 7:if(o=t.sent,n=o.data,0!=n.error){if(""==this.id2)this.isLoading2=!1;else for(r=0;r<this.list2.length;r++)this.list2[r].id==this.id2&&(this.list2[r].isLoading=!1);this.$message.error(n.message)}else{if(c=this,""==this.cid2){if(1==s)if(e)for(l=0;l<c.list2.length;l++)c.list2[l].id==e&&(c.list2[l].members=JSON.parse(JSON.stringify(n.data[0].members)),c.list2[l].count=n.data[0].count,c.list2[l]["isLoading"]=!1);else if(this.id2)for(h=0;h<c.list2.length;h++)c.list2[h].id==this.id2&&(c.list2[h].members=JSON.parse(JSON.stringify(n.data[0].members)),c.list2[h].count=n.data[0].count,c.list2[h]["isLoading"]=!1);else c.list2=n.data,c.list2.map((function(t,e){t.page=1,t.isLoading=!1,c.scrollData2[e]={position:null}}));s>1&&c.list2.map((function(t,e){t.id&&t.id==c.id2&&(t.isLoading=!1,t.members.length<t.count&&(t.members=t.members.concat(n.data[0].members)))}))}else for(p=0;p<c.list2.length;p++)if(c.list2[p].id==c.id2)for(c.list2[p].isLoading=!1,d=0;d<c.list2[p].members.length;d++)c.list2[p].members[d].cid==c.cid2&&(c.list2[p].members[d]=JSON.parse(JSON.stringify(n.data[0])));e==localStorage.getItem("followid")&&localStorage.removeItem("followid"),c.isLoading2=!1,this.$forceUpdate(),u=this.$refs.searchArea2.$el.clientHeight,this.$refs.scroll2.style.height="calc(100% - "+u+"px)",""!=this.cid2&&this.$nextTick((function(){var t=m.$refs["part_body2_card_"+m.cid2][0];t.style.boxShadow="0 2px 8px 0 rgba(0, 0, 0, .12)",t.style.border="2px solid #1890ff"}))}case 10:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),customDetail2:function(t,e){this.cid2=t,this.id2=e,this.$forceUpdate();var i=document.getElementsByClassName("part-body-card");Array.prototype.forEach.call(i,(function(t){t.style.border=""})),this.$router.push("/customManage/noCustomDetail?id="+t)},find2:function(){var t=this;this.id2="",this.scrollData2=[],this.cid2="",this.customItem2.name=this.name2,this.customItem2.phone=this.phone2,this.customItem2.timeType=this.timeType2,this.customItem2.sortType=this.sortType2,this.customItem2.other_way=this.other_way2,this.customItem2.checkedList=this.checkedList2,this.customItem2.user=this.user2,this.customItem2.chooseNum=this.chooseNum2,this.customItem2.chooseUserNum=this.chooseUserNum2,this.customItem2.chooseDepartmentNum=this.chooseDepartmentNum2,this.customItem2.joinTime=this.joinTime2,this.getCustomList(),this.$nextTick((function(){t.list2.map((function(e){t.changeScrollTop(!1,0,e.id)}))}));var e=document.getElementsByClassName("part-body-card2");Array.prototype.forEach.call(e,(function(t){t.style.border=""}))},clear2:function(){var t=this;this.name2="",this.id2="",this.cid2="",this.phone2="",this.timeType2=0,this.sortType2=2,this.other_way2=-1,this.checkedList2=[],this.user2=[],this.chooseNum2=0,this.chooseUserNum2=0,this.chooseDepartmentNum2=0,this.joinTime2=null,this.scrollData2=[],this.customItem2.name=this.name2,this.customItem2.phone=this.phone2,this.customItem2.timeType=this.timeType2,this.customItem2.sortType=this.sortType2,this.customItem2.other_way=this.other_way2,this.customItem2.checkedList=this.checkedList2,this.customItem2.user=this.user2,this.customItem2.chooseNum=this.chooseNum2,this.customItem2.chooseUserNum=this.chooseUserNum2,this.customItem2.chooseDepartmentNum=this.chooseDepartmentNum2,this.customItem2.joinTime=this.joinTime2,this.getCustomList(),this.$nextTick((function(){t.list2.map((function(e){t.changeScrollTop(!1,0,e.id)}))}));var e=document.getElementsByClassName("part-body-card2");Array.prototype.forEach.call(e,(function(t){t.style.border=""}))},canEditFollow:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(e){var i,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.axios.post("wait-project/can-edit-follow",{cid:e,type:1==this.tabKey?1:0});case 2:i=t.sent,s=i.data,0!=s.error?this.$message.error(s.error_msg):this.canEdit=s.data.can_edit_follow;case 5:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},created:function(){var t=this;if(1==this.tabKey)if(this.$store.dispatch("getCorp",(function(e){t.corpInfo=e,t.cid=""})),"all"==localStorage.getItem("permissionButton"))this.isJumpCustomDetail=!0;else{var e=localStorage.getItem("permissionButton").split(",");this.isJumpCustomDetail=e.includes("client-info")}},beforeRouteEnter:function(t,e,i){"/customManage/detail"==e.path?i((function(t){t.tabKey=1,t.corpId=t.customItem.corpId,t.name=t.customItem.name,t.phone=t.customItem.phone,t.is_fans=t.customItem.is_fans,t.timeType=t.customItem.timeType,t.sortType=t.customItem.sortType,t.other_way=t.customItem.other_way,t.checkedList=t.customItem.checkedList,t.user=t.customItem.user,t.chooseNum=t.customItem.chooseNum,t.chooseUserNum=t.customItem.chooseUserNum,t.chooseDepartmentNum=t.customItem.chooseDepartmentNum,t.joinTime=t.customItem.joinTime,t.id!=localStorage.getItem("followid")&&localStorage.getItem("followid")?(t.getAccount(t.id),t.getAccount(localStorage.getItem("followid"))):(t.getAccount(),t.list.map((function(e,i){"undefined"!==typeof t.$refs["part_body_"+e.id][0]&&"undefined"!==typeof t.scrollData[i]&&null!==t.scrollData[i].position&&t.changeScrollTop(!1,t.scrollData[i].position,e.id)})))})):"/customManage/noCustomDetail"==e.path?i((function(t){t.tabKey=2,t.id3="",t.cid3="",t.corpId=localStorage.getItem("corpId")?localStorage.getItem("corpId"):"",t.name2=t.customItem2.name,t.phone2=t.customItem2.phone,t.timeType2=t.customItem2.timeType,t.sortType2=t.customItem2.sortType,t.other_way2=t.customItem2.other_way,t.checkedList2=t.customItem2.checkedList,t.user2=t.customItem2.user,t.chooseNum2=t.customItem2.chooseNum,t.chooseUserNum2=t.customItem2.chooseUserNum,t.chooseDepartmentNum2=t.customItem2.chooseDepartmentNum,t.joinTime2=t.customItem2.joinTime,t.id!=localStorage.getItem("followid")&&localStorage.getItem("followid")?(t.getCustomList(t.id2),t.getCustomList(localStorage.getItem("followid"))):(t.getCustomList(),t.list2.map((function(e,i){"undefined"!==typeof t.$refs["part_body2_"+e.id][0]&&"undefined"!==typeof t.scrollData[i]&&null!==t.scrollData[i].position&&t.changeScrollTop(!1,t.scrollData[i].position,e.id)})))})):i((function(t){t.corpId=localStorage.getItem("corpId")?localStorage.getItem("corpId"):"",t.id="",t.cid="",t.tabKey=1,t.name="",t.phone="",t.is_fans=0,t.timeType=0,t.sortType=2,t.checkedList=[],t.user=[],t.chooseNum=0,t.chooseUserNum=0,t.chooseDepartmentNum=0,t.joinTime=null,t.other_way=-1,t.getAccount()})),i()}},v=f,b=(i("b75c"),i("2877")),y=Object(b["a"])(v,s,a,!1,null,"72b54fa1",null);e["default"]=y.exports},95204:function(t,e,i){"use strict";var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("a-select",{staticStyle:{width:"100%"},attrs:{showSearch:"",optionFilterProp:"children",filterOption:!1,placeholder:"请选择企业成员",disabled:t.disabled},on:{focus:t.focusSelect,select:t.changeSelect,popupScroll:t.popScroll,search:t.searchName},scopedSlots:t._u([{key:"dropdownRender",fn:function(e){return i("div",{},[i("v-nodes",{attrs:{vnodes:e}}),i("a-spin",{staticStyle:{position:"absolute",bottom:"50%",left:"0",right:"0"},attrs:{tip:"Loading...",size:"large",spinning:t.isLoading}})],1)}}]),model:{value:t.userId,callback:function(e){t.userId=e},expression:"userId"}},t._l(t.userList,(function(e,s){return i("a-select-option",{key:e.id},[t._v("\n\t\t\t"+t._s(e.name)+"\n\t\t")])})),1)],1)},a=[],o=(i("96cf"),i("3b8d")),n=(i("c5f6"),{props:{callback:{type:Function,default:null},index:{type:Number,default:""},index2:{type:Number,default:""},disabled:{type:Boolean,default:!1},getFisrstStaff:{type:Boolean,default:!1},type:{type:Number,default:0}},components:{VNodes:{functional:!0,render:function(t,e){return e.props.vnodes}}},data:function(){var t=localStorage.getItem("corpId")?localStorage.getItem("corpId"):"";return{corpId:t,userList:[],userId:[],userName:"",page:1,count:0,isLoading:!1}},created:function(){var t=this;this.$nextTick((function(){t.getAllStaffList()}))},mounted:function(){},methods:{getAllStaffList:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(){var e,i,s,a,o=arguments;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=o.length>0&&void 0!==o[0]?o[0]:1,this.isLoading=!0,i={corp_id:this.corpId,name:this.userName,user_id:this.userId,is_all:0,page:e},1==this.type&&(i.sub_id=localStorage.getItem("sub_id"),i.isMasterAccount=localStorage.getItem("isMasterAccount")),t.next=6,this.axios.post("work-user/get-all-user",i);case 6:s=t.sent,a=s.data,0!=a.error?(this.isLoading=!1,this.$message.error(a.error_msg)):(this.isLoading=!1,this.count=a.data.count,this.getFisrstStaff&&(this.userId=a.data.info[0].id,null!==this.callback&&"function"===typeof this.callback&&(""===this.index&&""===this.index2?this.callback("ok",a.data.info[0].id):this.callback("ok",a.data.info[0].id,this.index,this.index2))),this.userList=1==e?a.data.info:this.userList.concat(a.data.info),this.page=e);case 9:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),changeSelect:function(t){null!==this.callback&&"function"===typeof this.callback&&(""===this.index&&""===this.index2?this.callback("ok",t):this.callback("ok",t,this.index,this.index2))},focusSelect:function(){""!=this.userName&&(this.page=1,this.userList=[],this.userName="",this.getAllStaffList())},searchName:function(t){this.userName=t,this.getAllStaffList()},popScroll:function(t){var e=t.target;e.scrollTop+e.offsetHeight===e.scrollHeight&&this.userList.length<this.count&&(this.page++,this.getAllStaffList(this.page))}},watch:{userId:{handler:function(t){this.getAllStaffList()},deep:!0},getFisrstStaff:{handler:function(t){this.getAllStaffList()},deep:!0}}}),r=n,c=i("2877"),l=Object(c["a"])(r,s,a,!1,null,"23e05649",null);e["a"]=l.exports},b75c:function(t,e,i){"use strict";var s=i("6bc2"),a=i.n(s);a.a},da1d:function(t,e,i){var s=i("2e86");"string"===typeof s&&(s=[[t.i,s,""]]),s.locals&&(t.exports=s.locals);var a=i("499e").default;a("466f3054",s,!0,{sourceMap:!1,shadowMode:!1})}}]);