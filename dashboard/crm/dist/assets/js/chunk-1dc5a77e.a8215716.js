(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1dc5a77e"],{"3a50":function(t,e,a){e=t.exports=a("2350")(!1),e.push([t.i,"#components-layout-demo-basic[data-v-20737a89]{height:100%}#components-layout-demo-basic .ant-layout-header[data-v-20737a89]{background:#fff;border-bottom:1px solid #e2e2e2;height:50px;min-width:885px;width:100%;line-height:50px}[data-v-20737a89] .ant-layout-header{padding:0 20px;font-size:16px;text-align:left}#components-layout-demo-basic .ant-layout-sider[data-v-20737a89]{background:#fff;-webkit-box-flex:0!important;-ms-flex:0 0 250px!important;flex:0 0 250px!important;max-width:250px!important;min-width:250px!important;width:250px!important;border-right:1px solid #e2e2e2}#components-layout-demo-basic .ant-layout-content[data-v-20737a89]{margin:0 20px 20px;min-width:885px;width:100%;padding-right:40px}.content-hd[data-v-20737a89]{height:60px;width:100%;min-width:885px;line-height:60px}.content-msg[data-v-20737a89]{width:100%;border:1px solid #ffdda6;background:#fff2db;padding:10px;margin-top:12px}.content-bd[data-v-20737a89]{background:#fff;min-height:120px;border:1px solid #e2e2e2;min-width:885px;width:100%}#components-layout-demo-basic>.ant-layout[data-v-20737a89]{margin-bottom:48px}#components-layout-demo-basic>.ant-layout[data-v-20737a89]:last-child{margin:0}.list[data-v-20737a89]{margin-left:16px}.ant-layout.ant-layout-has-sider[data-v-20737a89],.list[data-v-20737a89]{height:100%}.btn-primary[data-v-20737a89]{margin-left:20px}.tag-name[data-v-20737a89]{padding:6px 14px;height:34px;font-size:13px;border:1px solid #d9d9d9;background-color:transparent!important;color:rgba(0,0,0,.65)}[data-v-20737a89] .dark-row{background:#fafafa}[data-v-20737a89] .light-row{background:#fff}.msg_content[data-v-20737a89]{border:1px solid #e2d6d6;height:100%;width:420px;margin:auto;overflow-y:auto}.msg_content .msg_content_header[data-v-20737a89]{width:100%}.msg_content_txt[data-v-20737a89]{float:right;width:340px;border:1px solid #e9e9e9;line-height:21px;padding:15px;overflow-wrap:break-word;-webkit-hyphens:auto;-ms-hyphens:auto;hyphens:auto}.mt[data-v-20737a89]{margin-bottom:15px;overflow:hidden}.item-info[data-v-20737a89] p{margin:0;word-break:break-word}.msg_content_txt2[data-v-20737a89]{width:calc(100% - 46px);border:1px solid #e9e9e9;padding:10px 16px;border-radius:4px;font-size:14px;color:#1a1a1a;background:#fff;float:left;word-break:break-word}.url-title[data-v-20737a89]{white-space:nowrap;font-size:18px}.url-text[data-v-20737a89],.url-title[data-v-20737a89]{overflow:hidden;text-overflow:ellipsis}.url-text[data-v-20737a89]{float:left;max-width:calc(100% - 74px);word-break:break-word;display:-webkit-box;-webkit-line-clamp:2;line-clamp:2;-webkit-box-orient:vertical;color:#a3a3a3}.url-img[data-v-20737a89]{float:right;width:64px;height:64px}.applet-title[data-v-20737a89]{overflow:hidden;text-overflow:ellipsis;white-space:nowrap;margin-bottom:10px}",""])},"56b6":function(t,e,a){"use strict";var o=a("b0fe"),i=a.n(o);i.a},b0fe:function(t,e,a){var o=a("fe92");"string"===typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);var i=a("499e").default;i("1ee44db8",o,!0,{sourceMap:!1,shadowMode:!1})},b955:function(t,e,a){"use strict";a.r(e);var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"list"},[a("div",{attrs:{id:"components-layout-demo-basic"}},[a("a-layout",{staticStyle:{position:"relative",height:"100%",overflow:"hidden"}},[t.corpLen>1?a("a-layout-sider",[a("eWechat",{on:{changeWxId:t.handleWxId}})],1):t._e(),a("a-layout",{staticClass:"scroll",staticStyle:{position:"absolute",top:"0",bottom:"0",right:"0","overflow-x":"hidden","overflow-y":"auto"},style:t.corpLen>1?{left:"250px"}:{left:"0"}},[a("a-layout-header",[t._v("群欢迎语")]),a("a-layout-content",[a("div",{staticClass:"content-msg"},[a("p",{staticStyle:{"margin-bottom":"0px"}},[t._v("\n\t\t\t\t\t\t\t具有客户群使用权限的群主可在外部群聊中自行创建或选择已有的欢迎语素材，设置完成后，客户将在加入外部群聊后收到该欢迎语。"),a("span",{staticStyle:{color:"#FF562D"}},[t._v("相比官方自带的欢迎语素材管理，本系统是可以调取【内容引擎】的素材，存入至欢迎语素材管理。")])])]),a("div",{staticClass:"content-hd"},[a("a-col",{staticStyle:{float:"right"}},[a("a-button",{directives:[{name:"has",rawName:"v-has",value:"groupWelcome-add",expression:"'groupWelcome-add'"}],staticClass:"btn-primary",attrs:{icon:"plus",type:"primary"},on:{click:function(e){return t.addWelcomeText()}}},[t._v("\n\t\t\t\t\t\t\t\t新建群欢迎语\n\t\t\t\t\t\t\t")])],1)],1),a("div",{staticClass:"content-bd"},[a("a-spin",{attrs:{tip:"Loading...",size:"large",spinning:t.isLoading}},[a("a-table",{directives:[{name:"has",rawName:"v-has",value:"groupWelcome-list",expression:"'groupWelcome-list'"}],attrs:{columns:t.columns,dataSource:t.welcomeList,pagination:!1,rowClassName:t.rowClassName},scopedSlots:t._u([{key:"content",fn:function(e,o,i){return a("span",{},[o.text_content?a("div",{staticStyle:{overflow:"hidden"}},[a("span",{staticStyle:{float:"left","vertical-align":"top"}},[t._v("文本：")]),a("a-popover",[a("template",{slot:"content"},[a("p",{staticStyle:{"max-width":"500px","word-break":"break-all","word-wrapL":"break-word","max-height":"200px","overflow-y":"auto"},domProps:{innerHTML:t._s(o.text_content.replace(/{nickname}/g,"&nbsp;<span contenteditable='false' class='ant-tag ant-tag-orange'>客户名称</span>&nbsp;").replace(/\n/g,"<br>"))}})]),a("span",{staticStyle:{float:"left","text-overflow":"ellipsis",overflow:"hidden",display:"-webkit-box","-webkit-line-clamp":"4","line-clamp":"4","-webkit-box-orient":"vertical",width:"235px"},domProps:{innerHTML:t._s(o.text_content.replace(/{nickname}/g,"&nbsp;<span contenteditable='false' class='ant-tag ant-tag-orange'>客户名称</span>&nbsp;").replace(/\n/g,"<br>"))}})],2)],1):t._e(),1==o.add_type?[a("div",{staticStyle:{"margin-top":"10px"}},[t._v("图片：\n\t\t\t\t\t\t\t\t\t\t"),a("img",{staticStyle:{width:"105px","object-fit":"cover"},attrs:{src:t.commonUrl+o.image_url,alt:""}})])]:t._e(),2==o.add_type?[a("div",{staticStyle:{"margin-top":"10px"}},[a("span",{staticStyle:{"vertical-align":"top","line-height":"121px"}},[t._v("链接：")]),a("div",{staticStyle:{width:"235px",border:"1px solid #E5E5E5",padding:"10px",display:"inline-block"}},[a("p",{staticClass:"url-title",staticStyle:{"font-size":"14px"}},[t._v(t._s(o.link_title))]),a("div",{staticStyle:{overflow:"hidden"}},[a("div",{staticClass:"url-text",staticStyle:{"font-size":"12px"}},[t._v(t._s(o.link_desc))]),a("img",{staticClass:"url-img",staticStyle:{"object-fit":"cover"},attrs:{src:t.commonUrl+o.link_pic_url,alt:""}})])])])]:t._e(),3==o.add_type?[a("div",{staticStyle:{"margin-top":"10px"}},[a("span",{staticStyle:{"vertical-align":"top"}},[t._v("小程序：")]),a("div",{staticStyle:{width:"calc(100% - 60px)",display:"inline-block"}},[a("MyIcon",{attrs:{type:"icon-miniapp"}}),a("span",[t._v(t._s(o.mini_title))])],1)])]:t._e()],2)}},{key:"action",fn:function(e,o){return a("span",{},[a("a-button",{directives:[{name:"has",rawName:"v-has",value:"groupWelcome-edit",expression:"'groupWelcome-edit'"}],staticStyle:{margin:"0 5px 5px 0"},on:{click:function(e){return t.editList(o.id)}}},[t._v("编辑")]),a("a-button",{directives:[{name:"has",rawName:"v-has",value:"groupWelcome-del",expression:"'groupWelcome-del'"}],on:{click:function(e){return t.deleteList(o.id)}}},[t._v("删除")])],1)}}])}),a("div",{directives:[{name:"show",rawName:"v-show",value:t.total>0,expression:"total > 0"},{name:"has",rawName:"v-has",value:"groupWelcome-list",expression:"'groupWelcome-list'"}],staticClass:"pagination",staticStyle:{width:"100%",position:"absolute",margin:"20px 0px"}},[a("div",{staticStyle:{height:"32px",float:"left","line-height":"32px"}},[t._v("\n\t\t\t\t\t\t\t\t\t共\n\t\t\t\t\t\t\t\t\t"),a("span",{staticStyle:{color:"blue"}},[t._v(t._s(t.total))]),t._v("条\n\t\t\t\t\t\t\t\t")]),a("div",{staticClass:"pagination",staticStyle:{height:"32px",float:"right"}},[a("a-pagination",{attrs:{total:t.total,showSizeChanger:"",showQuickJumper:t.quickJumper,current:t.page,pageSize:t.pageSize,pageSizeOptions:["15","30","50","100"]},on:{change:t.changePage,showSizeChange:t.showSizeChange}})],1)])],1)],1)])],1)],1)],1)])},i=[],n=(a("96cf"),a("3b8d")),s=a("d77d"),r=a("641c"),c=[{title:"欢迎语类型",dataIndex:"wel_type",key:"wel_type"},{title:"欢迎语内容",dataIndex:"content",key:"content",width:"400px",scopedSlots:{customRender:"content"}},{title:"创建时间",dataIndex:"time",key:"time"},{title:"操作",dataIndex:"action",key:"action",width:"20%",scopedSlots:{customRender:"action"}}],l={name:"welcomeList",components:{eWechat:s["a"],MyIcon:r["a"]},data:function(){var t=localStorage.getItem("corpId")?localStorage.getItem("corpId"):"";return{suite_id:1,corpLen:JSON.parse(localStorage.getItem("corpArr")).length,corpId:t,welcomeText:"",welcomeList:[],isLoading:!0,columns:c,total:0,quickJumper:!1,page:1,page_size:15,pageSize:15,visible:!1,add_type:0,text:"",img:"",inputTitle:"",digest:"",msgUrl:"",appletInputTitle:"",appletUrl:"",commonUrl:this.$store.state.commonUrl}},methods:{handleWxId:function(t){this.isLoading=!0,this.corpId=t,this.getWelcomeList()},rowClassName:function(t,e){var a="dark-row";return e%2===0&&(a="light-row"),a},find:function(){this.isLoading=!0,this.getWelcomeList()},clear:function(){this.isLoading=!0,location.reload()},addWelcomeText:function(){this.$router.push("/group/welcomeAdd")},getWelcomeList:function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(){var e,a,o,i,n=arguments;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=n.length>0&&void 0!==n[0]?n[0]:1,a=n.length>1&&void 0!==n[1]?n[1]:this.pageSize,t.next=4,this.axios.post("work-chat/chat-welcome-list",{corp_id:this.corpId,page:e,pageSize:a});case 4:o=t.sent,i=o.data,0!=i.error?(this.isLoading=!1,this.$message.error(i.error_msg)):(this.welcomeList=i.data.info,this.isLoading=!1,this.total=parseInt(i.data.count),this.page=e,this.pageSize=a,this.quickJumper=this.total>this.pageSize);case 7:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),editList:function(t){this.$router.push({path:"/group/welcomeAdd",query:{id:t}})},deleteList:function(t){var e=this;e.$confirm({title:"确定删除该欢迎语?",okText:"确定",okType:"primary",cancelText:"取消",onOk:function(){e.isLoading=!0,e.delWelcome(t)}})},delWelcome:function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(e){var a,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.axios.post("work-chat/chat-welcome-delete",{id:e});case 2:a=t.sent,o=a.data,0!=o.error?(this.isLoading=!1,this.$message.error(o.error_msg)):(this.isLoading=!1,1==this.welcomeList.length&&this.page>1?this.getWelcomeList(this.page-1,this.pageSize):this.getWelcomeList(this.page,this.pageSize));case 5:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),changePage:function(t,e){this.getWelcomeList(t,e),document.getElementsByClassName("scroll")[0].scrollTo(0,0)},showSizeChange:function(t,e){this.getWelcomeList(1,e)}},created:function(){this.getWelcomeList()},beforeRouteEnter:function(t,e,a){"/group/welcomeAdd"==e.path&&"undefined"!=typeof t.query.isRefresh&&"1"==t.query.isRefresh?a((function(t){t.getWelcomeList(t.page,t.pageSize)})):a((function(t){t.isLoading=!0,t.page=1,t.page_size=15,t.pageSize=15,t.getWelcomeList()})),a()}},d=l,p=(a("c6fc"),a("2877")),h=Object(p["a"])(d,o,i,!1,null,"20737a89",null);e["default"]=h.exports},c6fc:function(t,e,a){"use strict";var o=a("d63d"),i=a.n(o);i.a},d63d:function(t,e,a){var o=a("3a50");"string"===typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);var i=a("499e").default;i("41ee7a0e",o,!0,{sourceMap:!1,shadowMode:!1})},d77d:function(t,e,a){"use strict";var o=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"sider-one"},[o("div",{staticClass:"sider-one-txt"},[t._v("选择企业微信")]),t.corpInfo[0]?o("a-select",{staticStyle:{width:"200px","margin-bottom":"20px"},attrs:{showSearch:"",optionFilterProp:"children"},on:{change:t.handleChange},model:{value:t.changeBackground,callback:function(e){t.changeBackground=e},expression:"changeBackground"}},[t._l(t.corpInfo,(function(e){return[o("a-select-option",{attrs:{value:e.corpid}},[t._v(t._s(e.corp_name))])]}))],2):t._e(),o("div",{ref:"corpInfo",staticClass:"wx-info",staticStyle:{position:"absolute"},on:{mousemove:t.corpInfoMouseOver,mouseout:t.corpInfoMouseOut}},[t._l(t.corpInfo,(function(e,i){return[o("div",{staticClass:"selectWx",class:{active:t.changeBackground==e.corpid},on:{click:function(a){return t.selectWx(e.corpid)}}},[o("img",{staticStyle:{width:"32px","border-radius":"4px"},attrs:{src:a("de05"),alt:""}}),o("span",{staticStyle:{"text-overflow":"ellipsis","white-space":"nowrap",overflow:"hidden",float:"right",width:"calc(100% - 35px)"}},[t._v(t._s(e.corp_name))])])]}))],2)],1)},i=[],n={name:"eWechat",props:{callback:{type:Function,default:null}},data:function(){var t=localStorage.getItem("corpId")?localStorage.getItem("corpId"):"";return{corpInfo:[],changeBackground:t}},created:function(){var t=this;this.$store.dispatch("getCorp",(function(e){t.corpInfo=e,null!==t.callback&&"function"===typeof t.callback&&t.callback(t.changeBackground)}))},methods:{handleChange:function(t){var e=this,a="";this.corpInfo.map((function(o){t==o.corpid&&(a=o.corp_name,e.$store.dispatch("changeCorp",o))})),this.changeBackground=t,this.$emit("changeWxId",t,a),2==localStorage.getItem("isMasterAccount")&&this.$store.dispatch("getPermissionButton")},selectWx:function(t){this.handleChange(t)},corpInfoMouseOver:function(){this.$refs.corpInfo.style.overflowY="auto"},corpInfoMouseOut:function(){this.$refs.corpInfo.style.overflowY="hidden"}}},s=n,r=(a("56b6"),a("2877")),c=Object(r["a"])(s,o,i,!1,null,"2e9ecca2",null);e["a"]=c.exports},fe92:function(t,e,a){e=t.exports=a("2350")(!1),e.push([t.i,".sider-one[data-v-2e9ecca2]{padding:0 20px}.sider-one-txt[data-v-2e9ecca2]{height:60px;line-height:60px;text-align:left}.wx-info[data-v-2e9ecca2]{width:100%;position:absolute;left:0;top:100px;bottom:0;overflow:hidden}.wx-info[data-v-2e9ecca2]::-webkit-scrollbar{width:2px;height:100%}.wx-info[data-v-2e9ecca2]::-webkit-scrollbar-track-piece{background-color:#fff}.wx-info[data-v-2e9ecca2]::-webkit-scrollbar-thumb{background:#fff}.selectWx[data-v-2e9ecca2]{width:200px;margin-left:20px;height:50px;line-height:50px;cursor:pointer;padding-left:10px}.active[data-v-2e9ecca2]{background:#1e90ff;color:#fff}",""])}}]);