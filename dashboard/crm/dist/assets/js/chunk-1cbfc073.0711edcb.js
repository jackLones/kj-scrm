(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1cbfc073"],{"373c":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"list"},[i("div",{attrs:{id:"components-layout-demo-basic"}},[i("a-spin",{attrs:{tip:"Loading...",size:"large",spinning:t.isLoading}},[i("a-layout",[i("a-layout-header",["undefined"==typeof t.urlId?[t._v("新建消息")]:t._e(),"undefined"!=typeof t.urlId?[t._v("修改消息")]:t._e(),i("a-button",{staticStyle:{float:"right","margin-top":"9px"},attrs:{type:"primary",icon:"rollback"},on:{click:t.goBack}},[t._v("\n\t\t\t\t\t\t返回列表\n\t\t\t\t\t")])],2),i("a-layout",{staticClass:"fans-content"},[i("a-layout-sider",[i("div",{directives:[{name:"show",rawName:"v-show",value:(1==t.validity||3==t.validity)&&0==t.isRedpacket,expression:"(validity == 1 || validity == 3) && isRedpacket == 0"}],staticClass:"wrap"},[i("img",{staticStyle:{width:"100%","border-bottom":"1px solid #E2D6D6"},attrs:{src:a("eb7e"),alt:""}}),i("div",{staticClass:"msg_content_body"},[t.text?i("div",{staticClass:"mt"},[i("a-avatar",{staticStyle:{"margin-right":"10px",float:"left"},attrs:{src:"https://zos.alipayobjects.com/rmsportal/ODTLcjxAfvqbxHnVXCYX.png",size:36}}),i("pre",{staticClass:"item-info msg_content_txt",staticStyle:{display:"block","white-space":"pre-wrap","word-wrap":"break-word"}},[t._v(t._s(t.text))])],1):t._e(),t.img?i("div",{staticClass:"mt"},[i("a-avatar",{staticStyle:{"margin-right":"10px",float:"left","object-fit":"cover"},attrs:{src:"https://zos.alipayobjects.com/rmsportal/ODTLcjxAfvqbxHnVXCYX.png",size:36}}),i("img",{staticStyle:{width:"100px","border-radius":"4px"},attrs:{src:t.commonUrl+t.img,alt:""}})],1):t._e(),t.modalUrlOk?i("div",{staticClass:"mt"},[[i("div",{staticStyle:{border:"1px solid #E8E8E8"}},[i("img",{staticStyle:{height:"145px",width:"100%","object-fit":"cover"},attrs:{src:t.commonUrl+t.msgUrl}}),i("div",{staticClass:"inputTitle",domProps:{innerHTML:t._s(""==t.inputTitle?"标题":t.inputTitle)}})])]],2):t._e(),t.modalAppletOk?i("div",{staticClass:"mt"},[i("a-avatar",{staticStyle:{"margin-right":"10px",float:"left"},attrs:{src:"https://zos.alipayobjects.com/rmsportal/ODTLcjxAfvqbxHnVXCYX.png",size:36}}),i("div",{staticClass:"item-info msg_content_txt"},[i("p",{staticClass:"applet-title"},[t._v(t._s(t.appletInputTitle))]),i("img",{staticStyle:{width:"100%","object-fit":"cover"},attrs:{src:t.commonUrl+t.appletUrl,alt:""}})])],1):t._e()])]),i("div",{directives:[{name:"show",rawName:"v-show",value:(1==t.validity||3==t.validity)&&1==t.isRedpacket,expression:"(validity == 1 || validity == 3) && isRedpacket == 1"}],staticClass:"wrap"},[i("img",{staticStyle:{width:"100%","border-bottom":"1px solid #E2D6D6"},attrs:{src:a("eb7e"),alt:""}}),i("div",{staticClass:"msg_content_body"},[i("div",{staticClass:"mt"},[i("a-avatar",{staticStyle:{"margin-right":"10px",float:"left"},attrs:{src:"https://zos.alipayobjects.com/rmsportal/ODTLcjxAfvqbxHnVXCYX.png",size:36}}),1==t.rule.redrule_type?i("div",{staticClass:"item-info msg_content_txt"},[i("p",{staticClass:"url-title"},[t._v(t._s(t.rule1.rule_title||"标题"))]),i("div",{staticStyle:{overflow:"hidden"}},[i("div",{staticClass:"url-text"},[t._v(t._s(t.rule1.rule_des))]),i("img",{staticClass:"url-img",staticStyle:{"object-fit":"cover"},attrs:{src:t.commonUrl+t.rule1.rule_pic_url,alt:""}})])]):t._e(),2==t.rule.redrule_type?i("div",{staticClass:"item-info msg_content_txt"},[i("p",{staticClass:"url-title"},[t._v(t._s(t.rule2.rule_title||"标题"))]),i("div",{staticStyle:{overflow:"hidden"}},[i("div",{staticClass:"url-text"},[t._v(t._s(t.rule2.rule_des))]),i("img",{staticClass:"url-img",staticStyle:{"object-fit":"cover"},attrs:{src:t.commonUrl+t.rule2.rule_pic_url,alt:""}})])]):t._e()],1)])]),i("div",{directives:[{name:"show",rawName:"v-show",value:2==t.validity,expression:"validity == 2"}],staticClass:"wrap"},[i("img",{staticStyle:{width:"100%","border-bottom":"1px solid #E2D6D6"},attrs:{src:a("eb7e"),alt:""}}),i("div",{staticClass:"msg_content_body"},[1==t.typeValue&&t.text?i("div",{staticClass:"mt"},[i("a-avatar",{staticStyle:{"margin-right":"10px",float:"left"},attrs:{src:"https://zos.alipayobjects.com/rmsportal/ODTLcjxAfvqbxHnVXCYX.png",size:36}}),i("span",{staticClass:"item-info msg_content_txt"},[t._v(t._s(t.text))])],1):t._e(),2==t.typeValue&&t.img?i("div",{staticClass:"mt"},[i("a-avatar",{staticStyle:{"margin-right":"10px",float:"left"},attrs:{src:"https://zos.alipayobjects.com/rmsportal/ODTLcjxAfvqbxHnVXCYX.png",size:36}}),i("img",{staticStyle:{width:"150px","border-radius":"4px"},attrs:{src:t.commonUrl+t.img,alt:""}})],1):t._e(),3==t.typeValue&&t.fileName?i("div",{staticClass:"mt"},[i("div",{staticClass:"audio"},[i("div",{staticStyle:{float:"left","font-size":"16px"}},[t._v(t._s(t.fileName)+"\n\t\t\t\t\t\t\t\t\t\t")]),i("div",{staticClass:"box"},[i("div",{staticClass:"wifi-symbol"},[i("div",{staticClass:"wifi-circle first"}),i("div",{staticClass:"wifi-circle second"}),i("div",{staticClass:"wifi-circle third"})])])])]):t._e(),4==t.typeValue?i("div",{staticClass:"mt"},[""==t.fileName?[i("a-card",{staticStyle:{width:"100%"},attrs:{hoverable:""}},[i("img",{attrs:{slot:"cover",alt:"example",src:"http://s.weituibao.com/static/1545276720179/video.png"},slot:"cover"}),i("a-card-meta",{staticStyle:{height:"50px"}})],1)]:t._e(),t.fileName?[i("a-card",{staticStyle:{width:"100%"},attrs:{hoverable:""}},[i("video-player",{ref:"videoPlayer",staticClass:"video-player vjs-custom-skin",attrs:{playsinline:!0,options:t.playerOptions}}),i("a-card-meta",{staticStyle:{height:"50px","line-height":"50px","text-align":"center"},attrs:{title:t.fileName}})],1)]:t._e()],2):t._e(),5==t.typeValue?i("div",{staticClass:"mt"},[i("a-avatar",{staticStyle:{"margin-right":"10px",float:"left"},attrs:{src:"https://zos.alipayobjects.com/rmsportal/ODTLcjxAfvqbxHnVXCYX.png",size:36}}),i("div",{staticClass:"item-info msg_content_txt"},[i("p",{staticClass:"url-title"},[t._v(t._s(t.inputTitle))]),i("div",{staticStyle:{overflow:"hidden"}},[i("div",{staticClass:"url-text"},[t._v(t._s(t.digest))]),i("img",{staticClass:"url-img",attrs:{src:t.commonUrl+t.msgUrl,alt:""}})])])],1):t._e(),6==t.typeValue?i("div",{staticClass:"mt"},[i("a-avatar",{staticStyle:{"margin-right":"10px",float:"left"},attrs:{src:"https://zos.alipayobjects.com/rmsportal/ODTLcjxAfvqbxHnVXCYX.png",size:36}}),i("div",{staticClass:"item-info msg_content_txt"},[i("p",{staticClass:"applet-title"},[t._v(t._s(t.appletInputTitle))]),i("img",{staticStyle:{width:"100%"},attrs:{src:t.commonUrl+t.appletUrl,alt:""}})])],1):t._e(),7==t.typeValue&&t.fileName?i("div",{staticClass:"mt"},[i("a-avatar",{staticStyle:{"margin-right":"10px",float:"left"},attrs:{src:"https://zos.alipayobjects.com/rmsportal/ODTLcjxAfvqbxHnVXCYX.png",size:36}}),i("div",{staticClass:"item-info msg_content_txt"},[i("a-card",{staticStyle:{width:"90%",margin:"auto"},attrs:{hoverable:""}},[i("div",[i("img",{staticStyle:{width:"60px",height:"80px",margin:"0 !important"},attrs:{slot:"cover",alt:"example",src:a("1707")},slot:"cover"}),i("div",{staticClass:"file-name"},[t._v(t._s(t.fileName))])])])],1)],1):t._e()])])]),i("a-layout-content",[i("div",{staticClass:"content"},[t.$store.state.corpArr.length>1?i("div",{staticClass:"content-hd"},[i("a-form",[i("a-form-item",{attrs:{label:"选择企业微信","label-col":{span:3},"wrapper-col":{span:21}}},[[i("div",{staticStyle:{display:"inline-block",cursor:"pointer"},on:{click:t.changeCorp}},[i("img",{staticStyle:{width:"24px",margin:"-3px 6px 0 0"},attrs:{src:a("ed13")}}),i("span",[t._v(t._s(t.corpName))]),"undefined"==typeof t.urlId&&""==t.customItem?i("a-icon",{staticStyle:{width:"50px",height:"40px","text-align":"left","line-height":"40px","margin-left":"20px"},attrs:{type:"caret-down"}}):t._e()],1),i("span",{staticStyle:{color:"#F56C6C"}},[t._v("（一旦创建，不可修改）")])]],2)],1)],1):t._e(),i("div",{staticClass:"content-bd"},[i("a-form",[i("a-form-item",{staticStyle:{"padding-top":"15px"},attrs:{label:"消息名称","label-col":{span:3},"wrapper-col":{span:21}}},[i("a-input",{staticStyle:{width:"60%"},attrs:{placeholder:"请填写消息名称，限20字符",maxLength:20,disabled:"undefined"!=typeof t.urlId},model:{value:t.title,callback:function(e){t.title=e},expression:"title"}}),i("span",{staticStyle:{display:"inline-block",width:"50px","margin-left":"10px",color:"#F56C6C"}},[t._v(t._s(null===t.title?0:t.title.length)+" / 20")]),i("span",{staticStyle:{color:"#F56C6C","margin-left":"20px"}},[t._v("（一旦创建，不可修改）")])],1),i("a-form-item",{staticStyle:{"padding-top":"15px"},attrs:{label:"群发类型","label-col":{span:3},"wrapper-col":{span:21}}},[i("a-radio-group",{attrs:{name:"radioGroup",disabled:"undefined"!=typeof t.urlId||""!=t.customItem},on:{change:t.changeValidity},model:{value:t.validity,callback:function(e){t.validity=e},expression:"validity"}},[i("a-radio",{directives:[{name:"show",rawName:"v-show",value:!t.noBindFlag,expression:"!noBindFlag"}],attrs:{value:1}},[t._v("客户")]),i("a-radio",{attrs:{value:3}},[t._v("客户群")]),i("a-radio",{attrs:{value:2}},[t._v("企业成员\n\t\t\t\t\t\t\t\t\t\t\t\t"),i("a-button",{staticStyle:{"margin-left":"10px"},attrs:{disabled:2!=t.validity},on:{click:function(e){return t.showDepartmentList(1)}}},[t._v("\n\t\t\t\t\t\t\t\t\t\t\t\t\t选择\n\t\t\t\t\t\t\t\t\t\t\t\t")]),i("span",{directives:[{name:"show",rawName:"v-show",value:t.chooseNum3>0,expression:"chooseNum3 > 0"}],staticStyle:{"margin-left":"5px"}},[t._v("已选择"+t._s(t.chooseUserNum3)+"名成员，"+t._s(t.chooseDepartmentNum3)+"个部门")]),i("a",{directives:[{name:"show",rawName:"v-show",value:t.chooseNum3>0,expression:"chooseNum3 > 0"}],staticStyle:{"margin-left":"10px"},on:{click:function(e){return t.clearDepartmentList(1)}}},[t._v("\n\t\t\t\t\t\t\t\t\t\t\t\t\t重置\n\t\t\t\t\t\t\t\t\t\t\t\t")])],1)],1),i("span",{staticStyle:{color:"#F56C6C"}},[t._v("（一旦创建，不可修改）")])],1),i("a-form-item",{directives:[{name:"show",rawName:"v-show",value:1==t.validity,expression:"validity == 1"}],attrs:{label:"客户归属","label-col":{span:3},"wrapper-col":{span:21}}},[i("a-radio-group",{attrs:{name:"radioGroup"},on:{change:t.changeFromCustom},model:{value:t.fromCustom,callback:function(e){t.fromCustom=e},expression:"fromCustom"}},[i("a-radio",{attrs:{value:1}},[t._v("全部成员")]),i("a-radio",{attrs:{value:2}},[i("a-button",{attrs:{disabled:this.customItem.chooseNum>0||2!=t.fromCustom},on:{click:function(e){return t.showDepartmentList(0)}}},[t._v("\n\t\t\t\t\t\t\t\t\t\t\t\t\t选择成员\n\t\t\t\t\t\t\t\t\t\t\t\t")]),i("span",{directives:[{name:"show",rawName:"v-show",value:t.checkedList1.length>0,expression:"checkedList1.length > 0"}],staticStyle:{"margin-left":"5px"}},[t._v("已选择"+t._s(t.chooseUserNum)+"名成员，"+t._s(t.chooseDepartmentNum)+"个部门")]),i("a",{directives:[{name:"show",rawName:"v-show",value:t.checkedList1.length>0&&""==this.customItem,expression:"checkedList1.length> 0 && this.customItem == ''"}],staticStyle:{"margin-left":"10px"},on:{click:function(e){return t.clearDepartmentList(0)}}},[t._v("\n\t\t\t\t\t\t\t\t\t\t\t\t\t重置\n\t\t\t\t\t\t\t\t\t\t\t\t")])],1)],1)],1),i("a-form-item",{directives:[{name:"show",rawName:"v-show",value:3==t.validity,expression:"validity == 3"}],attrs:{label:"群归属","label-col":{span:3},"wrapper-col":{span:21}}},[i("a-radio-group",{attrs:{name:"radioGroup"},on:{change:t.changeFromCustom},model:{value:t.fromCustom,callback:function(e){t.fromCustom=e},expression:"fromCustom"}},[i("a-radio",{attrs:{value:1}},[t._v("全部成员")]),i("a-radio",{attrs:{value:2}},[i("a-button",{attrs:{disabled:this.customItem.chooseNum2>0||2!=t.fromCustom},on:{click:function(e){return t.showDepartmentList(2)}}},[t._v("\n\t\t\t\t\t\t\t\t\t\t\t\t\t选择成员\n\t\t\t\t\t\t\t\t\t\t\t\t")]),i("span",{directives:[{name:"show",rawName:"v-show",value:t.chooseNum2>0,expression:"chooseNum2 > 0"}],staticStyle:{"margin-left":"5px"}},[t._v("已选择"+t._s(t.chooseUserNum2)+"名成员，"+t._s(t.chooseDepartmentNum2)+"个部门")]),i("a",{directives:[{name:"show",rawName:"v-show",value:t.chooseNum2>0,expression:"chooseNum2 > 0"}],staticStyle:{"margin-left":"10px"},on:{click:function(e){return t.clearDepartmentList(2)}}},[t._v("\n\t\t\t\t\t\t\t\t\t\t\t\t\t重置\n\t\t\t\t\t\t\t\t\t\t\t\t")])],1)],1)],1),i("a-form-item",{directives:[{name:"show",rawName:"v-show",value:2==t.validity,expression:"validity == 2"}],attrs:{label:"选择应用","label-col":{span:3},"wrapper-col":{span:21}}},[[i("a-select",{staticStyle:{width:"200px"},attrs:{showSearch:"",optionFilterProp:"children"},model:{value:t.appId,callback:function(e){t.appId=e},expression:"appId"}},[t._l(t.appList,(function(e){return[i("a-select-option",{attrs:{value:e.id}},[t._v(t._s(e.name)+"\n\t\t\t\t\t\t\t\t\t\t\t\t\t")])]}))],2)]],2),i("a-form-item",{directives:[{name:"show",rawName:"v-show",value:1==t.validity,expression:"validity == 1"}],attrs:{label:"群发客户","label-col":{span:3},"wrapper-col":{span:21}}},[i("a-spin",{attrs:{tip:"Loading...",size:"large",spinning:t.selectLoading}},[i("div",[i("a-radio-group",{attrs:{name:"radioGroup",disabled:""!=t.customItem},on:{change:t.changeCorrectness},model:{value:t.correctness,callback:function(e){t.correctness=e},expression:"correctness"}},[i("a-radio",{attrs:{value:2}},[t._v("按条件筛选客户")]),i("a-radio",{attrs:{value:1}},[t._v("全部客户")])],1),i("span",[t._v("符合条件约"),i("span",{staticStyle:{color:"#F56C6C"}},[t._v(t._s(t.personsNum))]),t._v("人\n\t\t\t\t\t\t\t\t\t\t\t\t\t"),i("a-tooltip",{attrs:{title:"预计人数：去除员工删除客户、客户删除员工及本月达到群发上限的客户数"}},[i("a-icon",{staticStyle:{"vertical-align":"initial","margin-left":"5px"},attrs:{type:"question-circle"}})],1)],1)],1),i("div",{directives:[{name:"show",rawName:"v-show",value:2==t.correctness,expression:"correctness==2"}],staticClass:"pull-right fl"},[i("a-form",[i("a-form-item",{attrs:{label:"性别","label-col":{span:4},"wrapper-col":{span:20}}},[i("a-radio-group",{on:{change:t.getPersonsNum},model:{value:t.sex,callback:function(e){t.sex=e},expression:"sex"}},[i("a-radio",{attrs:{value:-1}},[t._v("全部\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t")]),i("a-radio",{attrs:{value:1}},[t._v("男\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t")]),i("a-radio",{attrs:{value:2}},[t._v("女\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t")]),i("a-radio",{attrs:{value:3}},[t._v("未知\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t")])],1)],1),i("a-form-item",{attrs:{label:"添加时间","label-col":{span:4},"wrapper-col":{span:20}}},[i("a-range-picker",{staticStyle:{width:"320px","margin-right":"5px","text-align":"center"},attrs:{"show-time":{defaultValue:[t.moment("00:00","HH:mm"),t.moment("23:59","HH:mm")],format:"HH:mm"},format:"YYYY-MM-DD HH:mm",allowClear:"","disabled-date":t.disabledDate},on:{change:t.changeJoinTime},model:{value:t.joinTime,callback:function(e){t.joinTime=e},expression:"joinTime"}})],1),i("a-form-item",{attrs:{label:"最后跟进时间","label-col":{span:4},"wrapper-col":{span:20}}},[i("a-range-picker",{staticStyle:{width:"320px","margin-right":"5px","text-align":"center"},attrs:{"show-time":{defaultValue:[t.moment("00:00","HH:mm"),t.moment("23:59:59","HH:mm")],format:"HH:mm"},format:"YYYY-MM-DD HH:mm",allowClear:"","disabled-date":t.disabledDate},on:{change:t.changeFollowTime},model:{value:t.followTime,callback:function(e){t.followTime=e},expression:"followTime"}})],1),i("a-form-item",{attrs:{label:"上次单聊时间","label-col":{span:4},"wrapper-col":{span:20}}},[i("a-range-picker",{staticStyle:{width:"320px","margin-right":"5px","text-align":"center"},attrs:{"show-time":{defaultValue:[t.moment("00:00","HH:mm"),t.moment("23:59","HH:mm")],format:"HH:mm"},format:"YYYY-MM-DD HH:mm",allowClear:"","disabled-date":t.disabledDate},on:{change:t.changeChatTime},model:{value:t.chatTime,callback:function(e){t.chatTime=e},expression:"chatTime"}})],1),i("a-form-item",{attrs:{label:"跟进次数","label-col":{span:4},"wrapper-col":{span:20}}},[i("a-input-group",{attrs:{compact:""}},[i("a-input",{staticStyle:{width:"100px","text-align":"center"},attrs:{placeholder:"最小值",value:t.followNum1},on:{change:t.followMinNumChange,blur:t.followNumBlur}}),i("a-input",{staticStyle:{width:"30px","border-left":"0","pointer-events":"none",backgroundColor:"#FFF"},attrs:{placeholder:"~",disabled:""}}),i("a-input",{staticStyle:{width:"100px","text-align":"center","border-left":"0"},attrs:{placeholder:"最大值",value:t.followNum2},on:{change:t.followMaxNumChange,blur:t.followNumBlur}})],1)],1),i("a-form-item",{attrs:{label:"绑定店铺","label-col":{span:4},"wrapper-col":{span:20}}},[i("a-select",{staticStyle:{width:"195px"},attrs:{allowClear:"","show-search":"",optionFilterProp:"children",placeholder:"请选择店铺"},on:{change:t.getPersonsNum},model:{value:t.signId,callback:function(e){t.signId=e},expression:"signId"}},t._l(t.bindStoreList,(function(e){return i("a-select-option",{attrs:{value:e.key}},[t._v("\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t"+t._s(e.username)+"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t")])})),1)],1),i("a-form-item",{attrs:{label:"区域","label-col":{span:4},"wrapper-col":{span:20}}},[i("a-cascader",{staticStyle:{width:"195px","text-align":"left"},attrs:{allowClear:!1,options:t.cityData},on:{change:t.changeCity},model:{value:t.province1,callback:function(e){t.province1=e},expression:"province1"}})],1),t._l(t.defineField,(function(e,a){return 2==e.type||3==e.type?i("a-form-item",{attrs:{label:e.title,"label-col":{span:4},"wrapper-col":{span:20}}},[i("a-select",{staticStyle:{width:"195px"},attrs:{dropdownStyle:t.style,placeholder:"全部"},on:{change:t.getPersonsNum},model:{value:t.fieldData[a].match,callback:function(e){t.$set(t.fieldData[a],"match",e)},expression:"fieldData[index].match"}},[i("a-select-option",{attrs:{value:""}},[t._v("全部")]),t._l(e.optionVal,(function(e){return i("a-select-option",{attrs:{value:e}},[t._v(t._s(e)+"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t")])}))],2)],1):t._e()})),i("a-form-item",{attrs:{label:"跟进状态","label-col":{span:4},"wrapper-col":{span:20}}},[i("a-select",{staticStyle:{width:"195px"},attrs:{dropdownStyle:t.style,placeholder:"全部"},on:{change:t.handleChangeFollowStatus},model:{value:t.follow_status,callback:function(e){t.follow_status=e},expression:"follow_status"}},[i("a-select-option",{attrs:{value:-1}},[t._v("全部")]),t._l(t.follows,(function(e){return i("a-select-option",{attrs:{value:e.id}},[t._v(t._s(e.title)),0==e.status?i("span",[t._v("（已删除）")]):t._e()])}))],2)],1),i("a-form-item",{attrs:{label:"是否粉丝","label-col":{span:4},"wrapper-col":{span:20}}},[i("a-select",{staticStyle:{width:"195px"},attrs:{dropdownStyle:t.style,placeholder:"全部"},on:{change:t.getPersonsNum},model:{value:t.is_fans,callback:function(e){t.is_fans=e},expression:"is_fans"}},[i("a-select-option",{attrs:{value:0}},[t._v("全部")]),i("a-select-option",{attrs:{value:1}},[t._v("是")]),i("a-select-option",{attrs:{value:2}},[t._v("否")])],1)],1),i("a-form-item",{attrs:{label:"标签","label-col":{span:4},"wrapper-col":{span:20}}},[t.isShowTag?i("corpChooseTag",{attrs:{callback:t.modalVisibleChange4,hasChoose:t.tag_arr}}):t._e()],1)],2)],1)])],1),i("a-form-item",{directives:[{name:"show",rawName:"v-show",value:1==t.validity||3==t.validity,expression:"validity == 1 || validity == 3"}],attrs:{label:"群发内容","label-col":{span:3},"wrapper-col":{span:21}}},[i("a-radio-group",{attrs:{name:"isRedpacket",disabled:"undefined"!=typeof t.urlId},on:{change:t.changeIsRedpacket},model:{value:t.isRedpacket,callback:function(e){t.isRedpacket=e},expression:"isRedpacket"}},[i("a-radio",{attrs:{value:0}},[t._v("群发消息")]),i("a-radio",{attrs:{value:1}},[t._v("群发红包")]),1==t.validity?i("span",[t._v("符合条件约"),i("span",{staticStyle:{color:"#F56C6C"}},[t._v(t._s(t.personsNum))]),t._v("人")]):t._e()],1),0==t.isRedpacket?i("div",{staticClass:"pull-right fl"},[i("a-textarea",{attrs:{placeholder:"最多1000个字",maxLength:1e3,autoSize:{minRows:9,maxRows:9}},model:{value:t.text,callback:function(e){t.text=e},expression:"text"}}),i("div",{staticStyle:{float:"right","margin-top":"10px"}},[t._v("\n\t\t\t\t\t\t\t\t\t\t\t\t"+t._s(t.text.length)+"/1000\n\t\t\t\t\t\t\t\t\t\t\t")]),t.img||t.modalUrlOk||t.modalAppletOk?t._e():i("div",{staticStyle:{margin:"10px 0",cursor:"pointer"}},[i("a-popover",{attrs:{trigger:"click"},model:{value:t.popVisible,callback:function(e){t.popVisible=e},expression:"popVisible"}},[i("template",{slot:"content"},[i("div",{staticClass:"popover-menu",on:{click:function(e){return t.choosePic(1)}}},[i("a-icon",{attrs:{type:"picture"}}),i("p",[t._v("图片")])],1),i("div",{staticClass:"popover-menu  popover-menu1",on:{click:function(e){return t.chooseUrl(2)}}},[i("a-icon",{attrs:{type:"link"}}),i("p",[t._v("图文")])],1),i("div",{staticClass:"popover-menu popover-menu2",on:{click:function(e){return t.chooseApplet(3)}}},[i("MyIcon",{attrs:{type:"icon-miniapp"}}),i("p",[t._v("小程序")])],1)]),i("a-icon",{attrs:{type:"plus"}}),t._v("\n\t\t\t\t\t\t\t\t\t\t\t\t\t添加图片/图文/小程序消息\n\t\t\t\t\t\t\t\t\t\t\t\t")],2)],1),t.img?i("div",{staticStyle:{margin:"10px 0",cursor:"pointer",float:"left"},on:{click:function(e){return t.choosePic(1)}}},[i("a-icon",{staticStyle:{"margin-right":"7px"},attrs:{type:"picture"}}),t._v("\n\t\t\t\t\t\t\t\t\t\t\t\t"+t._s(t.fileName)+"\n\t\t\t\t\t\t\t\t\t\t\t")],1):t._e(),t.modalUrlOk?i("div",{staticStyle:{margin:"10px 0",cursor:"pointer",float:"left","max-width":"200px",overflow:"hidden",height:"40px","text-overflow":"ellipsis","white-space":"nowrap"},on:{click:function(e){return t.chooseUrl(2)}}},[i("a-icon",{staticStyle:{"margin-right":"7px"},attrs:{type:"link"}}),t._v("\n\t\t\t\t\t\t\t\t\t\t\t\t"+t._s(t.inputTitle)+"\n\t\t\t\t\t\t\t\t\t\t\t")],1):t._e(),t.modalAppletOk?i("div",{staticStyle:{margin:"10px 0",cursor:"pointer",float:"left","max-width":"200px",overflow:"hidden",height:"40px","text-overflow":"ellipsis","white-space":"nowrap"},on:{click:function(e){return t.chooseApplet(3)}}},[i("MyIcon",{attrs:{type:"icon-miniapp"}}),t._v("\n\t\t\t\t\t\t\t\t\t\t\t\t"+t._s(t.appletInputTitle)+"\n\t\t\t\t\t\t\t\t\t\t\t")],1):t._e(),t.img||t.modalUrlOk||t.modalAppletOk?i("div",{staticStyle:{float:"left",margin:"10px 0 0 10px",cursor:"pointer"},on:{click:t.deleteMessage}},[i("a-icon",{attrs:{type:"close"}})],1):t._e()],1):t._e(),1==t.isRedpacket?[i("div",{staticClass:"pull-right"},[i("a-radio-group",{attrs:{disabled:"undefined"!=typeof t.urlId&&1!=t.redpacket_status},model:{value:t.rule.redrule_type,callback:function(e){t.$set(t.rule,"redrule_type",e)},expression:"rule.redrule_type"}},[i("a-radio",{attrs:{value:1}},[t._v("选择已有\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t"),1==t.rule.redrule_type?i("chooseRule",{staticStyle:{display:"inline-block",width:"200px"},attrs:{disabled:"undefined"!=typeof t.urlId&&1!=t.redpacket_status,rule_id:t.rule.rule_id},on:{changeSelect:t.changeSelect}}):t._e()],1),i("a-radio",{attrs:{value:2}},[t._v("新建")])],1),2==t.rule.redrule_type||1==t.rule.redrule_type&&t.rule.rule_id?i("a-form",{staticStyle:{padding:"20px","background-color":"#FFFFFF"}},[i("a-form-item",{staticClass:"current0",attrs:{label:"规则名称","label-col":{span:3},"wrapper-col":{span:19}}},[2==t.rule.redrule_type&&1==t.redpacket_status?i("a-input",{staticStyle:{width:"340px"},attrs:{placeholder:"请输入红包规则",maxLength:30},model:{value:t.rule2.rule_name,callback:function(e){t.$set(t.rule2,"rule_name",e)},expression:"rule2.rule_name"}},[2==t.rule.redrule_type?i("span",{attrs:{slot:"suffix"},slot:"suffix"},[i("span",[t._v(t._s(t.rule2.rule_name.length))]),t._v("/30\n\t\t\t\t\t\t\t                        ")]):t._e()]):t._e(),1==t.rule.redrule_type||1!=t.redpacket_status?i("span",[t._v(t._s(t.rule1.rule_name))]):t._e()],1),i("a-form-item",{staticClass:"current0",attrs:{label:"单个红包金额","label-col":{span:3},"wrapper-col":{span:19}}},[2==t.rule.redrule_type&&1==t.redpacket_status?i("a-radio-group",{attrs:{name:"radioGroup",value:t.rule2.rule_type},on:{change:t.changeType2}},[i("a-radio",{staticStyle:{display:"inline-block",height:"35px","line-height":"35px"},attrs:{value:1}},[t._v("\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t定额\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t"),1==t.rule2.rule_type?i("span",[i("a-input-number",{staticStyle:{width:"140px",margin:"0 5px"},attrs:{step:0,precision:2,min:.3,max:200},model:{value:t.rule2.rule_fixed_amount,callback:function(e){t.$set(t.rule2,"rule_fixed_amount",e)},expression:"rule2.rule_fixed_amount"}}),t._v("元\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t")],1):t._e()]),i("a-radio",{staticStyle:{display:"inline-block",height:"35px","line-height":"35px","margin-left":"10px"},attrs:{value:2}},[t._v("\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t按随机金额\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t"),2==t.rule2.rule_type?i("span",[i("a-input-number",{staticStyle:{width:"100px",margin:"0 5px"},attrs:{step:0,precision:2,min:.3,max:200},model:{value:t.rule2.rule_min_random_amount,callback:function(e){t.$set(t.rule2,"rule_min_random_amount",e)},expression:"rule2.rule_min_random_amount"}}),t._v("元 ——\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t"),i("a-input-number",{staticStyle:{width:"100px","margin-right":"5px"},attrs:{step:0,precision:2,min:.3,max:200},model:{value:t.rule2.rule_max_random_amount,callback:function(e){t.$set(t.rule2,"rule_max_random_amount",e)},expression:"rule2.rule_max_random_amount"}}),t._v("元\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t")],1):t._e()])],1):t._e(),1==t.rule.redrule_type||1!=t.redpacket_status?i("a-radio-group",{attrs:{name:"radioGroup",disabled:1==t.rule.redrule_type,value:t.rule1.rule_type},on:{change:t.changeType1}},[i("a-radio",{staticStyle:{display:"inline-block",height:"35px","line-height":"35px"},attrs:{value:1}},[t._v("\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t定额\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t"),1==t.rule1.rule_type?i("span",[t._v(t._s(t.rule1.rule_fixed_amount)+"元")]):t._e()]),i("a-radio",{staticStyle:{display:"inline-block",height:"35px","line-height":"35px","margin-left":"10px"},attrs:{value:2}},[t._v("\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t按随机金额\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t"),2==t.rule1.rule_type?i("span",[t._v(t._s(t.rule1.rule_min_random_amount)+"-"+t._s(t.rule1.rule_max_random_amount)+"元")]):t._e()])],1):t._e(),i("div",{staticStyle:{color:"#F56C6C"}},[t._v("\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t（一旦发布，不可修改。精确到小数点后两位，可输入0.30~200.00）\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t")])],1),i("a-form-item",{staticClass:"current0",attrs:{label:"红包封面","label-col":{span:3},"wrapper-col":{span:19}}},[2==t.rule.redrule_type&&1==t.redpacket_status?i("a-upload",{attrs:{action:"https://www.mocky.io/v2/5cc8019d300000980a055e76",showUploadList:!1,beforeUpload:t.beforeUpload}},[i("div",{directives:[{name:"show",rawName:"v-show",value:!t.rule2.rule_pic_url,expression:"!rule2.rule_pic_url"}]},[i("a-button",[i("a-icon",{attrs:{type:t.loading?"loading":"upload"}}),t._v("\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t上传封面\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t")],1)],1),i("img",{directives:[{name:"show",rawName:"v-show",value:t.rule2.rule_pic_url,expression:"rule2.rule_pic_url"}],staticStyle:{"max-width":"128px","max-height":"128px"},attrs:{src:t.commonUrl+t.rule2.rule_pic_url}}),i("div",{directives:[{name:"show",rawName:"v-show",value:t.rule2.rule_pic_url,expression:"rule2.rule_pic_url"}],staticStyle:{display:"inline-block","vertical-align":"bottom","margin-left":"5px"}},[i("a-button",[i("a-icon",{attrs:{type:t.loading?"loading":"upload"}}),t._v("\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t替换\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t")],1)],1),i("div",{staticStyle:{"margin-top":"10px"}},[t._v("\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t图片像素建议为200px*200px，格式为jpg、bmp、png，大小不超过2M\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t")])]):t._e(),!t.rule1.rule_pic_url||1!=t.rule.redrule_type&&1==t.redpacket_status?t._e():i("img",{staticStyle:{"max-width":"128px","max-height":"128px"},attrs:{src:t.commonUrl+t.rule1.rule_pic_url}})],1),i("a-form-item",{staticClass:"current0",attrs:{"label-col":{span:3},"wrapper-col":{span:19}}},[i("span",{attrs:{slot:"label"},slot:"label"},[i("span",{staticStyle:{color:"#FF562D"}},[t._v("*")]),t._v("标题\n\t\t\t\t\t\t\t\t\t\t\t\t")]),2==t.rule.redrule_type&&1==t.redpacket_status?i("a-input",{staticStyle:{width:"340px"},attrs:{placeholder:"请填写标题",maxLength:32},model:{value:t.rule2.rule_title,callback:function(e){t.$set(t.rule2,"rule_title",e)},expression:"rule2.rule_title"}},[i("span",{attrs:{slot:"suffix"},slot:"suffix"},[i("span",[t._v(t._s(t.rule2.rule_title.length))]),t._v("/32\n\t\t\t\t\t\t\t\t\t\t\t\t\t")])]):t._e(),1==t.rule.redrule_type||1!=t.redpacket_status?i("span",[t._v(t._s(t.rule1.rule_title))]):t._e()],1),i("a-form-item",{staticClass:"current0",attrs:{label:"添加描述","label-col":{span:3},"wrapper-col":{span:19}}},[i("div",[2==t.rule.redrule_type?i("a-textarea",{staticStyle:{"max-width":"500px"},attrs:{placeholder:"请填写描述",maxLength:128,rows:4},model:{value:t.rule2.rule_des,callback:function(e){t.$set(t.rule2,"rule_des",e)},expression:"rule2.rule_des"}}):t._e()],1),2==t.rule.redrule_type&&1==t.redpacket_status?i("div",{staticStyle:{"max-width":"500px","text-align":"right"}},[i("span",[t._v(t._s(t.rule2.rule_des.length))]),t._v("/128\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t")]):t._e(),1==t.rule.redrule_type||1!=t.redpacket_status?i("span",[t._v(t._s(t.rule1.rule_des))]):t._e()]),i("a-form-item",{staticClass:"current0",attrs:{label:"感谢语","label-col":{span:3},"wrapper-col":{span:19}}},[2==t.rule.redrule_type&&1==t.redpacket_status?i("a-input",{staticStyle:{width:"340px"},attrs:{placeholder:"恭喜发财，大吉大利",maxLength:32},model:{value:t.rule2.rule_thanking,callback:function(e){t.$set(t.rule2,"rule_thanking",e)},expression:"rule2.rule_thanking"}},[i("span",{attrs:{slot:"suffix"},slot:"suffix"},[i("span",[t._v(t._s(t.rule2.rule_thanking.length))]),t._v("/32\n\t\t\t\t\t\t\t\t\t\t\t\t\t")])]):t._e(),1==t.rule.redrule_type||1!=t.redpacket_status?i("span",[t._v(t._s(t.rule1.rule_thanking||"恭喜发财，大吉大利"))]):t._e()],1)],1):t._e()],1),2==t.rule.redrule_type&&1==t.redpacket_status?i("a-form-item",{staticStyle:{"margin-top":"10px"},attrs:{label:"是否存入红包规则","label-col":{span:3},"wrapper-col":{span:21}}},[i("a-switch",{attrs:{disabled:1!=t.redpacket_status,checked:1==t.rule.rule_save},on:{click:t.changeRuleSave}})],1):t._e(),1==t.validity?i("a-form-item",{attrs:{label:"预计投放金额","label-col":{span:3},"wrapper-col":{span:21}}},["undefined"!=typeof t.urlId?i("span",{staticStyle:{color:"#FF562D"}},[t._v("\n\t\t\t\t\t\t\t\t\t\t\t\t\t"+t._s(t.rule.redpacket_amount)+"\n\t\t\t\t\t\t\t\t\t\t\t\t")]):t._e(),"undefined"==typeof t.urlId?i("span",{staticStyle:{color:"#FF562D"}},[t._v("\n\t\t\t\t\t\t\t\t\t\t\t\t\t"+t._s(1==t.rule.redrule_type?1==t.rule1.rule_type?""!=t.rule1.rule_fixed_amount?100*t.rule1.rule_fixed_amount*t.personsNum/100:"--":""!=t.rule1.rule_max_random_amount?100*t.rule1.rule_max_random_amount*t.personsNum/100:"--":1==t.rule2.rule_type?""!=t.rule2.rule_fixed_amount?100*t.rule2.rule_fixed_amount*t.personsNum/100:"--":""!=t.rule2.rule_max_random_amount?100*t.rule2.rule_max_random_amount*t.personsNum/100:"--")+"\n\t\t\t\t\t\t\t\t\t\t\t\t")]):t._e(),t._v("\n\t\t\t\t\t\t\t\t\t\t\t\t元\n\t\t\t\t\t\t\t\t\t\t\t\t")]):t._e(),3==t.validity?i("a-form-item",{attrs:{label:"每个群投放额度","label-col":{span:3},"wrapper-col":{span:21}}},[i("a-input-number",{staticStyle:{width:"140px",margin:"0 5px"},attrs:{step:0,precision:2,min:.3,max:1e5},model:{value:t.rule.redpacket_amount,callback:function(e){t.$set(t.rule,"redpacket_amount",e)},expression:"rule.redpacket_amount"}}),t._v("\n\t\t\t\t\t\t\t\t\t\t\t\t元（精确到小数点后两位，可输入0.30~100000.00。）\n\t\t\t\t\t\t\t\t\t\t\t\t"),i("p",[t._v("\n\t\t\t\t\t\t\t\t\t\t\t\t\t本次群发预计总投放额度"+t._s(t.rule.redpacket_amount?100*t.rule.redpacket_amount*t.chatNum/100:"--")+"元")])],1):t._e()]:t._e()],2),i("a-form-item",{directives:[{name:"show",rawName:"v-show",value:2==t.validity,expression:"validity == 2"}],attrs:{label:"群发内容","label-col":{span:3},"wrapper-col":{span:21}}},[i("div",[i("a-radio-group",{on:{change:t.changeType},model:{value:t.typeValue,callback:function(e){t.typeValue=e},expression:"typeValue"}},[i("a-radio",{attrs:{value:5}},[t._v("图文")]),i("a-radio",{attrs:{value:2}},[t._v("图片")]),i("a-radio",{attrs:{value:1}},[t._v("文字")]),i("a-radio",{attrs:{value:3}},[t._v("语音")]),i("a-radio",{attrs:{value:4}},[t._v("视频")]),i("a-radio",{attrs:{value:7}},[t._v("文件")])],1)],1),i("div",{staticClass:"pull-right fl"},[i("div",{directives:[{name:"show",rawName:"v-show",value:2==t.typeValue||3==t.typeValue||4==t.typeValue||7==t.typeValue,expression:"typeValue == 2 || typeValue == 3 || typeValue == 4 || typeValue == 7"}],staticClass:"changeType"},[i("div",{staticStyle:{width:"125px",height:"110px",margin:"auto",cursor:"pointer"},on:{click:function(e){return t.openShowModal3(0,t.material_id)}}},[i("div",{directives:[{name:"show",rawName:"v-show",value:0==t.closeShowModal2,expression:"closeShowModal2==false"}],staticStyle:{"line-height":"120px"}},[i("a-icon",{staticStyle:{"font-size":"26px"},attrs:{type:"plus"}}),2==t.typeValue?i("span",[t._v("选择图片消息")]):t._e(),3==t.typeValue?i("span",[t._v("选择语音消息")]):t._e(),4==t.typeValue?i("span",[t._v("选择视频消息")]):t._e(),7==t.typeValue?i("span",[t._v("选择文件消息")]):t._e()],1),i("div",{directives:[{name:"show",rawName:"v-show",value:t.closeShowModal2,expression:"closeShowModal2"}],staticStyle:{width:"220px"}},[i("img",{attrs:{src:a("088b"),alt:""}}),2==t.typeValue?i("i",{staticStyle:{"font-style":"normal !important"}},[t._v("\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t已选择1条图片消息\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t"),i("p",{staticClass:"editMessage"},[t._v("[修改]")])]):t._e(),3==t.typeValue?i("i",{staticStyle:{"font-style":"normal !important"}},[t._v("\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t已选择1条语音消息\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t"),i("p",{staticClass:"editMessage"},[t._v("[修改]")])]):t._e(),4==t.typeValue?i("i",{staticStyle:{"font-style":"normal !important"}},[t._v("\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t已选择1条视频消息\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t"),i("p",{staticClass:"editMessage"},[t._v("[修改]")])]):t._e(),7==t.typeValue?i("i",{staticStyle:{"font-style":"normal !important"}},[t._v("\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t已选择1条文件消息\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t"),i("p",{staticClass:"editMessage"},[t._v("[修改]")])]):t._e()])])]),i("div",{directives:[{name:"show",rawName:"v-show",value:5==t.typeValue,expression:"typeValue == 5"}]},[i("a-form-item",{attrs:{label:"添加方式","label-col":{span:5},"wrapper-col":{span:19}}},[i("a-radio-group",{attrs:{name:"radioGroup"},on:{change:function(e){return t.changeSketchAddType()}},model:{value:t.sketchAddType,callback:function(e){t.sketchAddType=e},expression:"sketchAddType"}},[i("a-radio",{attrs:{value:1}},[t._v("新建")]),i("a-radio",{attrs:{value:0}},[t._v("导入")])],1)],1),1==t.sketchAddType?[i("a-form-item",{directives:[{name:"show",rawName:"v-show",value:0==t.closeShowModal3,expression:"closeShowModal3==false"}],attrs:{"label-col":{span:5},"wrapper-col":{span:19}}},[i("template",{slot:"label"},[i("span",{staticStyle:{color:"red"}},[t._v("*")]),t._v("图片封面\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t")]),i("div",{staticClass:"upload-wrap",on:{click:function(e){return t.choosePic(0)}}},[i("a-icon",{staticClass:"upload-plus",attrs:{type:"plus"}})],1)],2),i("a-form-item",{directives:[{name:"show",rawName:"v-show",value:t.closeShowModal3,expression:"closeShowModal3"}],attrs:{"label-col":{span:5},"wrapper-col":{span:19}}},[i("template",{slot:"label"},[i("span",{staticStyle:{color:"red"}},[t._v("*")]),t._v("图片封面\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t")]),i("div",{staticClass:"upload-wrap"},[i("img",{staticStyle:{"max-width":"100%","max-height":"100%","margin-left":"50%","margin-top":"50%",transform:"translate(-50%, -50%)"},attrs:{src:t.commonUrl+t.msgUrl,alt:""}})]),i("span",{staticStyle:{color:"blue",cursor:"pointer",margin:"67px 0 0px 10px",float:"left"},on:{click:function(e){return t.choosePic(0)}}},[t._v("重新上传")])],2),i("a-form-item",{attrs:{"label-col":{span:5},"wrapper-col":{span:19}}},[i("template",{slot:"label"},[i("span",{staticStyle:{color:"red"}},[t._v("*")]),t._v("填写标题\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t")]),i("a-input",{attrs:{maxLength:32},model:{value:t.inputTitle,callback:function(e){t.inputTitle=e},expression:"inputTitle"}},[i("span",{attrs:{slot:"suffix"},slot:"suffix"},[i("span",[t._v(t._s(t.inputTitle.length))]),t._v("/32\n                  ")])])],2),i("a-form-item",{attrs:{label:"添加描述","label-col":{span:5},"wrapper-col":{span:19}}},[i("a-textarea",{staticStyle:{resize:"none"},attrs:{placeholder:"填写图文描述",rows:4,maxLength:128},model:{value:t.digest,callback:function(e){t.digest=e},expression:"digest"}}),i("div",{staticStyle:{float:"right"}},[i("span",[t._v(t._s(t.digest.length))]),t._v("/128\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t")])],1),i("a-form-item",{attrs:{label:"素材同步","label-col":{span:5},"wrapper-col":{span:19}}},[i("a-radio-group",{attrs:{disabled:1==t.disabledSync},on:{change:function(e){return t.changeMaterialSync()}},model:{value:t.materialSync,callback:function(e){t.materialSync=e},expression:"materialSync"}},[i("a-radio",{attrs:{value:0}},[t._v("不同步")]),i("a-radio",{style:{display:1==t.materialSync?"block":""},attrs:{value:1}},[t._v("\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t同步至【内容引擎】\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t"),i("div",{directives:[{name:"show",rawName:"v-show",value:1==t.materialSync,expression:"materialSync == 1"}],staticStyle:{"margin-top":"10px"}},[t._v("\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t选择分组：\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t"),i("a-tree-select",{staticStyle:{width:"225px"},attrs:{dropdownStyle:{maxHeight:"150px",overflow:"auto"},treeData:t.groupList,placeholder:"Please select",treeDefaultExpandAll:""},model:{value:t.selectGroupId,callback:function(e){t.selectGroupId=e},expression:"selectGroupId"}})],1)])],1)],1),i("a-form-item",{attrs:{"label-col":{span:5},"wrapper-col":{span:19}}},[i("template",{slot:"label"},[i("span",{staticStyle:{color:"red"}},[t._v("*")]),t._v("点击跳转\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t")]),i("a-input",{staticStyle:{"margin-bottom":"10px"},attrs:{placeholder:"请输入跳转链接，且必须以http://或https://开头"},model:{value:t.url,callback:function(e){t.url=e},expression:"url"}})],2)]:t._e(),0==t.sketchAddType?[i("a-form-item",{directives:[{name:"show",rawName:"v-show",value:""==t.material_id1,expression:"material_id1 == ''"}],attrs:{"label-col":{span:5},"wrapper-col":{span:19}}},[i("template",{slot:"label"},[i("span",{staticStyle:{color:"red"}},[t._v("*")]),t._v("图文\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t")]),i("div",{staticClass:"upload-border",staticStyle:{"line-height":"120px"},on:{click:function(e){return t.openShowModal()}}},[i("a-icon",{staticClass:"upload-plus",staticStyle:{"font-size":"26px"},attrs:{type:"plus"}}),i("span",{staticStyle:{"margin-top":"-5px"}},[t._v("选择图文")])],1)],2),i("a-form-item",{directives:[{name:"show",rawName:"v-show",value:t.material_id1,expression:"material_id1"}],attrs:{"label-col":{span:3},"wrapper-col":{span:21}}},[i("template",{slot:"label"},[i("span",{staticStyle:{color:"red"}},[t._v("*")]),t._v("图文\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t")]),i("div",{staticClass:"upload-border",on:{click:function(e){return t.openShowModal()}}},[i("img",{attrs:{src:a("088b"),alt:""}}),t._v("\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t已选择1条图文\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t"),i("p",{staticStyle:{color:"blue",margin:"14px"},on:{click:function(e){return t.openShowModal()}}},[t._v("\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t[修改]")])])],2)]:t._e()],2),i("div",{directives:[{name:"show",rawName:"v-show",value:1==t.typeValue,expression:"typeValue == 1"}]},[i("a-textarea",{attrs:{placeholder:"最多1000个字",maxLength:1e3,autoSize:{minRows:9,maxRows:9}},model:{value:t.text,callback:function(e){t.text=e},expression:"text"}}),i("div",{staticStyle:{float:"right","margin-top":"10px"}},[t._v("\n\t\t\t\t\t\t\t\t\t\t\t\t\t"+t._s(t.text.length)+"/1000\n\t\t\t\t\t\t\t\t\t\t\t\t")])],1),i("div",{directives:[{name:"show",rawName:"v-show",value:6==t.typeValue,expression:"typeValue == 6"}]},[i("a-form-item",{attrs:{label:"添加方式","label-col":{span:5},"wrapper-col":{span:19}}},[i("a-radio-group",{attrs:{name:"radioGroup"},on:{change:function(e){return t.changeMiniproAddType()}},model:{value:t.miniproAddType,callback:function(e){t.miniproAddType=e},expression:"miniproAddType"}},[i("a-radio",{attrs:{value:1}},[t._v("新建")]),i("a-radio",{attrs:{value:0}},[t._v("导入")])],1)],1),1==t.miniproAddType?[i("a-form-item",{directives:[{name:"show",rawName:"v-show",value:0==t.closeModalApplet,expression:"closeModalApplet==false"}],attrs:{"label-col":{span:5},"wrapper-col":{span:19}}},[i("template",{slot:"label"},[i("span",{staticStyle:{color:"red"}},[t._v("*")]),t._v("图片封面\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t")]),i("div",{staticClass:"upload-wrap",on:{click:function(e){return t.choosePic(0)}}},[i("a-icon",{staticClass:"upload-plus",attrs:{type:"plus"}})],1),i("span",{staticStyle:{"line-height":"19px",display:"inline-block",width:"280px","margin-left":"10px","margin-top":"59px"}},[t._v("\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t（上传图片不超过1M，尺寸必须为1080*864像素，支持jpg/jpeg/png格式）\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t")])],2),i("a-form-item",{directives:[{name:"show",rawName:"v-show",value:t.closeModalApplet,expression:"closeModalApplet"}],attrs:{"label-col":{span:5},"wrapper-col":{span:19}}},[i("template",{slot:"label"},[i("span",{staticStyle:{color:"red"}},[t._v("*")]),t._v("图片封面\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t")]),i("div",{staticClass:"upload-wrap"},[i("img",{staticStyle:{"max-width":"100%","max-height":"100%","margin-left":"50%","margin-top":"50%",transform:"translate(-50%, -50%)"},attrs:{src:t.commonUrl+t.appletUrl,alt:""}})]),i("span",{staticStyle:{color:"blue",cursor:"pointer",margin:"67px 0 0px 10px",float:"left"},on:{click:function(e){return t.choosePic(0)}}},[t._v("重新上传")])],2),i("a-form-item",{attrs:{"label-col":{span:5},"wrapper-col":{span:19}}},[i("template",{slot:"label"},[i("span",{staticStyle:{color:"red"}},[t._v("*")]),t._v("填写标题\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t")]),i("a-input",{attrs:{maxLength:16},model:{value:t.appletInputTitle,callback:function(e){t.appletInputTitle=e},expression:"appletInputTitle"}},[i("span",{attrs:{slot:"suffix"},slot:"suffix"},[i("span",[t._v(t._s(t.appletInputTitle.length))]),t._v("/16\n                  ")])])],2),i("a-form-item",{attrs:{"label-col":{span:5},"wrapper-col":{span:19}}},[i("template",{slot:"label"},[i("span",{staticStyle:{color:"red"}},[t._v("*")]),t._v("AppID\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t")]),i("a-input",{attrs:{placeholder:"请填写小程序AppID，必须是关联到企业的小程序应用"},model:{value:t.appid,callback:function(e){t.appid=e},expression:"appid"}})],2),i("a-form-item",{attrs:{"label-col":{span:5},"wrapper-col":{span:19}}},[i("template",{slot:"label"},[i("span",{staticStyle:{color:"red"}},[t._v("*")]),t._v("page路径\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t")]),i("a-input",{staticStyle:{"margin-bottom":"10px"},attrs:{placeholder:"请填写小程序路径，例如：pages/index"},model:{value:t.pageUrl,callback:function(e){t.pageUrl=e},expression:"pageUrl"}})],2),i("a-form-item",{attrs:{label:"素材同步","label-col":{span:5},"wrapper-col":{span:19}}},[i("a-radio-group",{attrs:{disabled:1==t.disabledSync},on:{change:t.changeMaterialSync},model:{value:t.materialSync,callback:function(e){t.materialSync=e},expression:"materialSync"}},[i("a-radio",{attrs:{value:0}},[t._v("不同步")]),i("a-radio",{style:{display:1==t.materialSync?"block":""},attrs:{value:1}},[t._v("\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t同步至【内容引擎】\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t"),i("div",{directives:[{name:"show",rawName:"v-show",value:1==t.materialSync,expression:"materialSync == 1"}],staticStyle:{"margin-top":"10px"}},[t._v("\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t选择分组：\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t"),i("a-tree-select",{staticStyle:{width:"225px"},attrs:{dropdownStyle:{maxHeight:"150px",overflow:"auto"},treeData:t.groupList,placeholder:"Please select",treeDefaultExpandAll:""},model:{value:t.selectGroupId,callback:function(e){t.selectGroupId=e},expression:"selectGroupId"}})],1)])],1)],1)]:t._e(),0==t.miniproAddType?[i("a-form-item",{directives:[{name:"show",rawName:"v-show",value:""==t.material_id3,expression:"material_id3 == ''"}],attrs:{"label-col":{span:3},"wrapper-col":{span:21}}},[i("template",{slot:"label"},[i("span",{staticStyle:{color:"red"}},[t._v("*")]),t._v("小程序\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t")]),i("div",{staticClass:"upload-border",on:{click:function(e){return t.openShowModalMinipro()}}},[i("a-icon",{staticClass:"upload-plus",staticStyle:{"font-size":"26px"},attrs:{type:"plus"}}),i("span",{staticStyle:{"margin-top":"-5px"}},[t._v("选择小程序")])],1)],2),i("a-form-item",{directives:[{name:"show",rawName:"v-show",value:t.material_id3,expression:"material_id3"}],attrs:{"label-col":{span:3},"wrapper-col":{span:21}}},[i("template",{slot:"label"},[i("span",{staticStyle:{color:"red"}},[t._v("*")]),t._v("小程序\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t")]),i("div",{staticClass:"upload-border",on:{click:function(e){return t.openShowModalMinipro()}}},[i("img",{attrs:{src:a("088b"),alt:""}}),t._v("\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t已选择1条小程序\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t"),i("p",{staticStyle:{color:"blue",margin:"14px"},on:{click:function(e){return t.openShowModalMinipro()}}},[t._v("\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t[修改]")])])],2)]:t._e()],2)])]),1==t.validity?i("a-form-item",{attrs:{label:"是否间隔发放","label-col":{span:3},"wrapper-col":{span:21}}},[i("a-radio-group",{attrs:{name:"radioGroup"},on:{change:t.changeInterval},model:{value:t.interval,callback:function(e){t.interval=e},expression:"interval"}},[i("a-radio",{attrs:{value:1}},[t._v("否")]),i("a-radio",{attrs:{value:2}},[t._v("是")])],1),2==t.interval?i("div",{staticStyle:{background:"#FFF",border:"1px solid #D8D8D8",padding:"24px","margin-right":"20px"}},[i("div",[i("span",{staticStyle:{width:"155px",color:"rgba(0, 0, 0, 0.85)","text-align":"right",display:"inline-block"}},[t._v("时长间隔：")]),i("a-select",{staticStyle:{width:"150px"},attrs:{showSearch:"",optionFilterProp:"children"},model:{value:t.interval_time,callback:function(e){t.interval_time=e},expression:"interval_time"}},[i("a-select-option",{attrs:{value:1}},[t._v("30分钟")]),i("a-select-option",{attrs:{value:2}},[t._v("1小时")]),i("a-select-option",{attrs:{value:3}},[t._v("2小时")]),i("a-select-option",{attrs:{value:4}},[t._v("3小时")]),i("a-select-option",{attrs:{value:5}},[t._v("4小时")])],1)],1),i("div",[i("span",{staticStyle:{width:"155px",color:"rgba(0, 0, 0, 0.85)","text-align":"right",display:"inline-block"}},[t._v("每位成员客户分批推送：")]),i("a-input-number",{staticStyle:{width:"150px"},attrs:{min:1,max:99999999},model:{value:t.interval_num,callback:function(e){t.interval_num=e},expression:"interval_num"}}),t._v("\n\t\t\t\t\t\t\t\t\t\t\t\t人\n\t\t\t\t\t\t\t\t\t\t\t")],1)]):t._e()],1):t._e(),i("a-form-item",{attrs:{label:"群发时间","label-col":{span:3},"wrapper-col":{span:21}}},[i("a-radio-group",{attrs:{name:"radioGroup",disabled:"undefined"!=typeof t.urlId},model:{value:t.sendType,callback:function(e){t.sendType=e},expression:"sendType"}},[i("a-radio",{attrs:{value:0}},[t._v("立即发送")]),i("a-radio",{attrs:{value:1}},[t._v("指定时间")]),i("a-date-picker",{directives:[{name:"show",rawName:"v-show",value:1==t.sendType,expression:"sendType == 1"}],attrs:{allowClear:!1,format:"YYYY-MM-DD"},on:{change:t.changeDate},model:{value:t.sendDate,callback:function(e){t.sendDate=e},expression:"sendDate"}}),i("a-time-picker",{directives:[{name:"show",rawName:"v-show",value:1==t.sendType,expression:"sendType == 1"}],staticStyle:{"margin-left":"10px"},attrs:{allowClear:!1,format:"HH:mm"},on:{change:t.changeTime},model:{value:t.sendTime,callback:function(e){t.sendTime=e},expression:"sendTime"}})],1)],1),i("a-form-item",[i("div",{staticStyle:{"margin-top":"2px","margin-left":"12.5%"}},[i("a-button",{attrs:{type:"primary",disabled:t.createDisabled},on:{click:t.createMessage}},[t._v("通知员工发送\n\t\t\t\t\t\t\t\t\t\t\t")]),t._v("\n\t\t\t\t\t\t\t\t\t\t\t需要员工确认发送，确认后，才会将群发内容推送给员工对应的客户\n\t\t\t\t\t\t\t\t\t\t")],1)])],1)],1)]),i("WeChatModal",{attrs:{show:t.showModal2,callback:t.modalVisibleChange,hasName:"group-sending-add"}}),i("chooseMsg",{attrs:{show:t.showModal3,type:t.typeValue2,news_type:t.news_type,callback:t.modalVisibleChange2,chooseId:t.chooseId,comefrom:t.comefrom}}),i("a-modal",{attrs:{visible:t.showModalUrl,title:"图文",width:"720px",confirmLoading:t.confirmLoading},on:{ok:t.handleUrl,cancel:t.handleCancelUrl}},[i("a-form-item",{attrs:{"label-col":{span:3},"wrapper-col":{span:21}}},[i("template",{slot:"label"},[t._v("\n\t\t\t\t\t\t\t\t\t添加方式\n\t\t\t\t\t\t\t\t")]),i("a-radio-group",{attrs:{name:"radioGroup"},on:{change:function(e){return t.changeSketchAddType()}},model:{value:t.sketchAddType,callback:function(e){t.sketchAddType=e},expression:"sketchAddType"}},[i("a-radio",{attrs:{value:1}},[t._v("新建")]),i("a-radio",{attrs:{value:0}},[t._v("导入")])],1)],2),1==t.sketchAddType?[i("a-form-item",{directives:[{name:"show",rawName:"v-show",value:0==t.closeShowModal3,expression:"closeShowModal3==false"}],attrs:{"label-col":{span:3},"wrapper-col":{span:21}}},[i("template",{slot:"label"},[i("span",{staticStyle:{color:"red"}},[t._v("*")]),t._v("图片封面\n\t\t\t\t\t\t\t\t\t")]),i("div",{staticClass:"upload-wrap",on:{click:function(e){return t.choosePic(2)}}},[i("a-icon",{staticClass:"upload-plus",attrs:{type:"plus"}})],1)],2),i("a-form-item",{directives:[{name:"show",rawName:"v-show",value:t.closeShowModal3,expression:"closeShowModal3"}],attrs:{"label-col":{span:3},"wrapper-col":{span:21}}},[i("template",{slot:"label"},[i("span",{staticStyle:{color:"red"}},[t._v("*")]),t._v("图片封面\n\t\t\t\t\t\t\t\t\t")]),i("div",{staticClass:"upload-wrap"},[i("img",{staticStyle:{"max-width":"100%","max-height":"100%","margin-left":"50%","margin-top":"50%",transform:"translate(-50%, -50%)"},attrs:{src:t.commonUrl+t.msgUrl1,alt:""}})]),i("span",{staticStyle:{color:"blue",cursor:"pointer",margin:"67px 0 0px 10px",float:"left"},on:{click:function(e){return t.choosePic(2)}}},[t._v("重新上传")])],2),i("a-form-item",{attrs:{"label-col":{span:3},"wrapper-col":{span:21}}},[i("template",{slot:"label"},[i("span",{staticStyle:{color:"red"}},[t._v("*")]),t._v("填写标题\n\t\t\t\t\t\t\t\t\t")]),i("a-input",{attrs:{maxLength:32},model:{value:t.inputTitle1,callback:function(e){t.inputTitle1=e},expression:"inputTitle1"}},[i("span",{attrs:{slot:"suffix"},slot:"suffix"},[i("span",[t._v(t._s(t.inputTitle1.length))]),t._v("/32\n                  ")])])],2),i("a-form-item",{attrs:{"label-col":{span:3},"wrapper-col":{span:21}}},[i("template",{slot:"label"},[t._v("\n\t\t\t\t\t\t\t\t\t\t添加描述\n\t\t\t\t\t\t\t\t\t")]),i("a-textarea",{staticStyle:{resize:"none"},attrs:{placeholder:"填写图文描述",rows:4,maxLength:128},model:{value:t.digest1,callback:function(e){t.digest1=e},expression:"digest1"}}),i("div",{staticStyle:{float:"right"}},[i("span",[t._v(t._s(t.digest1.length))]),t._v("/128\n\t\t\t\t\t\t\t\t\t")])],2),i("a-form-item",{attrs:{"label-col":{span:3},"wrapper-col":{span:21}}},[i("template",{slot:"label"},[t._v("\n\t\t\t\t\t\t\t\t\t\t素材同步\n\t\t\t\t\t\t\t\t\t")]),i("a-radio-group",{attrs:{disabled:1==t.disabledSync1},on:{change:function(e){return t.changeMaterialSync()}},model:{value:t.materialSync1,callback:function(e){t.materialSync1=e},expression:"materialSync1"}},[i("a-radio",{attrs:{value:0}},[t._v("不同步")]),i("a-radio",{style:{display:1==t.materialSync1?"block":""},attrs:{value:1}},[t._v("\n\t\t\t\t\t\t\t\t\t\t\t同步至【内容引擎】\n\t\t\t\t\t\t\t\t\t\t\t"),i("div",{directives:[{name:"show",rawName:"v-show",value:1==t.materialSync1,expression:"materialSync1 == 1"}],staticStyle:{"margin-top":"10px"}},[t._v("\n\t\t\t\t\t\t\t\t\t\t\t\t选择分组：\n\t\t\t\t\t\t\t\t\t\t\t\t"),i("a-tree-select",{staticStyle:{width:"225px"},attrs:{dropdownStyle:{maxHeight:"150px",overflow:"auto"},treeData:t.groupList,placeholder:"Please select",treeDefaultExpandAll:""},model:{value:t.selectGroupId1,callback:function(e){t.selectGroupId1=e},expression:"selectGroupId1"}})],1)])],1)],2),i("a-form-item",{attrs:{"label-col":{span:3},"wrapper-col":{span:21}}},[i("template",{slot:"label"},[i("span",{staticStyle:{color:"red"}},[t._v("*")]),t._v("点击跳转\n\t\t\t\t\t\t\t\t\t")]),i("a-input",{staticStyle:{"margin-bottom":"10px"},attrs:{placeholder:"请输入跳转链接，且必须以http://或https://开头"},model:{value:t.url1,callback:function(e){t.url1=e},expression:"url1"}})],2)]:t._e(),0==t.sketchAddType?[i("a-form-item",{directives:[{name:"show",rawName:"v-show",value:""==t.material_id11,expression:"material_id11 == ''"}],attrs:{"label-col":{span:3},"wrapper-col":{span:21}}},[i("template",{slot:"label"},[i("span",{staticStyle:{color:"red"}},[t._v("*")]),t._v("图文\n\t\t\t\t\t\t\t\t\t")]),i("div",{staticClass:"upload-border",on:{click:function(e){return t.openShowModal1()}}},[i("a-icon",{staticClass:"upload-plus",attrs:{type:"plus"}}),i("span",[t._v("选择图文")])],1)],2),i("a-form-item",{directives:[{name:"show",rawName:"v-show",value:t.material_id11,expression:"material_id11"}],attrs:{"label-col":{span:3},"wrapper-col":{span:21}}},[i("template",{slot:"label"},[i("span",{staticStyle:{color:"red"}},[t._v("*")]),t._v("图文\n\t\t\t\t\t\t\t\t\t")]),i("div",{staticClass:"upload-border",on:{click:function(e){return t.openShowModal1()}}},[i("img",{attrs:{src:a("088b"),alt:""}}),t._v("\n\t\t\t\t\t\t\t\t\t\t已选择1条图文\n\t\t\t\t\t\t\t\t\t\t"),i("p",{staticStyle:{color:"blue",margin:"14px"},on:{click:function(e){return t.openShowModal1()}}},[t._v("\n\t\t\t\t\t\t\t\t\t\t\t[修改]")])])],2)]:t._e()],2),i("a-modal",{attrs:{visible:t.showModalApplet,title:"小程序",width:"720px",confirmLoading:t.confirmLoading},on:{ok:t.handleApplet,cancel:t.handleCancelApplet}},[i("a-form-item",{attrs:{label:"添加方式","label-col":{span:3},"wrapper-col":{span:21}}},[i("template",{slot:"label"},[t._v("\n\t\t\t\t\t\t\t\t\t添加方式\n\t\t\t\t\t\t\t\t")]),i("a-radio-group",{attrs:{name:"radioGroup"},on:{change:function(e){return t.changeMiniproAddType()}},model:{value:t.miniproAddType,callback:function(e){t.miniproAddType=e},expression:"miniproAddType"}},[i("a-radio",{attrs:{value:1}},[t._v("新建")]),i("a-radio",{attrs:{value:0}},[t._v("导入")])],1)],2),1==t.miniproAddType?[i("div",{staticClass:"content-msg"},[i("p",{staticStyle:{"margin-bottom":"2px","line-height":"20px"}},[t._v("\n\t\t\t\t\t\t\t\t\t\t在企业微信里发送小程序（必须在微信公众平台通过审核和发布的），请先将其关联到企业微信（\n\t\t\t\t\t\t\t\t\t\t"),i("a",{attrs:{target:"_blank",href:"https://support.qq.com/products/312071/faqs/90042"}},[t._v("\n\t\t\t\t\t\t\t\t\t\t\t如何关联")]),t._v("\n\t\t\t\t\t\t\t\t\t\t），再到本系统添加该小程序，否则发送失败，客户接收不到。\n\t\t\t\t\t\t\t\t\t")]),i("p",{staticStyle:{"margin-bottom":"2px","line-height":"20px"}},[t._v("\n\t\t\t\t\t\t\t\t\t\t如果没有微信小程序，请前往微信小程序进行注册。\n\t\t\t\t\t\t\t\t\t\t"),i("a",{attrs:{target:"_blank",href:"https://support.qq.com/products/312071/faqs/90042"}},[t._v("\n\t\t\t\t\t\t\t\t\t\t\t立即前往\n\t\t\t\t\t\t\t\t\t\t")])]),i("p",{staticStyle:{"margin-bottom":"0px",color:"#FF562D"}},[t._v("\n\t\t\t\t\t\t\t\t\t\t小程序路径必须以“.html”结尾。\n\t\t\t\t\t\t\t\t\t")])]),i("a-form-item",{directives:[{name:"show",rawName:"v-show",value:0==t.closeModalApplet,expression:"closeModalApplet==false"}],attrs:{"label-col":{span:3},"wrapper-col":{span:21}}},[i("template",{slot:"label"},[i("span",{staticStyle:{color:"red"}},[t._v("*")]),t._v("图片封面\n\t\t\t\t\t\t\t\t\t")]),i("div",{staticClass:"upload-wrap",staticStyle:{display:"inline-block"},on:{click:function(e){return t.choosePic(3)}}},[i("a-icon",{staticClass:"upload-plus",attrs:{type:"plus"}})],1),i("span",{staticStyle:{display:"inline-block","margin-top":"64px"}},[t._v("（上传图片不超过1M，尺寸必须为1080*864像素，支持jpg/jpeg/png格式）")])],2),i("a-form-item",{directives:[{name:"show",rawName:"v-show",value:t.closeModalApplet,expression:"closeModalApplet"}],attrs:{"label-col":{span:3},"wrapper-col":{span:21}}},[i("template",{slot:"label"},[i("span",{staticStyle:{color:"red"}},[t._v("*")]),t._v("图片封面\n\t\t\t\t\t\t\t\t\t")]),i("div",{staticClass:"upload-wrap"},[i("img",{staticStyle:{"max-width":"100%","max-height":"100%","margin-left":"50%","margin-top":"50%",transform:"translate(-50%, -50%)"},attrs:{src:t.commonUrl+t.appletUrl1,alt:""}})]),i("span",{staticStyle:{color:"blue",cursor:"pointer",margin:"67px 0 0px 10px",float:"left"},on:{click:function(e){return t.choosePic(3)}}},[t._v("重新上传")])],2),i("a-form-item",{attrs:{"label-col":{span:3},"wrapper-col":{span:21}}},[i("template",{slot:"label"},[i("span",{staticStyle:{color:"red"}},[t._v("*")]),t._v("填写标题\n\t\t\t\t\t\t\t\t\t")]),i("a-input",{attrs:{maxLength:12,placeholder:"请填写小程序标题（4-12个字符）"},on:{blur:function(e){return t.checkout(t.appletInputTitle1)}},model:{value:t.appletInputTitle1,callback:function(e){t.appletInputTitle1=e},expression:"appletInputTitle1"}},[i("span",{attrs:{slot:"suffix"},slot:"suffix"},[i("span",[t._v(t._s(t.appletInputTitle1.length))]),t._v("/12\n                  ")])])],2),i("a-form-item",{attrs:{"label-col":{span:3},"wrapper-col":{span:21}}},[i("template",{slot:"label"},[i("span",{staticStyle:{color:"red"}},[t._v("*")]),t._v("AppID\n\t\t\t\t\t\t\t\t\t")]),i("a-input",{attrs:{placeholder:"请填写小程序AppID，必须是关联到企业的小程序应用"},model:{value:t.appid1,callback:function(e){t.appid1=e},expression:"appid1"}})],2),i("a-form-item",{attrs:{"label-col":{span:3},"wrapper-col":{span:21}}},[i("template",{slot:"label"},[i("span",{staticStyle:{color:"red"}},[t._v("*")]),t._v("page路径\n\t\t\t\t\t\t\t\t\t")]),i("a-input",{staticStyle:{"margin-bottom":"10px"},attrs:{placeholder:"必须以“.html”结尾，例如：pages/index.html"},model:{value:t.pageUrl1,callback:function(e){t.pageUrl1=e},expression:"pageUrl1"}})],2),i("a-form-item",{attrs:{"label-col":{span:3},"wrapper-col":{span:21}}},[i("template",{slot:"label"},[t._v("\n\t\t\t\t\t\t\t\t\t\t素材同步\n\t\t\t\t\t\t\t\t\t")]),i("a-radio-group",{attrs:{disabled:1==t.disabledSync1},on:{change:t.changeMaterialSync},model:{value:t.materialSync1,callback:function(e){t.materialSync1=e},expression:"materialSync1"}},[i("a-radio",{attrs:{value:0}},[t._v("不同步")]),i("a-radio",{style:{display:1==t.materialSync1?"block":""},attrs:{value:1}},[t._v("\n\t\t\t\t\t\t\t\t\t\t\t同步至【内容引擎】\n\t\t\t\t\t\t\t\t\t\t\t"),i("div",{directives:[{name:"show",rawName:"v-show",value:1==t.materialSync1,expression:"materialSync1 == 1"}],staticStyle:{"margin-top":"10px"}},[t._v("\n\t\t\t\t\t\t\t\t\t\t\t\t选择分组：\n\t\t\t\t\t\t\t\t\t\t\t\t"),i("a-tree-select",{staticStyle:{width:"225px"},attrs:{dropdownStyle:{maxHeight:"150px",overflow:"auto"},treeData:t.groupList,placeholder:"Please select",treeDefaultExpandAll:""},model:{value:t.selectGroupId1,callback:function(e){t.selectGroupId1=e},expression:"selectGroupId1"}})],1)])],1)],2)]:t._e(),0==t.miniproAddType?[i("a-form-item",{directives:[{name:"show",rawName:"v-show",value:""==t.material_id31,expression:"material_id31 == ''"}],attrs:{"label-col":{span:3},"wrapper-col":{span:21}}},[i("template",{slot:"label"},[i("span",{staticStyle:{color:"red"}},[t._v("*")]),t._v("小程序\n\t\t\t\t\t\t\t\t\t")]),i("div",{staticClass:"upload-border",on:{click:function(e){return t.openShowModalMinipro1()}}},[i("a-icon",{staticClass:"upload-plus",attrs:{type:"plus"}}),i("span",[t._v("选择小程序")])],1)],2),i("a-form-item",{directives:[{name:"show",rawName:"v-show",value:t.material_id31,expression:"material_id31"}],attrs:{"label-col":{span:3},"wrapper-col":{span:21}}},[i("template",{slot:"label"},[i("span",{staticStyle:{color:"red"}},[t._v("*")]),t._v("小程序\n\t\t\t\t\t\t\t\t\t")]),i("div",{staticClass:"upload-border",on:{click:function(e){return t.openShowModalMinipro1()}}},[i("img",{attrs:{src:a("088b"),alt:""}}),t._v("\n\t\t\t\t\t\t\t\t\t\t已选择1条小程序\n\t\t\t\t\t\t\t\t\t\t"),i("p",{staticStyle:{color:"blue",margin:"14px"},on:{click:function(e){return t.openShowModalMinipro1()}}},[t._v("\n\t\t\t\t\t\t\t\t\t\t\t[修改]")])])],2)]:t._e()],2),i("chooseMinipro",{attrs:{show:t.showModalMinipro,type:t.typeValue2,callback:t.modalVisibleChange2,chooseId:t.chooseId}}),i("chooseDepartment",{ref:"user",attrs:{noticeTitle:t.noticeTitle,is_from:t.from_chat,is_special:1,is_external:t.is_external,show:t.showModalDepartment,chooseNum:t.chooseNum1,departmentDisabled:1,callback:t.modalVisibleChange3}}),i("cropperModal",{ref:"cropper",on:{ok:t.uploadAppletPic,cancel:t.cancleAppletPic}})],1)],1)],1)],1)],1)])},s=[],r=(a("ac4d"),a("8a81"),a("ac6a"),a("28a5"),a("6b54"),a("4917"),a("7f7f"),a("96cf"),a("3b8d")),l=(a("c5f6"),a("0094")),o=a("2afe"),n=a("c75b"),p=a("641c"),c=a("947c"),d=a("d6d3"),h=a("c1df"),u=a.n(h),m=a("7098"),_=a("85d2"),g=a("0cfc"),f=a("4262"),v={components:{WeChatModal:l["a"],chooseMsg:o["a"],chooseDepartment:n["a"],MyIcon:p["a"],chooseMinipro:c["a"],videoPlayer:d["videoPlayer"],cropperModal:m["a"],corpChooseTag:g["a"],chooseRule:f["a"]},data:function(){return{customItem:"",text:"",material_id:"",img:"",fileName:"",commonUrl:this.$store.state.commonUrl,isLoading:!1,urlId:"",corpInfo:[],suite_id:1,corpId:"",corpName:"",title:"",appList:[],appletAppList:[],otherAppList:[],appId:"",showModal2:!1,validity:1,isRedpacket:0,loading:!1,redpacket_status:1,rule1:{rule_type:1,rule_name:"",rule_fixed_amount:"0.3",rule_min_random_amount:"0.3",rule_max_random_amount:"200",rule_pic_url:"/static/image/default-redpacket.png",rule_title:"",rule_des:"",rule_thanking:""},rule2:{rule_name:"",rule_type:1,rule_fixed_amount:.3,rule_min_random_amount:"",rule_max_random_amount:"",rule_pic_url:"/static/image/default-redpacket.png",rule_title:"恭喜发财，大吉大利",rule_des:"戳我领取红包~",rule_thanking:"恭喜发财，大吉大利"},rule:{redrule_type:2,rule_id:0,rule_name:"",rule_type:1,rule_fixed_amount:.3,rule_min_random_amount:"",rule_max_random_amount:"",rule_pic_url:"/static/image/default-redpacket.png",rule_title:"恭喜发财，大吉大利",rule_des:"戳我领取红包~",rule_thanking:"恭喜发财，大吉大利",rule_save:1,redpacket_amount:6e3},users:[],noBindFlag:!1,correctness:2,defineField:[],fieldData:[],selectLoading:!1,chatNum:0,personsNum:0,sex:-1,province1:["全部"],follows:[],province:"",city:"",cityData:_["a"],joinTime:null,followTime:null,chatTime:null,followNum1:"",followNum2:"",signId:[],bindStoreList:[],style:{width:"195px"},is_fans:0,follow_status:-1,chooseType:"",fromCustom:1,checkedList1:[],checkedList3:[],tag_arr:[],isShowTag:!0,typeValue:2,closeShowModal2:!1,createDisabled:!1,showModal3:!1,comefrom:"",typeValue2:2,material_id1:"",news_type:1,chooseId:0,showModalUrl:!1,sketchAddType:1,sketchAddType1:1,url:"",closeShowModal3:!1,msgUrl:"",inputTitle:"",digest:"",confirmLoading:!1,popVisible:!1,groupId:[],index:0,modalUrlOk:!1,showModalApplet:!1,miniproAddType:1,miniproAddType1:1,material_id3:"",showModalMinipro:!1,appletUrl:"",appletInputTitle:"",appid:"",pageUrl:"",closeModalApplet:!1,modalAppletOk:!1,showModalDepartment:!1,checkedList:[],corpArr:[],chooseNum:0,chooseNum1:0,chooseNum2:0,chooseUserNum2:0,chooseDepartmentNum2:0,chooseNum3:0,chooseUserNum3:0,chooseDepartmentNum3:0,noticeTitle:"",selectChooseNum:0,chooseUserNum:0,chooseDepartmentNum:0,selectedUser:[],from_chat:0,is_external:0,groupList:[],selectGroupId:"",disabledSync:0,materialSync:0,playerOptions:{playbackRates:[.7,1,1.5,2],autoplay:!1,muted:!1,loop:!1,preload:"auto",language:"zh-CN",aspectRatio:"16:9",fluid:!0,notSupportedMessage:"此视频暂无法播放，请稍后再试",controlBar:{timeDivider:!0,durationDisplay:!0,remainingTimeDisplay:!1,fullscreenToggle:!0}},interval:1,interval_time:1,interval_num:50,sendType:0,sendDate:u()(new Date),sendTime:u()(new Date),materialSync1:0,disabledSync1:0,material_id0:"",msgUrl1:"",inputTitle1:"",digest1:"",url1:"",material_id11:"",selectGroupId1:"",appletUrl1:"",appletInputTitle1:"",appid1:"",pageUrl1:"",material_id31:""}},methods:{goBack:function(){localStorage.removeItem("notAllow"),localStorage.removeItem("backUrl"),this.$router.push("/massMessage/list?isRefresh=1")},disabledDate:function(t){return t&&t>u()().endOf("day")},changeJoinTime:function(t,e){this.joinTime=t,this.getPersonsNum()},changeFollowTime:function(t,e){this.followTime=t,this.getPersonsNum()},changeChatTime:function(t,e){this.chatTime=t,this.getPersonsNum()},followMinNumChange:function(t){var e=t.target.value,a=/[^\d]/;isNaN(e)||a.test(e)||(this.followNum1=e)},followMaxNumChange:function(t){var e=t.target.value,a=/[^\d]/;isNaN(e)||a.test(e)||(this.followNum2=e)},followNumBlur:function(){if(""!=this.followNum1&&""!=this.followNum2&&Number(this.followNum1)>Number(this.followNum2)){var t=this.followNum1;this.followNum1=this.followNum2,this.followNum2=t}this.getPersonsNum()},handleChangeSign:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(e){var a,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.axios.post("third-store/get-merchants",{storeType:[],status:"1",storeName:e,uid:localStorage.getItem("uid"),isAll:1});case 2:a=t.sent,i=a.data,0!=i.error?this.$message.error(i.error_msg):this.bindStoreList=i.data.info;case 5:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),chooseUrl:function(t){this.showModalUrl=!0,this.popVisible=!1,this.index!==t&&(this.msgUrl="",this.inputTitle="",this.digest="",this.url="",this.closeShowModal3=!1,this.modalUrlOk=!1,this.material_id="",this.material_id1="",this.selectGroupId="",this.materialSync=0,this.disabledSync=0),1==this.sketchAddType1&&this.msgUrl&&(this.closeShowModal3=!0),this.msgUrl1=this.msgUrl,this.inputTitle1=this.inputTitle,this.digest1=this.digest,this.url1=this.url,this.material_id0=this.material_id,this.material_id11=this.material_id1,this.sketchAddType=this.sketchAddType1,this.materialSync1=this.materialSync,this.disabledSync1=this.disabledSync,this.getGroupList1(this.selectGroupId),this.index=t},openShowModal:function(){this.material_id1?(this.material_id1=this.material_id1,this.chooseId=Number(this.material_id1)):this.chooseId=0,this.comefrom="1",this.typeValue2=1,this.showModal3=!0,this.popVisible=!1,this.showModalUrl=!1},openShowModalMinipro1:function(){this.material_id31?this.chooseId=Number(this.material_id31):this.chooseId=0,this.typeValue2=7,this.showModalMinipro=!0,this.popVisible=!1,this.showModalApplet=!1},handleUrl:function(){var t=/^([hH][tT]{2}[pP]:|[hH][tT]{2}[pP][sS]:)((\\|\/)+)/;if(1==this.sketchAddType){if(""==this.msgUrl1)return this.$message.error("请选择图片封面"),!1;if(""==this.inputTitle1)return this.$message.error("请填写标题"),!1;if(!t.test(this.url1))return this.$message.error("请检查跳转链接格式是否正确(https://或http://开头)"),!1}else if(""==this.material_id11)return this.$message.error("请选择图文"),!1;this.sketchAddType1=this.sketchAddType,this.msgUrl=this.msgUrl1,this.inputTitle=this.inputTitle1,this.digest=this.digest1,this.url=this.url1,this.materialSync=this.materialSync1,this.selectGroupId=this.selectGroupId1,this.material_id1=this.material_id11,this.material_id=this.material_id0,this.selectGroupId1=this.selectGroupId,this.showModalUrl=!1,this.modalUrlOk=!0},handleCancelUrl:function(){this.modalUrlOk||(this.material_id1="",this.msgUrl="",this.inputTitle="",this.digest="",this.url="",this.closeShowModal3=!1,this.index=0),this.showModalUrl=!1},chooseApplet:function(t){this.showModalApplet=!0,this.popVisible=!1,this.index!==t&&(this.appletUrl="",this.appletInputTitle="",this.appid="",this.pageUrl="",this.closeModalApplet=!1,this.materialSync=0,this.disabledSync=0),1==this.miniproAddType1&&this.appletUrl&&(this.closeModalApplet=!0),this.appletUrl1=this.appletUrl,this.appletInputTitle1=this.appletInputTitle,this.appid1=this.appid,this.pageUrl1=this.pageUrl,this.material_id0=this.material_id,this.material_id31=this.material_id3,this.miniproAddType=this.miniproAddType1,this.materialSync1=this.materialSync,this.disabledSync1=this.disabledSync,this.getGroupList1(this.selectGroupId),this.index=t},checkout:function(t){t.length<4&&this.$message.warning("小程序标题长度需在4-12个字符")},handleApplet:function(){if(1==this.miniproAddType){if(""==this.appletUrl1)return this.$message.error("请选择图片封面"),!1;if(""==this.appletInputTitle1)return this.$message.error("请填写标题"),!1;if(this.appletInputTitle1.length<4)return this.$message.error("小程序标题长度需在4-12个字符"),!1;if(""==this.appid1)return this.$message.error("请填写小程序AppID"),!1;if(""==this.pageUrl1)return this.$message.error("请填写小程序路径"),!1}else if(""==this.material_id31)return this.$message.error("请选择小程序"),!1;this.miniproAddType1=this.miniproAddType,this.appletUrl=this.appletUrl1,this.appletInputTitle=this.appletInputTitle1,this.appid=this.appid1,this.pageUrl=this.pageUrl1,this.material_id3=this.material_id31,this.material_id=this.material_id0,this.selectGroupId=this.selectGroupId1,this.materialSync=this.materialSync1,this.showModalApplet=!1,this.modalAppletOk=!0},handleCancelApplet:function(){this.showModalApplet=!1,this.modalAppletOk||(this.material_id3="",this.appletUrl="",this.appletInputTitle="",this.appid="",this.pageUrl="",this.closeModalApplet=!1,this.index=0)},changeValidity:function(){var t=this;this.users=[],this.chooseNum=0,this.chooseNum2=0,this.chooseNum3=0,this.selectChooseNum=0,this.checkedList1=[],this.checkedList3=[],this.city="",this.province1=["全部"],this.follow_status=-1,this.province="",this.typeValue=2,this.fromCustom=1;var e={target:{value:this.typeValue}};1==this.validity&&(this.sex=-1,this.tag_ids="",this.tag_arr=[],this.index=0,this.selectLoading=!0,this.from_chat=0,this.chooseType=0,this.$nextTick((function(){t.$refs.user.getDepartmentList()})),this.getPersonsNum()),this.changeType(e),this.checkedList=[],this.text="",this.deleteMessage(),this.isRedpacket=0,this.resetRedRule()},resetRedRule:function(){this.rule1={rule_type:1,rule_name:"",rule_fixed_amount:"0.3",rule_min_random_amount:"0.3",rule_max_random_amount:"200",rule_pic_url:"/static/image/default-redpacket.png",rule_title:"",rule_des:"",rule_thanking:""},this.rule2={rule_name:"",rule_type:1,rule_fixed_amount:.3,rule_min_random_amount:"",rule_max_random_amount:"",rule_pic_url:"/static/image/default-redpacket.png",rule_title:"恭喜发财，大吉大利",rule_des:"戳我领取红包~",rule_thanking:"恭喜发财，大吉大利"},this.rule={redrule_type:2,rule_id:0,rule_name:"",rule_type:1,rule_fixed_amount:.3,rule_min_random_amount:"",rule_max_random_amount:"",rule_pic_url:"/static/image/default-redpacket.png",rule_title:"恭喜发财，大吉大利",rule_des:"戳我领取红包~",rule_thanking:"恭喜发财，大吉大利",rule_save:1,redpacket_amount:6e3}},changeIsRedpacket:function(){this.text="",this.deleteMessage(),this.resetRedRule(),3==this.validity&&this.getChatNum()},changeSelect:function(t){this.rule.rule_id=t,this.rule.rule_id&&this.getRuleDetail()},changeRuleSave:function(){this.rule.rule_save=(this.rule.rule_save+1)%2},getRuleDetail:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(){var e,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.axios.post("red-pack-rule/rule-info",{uid:localStorage.getItem("uid"),id:this.rule.rule_id});case 2:e=t.sent,a=e.data,0!=a.error?this.$message.error(a.error_msg):(this.rule1.rule_name=a.data.name,this.rule1.rule_type=a.data.type,this.rule1.rule_fixed_amount=a.data.fixed_amount,this.rule1.rule_min_random_amount=a.data.min_random_amount,this.rule1.rule_max_random_amount=a.data.max_random_amount,this.rule1.rule_pic_url=a.data.pic_url,this.rule1.rule_title=a.data.title,this.rule1.rule_des=a.data.des,this.rule1.rule_thanking=a.data.thanking);case 5:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),changeType2:function(t){this.rule2.rule_type=t.target.value},changeType1:function(t){this.rule1.rule_type=t.target.value},beforeUpload:function(t){var e="image/jpeg"===t.type||"image/png"===t.type;if(!e)return this.$message.error("海报仅支持jpg、jpeg、png格式！"),!1;var a=t.size/1024/1024<2;if(!a)return this.$message.error("图片大小不超过2M"),!1;this.uploadImage(t)},uploadImage:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(e){var a,i,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.loading=!0,a=new FormData,a.append("uid",localStorage.getItem("uid")),a.append("fileInfo",e),t.next=6,this.axios.post("sub-user/upload-image",a);case 6:i=t.sent,s=i.data,0!=s.error?(this.$message.error(s.error_msg),this.loading=!1):(this.rule2.rule_pic_url=s.data.local_path,this.loading=!1);case 9:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),changeFromCustom:function(){this.checkedList1=[],this.selectChooseNum=0,this.checkedList=[],this.chooseNum2=0,3==this.validity&&1==this.isRedpacket&&this.getChatNum(),this.getPersonsNum()},changeCorrectness:function(t){1==t?this.correctness=1:2==t&&(this.correctness=2),this.selectLoading=!0,this.getPersonsNum()},moment:u.a,openShowModal3:function(t,e){this.chooseId="undefined"==typeof e?0:Number(e),this.comefrom="1",this.showModal3=!0,5==this.typeValue?this.typeValue2=1:7==this.typeValue?this.typeValue2=5:this.typeValue2=this.typeValue},changeType:function(t){this.typeValue=t.target.value,this.closeShowModal2=!1,this.text="",this.deleteMessage()},changeMaterialSync:function(){1==this.materialSync&&this.getGroupList()},getGroupList1:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(e){var a,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.axios.post("attachment/group",{uid:localStorage.getItem("uid"),is_channel:1});case 2:a=t.sent,i=a.data,0!=i.error?this.$message.error(i.error_msg):(this.groupList=i.data.group,this.selectGroupId1=e||this.groupList[0].key);case 5:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),getGroupList:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(e){var a,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.axios.post("attachment/group",{uid:localStorage.getItem("uid")});case 2:a=t.sent,i=a.data,0!=i.error?this.$message.error(i.error_msg):(this.groupList=i.data.group,this.selectGroupId=e||this.groupList[0].key);case 5:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),changeCorp:function(){this.$route.query.id||""!=this.customItem||(this.showModal2=!0)},choosePic:function(t){3==t||6==this.typeValue?this.comefrom="3":this.comefrom="1",this.chooseId=2!=t&&3!=t?Number(this.material_id||0):Number(this.material_id0),this.typeValue2=2,this.showModal3=!0,this.popVisible=!1,this.showModalApplet=!1,this.index=t,this.showModalUrl=!1},changeSketchAddType:function(){0==this.sketchAddType&&(this.materialSync=0),1==this.validity?(this.disabledSync1=0,this.msgUrl1="",this.inputTitle1="",this.digest1="",this.url1="",this.material_id0="",this.material_id11=""):(this.disabledSync=0,this.msgUrl="",this.inputTitle="",this.digest="",this.url="",this.material_id="",this.material_id1=""),this.closeShowModal3=!1},changeMiniproAddType:function(){0==this.sketchAddType&&(this.materialSync=0),1==this.validity?(this.disabledSync1=0,this.appletUrl1="",this.appletInputTitle1="",this.appid1="",this.pageUrl1="",this.material_id0="",this.material_id31=""):(this.disabledSync=0,this.appletUrl="",this.appletInputTitle="",this.appid="",this.pageUrl="",this.material_id="",this.material_id3=""),this.closeShowModal3=!1,this.closeModalApplet=!1},openShowModal1:function(){this.material_id11?this.chooseId=Number(this.material_id11):this.chooseId=0,this.comefrom="1",this.typeValue2=1,this.showModalUrl=!1,this.showModal3=!0,this.popVisible=!1},openShowModalMinipro:function(){this.material_id3?this.chooseId=Number(this.material_id3):this.chooseId=0,this.typeValue2=7,this.showModalMinipro=!0,this.popVisible=!1},modalVisibleChange2:function(t,e,a,i){"ok"==t?(3==this.index&&1==this.miniproAddType?this.$refs.cropper.edit(i.local_path,i.file_name):6==this.typeValue&&1==this.miniproAddType?this.$refs.cropper.edit(i.local_path,i.file_name):3==this.index&&0==this.miniproAddType?(this.appletInputTitle1=i.file_name,this.appletUrl1=i.local_path,this.material_id31=a,this.closeModalApplet=!0,this.showModalApplet=!0,this.showModalMinipro=!1):0==this.index&&6==this.typeValue&&0==this.miniproAddType?(this.appletInputTitle=i.file_name,this.appletUrl=i.local_path,this.material_id3=a,this.closeModalApplet=!0,this.showModalMinipro=!1):this.uploadMedia(a),this.closeShowModal2=!0):(1==this.index?this.img||(this.index=0):2==this.index?this.showModalUrl=!0:3==this.index&&(this.showModalApplet=!0),this.showModalMinipro=!1,this.showModal3=!1)},cancleAppletPic:function(){3==this.index&&1==this.miniproAddType&&(this.showModalApplet=!0)},uploadAppletPic:function(t,e){this.uploadMedia(t)},uploadMedia:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(e){var a,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.axios.post("work-material/upload-media",{corp_id:this.corpId,suite_id:this.suite_id,attachment_id:e});case 2:a=t.sent,i=a.data,0!=i.error?this.$message.error(i.error_msg):isNaN(e)||""==e?this.$message.error("请选择素材"):(0!=this.index?1==this.index?(this.material_id=i.data.id,this.img=i.data.local_path,this.fileName=i.data.file_name):2==this.index?(0==this.sketchAddType?(this.material_id11=e,this.msgUrl1=i.data.artList[0].local_path,this.url1=i.data.artList[0].content_source_url,this.inputTitle1=i.data.artList[0].title,this.digest1=i.data.artList[0].digest):(this.material_id0=e,this.msgUrl1=i.data.local_path),this.showModalUrl=!0,this.closeShowModal3=!0):3==this.index&&(this.material_id0=e,this.appletUrl1=i.data.local_path,this.closeModalApplet=!0,this.showModalApplet=!0):2==this.typeValue?(this.material_id=i.data.id,this.img=i.data.local_path,this.fileName=i.data.file_name):5==this.typeValue?(0==this.sketchAddType?(this.material_id1=e,this.msgUrl=i.data.artList[0].local_path,this.url=i.data.artList[0].content_source_url,this.inputTitle=i.data.artList[0].title,this.digest=i.data.artList[0].digest):(this.material_id=e,this.msgUrl=i.data.local_path),this.closeShowModal3=!0):6==this.typeValue?(this.material_id=e,this.appletUrl=i.data.local_path,this.closeModalApplet=!0):3!=this.typeValue&&4!=this.typeValue&&7!=this.typeValue||(this.fileName=i.data.file_name,this.material_id=e),this.showModalMinipro=!1,this.showModal3=!1);case 5:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),changeDate:function(t,e){this.sendDate=u()(e,"YYYY-MM-DD")},changeTime:function(t,e){this.sendTime=u()(e,"HH:mm")},createMessage:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(){var e,a,i,s,r,l,o,n,p;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e=[],""!=this.title){t.next=4;break}return this.$message.warning("请填写名称"),t.abrupt("return",!1);case 4:if(1!=this.validity&&3!=this.validity){t.next=42;break}if(0!=this.isRedpacket||this.text||this.img||this.modalUrlOk||this.modalAppletOk){t.next=8;break}return this.$message.warning("请填写群发内容"),t.abrupt("return",!1);case 8:if(1!=this.isRedpacket){t.next=42;break}if(1!=this.rule.redrule_type){t.next=17;break}if(this.rule.rule_id){t.next=15;break}return this.$message.destroy(),this.$message.warning("请选择红包规则！"),this.current=0,t.abrupt("return",!1);case 15:t.next=42;break;case 17:if(2!=this.rule.redrule_type){t.next=42;break}if(""!=this.rule2.rule_name){t.next=22;break}return this.$message.destroy(),this.$message.warning("请输入红包规则名称"),t.abrupt("return",!1);case 22:if(1!=this.rule2.rule_type){t.next=27;break}if(""!=this.fixed_amount){t.next=27;break}return this.$message.destroy(),this.$message.warning("请输入红包金额"),t.abrupt("return",!1);case 27:if(2!=this.rule2.rule_type){t.next=38;break}if(""!=this.rule2.rule_min_random_amount&&""!=this.rule2.rule_max_random_amount){t.next=34;break}return this.$message.destroy(),this.$message.warning("请输入红包金额"),t.abrupt("return",!1);case 34:if(!(this.rule2.rule_min_random_amount>=this.rule2.rule_max_random_amount)){t.next=38;break}return this.$message.destroy(),this.$message.warning("随机金额最大值必须大于最小值"),t.abrupt("return",!1);case 38:if(""!=this.rule2.rule_title.trim()){t.next=42;break}return this.$message.destroy(),this.$message.warning("请填写红包标题"),t.abrupt("return",!1);case 42:if(1!=this.validity){t.next=51;break}if(1==this.isRedpacket&&"undefined"==typeof this.urlId&&(this.rule.redpacket_amount=1==this.rule.redrule_type?1==this.rule1.rule_type?""!=this.rule1.rule_fixed_amount?100*this.rule1.rule_fixed_amount*this.personsNum/100:"--":""!=this.rule1.rule_max_random_amount?100*this.rule1.rule_max_random_amount*this.personsNum/100:"--":1==this.rule2.rule_type?""!=this.rule2.rule_fixed_amount?100*this.rule2.rule_fixed_amount*this.personsNum/100:"--":""!=this.rule2.rule_max_random_amount?100*this.rule2.rule_max_random_amount*this.personsNum/100:"--"),2!=this.fromCustom){t.next=48;break}if(0!=this.checkedList1.length&&0!=this.selectChooseNum){t.next=48;break}return this.$message.warning("请选择客户归属成员"),t.abrupt("return",!1);case 48:e=this.checkedList1,t.next=124;break;case 51:if(2!=this.validity){t.next=118;break}if(0!=this.chooseNum3){t.next=55;break}return this.$message.warning("请选择企业成员"),t.abrupt("return",!1);case 55:if(1!=this.typeValue){t.next=61;break}if(this.text){t.next=59;break}return this.$message.warning("请填写群发内容"),t.abrupt("return",!1);case 59:t.next=115;break;case 61:if(2!=this.typeValue&&3!=this.typeValue&&4!=this.typeValue&&7!=this.typeValue){t.next=67;break}if(this.closeShowModal2){t.next=65;break}return this.$message.warning("请填写群发内容"),t.abrupt("return",!1);case 65:t.next=115;break;case 67:if(5!=this.typeValue){t.next=90;break}if(a=/^([hH][tT]{2}[pP]:|[hH][tT]{2}[pP][sS]:)((\\|\/)+)/,1!=this.sketchAddType){t.next=85;break}if(""!=this.msgUrl){t.next=75;break}return this.$message.error("请选择图片封面"),t.abrupt("return",!1);case 75:if(""!=this.inputTitle){t.next=80;break}return this.$message.error("请填写图文标题"),t.abrupt("return",!1);case 80:if(a.test(this.url)){t.next=83;break}return this.$message.error("请检查跳转链接格式是否正确(https://或http://开头)"),t.abrupt("return",!1);case 83:t.next=88;break;case 85:if(""!=this.material_id1){t.next=88;break}return this.$message.error("请选择图文"),t.abrupt("return",!1);case 88:t.next=115;break;case 90:if(6!=this.typeValue){t.next=115;break}if(1!=this.miniproAddType){t.next=112;break}if(""!=this.appletUrl){t.next=97;break}return this.$message.error("请选择图片封面"),t.abrupt("return",!1);case 97:if(""!=this.appletInputTitle){t.next=102;break}return this.$message.error("请填写小程序标题"),t.abrupt("return",!1);case 102:if(""!=this.appid){t.next=107;break}return this.$message.error("请填写小程序AppID"),t.abrupt("return",!1);case 107:if(""!=this.pageUrl){t.next=110;break}return this.$message.error("请填写小程序路径"),t.abrupt("return",!1);case 110:t.next=115;break;case 112:if(""!=this.material_id3){t.next=115;break}return this.$message.error("请选择小程序"),t.abrupt("return",!1);case 115:e=this.checkedList3,t.next=124;break;case 118:if(3!=this.validity){t.next=124;break}if(2!=this.fromCustom){t.next=123;break}if(0!=this.chooseNum2){t.next=123;break}return this.$message.warning("请选择群归属成员"),t.abrupt("return",!1);case 123:e=this.checkedList;case 124:if(2!=this.interval||null!=this.interval_num){t.next=127;break}return this.$message.error("请填写每位成员客户分批推送人数"),t.abrupt("return",!1);case 127:for(i=1,1==this.validity?i=this.correctness:2==this.validity?i=3:3==this.validity&&(i=4),s=JSON.parse(JSON.stringify(this.fieldData)),r=0;r<s.length;r++)0==s[r].match.length&&(s.splice(r,1),r--);return l={redrule_type:this.rule.redrule_type,rule_id:this.rule.rule_id,rule_save:this.rule.rule_save,redpacket_amount:this.rule.redpacket_amount},1==this.rule.redrule_type?l=Object.assign(l,this.rule1):(l=Object.assign(l,this.rule2),l.rule_id=0),l.rule_thanking=l.rule_thanking||"恭喜发财，大吉大利",o={is_redpacket:this.isRedpacket,isMasterAccount:localStorage.getItem("isMasterAccount"),sub_id:localStorage.getItem("sub_id"),uid:localStorage.getItem("uid"),corp_id:this.corpId,suite_id:this.suite_id,id:this.urlId,title:this.title,agent_id:this.appId,send_type:i,sex:this.sex,is_fans:this.is_fans,tag_ids:this.tag_ids,msg_type:this.typeValue,type:this.validity,users:this.users,add_type:this.index,text_content:this.text,media_id:this.material_id,link_title:this.inputTitle,link_attachment_id:this.material_id,link_desc:this.digest,link_url:this.url,mini_title:this.appletInputTitle,mini_pic_media_id:this.material_id,mini_appid:this.appid,mini_page:this.pageUrl,voice_media_id:this.material_id,video_media_id:this.material_id,file_media_id:this.material_id,attribute:s,attachment_id:this.material_id3||this.material_id1,materialSync:this.materialSync,groupId:this.selectGroupId,province:this.province,city:this.city,user_ids:e,follow_id:this.follow_status,start_time:this.joinTime&&this.joinTime.length>1?this.joinTime[0].format("YYYY-MM-DD HH:mm"):"",end_time:this.joinTime&&this.joinTime.length>1?this.joinTime[1].format("YYYY-MM-DD HH:mm"):"",update_time:this.followTime&&this.followTime.length>1?[this.followTime[0].format("YYYY-MM-DD HH:mm"),this.followTime[1].format("YYYY-MM-DD HH:mm")]:null,chat_time:this.chatTime&&this.chatTime.length>1?[this.chatTime[0].format("YYYY-MM-DD HH:mm"),this.chatTime[1].format("YYYY-MM-DD HH:mm")]:null,follow_num1:this.followNum1,follow_num2:this.followNum2,sign_id:this.signId,push_type:this.sendType,push_time:u()(this.sendDate).format("YYYY-MM-DD")+" "+u()(this.sendTime).format("HH:mm"),sender:this.checkedList3,interval:this.interval,interval_time:this.interval_time,interval_num:this.interval_num,belong_id:this.fromCustom},o=Object.assign(o,l),t.next=138,this.axios.post("work-group-sending/add",o);case 138:n=t.sent,p=n.data,0!=p.error?this.$message.error(p.error_msg):(localStorage.removeItem("notAllow"),localStorage.removeItem("backUrl"),"undefined"==typeof this.urlId?this.$router.push("/massMessage/list"):this.$router.push("/massMessage/list?isRefresh=1"));case 141:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),getDetail:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(){var e,a,i=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.axios.post("work-group-sending/detail",{uid:localStorage.getItem("uid"),id:this.urlId});case 2:e=t.sent,a=e.data,0!=a.error?(this.isLoading=!1,this.$message.error(a.error_msg)):(this.appId=a.data.agent_id||"",this.getAppList(this.appId),this.fileName=a.data.file_name,this.sendType=a.data.push_type,a.data.push_time&&(this.sendDate=u()(a.data.push_time),this.sendTime=u()(a.data.push_time)),this.isRedpacket=a.data.is_redpacket,this.redpacket_status=a.data.redpacket_status,a.data.rule_id?(this.rule.rule_id=a.data.rule_id,this.rule.redrule_type=1,this.rule1={rule_type:a.data.rule_type,rule_name:a.data.rule_name,rule_fixed_amount:a.data.rule_fixed_amount,rule_min_random_amount:a.data.rule_min_random_amount,rule_max_random_amount:a.data.rule_max_random_amount,rule_pic_url:a.data.rule_pic_url,rule_title:a.data.rule_title,rule_des:a.data.rule_des,rule_thanking:a.data.rule_thanking},this.rule=Object.assign(this.rule,this.rule1)):(this.rule.redrule_type=2,this.rule2={rule_type:a.data.rule_type,rule_name:a.data.rule_name,rule_fixed_amount:a.data.rule_fixed_amount,rule_min_random_amount:a.data.rule_min_random_amount,rule_max_random_amount:a.data.rule_max_random_amount,rule_pic_url:a.data.rule_pic_url,rule_title:a.data.rule_title,rule_des:a.data.rule_des,rule_thanking:a.data.rule_thanking},this.rule=Object.assign(this.rule,this.rule2)),this.rule=Object.assign(this.rule,{rule_save:0,redpacket_amount:a.data.redpacket_amount}),this.text=a.data.text_content,this.selectGroupId=a.data.groupId,this.interval=a.data.interval,this.interval_time=a.data.interval_time,this.interval_num=a.data.interval_num,3==a.data.send_type?(this.validity=2,this.selectedUser=a.data.others.user_ids,this.chooseNum3=a.data.others.user_ids.length,this.checkedList3=a.data.others.user_ids,this.chooseUserNum3=0,this.chooseDepartmentNum3=0,this.checkedList3.map((function(t){"custom"==t.scopedSlots.title?i.chooseUserNum3++:"title"==t.scopedSlots.title&&i.chooseDepartmentNum3++})),this.typeValue=a.data.msg_type,3!=this.typeValue&&4!=this.typeValue&&7!=this.typeValue||(this.material_id=a.data.attachment_id),this.closeShowModal2=!0):2==a.data.send_type?(this.validity=1,this.index=a.data.add_type,this.correctness=a.data.send_type,this.province=a.data.others.province,this.city=a.data.others.city,this.province||this.city?this.province1=[this.province,this.city]:this.province1=["全部"],this.follow_status=a.data.others.follow_id,""==a.data.others.start_time&&""==a.data.others.end_time?this.joinTime=null:(this.joinTime=[],this.joinTime[0]=u()(a.data.others.start_time,"YYYY-MM-DD HH:mm"),this.joinTime[1]=u()(a.data.others.end_time,"YYYY-MM-DD HH:mm")),this.is_fans=a.data.others.is_fans,this.followTime=a.data.others.update_time.length>1?[u()(a.data.others.update_time[0],"YYYY-MM-DD HH:mm"),u()(a.data.others.update_time[1],"YYYY-MM-DD HH:mm")]:null,this.chatTime=a.data.others.chat_time.length>1?[u()(a.data.others.chat_time[0],"YYYY-MM-DD HH:mm"),u()(a.data.others.chat_time[1],"YYYY-MM-DD HH:mm")]:null,this.followNum1=a.data.others.follow_num1,this.followNum2=a.data.others.follow_num2,this.signId=a.data.others.sign_id,this.selectChooseNum=a.data.others.user_ids.length,this.checkedList1=a.data.others.user_ids,this.chooseUserNum=0,this.chooseDepartmentNum=0,this.checkedList1.map((function(t){"custom"==t.scopedSlots.title?i.chooseUserNum++:"title"==t.scopedSlots.title&&i.chooseDepartmentNum++}))):1==a.data.send_type?(this.validity=1,this.index=a.data.add_type,this.correctness=a.data.send_type,this.selectChooseNum=a.data.others.user_ids.length,this.checkedList1=a.data.others.user_ids,this.chooseUserNum=0,this.chooseDepartmentNum=0,this.checkedList1.map((function(t){"custom"==t.scopedSlots.title?i.chooseUserNum++:"title"==t.scopedSlots.title&&i.chooseDepartmentNum++}))):4==a.data.send_type&&(this.validity=3,this.selectedUser=a.data.others.user_ids,this.chooseNum2=a.data.others.user_ids.length,this.checkedList=a.data.others.user_ids,this.chooseUserNum2=0,this.chooseDepartmentNum2=0,this.checkedList.map((function(t){"custom"==t.scopedSlots.title?i.chooseUserNum2++:"title"==t.scopedSlots.title&&i.chooseDepartmentNum2++})),this.index=a.data.add_type),this.fromCustom=a.data.belong_id,1==this.fromCustom&&(this.checkedList1=[],this.selectChooseNum=0,this.chooseUserNum=0,this.chooseDepartmentNum=0,this.checkedList=[],this.chooseNum2=0,this.chooseUserNum2=0,this.chooseDepartmentNum2=0),2==a.data.msg_type||1==a.data.add_type?(this.img=a.data.image_url,this.fileName=a.data.file_name,this.material_id=a.data.image_attachment_id):5==a.data.msg_type||2==a.data.add_type?(0!=a.data.attachment_id?(this.material_id1=a.data.attachment_id,this.closeShowModal3=!0,this.sketchAddType1=0,this.sketchAddType=0):(this.disabledSync=a.data.material_sync,this.materialSync=a.data.material_sync,this.closeShowModal3=!0,this.getGroupList(a.data.groupId.toString()),this.selectGroupId=a.data.groupId.toString()),this.modalUrlOk=!0,this.msgUrl=a.data.link_pic_url,this.inputTitle=a.data.link_title,this.digest=a.data.link_desc,this.material_id=a.data.link_attachment_id,this.url=a.data.link_url):6!=a.data.msg_type&&3!=a.data.add_type||(0!=a.data.attachment_id?(this.material_id3=a.data.attachment_id,this.miniproAddType1=0,this.miniproAddType=0):(this.disabledSync=a.data.material_sync,this.materialSync=a.data.material_sync,this.getGroupList(a.data.groupId.toString()),this.selectGroupId=a.data.groupId.toString(),this.closeModalApplet=!0),this.disabledSync=a.data.material_sync,this.modalAppletOk=!0,this.appletInputTitle=a.data.mini_title,this.appletUrl=a.data.mini_pic_url,this.material_id=a.data.mini_attachment_id,this.appid=a.data.mini_appid,this.pageUrl=a.data.mini_page),this.closeShowModal2=!0,this.sex=a.data.sex,this.tag_ids=a.data.tag_ids,a.data.tag_ids.length>0?this.tag_arr=a.data.tag_ids.split(","):this.tag_arr=[],this.getFieldInfo(a.data.attribute),this.text=a.data.text_content,this.title=a.data.title,3==this.validity&&this.getChatNum(),this.isLoading=!1,this.isShowTag=!0);case 5:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),modalVisibleChange:function(t,e,a){if("ok"==t&&this.corpId!=e){this.selectLoading=!0,this.corpId=e,this.corpName=a,this.chooseNum=0,this.chooseUserNum=0,this.chooseDepartmentNum=0,this.chooseNum2=0,this.chooseUserNum2=0,this.chooseDepartmentNum2=0,this.noBindFlag=!1;for(var i=0;i<this.$store.state.noBindCorpArr.length;i++)this.corpId==this.$store.state.noBindCorpArr[i].corpid&&(this.noBindFlag=!0,this.validity=2);this.checkedList1=[],this.selectChooseNum=0,this.chooseUserNum=0,this.chooseDepartmentNum=0,this.appId="",this.getAppList(),this.deleteMessage(),this.getPersonsNum()}this.showModal2=!1},deleteMessage:function(){this.disabledSync=0,this.img="",this.msgUrl="",this.inputTitle="",this.digest="",this.url="",this.closeShowModal3=!1,this.modalUrlOk=!1,this.appletUrl="",this.appletInputTitle="",this.appid="",this.pageUrl="",this.index=0,this.closeModalApplet=!1,this.closeShowModal2=!1,this.modalAppletOk=!1,this.material_id="",this.material_id1="",this.material_id3="",this.fileName=""},showDepartmentList:function(t){if(this.chooseType=t,0==t){this.noticeTitle="只显示具有外部联系人权限的成员",this.chooseNum1=this.selectChooseNum,this.from_chat=7,this.is_external=1;var e=[];this.checkedList1.length>0&&this.checkedList1.map((function(t){e.push(t.id)})),this.$refs.user.rightIdList=JSON.parse(JSON.stringify(e)),this.$refs.user.rightList=JSON.parse(JSON.stringify(this.checkedList1))}else if(1==t)if(this.noticeTitle="",this.chooseNum1=this.chooseNum3,this.from_chat=0,this.is_external=0,this.urlId){var a=[];this.selectedUser.length>0&&this.selectedUser.map((function(t){a.push(t.id)})),this.$refs.user.rightIdList=JSON.parse(JSON.stringify(a)),this.$refs.user.rightList=JSON.parse(JSON.stringify(this.selectedUser))}else{var i=[];this.checkedList3.length>0&&this.checkedList3.map((function(t){i.push(t.id)})),this.$refs.user.rightIdList=JSON.parse(JSON.stringify(i)),this.$refs.user.rightList=JSON.parse(JSON.stringify(this.checkedList3))}else if(2==t)if(this.noticeTitle="只显示具有客户群使用权限的成员，且是群主身份",this.chooseNum1=this.chooseNum2,this.from_chat=8,this.is_external=1,this.urlId){var s=[];this.selectedUser.length>0&&this.selectedUser.map((function(t){s.push(t.id)})),this.$refs.user.rightIdList=JSON.parse(JSON.stringify(s)),this.$refs.user.rightList=JSON.parse(JSON.stringify(this.selectedUser))}else{var r=[];this.checkedList.length>0&&this.checkedList.map((function(t){r.push(t.id)})),this.$refs.user.rightIdList=JSON.parse(JSON.stringify(r)),this.$refs.user.rightList=JSON.parse(JSON.stringify(this.checkedList))}this.showModalDepartment=!0},modalVisibleChange3:function(t,e,a,i,s){"ok"==t&&(0==this.chooseType?(this.selectLoading=!0,this.checkedList1=s,this.selectChooseNum=parseInt(a)+parseInt(i),this.chooseUserNum=a,this.chooseDepartmentNum=i,this.getPersonsNum()):1==this.chooseType?(this.checkedList3=s,this.chooseNum3=parseInt(a)+parseInt(i),this.chooseUserNum3=a,this.chooseDepartmentNum3=i,this.urlId&&(this.selectedUser=JSON.parse(JSON.stringify(this.checkedList3)))):(this.checkedList=s,this.chooseNum2=parseInt(a)+parseInt(i),this.chooseUserNum2=a,this.chooseDepartmentNum2=i,this.urlId&&(this.selectedUser=JSON.parse(JSON.stringify(this.checkedList))),this.getChatNum())),this.showModalDepartment=!1},clearDepartmentList:function(t){0==t?(this.checkedList1=[],this.selectChooseNum=0,this.chooseUserNum=0,this.chooseDepartmentNum=0,this.selectLoading=!0,this.getPersonsNum()):1==t?(this.checkedList3=[],this.chooseNum3=0,this.chooseUserNum3=0,this.chooseDepartmentNum3=0,this.urlId&&(this.selectedUser=[])):2==t&&(this.checkedList=[],this.chooseNum2=0,this.chooseUserNum2=0,this.chooseDepartmentNum2=0,this.urlId&&(this.selectedUser=[]),this.getChatNum())},getAppList:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(e){var a,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.axios.post("work-group-sending/agent-list",{corp_id:this.corpId,suite_id:this.suite_id,agent_type:2});case 2:a=t.sent,i=a.data,0!=i.error?(this.isLoading=!1,this.$message.error(i.error_msg)):(this.appList=i.data,e?this.appId=e:0==this.appList.length||e||(this.appId=this.appList[0].id));case 5:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),changeCity:function(t){this.selectLoading=!0,"全部"!=t[0]?this.province=t[0]:this.province="","全部"!=t[1]?this.city=t[1]:this.city="",this.getPersonsNum()},handleChangeFollowStatus:function(){this.selectLoading=!0,this.getPersonsNum()},modalVisibleChange4:function(t,e){"ok"==t&&(this.tag_arr=e.split(","),this.tag_ids=e,this.getPersonsNum())},getFieldInfo:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(e){var a,i,s,r,l,o,n,p,c,d,h,u,m,_,g,f,v,b,x,y,w;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.axios.post("custom-field/field-info",{uid:localStorage.getItem("uid")});case 2:if(a=t.sent,i=a.data,0==i.error){t.next=8;break}this.$message.error(i.error_msg),t.next=74;break;case 8:for(this.defineField=i.data.defineField,s=!0,r=!1,l=void 0,t.prev=12,o=this.defineField[Symbol.iterator]();!(s=(n=o.next()).done);s=!0)p=n.value,c={field:p.fieldid,match:""},this.fieldData.push(JSON.parse(JSON.stringify(c)));t.next=20;break;case 16:t.prev=16,t.t0=t["catch"](12),r=!0,l=t.t0;case 20:t.prev=20,t.prev=21,s||null==o.return||o.return();case 23:if(t.prev=23,!r){t.next=26;break}throw l;case 26:return t.finish(23);case 27:return t.finish(20);case 28:if(!e){t.next=72;break}d=!0,h=!1,u=void 0,t.prev=32,m=e[Symbol.iterator]();case 34:if(d=(_=m.next()).done){t.next=58;break}for(g=_.value,f=!0,v=!1,b=void 0,t.prev=39,x=this.fieldData[Symbol.iterator]();!(f=(y=x.next()).done);f=!0)w=y.value,g.field==w.field&&(w.match=g.match);t.next=47;break;case 43:t.prev=43,t.t1=t["catch"](39),v=!0,b=t.t1;case 47:t.prev=47,t.prev=48,f||null==x.return||x.return();case 50:if(t.prev=50,!v){t.next=53;break}throw b;case 53:return t.finish(50);case 54:return t.finish(47);case 55:d=!0,t.next=34;break;case 58:t.next=64;break;case 60:t.prev=60,t.t2=t["catch"](32),h=!0,u=t.t2;case 64:t.prev=64,t.prev=65,d||null==m.return||m.return();case 67:if(t.prev=67,!h){t.next=70;break}throw u;case 70:return t.finish(67);case 71:return t.finish(64);case 72:this.selectLoading=!0,this.getPersonsNum();case 74:case"end":return t.stop()}}),t,this,[[12,16,20,28],[21,,23,27],[32,60,64,72],[39,43,47,55],[48,,50,54],[65,,67,71]])})));function e(e){return t.apply(this,arguments)}return e}(),changeInterval:function(){2==this.interval&&(this.interval_time=1,this.interval_num=50)},getChatNum:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(){var e,a,i,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:for(e=[],a=0;a<this.checkedList.length;a++)e.push(this.checkedList[a].id);return t.next=4,this.axios.post("work-group-sending/get-chat-num",{corp_id:this.corpId,user_ids:e});case 4:i=t.sent,s=i.data,0!=s.error?(this.selectLoading=!1,this.$message.error(s.error_msg)):this.chatNum=s.data.chatNum;case 7:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),getPersonsNum:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(){var e,a,i,s,r,l,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:for(this.selectLoading=!0,e=[],a=0;a<this.checkedList1.length;a++)e.push(this.checkedList1[a].id);for(i=JSON.parse(JSON.stringify(this.fieldData)),s=0;s<i.length;s++)0==i[s].match.length&&(i.splice(s,1),s--);return t.next=7,this.axios.post("work-external-contact-follow-user/group-custom-list",{isMasterAccount:localStorage.getItem("isMasterAccount"),sub_id:localStorage.getItem("sub_id"),uid:localStorage.getItem("uid"),corp_id:this.corpId,suite_id:this.suite_id,sex:this.sex,tag_ids:this.tag_ids,is_fans:this.is_fans,is_all:1,correctness:this.correctness,user_ids:e,province:this.province,city:this.city,follow_id:this.follow_status,fieldData:i,name:this.customItem.name,phone:this.customItem.phone,start_time:this.joinTime&&this.joinTime.length>1?this.joinTime[0].format("YYYY-MM-DD HH:mm"):"",end_time:this.joinTime&&this.joinTime.length>1?this.joinTime[1].format("YYYY-MM-DD HH:mm"):"",update_time:this.followTime&&this.followTime.length>1?[this.followTime[0].format("YYYY-MM-DD HH:mm"),this.followTime[1].format("YYYY-MM-DD HH:mm")]:null,chat_time:this.chatTime&&this.chatTime.length>1?[this.chatTime[0].format("YYYY-MM-DD HH:mm"),this.chatTime[1].format("YYYY-MM-DD HH:mm")]:null,follow_num1:this.followNum1,follow_num2:this.followNum2,sign_id:this.signId,belong_id:this.fromCustom});case 7:if(r=t.sent,l=r.data,0!=l.error)this.selectLoading=!1,this.$message.error(l.error_msg);else{if(this.personsNum=l.data.info.length,this.users=[],1==this.validity&&2==this.correctness)for(o=0;o<l.data.info.length;o++)this.users.push(l.data.info[o].key);this.selectLoading=!1}case 10:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),getFollowStatus:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(){var e,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.axios.post("custom-field/follow",{uid:localStorage.getItem("uid")});case 2:e=t.sent,a=e.data,0!=a.error?this.$message.error(a.error_msg):this.follows=a.data.follow;case 5:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},created:function(){var t=this;this.urlId=this.$route.query.id,this.corpArr=this.$store.state.corpArr,this.$route.query.item?(this.customItem=this.$route.query.item,this.corpId=this.customItem.corpId,this.corpArr.map((function(e){e.corpid==t.corpId&&(t.corpName=e.corp_name)})),this.checkedList1=this.customItem.checkedList,this.follow_status=Number(this.customItem.id)):(this.corpId=localStorage.getItem("corpId"),this.corpName=localStorage.getItem("corpName")),"undefined"!=typeof this.urlId?(this.isLoading=!0,localStorage.setItem("notAllow",1),localStorage.setItem("backUrl","/massMessage/list"),this.getDetail()):(this.getAppList(),this.getFieldInfo()),this.getFollowStatus(),this.handleChangeSign()}},b=v,x=(a("aa40"),a("2877")),y=Object(x["a"])(b,i,s,!1,null,"0be6b46a",null);e["default"]=y.exports},3846:function(t,e,a){a("9e1e")&&"g"!=/./g.flags&&a("86cc").f(RegExp.prototype,"flags",{configurable:!0,get:a("0bfb")})},"6b54":function(t,e,a){"use strict";a("3846");var i=a("cb7c"),s=a("0bfb"),r=a("9e1e"),l="toString",o=/./[l],n=function(t){a("2aba")(RegExp.prototype,l,t,!0)};a("79e5")((function(){return"/a/b"!=o.call({source:"a",flags:"b"})}))?n((function(){var t=i(this);return"/".concat(t.source,"/","flags"in t?t.flags:!r&&t instanceof RegExp?s.call(t):void 0)})):o.name!=l&&n((function(){return o.call(this)}))},aa40:function(t,e,a){"use strict";var i=a("d433"),s=a.n(i);s.a},c069:function(t,e,a){e=t.exports=a("2350")(!1),e.i(a("83fb"),""),e.i(a("9249"),""),e.push([t.i,".content-msg[data-v-0be6b46a]{border:1px solid #ffdda6;background:#fff2db;padding:10px;margin:0 0 15px 10px;text-align:left}.content-msg a[data-v-0be6b46a]:link,.content-msg a[data-v-0be6b46a]:visited{color:#1890ff;text-decoration:none}.item-info[data-v-0be6b46a] p{margin:0;word-break:break-word}.content-editable[data-v-0be6b46a]{font-size:14px;line-height:21px;padding:15px;border:1px solid #d9d9d9;height:110px;overflow:auto}.content-editable[data-v-0be6b46a] p{margin:0;word-break:break-word}.hide[data-v-0be6b46a]{display:none!important}#components-layout-demo-basic[data-v-0be6b46a]{height:100%}#components-layout-demo-basic .ant-layout-header[data-v-0be6b46a]{background:#fff;border-bottom:1px solid #e2e2e2;height:50px;min-width:760px;width:100%;line-height:50px}[data-v-0be6b46a] .ant-layout-header{padding:0 20px;font-size:16px;text-align:left}[data-v-0be6b46a] .ant-radio-button-wrapper{width:200px;height:55px;line-height:55px;padding:0 10px;margin:10px 5px}[data-v-0be6b46a] .ant-col-15{margin-left:15px}[data-v-0be6b46a] .ant-card-meta-avatar{float:right;padding:0}#components-layout-demo-basic .ant-layout-content[data-v-0be6b46a]{min-width:760px;width:100%;position:relative}.content[data-v-0be6b46a]{border:1px solid #e2e2e2;min-width:760px;position:absolute;top:20px;left:20px;right:20px;background-color:#fafafa;margin-bottom:20px}#components-layout-demo-basic>.ant-layout[data-v-0be6b46a]{margin-bottom:48px}#components-layout-demo-basic>.ant-layout[data-v-0be6b46a]:last-child{margin:0;height:100%}.list[data-v-0be6b46a]{height:100%;top:0;right:0;bottom:0;left:0;position:absolute;overflow-x:hidden;overflow-y:auto}.content-hd[data-v-0be6b46a]{height:80px;padding:20px 0;border-bottom:1px solid #e2e2e2}.content-bd[data-v-0be6b46a]{background:#f5f5f5}.msg_content_body[data-v-0be6b46a]{border-radius:4px;font-size:14px;color:#333;margin:20px}[data-v-0be6b46a] .ant-tag-checkable{background-color:#fafafa;border-color:#d9d9d9;margin:0 5px}.pull-left[data-v-0be6b46a]{width:88px}.push-type-item[data-v-0be6b46a]{position:relative;margin-bottom:8px;border:1px solid #d8d8d8;border-right:0;z-index:1;cursor:pointer;line-height:38px}.active[data-v-0be6b46a]{background:#fff;margin-right:-1px}.type[data-v-0be6b46a]{display:inline-block;width:65px;border-right:1px solid transparent;text-align:center}.add-new[data-v-0be6b46a]{background:#f9f9f9;cursor:pointer}.add-icon[data-v-0be6b46a]{font-size:12px;width:30px}.add-btn[data-v-0be6b46a],.add-icon[data-v-0be6b46a]{float:left;height:38px;line-height:38px;text-align:center;border:1px dashed #d8d8d8;border-right:0}.add-btn[data-v-0be6b46a]{width:58px}.pull-right[data-v-0be6b46a]{width:calc(100% - 20px);background:#fff;border:1px solid #d8d8d8;padding:24px;margin-right:20px}.fl[data-v-0be6b46a]{float:left}.msg_content_txt[data-v-0be6b46a]{width:calc(100% - 46px);border:1px solid #e9e9e9;padding:10px 16px;border-radius:4px;font-size:14px;color:#1a1a1a;background:#fff;float:left;word-break:break-word}.mt[data-v-0be6b46a]{margin-bottom:15px;overflow:hidden}[data-v-0be6b46a] #components-layout-demo-basic .ant-layout-sider{background:#fff;-webkit-box-flex:0!important;-ms-flex:0 0 24%!important;flex:0 0 24%!important;max-width:24%!important;min-width:24%!important;width:24%!important;border-right:1px solid #e2e2e2;padding:20px 20px}.wrap[data-v-0be6b46a]{border:1px solid #e2d6d6;margin:auto;width:100%;background:#f5f5f5;overflow-y:auto;-webkit-box-sizing:content-box;box-sizing:content-box}.wrap[data-v-0be6b46a],[data-v-0be6b46a] .ant-layout,[data-v-0be6b46a] .ant-spin-container,[data-v-0be6b46a] .ant-spin-nested-loading{height:100%}.popover-menu[data-v-0be6b46a]{cursor:pointer;text-align:center;display:inline-block;width:80px;border:1px solid rgba(0,0,0,.2)}.popover-menu1[data-v-0be6b46a],.popover-menu2[data-v-0be6b46a]{margin-left:10px}.popover-menu p[data-v-0be6b46a]{margin-bottom:5px}.material[data-v-0be6b46a]{max-width:80px;max-height:80px;position:absolute;top:50%;left:50%;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%)}.material-div[data-v-0be6b46a]{display:inline-block;position:relative;width:100px;height:100px;border:1px dashed #d8d8d8}.clear-current-list[data-v-0be6b46a]{display:inline-block;cursor:pointer;margin-left:10px;color:#1890ff}[data-v-0be6b46a] .ant-form-item-control{margin-left:15px;margin-bottom:10px}.upload-wrap[data-v-0be6b46a]{width:96px;height:96px;text-align:center;border:1px dashed #d8d8d8;background:#fff;cursor:pointer;margin-bottom:10px;float:left}.upload-plus[data-v-0be6b46a]{font-size:32px;line-height:96px;font-weight:300;color:#686868}.url-title[data-v-0be6b46a]{white-space:nowrap;font-size:18px}.url-text[data-v-0be6b46a],.url-title[data-v-0be6b46a]{overflow:hidden;text-overflow:ellipsis}.url-text[data-v-0be6b46a]{float:left;max-width:calc(100% - 74px);word-break:break-word;display:-webkit-box;-webkit-line-clamp:2;line-clamp:2;-webkit-box-orient:vertical;color:#a3a3a3}.url-img[data-v-0be6b46a]{float:right;width:64px;height:64px}.applet-title[data-v-0be6b46a]{overflow:hidden;text-overflow:ellipsis;white-space:nowrap;margin-bottom:10px}[data-v-0be6b46a] .ant-input-affix-wrapper .ant-input:not(:last-child){padding-right:52px}.upload-border[data-v-0be6b46a]{background:#fff;border:1px dotted #d8d8d8;height:110px;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;cursor:pointer;margin-bottom:10px}[data-v-0be6b46a] .ant-tag-checkable-checked{background-color:#1890ff}.audio[data-v-0be6b46a]{width:100%;height:150px;padding:50px 20px;background:#fff}.box[data-v-0be6b46a]{float:right;width:46px;height:46px;border-radius:50%;position:relative;border:2px solid #1890ff}.box[data-v-0be6b46a],.wifi-symbol[data-v-0be6b46a]{-webkit-box-sizing:border-box;box-sizing:border-box}.wifi-symbol[data-v-0be6b46a]{width:30px;height:30px;overflow:hidden;-webkit-transform:rotate(135deg);transform:rotate(135deg);position:absolute;left:13px;top:6px}.wifi-circle[data-v-0be6b46a]{border:2px solid #1890ff;border-radius:50%;position:absolute}.first[data-v-0be6b46a]{width:5px;height:5px;background:#1890ff;top:25px;left:25px}.second[data-v-0be6b46a]{width:25px;height:25px;top:15px;left:15px}.third[data-v-0be6b46a]{width:40px;height:40px;top:5px;left:5px}.editMessage[data-v-0be6b46a]{display:inline-block;margin-left:10px;color:#00f}.changeType[data-v-0be6b46a]{border:1px dashed #e2e2e2;background:#fff;margin:15px 0;line-height:110px}.changeType span[data-v-0be6b46a]{vertical-align:super}.file-name[data-v-0be6b46a]{float:right;margin-right:10px;max-width:calc(100% - 70px);word-break:break-all;display:-webkit-box;-webkit-line-clamp:4;-webkit-box-orient:vertical;overflow:hidden}.hideMask[data-v-0be6b46a]{color:rgba(0,0,0,.25);background-color:#f5f5f5;cursor:not-allowed;opacity:.5;position:absolute;top:0;bottom:0;width:100%!important;z-index:9999}[data-v-0be6b46a] .inputTitle{height:30px;line-height:30px;background:#0f0f0f;opacity:.3;color:#fff;padding:0 10px;margin-top:-30px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}[data-v-0be6b46a] .ant-tag{margin-right:5px;height:26px;line-height:25px}[data-v-0be6b46a] .ant-input-number-handler-wrap{display:none}[data-v-0be6b46a] .ant-form-item-label{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}",""])},d433:function(t,e,a){var i=a("c069");"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var s=a("499e").default;s("633da3e5",i,!0,{sourceMap:!1,shadowMode:!1})},ed13:function(t,e,a){t.exports=a.p+"assets/img/WeChatLogo.3ad5225d.jpg"}}]);