(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-06e0eb04"],{"19be":function(t,e){t.exports="data:image/gif;base64,R0lGODlhagAgAKIGAPb4/Ozx+MfW6pCt1kZ2u////wAAAAAAACH/C05FVFNDQVBFMi4wAwEAAAAh/wtYTVAgRGF0YVhNUDw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMDY3IDc5LjE1Nzc0NywgMjAxNS8wMy8zMC0yMzo0MDo0MiAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTUgKE1hY2ludG9zaCkiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6NjM3MjIyN0VCRDUwMTFFNkJBMTVEOEEwNDNEQ0JCMTUiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6NjM3MjIyN0ZCRDUwMTFFNkJBMTVEOEEwNDNEQ0JCMTUiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo2MzcyMjI3Q0JENTAxMUU2QkExNUQ4QTA0M0RDQkIxNSIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo2MzcyMjI3REJENTAxMUU2QkExNUQ4QTA0M0RDQkIxNSIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PgH//v38+/r5+Pf29fTz8vHw7+7t7Ovq6ejn5uXk4+Lh4N/e3dzb2tnY19bV1NPS0dDPzs3My8rJyMfGxcTDwsHAv769vLu6ubi3trW0s7KxsK+urayrqqmop6alpKOioaCfnp2cm5qZmJeWlZSTkpGQj46NjIuKiYiHhoWEg4KBgH9+fXx7enl4d3Z1dHNycXBvbm1sa2ppaGdmZWRjYmFgX15dXFtaWVhXVlVUU1JRUE9OTUxLSklIR0ZFRENCQUA/Pj08Ozo5ODc2NTQzMjEwLy4tLCsqKSgnJiUkIyIhIB8eHRwbGhkYFxYVFBMSERAPDg0MCwoJCAcGBQQDAgEAACH5BAUeAAYALAAAAABqACAAAANQWLrc/jDKSau9OOvNu/9gKI5kaZ5oqq5s675wLM90bd94ru9870OAoDD4mw2HRdlRmIwtic3XExCVPquuKbal3Xq/4LB4TC6bz+i0es1mJQAAIfkEBR4ABgAsHQAOAAgACAAAAwgYutz+MMqYAAAh+QQFHgAGACwxAA4ACAAIAAADCCi63P4wypgAACH5BAUeAAYALEUADgAIAAgAAAMIOLrc/jDKmAAAIfkEBR4ABgAsWQAOAAgACAAAAwhIutz+MMqYAAAh+QQFHgAGACwJAA4AWAAIAAADGli63P4wykmrvTjrzbv/YCiOZGmeaKqubFskADs="},"36bd":function(t,e,s){"use strict";var i=s("4bf8"),a=s("77f1"),n=s("9def");t.exports=function(t){var e=i(this),s=n(e.length),o=arguments.length,r=a(o>1?arguments[1]:void 0,s),c=o>2?arguments[2]:void 0,l=void 0===c?s:a(c,s);while(l>r)e[r++]=t;return e}},"47f8":function(t,e,s){"use strict";s.r(e);var i=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"scroll",staticStyle:{width:"100%","max-height":"100%",position:"absolute","overflow-y":"auto","padding-bottom":"30px"}},[i("div",[i("a-card",{staticStyle:{"margin-bottom":"20px",padding:"10px 20px"}},[i("label",{staticClass:"tpl-title"},[t._v("客户导入分配")])]),i("div",{staticClass:"content-msg",staticStyle:{margin:"0 20px 20px"}},[t._v("\n\t\t\t\t在合规的情况下，以手机号作为客户的线索，下载Ecxel模板表格后输入手机号上传。上传后，表格内手机号将平均分配给选择的员工，分配完成后员工会在企业微信收到添加好友的任务，需要员工手动添加客户。\n\t\t\t")]),i("div",{staticStyle:{padding:"0 20px"}},[i("span",{directives:[{name:"has",rawName:"v-has",value:"customImportList-all-list",expression:"'customImportList-all-list'"}],staticClass:"tabBtn",class:{activeBtn:1==t.tabKey},on:{click:function(e){return t.changeTab(1)}}},[t._v("批量列表")]),i("span",{directives:[{name:"has",rawName:"v-has",value:"customImportList-people",expression:"'customImportList-people'"}],staticClass:"tabBtn",class:{activeBtn:2==t.tabKey},on:{click:function(e){return t.changeTab(2)}}},[t._v("客户列表")])]),i("div",{directives:[{name:"show",rawName:"v-show",value:1==t.tabKey,expression:"tabKey == 1"}],staticStyle:{padding:"15px 0",margin:"0px 20px",background:"#FFF"}},[i("a-col",{staticStyle:{background:"#FFF",padding:"10px",margin:"0 20px","margin-top":"1px",overflow:"hidden"}},[i("a-button",{directives:[{name:"has",rawName:"v-has",value:"customImportList-all-export",expression:"'customImportList-all-export'"}],staticStyle:{float:"right"},attrs:{type:"primary"},on:{click:t.importExcel}},[t._v("导入Excel\n\t\t\t\t\t")]),i("div",{staticStyle:{float:"left",display:"flex","align-items":"center"}},[i("a-input",{staticStyle:{width:"170px"},attrs:{placeholder:"请输入Excel名称",autoComplete:"off"},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.find(e)}},model:{value:t.ExcelName,callback:function(e){t.ExcelName=e},expression:"ExcelName"}}),i("a-button",{staticStyle:{width:"210px","margin-right":"5px","margin-left":"5px"},on:{click:t.showChooseTag1}},[t.selectedIds1.length>0&&3!=t.currentTab1?i("span",[t._v("已选择"+t._s(t.selectedIds1.length)+"个标签")]):3==t.currentTab1?i("span",[t._v("已选择"+t._s(t.totalTagNum-t.selectedIds1.length)+"个标签")]):i("span",[t._v("选择标签")])]),i("a-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"primary"},on:{click:t.find}},[t._v("查找")]),i("a-button",{staticStyle:{"margin-left":"10px"},on:{click:t.clear}},[t._v("清空")])],1)],1),i("div",{staticClass:"content-bd"},[i("a-spin",{attrs:{tip:"Loading...",size:"large",spinning:t.isLoading}},[i("div",{staticClass:"spin-content"},[i("a-table",{attrs:{columns:t.columns,dataSource:t.batchList,pagination:!1,rowClassName:t.rowClassName},scopedSlots:t._u([{key:"snum",fn:function(e,s,i){return[t._v("\n                    "+t._s(e)+"/"+t._s(s.fail_num)+"\n                ")]}},{key:"all_num",fn:function(e,s,i){return[t._v("\n                    "+t._s(s.snum)+"/"+t._s(s.addNum)+"/"+t._s(s.snum-s.addNum)+"\n                ")]}},{key:"addNum",fn:function(e,s,i){return[t._v("\n                    "+t._s(e/(s.all_num-0)*100)+"%\n                ")]}},{key:"distribution_records",fn:function(e,s,a){return[i("div",{staticStyle:{"max-width":"300px"}},[e.length<=3?t._l(s.distribution_records,(function(s,a){return i("div",{staticClass:"mb-5"},[i("span",[t._v("第"+t._s(e.length-a)+"次分配("+t._s(s.distribution_time.substring(0,16))+"):")]),s.user_name.length<=5?t._l(s.user_name,(function(e,s){return i("a-tag",{attrs:{color:"name"==e.title?"orange":"blue"}},[t._v("\n                              "+t._s(e.name)+"\n                            ")])})):[i("a-popover",[i("span",{attrs:{slot:"content"},slot:"content"},[i("div",{staticClass:"w-h-600"},t._l(s.user_name,(function(e,s){return i("a-tag",{staticClass:"mb-5",attrs:{color:"name"==e.title?"orange":"blue"}},[t._v("\n                                        "+t._s(e.name)+"\n                                         ")])})),1)]),i("span",[t._l(s.user_name,(function(e,s){return i("span",[s<5?i("a-tag",{staticClass:"mb-5",attrs:{color:"name"==e.title?"orange":"blue"}},[t._v("\n                                         "+t._s(e.name)+"\n                                      ")]):t._e()],1)})),i("span",[t._v("共计"+t._s(s.user_name.length)+"个成员")])],2)])]],2)})):[t._l(s.distribution_records,(function(s,a){return i("div",{staticClass:"mb-5"},[a<3?[i("span",[t._v("第"+t._s(e.length-a)+"次分配("+t._s(s.distribution_time.substring(0,16))+"):")]),s.user_name.length<=5?t._l(s.user_name,(function(e,s){return i("a-tag",{staticClass:"mb-5",attrs:{color:"name"==e.title?"orange":"blue"}},[t._v("\n                                  "+t._s(e.name)+"\n                                ")])})):[i("a-popover",[i("span",{attrs:{slot:"content"},slot:"content"},[i("div",{staticClass:"w-h-600"},t._l(s.user_name,(function(e,s){return i("a-tag",{staticClass:"mb-5",attrs:{color:"name"==e.title?"orange":"blue"}},[t._v("\n                                            "+t._s(e.name)+"\n                                          ")])})),1)]),i("span",[t._l(s.user_name,(function(e,s){return i("span",[s<5?i("a-tag",{staticClass:"mb-5",attrs:{color:"name"==e.title?"orange":"blue"}},[t._v("\n                                         "+t._s(e.name)+"\n                                      ")]):t._e()],1)})),i("span",[t._v("共计"+t._s(s.user_name.length)+"个成员")])],2)])]]:t._e()],2)})),i("a-popover",[i("div",{attrs:{slot:"content"},slot:"content"},[i("div",{staticClass:"w-h-600"},t._l(s.distribution_records,(function(s,a){return i("div",{staticClass:"mb-5"},[i("span",[t._v("第"+t._s(e.length-a)+"次分配("+t._s(s.distribution_time)+"):")]),t._l(s.user_name,(function(e,s){return i("a-tag",{staticClass:"mb-5",attrs:{color:"name"==e.title?"orange":"blue"}},[t._v("\n                                        "+t._s(e.name)+"\n                                      ")])}))],2)})),0)]),i("div",{staticStyle:{color:"#1890FF",cursor:"pointer"}},[t._v("\n                              共计"+t._s(e.length)+"次分配\n                            ")])])]],2)]}},{key:"tag_names",fn:function(e,s,a){return[0==s.tag_names.length?i("div",[i("span",[t._v("--")])]):s.tag_names.length<=5?i("div",t._l(s.tag_names,(function(e){return i("span",[i("a-tag",{staticStyle:{"margin-bottom":"5px"},attrs:{color:"blue"}},[t._v("\n                          "+t._s(e)+"\n                        ")])],1)})),0):s.tag_names.length>5?i("div",[i("a-popover",[i("span",{attrs:{slot:"content"},slot:"content"},[i("div",{staticClass:"w-h-800"},t._l(s.tag_names,(function(e){return i("span",[i("a-tag",{staticStyle:{"margin-bottom":"5px"},attrs:{color:"blue"}},[t._v("\n                                  "+t._s(e)+"\n                                  ")])],1)})),0)]),t._l(s.tag_names,(function(e,s){return i("span",[s<5?i("a-tag",{staticStyle:{"margin-bottom":"5px"},attrs:{color:"blue"}},[t._v("\n                                  "+t._s(e)+"\n                                  ")]):t._e()],1)})),i("div",[t._v("共计"+t._s(s.tag_names.length)+"个标签")])],2)],1):t._e()]}},{key:"action",fn:function(e,s,a){return[i("a-button",{directives:[{name:"has",rawName:"v-has",value:"customImportList-assign",expression:"'customImportList-assign'"}],staticStyle:{"margin-right":"5px"},on:{click:function(e){return t.showImportDialog(s.import_id,1)}}},[t._v("再次分配")]),i("a-button",{directives:[{name:"has",rawName:"v-has",value:"customImportList-all-info",expression:"'customImportList-all-info'"}],staticStyle:{margin:"10px 5px 0 0"},on:{click:function(e){return t.detailList(s.import_id)}}},[t._v("\n\t\t\t\t\t\t\t\t\t\t客户明细\n\t\t\t\t\t\t\t\t\t")]),i("a-popconfirm",{attrs:{title:"确定删除吗?",okText:"确定",cancelText:"取消"},on:{confirm:function(e){return t.deleteList(s.import_id)}}},[i("a-button",{directives:[{name:"has",rawName:"v-has",value:"customImportList-all-delete",expression:"'customImportList-all-delete'"}],staticClass:"mt-5"},[t._v("删除")])],1)]}}])},[i("template",{slot:"addNum"},[t._v("\n\t\t\t\t\t\t\t\t\t添加客户数\n\t\t\t\t\t\t\t\t\t"),i("a-tooltip",{attrs:{placement:"bottom"}},[i("template",{slot:"title"},[i("div",[t._v("成功将手机号客户添加到企业微信里")])]),i("a-icon",{staticStyle:{"margin-left":"5px"},attrs:{type:"question-circle"}})],2)],1)],2),i("div",{directives:[{name:"show",rawName:"v-show",value:t.total>0,expression:"total > 0"}],staticClass:"pagination",staticStyle:{width:"100%",position:"absolute",margin:"20px 0px"}},[i("div",{staticClass:"pagination",staticStyle:{height:"32px",float:"right"}},[i("a-pagination",{attrs:{total:t.total,showSizeChanger:"",showQuickJumper:t.quickJumper,current:t.page,pageSize:t.pageSize,pageSizeOptions:["15","30","50","100"]},on:{change:t.changePage,showSizeChange:t.showSizeChange}})],1)])],1)])],1)],1),i("div",{directives:[{name:"show",rawName:"v-show",value:2==t.tabKey,expression:"tabKey == 2"}],staticStyle:{padding:"15px 0",margin:"0px 20px",background:"#FFF"}},[i("a-col",{staticStyle:{background:"#FFF",padding:"10px",margin:"0 20px","margin-top":"1px",display:"flex","justify-content":"space-between","align-items":"center"}},[i("div",{staticStyle:{float:"left",display:"flex","align-items":"center"}},[i("a-input",{staticStyle:{width:"170px","margin-right":"10px"},attrs:{value:t.phone,placeholder:"请输入客户电话"},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.find2(e)},change:t.phoneChange}}),i("a-select",{staticStyle:{width:"170px"},attrs:{showSearch:"",optionFilterProp:"children",placeholder:"请选择添加状态"},model:{value:t.addStatus,callback:function(e){t.addStatus=e},expression:"addStatus"}},[i("a-select-option",{attrs:{value:-1}},[t._v("全部状态")]),i("a-select-option",{attrs:{value:1}},[t._v("未添加")]),i("a-select-option",{attrs:{value:2}},[t._v("已添加")]),i("a-select-option",{attrs:{value:3}},[t._v("待分配")])],1),i("a-button",{staticStyle:{width:"210px","margin-right":"5px","margin-left":"5px"},on:{click:t.showChooseTag1}},[t.selectedIds1.length>0&&3!=t.currentTab1?i("span",[t._v("已选择"+t._s(t.selectedIds1.length)+"个标签")]):3==t.currentTab1?i("span",[t._v("已选择"+t._s(t.totalTagNum-t.selectedIds1.length)+"个标签")]):i("span",[t._v("选择标签")])]),i("a-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"primary"},on:{click:t.find2}},[t._v("查找")]),i("a-button",{staticStyle:{"margin-left":"10px"},on:{click:t.clear2}},[t._v("清空")])],1),i("div",{staticStyle:{display:"flex","align-items":"center"}},[i("a-button",{directives:[{name:"has",rawName:"v-has",value:"customImportList-people-recoverSetting",expression:"'customImportList-people-recoverSetting'"}],attrs:{type:"primary"},on:{click:t.showRecoveryDialog}},[t._v("回收设置")])],1)]),i("div",{staticClass:"content-bd"},[i("a-spin",{attrs:{tip:"Loading...",size:"large",spinning:t.isLoading2}},[i("div",{staticClass:"spin-content wrap-td"},[i("a-table",{attrs:{columns:t.columns2,rowKey:"detail_id",dataSource:t.customList,pagination:!1,rowClassName:t.rowClassName},scopedSlots:t._u([{key:"checkedBox",fn:function(e,s,a){return i("span",{},[i("a-checkbox",{staticStyle:{float:"right"},attrs:{disabled:1==s.is_add},on:{click:function(e){return t.changeSelectKey(s.detail_id,s.is_add)}},model:{value:t.checkBoxValue[a],callback:function(e){t.$set(t.checkBoxValue,a,e)},expression:"checkBoxValue[index]"}})],1)}},{key:"name",fn:function(e,s,a){return[""==s.name?i("span",[t._v("--/")]):t._e(),""!=s.name?i("span",[t._v(t._s(s.name)+"/")]):t._e(),""==s.sex?i("span",[t._v("--/")]):t._e(),""!=s.sex?i("span",[t._v(t._s(s.sex)+"/")]):t._e(),""==s.area?i("span",[t._v("--")]):t._e(),""!=s.area?i("span",[t._v(t._s(s.area))]):t._e()]}},{key:"des",fn:function(e,s,a){return[""==s.des?i("span",[t._v("--")]):t._e(),""!=s.des?i("span",[i("a-popover",[i("div",{attrs:{slot:"content"},slot:"content"},[i("div",{staticClass:"content-bz"},[t._v("\n                                "+t._s(s.des)+"\n                              ")])]),i("div",{staticClass:"ellipsis-one"},[t._v(t._s(s.des))])])],1):t._e()]}},{key:"userName",fn:function(e,s,a){return[i("a-tag",{attrs:{color:"orange"}},[t._v("\n\t\t\t\t\t\t\t\t\t\t"+t._s(e)+"\n\t\t\t\t\t\t\t\t\t")])]}},{key:"tag_names",fn:function(e,s,a){return[0==s.tag_names.length?i("div",[i("span",[t._v("--")])]):s.tag_names.length<=5?i("div",t._l(s.tag_names,(function(e){return i("span",[i("a-tag",{staticStyle:{"margin-bottom":"5px"},attrs:{color:"blue"}},[t._v("\n                          "+t._s(e)+"\n                        ")])],1)})),0):s.tag_names.length>5?i("div",[i("a-popover",[i("span",{attrs:{slot:"content"},slot:"content"},[i("div",{staticClass:"w-h-800"},t._l(s.tag_names,(function(e){return i("span",[i("a-tag",{staticStyle:{"margin-bottom":"5px"},attrs:{color:"blue"}},[t._v("\n                                  "+t._s(e)+"\n                                  ")])],1)})),0)]),t._l(s.tag_names,(function(e,s){return i("span",[s<5?i("a-tag",{staticStyle:{"margin-bottom":"5px"},attrs:{color:"blue"}},[t._v("\n                                  "+t._s(e)+"\n                                  ")]):t._e()],1)})),i("div",[t._v("共计"+t._s(s.tag_names.length)+"个标签")])],2)],1):t._e()]}},{key:"is_add",fn:function(e,s,a){return[0==s.is_add?i("span",[t._v("未添加")]):t._e(),1==s.is_add?i("span",[t._v("已添加")]):t._e(),2==s.is_add?i("span",[t._v("待分配")]):t._e()]}},{key:"distribution_records",fn:function(e,s,a){return[e.length<=3?i("div",t._l(e,(function(s,a){return i("div",{staticClass:"mb-5"},[i("span",[t._v("第"+t._s(e.length-a)+"次分配("+t._s(s.add_time.substring(0,16))+"):")]),i("a-tag",{staticClass:"ml-5",attrs:{color:"orange"}},[t._v(t._s(s.user_name))])],1)})),0):i("div",[t._l(e,(function(s,a){return i("div",[a<3?i("div",{staticClass:"mb-5 ml-5"},[i("span",[t._v("第"+t._s(e.length-a)+"次分配("+t._s(s.add_time.substring(0,16))+"):")]),i("a-tag",{staticClass:"ml-5",attrs:{color:"orange"}},[t._v(t._s(s.user_name))])],1):t._e()])})),i("a-popover",[i("div",{attrs:{slot:"content"},slot:"content"},[i("div",{staticClass:"w-h-600"},t._l(e,(function(s,a){return i("div",{staticClass:"mb-5"},[i("span",[t._v("第"+t._s(e.length-a)+"次分配("+t._s(s.add_time.substring(0,16))+"):")]),i("a-tag",{staticClass:"ml-5",attrs:{color:"orange"}},[t._v(t._s(s.user_name))])],1)})),0)]),i("div",{staticStyle:{color:"#1890FF",cursor:"pointer"}},[t._v("\n                        共计分配了"+t._s(e.length)+"次\n                      ")])])],2)]}},{key:"action",fn:function(e,s,a){return[1!=s.is_add?i("a-button",{directives:[{name:"has",rawName:"v-has",value:"customImportList-assign",expression:"'customImportList-assign'"}],on:{click:function(e){return t.showImportDialog(s.detail_id,2)}}},[t._v("再次分配")]):i("span",[t._v("--")])]}}])},[i("div",{attrs:{slot:"is_add_shuoming"},slot:"is_add_shuoming"},[t._v("\n                  添加状态\n                  "),i("a-tooltip",{attrs:{placement:"bottom"}},[i("template",{slot:"title"},[i("div",[t._v("待添加：已分配但是员工未添加的客户，或者发送邀请但客户未通过好友申请。")]),i("div",[t._v("待分配：超过设定时间客户未添加员工，将自动回收客户进入待分配状态。")]),i("div",[t._v("已添加：成功添加为企业客户。")])]),i("a-icon",{staticStyle:{"margin-left":"5px"},attrs:{type:"question-circle"}})],2)],1)]),i("div",{directives:[{name:"show",rawName:"v-show",value:t.total2>0,expression:"total2 > 0"}],staticClass:"pagination",staticStyle:{width:"100%",position:"absolute",margin:"20px 0px"}},[i("div",[i("a-checkbox",{on:{click:t.batchTypeChange},model:{value:t.batchTypeValue,callback:function(e){t.batchTypeValue=e},expression:"batchTypeValue"}}),i("a-select",{staticStyle:{width:"150px",margin:"0 5px"},attrs:{optionFilterProp:"children"},on:{change:t.changeBatchType},model:{value:t.batchType,callback:function(e){t.batchType=e},expression:"batchType"}},[i("a-select-option",{attrs:{value:"0"}},[t._v("选择当前页")]),i("a-select-option",{attrs:{value:"1"}},[t._v("选择所有")])],1),i("a-button",{directives:[{name:"has",rawName:"v-has",value:"customImportList-assign",expression:"'customImportList-assign'"}],attrs:{type:"primary",disabled:0==t.selectedRowKeys.length},on:{click:t.showDistributeCustomDialog}},[t._v("批量分配")]),i("div",{staticClass:"pagination",staticStyle:{height:"32px",float:"right"}},[i("a-pagination",{attrs:{total:t.total2,showSizeChanger:"",showQuickJumper:t.quickJumper2,current:t.page2,pageSize:t.pageSize2,pageSizeOptions:["15","30","50","100"]},on:{change:t.changePage2,showSizeChange:t.showSizeChange2}})],1)],1),i("div",{staticStyle:{height:"32px",float:"left","line-height":"32px"}},[t._v("\n\t\t\t\t\t\t\t\t\t共\n\t\t\t\t\t\t\t\t\t"),i("span",{staticStyle:{color:"blue"}},[t._v(t._s(t.total2))]),t._v("\n\t\t\t\t\t\t\t\t\t条\n\t\t\t\t\t\t\t\t")])])],1)])],1)],1)],1),i("a-modal",{attrs:{title:t.uploadTitle,width:"750px",confirmLoading:t.modalLoading},on:{cancel:t.handleCancel,ok:t.handleOk},model:{value:t.showModal,callback:function(e){t.showModal=e},expression:"showModal"}},[i("div",{staticStyle:{padding:"10px 0px","min-height":"300px",overflow:"auto"}},[t.isAgainDisstribution?t._e():i("div",{staticStyle:{color:"red"}},[t._v("为了避免导入时出现等待时间过长，建议单次上传不超过5000条，最多可支持3万条。")]),t.isAgainDisstribution?t._e():i("a-form-item",{attrs:{"label-col":{span:4},"wrapper-col":{span:20}}},[i("span",{attrs:{slot:"label"},slot:"label"},[i("span",{staticStyle:{color:"red"}},[t._v(" * ")]),t._v("选择表格\n\t                ")]),i("a-upload",{attrs:{name:"avatar",showUploadList:!1,action:"https://www.mocky.io/v2/5cc8019d300000980a055e76",beforeUpload:t.beforeUpload}},[i("a-button",{staticStyle:{height:"28px","font-size":"14px"},attrs:{type:"primary"}},[t._v("上传Excel\n\t\t\t\t\t\t")])],1),""!=t.file_name?[i("span",{staticStyle:{"margin-left":"5px"}},[t._v(t._s(t.file_name))]),i("a-icon",{staticStyle:{"vertical-align":"text-top","margin-left":"3px"},attrs:{type:"close-circle"},on:{click:t.closeExcel}})]:t._e(),i("div",{staticStyle:{"line-height":"normal","margin-bottom":"20px",color:"#999"}},[t._v("下载"),i("a",{attrs:{href:t.$store.state.commonUrl+"/upload/import_customer.xlsx"}},[t._v("Excel模板")]),t._v("。"),i("span",[t._v("请按照模板的要求上传客户资料，若有重复手机号或空行将会自动过滤，以及不符合规范的填写格式，上传后直接显示”--“")])])],2),i("a-form-item",{staticClass:"current0",attrs:{"label-col":{span:4},"wrapper-col":{span:20}}},[i("span",{attrs:{slot:"label"},slot:"label"},[i("span",{staticStyle:{color:"red"}},[t._v(" * ")]),t._v("选择应用\n\t                ")]),[i("a-select",{staticStyle:{width:"200px"},attrs:{showSearch:"",optionFilterProp:"children",placeholder:"请选择应用"},on:{change:t.chooseAgent},model:{value:t.agent_id,callback:function(e){t.agent_id=e},expression:"agent_id"}},[t._l(t.agentList,(function(e){return[i("a-select-option",{attrs:{value:e.id}},[t._v(t._s(e.name)+"\n\t\t\t\t\t\t\t\t")])]}))],2),i("div",{staticStyle:{color:"#999","line-height":"normal","margin-bottom":"5px"}},[t._v("\n\t\t\t\t\t\t\t关联应用后，员工在企业微信会收到添加好友（分配的客户）的任务通知。\n\t\t\t\t\t\t")]),i("div",{staticClass:"content-msg",staticStyle:{"font-size":"13px"}},[i("p",{staticStyle:{height:"20px","line-height":"20px","margin-bottom":"2px"}},[t._v("1、前往"),i("a",{attrs:{target:"_blank",href:"https://work.weixin.qq.com/wework_admin/loginpage_wx?from=myhome_baidu"}},[t._v("\n\t\t\t\t\t\t\t\t企业微信后台")]),t._v("创建自建应用。"),i("a",{attrs:{target:"_blank",href:"https://support.qq.com/products/312071/faqs/90047"}},[t._v("\n\t\t\t\t\t\t\t\t教程")])]),i("p",{staticStyle:{"line-height":"20px",height:"20px","margin-bottom":"0px"}},[t._v("\n\t\t\t\t\t\t\t\t2、选择此应用，请确认已设置过应用的可信域名。\n\t\t\t\t\t\t\t\t"),i("a",{staticClass:"el-link el-link--primary",attrs:{href:t.$store.state.commonUrl+"/upload/slider.png",target:"_blank"}},[i("span",{staticClass:"el-link--inner"},[t._v("查看图示")])])])])]],2),t.isAgainDisstribution?t._e():i("a-form-item",{attrs:{"label-col":{span:4},"wrapper-col":{span:20}}},[i("span",{attrs:{slot:"label"},slot:"label"},[i("span",{staticStyle:{color:"red"}}),t._v("选择标签\n\t                ")]),i("a-button",{on:{click:t.showChooseTag}},[t.ids.length>0?i("span",[t._v("已选择"+t._s(t.ids.length)+"个标签")]):i("span",[t._v("选择标签")])]),t.ids.length>0?i("a-button",{staticStyle:{margin:"0 5px"},attrs:{type:"primary"},on:{click:t.clear3}},[t._v("清空")]):t._e()],1),i("a-form-item",{attrs:{"label-col":{span:4},"wrapper-col":{span:20}}},[i("span",{attrs:{slot:"label"},slot:"label"},[i("span",{staticStyle:{color:"red"}},[t._v(" * ")]),t._v("选择成员\n\t                ")]),i("a-button",{staticStyle:{width:"88px"},on:{click:t.showDepartmentList}},[t._v("\n\t\t\t\t\t\t选择成员\n\t\t\t\t\t")]),i("span",{directives:[{name:"show",rawName:"v-show",value:t.chooseNum>0,expression:"chooseNum > 0"}],staticStyle:{"margin-left":"5px"}},[t._v("已选择"+t._s(t.chooseUserNum)+"名成员，"+t._s(t.chooseDepartmentNum)+"个部门")]),i("a",{directives:[{name:"show",rawName:"v-show",value:t.chooseNum>0,expression:"chooseNum > 0"}],staticStyle:{"margin-left":"10px"},on:{click:t.clearDepartmentList}},[t._v("\n\t\t\t\t\t\t重置\n\t\t\t\t\t")]),i("div",{staticStyle:{"line-height":"normal",color:"#999"}},[t._v("表格内手机号将平均分配给选择的员工。")])],1)],1)]),i("a-drawer",{attrs:{placement:"right",closable:!1,visible:t.detailVisible,width:"1300px!important"},on:{close:t.detailDrawerClose}},[i("template",{slot:"title"},[t._v("\n\t\t\t\t"+t._s(t.detailTitle)+"\n\t\t\t")]),i("div",{staticStyle:{"max-height":"1200px","overflow-y":"auto"}},[i("a-col",{staticStyle:{background:"#FFF",padding:"10px 0",margin:"1px 20px 0"}},[i("a-input",{staticStyle:{width:"170px","margin-right":"10px"},attrs:{value:t.phone,placeholder:"请输入客户电话"},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.find2(e)},change:t.phoneChange}}),i("a-select",{staticStyle:{width:"170px"},attrs:{showSearch:"",optionFilterProp:"children",placeholder:"请选择添加状态"},model:{value:t.addStatus,callback:function(e){t.addStatus=e},expression:"addStatus"}},[i("a-select-option",{attrs:{value:-1}},[t._v("全部状态")]),i("a-select-option",{attrs:{value:1}},[t._v("未添加")]),i("a-select-option",{attrs:{value:2}},[t._v("已添加")]),i("a-select-option",{attrs:{value:3}},[t._v("待分配")])],1),i("a-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"primary"},on:{click:t.find2}},[t._v("查找")]),i("a-button",{staticStyle:{"margin-left":"10px"},on:{click:t.clear2}},[t._v("清空")])],1),i("div",{staticClass:"content-bd over-flow"},[i("a-table",{attrs:{rowKey:"detail_id",columns:t.columns2,dataSource:t.customList,pagination:!1,rowClassName:t.rowClassName},scopedSlots:t._u([{key:"checkedBox",fn:function(e,s,a){return i("span",{},[i("a-checkbox",{staticStyle:{float:"right"},attrs:{disabled:1==s.is_add},on:{click:function(e){return t.changeSelectKey(s.detail_id,s.is_add)}},model:{value:t.checkBoxValue[a],callback:function(e){t.$set(t.checkBoxValue,a,e)},expression:"checkBoxValue[index]"}})],1)}},{key:"name",fn:function(e,s,a){return[""==s.name?i("span",[t._v("--/")]):t._e(),""!=s.name?i("span",[t._v(t._s(s.name)+"/")]):t._e(),""==s.sex?i("span",[t._v("--/")]):t._e(),""!=s.sex?i("span",[t._v(t._s(s.sex)+"/")]):t._e(),""==s.area?i("span",[t._v("--")]):t._e(),""!=s.area?i("span",[t._v(t._s(s.area))]):t._e()]}},{key:"des",fn:function(e,s,a){return[""==s.des?i("span",[t._v("--")]):t._e(),""!=s.des?i("span",[t._v(t._s(s.des))]):t._e()]}},{key:"tag_names",fn:function(e,s,a){return[0==s.tag_names.length?i("div",[i("span",[t._v("--")])]):s.tag_names.length<=5?i("div",t._l(s.tag_names,(function(e){return i("span",[i("a-tag",{attrs:{color:"blue"}},[t._v("\n                          "+t._s(e)+"\n                        ")])],1)})),0):s.tag_names.length>5?i("div",[i("a-popover",[i("span",{attrs:{slot:"content"},slot:"content"},[i("div",{staticClass:"w-h-600"},t._l(s.tag_names,(function(e){return i("span",[i("a-tag",{staticClass:"mb-5",attrs:{color:"blue"}},[t._v("\n                                  "+t._s(e)+"\n                                  ")])],1)})),0)]),t._l(s.tag_names,(function(e,s){return i("span",[s<5?i("a-tag",{staticClass:"mb-5",attrs:{color:"blue"}},[t._v("\n                                  "+t._s(e)+"\n                                  ")]):t._e()],1)})),i("div",[t._v("共计"+t._s(s.tag_names.length)+"个标签")])],2)],1):t._e()]}},{key:"distribution_records",fn:function(e,s,a){return[e.length<=3?i("div",t._l(e,(function(s,a){return i("div",{staticClass:"mb-5"},[i("span",[t._v("第"+t._s(e.length-a)+"次分配("+t._s(s.add_time.substring(0,16))+"):")]),i("a-tag",{staticClass:"ml-5",attrs:{color:"orange"}},[t._v(t._s(s.user_name))])],1)})),0):i("div",[t._l(e,(function(s,a){return i("div",[a<3?i("div",{staticClass:"mb-5 ml-5"},[i("span",[t._v("第"+t._s(e.length-a)+"次分配("+t._s(s.add_time.substring(0,16))+"):")]),i("a-tag",{staticClass:"ml-5",attrs:{color:"orange"}},[t._v(t._s(s.user_name))])],1):t._e()])})),i("a-popover",[i("div",{attrs:{slot:"content"},slot:"content"},[i("div",{staticClass:"w-h-600"},t._l(e,(function(s,a){return i("div",{staticClass:"mb-5"},[i("span",[t._v("第"+t._s(e.length-a)+"次分配("+t._s(s.add_time.substring(0,16))+"):")]),i("a-tag",{staticClass:"ml-5",attrs:{color:"orange"}},[t._v(t._s(s.user_name))])],1)})),0)]),i("div",{staticStyle:{color:"#1890FF",cursor:"pointer"}},[t._v("\n                      共计分配了"+t._s(e.length)+"次\n                    ")])])],2)]}},{key:"is_add",fn:function(e,s,a){return[0==s.is_add?i("span",[t._v("未添加")]):t._e(),1==s.is_add?i("span",[t._v("已添加")]):t._e(),2==s.is_add?i("span",[t._v("待分配")]):t._e()]}},{key:"action",fn:function(e,s){return[1!=s.is_add?i("a-button",{directives:[{name:"has",rawName:"v-has",value:"customImportList-assign",expression:"'customImportList-assign'"}],on:{click:function(e){return t.detailAgainDistribute(s)}}},[t._v("再次分配")]):i("span",[t._v("--")])]}}])},[i("div",{attrs:{slot:"is_add_shuoming"},slot:"is_add_shuoming"},[t._v("\n              添加状态\n              "),i("a-tooltip",{attrs:{placement:"bottom"}},[i("template",{slot:"title"},[i("div",[t._v("待添加：已分配但是员工未添加的客户，或者发送邀请但客户未通过好友申请。")]),i("div",[t._v("待分配：超过设定时间客户未添加员工，将自动回收客户进入待分配状态。")]),i("div",[t._v("已添加：成功添加为企业客户。")])]),i("a-icon",{staticStyle:{"margin-left":"5px"},attrs:{type:"question-circle"}})],2)],1)]),i("div",{directives:[{name:"show",rawName:"v-show",value:t.total2>0,expression:"total2 > 0"}],staticClass:"pagination",staticStyle:{overflow:"hidden",margin:"20px"}},[i("div",{staticStyle:{height:"32px",float:"left","line-height":"32px"}},[i("div",[i("a-checkbox",{on:{click:t.batchTypeChange},model:{value:t.batchTypeValue,callback:function(e){t.batchTypeValue=e},expression:"batchTypeValue"}}),i("a-select",{staticStyle:{width:"150px",margin:"0 5px"},attrs:{optionFilterProp:"children"},on:{change:t.changeBatchType},model:{value:t.batchType,callback:function(e){t.batchType=e},expression:"batchType"}},[i("a-select-option",{attrs:{value:"0"}},[t._v("选择当前页")]),i("a-select-option",{attrs:{value:"1"}},[t._v("选择所有")])],1),i("a-button",{directives:[{name:"has",rawName:"v-has",value:"customImportList-assign",expression:"'customImportList-assign'"}],attrs:{type:"primary",disabled:0==t.selectedRowKeys.length},on:{click:t.showImportDialog2}},[t._v("批量分配")])],1),t._v("\n\t\t\t\t\t\t\t共\n\t\t\t\t\t\t\t"),i("span",{staticStyle:{color:"blue"}},[t._v(t._s(t.total2))]),t._v("\n\t\t\t\t\t\t\t条\n\t\t\t\t\t\t")]),i("div",{staticClass:"pagination",staticStyle:{height:"32px",float:"right"}},[i("a-pagination",{attrs:{total:t.total2,showSizeChanger:"",showQuickJumper:t.quickJumper2,current:t.page2,pageSize:t.pageSize2,pageSizeOptions:["15","30","50","100"]},on:{change:t.changePage2,showSizeChange:t.showSizeChange2}})],1)])],1)],1)],2),i("chooseDepartment",{ref:"user",attrs:{id:t.corpId,agentid:t.agent_id,show:t.showModalDepartment,is_special:1,chooseNum:t.chooseNum,noticeTitle:"当前只显示自建应用下可见范围内的成员，即可在企业微信收到添加好友的任务。",callback:t.modalVisibleChange3}}),i("a-modal",{attrs:{title:"上传进度",footer:!1,closable:!1,maskClosable:!1,maskStyle:{left:t.leftSiderWidth},wrapClassName:"mask-dialog"},model:{value:t.progressVisible,callback:function(e){t.progressVisible=e},expression:"progressVisible"}},[i("div",{staticStyle:{"text-align":"center"}},[i("a-progress",{attrs:{"stroke-linecap":"square",percent:t.progressNum,type:"circle"}}),i("div",[i("img",{attrs:{src:s("19be"),alt:""}})]),i("p",{staticStyle:{margin:"0 auto 20px"}},[t._v("已成功上传"+t._s(t.successNum)+"个客户，失败"+t._s(t.failNum)+"个客户，还有"+t._s(t.notImportNum)+"个客户待上传")])],1)]),t.visible?i("div",[i("labels1",{attrs:{flag:!0,title:"标签列表",visible:t.visible,currentTab:t.currentTab,selectedIds:t.selectedIds,isTabs:!1,isExcel:!0},on:{getTagTotalNum:t.getTagTotalNum,getIds:t.getIds,closePlayTags:t.closePlayTags,playTags:function(e){return t.playTags(e)},inverseSelectedIds:t.inverseSelectedIds}})],1):t._e(),t.visible1?i("div",[i("labels1",{attrs:{title:"标签列表",visible:t.visible1,currentTab:t.currentTab1,selectedIds:t.selectedIds1,isTabs:!0},on:{getTagTotalNum:t.getTagTotalNum,getIds:t.getIds1,closePlayTags:t.closePlayTags1,playTags:function(e){return t.playTags1(e)},inverseSelectedIds:t.inverseSelectedIds1}})],1):t._e(),i("a-modal",{attrs:{title:"回收设置"},on:{ok:t.recoveryHandleOk,cancel:t.recoveryHandleCancel},model:{value:t.isViewRecovery,callback:function(e){t.isViewRecovery=e},expression:"isViewRecovery"}},[i("div",{staticClass:"text-12"},[t._v("\n        回收开启："),i("a-switch",{model:{value:t.isOpen,callback:function(e){t.isOpen=e},expression:"isOpen"}}),i("span",{staticClass:"ml-20 text-gray-501"},[t._v("开启后，将立即把超过设置天数未添加的客户回收为待分配状态")])],1),i("div",{staticClass:"mt-20"},[i("span",[t._v("超过")]),i("a-input-number",{staticClass:"w-100 ml-10 mr-10",attrs:{min:1,max:1e3},model:{value:t.openDay,callback:function(e){t.openDay=e},expression:"openDay"}}),i("span",[t._v("天，客户未添加分配的员工，自动转移到待分配状态")])],1)])],1)},a=[],n=(s("28a5"),s("ac4d"),s("8a81"),s("7618")),o=(s("7f7f"),s("96cf"),s("3b8d")),r=(s("20d6"),s("75fc")),c=(s("6c7b"),s("ac6a"),s("c75b")),l=s("2ff3"),d=[{title:"Excel名称",dataIndex:"title",key:"title"},{title:"上传时间",dataIndex:"add_time",key:"add_time",width:"120px"},{title:"分配员工",dataIndex:"distribution_records",key:"distribution_records",scopedSlots:{customRender:"distribution_records"}},{title:"客户标签",dataIndex:"tag_names",key:"tag_names",width:"200px",scopedSlots:{customRender:"tag_names"}},{title:"总人数/已添加/未添加",dataIndex:"all_num",key:"all_num",scopedSlots:{customRender:"all_num"}},{title:"添加完成率",dataIndex:"addNum",key:"addNum",scopedSlots:{customRender:"addNum"}},{title:"导入成功/失败的人数",dataIndex:"snum",key:"snum",scopedSlots:{customRender:"snum"}},{title:"操作",dataIndex:"action",key:"action",width:"240px",scopedSlots:{customRender:"action"}}],h=[{title:"",dataIndex:"checkedBox",key:"checkedBox",width:"50px",scopedSlots:{customRender:"checkedBox"}},{title:"客户电话",dataIndex:"phone",key:"phone"},{title:"姓名/性别/地区",dataIndex:"name",key:"name",scopedSlots:{customRender:"name"}},{title:"客户标签",dataIndex:"tag_names",key:"tag_names",width:"210px",scopedSlots:{customRender:"tag_names"},ellipsis:!0},{title:"备注",dataIndex:"des",key:"des",scopedSlots:{customRender:"des"}},{title:"分配员工",dataIndex:"distribution_records",key:"distribution_records",width:"350px",scopedSlots:{customRender:"distribution_records"}},{dataIndex:"is_add",key:"is_add",slots:{title:"is_add_shuoming"},scopedSlots:{customRender:"is_add"}},{title:"操作",dataIndex:"action",key:"action",width:"120px",scopedSlots:{customRender:"action"}}],u={components:{chooseDepartment:c["a"],labels1:l["a"]},computed:{rowSelection4:function(){var t=this;return{selectedRowKeys:this.selectedRowKeys4,onChange:function(e){t.selectedRowKeys4=e},getCheckboxProps:function(t){return{props:{disabled:1==t.is_add,is_add:t.is_add}}}}},rowSelection3:function(){var t=this;return{selectedRowKeys:this.selectedRowKeys3,onChange:function(e){t.selectedRowKeys3=e},getCheckboxProps:function(t){return{props:{disabled:1==t.is_add,is_add:t.is_add}}}}}},data:function(){var t=localStorage.getItem("corpId")?localStorage.getItem("corpId"):"";return{totalTagNum:0,distibitionFlag:"",openDay:7,isOpen:!1,isViewRecovery:!1,selectedCustomerId1:"",selectedRowKeys4:[],selectedCustomerId:"",isCustomerDetailBatchGive:!1,confirmId:[],confirmCurrentTab:1,confirmId1:[],confirmCurrentTab1:1,isLocking:!1,visible1:!1,ids1:[],isTabs1:!0,selectedIds1:[],currentTab1:1,inverseIds1:[],selectedImportId:"",isAgainDisstribution:!1,selectedUseId:"",groupKeys:[],selectedRowKeys:[],selectedRowKeys3:[],batchType:"0",batchTypeValue:!1,checkBoxValue:[],uploadTitle:"上传表格",ids:[],inverseIds:[],visible:!1,isTabs:!1,selectedIds:[],currentTab:1,corpId:t,tabKey:1,isLoading:!1,ExcelName:"",batchList:[],id:"",total:0,quickJumper:!1,page:1,pageSize:15,showModal:!1,modalLoading:!1,fileInfo:{},file_name:"",agentList:[],agent_id:"",chooseNum:0,chooseUserNum:0,chooseDepartmentNum:0,staffList:[],showModalDepartment:!1,columns:d,isLoading2:!1,customList:[],phone:"",addStatus:-1,columns2:h,total2:0,quickJumper2:!1,page2:1,pageSize2:15,detailVisible:!1,detailTitle:"",progressVisible:!1,progressNum:0,leftSiderWidth:document.getElementsByClassName("menu-sider")[0].style.width,successNum:0,failNum:0,notImportNum:0}},methods:{getTagTotalNum:function(t){this.totalTagNum=t},recoveryHandleCancel:function(){this.isViewRecovery=!1},recoveryHandleOk:function(){var t=this,e=/^[0-9]*$/;if(!e.test(this.openDay))return this.$message.error("请输入数字！");this.axios.post("work-import-customer/important-customer-recycle-setting",{corp_id:this.corpId,switch:this.isOpen?1:0,time:this.openDay}).then((function(e){var s=e.data;0!=s.error?(t.isViewRecovery=!1,t.$message.error(s.error_msg)):(t.isViewRecovery=!1,t.$message.success("设置成功！"),t.getCustomList())}))},showRecoveryDialog:function(){var t=this;this.axios.post("work-import-customer/important-customer-recycle-info",{corp_id:this.corpId}).then((function(e){var s=e.data;0!=s.error?t.$message.error(s.error_msg):(t.isViewRecovery=!0,t.openDay=s.data.time,t.isOpen=!!s.data.switch)}))},onChangeIsOpen:function(){},CheckUserIsSelected4:function(t){},onSelectChange:function(t){this.selectedRowKeys3=t},showDistributeCustomDialog:function(){this.distibitionFlag=5,this.uploadTitle="分配客户(已选".concat(this.chooseUserNum,")"),this.isAgainDisstribution=!0,this.showDepartmentList()},showChooseTag1:function(){this.visible1=!0},inverseSelectedIds1:function(t){this.selectedIds1=t.ids,this.inverseIds1=t.inverseIds,this.currentTab1=t.currentTab},playTags1:function(t){t&&(this.selectedIds1=t.ids,this.currentTab1=t.currentTab,this.confirmId1=JSON.parse(JSON.stringify(t.ids)),this.confirmCurrentTab1=t.currentTab,this.visible1=!1)},closePlayTags1:function(){this.selectedIds1=this.confirmId1,this.currentTab1=this.confirmCurrentTab1,this.visible1=!1},getIds1:function(t){this.isTabs1?this.selectedIds1=t:this.ids1=t},batchShowDialog:function(){var t=!0;if(this.customList.forEach((function(e){1==e.is_add&&(t=!1)})),!t)return this.$message.error("用户已经被添加，不能二次分配！");this.getAgentList(),this.showModal=!0},changeSelectKey:function(t){for(var e=0;e<this.selectedRowKeys.length;e++)if(t==this.selectedRowKeys[e])return this.selectedRowKeys.splice(e,1),this.setCheckedBox(this.customList),!1;this.selectedRowKeys.push(t),this.setCheckedBox(this.customList)},setCheckedBox:function(t){var e=this;this.checkBoxValue=new Array(t.length),this.checkBoxValue.fill(!1);for(var s=0;s<t.length;s++)for(var i=0;i<this.selectedRowKeys.length;i++)t[s].detail_id==this.selectedRowKeys[i]&&1!=t[s].is_add&&(this.checkBoxValue[s]=!0);0==this.batchType?(this.batchTypeValue=!0,this.checkBoxValue.map((function(t){t||(e.batchTypeValue=!1)}))):this.selectedRowKeys.length==this.groupKeys.length?this.batchTypeValue=!0:this.batchTypeValue=!1},batchTypeChange:function(){this.batchTypeValue?(0==this.batchType?(this.removeKey(this.customList),this.setCheckedBox(this.customList)):1==this.batchType&&(this.selectedRowKeys=[],this.setCheckedBox(this.customList)),this.batchTypeValue=!1):(0==this.batchType?(this.addKey(this.customList),this.setCheckedBox(this.customList)):1==this.batchType&&(this.selectedRowKeys=Object(r["a"])(this.groupKeys.valueOf()),this.setCheckedBox(this.customList)),this.batchTypeValue=!0)},addKey:function(t){for(var e=this,s=function(s){var i=e.selectedRowKeys.findIndex((function(e){return e===t[s].detail_id}));-1==i&&1!=t[s].is_add&&e.selectedRowKeys.push(t[s].detail_id)},i=0;i<t.length;i++)s(i)},removeKey:function(t){for(var e=this,s=function(s){var i=e.selectedRowKeys.findIndex((function(e){return e===t[s].detail_id}));-1!=i&&e.selectedRowKeys.splice(i,1)},i=0;i<t.length;i++)s(i)},changeBatchType:function(){this.batchTypeValue?(0==this.batchType&&(this.selectedRowKeys=[]),this.batchTypeValue=!1,this.batchTypeChange()):this.setCheckedBox(this.customList)},showImportDialog:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";this.distibitionFlag=e,2==this.tabKey?this.selectedCustomerId1=t:1==this.tabKey&&(this.selectedImportId=t),this.uploadTitle="分配客户(已选".concat(this.chooseUserNum,")"),this.isAgainDisstribution=!0,this.showDepartmentList(e)},detailAgainDistribute:function(t){this.distibitionFlag=3,this.isCustomerDetailBatchGive=!0,this.uploadTitle="分配客户(已选".concat(this.chooseUserNum,")"),this.isAgainDisstribution=!0,this.selectedCustomerId=t.detail_id,this.showDepartmentList()},showImportDialog2:function(){this.distibitionFlag=4,this.isCustomerDetailBatchGive=!0,this.uploadTitle="分配客户(已选".concat(this.chooseUserNum,")"),this.isAgainDisstribution=!0,this.showDepartmentList()},clear3:function(){this.confirmCurrentTab=1,this.confirmId=[],this.confirmCurrentTab1=1,this.confirmId1=[],this.ids=[],this.selectedIds=[]},inverseSelectedIds:function(t){},playTags:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e&&(this.ids=e.ids,this.confirmId=JSON.parse(JSON.stringify(e.ids)),this.confirmCurrentTab=e.currentTab,this.currentTab=e.currentTab),this.visible=!1;case 2:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),closePlayTags:function(){this.ids=this.confirmId,this.currentTab=this.confirmCurrentTab,this.visible=!1},getIds:function(t){this.isTabs?this.selectedIds=t:this.ids=t},showChooseTag:function(){this.ids.length>0&&(this.selectedIds=this.ids),this.visible=!0},getUserNum:function(t){for(var e=0,s=0;s<t.length;s++)"name"==t[s].title&&e++;return e},rowClassName:function(t,e){var s="dark-row";return e%2===0&&(s="light-row"),s},changeTab:function(t){this.tabKey=t,this.confirmId1=[],this.confirmId=[],this.currentTab1=1,this.confirmCurrentTab1=1,this.selectedIds1=[],this.selectedRowKeys=[],1==this.tabKey?(this.ExcelName="",this.selectedRowKeys4=[],this.pageSize=15,this.selectedCustomerId1="",this.getList()):2==this.tabKey&&(this.uploadTitle="分配客户(已选".concat(this.chooseUserNum,")"),this.phone="",this.addStatus=-1,this.pageSize2=15,this.id="",this.selectedCustomerId="",this.isCustomerDetailBatchGive=!1,this.selectedRowKeys3=[],this.getCustomList())},importExcel:function(){this.ids=[],this.distibitionFlag="",this.uploadTitle="上传表格",this.isAgainDisstribution=!1,this.getAgentList(),this.file_name="",this.fileInfo={},this.staffList=[],this.chooseNum=0,this.chooseUserNum=0,this.chooseDepartmentNum=0,this.showModal=!0},beforeUpload:function(t){var e=".xls"===t.name.substr(t.name.lastIndexOf(".")).toLowerCase(),s=".xlsx"===t.name.substr(t.name.lastIndexOf(".")).toLowerCase(),i=t.size/1024/1024<5;if(e||s){if(i)return this.fileInfo=t,this.file_name=t.name,!1;this.$message.warning("上传模板大小不能超过 5MB!")}else this.$message.warning("上传模板只能是 xls、xlsx格式!")},closeExcel:function(){this.fileInfo={},this.file_name=""},chooseAgent:function(t){this.staffList=[],this.chooseNum=0,this.chooseUserNum=0,this.chooseDepartmentNum=0},showDepartmentList:function(){var t=[];this.staffList.map((function(e){t.push(e.id)})),this.$refs.user.rightIdList=JSON.parse(JSON.stringify(t)),this.$refs.user.rightList=JSON.parse(JSON.stringify(this.staffList)),this.showModalDepartment=!0},modalVisibleChange3:function(t,e,s,i,a){"ok"==t?(this.chooseNum=parseInt(s)+parseInt(i),this.chooseUserNum=s,this.uploadTitle="分配客户(已选".concat(this.chooseUserNum,")"),this.chooseDepartmentNum=i,this.chooseNum>0?this.staffList=JSON.parse(JSON.stringify(a)):this.staffList=[],0==this.chooseNum?(this.$message.warning("请选择员工"),this.$nextTick((function(){document.getElementsByClassName("ant-message")[0].style.zIndex=9999}))):(""!=this.distibitionFlag&&this.againDistribution(),this.showModalDepartment=!1)):this.showModalDepartment=!1},clearDepartmentList:function(){this.staffList=[],this.chooseNum=0,this.chooseUserNum=0,this.uploadTitle="分配客户(已选".concat(this.chooseUserNum,")"),this.chooseDepartmentNum=0},againDistribution:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(){var e,s,i,a,n,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=[],s={},this.staffList.map((function(t){e.push(t.id)})),1==this.tabKey?(this.isCustomerDetailBatchGive?1:0,1==this.distibitionFlag?(this.id="",s={corp_id:this.corpId,user_ids:e,import_id:this.selectedImportId}):3==this.distibitionFlag?s={corp_id:this.corpId,user_ids:e,customer_ids:[this.selectedCustomerId]}:4==this.distibitionFlag&&(s=this.batchTypeValue&&1==this.batchType?{corp_id:this.corpId,user_ids:e,import_id:this.id,phone:this.phone,status:this.addStatus,is_batch:1}:{corp_id:this.corpId,user_ids:e,customer_ids:this.selectedRowKeys})):2==this.tabKey&&(2==this.distibitionFlag?s={corp_id:this.corpId,user_ids:e,customer_ids:[this.selectedCustomerId1]}:5==this.distibitionFlag&&(this.batchTypeValue&&1==this.batchType?(i=this.selectedIds1.join(),a=this.currentTab1,s={corp_id:this.corpId,user_ids:e,phone:this.phone,status:this.addStatus,tag_ids:i,tag_type:a,is_batch:1}):s={corp_id:this.corpId,user_ids:e,customer_ids:this.selectedRowKeys})),t.next=6,this.axios.post("work-import-customer/secondary-distribution-customers",s);case 6:n=t.sent,o=n.data,0!=o.error?(this.isLocking=!1,this.isCustomerDetailBatchGive=!1,this.$message.error(o.error_msg),this.showModal=!1,this.selectedRowKeys=[],this.selectedRowKeys3=[],this.selectedRowKeys4=[],this.selectedCustomerId1="",this.batchType="0",this.chooseUserNum=0,this.staffList=[],this.chooseNum=0,this.selectedCustomerId=""):(o.data.exist_num,this.$message.success("分配成功！"),this.isCustomerDetailBatchGive=!1,this.isLocking=!1,this.showModal=!1,this.selectedRowKeys=[],this.selectedRowKeys3=[],this.selectedRowKeys4=[],this.selectedCustomerId1="",this.chooseUserNum=0,this.staffList=[],this.batchType="0",this.chooseNum=0,this.selectedCustomerId="",this.getList(),this.getCustomList());case 9:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),batchAgainDistribution:function(){},handleOk:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(){var e,s,i,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if("object"!=Object(n["a"])(this.agent_id)||0!=this.agent_id.length){t.next=4;break}return this.$message.error("请选择应用！"),this.modalLoading=!1,t.abrupt("return",!1);case 4:if("object"!=Object(n["a"])(this.staffList)||0!=this.staffList.length){t.next=9;break}return this.$message.error("请选择成员！"),this.$nextTick((function(){document.getElementsByClassName("ant-message")[0].style.zIndex=1e5})),this.modalLoading=!1,t.abrupt("return",!1);case 9:if(0!=this.isAgainDisstribution){t.next=40;break}if("{}"!=JSON.stringify(this.fileInfo)){t.next=14;break}return this.$message.error("请选择上传Excel"),this.modalLoading=!1,t.abrupt("return",!1);case 14:return this.modalLoading=!0,this.showModal=!1,this.$message.info("已进入后台导入中，请耐心等待..."),e=[],this.staffList.map((function(t){e.push(t.id)})),this.progressNum=0,this.successNum=0,this.failNum=0,this.notImportNum=0,this.progressVisible=!0,this.leftSiderWidth=document.getElementsByClassName("menu-sider")[0].style.width,this.$nextTick((function(){document.getElementsByClassName("mask-dialog")[0].style.left=document.getElementsByClassName("menu-sider")[0].style.width})),s=new FormData,s.append("corp_id",this.corpId),s.append("agentid",this.agent_id),s.append("user_ids",e),s.append("importFile",this.fileInfo),s.append("tag_ids",this.ids),2==localStorage.getItem("isMasterAccount")&&s.append("sub_id",localStorage.getItem("sub_id")),t.next=35,this.axios.post("work-import-customer/import-customer",s);case 35:i=t.sent,a=i.data,0!=a.error?(this.ids=[],this.chooseNum=0,this.chooseUserNum=0,this.confirmId1=[],this.confirmId=[],this.staffList=[],this.modalLoading=!1,this.progressVisible=!1,this.$message.error(a.error_msg)):(this.confirmId1=[],this.confirmId=[],this.chooseNum=0,this.chooseUserNum=0,this.staffList=[],this.modalLoading=!1),t.next=42;break;case 40:this.ids=[],this.againDistribution();case 42:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),handleCancel:function(){this.selectedUseId="",this.selectedCustomerId="",this.agent_id="",this.fileInfo={},this.file_name="",this.staffList=[],this.ids=[],this.confirmId=[],this.selectedIds=[],this.chooseNum=0,this.chooseUserNum=0,this.chooseDepartmentNum=0,this.modalLoading=!1,this.showModal=!1,this.showModalDepartment=!1},getList:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(){var e,s,i,a,n,o,r=arguments;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=r.length>0&&void 0!==r[0]?r[0]:1,s=r.length>1&&void 0!==r[1]?r[1]:this.pageSize,this.isLoading=!0,i=this.selectedIds1.join(),a=this.currentTab1,t.next=7,this.axios.post("work-import-customer/import-customer-list",{corp_id:this.corpId,title:this.ExcelName,page:e,page_size:s,tag_type:a,tag_ids:i});case 7:n=t.sent,o=n.data,0!=o.error?(this.isLoading=!1,this.$message.error(o.error_msg),this.ids=[],this.inverseIds=[]):(this.batchList=o.data.list,this.isLoading=!1,this.total=parseInt(o.data.count),this.page=e,this.pageSize=s,this.quickJumper=this.total>this.pageSize,this.ids=[],this.inverseIds=[]);case 10:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),changePage:function(t,e){this.getList(t,e),this.$nextTick((function(){document.getElementsByClassName("scroll")[0].scrollTo(0,90)}))},showSizeChange:function(t,e){this.getList(1,e)},find:function(){this.getList()},clear:function(){this.ExcelName="",this.confirmCurrentTab=1,this.confirmId=[],this.confirmCurrentTab1=1,this.confirmId1=[],this.selectedIds1=[],this.currentTab=1,this.currentTab1=1,this.inverseIds1=[],this.confirmId=[],this.confirmCurrentTab=1,this.getList()},deleteList:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(e){var s,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.axios.post("work-import-customer/import-customer-delete",{import_id:e});case 2:s=t.sent,i=s.data,0!=i.error?this.$message.error(i.error_msg):this.getList(this.page,this.pageSize);case 5:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),getAgentList:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(e){var s,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.axios.post("work-group-sending/agent-list",{corp_id:this.corpId,suite_id:1,agent_type:2});case 2:s=t.sent,i=s.data,0!=i.error?(this.isLoading=!1,this.$message.error(i.error_msg)):(this.agentList=i.data,e?this.agent_id=e:0==this.agentList.length||e||(this.agent_id=this.agentList[0].id));case 5:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),judgeCurrentPageIsAdd:function(t){var e=!0;if(1==this.batchType)e=!1;else{var s=!0,i=!1,a=void 0;try{for(var n,o=t[Symbol.iterator]();!(s=(n=o.next()).done);s=!0){var r=n.value;if(2==r.is_add)return e=!1}}catch(c){i=!0,a=c}finally{try{s||null==o.return||o.return()}finally{if(i)throw a}}}return e},getCustomList:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(){var e,s,i,a,n,o,r=arguments;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=r.length>0&&void 0!==r[0]?r[0]:1,s=r.length>1&&void 0!==r[1]?r[1]:this.pageSize2,this.isLoading2=!0,i=this.selectedIds1.join(),a=this.currentTab1,t.next=7,this.axios.post("work-import-customer/import-customer-detail-list",{corp_id:this.corpId,import_id:this.id,status:this.addStatus,phone:this.phone,page:e,page_size:s,tag_ids:i,tag_type:a});case 7:n=t.sent,o=n.data,0!=o.error?(this.isLoading2=!1,this.$message.error(o.error_msg)):(this.customList=o.data.list,this.setCheckedBox(this.customList),this.isLoading2=!1,this.groupKeys=o.data.all_customer_ids,this.total2=parseInt(o.data.count),this.page2=e,this.pageSize2=s,this.quickJumper2=this.total2>this.pageSize2,""!=this.id&&(this.detailVisible=!0,this.detailTitle=o.data.importTitle));case 10:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),phoneChange:function(t){var e=t.target.value,s=/^-?(0|[0-9][0-9]*)(\.[0-9]*)?$/;(!isNaN(e)&&s.test(e)||""===e||"-"===e)&&(this.phone=e)},find2:function(){this.selectedRowKeys3=[],this.selectedRowKeys=[],this.getCustomList()},clear2:function(){this.selectedRowKeys=[],this.batchType="0",this.selectedRowKeys3=[],this.confirmCurrentTab=1,this.confirmId=[],this.confirmCurrentTab1=1,this.confirmId1=[],this.currentTab1=1,this.inverseIds1=[],this.selectedIds1=[],this.phone="",this.addStatus=-1,this.getCustomList()},changePage2:function(t,e){this.getCustomList(t,e),1==this.tabKey?document.getElementsByClassName("ant-drawer-wrapper-body")[0].scrollTo(0,0):this.$nextTick((function(){document.getElementsByClassName("scroll")[0].scrollTo(0,90)}))},showSizeChange2:function(t,e){this.getCustomList(1,e)},detailList:function(t){this.selectedRowKeys3=[],this.id=t,this.phone="",this.addStatus=-1,this.pageSize2=15,this.getCustomList()},detailDrawerClose:function(){this.detailVisible=!1,this.selectedRowKeys=[],this.batchType="0",this.isCustomerDetailBatchGive=!1},websocketOnMessage:function(t){"undefined"!=typeof t.type&&"import_customer"==t.type&&(1==localStorage.getItem("isMasterAccount")&&""==t.sub_id||2==localStorage.getItem("isMasterAccount")&&t.sub_id==localStorage.getItem("sub_id"))&&(this.progressVisible=!0,this.leftSiderWidth=document.getElementsByClassName("menu-sider")[0].style.width,this.$nextTick((function(){document.getElementsByClassName("mask-dialog")[0].style.left=document.getElementsByClassName("menu-sider")[0].style.width})),this.showModal=!1,this.progressNum=parseInt(t.import_num/t.snum*100),this.successNum=t.successNum,this.failNum=t.failNum,this.notImportNum=t.notImportNum,""!=t.textHtml&&(0==t.error?(this.modalLoading=!1,this.showModal=!1,this.$message.success(t.textHtml),this.getList()):this.$message.error(t.textHtml)),100==this.progressNum&&(this.progressVisible=!1))}},created:function(){if(2==localStorage.getItem("isMasterAccount")){var t=localStorage.getItem("permissionButton").split(","),e=this;-1!=t.indexOf("customImportList-all-list")?(e.tabKey=1,e.ws.setCallback(this.websocketOnMessage),e.getList()):(e.tabKey=2,e.getCustomList()),e.$forceUpdate()}else this.tabKey=1,this.ws.setCallback(this.websocketOnMessage),this.getList()}},p=u,m=(s("9e2f"),s("2877")),g=Object(m["a"])(p,i,a,!1,null,"0e7ab2c8",null);e["default"]=g.exports},"49c6":function(t,e,s){e=t.exports=s("2350")(!1),e.push([t.i,"[data-v-0e7ab2c8] .ant-card-bordered{border:0}.tpl-title[data-v-0e7ab2c8]{float:left;font-size:16px;vertical-align:top}.content-bd[data-v-0e7ab2c8]{background:#fff;min-height:120px;border:1px solid #e2e2e2;min-width:885px;margin:0 20px 60px}[data-v-0e7ab2c8] .dark-row{background:#fafafa}[data-v-0e7ab2c8] .light-row{background:#fff}[data-v-0e7ab2c8] .ant-tabs-bar{padding:0 20px!important;background:none!important;margin:0!important}.content-msg[data-v-0e7ab2c8]{border:1px solid #ffdda6;background:#fff2db;padding:10px;text-align:left;margin:0 0 20px}[data-v-0e7ab2c8] .ant-table-placeholder{border-bottom:0}[data-v-0e7ab2c8] .ant-tabs-top-content{padding-bottom:0}.tabBtn[data-v-0e7ab2c8]{margin:0;margin-right:2px;padding:10px 16px;line-height:38px;background:#fafafa;border:1px solid #e8e8e8;border-bottom:0;border-radius:4px 4px 0 0;cursor:pointer}.activeBtn[data-v-0e7ab2c8]{color:#1890ff;background:#fff}[data-v-0e7ab2c8] .over-flow .ant-table-wrapper{height:700px;overflow-y:auto}[data-v-0e7ab2c8] .wrap-td .ant-table-row-cell-ellipsis{white-space:unset!important}.ellipsis-one[data-v-0e7ab2c8]{overflow:hidden;text-overflow:ellipsis;white-space:nowrap;max-width:200px}.content-bz[data-v-0e7ab2c8]{max-height:500px;max-width:600px;overflow-y:auto}body[data-v-0e7ab2c8] .ant-message{z-index:100000!important}.w-h-600[data-v-0e7ab2c8]{max-width:600px;max-height:400px;overflow-y:auto}.w-h-800[data-v-0e7ab2c8]{max-width:800px;max-height:600px;overflow-y:auto}.content-bd[data-v-0e7ab2c8] .ant-table-row-cell-ellipsis{white-space:unset!important}[data-v-0e7ab2c8] .ant-message{z-index:99999!important}",""])},"6c7b":function(t,e,s){var i=s("5ca1");i(i.P,"Array",{fill:s("36bd")}),s("9c6c")("fill")},"9e2f":function(t,e,s){"use strict";var i=s("de4f"),a=s.n(i);a.a},de4f:function(t,e,s){var i=s("49c6");"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var a=s("499e").default;a("4973a98e",i,!0,{sourceMap:!1,shadowMode:!1})}}]);