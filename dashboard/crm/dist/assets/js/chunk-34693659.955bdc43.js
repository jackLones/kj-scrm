(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-34693659"],{"23c9":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"fans-detail"},[i("div",{staticStyle:{height:"60px","line-height":"60px","background-color":"#FFFFFF","border-bottom":"1px solid #E2E2E2","font-size":"16px",padding:"0px 20px"}},[t._v("\n\t\t粉丝详情\n\t\t"),i("router-link",{staticStyle:{"font-size":"16px",float:"right"},attrs:{to:"/fans/list"}},[i("a-button",{attrs:{type:"primary",icon:"rollback"}},[t._v("返回列表")])],1)],1),i("div",{staticClass:"layout-left"},[i("div",{staticClass:"user-info"},[t._m(0),i("div",{staticClass:"center-align"},[""==t.userInfo.headerimg||null==t.userInfo.headerimg?i("img",{staticStyle:{width:"132px",height:"132px"},attrs:{src:a("af86")}}):i("img",{attrs:{src:t.userInfo.headerimg}})]),i("div",{staticClass:"center-align"},[i("label",[t._v(t._s(t.userInfo.nickname))])]),t.userInfo.follow_title?i("div",{staticClass:"center-align"},[i("a-tag",{staticStyle:{"margin-right":"0",height:"25px","line-height":"25px"},attrs:{color:"#67c23a"}},[t._v("\n\t\t\t\t       "+t._s(t.userInfo.follow_title)+"\n\t\t\t\t")])],1):t._e(),i("div",{staticClass:"center-align"},[i("label",[t._v(t._s(t.userInfo.interact_time))])]),i("div",[i("span",{staticStyle:{"vertical-align":"middle"}},[t._v("openId：")]),i("span",{staticClass:"userinfo-openid"},[t._v("\n\t\t\t\t\t"+t._s(t.userInfo.openid)+"\n\t\t\t\t")]),t.userInfo.openid?i("a",{staticStyle:{"margin-left":"10px","vertical-align":"middle"},on:{click:function(e){return t.copyText(t.userInfo.openid)}}},[t._v("复制")]):t._e()]),i("div",[i("span",{staticStyle:{"vertical-align":"middle"}},[t._v("unionid：")]),i("span",{staticClass:"userinfo-openid"},[t._v("\n\t\t\t\t\t"+t._s(t.userInfo.unionid)+"\n\t\t\t\t")]),t.userInfo.unionid?i("a",{staticStyle:{"margin-left":"10px","vertical-align":"middle"},on:{click:function(e){return t.copyText(t.userInfo.unionid)}}},[t._v("复制")]):t._e()]),i("div",[i("label",[t._v("备注：")]),i("label",{directives:[{name:"show",rawName:"v-show",value:!t.remarkVisible,expression:"!remarkVisible"}]},[t._v(t._s(t.userInfo.remark))]),i("label",{directives:[{name:"show",rawName:"v-show",value:t.remarkVisible,expression:"remarkVisible"}]},[t._v("最多10个汉字")]),i("span",{directives:[{name:"show",rawName:"v-show",value:!t.remarkVisible,expression:"!remarkVisible"}],staticClass:"fans-remark-edit",on:{click:t.modifyRemark}},[i("a-icon",{staticStyle:{"margin-left":"5px"},attrs:{type:"edit",alt:""}})],1),t.remarkVisible?i("a-input-search",{staticStyle:{"'width":"100px"},attrs:{defaultValue:t.userInfo.remark,placeholder:"输入用户的备注",maxLength:10},on:{search:t.setRemark}},[i("a-button",{attrs:{slot:"enterButton",type:"primary"},slot:"enterButton"},[i("a-icon",{attrs:{type:"check"}})],1)],1):t._e()],1),i("div",[i("label",[t._v("\n\t\t\t\t\t性别："),1==t.userInfo.sex?i("span",[t._v("男")]):t._e(),2==t.userInfo.sex?i("span",[t._v("女")]):t._e()])]),i("div",[i("label",[t._v("地域："+t._s(t.userInfo.province)+"-"+t._s(t.userInfo.city))])]),i("div",[i("label",[t._v("渠道来源："+t._s(t.userInfo.subscribe_scene_str))])]),i("div",[i("label",[t._v("关注时间："+t._s(t.userInfo.subscribe_time))]),"--"!=t.userInfo.subscribe_time&&t.subTimeList.length>0?i("a-tooltip",{attrs:{placement:"top",destroyTooltipOnHide:!0}},[i("template",{slot:"title"},[i("div",{staticStyle:{width:"160px","max-height":"195px","text-align":"center","overflow-y":"auto"}},[i("p",{staticStyle:{"margin-bottom":"2px","text-align":"left"}},[t._v("历史关注：")]),t._l(t.subTimeList,(function(e){return i("p",{staticStyle:{"margin-bottom":"2px"}},[t._v(" "+t._s(e))])}))],2)]),i("a-icon",{staticStyle:{"margin-left":"5px"},attrs:{type:"question-circle"}})],2):t._e()],1),i("div",[i("label",[t._v("上次互动时间："+t._s(t.userInfo.last_time))])]),i("div",[i("label",[t._v("取关时间："+t._s(t.userInfo.unsubscribe_time))]),"--"!=t.userInfo.unsubscribe_time&&t.unsubTimeList.length>0?i("a-tooltip",{attrs:{placement:"top",destroyTooltipOnHide:!0}},[i("template",{slot:"title"},[i("div",{staticStyle:{width:"160px","max-height":"195px","text-align":"center","overflow-y":"auto"}},[i("p",{staticStyle:{"margin-bottom":"2px","text-align":"left"}},[t._v("历史取关：")]),t._l(t.unsubTimeList,(function(e){return i("p",{staticStyle:{"margin-bottom":"2px"}},[t._v(" "+t._s(e))])}))],2)]),i("a-icon",{staticStyle:{"margin-left":"5px"},attrs:{type:"question-circle"}})],2):t._e()],1),i("div",[i("span",[i("label",[t._v("标签：")]),t._l(t.hasTagsValue,(function(e){return i("span",[i("a-tag",{staticStyle:{"margin-top":"0"},attrs:{color:"blue"}},[t._v(t._s(e))])],1)}))],2),i("span",{directives:[{name:"has",rawName:"v-has",value:"fans-add-tag",expression:"'fans-add-tag'"}]},[i("a-icon",{staticStyle:{"margin-left":"5px"},attrs:{type:"edit"},on:{click:t.showModal}})],1)])])]),i("div",{staticClass:"layout-contain"},[i("div",{staticStyle:{height:"100%","background-color":"#FFFFFF"}},[i("div",{staticClass:"account-filter-contain"},[i("div",{staticClass:"account-filter-item",class:0==t.selectedTab?"active":"",staticStyle:{"border-left":"0px","min-width":"20px"},on:{click:function(e){return t.changeTab(0)}}},[i("label",[t._v("用户画像")])]),i("div",{staticClass:"account-filter-item",class:1==t.selectedTab?"active":"",staticStyle:{"border-left":"0px","min-width":"20px"},on:{click:function(e){return t.changeTab(1)}}},[i("label",[t._v("指标分析")])]),i("div",{staticClass:"account-filter-item",class:2==t.selectedTab?"active":"",staticStyle:{"min-width":"20px"},on:{click:function(e){return t.changeTab(2)}}},[i("label",[t._v("互动轨迹")])]),i("div",{staticClass:"account-filter-item",class:3==t.selectedTab?"active":"",staticStyle:{"min-width":"20px"},on:{click:function(e){return t.changeTab(3)}}},[i("label",[t._v("跟进记录")])])]),i("div",{directives:[{name:"show",rawName:"v-show",value:0==t.selectedTab,expression:"selectedTab==0"}],staticClass:"content"},[i("a-spin",{attrs:{tip:"Loading...",size:"large",spinning:t.isLoading}},[i("div",{staticStyle:{overflow:"hidden","margin-bottom":"10px"}},[i("div",{staticStyle:{float:"right"}},[t.badicInfoVisible?t._e():i("a-button",{attrs:{type:"primary"},on:{click:t.editBadicInfo}},[t._v("编辑\n\t\t\t\t\t\t\t")]),t.badicInfoVisible?i("a-button",{staticStyle:{"margin-right":"15px"},on:{click:t.cancleBadicInfo}},[t._v("取消\n\t\t\t\t\t\t\t")]):t._e(),t.badicInfoVisible?i("a-button",{attrs:{type:"primary"},on:{click:t.submitBadicInfo}},[t._v("提交\n\t\t\t\t\t\t\t")]):t._e()],1)]),i("div",{staticClass:"col2"},t._l(t.field_list,(function(e,a){return i("div",{staticClass:"half"},[i("a-tag",{attrs:{color:"#1890ff"}},[t._v(t._s(e.title))]),t.badicInfoVisible||""==e.value||8==e.type?t._e():i("span",{staticClass:"half-text"},[t._v(t._s(e.value))]),t.badicInfoVisible||0==e.value.length||8!=e.type?t._e():i("span",{staticClass:"half-text"},t._l(e.value,(function(e){return i("img",{staticStyle:{"max-width":"70px","max-height":"70px",margin:"2px","line-height":"0px",cursor:"pointer"},attrs:{src:t.commonUrl+e.url},on:{click:function(a){return t.preview(t.commonUrl+e.url)}}})})),0),t.badicInfoVisible||""!=e.value?t._e():i("span",{staticClass:"half-text"},[t._v("暂无")]),t.badicInfoVisible?[8==e.type?i("span",{staticClass:"clearfix",staticStyle:{width:"45%",float:"right","margin-top":"4px","line-height":"0px"}},[i("a-upload",{staticClass:"upload-pic",attrs:{action:"https://www.mocky.io/v2/5cc8019d300000980a055e76","list-type":"picture-card",fileList:e.picUrl||[],beforeUpload:t.beforeUploadPic},on:{preview:t.handlePreview,change:function(e){return t.handleChangePic(e,a)}}},[i("div",[i("a-icon",{attrs:{type:"plus"}}),i("div",{staticClass:"ant-upload-text",staticStyle:{"font-size":"12px"}},[t._v("\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t上传图片\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t")])],1)])],1):t._e(),2==e.type?i("a-select",{staticStyle:{width:"45%",float:"right","margin-top":"4px"},attrs:{defaultValue:e.hasOption,placeholder:"请选择"+e.title,allowClear:""},on:{change:function(a){return t.handleChange(a,e.fieldid)}}},t._l(e.optionVal2,(function(e){return i("a-select-option",{attrs:{value:e}},[t._v(t._s(e)+"\n\t\t\t\t\t\t\t\t\t")])})),1):t._e(),3==e.type?i("a-select",{staticStyle:{width:"45%",float:"right","margin-top":"4px"},attrs:{mode:"multiple",defaultValue:e.hasOption,placeholder:"请选择"+e.title},on:{change:function(a){return t.handleChange2(a,e.fieldid)}}},t._l(e.optionVal2,(function(e){return i("a-select-option",{attrs:{value:e}},[t._v(t._s(e)+"\n\t\t\t\t\t\t\t\t\t")])})),1):t._e(),2!=e.type&&3!=e.type&&7!=e.type&&4!=e.type&&8!=e.type?i("a-input",{staticStyle:{width:"45%",float:"right","margin-top":"4px"},attrs:{defaultValue:e.value,placeholder:"请输入"+e.title},on:{change:function(a){return t.changeInput(a.target.value,e.fieldid)}}}):t._e(),7==e.type?i("a-cascader",{staticStyle:{width:"45%",float:"right","margin-top":"4px"},attrs:{options:t.cityData,defaultValue:e.provice,placeholder:"请选择"+e.title},on:{change:function(a){return t.changeArea(a,e.fieldid)}}}):t._e(),4==e.type?[""==e.data?i("a-date-picker",{staticStyle:{width:"45%",float:"right","margin-top":"4px"},attrs:{placeholder:"请选择"+e.title,disabledDate:t.disabledStartDate,allowClear:!1},on:{change:function(a){return t.selectDate(a,e.fieldid)}}}):t._e(),""!=e.data?i("a-date-picker",{staticStyle:{width:"45%",float:"right","margin-top":"4px"},attrs:{placeholder:"请选择"+e.title,disabledDate:t.disabledStartDate,defaultValue:t.moment(e.data),allowClear:!1},on:{change:function(a){return t.selectDate(a,e.fieldid)}}}):t._e()]:t._e()]:t._e()],2)})),0)])],1),i("div",{directives:[{name:"show",rawName:"v-show",value:1==t.selectedTab,expression:"selectedTab==1"}],staticClass:"content"},[i("div",{staticClass:"analysis-data"},[i("div",{staticClass:"analysis-data-module"},[i("div",{staticClass:"title"},[t._v("\n\t\t\t\t\t\t\t总互动次数\n\t\t\t\t\t\t\t"),i("a-tooltip",{attrs:{placement:"top"}},[i("template",{slot:"title"},[i("span",[t._v("以最新关注开始计入总互动次数，为总发送消息次数+总菜单点击次数+总扫码次数之和。")])]),i("a-icon",{attrs:{type:"question-circle"}})],2)],1),i("div",{staticClass:"number"},[t._v("\n\t\t\t\t\t\t\t"+t._s(t.total_interact)+"\n\t\t\t\t\t\t")])]),i("div",{staticClass:"analysis-data-module"},[i("div",{staticClass:"title"},[t._v("\n\t\t\t\t\t\t\t总发送消息次数\n\t\t\t\t\t\t\t"),i("a-tooltip",{attrs:{placement:"top"}},[i("template",{slot:"title"},[i("span",[t._v("以最新关注开始计入总发送消息次数，为粉丝向公众号发送消息的次数。")])]),i("a-icon",{attrs:{type:"question-circle"}})],2)],1),i("div",{staticClass:"number"},[t._v("\n\t\t\t\t\t\t\t"+t._s(t.total_message)+"\n\t\t\t\t\t\t")])]),i("div",{staticClass:"analysis-data-module"},[i("div",{staticClass:"title"},[t._v("\n\t\t\t\t\t\t\t总菜单点击次数\n\t\t\t\t\t\t\t"),i("a-tooltip",{attrs:{placement:"top"}},[i("template",{slot:"title"},[i("span",[t._v("以最新关注开始计入，粉丝点击公众号自定义菜单的总次数。")])]),i("a-icon",{attrs:{type:"question-circle"}})],2)],1),i("div",{staticClass:"number"},[t._v("\n\t\t\t\t\t\t\t"+t._s(t.total_menu)+"\n\t\t\t\t\t\t")])]),i("div",{staticClass:"analysis-data-module"},[i("div",{staticClass:"title"},[t._v("\n\t\t\t\t\t\t\t总扫码次数\n\t\t\t\t\t\t\t"),i("a-tooltip",{attrs:{placement:"top"}},[i("template",{slot:"title"},[i("span",[t._v("统计带参数的渠道二维码被扫的总次数。")])]),i("a-icon",{attrs:{type:"question-circle"}})],2)],1),i("div",{staticClass:"number"},[t._v("\n\t\t\t\t\t\t\t"+t._s(t.total_scan)+"\n\t\t\t\t\t\t")])])]),i("div",{staticClass:"analysis-echarts"},[i("div",{staticStyle:{height:"60px"}},[i("a-select",{staticStyle:{width:"120px",float:"right"},attrs:{defaultValue:"近7天"},on:{change:t.handleChangeType}},[i("a-select-option",{attrs:{value:"1"}},[t._v("近7天")]),i("a-select-option",{attrs:{value:"2"}},[t._v("近15天")]),i("a-select-option",{attrs:{value:"3"}},[t._v("近30天")])],1)],1),1==t.selectedTab?i("LineCharts",{attrs:{options:t.analysisData}}):t._e()],1),i("div",{staticClass:"analysis-table"},[i("a-spin",{attrs:{tip:"Loading...",size:"large",spinning:t.analysisTable.tableLoading}},[i("a-table",{attrs:{columns:t.analysisTable.columns,dataSource:t.analysisTable.list,rowKey:function(t){return t.id},rowClassName:t.rowClassName,pagination:!1}}),i("div",{directives:[{name:"show",rawName:"v-show",value:t.analysisTable.total>0,expression:"analysisTable.total > 0"}],staticStyle:{width:"100%"}},[i("div",{staticStyle:{height:"32px",display:"inline-block","margin-top":"25px"}},[t._v("\n\t\t\t\t\t\t\t\t共\n\t\t\t\t\t\t\t\t"),i("span",{staticStyle:{color:"blue"}},[t._v(t._s(t.analysisTable.total))]),t._v("条\n\t\t\t\t\t\t\t")]),i("div",{staticClass:"pagination",staticStyle:{"margin-top":"20px",float:"right"}},[i("a-pagination",{attrs:{total:t.analysisTable.total,showSizeChanger:"",showQuickJumper:t.analysisTable.quickJumper,current:t.analysisTable.page,pageSize:t.analysisTable.pageSize,pageSizeOptions:["10","20","30"]},on:{change:t.changeAnalysisPage,showSizeChange:t.showAnalysisSizeChange}})],1)])],1)],1)]),i("div",{directives:[{name:"show",rawName:"v-show",value:2==t.selectedTab,expression:"selectedTab==2"}],staticClass:"content"},[i("a-spin",{attrs:{tip:"Loading...",spinning:t.loading}},[i("div",{staticClass:"fans-inter-active"},[i("a-timeline",{staticClass:"time-line"},t._l(t.timeLines,(function(e){return i("a-timeline-item",[1==e.icon?i("img",{staticStyle:{width:"22px"},attrs:{slot:"dot",src:a("cf8c")},slot:"dot"}):t._e(),2==e.icon?i("img",{staticStyle:{width:"22px"},attrs:{slot:"dot",src:a("c943")},slot:"dot"}):t._e(),3==e.icon?i("img",{staticStyle:{width:"22px"},attrs:{slot:"dot",src:a("cc91")},slot:"dot"}):t._e(),4==e.icon?i("img",{staticStyle:{width:"26px"},attrs:{slot:"dot",src:a("4553")},slot:"dot"}):t._e(),5==e.icon?i("img",{staticStyle:{width:"26px"},attrs:{slot:"dot",src:a("8f93")},slot:"dot"}):t._e(),6==e.icon?i("img",{staticStyle:{width:"18px"},attrs:{slot:"dot",src:a("eacd")},slot:"dot"}):t._e(),8==e.icon?i("img",{staticStyle:{width:"18px"},attrs:{slot:"dot",src:a("ff27")},slot:"dot"}):t._e(),10==e.icon?i("img",{staticStyle:{width:"18px"},attrs:{slot:"dot",src:a("f180")},slot:"dot"}):t._e(),11==e.icon?i("img",{staticStyle:{width:"18px"},attrs:{slot:"dot",src:a("38a9")},slot:"dot"}):t._e(),12==e.icon?i("img",{staticStyle:{width:"16px"},attrs:{slot:"dot",src:a("fee6")},slot:"dot"}):t._e(),i("div",{staticStyle:{"min-height":"40px"}},[i("div",{staticClass:"time-line-time"},[t._v(t._s(e.event_time))]),i("div",{staticClass:"time-line-title"},[t._v(t._s(e.content))])])])})),1),1==t.btnFlag?i("a-button",{attrs:{type:"primary"},on:{click:t.loadMore}},[t._v("加载更多")]):t._e(),0==t.btnFlag?i("span",{attrs:{type:"primary"}},[t._v("暂无数据")]):t._e(),2==t.btnFlag?i("span",{attrs:{type:"primary"}},[t._v("没有更多数据了")]):t._e()],1)])],1),i("div",{directives:[{name:"show",rawName:"v-show",value:3==t.selectedTab,expression:"selectedTab==3"}],staticClass:"content"},[i("a-spin",{attrs:{tip:"Loading...",size:"large",spinning:t.followRecordLoading}},[i("div",{staticClass:"time"},[i("div",{staticStyle:{margin:"20px 0"}},[t._v("\n\t\t\t\t\t\t\t跟进状态：\n\t\t\t\t\t\t\t"),i("a-select",{staticStyle:{width:"120px"},model:{value:t.userInfo.follow_id,callback:function(e){t.$set(t.userInfo,"follow_id",e)},expression:"userInfo.follow_id"}},t._l(t.follows,(function(e){return i("a-select-option",{attrs:{value:e.id}},[t._v(t._s(e.title)+"\n\t\t\t\t\t\t\t\t")])})),1)],1),i("div",{staticClass:"textArea"},[i("a-textarea",{attrs:{placeholder:"添加跟进记录，1000字以内",autoSize:{minRows:5,maxRows:5},maxLength:1e3},on:{change:t.changeTextarea},model:{value:t.msg,callback:function(e){t.msg=e},expression:"msg"}}),i("div",{staticStyle:{"text-align":"right","margin-top":"10px"}},[t._v(t._s(t.msg.length)+"/1000")])],1),i("div",{staticClass:"textArea-btn"},[i("a-upload",{attrs:{action:"https://www.mocky.io/v2/5cc8019d300000980a055e76",listType:"picture-card",beforeUpload:t.beforeUpload,fileList:t.imageUrl},on:{preview:t.handlePreview,change:function(e){return t.changeMsg(e)}}},[t.imageUrl.length<9?i("div",[i("a-button",[i("a-icon",{attrs:{type:"link"}}),t._v("\n\t\t\t\t\t\t\t\t\t\t附件 "+t._s(t.imgNum)+"/9\n\t\t\t\t\t\t\t\t\t")],1)],1):t._e()]),i("a-modal",{attrs:{visible:t.previewVisible,footer:null},on:{cancel:t.handleCancel}},[i("img",{staticStyle:{width:"100%"},attrs:{alt:"example",src:t.previewImage}})]),i("a-button",{staticStyle:{left:"50%"},attrs:{type:"primary",disabled:t.submitDisabled},on:{click:t.submitFollowRecord}},[t._v("\n\t\t\t\t\t\t\t\t提交\n\t\t\t\t\t\t\t")])],1),i("a-timeline",{staticClass:"time-line"},t._l(t.followRecord,(function(e){return i("a-timeline-item",[i("div",{staticClass:"time-line-time2"},[t._v(t._s(e.time))]),i("img",{staticStyle:{width:"18px"},attrs:{slot:"dot",src:a("ff27")},slot:"dot"}),i("div",{staticStyle:{margin:"10px 0"}},[i("span",{staticStyle:{color:"#1989FA"}},[t._v(t._s(e.name))]),t._v("\n\t\t\t\t\t\t\t\t\t发表："),i("span",{staticStyle:{float:"right"}},[i("a-icon",{attrs:{type:"edit"},on:{click:function(a){return t.editFollowRecord(e)}}})],1)]),i("div",{staticClass:"time-line-title2"},[t._v("\n\t\t\t\t\t\t\t\t\t"+t._s(e.record)+"\n\t\t\t\t\t\t\t\t\t"),e.file.length>0?i("div",{staticStyle:{"margin-top":"5px",overflow:"hidden"}},t._l(e.file,(function(e){return i("div",{staticClass:"preview-box"},[i("div",{staticClass:"preview-cover"},[i("img",{attrs:{src:t.commonUrl+e,alt:""}})]),i("span",{staticClass:"preview-cover-icon",on:{click:function(a){return t.previewHasImg(t.commonUrl+e)}}},[i("a-icon",{attrs:{type:"eye"}})],1)])})),0):t._e()])])})),1),i("div",{directives:[{name:"show",rawName:"v-show",value:t.total>0,expression:"total > 0"},{name:"has",rawName:"v-has",value:"client-list",expression:"'client-list'"}],staticClass:"pagination",staticStyle:{margin:"20px","box-sizing":"border-box",overflow:"hidden"}},[i("div",{staticStyle:{height:"32px",float:"left","line-height":"32px"}},[t._v("\n\t\t\t\t\t\t\t\t共\n\t\t\t\t\t\t\t\t"),i("span",{staticStyle:{color:"blue"}},[t._v(t._s(t.total))]),t._v("条\n\t\t\t\t\t\t\t")]),i("div",{staticClass:"pagination",staticStyle:{height:"32px",float:"right"}},[i("a-pagination",{attrs:{total:t.total,showSizeChanger:"",showQuickJumper:t.quickJumper,current:t.page,pageSize:t.pageSize,pageSizeOptions:["15","30","50","100"]},on:{change:t.changePage,showSizeChange:t.showSizeChange}})],1)]),i("a-modal",{attrs:{title:"修改跟进记录",width:"800px"},on:{ok:t.submitFollowRecord,cancel:t.cancelFollowRecord},model:{value:t.editVisible,callback:function(e){t.editVisible=e},expression:"editVisible"}},[i("div",{staticStyle:{margin:"20px 0"}},[t._v("\n\t\t\t\t\t\t\t\t跟进状态：\n\t\t\t\t\t\t\t\t"),i("a-select",{staticStyle:{width:"120px"},model:{value:t.status,callback:function(e){t.status=e},expression:"status"}},t._l(t.follows,(function(e){return i("a-select-option",{attrs:{value:e.id}},[t._v(t._s(e.title)+"\n\t\t\t\t\t\t\t\t\t")])})),1)],1),i("div",{staticClass:"textArea"},[i("a-textarea",{attrs:{placeholder:"添加跟进记录，1000字以内",autoSize:{minRows:5,maxRows:5},maxLength:1e3},model:{value:t.msg2,callback:function(e){t.msg2=e},expression:"msg2"}}),i("div",{staticStyle:{"text-align":"right","margin-top":"10px"}},[t._v(t._s(t.msg2.length)+"/1000")])],1),i("div",{staticClass:"textArea-btn"},[i("a-upload",{attrs:{action:"https://www.mocky.io/v2/5cc8019d300000980a055e76",listType:"picture-card",beforeUpload:t.beforeUpload2,fileList:t.imageUrl2},on:{preview:t.handlePreview2,change:function(e){return t.changeMsg2(e)}}},[t.imageUrl2.length<9?i("div",[i("a-button",[i("a-icon",{attrs:{type:"link"}}),t._v("\n\t\t\t\t\t\t\t\t\t\t\t附件 "+t._s(t.imgNum2)+"/9\n\t\t\t\t\t\t\t\t\t\t")],1)],1):t._e()]),i("a-modal",{attrs:{visible:t.previewVisible2,footer:null},on:{cancel:t.handleCancel2}},[i("img",{staticStyle:{width:"100%"},attrs:{alt:"example",src:t.previewImage2}})])],1)])],1)])],1)])]),i("a-modal",{attrs:{title:"为粉丝增加标签",confirmLoading:t.confirmLoading2,width:"800px"},on:{ok:t.handleOk,cancel:t.cancelVisible},model:{value:t.visible,callback:function(e){t.visible=e},expression:"visible"}},[i("p",{staticStyle:{color:"red","margin-bottom":"10px"}},[t._v("\n\t\t\t最多可再打"+t._s(20-t.tagCheckValue.length)+"个标签。")]),i("a-checkbox-group",{on:{change:t.onChange2},model:{value:t.tagCheckValue,callback:function(e){t.tagCheckValue=e},expression:"tagCheckValue"}},[i("a-row",t._l(t.tagsList,(function(e,a){return i("a-col",{key:e.key,staticStyle:{"margin-bottom":"10px"},attrs:{span:6}},[i("a-checkbox",{attrs:{value:e.key,disabled:t.disabled[a]}},[t._v("\n\t\t\t\t\t\t"+t._s(e.name)+"\n\t\t\t\t\t")])],1)})),1)],1),i("a-input-search",{directives:[{name:"has",rawName:"v-has",value:"tag-add",expression:"'tag-add'"}],attrs:{placeholder:"请输入标签（不得超过6个字符）",enterButton:"新建"},on:{search:t.onSearch},model:{value:t.inputValue,callback:function(e){t.inputValue=e},expression:"inputValue"}}),i("p",{directives:[{name:"has",rawName:"v-has",value:"tag-add",expression:"'tag-add'"}],staticStyle:{margin:"10px 0"}},[t._v("提示：输入一个标签后，空格后输入下一个标签，每个标签最多6个字")])],1)],1)},s=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"title"},[a("label",[t._v("基础信息")])])}],n=(a("20d6"),a("a481"),a("75fc")),r=(a("ac4d"),a("8a81"),a("ac6a"),a("28a5"),a("7618")),l=(a("96cf"),a("3b8d")),o=a("7304"),c=a("85d2"),d=a("c1df"),u=a.n(d);function p(t){return new Promise((function(e,a){var i=new FileReader;i.readAsDataURL(t),i.onload=function(){return e(i.result)}}))}var h={name:"detail",components:{LineCharts:o["a"]},data:function(){return{id:"",userInfo:{},remarkVisible:!1,subTimeList:[],unsubTimeList:[],confirmLoading2:!1,inputValue:"",tagsList:[],tagCheckValue:[],visible:!1,disabled:[],tagsNum:0,tagValue:[],hasTags:[],hasTagsValue:[],selectedTab:0,type:1,total_interact:"--",total_message:"--",total_menu:"--",total_scan:"--",analysisData:{title:"趋势图",legendData:[],xAxisData:[],seriesData:[]},analysisTableList:[],analysisTable:{tableLoading:!1,columns:[{title:"时间",dataIndex:"date",key:"date"},{title:"总互动次数",dataIndex:"interact",key:"interact"},{title:"总发送消息次数",dataIndex:"message",key:"message"},{title:"总菜单点击次数",dataIndex:"menu",key:"menu"},{title:"总扫码次数",dataIndex:"scan",key:"scan"}],list:[],total:0,page:1,pageSize:10,quickJumper:!1},loading:!1,timeLines:[],fans_trail_page:1,fans_trail_pageSize:10,btnFlag:1,isLoading:!1,field_list:[],fieldData:[],badicInfoVisible:!1,picUrl:"",cityData:c["a"],moment:u.a,followRecordLoading:!1,followRecord:[],imageUrl:[],file:[],imgNum:0,msg:"",previewVisible:!1,previewImage:"",isImg:!0,submitDisabled:!0,record_id:"",editVisible:!1,imageUrl2:[],file2:[],imgNum2:0,msg2:"",previewVisible2:!1,previewImage2:"",isImg2:!0,submitDisabled2:!0,total:1,quickJumper:!1,page:1,pageSize:15,commonUrl:this.$store.state.commonUrl,status:[],followStatus:"",follows:[]}},mounted:function(){this.id=this.$route.query.id,this.getFollowStatus(),this.getPersonas()},methods:{getUserInfo:function(){this.getHasTags(),this.getFansInfo(),this.getFansAnalysis()},getFansInfo:function(){var t=Object(l["a"])(regeneratorRuntime.mark((function t(){var e,a,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=this,t.next=3,this.axios.post("fans-behaviour/fans-info",{id:this.id});case 3:a=t.sent,i=a.data,0!=i.error?e.$message.error(i.error_msg):(e.userInfo=i.data,e.status=e.userInfo.follow_id,""==this.status&&(this.status=this.follows[0]&&this.follows[0].id?this.follows[0].id:""),e.followStatus=e.status,e.userInfo.subscribe_time&&e.getTimeList(1),e.userInfo.unsubscribe_time&&e.getTimeList(2));case 6:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),getTimeList:function(){var t=Object(l["a"])(regeneratorRuntime.mark((function t(e){var a,i,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=this,t.next=3,this.axios.post("fans-behaviour/fans-sub-info",{id:this.id,type:e});case 3:i=t.sent,s=i.data,0!=s.error?a.$message.error(s.error_msg):1==e?a.subTimeList=s.data:2==e&&(a.unsubTimeList=s.data);case 6:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),getFansAnalysis:function(){var t=Object(l["a"])(regeneratorRuntime.mark((function t(){var e,a,i,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=this,t.next=3,this.axios.post("fans-behaviour/fans-analysis",{id:this.id,type:this.type});case 3:a=t.sent,i=a.data,0!=i.error?e.$message.error(i.error_msg):(e.total_interact=i.data.total_interact,e.total_message=i.data.total_message,e.total_menu=i.data.total_menu,e.total_scan=i.data.total_scan,e.analysisData.legendData=i.data.legData,e.analysisData.xAxisData=i.data.xData,e.analysisData.seriesData=i.data.seriesData,this.analysisTableList=i.data.list,this.analysisTable.total=i.data.list.length,s=this.getPageData(this.analysisTableList,this.analysisTable.page,this.analysisTable.pageSize),e.analysisTable.list=s.list,this.analysisTable.page=s.page);case 6:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),getPageData:function(t,e,a){var i=e*a,s=(e-1)*a,n={page:e,list:[]};t.length<i&&(i=t.length),s>t.length-1&&(t.length%a!=0?(s=parseInt(t.length/a)*a,n.page=parseInt(t.length/a)+1):(s=(parseInt(t.length/a)-1)*a,n.page=parseInt(t.length/a)));for(var r=s;r<i;r++)n.list.push(t[r]);return n},modifyRemark:function(){this.remarkVisible=!this.remarkVisible},setRemark:function(){var t=Object(l["a"])(regeneratorRuntime.mark((function t(e,a){var i,s,n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(i=this,!(e.length>10)){t.next=4;break}return i.$message.warning("备注不可超过10个字"),t.abrupt("return",!1);case 4:if(i.userInfo.remark==e){t.next=13;break}return s={fans_id:this.id,remark:e,wx_id:localStorage.getItem("wxNum")},t.next=8,this.axios.post("fans/set-remark",s);case 8:n=t.sent,r=n.data,0==r.error?(i.userInfo.remark=e,i.remarkVisible=!this.remarkVisible,2==this.selectedTab&&(this.btnFlag=1,this.loading=!0,this.fans_trail_page=1,this.timeLines=[],this.fansTrail())):i.$message.error(r.error_msg),t.next=15;break;case 13:return this.remarkVisible=!this.remarkVisible,t.abrupt("return",!1);case 15:case"end":return t.stop()}}),t,this)})));function e(e,a){return t.apply(this,arguments)}return e}(),copyText:function(t){var e=this,a=document.createElement("input");document.body.appendChild(a),a.setAttribute("value",t),a.select(),document.execCommand("copy")&&(document.execCommand("copy"),e.$message.success("复制成功！")),document.body.removeChild(a)},showModal:function(){this.getTags(),this.visible=!0},getTags:function(){var t=Object(l["a"])(regeneratorRuntime.mark((function t(){var e,a,i,s,n,r,l;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.axios.post("tags/tags-get-all",{wx_id:localStorage.getItem("wxNum"),type:1});case 2:if(e=t.sent,a=e.data,0!=a.error)this.$message.error(a.error_msg);else if(this.tagsList=a.data.info,this.disabled=[],20-this.tagCheckValue.length<=0)for(i=0;i<this.tagsList.length;i++)s=!0,this.disabled.push(s);else for(n=0;n<this.tagsList.length;n++)for(r=!1,this.disabled.push(r),l=0;l<this.tagCheckValue.length;l++)this.tagCheckValue[l]==this.tagsList[n].key&&(this.disabled[n]=!0);case 5:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),getHasTags:function(){var t=Object(l["a"])(regeneratorRuntime.mark((function t(){var e,a,i,s=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=[],e.push(this.id),this.tagCheckValue=[],t.next=5,this.axios.post("fans/fans-tags",{fans_ids:e});case 5:a=t.sent,i=a.data,0!=i.error?this.$message.error(i.error_msg):(i.data.map((function(t){s.tagCheckValue.push(t.tags_id),s.hasTags.push(t.tags_id),s.hasTagsValue.push(t.tag_name)})),this.tagsNum=this.tagCheckValue.length);case 8:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),handleOk:function(){this.tagCheckValue.length==this.tagsNum?this.$message.warning("请选择要打的标签"):(this.confirmLoading2=!0,this.addTagsMore())},addTagsMore:function(){var t=Object(l["a"])(regeneratorRuntime.mark((function t(){var e,a,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=[],e.push(this.id),t.next=4,this.axios.post("fans/give-user-tags",{wx_id:localStorage.getItem("wxNum"),tag_ids:this.tagCheckValue,fans_ids:e,type:0});case 4:a=t.sent,i=a.data,0!=i.error?(this.$message.error(i.error_msg),this.confirmLoading2=!1):(this.$message.success(i.error_msg),this.visible=!1,this.confirmLoading2=!1,this.hasTagsValue=[],this.getHasTags());case 7:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),cancelVisible:function(){this.visible=!1,this.inputValue="",this.tagValue=[],this.tagCheckValue=[],this.hasTagsValue=[],this.getHasTags()},onChange2:function(t){for(var e=[],a=[],i=0;i<this.hasTags.length;i++)e[this.hasTags[i]]=Object(r["a"])(this.hasTags[i]);for(i=0;i<t.length;i++){var s=Object(r["a"])(t[i]);e[t[i]]?e[t[i]].indexOf(s)<0&&a.push(t[i]):a.push(t[i])}if(20-t.length<=0){this.disabled=[];for(var n=0;n<this.tagsList.length;n++){var l=!0;this.disabled.push(l);for(var o=0;o<a.length;o++)this.tagsList[n].key==a[o]&&(this.disabled[n]=!1)}}else{this.disabled=[];for(var c=0;c<this.tagsList.length;c++){var d=!1;this.disabled.push(d);for(var u=0;u<this.hasTags.length;u++)this.tagsList[c].key==this.hasTags[u]&&(this.disabled[c]=!0)}}},onSearch:function(t){if(this.tagsList.length>=100)return this.$message.warning("标签数量已超过上限100个，无法创建"),!1;if(""==t)return this.$message.warning("不能为空"),!1;this.tagValue=[];for(var e=0;e<t.split(" ").length;e++){if(t.split(" ")[e].length>6)return this.$message.error("每个标签最多6个字"),this.inputValue="",!1;t.split(" ")[e].length>0&&this.tagValue.push(t.split(" ")[e])}if(this.tagsList.length+this.tagValue.length>100){var a=100-this.tagsList.length;return this.$message.error("抱歉，您当前最多只能新建"+a+"个标签，请重新提交"),this.inputValue="",this.tagValue=[],!1}this.addTags()},addTags:function(){var t=Object(l["a"])(regeneratorRuntime.mark((function t(){var e,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.axios.post("tags/tags-create",{wx_id:localStorage.getItem("wxNum"),tag_name:this.tagValue});case 2:e=t.sent,a=e.data,0!=a.error?"标签名非法，请注意不能和其他标签重名"==a.error_msg?this.$message.error("该标签名称与微信标签重复，请手动同步微信标签即可。"):this.$message.error(a.error_msg):(this.$message.success("新建标签成功"),this.getTags2());case 5:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),getTags2:function(){var t=Object(l["a"])(regeneratorRuntime.mark((function t(){var e,a,i,s,n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.axios.post("tags/tags-get-all",{wx_id:localStorage.getItem("wxNum"),type:1});case 2:if(e=t.sent,a=e.data,0!=a.error)this.$message.error(a.error_msg);else{if(this.tagsList=a.data.info,20-this.tagCheckValue.length<=0)for(i=0;i<this.tagValue.length;i++)s=!0,this.disabled.unshift(s);else for(n=0;n<this.tagValue.length;n++)r=!1,this.disabled.unshift(r);this.inputValue="",this.tagValue=[]}case 5:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),handleChangeType:function(t){this.type=t,this.getFansAnalysis()},rowClassName:function(t,e){var a="dark-row";return e%2===0&&(a="light-row"),a},changeTab:function(t){this.selectedTab!=t&&(this.selectedTab=t,0==t&&this.getPersonas(),2==t&&(this.btnFlag=1,this.loading=!0,this.fans_trail_page=1,this.timeLines=[],this.fansTrail()),3==t&&this.getFollowRecord())},fansTrail:function(){var t=Object(l["a"])(regeneratorRuntime.mark((function t(){var e,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.axios.post("fans-behaviour/fans-trail",{fans_id:this.id,page:this.fans_trail_page,pageSize:this.fans_trail_pageSize});case 2:e=t.sent,a=e.data,0!=a.error?this.$message.error(a.error_msg):(0==a.data.length?1==this.fans_trail_page?this.btnFlag=0:this.btnFlag=2:a.data.length<this.fans_trail_pageSize?this.btnFlag=2:this.btnFlag=1,this.timeLines=this.timeLines.concat(a.data),this.loading=!1);case 5:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),loadMore:function(){this.loading=!0,this.fans_trail_page=this.fans_trail_page+1,this.fansTrail()},changeAnalysisPage:function(t,e){var a=this.getPageData(this.analysisTableList,t,this.analysisTable.pageSize);this.analysisTable.list=a.list,this.analysisTable.page=a.page},showAnalysisSizeChange:function(t,e){this.analysisTable.pageSize=e;var a=this.getPageData(this.analysisTableList,this.analysisTable.page,e);this.analysisTable.list=a.list,this.analysisTable.page=a.page},getPersonas:function(){var t=Object(l["a"])(regeneratorRuntime.mark((function t(){var e,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.isLoading=!0,t.next=3,this.axios.post("fans/fans-field",{uid:localStorage.getItem("uid"),fans_id:this.id});case 3:e=t.sent,a=e.data,0!=a.error?(this.isLoading=!1,this.$message.error(a.error_msg)):(this.isLoading=!1,this.field_list=a.data.field_list,this.field_list.map((function(t){2==t.type||3==t.type?(t.optionVal2=t.optionVal.split(","),2==t.type?""==t.value?t.hasOption=t.value.split(""):t.hasOption=t.value:3==t.type&&""!=t.value&&(t.hasOption=t.value.split(","))):7==t.type?""==t.value?t.provice=[]:t.provice=t.value.split("-"):4==t.type&&(t.data=t.value)})),this.fieldData=a.data.field_list);case 6:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),editBadicInfo:function(){this.badicInfoVisible=!0;for(var t=0;t<this.field_list.length;t++)if(this.field_list[t]["picUrl"]=[],8==this.field_list[t].type&&this.field_list[t].value){var e=!0,a=!1,i=void 0;try{for(var s,n=this.field_list[t].value[Symbol.iterator]();!(e=(s=n.next()).done);e=!0){var r=s.value;this.field_list[t]["picUrl"].push({uid:r.uid,url:this.commonUrl+r.url,status:r.status,name:"image.png"})}}catch(l){a=!0,i=l}finally{try{e||null==n.return||n.return()}finally{if(a)throw i}}}this.fieldData=JSON.parse(JSON.stringify(this.field_list))},handleChange:function(t,e){var a=Object(n["a"])(this.field_list),i=a.filter((function(t){return e===t.fieldid}))[0];i&&(i.value=t,this.field_list=a)},handleChange2:function(t,e){var a=Object(n["a"])(this.field_list),i=a.filter((function(t){return e===t.fieldid}))[0];i&&(i.value=t.join(","),this.field_list=a)},changeInput:function(t,e){var a=Object(n["a"])(this.field_list),i=a.filter((function(t){return e===t.fieldid}))[0];i&&(i.value=t,this.field_list=a)},changeArea:function(t,e){var a=Object(n["a"])(this.field_list),i=a.filter((function(t){return e===t.fieldid}))[0];i&&(i.value=t.join("-"),this.field_list=a)},selectDate:function(t,e){var a=Object(n["a"])(this.field_list),i=a.filter((function(t){return e===t.fieldid}))[0];i&&(i.value=t.format("YYYY-MM-DD"),this.field_list=a)},disabledStartDate:function(t){return t.valueOf()>(new Date).getTime()},submitBadicInfo:function(){var t=Object(l["a"])(regeneratorRuntime.mark((function t(){var e,a,i,s,n,r,l,o,c,d,u,p;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e=/^[1][3,4,5,6,7,8,9][0-9]{9}$/,a=/^\w[-\w.+]*@([A-Za-z0-9][-A-Za-z0-9]+\.)+[A-Za-z]{2,14}$/,i=JSON.parse(JSON.stringify(this.field_list)),s=0;case 4:if(!(s<i.length)){t.next=39;break}if(5!=i[s].type||""==i[s].value){t.next=9;break}if(e.test(i[s].value)){t.next=9;break}return this.$message.error("手机号格式不正确！"),t.abrupt("return",!1);case 9:if(6!=i[s].type||""==i[s].value){t.next=13;break}if(a.test(this.field_list[s].value)){t.next=13;break}return this.$message.error("邮箱格式不正确！"),t.abrupt("return",!1);case 13:if(8!=i[s].type){t.next=35;break}for(n=!0,r=!1,l=void 0,t.prev=17,o=i[s].picUrl[Symbol.iterator]();!(n=(c=o.next()).done);n=!0)d=c.value,d.url=d.url.replace(this.commonUrl,""),delete d.response,delete d.xhr,delete d.percent;t.next=25;break;case 21:t.prev=21,t.t0=t["catch"](17),r=!0,l=t.t0;case 25:t.prev=25,t.prev=26,n||null==o.return||o.return();case 28:if(t.prev=28,!r){t.next=31;break}throw l;case 31:return t.finish(28);case 32:return t.finish(25);case 33:i[s].value=JSON.parse(JSON.stringify(i[s].picUrl)),delete i[s].picUrl;case 35:"undefined"==typeof i[s].value&&(i[s].value="");case 36:s++,t.next=4;break;case 39:return this.isLoading=!0,t.next=42,this.axios.post("fans/fans-field-update",{uid:localStorage.getItem("uid"),fans_id:this.id,fieldData:i});case 42:u=t.sent,p=u.data,0!=p.error?(this.isLoading=!1,this.$message.error(p.error_msg)):(this.badicInfoVisible=!1,this.getPersonas());case 45:case"end":return t.stop()}}),t,this,[[17,21,25,33],[26,,28,32]])})));function e(){return t.apply(this,arguments)}return e}(),cancleBadicInfo:function(){this.badicInfoVisible=!1,this.field_list=JSON.parse(JSON.stringify(this.fieldData))},getFollowRecord:function(){var t=Object(l["a"])(regeneratorRuntime.mark((function t(){var e,a,i,s,n=arguments;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=n.length>0&&void 0!==n[0]?n[0]:1,a=n.length>1&&void 0!==n[1]?n[1]:this.pageSize,this.followRecordLoading=!0,t.next=5,this.axios.post("fans/fans-follow-record",{isMasterAccount:localStorage.getItem("isMasterAccount"),uid:localStorage.getItem("uid"),fans_id:this.id,sub_id:localStorage.getItem("sub_id"),page:e,page_size:a});case 5:i=t.sent,s=i.data,0!=s.error?(this.$message.error(s.error_msg),this.followRecordLoading=!1):(this.followRecordLoading=!1,this.total=parseInt(s.data.count),this.page=e,this.pageSize=a,this.quickJumper=this.total>this.pageSize,this.followRecord=s.data.followRecord);case 8:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),changePage:function(t,e){this.getFollowRecord(t,e)},showSizeChange:function(t,e){this.getFollowRecord(1,e)},changeTextarea:function(){""==this.msg&&0==this.file.length?this.submitDisabled=!0:this.submitDisabled=!1},handleCancel:function(){this.previewVisible=!1},handlePreview:function(){var t=Object(l["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.url||e.preview){t.next=4;break}return t.next=3,p(e.originFileObj);case 3:e.preview=t.sent;case 4:this.previewImage=e.url||e.preview,this.previewVisible=!0;case 6:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),preview:function(t){this.previewImage=t,this.previewVisible=!0},beforeUploadPic:function(){var t=Object(l["a"])(regeneratorRuntime.mark((function t(e){var a,i,s,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if("image/png"==e.type||"image/jpg"==e.type||"image/jpeg"==e.type){t.next=4;break}return this.$message.error("图片类型仅支持png、jpg、jpeg类型！"),this.isImg3=!1,t.abrupt("return",!1);case 4:if(a=e.size/1024/1024<2,a){t.next=11;break}return this.$message.error("图片不超过2M！"),this.isImg3=!1,t.abrupt("return",!1);case 11:if(!(e.size<5)){t.next=15;break}return this.$message.error("上传文件大小不符！"),this.isImg3=!1,t.abrupt("return",!1);case 15:return this.isImg3=!0,i=new FormData,i.append("uid",localStorage.getItem("uid")),i.append("fileInfo",e),t.next=21,this.axios.post("sub-user/upload-image",i);case 21:if(s=t.sent,n=s.data,0!=n.error){t.next=29;break}if(!n.data){t.next=27;break}return this.picFile={uid:e.uid,url:this.commonUrl+n.data.local_path,status:"done"},t.abrupt("return",a);case 27:t.next=30;break;case 29:this.$message.error(n.error_msg);case 30:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),handleChangePic:function(t,e){if("removed"==t.file.status&&this.field_list[e]["picUrl"].splice(this.field_list[e]["picUrl"].findIndex((function(e){return e.url==t.file.url})),1),"done"==this.picFile.status){var a=this.field_list[e]["picUrl"].findIndex((function(e){return t.file==e}));-1!=a?this.field_list[e]["picUrl"].splice(a,1):this.field_list[e]["picUrl"].push(this.picFile)}var i=!0,s=!1,n=void 0;try{for(var r,l=this.field_list[e]["picUrl"][Symbol.iterator]();!(i=(r=l.next()).done);i=!0){var o=r.value;"error"==o.status&&(o.status="done")}}catch(c){s=!0,n=c}finally{try{i||null==l.return||l.return()}finally{if(s)throw n}}this.picFile={}},changeMsg:function(t){-1!=this.imageUrl.indexOf(t.file)&&this.file.splice(this.imageUrl.indexOf(t.file),1),this.isImg&&(this.imageUrl=t.fileList,this.imgNum=t.fileList.length),0==this.file.length&&""==this.msg&&(this.submitDisabled=!0)},uploadMaterial:function(){var t=Object(l["a"])(regeneratorRuntime.mark((function t(e){var a,i,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.submitDisabled=!0,a=new FormData,a.append("uid",localStorage.getItem("uid")),a.append("fileInfo",e),t.next=6,this.axios.post("sub-user/upload-image",a);case 6:i=t.sent,s=i.data,0==s.error?s.data&&(this.file.push(s.data.local_path),this.submitDisabled=!1):(this.$message.error(s.error_msg),this.submitDisabled=!1);case 9:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),beforeUpload:function(t){if("image/png"!=t.type&&"image/jpg"!=t.type&&"image/jpeg"!=t.type)return this.$message.error("图片类型仅支持png、jpg、jpeg类型！"),this.isImg=!1,!1;var e=t.size/1024/1024<2;return e?t.size<5?(this.$message.error("上传文件大小不符！"),this.isImg=!1,!1):(this.isImg=!0,this.uploadMaterial(t),e):(this.$message.error("图片不超过2M！"),this.isImg=!1,!1)},submitFollowRecord:function(){var t=Object(l["a"])(regeneratorRuntime.mark((function t(){var e,a,i,s,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(this.followRecordLoading=!0,e="",a=[],""!=this.record_id){t.next=8;break}e=this.msg,a=this.file,t.next=14;break;case 8:if(e=this.msg2,a=this.file2,""!=e||0!=a.length){t.next=14;break}return this.$message.error("跟进内容不能为空！"),this.followRecordLoading=!1,t.abrupt("return",!1);case 14:if(i=0,i=this.editVisible?this.status:this.userInfo.follow_id,i){t.next=20;break}return this.$message.warning("请选择跟进状态！"),this.followRecordLoading=!1,t.abrupt("return",!1);case 20:return t.next=22,this.axios.post("fans/fans-follow-record-set",{isMasterAccount:localStorage.getItem("isMasterAccount"),uid:localStorage.getItem("uid"),fans_id:this.id,sub_id:localStorage.getItem("sub_id"),record_id:this.record_id,record:e,file:a,follow_id:i});case 22:s=t.sent,n=s.data,0!=n.error?(this.followRecordLoading=!1,this.$message.error(n.error_msg)):(this.submitDisabled=!0,this.msg="",this.file=[],this.record_id="",this.imageUrl=[],this.imgNum=0,this.msg2="",this.file2=[],this.imageUrl2=[],this.imgNum2=0,this.editVisible=!1,this.getFollowRecord(),this.getFansInfo());case 25:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),editFollowRecord:function(t){var e=this;this.editVisible=!0,this.record_id=t.id,this.msg2=t.record,this.file2=JSON.parse(JSON.stringify(t.file)),t.file.map((function(t,a){var i={uid:a,name:"image.png",status:"done",url:e.commonUrl+t};e.imageUrl2.push(i)})),this.imgNum2=t.file.length},cancelFollowRecord:function(){this.editVisible=!1,this.record_id="",this.msg2="",this.file2=[],this.imageUrl2=[],this.imgNum2=0,this.status=this.followStatus},handleCancel2:function(){this.previewVisible2=!1},handlePreview2:function(){var t=Object(l["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.url||e.preview){t.next=4;break}return t.next=3,p(e.originFileObj);case 3:e.preview=t.sent;case 4:this.previewImage2=e.url||e.preview,this.previewVisible2=!0;case 6:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),changeMsg2:function(t){-1!=this.imageUrl2.indexOf(t.file)&&this.file2.splice(this.imageUrl2.indexOf(t.file),1),this.isImg2&&(this.imageUrl2=t.fileList,this.imgNum2=t.fileList.length)},uploadMaterial2:function(){var t=Object(l["a"])(regeneratorRuntime.mark((function t(e){var a,i,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=new FormData,a.append("uid",localStorage.getItem("uid")),a.append("fileInfo",e),t.next=5,this.axios.post("sub-user/upload-image",a);case 5:i=t.sent,s=i.data,0==s.error?s.data&&this.file2.push(s.data.local_path):this.$message.error(s.error_msg);case 8:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),beforeUpload2:function(t){if("image/png"!=t.type&&"image/jpg"!=t.type&&"image/jpeg"!=t.type)return this.$message.error("图片类型仅支持png、jpg、jpeg类型！"),this.isImg2=!1,!1;var e=t.size/1024/1024<2;return e?t.size<5?(this.$message.error("上传文件大小不符！"),this.isImg2=!1,!1):(this.isImg2=!0,this.uploadMaterial2(t),e):(this.$message.error("图片不超过2M！"),this.isImg2=!1,!1)},previewHasImg:function(t){this.previewImage=t,this.previewVisible=!0},getFollowStatus:function(){var t=Object(l["a"])(regeneratorRuntime.mark((function t(){var e,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.axios.post("custom-field/follow",{uid:localStorage.getItem("uid"),status:1});case 2:e=t.sent,a=e.data,0!=a.error?this.$message.error(a.error_msg):(this.follows=a.data.follow,this.getUserInfo());case 5:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()}},g=h,f=(a("c399"),a("2877")),m=Object(f["a"])(g,i,s,!1,null,"2ec8ee65",null);e["default"]=m.exports},"948d":function(t,e,a){var i=a("c399b");"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var s=a("499e").default;s("5847b713",i,!0,{sourceMap:!1,shadowMode:!1})},af86:function(t,e){t.exports="data:image/png;base64,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"},c399:function(t,e,a){"use strict";var i=a("948d"),s=a.n(i);s.a},c399b:function(t,e,a){e=t.exports=a("2350")(!1),e.push([t.i,'.fans-detail[data-v-2ec8ee65]{width:100%;height:100%}.layout-left[data-v-2ec8ee65]{position:absolute;left:0;top:60px;width:270px;height:calc(100% - 61px);padding:20px 10px 40px 10px;background-color:#fff;overflow-y:scroll}.user-info[data-v-2ec8ee65]{margin-left:10px;text-align:left;color:#333}.user-info div[data-v-2ec8ee65]{margin-top:20px}.center-align[data-v-2ec8ee65]{text-align:center}.userinfo-openid[data-v-2ec8ee65]{vertical-align:middle;display:inline-block;width:130px;white-space:nowrap;text-overflow:ellipsis;-o-text-overflow:ellipsis;overflow:hidden}.layout-contain[data-v-2ec8ee65]{position:absolute;left:270px;top:60px;width:80%;width:calc(100% - 267px);width:-webkit-calc(100% - 267px);background-color:#e9e9e9;height:calc(100% - 61px);max-height:100%;padding:20px 20px 0 20px;overflow-y:scroll}.layout-left[data-v-2ec8ee65]::-webkit-scrollbar{width:2px;height:2px}.layout-left[data-v-2ec8ee65]::-webkit-scrollbar-thumb{background:#e9e9e9}.layout-left[data-v-2ec8ee65]::-webkit-scrollbar-track{background:#fff}.account-filter-contain[data-v-2ec8ee65]{width:100%;min-width:350px;background-color:#f7f7f7}.account-filter-contain[data-v-2ec8ee65],.account-filter-item[data-v-2ec8ee65]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.account-filter-item[data-v-2ec8ee65]{color:#1a1a1a;width:174px;cursor:pointer;padding:12px 0 12px 2px;font-size:14px}.account-filter-item.active[data-v-2ec8ee65]{background:#fff;border:1px solid #e9e9e9;height:56px;margin-top:-8px;border:1px solid #e0e0e0;border-bottom:0;padding-top:19px;color:#3b74ff}.account-filter-item label[data-v-2ec8ee65]{margin:0 auto;font-size:16px}.content[data-v-2ec8ee65]{background-color:#fff;padding:20px}.analysis-data[data-v-2ec8ee65]{height:130px}.analysis-data-module[data-v-2ec8ee65]{padding:20px 0 20px 20px;height:111px;width:25%;border:1px solid #e9e9e9;background-color:#f9f9f9;float:left}.analysis-data-module .title[data-v-2ec8ee65]{margin-bottom:5%}.analysis-data-module .number[data-v-2ec8ee65]{font-size:24px;float:right;margin-right:25px}.analysis-echarts[data-v-2ec8ee65],.analysis-table[data-v-2ec8ee65]{padding:20px 20px 20px 20px;border:1px solid #e9e9e9}.fans-title[data-v-2ec8ee65]{padding:12px 16px;font-size:18px;color:#1a1a1a;border:1px solid #e9e9e9}.time-line[data-v-2ec8ee65]{text-align:left;width:100%}.time-line-time[data-v-2ec8ee65]{display:inline-block;vertical-align:top;margin-left:10px;color:rgba(0,0,0,.5)}.time-line-title[data-v-2ec8ee65]{display:inline-block;max-width:80%;text-align:left;white-space:pre-line;word-break:break-all;word-wrap:break-word;margin-left:30px;color:rgba(0,0,0,.8)}.fans-inter-active[data-v-2ec8ee65]{margin-top:20px;padding:20px 20px 20px 20px;border:1px solid #e9e9e9;text-align:center}[data-v-2ec8ee65] .ant-spin-nested-loading>div>.ant-spin{position:fixed!important;width:calc(100% - 550px);width:-webkit-calc(100% - 550px);top:30%;left:440px}[data-v-2ec8ee65] .dark-row{background:#fafafa}[data-v-2ec8ee65] .light-row{background:#fff}.col2[data-v-2ec8ee65]{overflow:hidden}.half[data-v-2ec8ee65]{width:50%;float:left;line-height:40px;padding:0 20px;border-top:1px solid #e9e9e9}.half-text[data-v-2ec8ee65]{float:right;word-break:break-all;max-width:calc(100% - 60px)}.time[data-v-2ec8ee65]{border:1px solid #e9e9e9;padding:0 20px}.textArea-btn[data-v-2ec8ee65]{padding:20px 0;overflow:hidden}[data-v-2ec8ee65] .ant-upload-picture-card-wrapper{display:inline}[data-v-2ec8ee65] .ant-upload.ant-upload-select-picture-card{background-color:#fff;border:0;height:32px}[data-v-2ec8ee65] .ant-upload.ant-upload-select-picture-card>.ant-upload{padding:0}.time-line[data-v-2ec8ee65]{padding:0 20px}.time-line-title2[data-v-2ec8ee65]{background:#f9f9f9;padding:10px;margin-top:5px}.preview-box[data-v-2ec8ee65]{width:104px;height:104px;margin:0 8px 8px 0;padding:8px;border:1px solid #d9d9d9;border-radius:4px;position:relative;float:left}.preview-cover[data-v-2ec8ee65],.preview-cover img[data-v-2ec8ee65]{display:block;width:100%;height:100%;-o-object-fit:cover;object-fit:cover;position:relative}.preview-cover[data-v-2ec8ee65]:before{z-index:1;width:100%;height:100%;background-color:rgba(0,0,0,.5);content:" "}.preview-cover-icon[data-v-2ec8ee65],.preview-cover[data-v-2ec8ee65]:before{position:absolute;opacity:0;-webkit-transition:all .3s;transition:all .3s}.preview-cover-icon[data-v-2ec8ee65]{top:50%;left:50%;z-index:10;white-space:nowrap;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%);cursor:pointer;color:#fff;font-size:18px}.preview-box:hover .preview-cover-icon[data-v-2ec8ee65],.preview-box:hover .preview-cover[data-v-2ec8ee65]:before{opacity:1}.upload-pic[data-v-2ec8ee65] .ant-upload-list-picture-card-container,.upload-pic[data-v-2ec8ee65] .ant-upload-list-picture-card .ant-upload-list-item,.upload-pic[data-v-2ec8ee65] .ant-upload.ant-upload-select-picture-card{width:70px;height:70px}.upload-pic[data-v-2ec8ee65] .ant-upload.ant-upload-select-picture-card{border:1px dashed #d9d9d9;border-radius:4px}.upload-pic[data-v-2ec8ee65] .ant-upload-select-picture-card i{font-size:32px;color:#999}.upload-pic[data-v-2ec8ee65] .ant-upload-select-picture-card .ant-upload-text{margin-top:8px;color:#666}',""])}}]);