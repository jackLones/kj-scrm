(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-55b33a73"],{"02a0":function(t,e,i){"use strict";var a=i("92dd"),s=i.n(a);s.a},"156b":function(t,e,i){"use strict";var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("medium-editor",{ref:"medium_editor",staticClass:"content-editable",attrs:{text:t.textAreaValueHeader,options:t.options,"custom-tag":"div"},on:{editorCreated:t.editorCreated,edit:t.changeContentInput}}),i("div",{staticStyle:{"margin-right":"15px",float:"right"}},[t._v("\n\t\t"+t._s(t.wordNum)+"/"+t._s(t.wordLimit)+"\n\t")]),t.isNickName||t.isEmoji?i("div",{staticStyle:{padding:"0 15px"}},[t._v("\n\t\t点击插入：\n\t\t"),t.isNickName?i("a-button",{staticClass:"ant-tag ant-tag-orange",attrs:{size:"small"},on:{click:function(e){return t.addTag("客户名称")}}},[t._v("客户名称\n\t\t")]):t._e(),t.isRanking?i("a-button",{staticClass:"ant-tag ant-tag-orange",attrs:{size:"small"},on:{click:function(e){return t.addTag("排行榜")}}},[t._v("排行榜\n\t\t")]):t._e(),t.isEmoji?i("a-popover",{attrs:{trigger:"click",destroyTooltipOnHide:!0},model:{value:t.emojiShow,callback:function(e){t.emojiShow=e},expression:"emojiShow"}},[i("VEmojiPicker",{attrs:{slot:"content",showSearch:!1},on:{select:t.onSelectEmoji},slot:"content"}),i("a-icon",{staticClass:"icon-btn",staticStyle:{cursor:"pointer"},attrs:{type:"smile"}})],1):t._e()],1):t._e(),i("div",{staticClass:"changeType-text"},[t._v("\n\t\t提示：火狐浏览器可能出现无法正确插入客户名称，请使用谷歌、360浏览器\n\t")])],1)},s=[],n=(i("6b54"),i("3b2b"),i("386d"),i("a481"),i("4884")),r=i.n(n),o=i("40cf"),l=i("79b5"),c={name:"index",components:{VEmojiPicker:l["a"],"medium-editor":r.a},watch:{text:{handler:function(t){this.textContent=t;var e=this.textContent.replace(/{nickname}/g," 昵称 ").replace(/{ranking}/g," 排行榜 ").replace(/{success}/g," 已完成任务量 ").replace(/{error}/g," 未完成任务量 ").replace(/{oneLevel}/g," 一阶任务剩余库存 ").replace(/{twoLevel}/g," 二阶任务剩余库存 ").replace(/{threeLevel}/g," 三阶任务剩余库存 ").replace(/\n/g,"").replace(/(<\/?a.*?>)/g,"");this.wordNum=e.length},deep:!0},textValue:{handler:function(t){this.textAreaValueHeader=t},deep:!0}},props:{text:{type:String,default:""},textValue:{type:String,default:""},isNickName:{type:Boolean,default:!0},isRanking:{type:Boolean,default:!1},isEmoji:{type:Boolean,default:!0}},data:function(){return{textContent:"",textAreaValueHeader:"",emojiShow:!1,wordNum:0,wordLimit:1e3,mediumEditor:"",options:{toolbar:!1,placeholder:{text:""},anchorPreview:!1,paste:{forcePlainText:!0,cleanPastedHTML:!0,cleanAttrs:["class","style","dir","align","width","height","face","title","code","name","id","type","span","border","open","action","method","cols","for","rel","label","icon","value","max","min","classid"]}},keydownNode:!1,keydownNodeIndex:0}},mounted:function(){var t=this;this.textContent=this.text;var e=this.textContent.replace(/{nickname}/g," 客户名称 ").replace(/{ranking}/g," 排行榜 ").replace(/\n/g,"").replace(/(<\/?a.*?>)/g,"");this.wordNum=e.length,this.textAreaValueHeader="<p>"+this.textValue+"</p>",document.addEventListener("selectionchange",(function(){t.getCursor(self)}))},methods:{initTextMsgContent:function(t){var e=this;return-1!==t.search(/[\/\[\]\(\)\|\$\*\?\+\-\_]/g)&&o["a"].wechatEmojiKey.map((function(i){var a=new RegExp(e.utils.addslashes(i),"g"),s=o["a"].getEmojiUrl(i);t=t.replace(a,'<img src="'+s+'" alt="'+i+'" height="21" width="21"/>')})),t.replace(/[\r\n|\n]/g,"<br/>")},toggleDialogEmoji:function(){this.emojiShow=!this.emojiShow},onSelectEmoji:function(t){var e=this.mediumEditor.options.ownerDocument;this.wordLimit-this.wordNum>=2&&this.insertHTMLCommand(e,t.data),this.toggleDialogEmoji()},getCursor:function(t){var e=getSelection();if(e){var i=e.anchorNode,a=!1;while(i&&i.nodeType!=i.DOCUMENT_NODE){var s=i.classList;if(s&&s.contains("content-editable")){a=!0;break}i=i.parentNode}a&&(t.lastRange=e.getRangeAt(0),t.lastNode=i)}},insertHTMLCommand:function(t,e){if("undefined"===typeof self.lastNode||!self.lastNode.classList.contains("content-editable"))return!1;var i,a,s,n,o,l,c=["insertHTML",!1,e];if(i=self.lastRange,a=i.commonAncestorContainer,r.a.MediumEditor.util.isMediumEditorElement(a)&&!a.firstChild)i.selectNode(a.appendChild(t.createTextNode("")));else if(3===a.nodeType&&0===i.startOffset&&i.endOffset===a.nodeValue.length||3!==a.nodeType&&a.innerHTML===i.toString()){while(!r.a.MediumEditor.util.isMediumEditorElement(a)&&a.parentNode&&1===a.parentNode.childNodes.length&&!r.a.MediumEditor.util.isMediumEditorElement(a.parentNode))a=a.parentNode;i.selectNode(a)}i.deleteContents(),s=t.createElement("div"),s.innerHTML=e,n=t.createDocumentFragment();while(s.firstChild)o=s.firstChild,l=n.appendChild(o);i.insertNode(n),l&&(i=i.cloneRange(),i.setStartAfter(l),i.collapse(!0),r.a.MediumEditor.selection.selectRange(t,i)),t.execCommand.callListeners&&t.execCommand.callListeners(c,!0),this.wordNum=self.lastNode.textContent.length,this.wordNum<=this.wordLimit&&(this.textAreaValueHeader=self.lastNode.innerHTML.replace(/<pre([^>]*)>/g,"<p>").replace(/<\/pre>/g,"</p>").replace(/<font([^>]*)>/g,"<p>").replace(/<\/font>/g,"</p>").replace(/<div([^>]*)>/g,"<p>").replace(/<\/div>/g,"</p>"),"undefined"==typeof this.urlId?this.textContent=self.lastNode.innerHTML.replace(/(<p><span>)?<br([^>]*)>(<\/span>)?<\/p>/g,"</p>").replace(/<p([^>]*)>/g,"").replace(/<\/p>/g,"\n").replace(/(&nbsp;)?<span contenteditable="false" class="ant-tag ant-tag-orange">客户名称<\/span>(&nbsp;)?/g,"{nickname}").replace(/(&nbsp;)?<span contenteditable="false" class="ant-tag ant-tag-orange">排行榜<\/span>(&nbsp;)?/g,"{ranking}").replace(/<br([^>]*)>/g,"\n").replace(/<span([^>]*)>/g,"").replace(/<\/span>/g,"").replace(/&nbsp;/g," ").replace(/miniprogramappid/g,"miniprogram-appid").replace(/miniprogrampath/g,"miniprogram-path"):this.textContent=self.lastNode.innerHTML.replace(/(<p><span>)?<br([^>]*)>(<\/span>)?<\/p>/g,"</p>").replace(/<br([^>]*)>/g,"\n").replace(/(&nbsp;)?<span contenteditable="false" class="ant-tag ant-tag-orange">客户名称<\/span>(&nbsp;)?/g,"{nickname}").replace(/(&nbsp;)?<span contenteditable="false" class="ant-tag ant-tag-orange">排行榜<\/span>(&nbsp;)?/g,"{ranking}").replace(/([^<p>]+)<p([^>]*)>/g,"$1\n").replace(/<p([^>]*)>/g,"").replace(/<\/p>/g,"\n").replace(/<span([^>]*)>/g,"").replace(/<\/span>/g,"").replace(/&nbsp;/g," ").replace(/<div([^>]*)>/g,"\n").replace(/<\/div>/g,"").replace(/miniprogramappid/g,"miniprogram-appid").replace(/miniprogrampath/g,"miniprogram-path")),this.mediumEditor.origElements.scrollTop=this.mediumEditor.origElements.scrollHeight;var p={currentTarget:this.mediumEditor.origElements};this.mediumEditor.events.updateInput(p.currentTarget,p),this.$emit("changeText",this.textContent,this.textAreaValueHeader)},editorCreated:function(t){this.mediumEditor=t,this.mediumEditor.subscribe("focus",this.editableFocus),this.mediumEditor.subscribe("editableKeydown",this.editableKeydown),this.mediumEditor.subscribe("editablePaste",this.editablePaste),delete self.lastRange,delete self.lastNode},editableFocus:function(t){""!==t.target.innerHTML&&"<br>"!=t.target.innerHTML&&"<p></p>"!=t.target.innerHTML||(t.target.innerHTML="<p><br/></p>")},editableKeydown:function(t){this.wordNum>=this.wordLimit&&8!=t.keyCode&&37!=t.keyCode&&38!=t.keyCode&&39!=t.keyCode&&40!=t.keyCode&&(65!=t.keyCode||!t.metaKey&&!t.ctrlKey)&&t.preventDefault(),86==t.keyCode&&(t.metaKey||t.ctrlKey),13==t.keyCode&&(this.keydownNodeIndex=0,this.getParentP4Label(self.lastRange.startContainer)),this.keydownNode=13==t.keyCode},getParentP4Label:function(t){"P"!=t.nodeName?this.getParentP4Label(t.parentNode):this.getPreviousSiblingIndex(t)},getPreviousSiblingIndex:function(t){t.previousSibling&&(this.keydownNodeIndex++,this.getPreviousSiblingIndex(t.previousSibling))},editablePaste:function(t,e){this.invlideText()},invlideText:function(){var t=this.mediumEditor.origElements,e=this.global.getRangeInfo(t,this.wordLimit),i=e.startNode,a=e.startOffset,s=e.endNode,n=e.endOffset;if("undefined"!==typeof i.nodeValue){var r=document.createRange();r.setStart(i,a),r.setEnd(s,n),r.deleteContents(),this.textAreaValueHeader=self.lastNode.innerHTML.replace(/<pre([^>]*)>/g,"<p>").replace(/<\/pre>/g,"</p>").replace(/<font([^>]*)>/g,"<p>").replace(/<\/font>/g,"</p>").replace(/<div([^>]*)>/g,"<p>").replace(/<\/div>/g,"</p>"),"undefined"==typeof this.urlId?this.textContent=self.lastNode.innerHTML.replace(/(<p><span>)?<br([^>]*)>(<\/span>)?<\/p>/g,"</p>").replace(/<p([^>]*)>/g,"").replace(/<\/p>/g,"\n").replace(/(&nbsp;)?<span contenteditable="false" class="ant-tag ant-tag-orange">客户名称<\/span>(&nbsp;)?/g,"{nickname}").replace(/(&nbsp;)?<span contenteditable="false" class="ant-tag ant-tag-orange">排行榜<\/span>(&nbsp;)?/g,"{ranking}").replace(/<br([^>]*)>/g,"\n").replace(/<span([^>]*)>/g,"").replace(/<\/span>/g,"").replace(/&nbsp;/g," ").replace(/miniprogramappid/g,"miniprogram-appid").replace(/miniprogrampath/g,"miniprogram-path"):this.textContent=self.lastNode.innerHTML.replace(/(<p><span>)?<br([^>]*)>(<\/span>)?<\/p>/g,"</p>").replace(/<br([^>]*)>/g,"\n").replace(/(&nbsp;)?<span contenteditable="false" class="ant-tag ant-tag-orange">客户名称<\/span>(&nbsp;)?/g,"{nickname}").replace(/(&nbsp;)?<span contenteditable="false" class="ant-tag ant-tag-orange">排行榜<\/span>(&nbsp;)?/g,"{ranking}").replace(/([^<p>]+)<p([^>]*)>/g,"$1\n").replace(/<p([^>]*)>/g,"").replace(/<\/p>/g,"\n").replace(/<span([^>]*)>/g,"").replace(/<\/span>/g,"").replace(/&nbsp;/g," ").replace(/<div([^>]*)>/g,"\n").replace(/<\/div>/g,"").replace(/miniprogramappid/g,"miniprogram-appid").replace(/miniprogrampath/g,"miniprogram-path"),this.wordNum=this.wordLimit}this.$emit("changeText",this.textContent,this.textAreaValueHeader)},changeContentInput:function(t){""!=t.api.origElements.innerHTML&&"<br>"!=t.api.origElements.innerHTML||(t.api.origElements.innerHTML="<p><br/></p>");var e=/href="(?![a-zA-z]+:\/\/)[^"]*/g;if(e.test(t.api.origElements.innerHTML)&&(this.$message.error("请填写正确的链接"),this.mediumEditor.execAction("unlink")),self.lastNode&&(this.wordNum=self.lastNode.textContent.length,this.wordNum<=this.wordLimit?(this.textAreaValueHeader=t.api.origElements.innerHTML.replace(/<pre([^>]*)>/g,"<p>").replace(/<\/pre>/g,"</p>").replace(/<font([^>]*)>/g,"<p>").replace(/<\/font>/g,"</p>").replace(/<div([^>]*)>/g,"<p>").replace(/<\/div>/g,"</p>"),"undefined"==typeof this.urlId?this.textContent=self.lastNode.innerHTML.replace(/(<p><span>)?<br([^>]*)>(<\/span>)?<\/p>/g,"</p>").replace(/<p([^>]*)>/g,"").replace(/<\/p>/g,"\n").replace(/(&nbsp;)?<span contenteditable="false" class="ant-tag ant-tag-orange">客户名称<\/span>(&nbsp;)?/g,"{nickname}").replace(/(&nbsp;)?<span contenteditable="false" class="ant-tag ant-tag-orange">排行榜<\/span>(&nbsp;)?/g,"{ranking}").replace(/<br([^>]*)>/g,"\n").replace(/<span([^>]*)>/g,"").replace(/<\/span>/g,"").replace(/&nbsp;/g," ").replace(/miniprogramappid/g,"miniprogram-appid").replace(/miniprogrampath/g,"miniprogram-path"):this.textContent=self.lastNode.innerHTML.replace(/(<p><span>)?<br([^>]*)>(<\/span>)?<\/p>/g,"</p>").replace(/<br([^>]*)>/g,"\n").replace(/(&nbsp;)?<span contenteditable="false" class="ant-tag ant-tag-orange">客户名称<\/span>(&nbsp;)?/g,"{nickname}").replace(/(&nbsp;)?<span contenteditable="false" class="ant-tag ant-tag-orange">排行榜<\/span>(&nbsp;)?/g,"{ranking}").replace(/([^<p>]+)<p([^>]*)>/g,"$1\n").replace(/<p([^>]*)>/g,"").replace(/<\/p>/g,"\n").replace(/<span([^>]*)>/g,"").replace(/<\/span>/g,"").replace(/&nbsp;/g," ").replace(/<div([^>]*)>/g,"\n").replace(/<\/div>/g,"").replace(/miniprogramappid/g,"miniprogram-appid").replace(/miniprogrampath/g,"miniprogram-path"),this.$emit("changeText",this.textContent,this.textAreaValueHeader)):this.invlideText(),this.keydownNode)){var i=self.lastNode.childNodes[this.keydownNodeIndex+1],a=document.createRange();a.setStart(i,0);var s=window.getSelection();s.removeAllRanges(),s.addRange(a),this.keydownNode=!1}},addTag:function(t){if("undefined"==typeof this.mediumEditor.options.ownerDocument)var e=this.mediumEditor.options.ownerDocument;else e=this.mediumEditor.options.ownerDocument;var i='<span>&nbsp;<span contenteditable="false" class="ant-tag ant-tag-orange">'+t+"</span>&nbsp;</span>";this.wordLimit-this.wordNum>=6&&this.insertHTMLCommand(e,i)}}},p=c,d=(i("abb0"),i("2877")),m=Object(d["a"])(p,a,s,!1,null,"81a399ca",null);e["a"]=m.exports},"20d6":function(t,e,i){"use strict";var a=i("5ca1"),s=i("0a49")(6),n="findIndex",r=!0;n in[]&&Array(1)[n]((function(){r=!1})),a(a.P+a.F*r,"Array",{findIndex:function(t){return s(this,t,arguments.length>1?arguments[1]:void 0)}}),i("9c6c")(n)},2211:function(t,e,i){e=t.exports=i("2350")(!1),e.push([t.i,".changeType-text[data-v-57b876e3]{background:#fff2db;border:1px solid #ffdda6;border-radius:2px;padding:7px 27px 6px 10px;font-size:12px;width:100%;margin-top:12px;max-width:673px;line-height:20px;margin-bottom:15px}.content-editable[data-v-57b876e3]{font-size:14px;line-height:21px;padding:15px;border:1px solid #d9d9d9;height:110px;overflow:auto}.content-editable[data-v-57b876e3] p{margin:0;word-break:break-word}",""])},"236f":function(t,e,i){"use strict";var a=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"group-tree1",staticStyle:{position:"absolute",width:"100%",height:"100%",overflow:"auto"}},[a("div",{staticClass:"sider-one-txt",staticStyle:{position:"absolute"},style:{left:t.getClientWidth+"px"}},[t._v("选择企业微信")]),t.corpInfo[0]?a("a-select",{staticStyle:{width:"225px",margin:"40px 20px 20px 10px",position:"absolute"},style:{left:t.getClientWidth+"px"},attrs:{showSearch:"",optionFilterProp:"children"},on:{change:t.handleChange},model:{value:t.corpId,callback:function(e){t.corpId=e},expression:"corpId"}},[t._l(t.corpInfo,(function(e){return[a("a-select-option",{attrs:{value:e.corpid}},[t._v(t._s(e.corp_name))])]}))],2):t._e(),[a("div",{staticClass:"team-add",staticStyle:{"margin-top":"80px"}},[a("span",{staticClass:"team-add-title",staticStyle:{position:"absolute"},style:{left:t.getClientWidth+"px"}},[t._v("分组管理")]),a("span",{directives:[{name:"has",rawName:"v-has",value:"channel-group-add",expression:"'channel-group-add'"}],staticStyle:{color:"#1890FF","margin-left":"5px",cursor:"pointer",position:"absolute","margin-right":"5px"},style:{right:"-"+t.getClientWidth+"px"},on:{click:function(e){return t.addGroupModal("")}}},[a("a-icon",{staticClass:"team-add-icon",attrs:{type:"plus"},on:{click:function(e){return t.addGroupModal("")}}}),t._v("添加分组")],1)]),a("div",{staticStyle:{"margin-bottom":"6px"}},[a("div",{class:0==t.id?"active":"",staticStyle:{display:"inline-block","margin-left":"30px",cursor:"pointer"},on:{click:t.clickAll}},[t._v("所有\n\t\t\t")]),a("div",{staticStyle:{display:"inline-block",color:"#C3C3C3"}},[t._v("（"+t._s(t.count)+"）")])]),a("a-tree",{staticClass:"draggable-tree",attrs:{draggable:"",treeData:t.gData},on:{dragenter:t.onDragEnter,mouseleave:t.hideMoreIcon,drop:t.onDrop,dragstart:t.dragstart,select:t.onselect},scopedSlots:t._u([{key:"custom",fn:function(e){var s=e.title,n=e.key,r=e.num,o=e.is_not_group;return[a("div",{staticStyle:{"min-width":"100%"},on:{mouseover:function(e){return t.showMoreIcon(n)}}},[a("div",{class:n==t.id?"active":"",staticStyle:{display:"inline-block"}},[t._v(t._s(s))]),a("div",{staticStyle:{display:"inline-block",color:"#C3C3C3"}},[t._v("（"+t._s(r)+"）")]),n==t.mouseOverId&&1!=o&&t.isShowPop?a("a-popover",{attrs:{placement:"right",trigger:"hover"}},[a("template",{slot:"content"},[a("div",{on:{mouseover:t.clearLeave,mouseleave:t.hideMoreIcon1}},[a("p",{directives:[{name:"has",rawName:"v-has",value:"channel-group-child-add",expression:"'channel-group-child-add'"}],staticClass:"operation",on:{click:function(e){return t.addGroupModal(n)}}},[t._v("\n\t\t\t\t\t\t\t\t\t创建子分组")]),a("p",{directives:[{name:"has",rawName:"v-has",value:"channel-group-edit",expression:"'channel-group-edit'"}],staticClass:"operation",on:{click:function(e){return t.editGroupName(n,s)}}},[t._v("\n\t\t\t\t\t\t\t\t\t编辑分组")]),t.delFlag?a("p",{directives:[{name:"has",rawName:"v-has",value:"channel-group-del",expression:"'channel-group-del'"}],staticClass:"operation2",on:{click:function(e){return t.removeGroup(n,s)}}},[t._v("删除分组")]):t._e(),t.delFlag?t._e():a("p",{directives:[{name:"has",rawName:"v-has",value:"channel-group-del",expression:"'channel-group-del'"}],staticClass:"operation1"},[t._v("删除分组")])])]),a("img",{staticStyle:{position:"absolute","margin-top":"2px","margin-right":"5px"},style:{right:"-"+t.getClientWidth+"px"},attrs:{src:i("69f5")},on:{mouseover:function(e){return t.lookOperation(n)}}})],2):t._e()],1)]}}])})],a("a-modal",{attrs:{title:t.groupTitle,destroyOnClose:!0,visible:t.visible,confirmLoading:t.confirmLoading},on:{ok:t.handleOk,cancel:t.handleCancel}},[a("a-input",{attrs:{placeholder:"请输入分组名(不得超过15个字符)",maxlength:"15"},model:{value:t.groupName,callback:function(e){t.groupName=e},expression:"groupName"}},[a("span",{attrs:{slot:"suffix"},slot:"suffix"},[a("span",[t._v(t._s(t.groupName.length))]),t._v("/15\n\t\t\t")])])],1)],2)},s=[],n=(i("c5f6"),i("96cf"),i("3b8d")),r=(i("ac6a"),i("28a5"),{data:function(){var t=localStorage.getItem("corpId")?localStorage.getItem("corpId"):"";return{corpInfo:[],corpId:t,id:"",currentId:"",parentId:"",gData:[],groupName:"",groupTitle:"",visible:!1,confirmLoading:!1,editGroupId:"",count:"",hovered:!1,delFlag:!1,mouseOverId:"",timeout:"",getClientWidth:"0",isShowPop:!0}},created:function(){var t=this;if("all"==localStorage.getItem("permissionButton"))this.isShowPop=!0;else{var e=localStorage.getItem("permissionButton").split(",");-1==e.indexOf("channel-group-child-add")&&-1==e.indexOf("channel-group-edit")&&-1==e.indexOf("channel-group-del")?this.isShowPop=!1:this.isShowPop=!0}this.$route.query.g&&(this.id=this.$route.query.g),this.$store.dispatch("getCorp",(function(e){t.corpInfo=e,t.getGroupList()}))},mounted:function(){window.document.getElementsByClassName("group-tree1")[0].addEventListener("scroll",this.handleScroll)},methods:{handleChange:function(t){var e=this;this.corpInfo.map((function(i){t==i.corpid&&(i.corp_name,e.$store.dispatch("changeCorp",i))})),this.changeBackground=t,this.getGroupList(),2==localStorage.getItem("isMasterAccount")&&this.$store.dispatch("getPermissionButton")},handleScroll:function(){this.getClientWidth=document.getElementsByClassName("group-tree1")[0].scrollLeft},clickAll:function(){this.id=0,this.$emit("changeGroupId",this.corpId,[])},lookOperation:function(t){var e=this;this.hovered=!0;var i=function t(e,i,a){e.forEach((function(e){return e.key===i?a(e):e.children?t(e.children,i,a):void 0}))};i(this.gData,t,(function(t){t.children&&t.children.length>0?e.delFlag=!1:e.delFlag=!0}))},showMoreIcon:function(t){isNaN(t)||(clearTimeout(this.timeout),this.mouseOverId=t)},clearLeave:function(){clearTimeout(this.timeout)},hideMoreIcon:function(){var t=this;this.timeout=setTimeout((function(){t.mouseOverId=""}),300)},hideMoreIcon1:function(){this.mouseOverId=""},addGroupModal:function(t){this.mouseOverId="",this.parentId=t,this.editGroupId="",this.groupName="",this.groupTitle="新建分组",this.visible=!0},editGroupName:function(t,e){this.mouseOverId="",this.parentId="",this.editGroupId=t,this.groupName=e,this.groupTitle="编辑分组",this.visible=!0},removeGroup:function(t,e){this.mouseOverId="";var i=this;i.$confirm({title:"【"+e+"】一旦删除，归属于该分组的渠道活码都将被移至【未分组】，确定删除分组吗?",okText:"确定",okType:"primary",cancelText:"取消",onOk:function(){i.delGroup(t)}})},delGroup:function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(e){var i,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.axios.post("work-contact-way/group-del",{uid:localStorage.getItem("uid"),group_id:e,corp_id:this.corpId,status:0});case 2:i=t.sent,a=i.data,0!=a.error?this.$message.error(a.error_msg):(this.$message.success("删除成功"),this.id==e?(this.id="",this.getGroupList()):this.getGroupList());case 5:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),handleOk:function(){this.addGroup()},addGroup:function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(){var e,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(this.groupName){t.next=3;break}return this.$message.warning("分组名不能为空"),t.abrupt("return",!1);case 3:if("未分组"!=this.groupName){t.next=6;break}return this.$message.warning("分组名不能为“未分组”，请更换名称！"),t.abrupt("return",!1);case 6:return t.next=8,this.axios.post("work-contact-way/group-add",{group_id:this.editGroupId,uid:localStorage.getItem("uid"),parent_id:this.parentId,title:this.groupName,corp_id:this.corpId});case 8:e=t.sent,i=e.data,0!=i.error?this.$message.error(i.error_msg):(this.editGroupId?this.$message.success("修改成功"):this.$message.success("添加成功"),this.getGroupList(),this.groupName="",this.editGroupId="",this.visible=!1);case 11:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),handleCancel:function(){this.groupName="",this.editGroupId="",this.visible=!1},getChildrenId:function(t){var e=[];e.push(t);var i=function t(e,i,a){e.forEach((function(e){return e.key===i?a(e):e.children?t(e.children,i,a):void 0}))},a=function t(e,i,a){return e.forEach((function(e,s,n){if(i.push(e.key),e.children)return t(e.children,i,a)})),a(i)};i(this.gData,t,(function(t){t.children&&a(t.children,e,(function(t){}))})),this.$emit("changeGroupId",this.corpId,e)},getGroupList:function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(){var e,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.axios.post("work-contact-way/group",{uid:localStorage.getItem("uid"),corp_id:this.corpId});case 2:e=t.sent,i=e.data,0!=i.error?(this.isLoading=!1,this.$message.error(i.error_msg)):(this.isLoading=!1,this.gData=i.data.group,this.count=i.data.count,this.id?this.getChildrenId(this.id):(this.id=0,this.$emit("changeGroupId",this.corpId,[])));case 5:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),onselect:function(t,e){t.length>0&&this.id!=t[0]&&(this.id=t[0],this.getChildrenId(this.id))},dragstart:function(t){this.currentId=t.node.eventKey},onDragEnter:function(t){this.expandedKeys=t.expandedKeys},onDrop:function(t){var e,i=this,a=t.node.eventKey,s=t.dragNode.eventKey,n=t.node.pos.split("-"),r=t.dropPosition-Number(n[n.length-1]),o=function t(e,i,a){var s="";e[0]?e.forEach((function(e,n,r){if(e.key===i)return a(e,n,r,s);e.children&&e.children.forEach((function(s,n,r){return s.key===i?a(s,n,r,e.key):s.children?t(s,i,a):void 0}))})):e.children.forEach((function(s,n,r){return s.key===i?a(s,n,r,e.key):s.children?t(s,i,a):void 0}))},l=JSON.parse(JSON.stringify(this.gData)),c="",p=[];if(o(l,s,(function(t,i,a){a.splice(i,1),e=t})),t.dropToGap)if((t.node.children||[]).length>0&&t.node.expanded&&1===r)o(l,a,(function(t,i,a,s){t.children=t.children||[],c=t.key,t.children.unshift(e),p=t.children}));else{var d,m;o(l,a,(function(t,e,i,a){d=i,c=a,m=e})),-1===r?(d.splice(m,0,e),p=d):(d.splice(m+1,0,e),p=d)}else o(l,a,(function(t,i,a,s){t.children=t.children||[],c=t.key,t.children.splice(0,0,e),p=t.children}));for(var h=!1,u=function(t){1==i.gData[t].is_not_group&&(c==i.gData[t].key?(i.$message.warning(i.gData[t].title+"不可加入其他分组！"),h=!0):""!=c&&p.forEach((function(e){e.key==i.gData[t].key&&(i.$message.warning(i.gData[t].title+"不可移入其他分组！"),h=!0)})))},g=0;g<this.gData.length;g++)u(g);if(h)return!1;var f=[];p.forEach((function(t){f.push(t.key)})),this.moveGroup(c,f,l)},moveGroup:function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(e,i,a){var s,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.axios.post("work-contact-way/group-sort",{uid:localStorage.getItem("uid"),parent_id:e,group_id:this.currentId,sort:i,corp_id:this.corpId});case 2:s=t.sent,n=s.data,0!=n.error?this.$message.error(n.error_msg):this.getGroupList();case 5:case"end":return t.stop()}}),t,this)})));function e(e,i,a){return t.apply(this,arguments)}return e}()}}),o=r,l=(i("cafa"),i("2877")),c=Object(l["a"])(o,a,s,!1,null,"0bd265d0",null);e["a"]=c.exports},2541:function(t,e,i){"use strict";var a=i("73ec"),s=i.n(a);s.a},"3a2b":function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"list"},[a("div",{attrs:{id:"components-layout-demo-basic"}},[a("a-layout",{staticStyle:{position:"relative"}},[a("a-layout-sider",[a("Menu",{ref:"menu",on:{changeGroupId:t.changeGroupId}})],1),a("a-layout",{staticClass:"fans-content scroll",staticStyle:{position:"absolute",left:"250px",top:"0",bottom:"0",right:"0"}},[a("a-layout-header",[t._v("渠道活码")]),a("a-layout-content",[a("div",{staticClass:"content-msg"},[a("p",{staticStyle:{"margin-bottom":"2px"}},[t._v("\n\t\t\t\t\t\t\t\t1、可以生成带参数的二维码名片，支持活码功能，即随机选取设置的活码成员推给用户。加企业微信为好友后，可以给微信联系人自动回复相应欢迎消息和打标签。\n\t\t\t\t\t\t\t")]),a("p",{staticStyle:{"margin-bottom":"2px"}},[t._v("\n\t\t\t\t\t\t\t\t2、每创建一个渠道活码，该码则自动进入【内容引擎】--【图片类型】--分组【渠道码-企业微信】，以素材的方式通过聊天侧边栏快速发送给客户。\n\t\t\t\t\t\t\t")]),a("p",{staticStyle:{"margin-bottom":"2px"}},[t._v("\n\t\t\t\t\t\t\t\t3、"),a("span",{staticStyle:{color:"#F56C6C"}},[t._v("受限于官方，单人类型的渠道码创建后尽量不要再修改成员，否则会造成列表中，该二维码中间的头像与配置的成员头像不一致，但是并不影响功能使用。")])]),a("p",{staticStyle:{"margin-bottom":"0px"}},[t._v("\n\t\t\t\t\t\t\t\t4、"),a("span",{staticStyle:{color:"#F56C6C"}},[t._v("如果企业在企业微信后台为相关成员配置了可用的欢迎语，使用第三方系统配置欢迎语，则均不起效，推送的还是企业微信官方的。")])])]),a("div",{staticClass:"content-hd"},[a("a-col",{staticStyle:{float:"left"}},[a("a-input",{staticStyle:{width:"180px"},attrs:{placeholder:"搜索活码名称",allowClear:""},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.selectTitle(e)}},model:{value:t.title,callback:function(e){t.title=e},expression:"title"}}),a("a-select",{staticStyle:{width:"120px","margin-left":"10px"},model:{value:t.type,callback:function(e){t.type=e},expression:"type"}},[a("a-select-option",{attrs:{value:0}},[t._v("活码类型")]),a("a-select-option",{attrs:{value:1}},[t._v("单人")]),a("a-select-option",{attrs:{value:2}},[t._v("多人")])],1),a("a-button",{staticStyle:{width:"210px",margin:"0 5px"},on:{click:function(e){return t.showDepartmentList(0,3)}}},[t.chooseNum>0?a("span",[t._v("已选择"+t._s(t.chooseUserNum1)+"名成员，"+t._s(t.chooseDepartmentNum1)+"个部门")]):a("span",[t._v("选择成员")])]),a("a-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"primary"},on:{click:t.selectTitle}},[t._v("查找")]),a("a-button",{staticStyle:{"margin-left":"10px"},on:{click:t.clearTitle}},[t._v("清空")])],1),a("a-col",{staticStyle:{float:"right","z-index":"9999"}},[a("a-button",{staticClass:"btn-primary",attrs:{icon:"reload"},on:{click:t.syncFollowUser}},[t._v("\n\t\t\t\t\t\t\t\t\t同步配置了外部联系权限的联系人\n\t\t\t\t\t\t\t\t")]),a("a-button",{directives:[{name:"has",rawName:"v-has",value:"channel-add",expression:"'channel-add'"}],staticClass:"btn-primary",attrs:{icon:"plus",type:"primary"},on:{click:function(e){return t.showModal("add")}}},[t._v("\n\t\t\t\t\t\t\t\t\t新建\n\t\t\t\t\t\t\t\t")])],1)],1),a("div",{staticClass:"content-bd"},[a("a-spin",{attrs:{tip:"Loading...",size:"large",spinning:t.isLoading}},[a("a-table",{directives:[{name:"has",rawName:"v-has",value:"channel-list",expression:"'channel-list'"}],attrs:{columns:t.columns,dataSource:t.wayList,pagination:!1,rowClassName:t.rowClassName},scopedSlots:t._u([{key:"local_path",fn:function(e,i,s){return a("span",{},[a("img",{attrs:{width:"100",height:"100",src:t.$store.state.commonUrl+e}}),a("div",{staticStyle:{"text-align":"center"}},[1==i.type?a("span",[t._v("\n\t\t\t\t\t\t\t\t\t\t\t\t单人\n\t\t\t\t\t\t\t\t\t\t\t")]):a("span",[t._v("\n\t\t\t\t\t\t\t\t\t\t\t\t多人\n\t\t\t\t\t\t\t\t\t\t\t")])])])}},{key:"select",fn:function(e,i,s){return a("span",{},[a("a-checkbox",{staticStyle:{float:"right"},on:{click:function(e){return t.changeSelectKey(i.key)}},model:{value:t.checkBoxValue[s],callback:function(e){t.$set(t.checkBoxValue,s,e)},expression:"checkBoxValue[index]"}})],1)}},{key:"type",fn:function(e){return a("span",{},[1==e?[t._v("单人")]:[t._v("多人")]],2)}},{key:"remark",fn:function(e){return a("span",{},[""==e||null==e?[t._v("--")]:[t._v(t._s(e))]],2)}},{key:"user",fn:function(e,i){return a("span",{},[a("span",{staticStyle:{color:"#1890FF",cursor:"pointer"},on:{click:function(e){return t.preview(i.id,i.type,0)}}},[t._v("预览")])])}},{key:"skip_verify",fn:function(e,i,s){return a("span",{},[0==i.skip_verify&&2==i.verify_all_day?[a("p",{staticStyle:{margin:"2px 0"}},[t._v("分时段自动通过：")]),t._l(i.verify_date,(function(e){return a("p",{staticStyle:{margin:"2px 0 2px 5px"}},[t._v("\n\t\t\t\t\t\t\t\t\t\t\t\t"+t._s(e.start_time)+"~"+t._s(e.end_time)+"\n\t\t\t\t\t\t\t\t\t\t\t")])}))]:t._e(),0==i.skip_verify&&1==i.verify_all_day?[t._v("自动通过")]:t._e(),1==i.skip_verify?[t._v("需要验证")]:t._e()],2)}},{key:"tag_ids",fn:function(e,i){return a("span",{},[i.tag_ids&&0!=i.tag_ids.length?t._e():a("span",[t._v("--")]),t._l(i.tag_ids,(function(e){return a("a-tag",{key:e.id,staticStyle:{"margin-bottom":"5px"},attrs:{color:"blue"}},[t._v(t._s(e))])}))],2)}},{key:"action",fn:function(e,i){return a("span",{},[i.add_num>0?a("a-button",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],staticClass:"actionBtn",on:{click:function(e){return t.getWayInfo(i.id)}}},[t._v("详情")]):t._e(),a("a-button",{directives:[{name:"has",rawName:"v-has",value:"channel-edit",expression:"'channel-edit'"}],staticClass:"actionBtn",on:{click:function(e){return t.modifyWay(i.id)}}},[t._v("编辑")]),a("a-button",{directives:[{name:"has",rawName:"v-has",value:"channel-client",expression:"'channel-client'"}],staticClass:"actionBtn",on:{click:function(e){return t.customer(i.id)}}},[t._v("客户")]),a("a-button",{directives:[{name:"has",rawName:"v-has",value:"channel-statistic",expression:"'channel-statistic'"}],staticClass:"actionBtn",on:{click:function(e){return t.statistics(i.id,i.title)}}},[t._v("统计")]),a("a-button",{directives:[{name:"has",rawName:"v-has",value:"channel-group-move",expression:"'channel-group-move'"}],staticClass:"actionBtn",on:{click:function(e){return t.moveQrcode(i.id,i.way_group_id,0)}}},[t._v("移动")]),a("a-button",{directives:[{name:"has",rawName:"v-has",value:"channel-down",expression:"'channel-down'"}],staticClass:"actionBtn",attrs:{"data-url":t.$store.state.commonUrl+i.local_path,"data-name":i.title},on:{click:t.downLoadWay}},[t._v("下载")]),a("a-button",{directives:[{name:"has",rawName:"v-has",value:"channel-delete",expression:"'channel-delete'"}],staticClass:"actionBtn",on:{click:function(e){return t.deleteList(i.id)}}},[t._v("删除")])],1)}}])},[a("span",{attrs:{slot:"add_num"},slot:"add_num"},[t._v("\n\t\t\t\t\t\t\t\t\t\t客户数\n\t\t\t\t\t\t\t\t\t\t"),a("a-tooltip",{attrs:{placement:"top"}},[a("template",{slot:"title"},[a("span",[t._v("去除流失客户")])]),a("a-icon",{staticStyle:{"margin-left":"5px"},attrs:{type:"question-circle"}})],2)],1)]),a("div",{directives:[{name:"show",rawName:"v-show",value:t.total>0,expression:"total > 0"},{name:"has",rawName:"v-has",value:"channel-list",expression:"'channel-list'"}],staticClass:"pagination",staticStyle:{float:"right",margin:"20px auto",height:"32px",width:"100%"}},[t.isShowChoose?a("div",{staticStyle:{height:"32px",display:"inline-block","line-height":"32px","margin-bottom":"10px"}},[a("a-checkbox",{on:{click:t.batchTypeChange},model:{value:t.batchTypeValue,callback:function(e){t.batchTypeValue=e},expression:"batchTypeValue"}}),a("a-select",{staticStyle:{width:"150px",margin:"0 5px"},attrs:{optionFilterProp:"children"},on:{change:t.changeBatchType},model:{value:t.batchType,callback:function(e){t.batchType=e},expression:"batchType"}},[a("a-select-option",{attrs:{value:"0"}},[t._v("选择当前页")]),a("a-select-option",{attrs:{value:"1"}},[t._v("选择所有")])],1),a("a-button",{directives:[{name:"has",rawName:"v-has",value:"channel-group-move",expression:"'channel-group-move'"}],staticStyle:{"margin-right":"5px"},attrs:{disabled:0==t.selectedRowKeys.length},on:{click:function(e){return t.moveQrcode(0,t.groupId.length>0?t.groupId[0]:"",1)}}},[a("a-icon",{attrs:{type:"retweet"}}),t._v("\n\t\t\t\t\t\t\t\t\t\t\t批量移动\n\t\t\t\t\t\t\t\t\t\t")],1),a("a-button",{directives:[{name:"has",rawName:"v-has",value:"channel-down",expression:"'channel-down'"}],staticStyle:{"margin-right":"5px"},attrs:{disabled:0==t.selectedRowKeys.length},on:{click:function(e){return t.downLoad()}}},[a("a-icon",{attrs:{type:"download"}}),t._v("\n\t\t\t\t\t\t\t\t\t\t\t批量下载\n\t\t\t\t\t\t\t\t\t\t")],1),a("a-popover",{attrs:{trigger:"hover"}},[a("template",{slot:"content"},[a("p",{staticClass:"batch-edit",staticStyle:{"margin-bottom":"2px","text-align":"center",cursor:"pointer"},on:{click:function(e){return t.batchEdit(1)}}},[t._v("\n\t\t\t\t\t\t\t\t\t\t\t\t\t按周期编辑")]),a("p",{staticClass:"batch-edit",staticStyle:{"margin-bottom":"2px","text-align":"center",cursor:"pointer"},on:{click:function(e){return t.batchEdit(2)}}},[t._v("\n\t\t\t\t\t\t\t\t\t\t\t\t\t按特殊时期编辑")])]),0!=t.selectedRowKeys.length?a("a-button",{directives:[{name:"has",rawName:"v-has",value:"channel-edit",expression:"'channel-edit'"}],staticStyle:{"margin-right":"5px"}},[a("a-icon",{attrs:{type:"team"}}),t._v("\n\t\t\t\t\t\t\t\t\t\t\t\t批量编辑成员\n\t\t\t\t\t\t\t\t\t\t\t")],1):t._e()],2),0==t.selectedRowKeys.length?a("a-button",{directives:[{name:"has",rawName:"v-has",value:"channel-edit",expression:"'channel-edit'"}],staticStyle:{"margin-right":"5px"},attrs:{disabled:0==t.selectedRowKeys.length}},[a("a-icon",{attrs:{type:"team"}}),t._v("\n\t\t\t\t\t\t\t\t\t\t\t批量编辑成员\n\t\t\t\t\t\t\t\t\t\t")],1):t._e(),a("a-button",{directives:[{name:"has",rawName:"v-has",value:"channel-edit",expression:"'channel-edit'"}],staticStyle:{"margin-right":"5px"},attrs:{disabled:0==t.selectedRowKeys.length},on:{click:t.setUserLimit}},[a("a-icon",{attrs:{type:"to-top"}}),t._v("\n\t\t\t\t\t\t\t\t\t\t\t批量编辑成员上限\n\t\t\t\t\t\t\t\t\t\t")],1),a("a-button",{directives:[{name:"has",rawName:"v-has",value:"channel-edit",expression:"'channel-edit'"}],staticStyle:{"margin-right":"5px"},attrs:{disabled:0==t.selectedRowKeys.length},on:{click:function(e){return t.batchEditWelCome()}}},[a("a-icon",{attrs:{type:"message"}}),t._v("\n\t\t\t\t\t\t\t\t\t\t\t批量编辑欢迎语\n\t\t\t\t\t\t\t\t\t\t")],1)],1):t._e(),a("a-pagination",{staticStyle:{"text-align":"right","margin-bottom":"20px"},attrs:{total:t.total,showSizeChanger:"",showQuickJumper:t.quickJumper,current:t.page,pageSize:t.pageSize,pageSizeOptions:["15","30","50","100"]},on:{change:t.changePage,showSizeChange:t.showSizeChange}})],1)],1)],1),a("a-modal",{attrs:{title:"扫码用户",footer:null,width:"550"},model:{value:t.usersVisible,callback:function(e){t.usersVisible=e},expression:"usersVisible"}},[a("a-spin",{attrs:{tip:"Loading...",size:"large",spinning:t.isLoading3}},[a("a-table",{attrs:{columns:t.columns2,dataSource:t.usersList2,pagination:!1,rowClassName:t.rowClassName}}),a("div",{directives:[{name:"show",rawName:"v-show",value:t.total2>0,expression:"total2 > 0"}],staticStyle:{width:"100%",height:"32px","margin-top":"20px"}},[a("div",{staticStyle:{height:"32px",float:"left","line-height":"32px"}},[t._v("\n\t\t\t\t\t\t\t\t\t\t共有\n\t\t\t\t\t\t\t\t\t\t"),a("span",{staticStyle:{color:"blue"}},[t._v(t._s(t.total2))]),t._v("个用户\n\t\t\t\t\t\t\t\t\t")]),a("div",{staticClass:"pagination",staticStyle:{height:"32px",float:"right"}},[a("a-pagination",{attrs:{total:t.total2,showSizeChanger:"",showQuickJumper:t.quickJumper2,current:t.page2,pageSize:t.pageSize2,pageSizeOptions:["15","30","50","100"]},on:{change:t.changePage2,showSizeChange:t.showSizeChange2}})],1)])],1)],1)],1)],1)],1)],1),a("a-modal",{attrs:{title:t.specialModalTitle,width:"888px"},on:{cancel:t.cancelChangeSpecialTime},model:{value:t.specialModal,callback:function(e){t.specialModal=e},expression:"specialModal"}},[a("template",{slot:"footer"},[t.batchEditType?t._e():a("a-button",{key:"back",on:{click:t.cancelChangeSpecialTime}},[t._v("关闭")]),t.batchEditType?a("a-button",{key:"back",on:{click:t.cancelChangeSpecialTime}},[t._v("取消")]):t._e(),t.batchEditType?a("a-button",{key:"submit",attrs:{type:"primary",loading:t.groupLoading},on:{click:t.handleChangeSpecialTime}},[t._v("提交\n\t\t\t\t")]):t._e()],1),a("a-form",[1==t.specialType||0==t.specialType?a("a-form-item",{attrs:{label:"企业成员","label-col":{span:2}}},[a("div",[a("a-button",{directives:[{name:"show",rawName:"v-show",value:t.batchEditType&&0==t.specialWeekList[0].mon.length||0==t.specialWeekList[0].tues.length||0==t.specialWeekList[0].wednes.length||0==t.specialWeekList[0].thurs.length||0==t.specialWeekList[0].fri.length||0==t.specialWeekList[0].satur.length||0==t.specialWeekList[0].sun.length,expression:"batchEditType && specialWeekList[0].mon.length == 0 || specialWeekList[0].tues.length == 0 || specialWeekList[0].wednes.length == 0 || specialWeekList[0].thurs.length == 0 || specialWeekList[0].fri.length == 0 || specialWeekList[0].satur.length == 0 || specialWeekList[0].sun.length == 0 "}],attrs:{icon:"plus"},on:{click:t.addSpecialTime}},[t._v("\n\t\t\t\t\t\t\t添加\n\t\t\t\t\t\t")])],1)]):t._e(),1==t.specialType||0==t.specialType?a("a-form-item",[a("a-table",{staticStyle:{"max-width":"98%","margin-left":"1%"},attrs:{columns:t.specialWeekColumns,dataSource:t.specialWeekList,pagination:!1,rowClassName:t.rowClassName},scopedSlots:t._u([{key:"mon",fn:function(e,i,s){return a("span",{},[t._l(i.mon,(function(e){return 2==t.editType?a("div",[a("div",[t._v("\n\t\t\t\t\t\t\t\t\t"+t._s(e.start_time)+"~"+t._s(e.end_time)+"\n\t\t\t\t\t\t\t\t\t"),a("a-tooltip",{attrs:{placement:"top"}},[a("template",{slot:"title"},[a("div",t._l(e.userList,(function(e){return a("span",["custom"==e.scopedSlots.title?[t._v(" "+t._s(e.title)+" ")]:t._e()],2)})),0)]),a("div",{staticStyle:{width:"80px",overflow:"hidden","text-overflow":"ellipsis","white-space":"nowrap"}},t._l(e.userList,(function(e){return a("span",["custom"==e.scopedSlots.title?[t._v(" "+t._s(e.title)+" ")]:t._e()],2)})),0)],2),a("a-tooltip",{attrs:{placement:"top"}},[a("template",{slot:"title"},[t._l(e.userList,(function(e,i){return["custom"!=e.scopedSlots.title?a("a-tag",{staticStyle:{"margin-bottom":"5px"},attrs:{color:"orange"}},[t._v(t._s(e.title))]):t._e()]}))],2),a("div",[t._l(e.userList,(function(i,s){return["custom"!=i.scopedSlots.title&&t.getThreePartyIndex(e.userList)>=s?a("a-tag",{attrs:{color:"orange"}},[t._v(t._s(i.title))]):t._e()]})),t.getPartyNum(e.userList)>3?[t._v("等"+t._s(t.getPartyNum(e.userList))+"个部门")]:t._e()],2)],2)],1)]):t._e()})),t._l(i.mon,(function(e){return 1==t.editType?a("div",[a("div",[t._v("\n\t\t\t\t\t\t\t\t\t"+t._s(e.start_time)+"~"+t._s(e.end_time)+"\n\t\t\t\t\t\t\t\t\t"),a("div",[a("a-select",{staticStyle:{width:"100%"},attrs:{showSearch:"",optionFilterProp:"children",disabled:!0,showArrow:!1,mode:1==t.editType?"default":"multiple",placeholder:"请选择企业成员"},model:{value:e.userList,callback:function(i){t.$set(e,"userList",i)},expression:"item.userList"}},t._l(t.user,(function(e,i){return a("a-select-option",{key:e.id},[t._v("\n\t\t\t\t\t\t\t\t\t\t\t\t"+t._s(e.name)+"\n\t\t\t\t\t\t\t\t\t\t\t")])})),1)],1)])]):t._e()})),0==i.mon.length?a("div",[t._v("--")]):t._e()],2)}},{key:"tues",fn:function(e,i,s){return a("span",{},[t._l(i.tues,(function(e){return 2==t.editType?a("div",[a("div",[t._v("\n\t\t\t\t\t\t\t\t\t"+t._s(e.start_time)+"~"+t._s(e.end_time)+"\n\t\t\t\t\t\t\t\t\t"),a("a-tooltip",{attrs:{placement:"top"}},[a("template",{slot:"title"},[a("div",t._l(e.userList,(function(e){return a("span",["custom"==e.scopedSlots.title?[t._v(" "+t._s(e.title)+" ")]:t._e()],2)})),0)]),a("div",{staticStyle:{width:"80px",overflow:"hidden","text-overflow":"ellipsis","white-space":"nowrap"}},t._l(e.userList,(function(e){return a("span",["custom"==e.scopedSlots.title?[t._v(" "+t._s(e.title)+" ")]:t._e()],2)})),0)],2),a("a-tooltip",{attrs:{placement:"top"}},[a("template",{slot:"title"},[t._l(e.userList,(function(e,i){return["custom"!=e.scopedSlots.title?a("a-tag",{staticStyle:{"margin-bottom":"5px"},attrs:{color:"orange"}},[t._v(t._s(e.title))]):t._e()]}))],2),a("div",[t._l(e.userList,(function(i,s){return["custom"!=i.scopedSlots.title&&t.getThreePartyIndex(e.userList)>=s?a("a-tag",{attrs:{color:"orange"}},[t._v(t._s(i.title))]):t._e()]})),t.getPartyNum(e.userList)>3?[t._v("等"+t._s(t.getPartyNum(e.userList))+"个部门")]:t._e()],2)],2)],1)]):t._e()})),t._l(i.tues,(function(e){return 1==t.editType?a("div",[a("div",[t._v("\n\t\t\t\t\t\t\t\t\t"+t._s(e.start_time)+"~"+t._s(e.end_time)+"\n\t\t\t\t\t\t\t\t\t"),a("div",[a("a-select",{staticStyle:{width:"100%"},attrs:{showSearch:"",optionFilterProp:"children",disabled:!0,showArrow:!1,mode:1==t.editType?"default":"multiple",placeholder:"请选择企业成员"},model:{value:e.userList,callback:function(i){t.$set(e,"userList",i)},expression:"item.userList"}},t._l(t.user,(function(e,i){return a("a-select-option",{key:e.id},[t._v("\n\t\t\t\t\t\t\t\t\t\t\t\t"+t._s(e.name)+"\n\t\t\t\t\t\t\t\t\t\t\t")])})),1)],1)])]):t._e()})),0==i.tues.length?a("div",[t._v("--")]):t._e()],2)}},{key:"wednes",fn:function(e,i,s){return a("span",{},[t._l(i.wednes,(function(e){return 2==t.editType?a("div",[a("div",[t._v("\n\t\t\t\t\t\t\t\t\t"+t._s(e.start_time)+"~"+t._s(e.end_time)+"\n\t\t\t\t\t\t\t\t\t"),a("a-tooltip",{attrs:{placement:"top"}},[a("template",{slot:"title"},[a("div",t._l(e.userList,(function(e){return a("span",["custom"==e.scopedSlots.title?[t._v(" "+t._s(e.title)+" ")]:t._e()],2)})),0)]),a("div",{staticStyle:{width:"80px",overflow:"hidden","text-overflow":"ellipsis","white-space":"nowrap"}},t._l(e.userList,(function(e){return a("span",["custom"==e.scopedSlots.title?[t._v(" "+t._s(e.title)+" ")]:t._e()],2)})),0)],2),a("a-tooltip",{attrs:{placement:"top"}},[a("template",{slot:"title"},[t._l(e.userList,(function(e,i){return["custom"!=e.scopedSlots.title?a("a-tag",{staticStyle:{"margin-bottom":"5px"},attrs:{color:"orange"}},[t._v(t._s(e.title))]):t._e()]}))],2),a("div",[t._l(e.userList,(function(i,s){return["custom"!=i.scopedSlots.title&&t.getThreePartyIndex(e.userList)>=s?a("a-tag",{attrs:{color:"orange"}},[t._v(t._s(i.title))]):t._e()]})),t.getPartyNum(e.userList)>3?[t._v("等"+t._s(t.getPartyNum(e.userList))+"个部门")]:t._e()],2)],2)],1)]):t._e()})),t._l(i.wednes,(function(e){return 1==t.editType?a("div",[a("div",[t._v("\n\t\t\t\t\t\t\t\t\t"+t._s(e.start_time)+"~"+t._s(e.end_time)+"\n\t\t\t\t\t\t\t\t\t"),a("div",[a("a-select",{staticStyle:{width:"100%"},attrs:{showSearch:"",optionFilterProp:"children",disabled:!0,showArrow:!1,mode:1==t.editType?"default":"multiple",placeholder:"请选择企业成员"},model:{value:e.userList,callback:function(i){t.$set(e,"userList",i)},expression:"item.userList"}},t._l(t.user,(function(e,i){return a("a-select-option",{key:e.id},[t._v("\n\t\t\t\t\t\t\t\t\t\t\t\t"+t._s(e.name)+"\n\t\t\t\t\t\t\t\t\t\t\t")])})),1)],1)])]):t._e()})),0==i.wednes.length?a("div",[t._v("--")]):t._e()],2)}},{key:"thurs",fn:function(e,i,s){return a("span",{},[t._l(i.thurs,(function(e){return 2==t.editType?a("div",[a("div",[t._v("\n\t\t\t\t\t\t\t\t\t"+t._s(e.start_time)+"~"+t._s(e.end_time)+"\n\t\t\t\t\t\t\t\t\t"),a("a-tooltip",{attrs:{placement:"top"}},[a("template",{slot:"title"},[a("div",t._l(e.userList,(function(e){return a("span",["custom"==e.scopedSlots.title?[t._v(" "+t._s(e.title)+" ")]:t._e()],2)})),0)]),a("div",{staticStyle:{width:"80px",overflow:"hidden","text-overflow":"ellipsis","white-space":"nowrap"}},t._l(e.userList,(function(e){return a("span",["custom"==e.scopedSlots.title?[t._v(" "+t._s(e.title)+" ")]:t._e()],2)})),0)],2),a("a-tooltip",{attrs:{placement:"top"}},[a("template",{slot:"title"},[t._l(e.userList,(function(e,i){return["custom"!=e.scopedSlots.title?a("a-tag",{staticStyle:{"margin-bottom":"5px"},attrs:{color:"orange"}},[t._v(t._s(e.title))]):t._e()]}))],2),a("div",[t._l(e.userList,(function(i,s){return["custom"!=i.scopedSlots.title&&t.getThreePartyIndex(e.userList)>=s?a("a-tag",{attrs:{color:"orange"}},[t._v(t._s(i.title))]):t._e()]})),t.getPartyNum(e.userList)>3?[t._v("等"+t._s(t.getPartyNum(e.userList))+"个部门")]:t._e()],2)],2)],1)]):t._e()})),t._l(i.thurs,(function(e){return 1==t.editType?a("div",[a("div",[t._v("\n\t\t\t\t\t\t\t\t\t"+t._s(e.start_time)+"~"+t._s(e.end_time)+"\n\t\t\t\t\t\t\t\t\t"),a("div",[a("a-select",{staticStyle:{width:"100%"},attrs:{showSearch:"",optionFilterProp:"children",disabled:!0,showArrow:!1,mode:1==t.editType?"default":"multiple",placeholder:"请选择企业成员"},model:{value:e.userList,callback:function(i){t.$set(e,"userList",i)},expression:"item.userList"}},t._l(t.user,(function(e,i){return a("a-select-option",{key:e.id},[t._v("\n\t\t\t\t\t\t\t\t\t\t\t\t"+t._s(e.name)+"\n\t\t\t\t\t\t\t\t\t\t\t")])})),1)],1)])]):t._e()})),0==i.thurs.length?a("div",[t._v("--")]):t._e()],2)}},{key:"fri",fn:function(e,i,s){return a("span",{},[t._l(i.fri,(function(e){return 2==t.editType?a("div",[a("div",[t._v("\n\t\t\t\t\t\t\t\t\t"+t._s(e.start_time)+"~"+t._s(e.end_time)+"\n\t\t\t\t\t\t\t\t\t"),a("a-tooltip",{attrs:{placement:"top"}},[a("template",{slot:"title"},[a("div",t._l(e.userList,(function(e){return a("span",["custom"==e.scopedSlots.title?[t._v(" "+t._s(e.title)+" ")]:t._e()],2)})),0)]),a("div",{staticStyle:{width:"80px",overflow:"hidden","text-overflow":"ellipsis","white-space":"nowrap"}},t._l(e.userList,(function(e){return a("span",["custom"==e.scopedSlots.title?[t._v(" "+t._s(e.title)+" ")]:t._e()],2)})),0)],2),a("a-tooltip",{attrs:{placement:"top"}},[a("template",{slot:"title"},[t._l(e.userList,(function(e,i){return["custom"!=e.scopedSlots.title?a("a-tag",{staticStyle:{"margin-bottom":"5px"},attrs:{color:"orange"}},[t._v(t._s(e.title))]):t._e()]}))],2),a("div",[t._l(e.userList,(function(i,s){return["custom"!=i.scopedSlots.title&&t.getThreePartyIndex(e.userList)>=s?a("a-tag",{attrs:{color:"orange"}},[t._v(t._s(i.title))]):t._e()]})),t.getPartyNum(e.userList)>3?[t._v("等"+t._s(t.getPartyNum(e.userList))+"个部门")]:t._e()],2)],2)],1)]):t._e()})),t._l(i.fri,(function(e){return 1==t.editType?a("div",[a("div",[t._v("\n\t\t\t\t\t\t\t\t\t"+t._s(e.start_time)+"~"+t._s(e.end_time)+"\n\t\t\t\t\t\t\t\t\t"),a("div",[a("a-select",{staticStyle:{width:"100%"},attrs:{showSearch:"",optionFilterProp:"children",disabled:!0,showArrow:!1,mode:1==t.editType?"default":"multiple",placeholder:"请选择企业成员"},model:{value:e.userList,callback:function(i){t.$set(e,"userList",i)},expression:"item.userList"}},t._l(t.user,(function(e,i){return a("a-select-option",{key:e.id},[t._v("\n\t\t\t\t\t\t\t\t\t\t\t\t"+t._s(e.name)+"\n\t\t\t\t\t\t\t\t\t\t\t")])})),1)],1)])]):t._e()})),0==i.fri.length?a("div",[t._v("--")]):t._e()],2)}},{key:"satur",fn:function(e,i,s){return a("span",{},[t._l(i.satur,(function(e){return 2==t.editType?a("div",[a("div",[t._v("\n\t\t\t\t\t\t\t\t\t"+t._s(e.start_time)+"~"+t._s(e.end_time)+"\n\t\t\t\t\t\t\t\t\t"),a("a-tooltip",{attrs:{placement:"top"}},[a("template",{slot:"title"},[a("div",t._l(e.userList,(function(e){return a("span",["custom"==e.scopedSlots.title?[t._v(" "+t._s(e.title)+" ")]:t._e()],2)})),0)]),a("div",{staticStyle:{width:"80px",overflow:"hidden","text-overflow":"ellipsis","white-space":"nowrap"}},t._l(e.userList,(function(e){return a("span",["custom"==e.scopedSlots.title?[t._v(" "+t._s(e.title)+" ")]:t._e()],2)})),0)],2),a("a-tooltip",{attrs:{placement:"top"}},[a("template",{slot:"title"},[t._l(e.userList,(function(e,i){return["custom"!=e.scopedSlots.title?a("a-tag",{staticStyle:{"margin-bottom":"5px"},attrs:{color:"orange"}},[t._v(t._s(e.title))]):t._e()]}))],2),a("div",[t._l(e.userList,(function(i,s){return["custom"!=i.scopedSlots.title&&t.getThreePartyIndex(e.userList)>=s?a("a-tag",{attrs:{color:"orange"}},[t._v(t._s(i.title))]):t._e()]})),t.getPartyNum(e.userList)>3?[t._v("等"+t._s(t.getPartyNum(e.userList))+"个部门")]:t._e()],2)],2)],1)]):t._e()})),t._l(i.satur,(function(e){return 1==t.editType?a("div",[a("div",[t._v("\n\t\t\t\t\t\t\t\t\t"+t._s(e.start_time)+"~"+t._s(e.end_time)+"\n\t\t\t\t\t\t\t\t\t"),a("div",[a("a-select",{staticStyle:{width:"100%"},attrs:{showSearch:"",optionFilterProp:"children",disabled:!0,showArrow:!1,mode:1==t.editType?"default":"multiple",placeholder:"请选择企业成员"},model:{value:e.userList,callback:function(i){t.$set(e,"userList",i)},expression:"item.userList"}},t._l(t.user,(function(e,i){return a("a-select-option",{key:e.id},[t._v("\n\t\t\t\t\t\t\t\t\t\t\t\t"+t._s(e.name)+"\n\t\t\t\t\t\t\t\t\t\t\t")])})),1)],1)])]):t._e()})),0==i.satur.length?a("div",[t._v("--")]):t._e()],2)}},{key:"sun",fn:function(e,i,s){return a("span",{},[t._l(i.sun,(function(e){return 2==t.editType?a("div",[a("div",[t._v("\n\t\t\t\t\t\t\t\t\t"+t._s(e.start_time)+"~"+t._s(e.end_time)+"\n\t\t\t\t\t\t\t\t\t"),a("a-tooltip",{attrs:{placement:"top"}},[a("template",{slot:"title"},[a("div",t._l(e.userList,(function(e){return a("span",["custom"==e.scopedSlots.title?[t._v(" "+t._s(e.title)+" ")]:t._e()],2)})),0)]),a("div",{staticStyle:{width:"80px",overflow:"hidden","text-overflow":"ellipsis","white-space":"nowrap"}},t._l(e.userList,(function(e){return a("span",["custom"==e.scopedSlots.title?[t._v(" "+t._s(e.title)+" ")]:t._e()],2)})),0)],2),a("a-tooltip",{attrs:{placement:"top"}},[a("template",{slot:"title"},[t._l(e.userList,(function(e,i){return["custom"!=e.scopedSlots.title?a("a-tag",{staticStyle:{"margin-bottom":"5px"},attrs:{color:"orange"}},[t._v(t._s(e.title))]):t._e()]}))],2),a("div",[t._l(e.userList,(function(i,s){return["custom"!=i.scopedSlots.title&&t.getThreePartyIndex(e.userList)>=s?a("a-tag",{attrs:{color:"orange"}},[t._v(t._s(i.title))]):t._e()]})),t.getPartyNum(e.userList)>3?[t._v("等"+t._s(t.getPartyNum(e.userList))+"个部门")]:t._e()],2)],2)],1)]):t._e()})),t._l(i.sun,(function(e){return 1==t.editType?a("div",[a("div",[t._v("\n\t\t\t\t\t\t\t\t\t"+t._s(e.start_time)+"~"+t._s(e.end_time)+"\n\t\t\t\t\t\t\t\t\t"),a("div",[a("a-select",{staticStyle:{width:"100%"},attrs:{showSearch:"",optionFilterProp:"children",disabled:!0,showArrow:!1,mode:1==t.editType?"default":"multiple",placeholder:"请选择企业成员"},model:{value:e.userList,callback:function(i){t.$set(e,"userList",i)},expression:"item.userList"}},t._l(t.user,(function(e,i){return a("a-select-option",{key:e.id},[t._v("\n\t\t\t\t\t\t\t\t\t\t\t\t"+t._s(e.name)+"\n\t\t\t\t\t\t\t\t\t\t\t")])})),1)],1)])]):t._e()})),0==i.sun.length?a("div",[t._v("--")]):t._e()],2)}}],null,!1,2840323372)},[a("span",{attrs:{slot:"mon"},slot:"mon"},[t._v("\n\t\t\t\t\t\t\t\t周一"),a("a-icon",{directives:[{name:"show",rawName:"v-show",value:0!=t.specialWeekList[0].mon.length&&t.batchEditType,expression:"specialWeekList[0].mon.length != 0 && batchEditType"}],staticStyle:{cursor:"pointer"},attrs:{type:"edit"},on:{click:function(e){return t.editSpecialTime("mon")}}})],1),a("span",{attrs:{slot:"tues"},slot:"tues"},[t._v("\n\t\t\t\t\t\t\t\t周二"),a("a-icon",{directives:[{name:"show",rawName:"v-show",value:0!=t.specialWeekList[0].tues.length&&t.batchEditType,expression:"specialWeekList[0].tues.length != 0 && batchEditType"}],staticStyle:{cursor:"pointer"},attrs:{type:"edit"},on:{click:function(e){return t.editSpecialTime("tues")}}})],1),a("span",{attrs:{slot:"wednes"},slot:"wednes"},[t._v("\n\t\t\t\t\t\t\t\t周三"),a("a-icon",{directives:[{name:"show",rawName:"v-show",value:0!=t.specialWeekList[0].wednes.length&&t.batchEditType,expression:"specialWeekList[0].wednes.length != 0 && batchEditType"}],staticStyle:{cursor:"pointer"},attrs:{type:"edit"},on:{click:function(e){return t.editSpecialTime("wednes")}}})],1),a("span",{attrs:{slot:"thurs"},slot:"thurs"},[t._v("\n\t\t\t\t\t\t\t\t周四"),a("a-icon",{directives:[{name:"show",rawName:"v-show",value:0!=t.specialWeekList[0].thurs.length&&t.batchEditType,expression:"specialWeekList[0].thurs.length != 0 && batchEditType"}],staticStyle:{cursor:"pointer"},attrs:{type:"edit"},on:{click:function(e){return t.editSpecialTime("thurs")}}})],1),a("span",{attrs:{slot:"fri"},slot:"fri"},[t._v("\n\t\t\t\t\t\t\t\t周五"),a("a-icon",{directives:[{name:"show",rawName:"v-show",value:0!=t.specialWeekList[0].fri.length&&t.batchEditType,expression:"specialWeekList[0].fri.length != 0 && batchEditType"}],staticStyle:{cursor:"pointer"},attrs:{type:"edit"},on:{click:function(e){return t.editSpecialTime("fri")}}})],1),a("span",{attrs:{slot:"satur"},slot:"satur"},[t._v("\n\t\t\t\t\t\t\t\t周六"),a("a-icon",{directives:[{name:"show",rawName:"v-show",value:0!=t.specialWeekList[0].satur.length&&t.batchEditType,expression:"specialWeekList[0].satur.length != 0 && batchEditType"}],staticStyle:{cursor:"pointer"},attrs:{type:"edit"},on:{click:function(e){return t.editSpecialTime("satur")}}})],1),a("span",{attrs:{slot:"sun"},slot:"sun"},[t._v("\n\t\t\t\t\t\t\t\t周日"),a("a-icon",{directives:[{name:"show",rawName:"v-show",value:0!=t.specialWeekList[0].sun.length&&t.batchEditType,expression:"specialWeekList[0].sun.length != 0 && batchEditType"}],staticStyle:{cursor:"pointer"},attrs:{type:"edit"},on:{click:function(e){return t.editSpecialTime("sun")}}})],1)])],1):t._e(),2==t.specialType||0==t.specialType?a("a-form-item",{attrs:{label:"特殊时期","label-col":{span:2},"wrapper-col":{span:21}}},[a("a-switch",{attrs:{disabled:0==t.specialType,checked:1==t.specialTime},on:{change:t.changeSpecilTime}}),a("span",{staticStyle:{color:"#F56C6C","margin-left":"10px"}},[t._v("如遇到国家节假日或是企业自身重要日子，在特殊时期内，需要更换活码成员")]),1==t.specialTime?a("div",{staticClass:"content-msg"},[a("p",{staticStyle:{"margin-bottom":"2px","line-height":"20px"}},[t._v("\n\t\t\t\t\t\t\t1、系统默认生成一条每日24小时（00:00~00:00）数据，当时间点不在所新增的时段内，客户扫码后，添加的是“24小时”的企业成员。\n\t\t\t\t\t\t")]),a("p",{staticStyle:{"margin-bottom":"2px","line-height":"20px",color:"#FF562D"}},[t._v("\n\t\t\t\t\t\t\t2、批量设置企业成员（含指定成员+部门成员【动态数据】）后，若您当前所勾选的渠道活码当中，已开启过“员工添加客户上限“，则对新设置的指定成员，添加客户上限默认为100人，而因受官方限制，无法对动态部门的员工设置添加好友上限。\n\t\t\t\t\t\t")]),2==t.editType&&t.batchEditType?a("p",{staticStyle:{"margin-bottom":"0px","line-height":"20px",color:"#FF562D"}},[t._v("\n\t\t\t\t\t\t\t3、渠道活码设置部门时，请确保设置的部门具有外部联系人权限，否则会导致该区间段的活码设置失效。\n\t\t\t\t\t\t")]):t._e()]):t._e(),t._l(t.specialDateList,(function(e,i){return 1==t.specialTime?a("div",{class:i!=t.specialDateList.length-1?"border-dashed":"",staticStyle:{padding:"10px 10px 40px 10px"}},[a("label",[t._v("特殊时期"+t._s(i+1)+"：")]),a("a-range-picker",{staticStyle:{width:"200px"},attrs:{allowClear:!1,disabled:!t.batchEditType,disabledDate:t.disabledDateDay,value:e.specialDate,defaultValue:[t.moment(new Date,"YYYY-MM-DD"),t.moment(new Date,"YYYY-MM-DD")],format:"YYYY-MM-DD"},on:{change:function(e){return t.changeSpecialDate(e,i)}}}),t._l(e.time,(function(s,n){return a("div",{staticStyle:{"margin-left":"78px"}},[a("a-time-picker",{staticStyle:{width:"100px"},attrs:{disabled:0==n||!t.batchEditType,allowClear:!1,minuteStep:60,defaultOpenValue:t.moment("00:00","HH:mm"),format:"HH:mm"},on:{change:function(e){return t.changeSpecialStartTime(e,i,n)}},model:{value:s.startTime,callback:function(e){t.$set(s,"startTime",e)},expression:"time.startTime"}}),t._v("\n\t\t\t\t\t\t\t~\n\t\t\t\t\t\t\t"),a("a-time-picker",{staticStyle:{width:"100px"},attrs:{disabled:0==n||!t.batchEditType,allowClear:!1,minuteStep:60,defaultOpenValue:t.moment("00:00","HH:mm"),format:"HH:mm"},on:{change:function(e){return t.changeSpecialEndTime(e,i,n)}},model:{value:s.endTime,callback:function(e){t.$set(s,"endTime",e)},expression:"time.endTime"}}),2==t.editType&&t.batchEditType?a("a-button",{staticStyle:{"margin-left":"10px"},on:{click:function(e){return t.showDepartmentList(i,0,n)}}},[t._v("\n\t\t\t\t\t\t\t\t选择企业成员\n\t\t\t\t\t\t\t")]):t._e(),2==t.editType?a("span",{staticStyle:{"margin-left":"10px"}},[a("a-tooltip",{attrs:{placement:"top"}},[a("template",{slot:"title"},[a("div",t._l(s.userList,(function(e){return a("span",["custom"==e.scopedSlots.title?[t._v(" "+t._s(e.title)+" ")]:t._e()],2)})),0)]),s.userList.length>0?a("span",{staticStyle:{display:"inline-block",width:"80px",overflow:"hidden","text-overflow":"ellipsis","white-space":"nowrap","vertical-align":"middle"}},t._l(s.userList,(function(e){return a("span",["custom"==e.scopedSlots.title?[t._v(" "+t._s(e.title)+" ")]:t._e()],2)})),0):t._e()],2),a("a-tooltip",{attrs:{placement:"top"}},[a("template",{slot:"title"},[t._l(s.userList,(function(e,i){return["custom"!=e.scopedSlots.title?a("a-tag",{staticStyle:{"margin-bottom":"5px"},attrs:{color:"orange"}},[t._v(t._s(e.title))]):t._e()]}))],2),s.userList.length>0?a("span",{staticStyle:{display:"inline-block","vertical-align":"middle"}},[t._l(s.userList,(function(e,i){return["custom"!=e.scopedSlots.title&&t.getThreePartyIndex(s.userList)>=i?a("a-tag",{attrs:{color:"orange"}},[t._v(t._s(e.title))]):t._e()]})),t.getPartyNum(s.userList)>3?[t._v("等"+t._s(t.getPartyNum(s.userList))+"个部门")]:t._e()],2):t._e()],2)],1):t._e(),2==t.editType&&(!t.batchEditType&&s.party&&s.party.length>0||t.batchEditType)?a("div",[2==t.editType&&n==e.time.length-1?a("a-tooltip",{attrs:{placement:"top"}},[a("template",{slot:"title"},[t._v("\n\t\t\t\t\t\t\t\t\t\t选择企业成员和选择部门必须选择一个。选择部门后，扫码后最多可添加当前部门的企业成员。如原来某部门是5人，后新增1人，则客户最多可添加该部门6位企业成员\n\t\t\t\t\t\t\t\t\t")]),a("span",{staticStyle:{"margin-left":"10px"}},[a("a-icon",{attrs:{type:"question-circle"}})],1)],2):t._e()],1):t._e(),1==t.editType&&t.specialModal?a("chooseStaffSelect",{ref:"staffSelect",refInFor:!0,staticStyle:{width:"160px","margin-left":"10px",display:"inline-block"},attrs:{index:i,index2:n,callback:t.selectStaffCallback,disabled:t.staffSelectDisabled}}):t._e(),a("div",[a("span",{directives:[{name:"show",rawName:"v-show",value:t.batchEditType&&n==e.time.length-1,expression:"batchEditType && timeIndex == item.time.length - 1"}],staticStyle:{color:"#1890FF",cursor:"pointer","margin-right":"10px"},on:{click:function(e){return t.addSpecialDateTimeList(i,n)}}},[t._v("\n\t\t\t\t\t\t\t\t\t 添加\n\t\t\t\t\t\t\t\t")]),a("span",{directives:[{name:"show",rawName:"v-show",value:0!=n&&t.batchEditType,expression:"timeIndex != 0 && batchEditType"}],staticStyle:{cursor:"pointer",color:"#F56C6C"},on:{click:function(e){return t.deleteSpecialDateTimeList(i,n)}}},[t._v("删除\n\t\t\t\t\t\t\t\t")])])],1)})),a("div",{staticStyle:{float:"right","margin-right":"240px"}},[a("a-button",{directives:[{name:"show",rawName:"v-show",value:i==t.specialDateList.length-1&&t.batchEditType,expression:"index == specialDateList.length - 1 && batchEditType"}],staticStyle:{height:"26px",width:"94px",padding:"0px 5px","margin-right":"10px","font-size":"12px"},attrs:{type:"primary",icon:"plus"},on:{click:function(e){return t.addSpecialDate(i)}}},[t._v("\n\t\t\t\t\t\t\t\t添加时期\n\t\t\t\t\t\t\t")]),a("a-icon",{directives:[{name:"show",rawName:"v-show",value:(0!=i||t.specialDateList.length>1)&&t.batchEditType,expression:"(index != 0 || specialDateList.length > 1) && batchEditType"}],staticStyle:{color:"#F56C6C","margin-left":"10px"},attrs:{type:"delete"},on:{click:function(e){return t.deleteSpecialDate(i)}}})],1)],2):t._e()}))],2):t._e(),0==t.specialType?a("a-form-item",{attrs:{label:"员工添加上限","label-col":{span:3},"wrapper-col":{span:21}}},[a("a-switch",{attrs:{checked:2==t.is_limit,disabled:!0}}),a("span",{staticStyle:{color:"#F56C6C"}},[t._v("（因受官方限制，无法对动态部门的员工设置添加好友上限，只可针对指定活码成员进行设置）")]),2==t.is_limit?a("a-table",{staticStyle:{"max-width":"100%"},attrs:{scroll:{y:450},columns:t.previewUserColumns,dataSource:t.userLimitList,pagination:!1,rowClassName:t.rowClassName},scopedSlots:t._u([{key:"limit",fn:function(e,i,s){return a("span",{},[a("a-input",{staticStyle:{width:"120px"},attrs:{disabled:!0},model:{value:i.limit,callback:function(e){t.$set(i,"limit",e)},expression:"record.limit"}})],1)}}],null,!1,1175417459)}):t._e()],1):t._e(),0==t.specialType&&2==t.is_limit?a("a-form-item",{staticStyle:{"padding-bottom":"20px"},attrs:{label:"备用员工","label-col":{span:3},"wrapper-col":{span:21}}},[2==t.editType?[a("a-button",{staticStyle:{"margin-left":"10px"},attrs:{disabled:!0}},[0==t.spare_employee.length?[t._v("选择企业成员")]:[t._v("已选择"+t._s(t.spare_employee.length)+"名员工")]],2),a("a-tooltip",{attrs:{placement:"right"}},[a("template",{slot:"title"},t._l(t.spare_employee,(function(e){return a("span",[t._v(t._s(e.name)+" ")])})),0),2==t.editType?a("span",{staticStyle:{display:"inline-block","max-width":"300px",overflow:"hidden","white-space":"nowrap","text-overflow":"ellipsis","vertical-align":"middle","margin-left":"10px"}},t._l(t.spare_employee,(function(e){return a("span",[t._v(t._s(e.name)+" ")])})),0):t._e()],2)]:t._e(),a("chooseStaffSelect",{directives:[{name:"show",rawName:"v-show",value:1==t.editType,expression:"editType == 1"}],ref:"staffSelect4",staticStyle:{width:"160px","margin-left":"10px",display:"inline-block"},attrs:{index:t.index,index2:-1,disabled:!0,callback:t.selectStaffCallback}})],2):t._e()],1)],2),a("a-modal",{attrs:{title:"修改成员上限",width:"888px"},on:{cancel:t.cancelChangeLimit},model:{value:t.limitVisible,callback:function(e){t.limitVisible=e},expression:"limitVisible"}},[a("template",{slot:"footer"},[a("a-button",{key:"back",on:{click:t.cancelChangeLimit}},[t._v("取消")]),a("a-button",{key:"submit",attrs:{type:"primary",loading:t.groupLoading},on:{click:t.handleChangeLimit}},[t._v("提交\n\t\t\t\t")])],1),a("a-spin",{attrs:{tip:"Loading...",size:"large",spinning:t.limitLoading}},[a("a-table",{staticStyle:{"max-width":"100%"},attrs:{scroll:{y:450},columns:t.limitUserColumns,dataSource:t.user_limit,pagination:!1,rowClassName:t.rowClassName},scopedSlots:t._u([{key:"is_limit",fn:function(e,i,s){return a("span",{},[a("a-switch",{attrs:{checked:2==i.is_limit},on:{change:function(e){return t.changeIsCeiling(s)}}})],1)}},{key:"user_limit",fn:function(e,i,s){return a("span",{},[2==i.is_limit&&i.user_limit.length>0?a("div",t._l(i.user_limit,(function(e,i){return a("div",{staticStyle:{margin:"5px 0"}},[a("span",{staticStyle:{width:"75px",display:"inline-block"}},[t._v(t._s(e.name))]),a("a-input-number",{staticClass:"brush-input",staticStyle:{"margin-left":"10px"},attrs:{min:1,max:99999999,placeholder:"请填写上限人数",formatter:t.limitDecimals,parse:t.limitDecimals},nativeOn:{input:function(e){return function(e){return t.inputLimitNum(e,s,i)}(e)}},model:{value:e.limit,callback:function(i){t.$set(e,"limit",i)},expression:"limit.limit"}})],1)})),0):t._e(),0==i.user_limit.length||1==i.is_limit?a("span",[t._v("--")]):t._e()])}},{key:"spare_employee",fn:function(e,i,s){return a("span",{},[2==i.is_limit&&2==i.type?a("a-button",{staticStyle:{"margin-left":"10px"},on:{click:function(e){return t.showDepartmentList(s,2)}}},[t._v("\n\t\t\t\t\t\t\t选择企业成员\n\t\t\t\t\t\t")]):t._e(),2==i.is_limit&&i.spare_employee.length>0&&2==i.type?a("div",[a("a-tooltip",{attrs:{placement:"left"}},[a("template",{slot:"title"},[a("div",t._l(i.spare_employee,(function(e){return a("span",["custom"==e.scopedSlots.title?[t._v(" "+t._s(e.title)+" ")]:t._e()],2)})),0)]),i.spare_employee.length>0?a("span",{staticStyle:{display:"inline-block","max-width":"80px",overflow:"hidden","text-overflow":"ellipsis","white-space":"nowrap","vertical-align":"middle",margin:"0 10px"}},t._l(i.spare_employee,(function(e){return a("span",["custom"==e.scopedSlots.title?[t._v(" "+t._s(e.title)+" ")]:t._e()],2)})),0):t._e()],2)],1):t._e(),a("chooseStaffSelect",{directives:[{name:"show",rawName:"v-show",value:1==i.type&&2==i.is_limit,expression:"record.type == 1 && record.is_limit == 2"}],ref:"staffSelect3"+s,staticStyle:{width:"160px","margin-left":"10px",display:"inline-block"},attrs:{index:s,index2:-1,callback:t.selectStaffCallback}}),2!=i.is_limit?a("span",[t._v("--")]):t._e()],1)}}])})],1)],2),a("a-modal",{attrs:{title:"编辑欢迎语",width:"888px"},on:{ok:t.handleWelcome,cancel:t.handleCancleWelcome},model:{value:t.welComeVisible,callback:function(e){t.welComeVisible=e},expression:"welComeVisible"}},[a("a-form-item",{attrs:{label:"扫码推送","label-col":{span:3},"wrapper-col":{span:21}}},[a("a-switch",{attrs:{checked:t.pushValue},on:{change:t.changeStatus}}),t._v("\n\t\t\t\t（关闭后，客户扫该渠道活码，依然可对该客户自动打标签，但仅收到系统的【欢迎语】消息）\n\t\t\t")],1),t.pushValue?a("a-tabs",{staticStyle:{"margin-top":"20px"},attrs:{tabPosition:"left","default-active-key":"1"}},[a("a-tab-pane",{key:"1",attrs:{tab:"通用欢迎语"}},[t.pushValue?a("a-form-item",{staticStyle:{"padding-bottom":"20px"},attrs:{label:"","label-col":{span:3},"wrapper-col":{span:21}}},[a("div",{staticClass:"wrap left-sider-content"},[a("img",{staticStyle:{width:"250px","border-bottom":"1px solid #E2D6D6"},attrs:{src:i("eb7e"),alt:""}}),a("div",{staticClass:"msg_content_body"},[t.textAreaValueHeader&&t.pushValue?a("div",{staticClass:"mt"},[a("a-avatar",{staticStyle:{"margin-right":"10px",float:"left"},attrs:{src:"https://zos.alipayobjects.com/rmsportal/ODTLcjxAfvqbxHnVXCYX.png",size:36}}),a("span",{staticClass:"item-info msg_content_txt",staticStyle:{display:"block","white-space":"pre-wrap","word-wrap":"break-word"},domProps:{innerHTML:t._s(t.textAreaValueHeader)}})],1):t._e(),t.img&&t.pushValue?a("div",{staticClass:"mt"},[a("a-avatar",{staticStyle:{"margin-right":"10px",float:"left","object-fit":"cover"},attrs:{src:"https://zos.alipayobjects.com/rmsportal/ODTLcjxAfvqbxHnVXCYX.png",size:36}}),a("img",{staticStyle:{width:"150px","border-radius":"4px"},attrs:{src:t.commonUrl+t.img,alt:""}})],1):t._e(),t.modalUrlOk&&t.pushValue?a("div",{staticClass:"mt"},[a("a-avatar",{staticStyle:{"margin-right":"10px",float:"left"},attrs:{src:"https://zos.alipayobjects.com/rmsportal/ODTLcjxAfvqbxHnVXCYX.png",size:36}}),a("div",{staticClass:"item-info msg_content_txt"},[a("p",{staticClass:"url-title"},[t._v(t._s(t.inputTitle))]),a("div",{staticStyle:{overflow:"hidden"}},[a("div",{staticClass:"url-text"},[t._v(t._s(t.digest))]),a("img",{staticStyle:{float:"right",width:"64px",height:"64px","object-fit":"cover"},attrs:{src:t.commonUrl+t.msgUrl,alt:""}})])])],1):t._e(),t.modalAppletOk&&t.pushValue?a("div",{staticClass:"mt"},[a("a-avatar",{staticStyle:{"margin-right":"10px",float:"left"},attrs:{src:"https://zos.alipayobjects.com/rmsportal/ODTLcjxAfvqbxHnVXCYX.png",size:36}}),a("div",{staticClass:"item-info msg_content_txt"},[a("p",{staticClass:"applet-title"},[t._v(t._s(t.appletInputTitle))]),a("img",{staticStyle:{width:"100%","object-fit":"cover"},attrs:{src:t.commonUrl+t.appletUrl,alt:""}})])],1):t._e()])]),a("div",{staticClass:"pull-right fl",staticStyle:{"margin-left":"20px"}},[t.pushValue?a("editor",{key:t.editorKey,attrs:{text:t.textContent,textValue:t.textAreaValueHeader,isEmoji:!1},on:{changeText:t.changeText}}):t._e(),t.img||t.modalUrlOk||t.modalAppletOk?t._e():a("div",{staticStyle:{margin:"10px 0",cursor:"pointer"}},[a("a-popover",{attrs:{trigger:"click"},model:{value:t.popVisible,callback:function(e){t.popVisible=e},expression:"popVisible"}},[a("template",{slot:"content"},[a("div",{staticClass:"popover-menu",on:{click:function(e){return t.choosePic(1)}}},[a("a-icon",{attrs:{type:"picture"}}),a("p",[t._v("图片")])],1),a("div",{staticClass:"popover-menu  popover-menu1",on:{click:function(e){return t.chooseUrl(2)}}},[a("a-icon",{attrs:{type:"link"}}),a("p",[t._v("图文")])],1),a("div",{staticClass:"popover-menu popover-menu2",on:{click:function(e){return t.chooseApplet(3)}}},[a("MyIcon",{attrs:{type:"icon-miniapp"}}),a("p",[t._v("小程序")])],1)]),a("a-icon",{attrs:{type:"plus"}}),t._v("\n\t\t\t\t\t\t\t\t\t添加图片/图文/小程序消息\n\t\t\t\t\t\t\t\t")],2)],1),t.img?a("div",{staticStyle:{margin:"10px 0",cursor:"pointer",float:"left"},on:{click:function(e){return t.choosePic(1)}}},[a("a-icon",{staticStyle:{"margin-right":"7px"},attrs:{type:"picture"}}),t._v("\n\t\t\t\t\t\t\t\t"+t._s(t.fileName)+"\n\t\t\t\t\t\t\t")],1):t._e(),t.modalUrlOk?a("div",{staticStyle:{margin:"10px 0",cursor:"pointer",float:"left","max-width":"200px",overflow:"hidden",height:"40px","text-overflow":"ellipsis","white-space":"nowrap"},on:{click:function(e){return t.chooseUrl(2)}}},[a("a-icon",{staticStyle:{"margin-right":"7px"},attrs:{type:"link"}}),t._v("\n\t\t\t\t\t\t\t\t"+t._s(t.inputTitle)+"\n\t\t\t\t\t\t\t")],1):t._e(),t.modalAppletOk?a("div",{staticStyle:{margin:"10px 0",cursor:"pointer",float:"left","max-width":"200px",overflow:"hidden",height:"40px","text-overflow":"ellipsis","white-space":"nowrap"},on:{click:function(e){return t.chooseApplet(3)}}},[a("MyIcon",{attrs:{type:"icon-miniapp"}}),t._v("\n\t\t\t\t\t\t\t\t"+t._s(t.appletInputTitle)+"\n\t\t\t\t\t\t\t")],1):t._e(),t.img||t.modalUrlOk||t.modalAppletOk?a("div",{staticStyle:{float:"left",margin:"10px 0 0 10px",cursor:"pointer"},on:{click:t.deleteWelcome}},[a("a-icon",{attrs:{type:"close"}})],1):t._e()],1)]):t._e()],1),a("a-tab-pane",{key:"2",attrs:{tab:"周期欢迎语","force-render":""}},[t.pushValue?a("a-form-item",{staticStyle:{"padding-bottom":"20px"},attrs:{label:"","label-col":{span:3},"wrapper-col":{span:21}}},[a("a-switch",{attrs:{checked:2==t.is_welcome_week},on:{change:t.changeIsWelcomeWeek}}),2==t.is_welcome_week?a("a-tabs",{staticStyle:{width:"640px","margin-top":"5px","background-color":"#FFF","padding-bottom":"20px"},attrs:{size:"large",tabPosition:"top",type:"editable-card"},on:{edit:t.addWelcomeWeek},model:{value:t.weekTabKey,callback:function(e){t.weekTabKey=e},expression:"weekTabKey"}},t._l(t.welcome_week_list,(function(e,s){return a("a-tab-pane",{key:s,staticStyle:{"margin-left":"20px",height:"575px","overflow-y":"auto"},attrs:{tab:"欢迎语"+(s+1)}},[a("div",{staticStyle:{margin:"10px 0"}},[a("label",[t._v("选择周期：")]),t._l(t.weekList,(function(i){return[t.isDisabled(s,i.key)?t._e():a("a-checkable-tag",{staticStyle:{cursor:"pointer"},attrs:{checked:e.date.indexOf(i.key)>-1},on:{change:function(e){return t.selctedWeekDay(s,i.key)}}},[t._v("\n\t\t\t\t\t\t\t\t\t\t\t"+t._s(i.name)+"\n\t\t\t\t\t\t\t\t\t\t")]),t.isDisabled(s,i.key)?a("a-button",{staticStyle:{padding:"0 7px","margin-right":"5px",height:"26px","line-height":"25px","font-size":"12px"},attrs:{disabled:!0}},[t._v("\n\t\t\t\t\t\t\t\t\t\t\t"+t._s(i.name)+"\n\t\t\t\t\t\t\t\t\t\t")]):t._e()]}))],2),t._l(e.time,(function(n,r){return a("div",{staticStyle:{"margin-left":"40px"}},[a("div",{staticStyle:{"margin-bottom":"10px"}},[a("label",{staticStyle:{"margin-right":"10px"}},[t._v("时间段"+t._s(r+1)+"：")]),a("a-time-picker",{attrs:{allowClear:!1,minuteStep:60,format:"HH:mm"},model:{value:n.startTime,callback:function(e){t.$set(n,"startTime",e)},expression:"item.startTime"}}),t._v("\n\t\t\t\t\t\t\t\t\t\t~\n\t\t\t\t\t\t\t\t\t\t"),a("a-time-picker",{attrs:{allowClear:!1,minuteStep:60,format:"HH:mm"},model:{value:n.endTime,callback:function(e){t.$set(n,"endTime",e)},expression:"item.endTime"}}),e.time.length>1?a("a-icon",{staticStyle:{color:"#FF562D","margin-left":"10px"},attrs:{type:"delete"},on:{click:function(e){return t.deleteWelcomeWeekTime(s,r)}}}):t._e()],1),a("div",{staticClass:"wrap left-sider-content"},[a("img",{staticStyle:{width:"250px","border-bottom":"1px solid #E2D6D6"},attrs:{src:i("eb7e"),alt:""}}),a("div",{staticClass:"msg_content_body"},[n.content.textAreaValueHeader&&t.pushValue?a("div",{staticClass:"mt"},[a("a-avatar",{staticStyle:{"margin-right":"10px",float:"left"},attrs:{src:"https://zos.alipayobjects.com/rmsportal/ODTLcjxAfvqbxHnVXCYX.png",size:36}}),a("span",{staticClass:"item-info msg_content_txt",staticStyle:{display:"block","white-space":"pre-wrap","word-wrap":"break-word"},domProps:{innerHTML:t._s(n.content.textAreaValueHeader)}})],1):t._e(),n.content.img&&t.pushValue?a("div",{staticClass:"mt"},[a("a-avatar",{staticStyle:{"margin-right":"10px",float:"left","object-fit":"cover"},attrs:{src:"https://zos.alipayobjects.com/rmsportal/ODTLcjxAfvqbxHnVXCYX.png",size:36}}),a("img",{staticStyle:{width:"150px","border-radius":"4px"},attrs:{src:t.commonUrl+n.content.img,alt:""}})],1):t._e(),n.content.modalUrlOk&&t.pushValue?a("div",{staticClass:"mt"},[a("a-avatar",{staticStyle:{"margin-right":"10px",float:"left"},attrs:{src:"https://zos.alipayobjects.com/rmsportal/ODTLcjxAfvqbxHnVXCYX.png",size:36}}),a("div",{staticClass:"item-info msg_content_txt"},[a("p",{staticClass:"url-title"},[t._v("\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t"+t._s(n.content.inputTitle))]),a("div",{staticStyle:{overflow:"hidden"}},[a("div",{staticClass:"url-text"},[t._v("\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t"+t._s(n.content.digest)+"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t")]),a("img",{staticStyle:{float:"right",width:"64px",height:"64px","object-fit":"cover"},attrs:{src:t.commonUrl+n.content.msgUrl,alt:""}})])])],1):t._e(),n.content.modalAppletOk&&t.pushValue?a("div",{staticClass:"mt"},[a("a-avatar",{staticStyle:{"margin-right":"10px",float:"left"},attrs:{src:"https://zos.alipayobjects.com/rmsportal/ODTLcjxAfvqbxHnVXCYX.png",size:36}}),a("div",{staticClass:"item-info msg_content_txt"},[a("p",{staticClass:"applet-title"},[t._v("\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t"+t._s(n.content.appletInputTitle))]),a("img",{staticStyle:{width:"100%","object-fit":"cover"},attrs:{src:t.commonUrl+n.content.appletUrl,alt:""}})])],1):t._e()])]),a("div",{staticClass:"pull-right fl",staticStyle:{"margin-left":"30px"}},[a("cEditor",{key:t.weekKey,attrs:{text:n.content.textContent,type:1,index:s,idx:r,textValue:n.content.textAreaValueHeader,isEmoji:!1},on:{changeText:t.changeText1}}),n.content.img||n.content.modalUrlOk||n.content.modalAppletOk?t._e():a("div",{staticStyle:{margin:"10px 0",cursor:"pointer"}},[a("a-popover",{attrs:{trigger:"click"},model:{value:n.content.popVisible,callback:function(e){t.$set(n.content,"popVisible",e)},expression:"item.content.popVisible"}},[a("template",{slot:"content"},[a("div",{staticClass:"popover-menu",on:{click:function(e){return t.choosePic(1,1,s,r)}}},[a("a-icon",{attrs:{type:"picture"}}),a("p",[t._v("图片")])],1),a("div",{staticClass:"popover-menu  popover-menu1",on:{click:function(e){return t.chooseUrl(2,1,s,r)}}},[a("a-icon",{attrs:{type:"link"}}),a("p",[t._v("图文")])],1),a("div",{staticClass:"popover-menu popover-menu2",on:{click:function(e){return t.chooseApplet(3,1,s,r)}}},[a("MyIcon",{attrs:{type:"icon-miniapp"}}),a("p",[t._v("小程序")])],1)]),a("a-icon",{attrs:{type:"plus"}}),t._v("\n\t\t\t\t\t\t\t\t\t\t\t\t添加图片/图文/小程序消息\n\t\t\t\t\t\t\t\t\t\t\t")],2)],1),n.content.img?a("div",{staticStyle:{margin:"10px 0",cursor:"pointer",float:"left"},on:{click:function(e){return t.choosePic(1,1,s,r)}}},[a("a-icon",{staticStyle:{"margin-right":"7px"},attrs:{type:"picture"}}),t._v("\n\t\t\t\t\t\t\t\t\t\t\t"+t._s(n.content.fileName)+"\n\t\t\t\t\t\t\t\t\t\t")],1):t._e(),n.content.modalUrlOk?a("div",{staticStyle:{margin:"10px 0",cursor:"pointer",float:"left","max-width":"200px",overflow:"hidden",height:"40px","text-overflow":"ellipsis","white-space":"nowrap"},on:{click:function(e){return t.chooseUrl(2,1,s,r)}}},[a("a-icon",{staticStyle:{"margin-right":"7px"},attrs:{type:"link"}}),t._v("\n\t\t\t\t\t\t\t\t\t\t\t"+t._s(n.content.inputTitle)+"\n\t\t\t\t\t\t\t\t\t\t")],1):t._e(),n.content.modalAppletOk?a("div",{staticStyle:{margin:"10px 0",cursor:"pointer",float:"left","max-width":"200px",overflow:"hidden",height:"40px","text-overflow":"ellipsis","white-space":"nowrap"},on:{click:function(e){return t.chooseApplet(3,1,s,r)}}},[a("MyIcon",{attrs:{type:"icon-miniapp"}}),t._v("\n\t\t\t\t\t\t\t\t\t\t\t"+t._s(n.content.appletInputTitle)+"\n\t\t\t\t\t\t\t\t\t\t")],1):t._e(),n.content.img||n.content.modalUrlOk||n.content.modalAppletOk?a("div",{staticStyle:{float:"left",margin:"10px 0 0 10px",cursor:"pointer"},on:{click:function(e){return t.deleteWelcome(1,s,r)}}},[a("a-icon",{attrs:{type:"close"}})],1):t._e()],1),a("a-divider")],1)})),a("div",{staticStyle:{"margin-left":"40px"}},[a("a-button",{on:{click:function(e){return t.addWelcomeWeekTime(s)}}},[t._v("添加时间段")])],1)],2)})),1):t._e()],1):t._e()],1),a("a-tab-pane",{key:"3",attrs:{tab:"特殊时期欢迎语"}},[t.pushValue?a("a-form-item",{staticStyle:{"padding-bottom":"20px"},attrs:{label:"","label-col":{span:3},"wrapper-col":{span:21}}},[a("a-switch",{attrs:{checked:2==t.is_welcome_date},on:{change:t.changeIsWelcomeDate}}),2==t.is_welcome_date?a("a-tabs",{staticStyle:{width:"640px","margin-top":"5px","background-color":"#FFF","padding-bottom":"20px"},attrs:{size:"large",tabPosition:"top",type:"editable-card"},on:{edit:t.addWelcomeDate},model:{value:t.dateTabKey,callback:function(e){t.dateTabKey=e},expression:"dateTabKey"}},t._l(t.welcome_date_list,(function(e,s){return a("a-tab-pane",{key:s,staticStyle:{"margin-left":"20px",height:"575px","overflow-y":"auto"},attrs:{tab:"欢迎语"+(s+1)}},[a("div",{staticStyle:{margin:"10px 0"}},[a("label",[t._v("时期"+t._s(s+1)+"：")]),a("a-range-picker",{staticStyle:{width:"270px"},attrs:{allowClear:!1,disabledDate:t.disabledDateDay,format:"YYYY-MM-DD"},model:{value:e.date,callback:function(i){t.$set(e,"date",i)},expression:"week.date"}})],1),t._l(e.time,(function(n,r){return a("div",{staticStyle:{"margin-left":"40px"}},[a("div",{staticStyle:{"margin-bottom":"10px"}},[a("label",{staticStyle:{"margin-right":"10px"}},[t._v("时间段"+t._s(r+1)+"：")]),a("a-time-picker",{attrs:{allowClear:!1,minuteStep:60,format:"HH:mm"},model:{value:n.startTime,callback:function(e){t.$set(n,"startTime",e)},expression:"item.startTime"}}),t._v("\n\t\t\t\t\t\t\t\t\t\t~\n\t\t\t\t\t\t\t\t\t\t"),a("a-time-picker",{attrs:{allowClear:!1,minuteStep:60,format:"HH:mm"},model:{value:n.endTime,callback:function(e){t.$set(n,"endTime",e)},expression:"item.endTime"}}),e.time.length>1?a("a-icon",{staticStyle:{color:"#FF562D","margin-left":"10px"},attrs:{type:"delete"},on:{click:function(e){return t.deleteWelcomeDateTime(s,r)}}}):t._e()],1),a("div",{staticClass:"wrap left-sider-content"},[a("img",{staticStyle:{width:"250px","border-bottom":"1px solid #E2D6D6"},attrs:{src:i("eb7e"),alt:""}}),a("div",{staticClass:"msg_content_body"},[n.content.textAreaValueHeader&&t.pushValue?a("div",{staticClass:"mt"},[a("a-avatar",{staticStyle:{"margin-right":"10px",float:"left"},attrs:{src:"https://zos.alipayobjects.com/rmsportal/ODTLcjxAfvqbxHnVXCYX.png",size:36}}),a("span",{staticClass:"item-info msg_content_txt",staticStyle:{display:"block","white-space":"pre-wrap","word-wrap":"break-word"},domProps:{innerHTML:t._s(n.content.textAreaValueHeader)}})],1):t._e(),n.content.img&&t.pushValue?a("div",{staticClass:"mt"},[a("a-avatar",{staticStyle:{"margin-right":"10px",float:"left","object-fit":"cover"},attrs:{src:"https://zos.alipayobjects.com/rmsportal/ODTLcjxAfvqbxHnVXCYX.png",size:36}}),a("img",{staticStyle:{width:"150px","border-radius":"4px"},attrs:{src:t.commonUrl+n.content.img,alt:""}})],1):t._e(),n.content.modalUrlOk&&t.pushValue?a("div",{staticClass:"mt"},[a("a-avatar",{staticStyle:{"margin-right":"10px",float:"left"},attrs:{src:"https://zos.alipayobjects.com/rmsportal/ODTLcjxAfvqbxHnVXCYX.png",size:36}}),a("div",{staticClass:"item-info msg_content_txt"},[a("p",{staticClass:"url-title"},[t._v("\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t"+t._s(n.content.inputTitle))]),a("div",{staticStyle:{overflow:"hidden"}},[a("div",{staticClass:"url-text"},[t._v("\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t"+t._s(n.content.digest)+"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t")]),a("img",{staticStyle:{float:"right",width:"64px",height:"64px","object-fit":"cover"},attrs:{src:t.commonUrl+n.content.msgUrl,alt:""}})])])],1):t._e(),n.content.modalAppletOk&&t.pushValue?a("div",{staticClass:"mt"},[a("a-avatar",{staticStyle:{"margin-right":"10px",float:"left"},attrs:{src:"https://zos.alipayobjects.com/rmsportal/ODTLcjxAfvqbxHnVXCYX.png",size:36}}),a("div",{staticClass:"item-info msg_content_txt"},[a("p",{staticClass:"applet-title"},[t._v("\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t"+t._s(n.content.appletInputTitle))]),a("img",{staticStyle:{width:"100%","object-fit":"cover"},attrs:{src:t.commonUrl+n.content.appletUrl,alt:""}})])],1):t._e()])]),a("div",{staticClass:"pull-right fl",staticStyle:{"margin-left":"30px"}},[a("cEditor",{key:t.dateKey,attrs:{text:n.content.textContent,type:2,index:s,idx:r,textValue:n.content.textAreaValueHeader,isEmoji:!1},on:{changeText:t.changeText1}}),n.content.img||n.content.modalUrlOk||n.content.modalAppletOk?t._e():a("div",{staticStyle:{margin:"10px 0",cursor:"pointer"}},[a("a-popover",{attrs:{trigger:"click"},model:{value:n.content.popVisible,callback:function(e){t.$set(n.content,"popVisible",e)},expression:"item.content.popVisible"}},[a("template",{slot:"content"},[a("div",{staticClass:"popover-menu",on:{click:function(e){return t.choosePic(1,2,s,r)}}},[a("a-icon",{attrs:{type:"picture"}}),a("p",[t._v("图片")])],1),a("div",{staticClass:"popover-menu  popover-menu1",on:{click:function(e){return t.chooseUrl(2,2,s,r)}}},[a("a-icon",{attrs:{type:"link"}}),a("p",[t._v("图文")])],1),a("div",{staticClass:"popover-menu popover-menu2",on:{click:function(e){return t.chooseApplet(3,2,s,r)}}},[a("MyIcon",{attrs:{type:"icon-miniapp"}}),a("p",[t._v("小程序")])],1)]),a("a-icon",{attrs:{type:"plus"}}),t._v("\n\t\t\t\t\t\t\t\t\t\t\t\t添加图片/图文/小程序消息\n\t\t\t\t\t\t\t\t\t\t\t")],2)],1),n.content.img?a("div",{staticStyle:{margin:"10px 0",cursor:"pointer",float:"left"},on:{click:function(e){return t.choosePic(1,2,s,r)}}},[a("a-icon",{staticStyle:{"margin-right":"7px"},attrs:{type:"picture"}}),t._v("\n\t\t\t\t\t\t\t\t\t\t\t"+t._s(n.content.fileName)+"\n\t\t\t\t\t\t\t\t\t\t")],1):t._e(),n.content.modalUrlOk?a("div",{staticStyle:{margin:"10px 0",cursor:"pointer",float:"left","max-width":"200px",overflow:"hidden",height:"40px","text-overflow":"ellipsis","white-space":"nowrap"},on:{click:function(e){return t.chooseUrl(2,2,s,r)}}},[a("a-icon",{staticStyle:{"margin-right":"7px"},attrs:{type:"link"}}),t._v("\n\t\t\t\t\t\t\t\t\t\t\t"+t._s(n.content.inputTitle)+"\n\t\t\t\t\t\t\t\t\t\t")],1):t._e(),n.content.modalAppletOk?a("div",{staticStyle:{margin:"10px 0",cursor:"pointer",float:"left","max-width":"200px",overflow:"hidden",height:"40px","text-overflow":"ellipsis","white-space":"nowrap"},on:{click:function(e){return t.chooseApplet(3,2,s,r)}}},[a("MyIcon",{attrs:{type:"icon-miniapp"}}),t._v("\n\t\t\t\t\t\t\t\t\t\t\t"+t._s(n.content.appletInputTitle)+"\n\t\t\t\t\t\t\t\t\t\t")],1):t._e(),n.content.img||n.content.modalUrlOk||n.content.modalAppletOk?a("div",{staticStyle:{float:"left",margin:"10px 0 0 10px",cursor:"pointer"},on:{click:function(e){return t.deleteWelcome(2,s,r)}}},[a("a-icon",{attrs:{type:"close"}})],1):t._e()],1),a("a-divider")],1)})),a("div",{staticStyle:{"margin-left":"40px"}},[a("a-button",{on:{click:function(e){return t.addWelcomeDateTime(s)}}},[t._v("添加时间段")])],1)],2)})),1):t._e()],1):t._e()],1)],1):t._e()],1),a("a-modal",{attrs:{visible:t.specialTimeVisible,title:t.specialTimeTitle,width:"888px",confirmLoading:t.addSpecialTimeLoading},on:{ok:t.handleSpecialTime,cancel:t.handleCancelSpecialTime}},[a("div",{staticClass:"content-msg"},[a("p",{staticStyle:{"margin-bottom":"2px","line-height":"20px"}},[t._v("\n\t\t\t\t\t1、系统默认生成一条每日24小时（00:00~00:00）数据，当时间点不在所新增的时段内，客户扫码后，添加的是“24小时”的企业成员。\n\t\t\t\t")]),a("p",{staticStyle:{"margin-bottom":"2px","line-height":"20px",color:"#FF562D"}},[t._v("\n\t\t\t\t\t2、批量设置企业成员（含指定成员+部门成员【动态数据】）后，若您当前所勾选的渠道活码当中，已开启过“员工添加客户上限“，则对新设置的指定成员，添加客户上限默认为100人，而因受官方限制，无法对动态部门的员工设置添加好友上限。\n\t\t\t\t")]),2==t.editType?a("p",{staticStyle:{"margin-bottom":"0px","line-height":"20px",color:"#FF562D"}},[t._v("\n\t\t\t\t\t3、渠道活码设置部门时，请确保设置的部门具有外部联系人权限，否则会导致该区间段的活码设置失效。\n\t\t\t\t")]):t._e()]),t.specialTimeVisible?a("a-form-item",{attrs:{label:"固定时段","label-col":{span:3},"wrapper-col":{span:21}}},[a("div",t._l(t.specialTimeList,(function(e,i){return a("div",[a("a-time-picker",{staticStyle:{width:"100px"},attrs:{disabled:0==i,allowClear:!1,minuteStep:60,defaultOpenValue:t.moment("00:00","HH:mm"),format:"HH:mm"},on:{change:function(e){return t.changeStartTime(e,i)}},model:{value:e.startTime,callback:function(i){t.$set(e,"startTime",i)},expression:"item.startTime"}}),t._v("\n\t\t\t\t\t\t~\n\t\t\t\t\t\t"),a("a-time-picker",{staticStyle:{width:"100px"},attrs:{disabled:0==i,allowClear:!1,minuteStep:60,defaultOpenValue:t.moment("00:00","HH:mm"),format:"HH:mm"},on:{change:function(e){return t.changeEndTime(e,i)}},model:{value:e.endTime,callback:function(i){t.$set(e,"endTime",i)},expression:"item.endTime"}}),2==t.editType?a("a-tooltip",{attrs:{placement:"top"}},[a("template",{slot:"title"},t._l(e.userList,(function(e){return a("span",[t._v(t._s(e.title)+" ")])})),0),a("span",{staticStyle:{display:"inline-block","max-width":"190px","vertical-align":"bottom",overflow:"hidden","text-overflow":"ellipsis","white-space":"nowrap","margin-left":"10px"}},t._l(e.userList,(function(e){return a("span",[t._v(t._s(e.title)+" ")])})),0)],2):t._e(),1==t.editType?a("chooseStaffSelect",{ref:"staffSelect2",refInFor:!0,staticStyle:{width:"160px","margin-left":"10px",display:"inline-block"},attrs:{index:i,index2:0,callback:t.selectStaffCallback2}}):t._e(),2==t.editType?a("a-button",{staticStyle:{"margin-left":"10px"},on:{click:function(e){return t.showDepartmentList(i,1)}}},[t._v("\n\t\t\t\t\t\t\t选择企业成员\n\t\t\t\t\t\t")]):t._e(),2==t.editType&&e.userList.length+e.party.length>0?a("span",{staticStyle:{"margin-left":"5px"}},[t._v("已选择"+t._s(t.getUserNum(e.userList))+"名成员，"+t._s(e.party.length)+"个部门")]):t._e(),2==t.editType&&i==t.specialTimeList.length-1?a("a-tooltip",{attrs:{placement:"top"}},[a("template",{slot:"title"},[t._v("\n\t\t\t\t\t\t\t\t选择企业成员和选择部门必须选择一个。选择部门后，扫码后最多可添加当前部门的企业成员。如原来某部门是5人，后新增1人，则客户最多可添加该部门6位企业成员\n\t\t\t\t\t\t\t")]),a("span",{staticStyle:{"margin-left":"10px"}},[a("a-icon",{attrs:{type:"question-circle"}})],1)],2):t._e(),a("div",[a("span",{directives:[{name:"show",rawName:"v-show",value:i==t.specialTimeList.length-1,expression:"index == specialTimeList.length - 1"}],staticStyle:{color:"#1890FF",cursor:"pointer","margin-right":"10px"},on:{click:function(e){return t.addTime(i)}}},[t._v("添加")]),a("span",{directives:[{name:"show",rawName:"v-show",value:0!=i,expression:"index != 0"}],staticStyle:{cursor:"pointer",color:"#F56C6C"},on:{click:function(e){return t.deleteTime(i)}}},[t._v("删除\n\t\t\t\t\t\t\t")])])],1)})),0)]):t._e(),a("a-form-item",{attrs:{label:"适用周期","label-col":{span:3},"wrapper-col":{span:21}}},[t._l(t.weekList,(function(e,i){return[a("a-checkable-tag",{staticStyle:{cursor:"pointer"},on:{change:function(i){return t.changeWeekDay(e.key)}},model:{value:t.weekChecked[i],callback:function(e){t.$set(t.weekChecked,i,e)},expression:"weekChecked[index]"}},[t._v("\n\t\t\t\t\t\t"+t._s(e.name)+"\n\t\t\t\t\t")])]}))],2)],1),a("a-modal",{attrs:{title:"分组移动",width:"720px"},on:{cancel:t.cancelChangeGroup},model:{value:t.groupVisible,callback:function(e){t.groupVisible=e},expression:"groupVisible"}},[a("template",{slot:"footer"},[a("a-button",{key:"back",on:{click:t.cancelChangeGroup}},[t._v("取消")]),a("a-button",{key:"submit",attrs:{type:"primary",loading:t.groupLoading},on:{click:t.handleChangeGroup}},[t._v("提交\n\t\t\t\t")])],1),a("div",{staticClass:"group-tree",staticStyle:{height:"270px",width:"100%","overflow-x":"auto"}},[a("a-tree",{staticClass:"draggable-tree",attrs:{treeData:t.groupList},on:{select:t.onselect},scopedSlots:t._u([{key:"custom",fn:function(e){var i=e.title,s=e.key;return[a("div",{staticStyle:{width:"100%"},attrs:{dataKey:s}},[a("span",{class:s==t.group?"active1":""},[t._v(t._s(i))])])]}}])})],1)],2),a("chooseDepartment",{ref:"user",attrs:{show:t.showModalDepartment,is_from:7,chooseNum:t.chooseDepartmentNum,callback:t.modalVisibleChange3}}),a("chooseMsg",{attrs:{show:t.showModal3,type:t.typeValue2,news_type:t.news_type,callback:t.modalVisibleChange2,sketchType:"1",comefrom:t.comefrom,chooseId:t.chooseId}}),a("chooseMinipro",{attrs:{show:t.showModalMinipro,type:t.typeValue2,callback:t.modalVisibleChange2,chooseId:t.chooseId}}),a("a-modal",{attrs:{visible:t.showModalUrl,title:"图文",width:"720px",confirmLoading:t.confirmLoading},on:{ok:t.handleUrl,cancel:t.handleCancelUrl}},[a("a-form-item",{attrs:{label:"添加方式","label-col":{span:3},"wrapper-col":{span:21}}},[a("a-radio-group",{attrs:{name:"radioGroup"},on:{change:function(e){return t.changeSketchAddType()}},model:{value:t.sketchAddType,callback:function(e){t.sketchAddType=e},expression:"sketchAddType"}},[a("a-radio",{attrs:{value:1}},[t._v("新建")]),a("a-radio",{attrs:{value:0}},[t._v("导入")])],1)],1),1==t.sketchAddType?[a("a-form-item",{directives:[{name:"show",rawName:"v-show",value:0==t.closeShowModal3,expression:"closeShowModal3==false"}],attrs:{"label-col":{span:3},"wrapper-col":{span:21}}},[a("template",{slot:"label"},[a("span",{staticStyle:{color:"red"}},[t._v("*")]),t._v("图片封面\n\t\t\t\t\t")]),a("div",{staticClass:"upload-wrap",on:{click:function(e){return t.choosePic(2,t.welcomeType,t.weekIndex,t.wTimeIndex)}}},[a("a-icon",{staticClass:"upload-plus",attrs:{type:"plus"}})],1)],2),a("a-form-item",{directives:[{name:"show",rawName:"v-show",value:t.closeShowModal3,expression:"closeShowModal3"}],attrs:{"label-col":{span:3},"wrapper-col":{span:21}}},[a("template",{slot:"label"},[a("span",{staticStyle:{color:"red"}},[t._v("*")]),t._v("图片封面\n\t\t\t\t\t")]),a("div",{staticClass:"upload-wrap"},[a("img",{staticStyle:{"max-width":"100%","max-height":"100%","margin-left":"50%","margin-top":"50%",transform:"translate(-50%, -50%)"},attrs:{src:t.commonUrl+t.msgUrl1,alt:""}})]),a("span",{staticStyle:{color:"blue",cursor:"pointer",margin:"67px 0 0px 10px",float:"left"},on:{click:function(e){return t.choosePic(2,t.welcomeType,t.weekIndex,t.wTimeIndex)}}},[t._v("重新上传")])],2),a("a-form-item",{attrs:{"label-col":{span:3},"wrapper-col":{span:21}}},[a("template",{slot:"label"},[a("span",{staticStyle:{color:"red"}},[t._v("*")]),t._v("填写标题\n\t\t\t\t\t")]),a("a-input",{attrs:{maxLength:32},model:{value:t.inputTitle1,callback:function(e){t.inputTitle1=e},expression:"inputTitle1"}},[a("span",{attrs:{slot:"suffix"},slot:"suffix"},[a("span",[t._v(t._s(t.inputTitle1.length))]),t._v("/32\n\t                  ")])])],2),a("a-form-item",{attrs:{label:"添加描述","label-col":{span:3},"wrapper-col":{span:21}}},[a("a-textarea",{staticStyle:{resize:"none"},attrs:{placeholder:"填写图文描述",rows:4,maxLength:128},model:{value:t.digest1,callback:function(e){t.digest1=e},expression:"digest1"}}),a("div",{staticStyle:{float:"right"}},[a("span",[t._v(t._s(t.digest1.length))]),t._v("/128\n\t\t\t\t\t")])],1),a("a-form-item",{attrs:{label:"素材同步","label-col":{span:3},"wrapper-col":{span:21}}},[a("a-radio-group",{attrs:{disabled:1==t.disabledSync1},on:{change:function(e){return t.changeMaterialSync()}},model:{value:t.materialSync1,callback:function(e){t.materialSync1=e},expression:"materialSync1"}},[a("a-radio",{attrs:{value:0}},[t._v("不同步")]),a("a-radio",{style:{display:1==t.materialSync1?"block":""},attrs:{value:1}},[t._v("\n\t\t\t\t\t\t\t同步至【内容引擎】\n\t\t\t\t\t\t\t"),a("div",{directives:[{name:"show",rawName:"v-show",value:1==t.materialSync1,expression:"materialSync1 == 1"}],staticStyle:{"margin-top":"10px"}},[t._v("\n\t\t\t\t\t\t\t\t选择分组：\n\t\t\t\t\t\t\t\t"),a("a-tree-select",{staticStyle:{width:"225px"},attrs:{dropdownStyle:{maxHeight:"150px",overflow:"auto"},treeData:t.groupList1,placeholder:"Please select",treeDefaultExpandAll:""},model:{value:t.selectGroupId1,callback:function(e){t.selectGroupId1=e},expression:"selectGroupId1"}})],1)])],1)],1),a("a-form-item",{attrs:{"label-col":{span:3},"wrapper-col":{span:21}}},[a("template",{slot:"label"},[a("span",{staticStyle:{color:"red"}},[t._v("*")]),t._v("点击跳转\n\t\t\t\t\t")]),a("a-input",{staticStyle:{"margin-bottom":"10px"},attrs:{placeholder:"请输入跳转链接，且必须以http://或https://开头"},model:{value:t.url1,callback:function(e){t.url1=e},expression:"url1"}})],2)]:t._e(),0==t.sketchAddType?[a("a-form-item",{directives:[{name:"show",rawName:"v-show",value:""==t.material_id11,expression:"material_id11 == ''"}],attrs:{"label-col":{span:3},"wrapper-col":{span:21}}},[a("template",{slot:"label"},[a("span",{staticStyle:{color:"red"}},[t._v("*")]),t._v("图文\n\t\t\t\t\t")]),a("div",{staticClass:"upload-border",on:{click:function(e){return t.openShowModal()}}},[a("a-icon",{staticClass:"upload-plus",attrs:{type:"plus"}}),a("span",[t._v("选择图文")])],1)],2),a("a-form-item",{directives:[{name:"show",rawName:"v-show",value:t.material_id11,expression:"material_id11"}],attrs:{"label-col":{span:3},"wrapper-col":{span:21}}},[a("template",{slot:"label"},[a("span",{staticStyle:{color:"red"}},[t._v("*")]),t._v("图文\n\t\t\t\t\t")]),a("div",{staticClass:"upload-border",on:{click:function(e){return t.openShowModal()}}},[a("img",{attrs:{src:i("088b"),alt:""}}),t._v("\n\t\t\t\t\t\t已选择1条图文\n\t\t\t\t\t\t"),a("p",{staticStyle:{color:"blue",margin:"14px"},on:{click:function(e){return t.openShowModal()}}},[t._v("\n\t\t\t\t\t\t\t[修改]")])])],2)]:t._e()],2),a("a-modal",{attrs:{visible:t.showModalApplet,title:"小程序",width:"720px",confirmLoading:t.confirmLoading},on:{ok:t.handleApplet,cancel:t.handleCancelApplet}},[a("a-form-item",{attrs:{label:"添加方式","label-col":{span:3},"wrapper-col":{span:21}}},[a("a-radio-group",{attrs:{name:"radioGroup"},on:{change:function(e){return t.changeMiniproAddType()}},model:{value:t.miniproAddType,callback:function(e){t.miniproAddType=e},expression:"miniproAddType"}},[a("a-radio",{attrs:{value:1}},[t._v("新建")]),a("a-radio",{attrs:{value:0}},[t._v("导入")])],1)],1),1==t.miniproAddType?[a("div",{staticClass:"content-msg1"},[a("p",{staticStyle:{"margin-bottom":"2px","line-height":"20px"}},[t._v("\n\t\t\t\t\t\t在企业微信里发送小程序（必须在微信公众平台通过审核和发布的），请先将其关联到企业微信（\n\t\t\t\t\t\t"),a("a",{attrs:{target:"_blank",href:"https://support.qq.com/products/104790/faqs/61672"}},[t._v("\n\t\t\t\t\t\t\t如何关联")]),t._v("\n\t\t\t\t\t\t），再到本系统添加该小程序，否则发送失败，客户接收不到。\n\t\t\t\t\t")]),a("p",{staticStyle:{"margin-bottom":"2px","line-height":"20px"}},[t._v("\n\t\t\t\t\t\t如果没有微信小程序，请前往微信小程序进行注册。\n\t\t\t\t\t\t"),a("a",{attrs:{target:"_blank",href:"https://support.qq.com/products/104790/faqs/61672"}},[t._v("\n\t\t\t\t\t\t\t立即前往\n\t\t\t\t\t\t")])]),a("p",{staticStyle:{"margin-bottom":"0px",color:"#FF562D"}},[t._v("\n\t\t\t\t\t\t小程序路径必须以“.html”结尾。\n\t\t\t\t\t")])]),a("a-form-item",{directives:[{name:"show",rawName:"v-show",value:0==t.closeModalApplet,expression:"closeModalApplet==false"}],attrs:{"label-col":{span:3},"wrapper-col":{span:21}}},[a("template",{slot:"label"},[a("span",{staticStyle:{color:"red"}},[t._v("*")]),t._v("图片封面\n\t\t\t\t\t")]),a("div",{staticClass:"upload-wrap",staticStyle:{display:"inline-block"},on:{click:function(e){return t.choosePic(3,t.welcomeType,t.weekIndex,t.wTimeIndex)}}},[a("a-icon",{staticClass:"upload-plus",attrs:{type:"plus"}})],1),a("span",{staticStyle:{display:"inline-block","margin-top":"64px"}},[t._v("（上传图片不超过1M，尺寸必须为1080*864像素，支持jpg/jpeg/png格式）")])],2),a("a-form-item",{directives:[{name:"show",rawName:"v-show",value:t.closeModalApplet,expression:"closeModalApplet"}],attrs:{"label-col":{span:3},"wrapper-col":{span:21}}},[a("template",{slot:"label"},[a("span",{staticStyle:{color:"red"}},[t._v("*")]),t._v("图片封面\n\t\t\t\t\t")]),a("div",{staticClass:"upload-wrap"},[a("img",{staticStyle:{"max-width":"100%","max-height":"100%","margin-left":"50%","margin-top":"50%",transform:"translate(-50%, -50%)"},attrs:{src:t.commonUrl+t.appletUrl1,alt:""}})]),a("span",{staticStyle:{color:"blue",cursor:"pointer",margin:"67px 0 0px 10px",float:"left"},on:{click:function(e){return t.choosePic(3,t.welcomeType,t.weekIndex,t.wTimeIndex)}}},[t._v("重新上传")])],2),a("a-form-item",{attrs:{"label-col":{span:3},"wrapper-col":{span:21}}},[a("template",{slot:"label"},[a("span",{staticStyle:{color:"red"}},[t._v("*")]),t._v("填写标题\n\t\t\t\t\t")]),a("a-input",{attrs:{maxLength:12,placeholder:"请填写小程序标题（4-12个字符）"},on:{blur:function(e){return t.checkout(t.appletInputTitle1)}},model:{value:t.appletInputTitle1,callback:function(e){t.appletInputTitle1=e},expression:"appletInputTitle1"}},[a("span",{attrs:{slot:"suffix"},slot:"suffix"},[a("span",[t._v(t._s(t.appletInputTitle1.length))]),t._v("/12\n\t                  ")])])],2),a("a-form-item",{attrs:{"label-col":{span:3},"wrapper-col":{span:21}}},[a("template",{slot:"label"},[a("span",{staticStyle:{color:"red"}},[t._v("*")]),t._v("AppID\n\t\t\t\t\t")]),a("a-input",{attrs:{placeholder:"请填写小程序AppID，必须是关联到企业的小程序应用"},model:{value:t.appid1,callback:function(e){t.appid1=e},expression:"appid1"}})],2),a("a-form-item",{attrs:{"label-col":{span:3},"wrapper-col":{span:21}}},[a("template",{slot:"label"},[a("span",{staticStyle:{color:"red"}},[t._v("*")]),t._v("page路径\n\t\t\t\t\t")]),a("a-input",{staticStyle:{"margin-bottom":"10px"},attrs:{placeholder:"必须以“.html”结尾，例如：pages/index.html"},model:{value:t.pageUrl1,callback:function(e){t.pageUrl1=e},expression:"pageUrl1"}})],2),a("a-form-item",{attrs:{label:"素材同步","label-col":{span:3},"wrapper-col":{span:21}}},[a("a-radio-group",{attrs:{disabled:1==t.disabledSync1},on:{change:t.changeMaterialSync},model:{value:t.materialSync1,callback:function(e){t.materialSync1=e},expression:"materialSync1"}},[a("a-radio",{attrs:{value:0}},[t._v("不同步")]),a("a-radio",{style:{display:1==t.materialSync1?"block":""},attrs:{value:1}},[t._v("\n\t\t\t\t\t\t\t同步至【内容引擎】\n\t\t\t\t\t\t\t"),a("div",{directives:[{name:"show",rawName:"v-show",value:1==t.materialSync1,expression:"materialSync1 == 1"}],staticStyle:{"margin-top":"10px"}},[t._v("\n\t\t\t\t\t\t\t\t选择分组：\n\t\t\t\t\t\t\t\t"),a("a-tree-select",{staticStyle:{width:"225px"},attrs:{dropdownStyle:{maxHeight:"150px",overflow:"auto"},treeData:t.groupList1,placeholder:"Please select",treeDefaultExpandAll:""},model:{value:t.selectGroupId1,callback:function(e){t.selectGroupId1=e},expression:"selectGroupId1"}})],1)])],1)],1)]:t._e(),0==t.miniproAddType?[a("a-form-item",{directives:[{name:"show",rawName:"v-show",value:""==t.material_id31,expression:"material_id31 == ''"}],attrs:{"label-col":{span:3},"wrapper-col":{span:21}}},[a("template",{slot:"label"},[a("span",{staticStyle:{color:"red"}},[t._v("*")]),t._v("小程序\n\t\t\t\t\t")]),a("div",{staticClass:"upload-border",on:{click:function(e){return t.openShowModalMinipro()}}},[a("a-icon",{staticClass:"upload-plus",attrs:{type:"plus"}}),a("span",[t._v("选择小程序")])],1)],2),a("a-form-item",{directives:[{name:"show",rawName:"v-show",value:t.material_id31,expression:"material_id31"}],attrs:{"label-col":{span:3},"wrapper-col":{span:21}}},[a("template",{slot:"label"},[a("span",{staticStyle:{color:"red"}},[t._v("*")]),t._v("小程序\n\t\t\t\t\t")]),a("div",{staticClass:"upload-border",on:{click:function(e){return t.openShowModalMinipro()}}},[a("img",{attrs:{src:i("088b"),alt:""}}),t._v("\n\t\t\t\t\t\t已选择1条小程序\n\t\t\t\t\t\t"),a("p",{staticStyle:{color:"blue",margin:"14px"},on:{click:function(e){return t.openShowModalMinipro()}}},[t._v("\n\t\t\t\t\t\t\t[修改]")])])],2)]:t._e()],2),a("cropperModal",{ref:"cropper",on:{ok:t.uploadAppletPic,cancel:t.cancleAppletPic}})],1)},s=[],n=(i("28a5"),i("3b2b"),i("386d"),i("ac4d"),i("8a81"),i("6b54"),i("a481"),i("c5f6"),i("7f7f"),i("ac6a"),i("96cf"),i("3b8d")),r=(i("20d6"),i("75fc")),o=(i("6c7b"),i("c75b")),l=(i("d77d"),i("c1df")),c=i.n(l),p=(i("5c3a"),i("236f")),d=i("2afe"),m=i("641c"),h=i("947c"),u=i("7098"),g=i("156b"),f=i("95204"),v=i("e488"),y={img:!1,text:"",textAreaValueHeader:"",textContent:"",material_id1:"",news_type:1,sketchAddType:1,url:"",msgUrl:"",inputTitle:"",digest:"",confirmLoading:!1,popVisible:!1,groupId:[],index:0,modalUrlOk:!1,showModalApplet:!1,miniproAddType:1,miniproAddType1:1,material_id3:"",showModalMinipro:!1,appletUrl:"",appletInputTitle:"",appid:"",pageUrl:"",closeModalApplet:!1,modalAppletOk:!1,checkedList:[],corpArr:[],chooseNum:0,chooseDepartmentNum:0,selectGroupId:"",sketchAddType1:1,disabledSync:0,materialSync:0},_=[{title:"活动名称",dataIndex:"name",key:"name"},{title:"是否开启上限",dataIndex:"is_limit",key:"is_limit",scopedSlots:{customRender:"is_limit"}},{title:"成员上限",dataIndex:"user_limit",key:"user_limit",scopedSlots:{customRender:"user_limit"}},{title:"备用员工",dataIndex:"spare_employee",key:"spare_employee",scopedSlots:{customRender:"spare_employee"}}],w=[{title:"",key:"select",scopedSlots:{customRender:"select"}},{title:"二维码",dataIndex:"local_path",width:"9%",key:"local_path",scopedSlots:{customRender:"local_path"}},{title:"活码名称",dataIndex:"title",width:"11%",key:"title"},{title:"分组",dataIndex:"way_group_name",width:"12%",key:"way_group_name"},{title:"活码成员",dataIndex:"user",width:"8%",scopedSlots:{customRender:"user"}},{title:"自动添加好友",dataIndex:"skip_verify",width:"12%",key:"skip_verify",scopedSlots:{customRender:"skip_verify"}},{title:"标签",dataIndex:"tag_ids",width:"10%",scopedSlots:{customRender:"tag_ids"}},{dataIndex:"add_num",width:"12%",key:"add_num",slots:{title:"add_num"}},{title:"操作",key:"action",width:"20%",scopedSlots:{customRender:"action"}}],x=[{title:"客户名称",dataIndex:"name",key:"name"},{title:"归属成员",dataIndex:"department_name",key:"department_name"},{title:"添加时间",dataIndex:"create_time",key:"create_time"}],b={name:"channelCodeList",components:{cEditor:v["a"],Menu:p["a"],chooseDepartment:o["a"],chooseMsg:d["a"],MyIcon:m["a"],chooseMinipro:h["a"],cropperModal:u["a"],editor:g["a"],chooseStaffSelect:f["a"]},data:function(){var t=localStorage.getItem("corpId")?localStorage.getItem("corpId"):"";return{chooseNum:0,chooseUserNum1:0,chooseDepartmentNum1:0,user_ids:[],user_arr:[],editorKey:0,textAreaValueHeader:"",textContent:"",popoverKey:0,commonUrl:this.$store.state.commonUrl,groupVisible:!1,groupLoading:!1,groupList:[],group:"",qrCodeId:"",previewModal:!1,specialType:1,batchMoveType:"",editType:1,specialModal:!1,specialModalTitle:"编辑成员",specialTimeVisible:!1,departmentDisabled:0,showModalDepartment:!1,chooseDepartmentNum:0,addSpecialTimeLoading:!1,weekList:[{key:"mon",name:"周一"},{key:"tues",name:"周二"},{key:"wednes",name:"周三"},{key:"thurs",name:"周四"},{key:"fri",name:"周五"},{key:"satur",name:"周六"},{key:"sun",name:"周日"}],weekDayKey:[],weelArr:{mon:0,tues:1,wednes:2,thurs:3,fri:4,satur:5,sun:6},batchEditType:!1,staffSelectDisabled:!1,weekChecked:new Array(7).fill(!1),specialWeekColumns:[{slots:{title:"mon"},dataIndex:"mon",width:"14%",key:"mon",scopedSlots:{customRender:"mon"}},{slots:{title:"tues"},dataIndex:"tues",width:"14%",key:"tues",scopedSlots:{customRender:"tues"}},{slots:{title:"wednes"},dataIndex:"wednes",width:"14%",key:"wednes",scopedSlots:{customRender:"wednes"}},{slots:{title:"thurs"},dataIndex:"thurs",width:"14%",key:"thurs",scopedSlots:{customRender:"thurs"}},{slots:{title:"fri"},dataIndex:"fri",width:"14%",key:"fri",scopedSlots:{customRender:"fri"}},{slots:{title:"satur"},dataIndex:"satur",width:"14%",key:"satur",scopedSlots:{customRender:"satur"}},{slots:{title:"sun"},dataIndex:"sun",width:"14%",key:"sun",scopedSlots:{customRender:"sun"}}],specialTimeTitle:"添加",specialWeekList:[{mon:[],tues:[],wednes:[],thurs:[],fri:[],satur:[],sun:[]}],specialTime:0,limitUserColumns:_,previewUserColumns:[{title:"名称",dataIndex:"name",key:"name"},{title:"上限",dataIndex:"limit",key:"limit",scopedSlots:{customRender:"limit"}}],is_limit:1,userLimitList:[],spare_employee:[],userLimits:[],user_limit:[],pushValue:!0,welcomeType:"",weekIndex:"",wTimeIndex:"",is_welcome_week:1,is_welcome_date:1,weekTabKey:0,weekKey:0,welcome_week_list:[{date:[],time:[{startTime:null,endTime:null,content:JSON.parse(JSON.stringify(y))}]}],dateTabKey:0,dateKey:0,welcome_date_list:[{date:[],time:[{startTime:null,endTime:null,content:JSON.parse(JSON.stringify(y))}]}],limitVisible:!1,limitLoading:!1,text:"",specialTimeList:[{startTime:c()("00:00","HH:mm"),endTime:c()("00:00","HH:mm"),start_time:"00:00",end_time:"00:00",userList:[],party:[]}],specialDateList:[{specialDate:[c()(new Date),c()(new Date)],date:[c()(new Date).format("YYYY-MM-DD"),c()(new Date).format("YYYY-MM-DD")],time:[{startTime:c()("00:00","HH:mm"),endTime:c()("00:00","HH:mm"),start_time:"00:00",end_time:"00:00",userList:[],party:[]}]}],user:[],party:[],type:0,title:"",corpId:t,groupId:"",wayList:[],wayKeys:[],selectedRowKeys:[],checkBoxValue:[],batchTypeValue:!1,batchType:"1",wayInfo:[],isLoading:!0,urlId:"",columns:w,total:1,quickJumper:!1,page:1,pageSize:15,usersVisible:!1,usersList:[],usersList2:[],page2:1,pageSize2:15,total2:0,quickJumper2:!1,columns2:x,isLoading3:!1,groupList1:[],img:!1,showModal3:!1,welComeVisible:!1,typeValue2:2,material_id1:"",news_type:1,chooseId:0,showModalUrl:!1,sketchAddType:1,sketchAddType1:1,url:"",closeShowModal3:!1,msgUrl:"",inputTitle:"",digest:"",confirmLoading:!1,popVisible:!1,index:0,modalUrlOk:!1,showModalApplet:!1,miniproAddType:1,miniproAddType1:1,material_id3:"",showModalMinipro:!1,appletUrl:"",appletInputTitle:"",appid:"",pageUrl:"",closeModalApplet:!1,modalAppletOk:!1,disabledSync:0,materialSync:0,materialSync1:0,disabledSync1:0,material_id0:"",msgUrl1:"",inputTitle1:"",digest1:"",url1:"",material_id11:"",selectGroupId1:"",appletUrl1:"",appletInputTitle1:"",appid1:"",pageUrl1:"",material_id31:"",comefrom:"",isShowChoose:!0}},methods:{moment:c.a,changeGroupId:function(t,e){this.corpId!=t&&(this.getUserList(),this.getPartyList()),this.isLoading=!0,this.corpId=t,this.groupId=e,this.selectedRowKeys=[],this.getWayList()},rowClassName:function(t,e){var i="dark-row";return e%2===0&&(i="light-row"),i},changeSelectKey:function(t){for(var e=0;e<this.selectedRowKeys.length;e++)if(t==this.selectedRowKeys[e])return this.selectedRowKeys.splice(e,1),this.setCheckedBox(this.wayList),!1;this.selectedRowKeys.push(t),this.setCheckedBox(this.wayList)},batchTypeChange:function(){this.batchTypeValue?0==this.batchType?(this.removeKey(this.wayList),this.setCheckedBox(this.wayList)):1==this.batchType&&(this.selectedRowKeys=[],this.setCheckedBox(this.wayList)):0==this.batchType?(this.addKey(this.wayList),this.setCheckedBox(this.wayList)):1==this.batchType&&(this.selectedRowKeys=Object(r["a"])(this.wayKeys.valueOf()),this.setCheckedBox(this.wayList))},changeBatchType:function(){this.batchTypeValue=!1,this.selectedRowKeys=[],this.setCheckedBox(this.wayList)},addKey:function(t){for(var e=this,i=function(i){var a=e.selectedRowKeys.findIndex((function(e){return e===t[i].key}));-1==a&&e.selectedRowKeys.push(t[i].key)},a=0;a<t.length;a++)i(a)},removeKey:function(t){for(var e=this,i=function(i){var a=e.selectedRowKeys.findIndex((function(e){return e===t[i].key}));-1!=a&&e.selectedRowKeys.splice(a,1)},a=0;a<t.length;a++)i(a)},setCheckedBox:function(t){var e=this;this.checkBoxValue=new Array(t.length),this.checkBoxValue.fill(!1);for(var i=0;i<t.length;i++)for(var a=0;a<this.selectedRowKeys.length;a++)t[i].key==this.selectedRowKeys[a]&&(this.checkBoxValue[i]=!0);0==this.batchType?(this.batchTypeValue=!0,this.checkBoxValue.map((function(t){t||(e.batchTypeValue=!1)}))):this.selectedRowKeys.length==this.wayKeys.length?this.batchTypeValue=!0:this.batchTypeValue=!1},syncFollowUser:function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(){var e,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.selectedRowKeys=[],this.isLoading=!0,this.$message.info("已进入后台刷新中，请耐心等待..."),t.next=5,this.axios.post("work-follow-user/refresh-follow-user",{suite_id:1,corp_id:this.corpId});case 5:e=t.sent,i=e.data,0!=i.error?(this.$message.destroy(),this.$message.error(i.error_msg),this.isLoading=!1):(this.$message.destroy(),this.$message.success("同步完成！"),this.isLoading=!0,this.getWayList());case 8:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),showModal:function(){var t="";t=0==this.groupId.length?"":this.groupId[0],this.$router.push("/channelCode/add?groupId="+t)},getWayList:function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(){var e,i,a,s,n=arguments;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=n.length>0&&void 0!==n[0]?n[0]:1,i=n.length>1&&void 0!==n[1]?n[1]:this.pageSize,t.next=4,this.axios.post("work-contact-way/get-list",{suite_id:1,corp_id:this.corpId,page:e,pageSize:i,type:this.type,title:this.title,way_group_id:this.groupId,user_id:this.user_ids});case 4:a=t.sent,s=a.data,0!=s.error?(this.isLoading=!1,this.$message.error(s.error_msg),this.confirmLoading=!1):(this.wayKeys=s.data.keys,this.wayList=s.data.contact_way_list,this.isLoading=!1,this.total=parseInt(s.data.count),this.page=e,this.pageSize=i,this.quickJumper=this.total>this.pageSize,this.confirmLoading=!1,this.setCheckedBox(this.wayList));case 7:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),selectTitle:function(){this.selectedRowKeys=[],this.isLoading=!0,this.getWayList(1,this.pageSize)},clearTitle:function(){this.type=0,this.title="",this.user_ids=[],this.user_arr=[],this.chooseNum=0,this.selectedRowKeys=[],this.isLoading=!0,this.getWayList(this.page,this.pageSize)},changePage:function(t,e){this.isLoading=!0,this.getWayList(t,e),this.$nextTick((function(){document.getElementsByClassName("scroll")[0].scrollTo(0,140)}))},showSizeChange:function(t,e){this.isLoading=!0,this.getWayList(1,e)},download:function(t,e){var i=document.createElement("a");i.download=e,i.href=t,i.click(),i.remove()},downLoadWay:function(t){var e=this,i=new Image;i.setAttribute("crossOrigin","anonymous"),i.src=t.target.dataset.url,i.onload=function(){var a=document.createElement("canvas");a.width=i.width,a.height=i.height;var s=a.getContext("2d");s.drawImage(i,0,0,i.width,i.height),a.toBlob((function(i){var a=URL.createObjectURL(i);e.download(a,t.target.dataset.name),URL.revokeObjectURL(a)}))}},getBase64:function(t){var e=new Image;e.crossOrigin="anonymous",e.src=t,this.getBase64Image(e)},getBase64Image:function(t,e,i){var a=document.createElement("canvas");a.width=e||t.width,a.height=i||t.height,console.log(t,"img"),console.log(a,"canvas");var s=a.getContext("2d");console.log(s,"ctx"),s.drawImage(t,0,0,a.width,a.height);var n=a.toDataURL();return console.log(n,"dataURL"),n},deleteList:function(t){var e=this;e.$confirm({title:"确定删除该活码？",okText:"确定",okType:"primary",cancelText:"取消",onOk:function(){e.isLoading=!0,e.deleteList2(t)}})},deleteList2:function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(e){var i,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.axios.post("work-contact-way/delete",{id:e});case 2:i=t.sent,a=i.data,0!=a.error?(this.$message.error(a.error_msg),this.isLoading=!1):this.getWayList(this.page,this.pageSize);case 5:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),customer:function(t){this.usersVisible=!0,this.isLoading3=!0,this.urlId=t,this.page2=1,this.pageSize2=15,this.getCustomer()},statistics:function(t,e){this.$router.push({path:"/channelCode/statistics",query:{id:t,title:encodeURIComponent(e)}})},getCustomer:function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(){var e,i,a,s,n=arguments;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=n.length>0&&void 0!==n[0]?n[0]:1,i=n.length>1&&void 0!==n[1]?n[1]:this.pageSize2,t.next=4,this.axios.post("work-contact-way/get-custom",{way_id:this.urlId,page:e,pageSize:i});case 4:a=t.sent,s=a.data,0!=s.error?(this.$message.error(s.error_msg),this.isLoading3=!1):(this.usersList2=s.data.contact_way_list,this.total2=parseInt(s.data.count),this.isLoading3=!1,this.page2=e,this.pageSize2=i,this.quickJumper2=this.total2>this.pageSize2);case 7:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),changePage2:function(t,e){this.isLoading3=!0,this.getCustomer(t,e)},showSizeChange2:function(t,e){this.isLoading3=!0,this.getCustomer(1,e)},getWayInfo:function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(e){var i,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.axios.post("work-contact-way/get-info",{suite_id:1,corp_id:this.corpId,config_id:e});case 2:i=t.sent,a=i.data,0!=a.error?this.$message.error(a.error_msg):this.wayInfo=a.data.external_info[0];case 5:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),preview:function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(e,i,a){var s,n,r,o,l,p,d,m,h,u,g,f=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.axios.post("work-contact-way/get",{suite_id:1,corp_id:this.corpId,config_id:e,id:e});case 2:if(s=t.sent,n=s.data,0!=n.error)this.$message.error(n.error_msg);else{for(this.batchEditType=!1,this.editType=i,r=n.data.contact_way,this.specialTime=r.specialTime,this.specialDateList=r.specialDateList,this.specialWeekList=r.specialWeekList,o=0;o<this.specialDateList.length;o++)for(this.specialDateList[o]["specialDate"]=[new Date,new Date],this.specialDateList[o]["specialDate"][0]=c()(this.specialDateList[o].date[0],"YYYY-MM-DD"),this.specialDateList[o]["specialDate"][1]=c()(this.specialDateList[o].date[1],"YYYY-MM-DD"),l=0;l<this.specialDateList[o].time.length;l++)this.specialDateList[o].time[l]["startTime"]=c()(new Date),this.specialDateList[o].time[l]["endTime"]=c()(new Date),this.specialDateList[o].time[l]["startTime"]=c()(this.specialDateList[o].time[l]["start_time"],"HH:mm"),this.specialDateList[o].time[l]["endTime"]=c()(this.specialDateList[o].time[l]["end_time"],"HH:mm");for(p=["mon","tues","wednes","thurs","fri","satur","sun"],d=0;d<7;d++)for(m=this.specialWeekList[0][p[d]],h=0;h<m.length;h++)m[h]["startTime"]=c()(m[h]["start_time"],"HH:mm"),m[h]["endTime"]=c()(m[h]["end_time"],"HH:mm");this.is_limit=n.data.contact_way.is_limit,this.userLimitList=n.data.contact_way.user_limit,this.spare_employee=n.data.contact_way.spare_employee,this.specialModalTitle="预览",this.specialType=a,this.specialModal=!0,this.staffSelectDisabled=!0,1==this.editType&&1==this.specialTime&&(u=this,g=[],u.specialDateList.map((function(t,e){t.time.map((function(t,e){g.push(t.userList)}))})),u.$nextTick((function(){g.map((function(t,e){u.$refs.staffSelect[e].userId=t}))}))),1==this.editType&&this.$nextTick((function(){f.$refs.staffSelect4&&(f.$refs.staffSelect4.userId=f.spare_employee)}))}case 5:case"end":return t.stop()}}),t,this)})));function e(e,i,a){return t.apply(this,arguments)}return e}(),moveQrcode:function(t,e,i){this.batchMoveType=i,this.qrCodeId=t,this.group=e,this.getGroupList(),this.groupVisible=!0},downLoad:function(){if(0==this.selectedRowKeys.length)return!1;var t=this;t.$confirm({title:"确定下载选中的二维码吗？",okText:"确定",okType:"primary",cancelText:"取消",onOk:function(){t.uploadQrcode()}})},setUserLimit:function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:this.limitVisible=!0,this.getUserLimit(2);case 2:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),batchEdit:function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(e){var i,a,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.getUserLimit(e-1),t.next=3,this.axios.post("work-contact-way/edit-all",{ids:this.selectedRowKeys,type:0});case 3:i=t.sent,a=i.data,0!=a.error?this.$message.error(a.error_msg):(this.batchEditType=!0,this.editType=a.data.type,this.specialTimeTitle="添加",this.weekChecked=[],this.specialWeekList=[{mon:[],tues:[],wednes:[],thurs:[],fri:[],satur:[],sun:[]}],this.specialTimeList=[{startTime:c()("00:00","HH:mm"),endTime:c()("00:00","HH:mm"),start_time:"00:00",end_time:"00:00",userList:[],party:[]}],this.specialDateList=[{specialDate:[c()(new Date),c()(new Date)],date:[c()(new Date).format("YYYY-MM-DD"),c()(new Date).format("YYYY-MM-DD")],time:[{startTime:c()("00:00","HH:mm"),endTime:c()("00:00","HH:mm"),start_time:"00:00",end_time:"00:00",userList:[],party:[]}]}],this.specialTime=1,this.specialType=e,this.specialModalTitle=1==e?"编辑周期成员":"编辑特殊时期成员",this.specialModal=!0,this.staffSelectDisabled=!1,s=this,2==e&&s.$nextTick((function(){1==s.editType&&s.$refs.staffSelect&&(s.$refs.staffSelect.userId=[])})));case 6:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),getUserLimit:function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(e){var i,a,s=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.limitLoading=!0,t.next=3,this.axios.post("work-contact-way/get-user-limit",{ids:this.selectedRowKeys,type:e});case 3:i=t.sent,a=i.data,0!=a.error?(this.limitLoading=!1,this.$message.error(a.error_msg)):(this.user_limit=a.data,this.userLimits=JSON.parse(JSON.stringify(a.data)),this.limitLoading=!1,this.$nextTick((function(){for(var t=0;t<s.user_limit.length;t++)1==s.user_limit[t].type&&(s.$refs["staffSelect3"+t].userId=s.user_limit[t].spare_employee)})));case 6:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),changeIsCeiling:function(t){if(0==this.user_limit[t].user_limit.length)return this.$message.warning("因受官方限制，无法对动态部门的员工设置添加好友上限！"),!1;this.user_limit[t].is_limit=this.user_limit[t].is_limit=1==this.user_limit[t].is_limit?2:1},limitDecimals:function(t){var e=/[^\d]/g;return"string"==typeof t?isNaN(Number(t))?"":t.replace(e,""):"number"==typeof t?isNaN(t)?"":String(t).replace(e,""):""},inputLimitNum:function(t,e,i){if(t.data){var a=/^[0-9]+$/;console.log(this.user_limit[e].user_limit[i].limit),(!a.test(t.data)||this.user_limit[e].user_limit[i].limit>99999999)&&(this.user_limit[e].user_limit[i].limit=parseInt(this.user_limit[e].user_limit[i].limit.toString().substring(0,this.user_limit[e].user_limit[i].limit.toString().length-1))||"",this.$forceUpdate())}},handleChangeSpecialTime:function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(){var e,i,a,s,n,r,o,l,c,p,d,m,h;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(this.groupLoading=!0,1!=this.specialType){t.next=8;break}if(this.specialTime=0,e=this.specialWeekList[0],0!=e.mon.length&&0!=e.tues.length&&0!=e.wednes.length&&0!=e.thurs.length&&0!=e.fri.length&&0!=e.satur.length&&0!=e.sun.length){t.next=8;break}return this.$message.warning("周成员缺失"),this.groupLoading=!1,t.abrupt("return",!1);case 8:if(2!=this.specialType||1!=this.specialTime){t.next=75;break}i=!1,a=0;case 11:if(!(a<this.specialDateList.length)){t.next=72;break}s=a+1;case 13:if(!(s<this.specialDateList.length)){t.next=23;break}if(n=this.specialDateList,!(n[s].date[0]>=n[a].date[0]&&n[s].date[0]<=n[a].date[1]||n[s].date[1]>=n[a].date[0]&&n[s].date[1]<=n[a].date[1])){t.next=20;break}return this.$message.warning("特殊时期"+(a+1)+"和特殊时期"+(s+1)+"存在冲突，请修改"),i=!0,this.groupLoading=!1,t.abrupt("return",!1);case 20:s++,t.next=13;break;case 23:r=0;case 24:if(!(r<this.specialDateList[a].time.length)){t.next=66;break}if(!(this.specialDateList[a].time[r].start_time>=this.specialDateList[a].time[r].end_time&&"00:00"!=this.specialDateList[a].time[r].end_time)){t.next=30;break}return this.$message.warning("特殊时期"+(a+1)+"的第"+(r+1)+"个时间段开始时间需早于结束时间，请修改"),i=!0,this.groupLoading=!1,t.abrupt("return",!1);case 30:if(2!=this.editType||0!=this.specialDateList[a].time[r].userList.length||0!=this.specialDateList[a].time[r].party.length){t.next=35;break}return this.$message.warning("特殊时期"+(a+1)+"的第"+(r+1)+"个时间段请选择企业成员或企业部门"),i=!0,this.groupLoading=!1,t.abrupt("return",!1);case 35:if(1!=this.editType||0!=this.specialDateList[a].time[r].userList.length){t.next=40;break}return this.$message.warning("特殊时期"+(a+1)+"的第"+(r+1)+"个时间段请选择企业成员"),i=!0,this.groupLoading=!1,t.abrupt("return",!1);case 40:o=r+1;case 41:if(!(o<this.specialDateList[a].time.length)){t.next=60;break}if("00:00"!=this.specialDateList[a].time[o].start_time||"00:00"!=this.specialDateList[a].time[o].end_time){t.next=47;break}return this.$message.warning("特殊时期"+(a+1)+"的第"+(o+1)+"个时间段不能与默认时间段相同，请修改"),i=!0,this.groupLoading=!1,t.abrupt("return",!1);case 47:if(0==r){t.next=57;break}if(l=this.specialDateList[a].time[r].start_time,c=this.specialDateList[a].time[r].end_time,p=this.specialDateList[a].time[o].start_time,d=this.specialDateList[a].time[o].end_time,!(l>=p&&l<d||c>p&&c<=d||l>=p&&"00:00"==d||c>p&&"00:00"==d||p>=l&&p<c||d>l&&c>=d||p>=l&&"00:00"==c||d>l&&"00:00"==c)){t.next=57;break}return this.$message.warning("特殊时期"+(a+1)+"的第"+(r+1)+"个时间段与第"+(o+1)+"个时间段存在冲突，请修改"),i=!0,this.groupLoading=!1,t.abrupt("return",!1);case 57:o++,t.next=41;break;case 60:if(!i){t.next=63;break}return this.groupLoading=!1,t.abrupt("return",!1);case 63:r++,t.next=24;break;case 66:if(!i){t.next=69;break}return this.groupLoading=!1,t.abrupt("return",!1);case 69:a++,t.next=11;break;case 72:if(!i){t.next=75;break}return this.groupLoading=!1,t.abrupt("return",!1);case 75:if(this.groupLoading){t.next=77;break}return t.abrupt("return",!1);case 77:return t.next=79,this.axios.post("work-contact-way/edit-all",{ids:this.selectedRowKeys,type:1,specialType:this.specialType,specialTime:this.specialTime,specialWeekList:this.specialWeekList,specialDateList:this.specialDateList,way_data:this.user_limit});case 79:m=t.sent,h=m.data,0!=h.error?(this.groupLoading=!1,this.$message.error(h.error_msg)):(this.$message.success("编辑成功"),this.specialModal=!1,this.groupLoading=!1,this.isLoading=!0,this.selectedRowKeys=[],this.getWayList(this.page,this.pageSize));case 82:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),cancelChangeSpecialTime:function(){this.specialModal=!1},cancelChangeLimit:function(){this.user_limit=[],this.userLimits=[],this.limitVisible=!1},handleChangeLimit:function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(){var e,i,a,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:this.groupLoading=!0,e=0;case 2:if(!(e<this.user_limit.length)){t.next=21;break}if(2!=this.user_limit[e].is_limit){t.next=18;break}i=0;case 5:if(!(i<this.user_limit[e].user_limit.length)){t.next=13;break}if(this.user_limit[e].user_limit[i].limit){t.next=10;break}return this.$message.warning("员工上限不可为空！"),this.groupLoading=!1,t.abrupt("return",!1);case 10:i++,t.next=5;break;case 13:if(2!=this.user_limit[e].is_limit||0!=this.user_limit[e].spare_employee.length){t.next=18;break}return this.$message.destroy(),this.$message.warning("请选择备用员工！"),this.groupLoading=!1,t.abrupt("return",!1);case 18:e++,t.next=2;break;case 21:return t.next=23,this.axios.post("work-contact-way/set-user-limit",{way_data:this.user_limit,ids:this.selectedRowKeys});case 23:a=t.sent,s=a.data,0!=s.error?(this.groupLoading=!1,this.$message.error(s.error_msg)):(this.$message.destroy(),this.$message.success("编辑成功"),this.selectedRowKeys=[],this.limitVisible=!1,this.getWayList(this.page,this.pageSize),this.groupLoading=!1);case 26:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),addSpecialTime:function(){this.specialTimeTitle="新建",this.specialTimeVisible=!0;var t=this;t.$nextTick((function(){1==t.editType&&(t.$refs.staffSelect2.userId=[])}))},editSpecialTime:function(t){this.specialTimeTitle="编辑",this.specialTimeList=JSON.parse(JSON.stringify(this.specialWeekList[0][t])),this.specialTimeList.map((function(t){t.startTime=c()(t.start_time,"HH:mm"),t.endTime=c()(t.end_time,"HH:mm")})),this.weekChecked[this.weelArr[t]]=!0,this.weekDayKey.push(t),this.specialTimeVisible=!0;var e=this;e.specialTimeList.map((function(t,i){e.$nextTick((function(){e.$refs.staffSelect2[i].userId=t.userList}))}))},getUniqueUserList:function(){var t=[];if(1==this.specialType)for(var e=["mon","tues","wednes","thurs","fri","satur","sun"],i=0,a=e;i<a.length;i++){var s=a[i],n=!0,r=!1,o=void 0;try{for(var l,c=this.specialWeekList[0][s][Symbol.iterator]();!(n=(l=c.next()).done);n=!0){var p=l.value;1==this.editType?p.userList&&t.push(p.userList):p.userList&&0!=p.userList.length&&(t=t.concat(p.userList))}}catch(T){r=!0,o=T}finally{try{n||null==c.return||c.return()}finally{if(r)throw o}}}if(2==this.specialType&&1==this.specialTime){var d=!0,m=!1,h=void 0;try{for(var u,g=this.specialDateList[Symbol.iterator]();!(d=(u=g.next()).done);d=!0){var f=u.value,v=!0,y=!1,_=void 0;try{for(var w,x=f.time[Symbol.iterator]();!(v=(w=x.next()).done);v=!0){var b=w.value;1==this.editType?t.push(b.userList):t=t.concat(b.userList)}}catch(T){y=!0,_=T}finally{try{v||null==x.return||x.return()}finally{if(y)throw _}}}}catch(T){m=!0,h=T}finally{try{d||null==g.return||g.return()}finally{if(m)throw h}}}if(0==t.length)this.getLimitUser(t);else if(2==this.editType){for(var k=0;k<t.length;k++)t[k]={user_id:t[k].id,name:t[k].name,limit:100};this.getLimitUser(t)}else this.getUserList1(t)},getLimitUser:function(t){for(var e=this,i={},a=0;a<this.userLimits.length;a++)this.user_limit[a].user_limit=JSON.parse(JSON.stringify(this.userLimits[a].user_limit));t=t.reduce((function(t,e){return!i[e.user_id]&&(i[e.user_id]=t.push(e)),t}),[]);for(var s=0;s<this.userLimits.length;s++)for(var n=function(i){-1==e.userLimits[s].user_limit.findIndex((function(e){return e.user_id==t[i].user_id}))&&e.user_limit[s].user_limit.push(t[i])},r=0;r<t.length;r++)n(r)},getUserList1:function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(e){var i,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.axios.post("work-contact-way/get-users",{id:e,corp_id:this.corpId});case 2:i=t.sent,a=i.data,0!=a.error?this.$message.error(a.error_msg):(e=a.data,this.getLimitUser(e));case 5:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),handleSpecialTime:function(){if(this.addSpecialTimeLoading=!0,0==this.weekDayKey.length)return this.$message.warning("请选择适用周期"),this.addSpecialTimeLoading=!1,!1;var t=!1,e=!0,i=!1,a=void 0;try{for(var s,n=this.specialTimeList[Symbol.iterator]();!(e=(s=n.next()).done);e=!0){var r=s.value;if(0==r.userList.length&&0==r.party.length&&2==this.editType)return this.$message.warning("请选择成员或企业微信部门"),this.addSpecialTimeLoading=!1,t=!0,!1;if(0==r.userList.length&&1==this.editType)return this.$message.warning("请选择成员"),this.addSpecialTimeLoading=!1,t=!0,!1}}catch(w){i=!0,a=w}finally{try{e||null==n.return||n.return()}finally{if(i)throw a}}if(t)return!1;for(var o=1;o<this.specialTimeList.length;o++){if(this.specialTimeList[o].start_time>=this.specialTimeList[o].end_time&&"00:00"!=this.specialTimeList[o].end_time)return this.$message.warning("第"+(o+1)+"个时间段开始时间需早于结束时间，请修改"),t=!0,this.addSpecialTimeLoading=!1,!1;if("00:00"==this.specialTimeList[o].start_time&&"00:00"==this.specialTimeList[o].end_time)return this.$message.warning("第"+(o+1)+"个时间段不能与默认时间段相同，请修改"),t=!0,this.addSpecialTimeLoading=!1,!1;for(var l=o+1;l<this.specialTimeList.length;l++){var p=this.specialTimeList[o].start_time,d=this.specialTimeList[o].end_time,m=this.specialTimeList[l].start_time,h=this.specialTimeList[l].end_time;if(p>=m&&p<h||d>m&&d<=h||p>=m&&"00:00"==h||d>m&&"00:00"==h||m>=p&&m<d||h>p&&d>=h||m>=p&&"00:00"==d||h>p&&"00:00"==d)return this.$message.warning("第"+(o+1)+"个时间段与第"+(l+1)+"个时间段存在冲突，请修改"),t=!0,this.addSpecialTimeLoading=!1,!1}}if(t)return!1;var u=!0,g=!1,f=void 0;try{for(var v,y=this.weekDayKey[Symbol.iterator]();!(u=(v=y.next()).done);u=!0){var _=v.value;this.specialWeekList[0][_]=[],this.specialWeekList[0][_]=this.specialTimeList}}catch(w){g=!0,f=w}finally{try{u||null==y.return||y.return()}finally{if(g)throw f}}this.specialTimeVisible=!1,this.addSpecialTimeLoading=!1,this.weekDayKey=[],this.weekChecked=new Array(7).fill(!1),this.specialTimeList=[{startTime:c()("00:00","HH:mm"),endTime:c()("00:00","HH:mm"),start_time:"00:00",end_time:"00:00",userList:[],party:[]}]},handleCancelSpecialTime:function(){this.specialTimeVisible=!1,this.weekDayKey=[],this.weekChecked=new Array(7).fill(!1),this.specialTimeUserList=[],this.specialTimeList=[{startTime:c()("00:00","HH:mm"),endTime:c()("00:00","HH:mm"),start_time:"00:00",end_time:"00:00",userList:[],party:[]}]},changeStartTime:function(t,e){this.specialTimeList[e].startTime=t,this.specialTimeList[e].start_time=c()(this.specialTimeList[e].startTime).format("HH:mm"),this.specialTimeList[e].start_time>=this.specialTimeList[e].end_time&&"00:00"!=this.specialTimeList[e].end_time&&this.$message.warning("开始时间需早于结束时间"),this.$forceUpdate()},changeEndTime:function(t,e){this.specialTimeList[e].endTime=t,this.specialTimeList[e].end_time=c()(this.specialTimeList[e].endTime).format("HH:mm"),this.specialTimeList[e].start_time>=this.specialTimeList[e].end_time&&"00:00"!=this.specialTimeList[e].end_time&&this.$message.warning("开始时间需早于结束时间")},addTime:function(t){var e={start_time:"00:00",end_time:"00:00",startTime:c()("00:00","HH:mm"),endTime:c()("00:00","HH:mm"),userList:[],party:[]};this.specialTimeList.splice(t+1,0,e)},deleteTime:function(t){this.specialTimeList.splice(t,1)},changeWeekDay:function(t){Array.prototype.indexOf=function(t){for(var e=0;e<this.length;e++)if(this[e]==t)return e;return-1},Array.prototype.remove=function(t){var e=this.indexOf(t);e>-1&&this.splice(e,1)},-1!=this.weekDayKey.indexOf(t)?this.weekDayKey.remove(t):this.weekDayKey.push(t)},changeSpecilTime:function(){this.specialTime=(this.specialTime+1)%2},disabledDateDay:function(t){return t.valueOf()<(new Date).getTime()-864e5},changeSpecialDate:function(t,e){t&&t.length>1&&(this.specialDateList[e].specialDate=t,this.specialDateList[e].date=[c()(t[0]).format("YYYY-MM-DD"),c()(t[1]).format("YYYY-MM-DD")]),this.$forceUpdate()},changeSpecialStartTime:function(t,e,i){this.specialDateList[e].time[i].startTime=t,this.specialDateList[e].time[i].start_time=c()(t).format("HH:mm"),this.specialDateList[e].time[i].start_time>=this.specialDateList[e].time[i].end_time&&"00:00"!=this.specialDateList[e].time[i].end_time&&this.$message.warning("开始时间需早于结束时间"),this.$forceUpdate()},changeSpecialEndTime:function(t,e,i){this.specialDateList[e].time[i].endTime=t,this.specialDateList[e].time[i].end_time=c()(t).format("HH:mm"),this.specialDateList[e].time[i].start_time>=this.specialDateList[e].time[i].end_time&&"00:00"!=this.specialDateList[e].time[i].end_time&&this.$message.warning("开始时间需早于结束时间"),this.$forceUpdate()},selectStaffCallback:function(t,e,i,a){"ok"==t&&(-1==a?this.user_limit[i].spare_employee=e:this.specialDateList[i].time[a].userList=e)},selectStaffCallback2:function(t,e,i){"ok"==t&&(this.specialTimeList[i].userList=e)},addSpecialDateTimeList:function(t,e){var i={startTime:c()("00:00","HH:mm"),endTime:c()("00:00","HH:mm"),start_time:"00:00",end_time:"00:00",userList:[],party:[]};this.specialDateList[t].time.splice(e+1,0,i)},deleteSpecialDateTimeList:function(t,e){this.specialDateList[t].time.splice(e,1)},addSpecialDate:function(t){var e={specialDate:[c()(new Date),c()(new Date)],date:[c()(new Date).format("YYYY-MM-DD"),c()(new Date).format("YYYY-MM-DD")],time:[{startTime:c()("00:00","HH:mm"),endTime:c()("00:00","HH:mm"),start_time:"00:00",end_time:"00:00",userList:[],party:[]}]};this.specialDateList.splice(t+1,0,e)},deleteSpecialDate:function(t){this.specialDateList.splice(t,1)},getUserNum:function(t){for(var e=0,i=0;i<t.length;i++)"custom"==t[i].scopedSlots.title&&e++;return e},getPartyNum:function(t){for(var e=0,i=0;i<t.length;i++)"custom"!=t[i].scopedSlots.title&&e++;return e},getThreePartyIndex:function(t){for(var e=0,i=0,a=0;a<t.length;a++){if(i=a,!(e<2))return i;"custom"!=t[a].scopedSlots.title&&e++}return i},showDepartmentList:function(t,e,i){if(1==e){this.currentIndex=t,this.currentType=e;var a=[];this.specialTimeList[t].userList.map((function(t){a.push(t.id)})),this.chooseDepartmentNum=this.specialTimeList[t].userList.length,this.departmentDisabled=0,this.$refs.user.rightIdList=JSON.parse(JSON.stringify(a)),this.$refs.user.rightList=JSON.parse(JSON.stringify(this.specialTimeList[t].userList))}else if(2==e){this.currentType=e,this.currentIndex=t;var s=[];this.user_limit[t].spare_employee.map((function(t){s.push(t.id)})),this.chooseDepartmentNum=this.user_limit[t].spare_employee.length,this.departmentDisabled=1,this.$refs.user.rightIdList=JSON.parse(JSON.stringify(s)),this.$refs.user.rightList=JSON.parse(JSON.stringify(this.user_limit[t].spare_employee))}else if(3==e)this.currentType=e,this.$refs.user.rightIdList=JSON.parse(JSON.stringify(this.user_ids)),this.$refs.user.rightList=JSON.parse(JSON.stringify(this.user_arr));else{this.currentIndex=t,this.timeIndex=i,this.currentType=e;var n=[];this.specialDateList[t].time[i].userList.map((function(t){n.push(t.id)})),this.chooseDepartmentNum=this.specialDateList[t].time[i].userList.length,this.departmentDisabled=0,this.$refs.user.rightIdList=JSON.parse(JSON.stringify(n)),this.$refs.user.rightList=JSON.parse(JSON.stringify(this.specialDateList[t].time[i].userList))}this.specialTimeVisible=!1,this.showModalDepartment=!0},modalVisibleChange3:function(t,e,i,a,s){var n=this;if("ok"==t)if(1==this.currentType)this.specialTimeList[this.currentIndex].userList=[],i+a>0&&s.map((function(t){n.specialTimeList[n.currentIndex].userList.push(JSON.parse(JSON.stringify(t))),"custom"!=t.scopedSlots.title&&n.specialTimeList[n.currentIndex].party.push(t.ids)})),this.specialTimeVisible=!0;else if(2==this.currentType){this.user_limit[this.currentIndex].spare_employee=[];for(var r=!1,o=0;o<s.length;o++)!0===s[o].isLeaf&&"custom"!=s[o].scopedSlots.title||(r=!0);if(!r)return this.$message.destroy(),this.$message.warning("备用员工不能为空部门"),this.showModalDepartment=!1,!1;i+a>0&&s.map((function(t){n.user_limit[n.currentIndex].spare_employee.push(JSON.parse(JSON.stringify(t)))}))}else 3==this.currentType?(this.chooseUserNum1=i,this.chooseDepartmentNum1=a,this.chooseNum=parseInt(i)+parseInt(a),this.user_ids=e,this.user_arr=s):(this.specialDateList[this.currentIndex].time[this.timeIndex].userList=[],i+a>0&&s.map((function(t){n.specialDateList[n.currentIndex].time[n.timeIndex].userList.push(JSON.parse(JSON.stringify(t))),"custom"!=t.scopedSlots.title&&n.specialDateList[n.currentIndex].time[n.timeIndex].party.push(t.ids)})));else 1==this.currentType&&(this.specialTimeVisible=!0);this.showModalDepartment=!1},getUserList:function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(){var e,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.axios.post("work-user/get-all-user",{suite_id:1,corp_id:this.corpId,is_all:1});case 2:e=t.sent,i=e.data,0!=i.error?(this.$message.error(i.error_msg),this.isLoading=!1):this.user=i.data.info;case 5:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),getPartyList:function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(){var e,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.axios.post("work-contact-way/get-party-list",{suite_id:1,corp_id:this.corpId});case 2:e=t.sent,i=e.data,0!=i.error?(this.isLoading=!1,this.$message.error(i.error_msg)):(this.isLoading=!1,this.party=i.data.party_list);case 5:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),uploadQrcode:function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(){var e,i,a,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.axios.post("attachment/batch-down",{uid:localStorage.getItem("uid"),corp_id:this.corpId,ids:this.selectedRowKeys,type:1},{responseType:"blob"});case 2:e=t.sent,i=e.data,0==i.size?this.$message.error("下载失败！"):(a=i,s=new FileReader,s.readAsDataURL(a),s.onload=function(t){var e=document.createElement("a"),i=c()(new Date).format("YYYYMMDDHHmmss");e.download=i+".zip",e.href=t.target.result,document.body.appendChild(e),e.click(),document.body.removeChild(e)},this.selectedRowKeys=[],this.setCheckedBox(this.wayList));case 5:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),getGroupList:function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(){var e,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.axios.post("work-contact-way/group",{uid:localStorage.getItem("uid"),corp_id:this.corpId});case 2:e=t.sent,i=e.data,0!=i.error?this.$message.error(i.error_msg):(this.groupList=i.data.group,this.group||(this.group=this.groupList[0].key));case 5:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),onselect:function(t){t.length>0&&(this.group=t[0])},handleChangeGroup:function(){0==this.batchMoveType?this.moveQrcode1(this.qrCodeId):this.moveQrcode1(this.selectedRowKeys)},moveQrcode1:function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(e){var i,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.axios.post("work-contact-way/group-change",{uid:localStorage.getItem("uid"),corp_id:this.corpId,group_id:this.group,way_id:e});case 2:i=t.sent,a=i.data,0!=a.error?this.$message.error(a.error_msg):(this.$refs.menu.getGroupList(),this.batchTypeValue=!1,this.batchType="1",this.qrCodeId="",this.selectedRowKeys=[],this.group="",this.groupVisible=!1,this.isLoading=!0,this.selectedRowKeys=[],this.getWayList(1,this.pageSize));case 5:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),cancelChangeGroup:function(){this.qrCodeId="",this.group="",this.groupVisible=!1},modifyWay:function(t){this.$router.push({path:"/channelCode/add",query:{id:t}})},batchEditWelCome:function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:this.resetWelcome(),this.welComeVisible=!0;case 2:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),resetWelcome:function(){this.pushValue=!0,this.img=!1,this.textAreaValueHeader="",this.textContent="",this.chooseId=0,this.sketchAddType=1,this.sketchAddType1=1,this.url="",this.closeShowModal3=!1,this.msgUrl="",this.inputTitle="",this.digest="",this.index=0,this.modalUrlOk=!1,this.showModalApplet=!1,this.miniproAddType=1,this.miniproAddType1=1,this.material_id3="",this.showModalMinipro=!1,this.appletUrl="",this.appletInputTitle="",this.appid="",this.pageUrl="",this.closeModalApplet=!1,this.modalAppletOk=!1,this.disabledSync=0,this.materialSync=0,this.is_welcome_date=1,this.is_welcome_week=1,this.welcome_week_list=[{date:[],time:[{startTime:null,endTime:null,content:JSON.parse(JSON.stringify(y))}]}],this.welcome_date_list=[{date:[],time:[{startTime:null,endTime:null,content:JSON.parse(JSON.stringify(y))}]}],this.editorKey++,this.weekKey++,this.dateKey++},changeStatus:function(t){this.pushValue=t},changeMaterialSync:function(){1==this.materialSync1&&this.getGroup()},getGroup:function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(e){var i,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.axios.post("attachment/group",{uid:localStorage.getItem("uid"),is_channel:1});case 2:i=t.sent,a=i.data,0!=a.error?this.$message.error(a.error_msg):(this.groupList1=a.data.group,this.selectGroupId1=e||this.groupList1[0].key);case 5:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),checkedOut:function(){var t=this,e=!1;if(this.pushValue){if(""==this.textContent.trim().replace(/\n/g,"")&&!this.img&&!this.modalUrlOk&&!this.modalAppletOk)return this.$message.warning("默认欢迎语内容不能为空！"),!1;if(2==this.is_welcome_week){for(var i=0;i<this.welcome_week_list.length;i++){var a=this.welcome_week_list[i];if(0==a.date.length)return t.$message.warning("请填写周期欢迎语"+(i+1)+"的周期！"),e=!0,!1;for(var s=0;s<a.time.length;s++){var n=a.time[s];if(null!=n.startTime&&null!=n.endTime||(t.$message.warning("请填写周期欢迎语"+(i+1)+"时间段"+(s+1)+"！"),e=!0),e)return!1;if(c()(n.startTime).format("HH:mm")>=c()(n.endTime).format("HH:mm")&&"00:00"!=c()(n.endTime).format("HH:mm"))return t.$message.warning("周期欢迎语"+(i+1)+"的时间段"+(s+1)+"的开始时间需早于结束时间，请修改！"),e=!0,!1;for(var r=s+1;r<a.time.length;r++){var o=c()(a.time[r].startTime).format("HH:mm"),l=c()(n.startTime).format("HH:mm"),p=c()(a.time[r].endTime).format("HH:mm"),d=c()(n.endTime).format("HH:mm");if(o>=l&&o<d||p>l&&p<=d||o>=l&&"00:00"==d||p>l&&"00:00"==d||l>=o&&l<p||d>o&&p>=d||p==d&&o==l)return t.$message.warning("周期欢迎语"+(i+1)+"的时间段"+(s+1)+"个和时间段"+(r+1)+"存在冲突！"),e=!0,!1}if(e)return!1;if(""!=n.content.textContent.trim().replace(/\n/g,"")||n.content.img||n.content.modalUrlOk||n.content.modalAppletOk||(t.$message.warning("周期欢迎语"+(i+1)+"的时间段"+(s+1)+"欢迎语内容不能为空！"),e=!0),e)return!1}if(e)return!1}if(e)return!1}if(2==this.is_welcome_date){for(var m=0;m<this.welcome_date_list.length;m++){var h=this.welcome_date_list[m];if(0==h.date.length)return t.$message.warning("请填写特殊时期欢迎语"+(m+1)+"的时期！"),e=!0,!1}if(e)return!1;for(var u=0;u<this.welcome_date_list.length;u++){for(var g=u+1;g<t.welcome_date_list.length;g++){var f=c()(t.welcome_date_list[g].date[0]).format("YYYY-MM-DD"),v=c()(t.welcome_date_list[u].date[0]).format("YYYY-MM-DD"),y=c()(t.welcome_date_list[g].date[1]).format("YYYY-MM-DD"),_=c()(t.welcome_date_list[u].date[1]).format("YYYY-MM-DD");if(f>=v&&f<_||y>v&&y<=_||f>=v&&"00:00"==_||y>v&&"00:00"==_||v>=f&&v<y||_>f&&endTime>=_||y==_&&f==v)return t.$message.warning("特殊时期欢迎语"+(u+1)+"和特殊时期欢迎语"+(g+1)+"日期存在冲突！"),e=!0,!1}if(e)return!1;for(var w=this.welcome_date_list[u],x=0;x<w.time.length;x++){var b=w.time[x];if(null==b.startTime||null==b.endTime)return t.$message.warning("请填写特殊时期欢迎语"+(u+1)+"时间段"+(x+1)+"！"),e=!0,!1;if(c()(b.startTime).format("HH:mm")>=c()(b.endTime).format("HH:mm")&&"00:00"!=c()(b.endTime).format("HH:mm"))return t.$message.warning("特殊时期欢迎语"+(u+1)+"的时间段"+(x+1)+"的开始时间需早于结束时间，请修改！"),e=!0,!1;if(""==b.content.textContent.trim().replace(/\n/g,"")&&!b.content.img&&!b.content.modalUrlOk&&!b.content.modalAppletOk)return t.$message.warning("特殊时期欢迎语"+(u+1)+"的时间段"+(x+1)+"欢迎语内容不能为空！"),e=!0,!1;for(var k=x+1;k<w.time.length;k++){var T=c()(w.time[k].startTime).format("HH:mm"),S=c()(b.startTime).format("HH:mm"),L=c()(w.time[k].endTime).format("HH:mm"),C=c()(b.endTime).format("HH:mm");if(T>=S&&T<C||L>S&&L<=C||T>=S&&"00:00"==C||L>S&&"00:00"==C||S>=T&&S<L||C>T&&L>=C||L==C&&T==S)return t.$message.warning("特殊时期欢迎语"+(u+1)+"的时间段"+(x+1)+"个和时间段"+(k+1)+"存在冲突！"),e=!0,!1}if(e)return!1}if(e)return!1}if(e)return!1}}return!0},handleWelcome:function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(){var e,i,a,s,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(this.checkedOut()){t.next=2;break}return t.abrupt("return",!1);case 2:return e={},e.uid=localStorage.getItem("uid"),e.status=this.pushValue?1:0,e.add_type=this.index,e.text_content=this.textContent,e.media_id=this.material_id,e.link_title=this.inputTitle,e.link_attachment_id=this.material_id,e.link_desc=this.digest,e.link_url=this.url,e.mini_title=this.appletInputTitle,e.mini_pic_media_id=this.material_id,e.mini_appid=this.appid,e.mini_page=this.pageUrl,e.attachment_id=this.material_id3||this.material_id1,e.materialSync=this.materialSync,e.groupId=this.selectGroupId,e.ids=this.selectedRowKeys,e.is_welcome_date=this.is_welcome_date,e.is_welcome_week=this.is_welcome_week,i=[],2==e.is_welcome_week&&this.welcome_week_list.forEach((function(t){var e=[];t.time.forEach((function(t){e.push({start_time:c()(t.startTime).format("HH:mm"),end_time:c()(t.endTime).format("HH:mm"),content:{add_type:t.content.index,text_content:t.content.textContent,media_id:t.content.material_id||"",link_title:t.content.inputTitle||"",link_attachment_id:t.content.material_id||"",link_desc:t.content.digest||"",link_url:t.content.url||"",mini_title:t.content.appletInputTitle||"",mini_pic_media_id:t.content.material_id||"",mini_appid:t.content.appid||"",mini_page:t.content.pageUrl||"",attachment_id:t.content.material_id3||t.content.material_id1||"",materialSync:t.content.materialSync||0,groupId:t.content.selectGroupId||""}})})),i.push({date:JSON.parse(JSON.stringify(t.date)),time:JSON.parse(JSON.stringify(e))})})),e.welcome_week_list=i,a=[],2==e.is_welcome_date&&this.welcome_date_list.forEach((function(t){var e=[c()(t.date[0]).format("YYYY-MM-DD"),c()(t.date[1]).format("YYYY-MM-DD")],i=[];t.time.forEach((function(t){i.push({start_time:c()(t.startTime).format("HH:mm"),end_time:c()(t.endTime).format("HH:mm"),content:{add_type:t.content.index,text_content:t.content.textContent||"",media_id:t.content.material_id||"",link_title:t.content.inputTitle||"",link_attachment_id:t.content.material_id||"",link_desc:t.content.digest||"",link_url:t.content.url||"",mini_title:t.content.appletInputTitle,mini_pic_media_id:t.content.material_id||"",mini_appid:t.content.appid||"",mini_page:t.content.pageUrl||"",attachment_id:t.content.material_id3||t.content.material_id1||"",materialSync:t.content.materialSync||0,groupId:t.content.selectGroupId||""}})})),a.push({date:JSON.parse(JSON.stringify(e)),time:JSON.parse(JSON.stringify(i))})})),e.welcome_date_list=a,t.next=30,this.axios.post("work-contact-way/edit-welcome",e);case 30:s=t.sent,n=s.data,0!=n.error?this.$message.error(n.error_msg):(this.$message.success("编辑成功"),this.welComeVisible=!1,this.isLoading=!0,this.groupLoading=!1,this.selectedRowKeys=[],this.resetWelcome(),this.getWayList(this.page,this.pageSize));case 33:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),handleCancleWelcome:function(){this.resetWelcome(),this.welComeVisible=!1},getPopupContainer2:function(t){return t},visibleChange:function(t){t||this.popoverKey++},choosePic:function(t,e,i,a){var s=this;1==e?(this.welcomeType=e,this.weekIndex=i,this.wTimeIndex=a,s=this.welcome_week_list[i].time[a].content):2==e?(this.welcomeType=e,this.weekIndex=i,this.wTimeIndex=a,s=this.welcome_date_list[i].time[a].content):(this.welcomeType="",this.weekIndex="",this.wTimeIndex=""),this.comefrom=3==t?"3":"1",this.chooseId=1==t?Number(s.material_id||0):Number(this.material_id0||0),s.popVisible=!1,s.index=t,this.typeValue2=2,this.showModal3=!0,this.showModalUrl=!1,this.showModalApplet=!1},changeSketchAddType:function(){0==this.sketchAddType&&(this.materialSync1=0),this.disabledSync1=0,this.msgUrl1="",this.inputTitle1="",this.digest1="",this.url1="",this.closeShowModal3=!1,this.material_id0="",this.material_id11=""},changeMiniproAddType:function(){0==this.sketchAddType&&(this.materialSync=0),this.disabledSync1=0,this.appletUrl1="",this.appletInputTitle1="",this.appid1="",this.pageUrl1="",this.closeShowModal3=!1,this.closeModalApplet=!1,this.material_id0="",this.material_id31=""},chooseUrl:function(t,e,i,a){this.showModalUrl=!0;var s=this;1==e?(this.welcomeType=e,this.weekIndex=i,this.wTimeIndex=a,s=this.welcome_week_list[i].time[a].content):2==e?(this.welcomeType=e,this.weekIndex=i,this.wTimeIndex=a,s=this.welcome_date_list[i].time[a].content):(this.welcomeType="",this.weekIndex="",this.wTimeIndex=""),s.popVisible=!1,s.index!==t&&(s.msgUrl="",s.inputTitle="",s.digest="",s.url="",s.modalUrlOk=!1,s.material_id="",s.material_id1="",s.selectGroupId="",s.materialSync=0,s.disabledSync=0),this.closeShowModal3=!1,1==s.sketchAddType1&&s.msgUrl&&(this.closeShowModal3=!0),this.msgUrl1=s.msgUrl,this.inputTitle1=s.inputTitle,this.digest1=s.digest,this.url1=s.url,this.material_id0=s.material_id,this.material_id11=s.material_id1,this.sketchAddType=s.sketchAddType1,this.selectGroupId1=s.selectGroupId,this.materialSync1=s.materialSync,this.disabledSync1=s.disabledSync,s.index=t},openShowModal:function(){this.comefrom="1",this.material_id11?this.chooseId=Number(this.material_id11):this.chooseId=0,this.comefrom="1",this.typeValue2=1,this.showModal3=!0,this.popVisible=!1,this.showModalUrl=!1},openShowModalMinipro:function(){this.material_id31?this.chooseId=Number(this.material_id31):this.chooseId=0,this.typeValue2=7,this.showModalMinipro=!0,this.popVisible=!1,this.showModalUrl=!1},handleUrl:function(){var t=/^([hH][tT]{2}[pP]:|[hH][tT]{2}[pP][sS]:)((\\|\/)+)/;if(1==this.sketchAddType){if(""==this.msgUrl1)return this.$message.error("请选择图片封面"),!1;if(""==this.inputTitle1)return this.$message.error("请填写标题"),!1;if(!t.test(this.url1))return this.$message.error("请检查跳转链接格式是否正确(https://或http://开头)"),!1}else if(""==this.material_id11)return this.$message.error("请选择图文"),!1;var e=this;1==this.welcomeType?e=this.welcome_week_list[this.weekIndex].time[this.wTimeIndex].content:2==this.welcomeType&&(e=this.welcome_date_list[this.weekIndex].time[this.wTimeIndex].content),e.sketchAddType1=this.sketchAddType,e.msgUrl=this.msgUrl1,e.inputTitle=this.inputTitle1,e.digest=this.digest1,e.url=this.url1,e.materialSync=this.materialSync1,e.selectGroupId=this.selectGroupId1,e.material_id1=this.material_id11,e.material_id=this.material_id0,e.selectGroupId1=this.selectGroupId,e.modalUrlOk=!0,this.showModalUrl=!1},handleCancelUrl:function(){this.modalUrlOk||(this.material_id1="",this.msgUrl="",this.inputTitle="",this.digest="",this.url="",this.closeShowModal3=!1,this.index=0),this.showModalUrl=!1},modalVisibleChange2:function(t,e,i,a){if("ok"==t){var s=this;1==this.welcomeType?s=this.welcome_week_list[this.weekIndex].time[this.wTimeIndex].content:2==this.welcomeType&&(s=this.welcome_date_list[this.weekIndex].time[this.wTimeIndex].content),3==s.index&&1==this.miniproAddType?this.$refs.cropper.edit(a.local_path,a.file_name):3==s.index&&0==this.miniproAddType?(this.appletInputTitle1=a.file_name,this.appletUrl1=a.local_path,this.material_id31=i,this.closeModalApplet=!0,this.showModalApplet=!0):this.uploadMedia(i)}else{var n=this;1==this.welcomeType?n=this.welcome_week_list[this.weekIndex].time[this.wTimeIndex].content:2==this.welcomeType&&(n=this.welcome_date_list[this.weekIndex].time[this.wTimeIndex].content),1==n.index?n.img||(n.index=0):2==n.index?this.showModalUrl=!0:3==n.index&&(this.showModalApplet=!0)}this.showModalMinipro=!1,this.showModal3=!1},cancleAppletPic:function(){this.showModalApplet=!0},uploadAppletPic:function(t,e){this.uploadMedia(t)},uploadMedia:function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(e){var i,a,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.axios.post("work-material/upload-media",{corp_id:this.corpId,suite_id:this.suite_id,attachment_id:e});case 2:i=t.sent,a=i.data,0!=a.error?this.$message.error(a.error_msg):isNaN(e)||""==e?this.$message.error("请选择素材"):(s=this,1==this.welcomeType?s=this.welcome_week_list[this.weekIndex].time[this.wTimeIndex].content:2==this.welcomeType&&(s=this.welcome_date_list[this.weekIndex].time[this.wTimeIndex].content),1==s.index?(s.material_id=a.data.id,s.img=a.data.local_path,s.fileName=a.data.file_name):2==s.index?(0==this.sketchAddType?(this.material_id11=e,this.msgUrl1=a.data.artList[0].qy_local_path,this.url1=a.data.artList[0].content_source_url,this.inputTitle1=a.data.artList[0].title,this.digest1=a.data.artList[0].digest):(this.material_id0=e,this.msgUrl1=a.data.local_path),this.showModalUrl=!0,this.closeShowModal3=!0):3==s.index&&(this.material_id0=e,this.appletUrl1=a.data.local_path,this.closeModalApplet=!0,this.showModalApplet=!0));case 5:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),chooseApplet:function(t,e,i,a){this.showModalApplet=!0;var s=this;1==e?(this.welcomeType=e,this.weekIndex=i,this.wTimeIndex=a,s=this.welcome_week_list[i].time[a].content):2==e?(this.welcomeType=e,this.weekIndex=i,this.wTimeIndex=a,s=this.welcome_date_list[i].time[a].content):(this.welcomeType="",this.weekIndex="",this.wTimeIndex=""),s.popVisible=!1,s.index!==t&&(s.appletUrl="",s.appletInputTitle="",s.appid="",s.pageUrl="",s.closeModalApplet=!1,s.materialSync=0,s.disabledSync=0),this.closeModalApplet=!1,1==s.miniproAddType1&&s.appletUrl&&(this.closeModalApplet=!0),this.appletUrl1=s.appletUrl,this.appletInputTitle1=s.appletInputTitle,this.appid1=s.appid,this.pageUrl1=s.pageUrl,this.material_id0=s.material_id,this.material_id31=s.material_id3,this.selectGroupId1=s.selectGroupId,this.miniproAddType=s.miniproAddType1,this.materialSync1=s.materialSync,this.disabledSync1=s.disabledSync,s.index=t},handleApplet:function(){if(1==this.miniproAddType){if(""==this.appletUrl1)return this.$message.error("请选择图片封面"),!1;if(""==this.appletInputTitle1)return this.$message.error("请填写标题"),!1;if(this.appletInputTitle1.length<4)return this.$message.error("小程序标题长度需在4-12个字符"),!1;if(""==this.appid1)return this.$message.error("请填写小程序AppID"),!1;if(""==this.pageUrl1)return this.$message.error("请填写小程序路径"),!1}else if(""==this.material_id31)return this.$message.error("请选择小程序"),!1;var t=this;1==this.welcomeType?t=this.welcome_week_list[this.weekIndex].time[this.wTimeIndex].content:2==this.welcomeType&&(t=this.welcome_date_list[this.weekIndex].time[this.wTimeIndex].content),t.miniproAddType1=this.miniproAddType,t.appletUrl=this.appletUrl1,t.appletInputTitle=this.appletInputTitle1,t.appid=this.appid1,t.pageUrl=this.pageUrl1,t.material_id3=this.material_id31,t.material_id=this.material_id0,t.selectGroupId=this.selectGroupId1,t.materialSync=this.materialSync1,t.modalAppletOk=!0,this.showModalApplet=!1},handleCancelApplet:function(){this.showModalApplet=!1,this.modalAppletOk||(this.material_id3="",this.appletUrl="",this.appletInputTitle="",this.appid="",this.pageUrl="",this.closeModalApplet=!1,this.index=0)},checkout:function(t){t.length<4&&this.$message.warning("小程序标题长度需在4-12个字符")},deleteWelcome:function(t,e,i){var a=this;1==t?a=this.welcome_week_list[e].time[i].content:2==t&&(a=this.welcome_date_list[e].time[i].content),a.disabledSync=0,a.img="",a.msgUrl="",a.inputTitle="",a.digest="",a.url="",a.index=0,a.closeShowModal3=!1,a.modalUrlOk=!1,a.appletUrl="",a.appletInputTitle="",a.appid="",a.pageUrl="",a.closeModalApplet=!1,a.modalAppletOk=!1,a.material_id="",a.material_id1="",a.material_id3=""},initTextMsgContent:function(t){var e=this;return-1!==t.search(/[\/\[\]\(\)\|\$\*\?\+\-\_]/g)&&WEmoji.wechatEmojiKey.map((function(i){var a=new RegExp(e.utils.addslashes(i),"g"),s=WEmoji.getEmojiUrl(i);t=t.replace(a,'<img src="'+s+'" alt="'+i+'" height="21" width="21"/>')})),t.replace(/[\r\n|\n]/g,"<br/>")},getCursor:function(t){var e=getSelection();if(e){var i=e.anchorNode,a=!1;while(i&&i.nodeType!=i.DOCUMENT_NODE){var s=i.classList;if(s&&s.contains("content-editable")){a=!0;break}i=i.parentNode}a&&(t.lastRange=e.getRangeAt(0),t.lastNode=i)}},changeText:function(t,e){this.textContent=t,this.textAreaValueHeader=e},changeText1:function(t,e,i,a,s){1==i?(this.welcome_week_list[a].time[s].content.textContent=t,this.welcome_week_list[a].time[s].content.textAreaValueHeader=e):2==i&&(this.welcome_date_list[a].time[s].content.textContent=t,this.welcome_date_list[a].time[s].content.textAreaValueHeader=e)},changeIsWelcomeWeek:function(){this.is_welcome_week=1==this.is_welcome_week?2:1},isDisabled:function(t,e){var i=[];return this.welcome_week_list.forEach((function(e,a){t!=a&&(i=i.concat(e.date))})),i.indexOf(e)>-1},selctedWeekDay:function(t,e){var i=this.welcome_week_list[t].date.indexOf(e);i>-1?this.welcome_week_list[t].date.splice(i,1):this.welcome_week_list[t].date.push(e),this.weekKey++},addWelcomeWeek:function(t,e){var i=this;if("add"==e)this.welcome_week_list.push({date:[],time:[{startTime:null,endTime:null,content:JSON.parse(JSON.stringify(y))}]}),this.weekKey++,this.$nextTick((function(){i.weekTabKey=i.welcome_week_list.length-1}));else if("remove"==e){if(this.welcome_week_list.length<2)return!1;this.welcome_week_list.splice(t,1),t<=this.weekTabKey&&0!=this.weekTabKey&&this.weekTabKey--,this.weekKey++}},addWelcomeWeekTime:function(t){this.welcome_week_list[t].time.push({startTime:null,endTime:null,content:JSON.parse(JSON.stringify(y))}),this.weekKey++},deleteWelcomeWeekTime:function(t,e){this.welcome_week_list[t].time.splice(e,1),this.weekKey++},changeIsWelcomeDate:function(){this.is_welcome_date=1==this.is_welcome_date?2:1},addWelcomeDate:function(t,e){var i=this;if("add"==e)this.welcome_date_list.push({date:[],time:[{startTime:null,endTime:null,content:JSON.parse(JSON.stringify(y))}]}),this.dateKey++,this.$nextTick((function(){i.dateTabKey=i.welcome_date_list.length-1}));else if("remove"==e){if(this.welcome_date_list.length<2)return!1;this.welcome_date_list.splice(t,1),t<=this.dateTabKey&&0!=this.dateTabKey&&this.dateTabKey--,this.dateKey++}},addWelcomeDateTime:function(t){this.welcome_date_list[t].time.push({startTime:null,endTime:null,content:JSON.parse(JSON.stringify(y))}),this.dateKey++},deleteWelcomeDateTime:function(t,e){this.welcome_date_list[t].time.splice(e,1),this.dateKey++}},created:function(){var t=this;if(document.addEventListener("selectionchange",(function(){t.getCursor(self)})),"all"==localStorage.getItem("permissionButton"))this.isShowChoose=!0;else{var e=localStorage.getItem("permissionButton").split(",");-1==e.indexOf("channel-group-move")&&-1==e.indexOf("channel-down")&&-1==e.indexOf("channel-edit")?this.isShowChoose=!1:this.isShowChoose=!0}this.getUserList(),this.getPartyList()},beforeRouteEnter:function(t,e,i){"/channelCode/add"==e.path&&"1"==t.query.isRefresh?i((function(e){e.selectedRowKeys=[],("undefined"==typeof t.query.groupId||0!=e.groupId.length&&e.groupId[0]!=t.query.groupId)&&(e.type=0,e.title="",e.isLoading=!0,e.page=1,e.pageSize=15,e.batchType="1",e.groupId=[],e.groupId.push(t.query.groupId),e.batchTypeValue=!1),e.$refs.menu.id=t.query.groupId,e.$refs.menu.getGroupList()})):"/channelCode/add"==e.path&&"undefined"==typeof t.query.isRefresh&&i((function(t){t.selectedRowKeys=[],t.type=0,t.title="",t.isLoading=!0,t.page=1,t.pageSize=15,t.batchType="1",t.batchTypeValue=!1,t.getWayList()})),"/channelCode/add"!=e.path&&"/channelCode/statistics"!=e.path&&i((function(t){t.type=0,t.title="",t.selectedRowKeys=[],t.isLoading=!0,t.page=1,t.pageSize=15,t.groupId="",t.batchType="1",t.batchTypeValue=!1,t.$refs.menu.id="",t.$refs.menu.getGroupList()})),i()}},k=b,T=(i("2541"),i("2877")),S=Object(T["a"])(k,a,s,!1,null,"2f7eaa44",null);e["default"]=S.exports},"56b6":function(t,e,i){"use strict";var a=i("b0fe"),s=i.n(a);s.a},"5fdf":function(t,e,i){e=t.exports=i("2350")(!1),e.push([t.i,".changeType-text[data-v-81a399ca]{background:#fff2db;border:1px solid #ffdda6;border-radius:2px;padding:7px 27px 6px 10px;font-size:12px;width:100%;margin-top:12px;max-width:673px;line-height:20px;margin-bottom:15px}.content-editable[data-v-81a399ca]{font-size:14px;line-height:21px;padding:15px;border:1px solid #d9d9d9;height:155px;overflow:auto}.content-editable[data-v-81a399ca] p{margin:0;word-break:break-word}",""])},"69f5":function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABYAAAAWCAQAAABuvaSwAAAAY0lEQVR42r2SQQ1AIQxDkYIEJCFlacMdR+CIOeAnYKAkH7brO7x1DeHplFSSiLJycrJq8Nyrwb5gF43R0WXrW4OMgYF8cCDG/2kg0+mixs0asbGJTzlL46hItmATrS1afJvTB40bQb8Be38ZAAAAAElFTkSuQmCC"},"6c7b":function(t,e,i){var a=i("5ca1");a(a.P,"Array",{fill:i("36bd")}),i("9c6c")("fill")},"73ec":function(t,e,i){var a=i("cff6");"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var s=i("499e").default;s("acd1c198",a,!0,{sourceMap:!1,shadowMode:!1})},8871:function(t,e,i){var a=i("c6eb");"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var s=i("499e").default;s("04a8221b",a,!0,{sourceMap:!1,shadowMode:!1})},"92dd":function(t,e,i){var a=i("2211");"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var s=i("499e").default;s("692663ae",a,!0,{sourceMap:!1,shadowMode:!1})},95204:function(t,e,i){"use strict";var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("a-select",{staticStyle:{width:"100%"},attrs:{showSearch:"",optionFilterProp:"children",filterOption:!1,placeholder:"请选择企业成员",disabled:t.disabled},on:{focus:t.focusSelect,select:t.changeSelect,popupScroll:t.popScroll,search:t.searchName},scopedSlots:t._u([{key:"dropdownRender",fn:function(e){return i("div",{},[i("v-nodes",{attrs:{vnodes:e}}),i("a-spin",{staticStyle:{position:"absolute",bottom:"50%",left:"0",right:"0"},attrs:{tip:"Loading...",size:"large",spinning:t.isLoading}})],1)}}]),model:{value:t.userId,callback:function(e){t.userId=e},expression:"userId"}},t._l(t.userList,(function(e,a){return i("a-select-option",{key:e.id},[t._v("\n\t\t\t"+t._s(e.name)+"\n\t\t")])})),1)],1)},s=[],n=(i("96cf"),i("3b8d")),r=(i("c5f6"),{props:{callback:{type:Function,default:null},index:{type:Number,default:""},index2:{type:Number,default:""},disabled:{type:Boolean,default:!1},getFisrstStaff:{type:Boolean,default:!1},type:{type:Number,default:0}},components:{VNodes:{functional:!0,render:function(t,e){return e.props.vnodes}}},data:function(){var t=localStorage.getItem("corpId")?localStorage.getItem("corpId"):"";return{corpId:t,userList:[],userId:[],userName:"",page:1,count:0,isLoading:!1}},created:function(){var t=this;this.$nextTick((function(){t.getAllStaffList()}))},mounted:function(){},methods:{getAllStaffList:function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(){var e,i,a,s,n=arguments;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=n.length>0&&void 0!==n[0]?n[0]:1,this.isLoading=!0,i={corp_id:this.corpId,name:this.userName,user_id:this.userId,is_all:0,page:e},1==this.type&&(i.sub_id=localStorage.getItem("sub_id"),i.isMasterAccount=localStorage.getItem("isMasterAccount")),t.next=6,this.axios.post("work-user/get-all-user",i);case 6:a=t.sent,s=a.data,0!=s.error?(this.isLoading=!1,this.$message.error(s.error_msg)):(this.isLoading=!1,this.count=s.data.count,this.getFisrstStaff&&(this.userId=s.data.info[0].id,null!==this.callback&&"function"===typeof this.callback&&(""===this.index&&""===this.index2?this.callback("ok",s.data.info[0].id):this.callback("ok",s.data.info[0].id,this.index,this.index2))),this.userList=1==e?s.data.info:this.userList.concat(s.data.info),this.page=e);case 9:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),changeSelect:function(t){null!==this.callback&&"function"===typeof this.callback&&(""===this.index&&""===this.index2?this.callback("ok",t):this.callback("ok",t,this.index,this.index2))},focusSelect:function(){""!=this.userName&&(this.page=1,this.userList=[],this.userName="",this.getAllStaffList())},searchName:function(t){this.userName=t,this.getAllStaffList()},popScroll:function(t){var e=t.target;e.scrollTop+e.offsetHeight===e.scrollHeight&&this.userList.length<this.count&&(this.page++,this.getAllStaffList(this.page))}},watch:{userId:{handler:function(t){this.getAllStaffList()},deep:!0},getFisrstStaff:{handler:function(t){this.getAllStaffList()},deep:!0}}}),o=r,l=i("2877"),c=Object(l["a"])(o,a,s,!1,null,"23e05649",null);e["a"]=c.exports},abb0:function(t,e,i){"use strict";var a=i("dd91"),s=i.n(a);s.a},b0fe:function(t,e,i){var a=i("fe92");"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var s=i("499e").default;s("1ee44db8",a,!0,{sourceMap:!1,shadowMode:!1})},c6eb:function(t,e,i){e=t.exports=i("2350")(!1),e.push([t.i,".sider-one-txt[data-v-0bd265d0]{height:40px;line-height:40px;text-align:left;margin-left:10px}.team-add[data-v-0bd265d0]{width:100%;height:50px;line-height:50px}.team-add-icon[data-v-0bd265d0],.team-add-title[data-v-0bd265d0]{display:inline-block;margin-left:10px}.team-add-icon[data-v-0bd265d0]{color:#1e90ff;cursor:pointer;vertical-align:initial}.group-tree1[data-v-0bd265d0]::-webkit-scrollbar{width:4px;height:6px}.group-tree1[data-v-0bd265d0]::-webkit-scrollbar-track-piece{background-color:#fff}.group-tree1[data-v-0bd265d0]::-webkit-scrollbar-thumb{background:#d3d3d3}.active[data-v-0bd265d0]{color:#1890ff}.operation[data-v-0bd265d0]{margin-bottom:8px;cursor:pointer}.operation2[data-v-0bd265d0]{margin-bottom:0;cursor:pointer}.operation1[data-v-0bd265d0]{margin-bottom:0;color:#e2e2e2}.operation[data-v-0bd265d0]:hover{color:#1890ff}[data-v-0bd265d0] .ant-tree-node-content-wrapper{display:inline-block;width:calc(100% - 25px)}[data-v-0bd265d0] .ant-tree-switcher-icon{vertical-align:initial}[data-v-0bd265d0] .ant-tree-node-content-wrapper.ant-tree-node-selected{background-color:#fff!important}[data-v-0bd265d0] .ant-popover-inner .ant-popover-inner-content .ant-popover-buttons{display:none!important}.more-operation[data-v-0bd265d0]:hover{color:#1890ff}[data-v-0bd265d0] .ant-tree li .ant-tree-node-content-wrapper:hover{background-color:#fff}.ant-tree li span[draggable=true][data-v-0bd265d0],[data-v-0bd265d0] .ant-tree li span[draggable]{line-height:25px;height:30px}[data-v-0bd265d0] .ant-tree li span.ant-tree-switcher{vertical-align:sub}",""])},cafa:function(t,e,i){"use strict";var a=i("8871"),s=i.n(a);s.a},cff6:function(t,e,i){e=t.exports=i("2350")(!1),e.push([t.i,".content-editable[data-v-2f7eaa44]{font-size:14px;line-height:21px;padding:15px;border:1px solid #d9d9d9;height:110px;overflow:auto}.content-editable[data-v-2f7eaa44] p{margin:0;word-break:break-word}#components-layout-demo-basic[data-v-2f7eaa44]{height:100%}#components-layout-demo-basic .ant-layout-header[data-v-2f7eaa44]{background:#fff;border-bottom:1px solid #e2e2e2;height:50px;min-width:885px;width:100%;line-height:50px}[data-v-2f7eaa44] .ant-layout-header{padding:0 20px;font-size:16px;text-align:left}#components-layout-demo-basic .ant-layout-sider[data-v-2f7eaa44]{background:#fff;-webkit-box-flex:0!important;-ms-flex:0 0 250px!important;flex:0 0 250px!important;max-width:250px!important;min-width:250px!important;width:250px!important;border-right:1px solid #e2e2e2}#components-layout-demo-basic .ant-layout-content[data-v-2f7eaa44]{margin:0 20px 20px;min-width:885px;width:100%;padding-right:40px}.content-hd[data-v-2f7eaa44]{height:60px;width:100%;min-width:885px;line-height:60px}.content-msg[data-v-2f7eaa44]{width:100%;margin-top:12px}.content-msg[data-v-2f7eaa44],.content-msg1[data-v-2f7eaa44]{border:1px solid #ffdda6;background:#fff2db;padding:10px}.content-msg1[data-v-2f7eaa44]{margin:0 0 5px 10px;text-align:left}.content-bd[data-v-2f7eaa44]{background:#fff;min-height:120px;border:1px solid #e2e2e2;min-width:885px;width:100%}#components-layout-demo-basic>.ant-layout[data-v-2f7eaa44]{margin-bottom:48px}#components-layout-demo-basic>.ant-layout[data-v-2f7eaa44]:last-child{margin:0}.ant-layout.ant-layout-has-sider[data-v-2f7eaa44],.list[data-v-2f7eaa44]{height:100%}.btn-primary[data-v-2f7eaa44]{margin-left:20px}.tag-name[data-v-2f7eaa44]{padding:6px 14px;height:34px;font-size:13px;border:1px solid #d9d9d9;background-color:transparent!important;color:rgba(0,0,0,.65)}[data-v-2f7eaa44] .dark-row{background:#fafafa}[data-v-2f7eaa44] .light-row{background:#fff}.actionBtn[data-v-2f7eaa44]{margin-right:5px;margin-bottom:5px}[data-v-2f7eaa44] .ant-checkbox-inner{width:23px;height:23px}[data-v-2f7eaa44] .ant-checkbox-inner:after{width:6px;height:12px;-webkit-transform:rotate(45deg) scale(1) translate(-45%,-62%);transform:rotate(45deg) scale(1) translate(-45%,-62%)}.active1[data-v-2f7eaa44]{color:#1890ff}[data-v-2f7eaa44] .ant-tree-switcher-icon{vertical-align:initial}[data-v-2f7eaa44] .ant-tree-node-content-wrapper.ant-tree-node-selected{background-color:#fff!important}.group-tree[data-v-2f7eaa44]::-webkit-scrollbar{width:4px;height:4px}.group-tree[data-v-2f7eaa44]::-webkit-scrollbar-track-piece{background-color:#fff}.group-tree[data-v-2f7eaa44]::-webkit-scrollbar-thumb{background:#fff}.border-dashed[data-v-2f7eaa44]{border-bottom:1px dashed #e2e2e2}[data-v-2f7eaa44] .ant-tag-checkable{background-color:#fafafa;border-color:#d9d9d9}[data-v-2f7eaa44] .ant-tag-checkable-checked{background-color:#1890ff}.pull-right[data-v-2f7eaa44]{display:inline-block;width:280px;max-height:630px;height:390px;background:#fff;border:1px solid #d8d8d8;padding:24px;overflow:hidden}.url-text[data-v-2f7eaa44]{max-width:calc(100% - 74px);overflow:hidden;text-overflow:ellipsis;display:-webkit-box;-webkit-line-clamp:2;line-clamp:2;-webkit-box-orient:vertical;color:#a3a3a3}.msg_content_txt[data-v-2f7eaa44],.url-text[data-v-2f7eaa44]{float:left;word-break:break-word}.msg_content_txt[data-v-2f7eaa44]{line-height:21px;width:calc(100% - 46px);border:1px solid #e9e9e9;padding:10px 16px;border-radius:4px;font-size:14px;color:#1a1a1a;background:#fff}.item-info[data-v-2f7eaa44] p{margin:0;word-break:break-word}.upload-wrap[data-v-2f7eaa44]{width:96px;height:96px;text-align:center;border:1px dashed #d8d8d8;background:#fff;cursor:pointer;margin-bottom:10px;float:left}.upload-plus[data-v-2f7eaa44]{font-size:32px;line-height:96px;font-weight:300;color:#686868}[data-v-2f7eaa44] .ant-form-item-control{margin-left:15px;margin-bottom:10px}.upload-border[data-v-2f7eaa44]{background:#fff;border:1px dotted #d8d8d8;height:110px;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;cursor:pointer;margin-bottom:10px}[data-v-2f7eaa44] .ant-form-item-children{display:block}.mt[data-v-2f7eaa44]{margin-bottom:15px;overflow:hidden}.popover-menu[data-v-2f7eaa44]{cursor:pointer;text-align:center;display:inline-block;width:80px;border:1px solid rgba(0,0,0,.2)}.popover-menu1[data-v-2f7eaa44],.popover-menu2[data-v-2f7eaa44]{margin-left:10px}.popover-menu p[data-v-2f7eaa44]{margin-bottom:5px}.content[data-v-2f7eaa44]{border:1px solid #e2e2e2;min-width:760px;position:absolute;top:20px;left:20px;right:20px;background-color:#fafafa;margin-bottom:20px}.wrap[data-v-2f7eaa44]{display:inline-block;border:1px solid #e2d6d6;margin:auto;height:388px;width:254px;background:#f5f5f5;overflow-y:auto;-webkit-box-sizing:content-box;box-sizing:content-box}.msg_content_body[data-v-2f7eaa44]{border-radius:4px;font-size:14px;color:#333;margin:20px}[data-v-2f7eaa44] .ant-tabs-top-content{padding-bottom:10px!important;border:1px solid #e9e9e9}[data-v-2f7eaa44] .ant-tabs-tabpane-inactive{display:none}[data-v-2f7eaa44] .ant-tabs-bar{margin:0 0 5px 0}[data-v-2f7eaa44] .ant-input-number-handler-wrap{display:none}.batch-edit[data-v-2f7eaa44]:hover{color:#1890ff}[data-v-2f7eaa44] .ant-tabs-tab{font-size:15px;border:1px solid #e2e2e2}[data-v-2f7eaa44] .ant-tabs-nav{background-color:#fff}[data-v-2f7eaa44] .ant-tabs-tabpane-active{min-height:300px}[data-v-2f7eaa44] .ant-tabs-extra-content{width:25px;height:25px}[data-v-2f7eaa44] .ant-tabs-extra-content span i{width:25px;height:25px;color:#1890ff;border-color:#1890ff}",""])},d77d:function(t,e,i){"use strict";var a=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"sider-one"},[a("div",{staticClass:"sider-one-txt"},[t._v("选择企业微信")]),t.corpInfo[0]?a("a-select",{staticStyle:{width:"200px","margin-bottom":"20px"},attrs:{showSearch:"",optionFilterProp:"children"},on:{change:t.handleChange},model:{value:t.changeBackground,callback:function(e){t.changeBackground=e},expression:"changeBackground"}},[t._l(t.corpInfo,(function(e){return[a("a-select-option",{attrs:{value:e.corpid}},[t._v(t._s(e.corp_name))])]}))],2):t._e(),a("div",{ref:"corpInfo",staticClass:"wx-info",staticStyle:{position:"absolute"},on:{mousemove:t.corpInfoMouseOver,mouseout:t.corpInfoMouseOut}},[t._l(t.corpInfo,(function(e,s){return[a("div",{staticClass:"selectWx",class:{active:t.changeBackground==e.corpid},on:{click:function(i){return t.selectWx(e.corpid)}}},[a("img",{staticStyle:{width:"32px","border-radius":"4px"},attrs:{src:i("de05"),alt:""}}),a("span",{staticStyle:{"text-overflow":"ellipsis","white-space":"nowrap",overflow:"hidden",float:"right",width:"calc(100% - 35px)"}},[t._v(t._s(e.corp_name))])])]}))],2)],1)},s=[],n={name:"eWechat",props:{callback:{type:Function,default:null}},data:function(){var t=localStorage.getItem("corpId")?localStorage.getItem("corpId"):"";return{corpInfo:[],changeBackground:t}},created:function(){var t=this;this.$store.dispatch("getCorp",(function(e){t.corpInfo=e,null!==t.callback&&"function"===typeof t.callback&&t.callback(t.changeBackground)}))},methods:{handleChange:function(t){var e=this,i="";this.corpInfo.map((function(a){t==a.corpid&&(i=a.corp_name,e.$store.dispatch("changeCorp",a))})),this.changeBackground=t,this.$emit("changeWxId",t,i),2==localStorage.getItem("isMasterAccount")&&this.$store.dispatch("getPermissionButton")},selectWx:function(t){this.handleChange(t)},corpInfoMouseOver:function(){this.$refs.corpInfo.style.overflowY="auto"},corpInfoMouseOut:function(){this.$refs.corpInfo.style.overflowY="hidden"}}},r=n,o=(i("56b6"),i("2877")),l=Object(o["a"])(r,a,s,!1,null,"2e9ecca2",null);e["a"]=l.exports},dd91:function(t,e,i){var a=i("5fdf");"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var s=i("499e").default;s("0e18a934",a,!0,{sourceMap:!1,shadowMode:!1})},e488:function(t,e,i){"use strict";var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("medium-editor",{ref:"medium_editor",staticClass:"content-editable",attrs:{text:t.textAreaValueHeader,options:t.options,"custom-tag":"div"},on:{editorCreated:t.editorCreated,edit:t.changeContentInput}}),i("div",{staticStyle:{"margin-right":"15px","margin-top":"10px",float:"right"}},[t._v("\n\t\t"+t._s(t.wordNum)+"/"+t._s(t.wordLimit)+"\n\t")]),t.isNickName||t.isEmoji?i("div",{staticStyle:{padding:"0 15px","margin-top":"10px"}},[t._v("\n\t\t点击插入：\n\t\t"),t.isNickName?i("a-button",{staticClass:"ant-tag ant-tag-orange",attrs:{size:"small"},on:{click:t.addTag}},[t._v("客户名称\n\t\t")]):t._e(),t.isEmoji?i("a-popover",{attrs:{trigger:"click",destroyTooltipOnHide:!0},model:{value:t.emojiShow,callback:function(e){t.emojiShow=e},expression:"emojiShow"}},[i("VEmojiPicker",{attrs:{slot:"content",showSearch:!1},on:{select:t.onSelectEmoji},slot:"content"}),i("a-icon",{staticClass:"icon-btn",staticStyle:{cursor:"pointer"},attrs:{type:"smile"}})],1):t._e()],1):t._e(),i("div",{staticClass:"changeType-text"},[t._v("\n\t\t提示：火狐浏览器可能出现无法正确插入客户名称，请使用谷歌、360浏览器\n\t")])],1)},s=[],n=(i("6b54"),i("3b2b"),i("386d"),i("a481"),i("c5f6"),i("4884")),r=i.n(n),o=i("40cf"),l=i("79b5"),c={name:"channelCodeEditor",components:{VEmojiPicker:l["a"],"medium-editor":r.a},props:{text:{type:String,default:""},textValue:{type:String,default:""},isNickName:{type:Boolean,default:!0},isEmoji:{type:Boolean,default:!0},type:{type:Number,default:1},index:{type:Number,default:0},idx:{type:Number,default:0}},data:function(){return{textContent:"",textAreaValueHeader:"",emojiShow:!1,wordNum:0,wordLimit:1e3,mediumEditor:"",options:{toolbar:!1,placeholder:{text:""},anchorPreview:!1,paste:{forcePlainText:!0,cleanPastedHTML:!0,cleanAttrs:["class","style","dir","align","width","height","face","title","code","name","id","type","span","border","open","action","method","cols","for","rel","label","icon","value","max","min","classid"]}},keydownNode:!1,keydownNodeIndex:0}},mounted:function(){var t=this;this.textContent=this.text;var e=this.textContent.replace(/{nickname}/g," 客户名称 ").replace(/\n/g,"").replace(/(<\/?a.*?>)/g,"");this.wordNum=e.length,this.textAreaValueHeader="<p>"+this.textValue+"</p>",document.addEventListener("selectionchange",(function(){t.getCursor(self)}))},methods:{initTextMsgContent:function(t){var e=this;return-1!==t.search(/[\/\[\]\(\)\|\$\*\?\+\-\_]/g)&&o["a"].wechatEmojiKey.map((function(i){var a=new RegExp(e.utils.addslashes(i),"g"),s=o["a"].getEmojiUrl(i);t=t.replace(a,'<img src="'+s+'" alt="'+i+'" height="21" width="21"/>')})),t.replace(/[\r\n|\n]/g,"<br/>")},toggleDialogEmoji:function(){this.emojiShow=!this.emojiShow},onSelectEmoji:function(t){var e=this.mediumEditor.options.ownerDocument;this.wordLimit-this.wordNum>=2&&this.insertHTMLCommand(e,t.data),this.toggleDialogEmoji()},getCursor:function(t){var e=getSelection();if(e){var i=e.anchorNode,a=!1;while(i&&i.nodeType!=i.DOCUMENT_NODE){var s=i.classList;if(s&&s.contains("content-editable")){a=!0;break}i=i.parentNode}a&&(t.lastRange=e.getRangeAt(0),t.lastNode=i)}},insertHTMLCommand:function(t,e){if("undefined"===typeof self.lastNode||!self.lastNode.classList.contains("content-editable"))return!1;var i,a,s,n,o,l,c=["insertHTML",!1,e];if(i=self.lastRange,a=i.commonAncestorContainer,r.a.MediumEditor.util.isMediumEditorElement(a)&&!a.firstChild)i.selectNode(a.appendChild(t.createTextNode("")));else if(3===a.nodeType&&0===i.startOffset&&i.endOffset===a.nodeValue.length||3!==a.nodeType&&a.innerHTML===i.toString()){while(!r.a.MediumEditor.util.isMediumEditorElement(a)&&a.parentNode&&1===a.parentNode.childNodes.length&&!r.a.MediumEditor.util.isMediumEditorElement(a.parentNode))a=a.parentNode;i.selectNode(a)}i.deleteContents(),s=t.createElement("div"),s.innerHTML=e,n=t.createDocumentFragment();while(s.firstChild)o=s.firstChild,l=n.appendChild(o);i.insertNode(n),l&&(i=i.cloneRange(),i.setStartAfter(l),i.collapse(!0),r.a.MediumEditor.selection.selectRange(t,i)),t.execCommand.callListeners&&t.execCommand.callListeners(c,!0),this.wordNum=self.lastNode.textContent.length,this.wordNum<=this.wordLimit&&(this.textAreaValueHeader=self.lastNode.innerHTML.replace(/<pre([^>]*)>/g,"<p>").replace(/<\/pre>/g,"</p>").replace(/<font([^>]*)>/g,"<p>").replace(/<\/font>/g,"</p>").replace(/<div([^>]*)>/g,"<p>").replace(/<\/div>/g,"</p>"),"undefined"==typeof this.urlId?this.textContent=self.lastNode.innerHTML.replace(/(<p><span>)?<br([^>]*)>(<\/span>)?<\/p>/g,"</p>").replace(/<p([^>]*)>/g,"").replace(/<\/p>/g,"\n").replace(/(&nbsp;)?<span contenteditable="false" class="ant-tag ant-tag-orange">客户名称<\/span>(&nbsp;)?/g,"{nickname}").replace(/<br([^>]*)>/g,"\n").replace(/<span([^>]*)>/g,"").replace(/<\/span>/g,"").replace(/&nbsp;/g," ").replace(/miniprogramappid/g,"miniprogram-appid").replace(/miniprogrampath/g,"miniprogram-path"):this.textContent=self.lastNode.innerHTML.replace(/(<p><span>)?<br([^>]*)>(<\/span>)?<\/p>/g,"</p>").replace(/<br([^>]*)>/g,"\n").replace(/(&nbsp;)?<span contenteditable="false" class="ant-tag ant-tag-orange">客户名称<\/span>(&nbsp;)?/g,"{nickname}").replace(/([^<p>]+)<p([^>]*)>/g,"$1\n").replace(/<p([^>]*)>/g,"").replace(/<\/p>/g,"\n").replace(/<span([^>]*)>/g,"").replace(/<\/span>/g,"").replace(/&nbsp;/g," ").replace(/<div([^>]*)>/g,"\n").replace(/<\/div>/g,"").replace(/miniprogramappid/g,"miniprogram-appid").replace(/miniprogrampath/g,"miniprogram-path")),this.mediumEditor.origElements.scrollTop=this.mediumEditor.origElements.scrollHeight;var p={currentTarget:this.mediumEditor.origElements};this.mediumEditor.events.updateInput(p.currentTarget,p),this.$emit("changeText",this.textContent,this.textAreaValueHeader,this.type,this.index,this.idx)},editorCreated:function(t){this.mediumEditor=t,this.mediumEditor.subscribe("focus",this.editableFocus),this.mediumEditor.subscribe("editableKeydown",this.editableKeydown),this.mediumEditor.subscribe("editablePaste",this.editablePaste),delete self.lastRange,delete self.lastNode},editableFocus:function(t){""!==t.target.innerHTML&&"<br>"!=t.target.innerHTML&&"<p></p>"!=t.target.innerHTML||(t.target.innerHTML="<p><br/></p>")},editableKeydown:function(t){this.wordNum>=this.wordLimit&&8!=t.keyCode&&37!=t.keyCode&&38!=t.keyCode&&39!=t.keyCode&&40!=t.keyCode&&(65!=t.keyCode||!t.metaKey&&!t.ctrlKey)&&t.preventDefault(),86==t.keyCode&&(t.metaKey||t.ctrlKey),13==t.keyCode&&(this.keydownNodeIndex=0,this.getParentP4Label(self.lastRange.startContainer)),this.keydownNode=13==t.keyCode},getParentP4Label:function(t){"P"!=t.nodeName?this.getParentP4Label(t.parentNode):this.getPreviousSiblingIndex(t)},getPreviousSiblingIndex:function(t){t.previousSibling&&(this.keydownNodeIndex++,this.getPreviousSiblingIndex(t.previousSibling))},editablePaste:function(t,e){this.invlideText()},invlideText:function(){var t=this.mediumEditor.origElements,e=this.global.getRangeInfo(t,this.wordLimit),i=e.startNode,a=e.startOffset,s=e.endNode,n=e.endOffset;if("undefined"!==typeof i.nodeValue){var r=document.createRange();r.setStart(i,a),r.setEnd(s,n),r.deleteContents(),this.textAreaValueHeader=self.lastNode.innerHTML.replace(/<pre([^>]*)>/g,"<p>").replace(/<\/pre>/g,"</p>").replace(/<font([^>]*)>/g,"<p>").replace(/<\/font>/g,"</p>").replace(/<div([^>]*)>/g,"<p>").replace(/<\/div>/g,"</p>"),"undefined"==typeof this.urlId?this.textContent=self.lastNode.innerHTML.replace(/(<p><span>)?<br([^>]*)>(<\/span>)?<\/p>/g,"</p>").replace(/<p([^>]*)>/g,"").replace(/<\/p>/g,"\n").replace(/(&nbsp;)?<span contenteditable="false" class="ant-tag ant-tag-orange">客户名称<\/span>(&nbsp;)?/g,"{nickname}").replace(/<br([^>]*)>/g,"\n").replace(/<span([^>]*)>/g,"").replace(/<\/span>/g,"").replace(/&nbsp;/g," ").replace(/miniprogramappid/g,"miniprogram-appid").replace(/miniprogrampath/g,"miniprogram-path"):this.textContent=self.lastNode.innerHTML.replace(/(<p><span>)?<br([^>]*)>(<\/span>)?<\/p>/g,"</p>").replace(/<br([^>]*)>/g,"\n").replace(/(&nbsp;)?<span contenteditable="false" class="ant-tag ant-tag-orange">客户名称<\/span>(&nbsp;)?/g,"{nickname}").replace(/([^<p>]+)<p([^>]*)>/g,"$1\n").replace(/<p([^>]*)>/g,"").replace(/<\/p>/g,"\n").replace(/<span([^>]*)>/g,"").replace(/<\/span>/g,"").replace(/&nbsp;/g," ").replace(/<div([^>]*)>/g,"\n").replace(/<\/div>/g,"").replace(/miniprogramappid/g,"miniprogram-appid").replace(/miniprogrampath/g,"miniprogram-path"),this.wordNum=this.wordLimit}this.$emit("changeText",this.textContent,this.textAreaValueHeader,this.type,this.index,this.idx)},changeContentInput:function(t){""!=t.api.origElements.innerHTML&&"<br>"!=t.api.origElements.innerHTML||(t.api.origElements.innerHTML="<p><br/></p>");var e=/href="(?![a-zA-z]+:\/\/)[^"]*/g;if(e.test(t.api.origElements.innerHTML)&&(this.$message.error("请填写正确的链接"),this.mediumEditor.execAction("unlink")),self.lastNode&&(this.wordNum=self.lastNode.textContent.length,this.wordNum<=this.wordLimit?(this.textAreaValueHeader=t.api.origElements.innerHTML.replace(/<pre([^>]*)>/g,"<p>").replace(/<\/pre>/g,"</p>").replace(/<font([^>]*)>/g,"<p>").replace(/<\/font>/g,"</p>").replace(/<div([^>]*)>/g,"<p>").replace(/<\/div>/g,"</p>"),"undefined"==typeof this.urlId?this.textContent=self.lastNode.innerHTML.replace(/(<p><span>)?<br([^>]*)>(<\/span>)?<\/p>/g,"</p>").replace(/<p([^>]*)>/g,"").replace(/<\/p>/g,"\n").replace(/(&nbsp;)?<span contenteditable="false" class="ant-tag ant-tag-orange">客户名称<\/span>(&nbsp;)?/g,"{nickname}").replace(/<br([^>]*)>/g,"\n").replace(/<span([^>]*)>/g,"").replace(/<\/span>/g,"").replace(/&nbsp;/g," ").replace(/miniprogramappid/g,"miniprogram-appid").replace(/miniprogrampath/g,"miniprogram-path"):this.textContent=self.lastNode.innerHTML.replace(/(<p><span>)?<br([^>]*)>(<\/span>)?<\/p>/g,"</p>").replace(/<br([^>]*)>/g,"\n").replace(/(&nbsp;)?<span contenteditable="false" class="ant-tag ant-tag-orange">客户名称<\/span>(&nbsp;)?/g,"{nickname}").replace(/([^<p>]+)<p([^>]*)>/g,"$1\n").replace(/<p([^>]*)>/g,"").replace(/<\/p>/g,"\n").replace(/<span([^>]*)>/g,"").replace(/<\/span>/g,"").replace(/&nbsp;/g," ").replace(/<div([^>]*)>/g,"\n").replace(/<\/div>/g,"").replace(/miniprogramappid/g,"miniprogram-appid").replace(/miniprogrampath/g,"miniprogram-path"),this.$emit("changeText",this.textContent,this.textAreaValueHeader,this.type,this.index,this.idx)):this.invlideText(),this.keydownNode)){var i=self.lastNode.childNodes[this.keydownNodeIndex+1],a=document.createRange();a.setStart(i,0);var s=window.getSelection();s.removeAllRanges(),s.addRange(a),this.keydownNode=!1}},addTag:function(){if("undefined"==typeof this.mediumEditor.options.ownerDocument)var t=this.mediumEditor.options.ownerDocument;else t=this.mediumEditor.options.ownerDocument;var e='<span>&nbsp;<span contenteditable="false" class="ant-tag ant-tag-orange">客户名称</span>&nbsp;</span>';this.wordLimit-this.wordNum>=6&&this.insertHTMLCommand(t,e)}}},p=c,d=(i("02a0"),i("2877")),m=Object(d["a"])(p,a,s,!1,null,"57b876e3",null);e["a"]=m.exports},fe92:function(t,e,i){e=t.exports=i("2350")(!1),e.push([t.i,".sider-one[data-v-2e9ecca2]{padding:0 20px}.sider-one-txt[data-v-2e9ecca2]{height:60px;line-height:60px;text-align:left}.wx-info[data-v-2e9ecca2]{width:100%;position:absolute;left:0;top:100px;bottom:0;overflow:hidden}.wx-info[data-v-2e9ecca2]::-webkit-scrollbar{width:2px;height:100%}.wx-info[data-v-2e9ecca2]::-webkit-scrollbar-track-piece{background-color:#fff}.wx-info[data-v-2e9ecca2]::-webkit-scrollbar-thumb{background:#fff}.selectWx[data-v-2e9ecca2]{width:200px;margin-left:20px;height:50px;line-height:50px;cursor:pointer;padding-left:10px}.active[data-v-2e9ecca2]{background:#1e90ff;color:#fff}",""])}}]);