(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-24336b3d"],{"0463":function(t,e,a){"use strict";var s=a("c8ca"),i=a.n(s);i.a},"1c4c":function(t,e,a){"use strict";var s=a("9b43"),i=a("5ca1"),n=a("4bf8"),r=a("1fa8"),o=a("33a4"),c=a("9def"),l=a("f1ae"),d=a("27ee");i(i.S+i.F*!a("5cc5")((function(t){Array.from(t)})),"Array",{from:function(t){var e,a,i,p,u=n(t),h="function"==typeof this?this:Array,g=arguments.length,f=g>1?arguments[1]:void 0,m=void 0!==f,_=0,v=d(u);if(m&&(f=s(f,g>2?arguments[2]:void 0,2)),void 0==v||h==Array&&o(v))for(e=c(u.length),a=new h(e);e>_;_++)l(a,_,m?f(u[_],_):u[_]);else for(p=v.call(u),a=new h;!(i=p.next()).done;_++)l(a,_,m?r(p,f,[i.value,_],!0):i.value);return a.length=_,a}})},"4bef":function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAQAAADZc7J/AAABAElEQVR42s3VIY7CUBAG4LkEliC4xKJ6BA6AognXQBLCAVBYNBK3pim7zP8XBAJHSLhAZVURi+jC2+681xD4R89nZiYjIhojQRlQicYiolFQ8600EqZNAKbSpB0lyqcCBeYccIA5ihDgtO3JLdseTr7Ap9wFRx+g2HTuge8PH+AsjuBiBzZO4MsOHJzAwQ7kTiD3mcLsoX3muQcaV9s1DtnENUfssssR1i+6hRcD3GPFBaeccoEV9z7AUodoP4yxrUMs/wd26EtN0MeuBuBYDOH4LyDPWhYga1WXugpMxBhMnIBGVqD6S34B9nqvTUwaAUnNpZue689/DnuwTDUSuQJ1pL7YQ6lKkQAAAABJRU5ErkJggg=="},"4f7f":function(t,e,a){"use strict";var s=a("c26b"),i=a("b39a"),n="Set";t.exports=a("e0b8")(n,(function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}}),{add:function(t){return s.def(i(this,n),t=0===t?0:t,t)}},s)},"750c":function(t,e,a){e=t.exports=a("2350")(!1),e.push([t.i,"[data-v-eaddd328] .ant-tree-checkbox{float:right}[data-v-eaddd328] .ant-tree-iconEle{display:none!important}[data-v-eaddd328] .ant-tree-node-content-wrapper.ant-tree-node-selected{background-color:#fff!important}[data-v-eaddd328] .ant-list-item{border-bottom:0;padding:0}[data-v-eaddd328] .ant-list-item-meta-title{font-weight:400;line-height:32px}[data-v-eaddd328] .ant-tree li span.ant-tree-checkbox{margin:4px 20px 0 2px}.content-msg[data-v-eaddd328]{color:red;margin:0 20px 12px 0}.group-name[data-v-eaddd328]{overflow:hidden;white-space:nowrap;text-overflow:ellipsis;width:calc(100% - 4px);display:inline-block;vertical-align:bottom;line-height:21px}.tabBox[data-v-eaddd328]{background:#fff;-webkit-box-sizing:border-box;box-sizing:border-box}[data-v-eaddd328] .ant-tag-checkable{background-color:#fafafa;border-color:#d9d9d9;font-size:13px}[data-v-eaddd328] .ant-tag-checkable-checked{background-color:#1890ff}[data-v-eaddd328] .ant-col-20{margin-left:20px;width:calc(83.33333% - 20px)}.add-tag-group[data-v-eaddd328] .ant-col-20{margin-left:0;width:83.33333333%}.l-h-30[data-v-eaddd328]{line-height:30px}",""])},"7fd5":function(t,e,a){e=t.exports=a("2350")(!1),e.push([t.i,".participants[data-v-300f1328]{margin:10px 20px;background-color:#fff}[data-v-300f1328] .ant-tabs-card-content{padding-bottom:0!important}.participant-name[data-v-300f1328]{float:left;margin-left:10px;line-height:42px;max-width:100px;overflow:hidden;white-space:nowrap;text-overflow:ellipsis}[data-v-300f1328] .ant-table-thead>tr>th:first-child .ant-table-header-column{display:none}",""])},"9e0c":function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"tabBox"},[a("a-empty",{directives:[{name:"show",rawName:"v-show",value:0==t.groupList.length&&1==t.isNotAdd,expression:"groupList.length == 0 && isNotAdd == 1"}]},[a("span",{attrs:{slot:"description"},slot:"description"},[t._v("\n\t\t\t尚未创建标签，无法选择标签\n\t\t")])]),t._l(t.groupList,(function(e,s){return[t.isMore||!t.isMore&&s<5?a("div",[a("span",{staticClass:"group-name mb-10"},[e.name&&""!=e.name?a("a-popover",{attrs:{trigger:"hover"}},[a("span",{staticStyle:{display:"inline-block","max-width":"500px","word-wrap":"break-word","word-break":"break-all"},attrs:{slot:"content"},slot:"content"},[t._v("\n\t\t\t\t\t\t"+t._s(e.name)+"\n\t\t\t\t\t")]),a("span",{staticStyle:{"font-weight":"700"}},[t._v(" "+t._s(e.name)+"：")])]):t._e()],1),t._l(e.data,(function(i,n){return a("span",[e.disabled[n]?t._e():a("a-checkable-tag",{staticClass:"h-30 l-h-30 mb-10",on:{change:function(e){return t.changeTags(i.id,s,i.tagname)}},model:{value:e.checked[n],callback:function(a){t.$set(e.checked,n,a)},expression:"item.checked[tagIndex]"}},[t._v("\n\t\t\t\t\t"+t._s(i.tagname)+"\n\t\t\t\t")]),e.disabled[n]&&1==t.isDisabled?a("a-button",{staticStyle:{margin:"5px","line-height":"26px","font-size":"12px",height:"auto !important",padding:"0 7px"},attrs:{disabled:e.disabled[n]&&1==t.isDisabled}},[t._v("\n\t\t\t\t\t"+t._s(i.tagname)+"\n\t\t\t\t")]):t._e()],1)})),1!=t.isNotAdd?a("a-button",{directives:[{name:"has",rawName:"v-has",value:"client-tag-add",expression:"'client-tag-add'"}],staticStyle:{"font-size":"13px",height:"30px",color:"#1E90FF","border-color":"#1E90FF"},attrs:{icon:"plus"},on:{click:function(a){return t.createTag(e.id)}}},[t._v("\n\t\t\t\t添加\n\t\t\t")]):t._e()],2):t._e()]})),t.groupList.length>5?a("div",{staticStyle:{"font-size":"13px",height:"26px",color:"#1890FF","text-align":"center",cursor:"pointer"},on:{click:t.showMore}},[t.isMore?t._e():[t._v("更多")],t.isMore?[t._v("收起")]:t._e(),a("a-icon",{attrs:{type:t.isMore?"arrow-up":"arrow-down"}})],2):t._e(),t.groupList.length>0&&1!=t.isNotAdd?a("a-button",{directives:[{name:"has",rawName:"v-has",value:"client-tag-group-add",expression:"'client-tag-group-add'"}],staticStyle:{"font-size":"13px",height:"26px","margin-right":"10px",color:"#1E90FF"},attrs:{icon:"plus"},on:{click:t.addTagGroup}},[t._v("\n\t\t新建标签组\n\t")]):t._e(),a("a-modal",{attrs:{title:"新建标签",zIndex:99999,confirmLoading:t.confirmLoading3,width:"550px"},on:{ok:function(e){return t.handleOk(t.inputValue)},cancel:t.cancel},model:{value:t.visible,callback:function(e){t.visible=e},expression:"visible"}},[a("a-form-item",{attrs:{"label-col":{span:4},"wrapper-col":{span:20}}},[a("template",{slot:"label"},[t._v("\n\t\t\t\t选择分组\n\t\t\t")]),a("a-select",{staticStyle:{width:"250px"},attrs:{showSearch:"",optionFilterProp:"children",disabled:""},model:{value:t.group_id,callback:function(e){t.group_id=e},expression:"group_id"}},t._l(t.groupList,(function(e){return a("a-select-option",{attrs:{value:e.id}},[t._v("\n\t\t\t\t\t"+t._s(e.name)+"\n\t\t\t\t")])})),1)],2),a("a-form-item",{attrs:{"label-col":{span:4},"wrapper-col":{span:20}}},[a("template",{slot:"label"},[t._v("\n\t\t\t\t标签名称\n\t\t\t")]),a("p",{staticStyle:{margin:"0px","font-size":"13px",color:"#909399"}},[t._v("\n\t\t\t\t每个标签名称最多15个字。同时新建多个标签时，请用“空格”隔开")]),a("a-input",{attrs:{placeholder:"请输入标签（不得超过15个字符）"},model:{value:t.inputValue,callback:function(e){t.inputValue=e},expression:"inputValue"}})],2)],1),a("a-modal",{staticClass:"add-tag-group",attrs:{zIndex:99999,title:"新建标签组",visible:t.groupVisible,confirmLoading:t.confirmLoading},on:{ok:t.handleOk2,cancel:t.handleCancel}},[a("a-form-item",{staticClass:"current0",attrs:{"label-col":{span:4},"wrapper-col":{span:20}}},[a("template",{slot:"label"},[a("span",{staticStyle:{color:"red"}},[t._v("*")]),t._v("分组名称\n\t\t\t")]),a("a-input",{attrs:{placeholder:"请输入分组名(不得超过15个字符)",maxLength:15},model:{value:t.teamName,callback:function(e){t.teamName=e},expression:"teamName"}},[a("span",{attrs:{slot:"suffix"},slot:"suffix"},[a("span",[t._v(t._s(t.teamName.length))]),t._v("/15\n\t\t\t\t\t\t\t\t\t\t\t")])])],2),a("a-form-item",{staticClass:"current0",attrs:{"label-col":{span:4},"wrapper-col":{span:20}}},[a("template",{slot:"label"},[a("span",{staticStyle:{color:"red"}},[t._v("*")]),t._v("标签名称\n\t\t\t")]),a("p",{staticStyle:{margin:"0px","font-size":"13px",color:"#909399"}},[t._v("\n\t\t\t\t每个标签名称最多15个字。同时新建多个标签时，请用“空格”隔开\n\t\t\t")]),a("a-input",{attrs:{placeholder:"请输入标签（不得超过15个字符）"},model:{value:t.inputValue2,callback:function(e){t.inputValue2=e},expression:"inputValue2"}})],2)],1)],2)},i=[],n=(a("a481"),a("28a5"),a("6762"),a("2fdb"),a("96cf"),a("3b8d")),r=(a("c5f6"),{name:"corpChooseTagModal",props:{callback:{type:Function,default:null},hasChoose:{type:Array,default:function(){}},tagname:{type:Array,default:function(){}},isDisabled:{type:Number,default:0},disabledTag:{type:Array,default:function(){}},isNotAdd:{type:Number,default:0},id:{type:String,default:""}},data:function(){return{corpId:"",groupList:[],tag_arr:[],tag_ids:"",tagName:[],group_id:[],checked:[],visible:!1,confirmLoading3:!1,inputValue:"",newTagList:[],isMore:!1,groupVisible:!1,confirmLoading:!1,teamName:"",inputValue2:"",newTagList2:[]}},watch:{hasChoose:{handler:function(t){var e=this;"undefined"!=typeof t&&this.groupList.length&&(this.tag_arr=t,this.tag_ids=t.join(),this.tagName=JSON.parse(JSON.stringify(this.tagname)),this.hasChoose.map((function(t){e.groupList.map((function(e){e.data.map((function(a,s){t==a.id&&(e.checked[s]=!0)}))}))})),0==t.length&&this.groupList.map((function(t){t.checked=[]})),this.$forceUpdate())},deep:!0},id:{handler:function(t){""!=typeof t&&(this.corpId=t,this.getTags())},deep:!0},disabledTag:{handler:function(t){var e=this;"undefined"!=typeof t&&this.groupList.length&&(this.disabledTag.map((function(t){e.groupList.map((function(e){e.data.map((function(a,s){t==a.id&&(e.disabled[s]=!0)}))}))})),this.$forceUpdate())},deep:!0}},methods:{getTags:function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(){var e,a,s=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.axios.post("work-tag-group/tag-group",{corp_id:this.corpId||localStorage.getItem("corpId"),is_not_add:this.isNotAdd});case 2:e=t.sent,a=e.data,0!=a.error?this.$message.error(a.error_msg):(this.groupList=a.data,this.groupList.map((function(t){t.checked=[],t.disabled=[]})),"undefined"!=typeof this.disabledTag&&this.disabledTag.length>0&&this.disabledTag.map((function(t){s.groupList.map((function(e){e.data.map((function(a,s){t==a.id&&(e.disabled[s]=!0)}))}))})),"undefined"!=typeof this.hasChoose&&this.hasChoose.length>0&&(this.tag_arr=this.hasChoose,this.tag_ids=this.hasChoose.join(),this.tagName=JSON.parse(JSON.stringify(this.tagname)),this.hasChoose.map((function(t){s.groupList.map((function(e){e.data.map((function(a,s){t==a.id&&(e.checked[s]=!0)}))}))})),this.$forceUpdate()));case 5:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),changeTags:function(t,e,a){Array.prototype.indexOf=function(t){for(var e=0;e<this.length;e++)if(this[e]==t)return e;return-1},Array.prototype.remove=function(t){var e=this.indexOf(t);e>-1&&this.splice(e,1)};var s=String(t);if(this.tag_arr.includes(s))this.tagName.splice(this.tag_arr.indexOf(s),1),this.tag_arr.remove(s);else if(this.tag_arr.length+1>9999){this.$message.warning("不可选中，客户标签数量上限9999个");for(var i=0;i<this.groupList[e].data.length;i++)this.groupList[e].data[i].id==s&&(this.groupList[e].checked[i]=!1)}else this.tag_arr.push(s),this.tagName.push(a);this.$forceUpdate(),this.tag_ids=this.tag_arr.join(),null!==this.callback&&"function"===typeof this.callback&&this.callback("ok",this.tag_ids,this.tagName)},createTag:function(t){this.group_id=t;var e=0;if(this.groupList.map((function(t){e+=t.data.length})),e>=9999)return this.$message.warning("标签数量已超过上限9999个，无法创建"),!1;this.visible=!0},handleOk:function(t){var e=this;if(e.confirmLoading3=!0,""==t)return e.$message.warning("不能为空"),e.confirmLoading3=!1,!1;for(var a=0;a<t.split(" ").length;a++){if(t.split(" ")[a].length>15)return e.$message.error("每个标签最多15个字"),e.confirmLoading3=!1,!1;t.split(" ")[a].length>0&&e.newTagList.push(t.split(" ")[a])}e.addTags(),e.inputValue="",e.newTagList=[],e.confirmLoading3=!1},addTags:function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(){var e,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.axios.post("work-tag/add",{corp_id:this.corpId||localStorage.getItem("corpId"),suite_id:1,type:0,group_id:this.group_id,name:this.newTagList});case 2:e=t.sent,a=e.data,0!=a.error?(this.$message.error(a.error_msg),this.confirmLoading3=!1):(this.isLoading=!1,this.visible=!1,this.confirmLoading3=!1,this.getTags(),this.inputValue="",this.newTagList=[]);case 5:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),cancel:function(){this.visible=!1,this.inputValue=""},showMore:function(){this.isMore=!this.isMore},addTagGroup:function(){this.groupVisible=!0},handleCancel:function(){this.groupVisible=!1,this.teamName="",this.newTagList2=[],this.inputValue2=""},handleOk2:function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(){var e,a,s,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(String.prototype.Trim=function(){return this.replace(/(^\s*)|(\s*$)/g,"")},this.teamName=this.teamName.Trim(),this.teamName){t.next=5;break}return this.$message.error("请输入分组名"),t.abrupt("return",!1);case 5:if(""!=this.inputValue2){t.next=10;break}return this.$message.warning("标签名称不能为空"),t.abrupt("return",!1);case 10:e=JSON.parse(JSON.stringify(this.inputValue2)).split(" "),a=0;case 12:if(!(a<e.length)){t.next=23;break}if(!(e[a].length>15)){t.next=19;break}return this.$message.error("每个标签最多15个字"),this.inputValue2="",t.abrupt("return",!1);case 19:e[a].length>0&&this.newTagList2.push(e[a]);case 20:a++,t.next=12;break;case 23:return this.confirmLoading=!0,t.next=26,this.axios.post("work-tag-group/add",{corp_id:this.corpId||localStorage.getItem("corpId"),suite_id:1,name:this.teamName,type:0,isMasterAccount:localStorage.getItem("isMasterAccount"),sub_id:localStorage.getItem("sub_id"),tag_name:this.newTagList2});case 26:s=t.sent,i=s.data,0!=i.error?this.$message.error(i.error_msg):(this.teamName="",this.newTagList2=[],this.inputValue2="",this.groupVisible=!1,this.getTags()),this.confirmLoading=!1;case 30:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},mounted:function(){this.corpId=this.id||localStorage.getItem("corpId"),this.getTags()}}),o=r,c=(a("d128"),a("2877")),l=Object(c["a"])(o,s,i,!1,null,"eaddd328",null);e["a"]=l.exports},a5c9:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"scroll",staticStyle:{width:"100%",height:"100%",position:"absolute","overflow-y":"auto","padding-bottom":"30px"}},[s("div",[s("div",{staticStyle:{height:"50px","line-height":"50px","background-color":"#FFFFFF"}},[s("label",{staticStyle:{"margin-left":"20px"}},[t._v("\n\t\t\t\t\t"+t._s(t.title)+"：\n\t\t\t\t")]),s("a-button",{staticStyle:{float:"right",margin:"9px 20px 0 0"},attrs:{type:"primary",icon:"rollback"},on:{click:t.rollback}},[t._v("\n\t\t\t\t\t返回列表\n\t\t\t\t")])],1)]),s("div",{staticStyle:{margin:"10px 0px",padding:"10px 20px 0 20px"}},[s("a-input",{staticStyle:{width:"180px","margin-right":"10px"},attrs:{placeholder:"搜索参与者名称",allowClear:""},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.searchFans(e)}},model:{value:t.name,callback:function(e){t.name=e},expression:"name"}}),s("a-select",{staticStyle:{width:"120px","margin-right":"10px"},attrs:{placeholder:"发送状态"},model:{value:t.sendStatus,callback:function(e){t.sendStatus=e},expression:"sendStatus"}},[s("a-select-option",{attrs:{value:"0"}},[t._v("未发放")]),s("a-select-option",{attrs:{value:"1"}},[t._v("已发放")])],1),s("a-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"primary"},on:{click:t.searchFans}},[t._v("搜索")]),s("a-button",{staticStyle:{"margin-left":"10px"},on:{click:t.reloadParticipants}},[t._v("清空")]),s("div",{staticStyle:{height:"60px",float:"right"}},[s("a-dropdown",[s("a-menu",{attrs:{slot:"overlay"},on:{click:t.chooseDownType},slot:"overlay"},[s("a-menu-item",{key:"0"},[t._v("当前页导出")]),s("a-menu-item",{key:"1"},[t._v("全部导出")])],1),s("a-button",{staticStyle:{margin:"0 0 10px 0"},attrs:{type:"primary",icon:"download"}},[t._v("导出\n\t\t\t\t\t\t"),s("a-icon",{staticStyle:{color:"#FFFFFF"},attrs:{type:"down"}})],1)],1)],1)],1),s("div",{staticClass:"participants"},[s("div",{staticStyle:{padding:"0 20px 20px"}},[s("a-spin",{attrs:{tip:"Loading...",size:"large",spinning:t.isLoading1}},[s("a-table",{attrs:{columns:t.columns1,dataSource:t.participantsList,pagination:!1,rowClassName:t.rowClassName,rowSelection:t.rowSelection},scopedSlots:t._u([{key:"user",fn:function(e,i){return s("span",{},[i.avatar?s("a-avatar",{staticStyle:{float:"left"},attrs:{shape:"square",size:42,src:i.avatar}}):t._e(),i.avatar?t._e():s("img",{staticStyle:{width:"42px",height:"42px",float:"left"},attrs:{src:a("4bef")}}),s("div",{staticClass:"participant-name"},[t._v("\n\t\t\t\t\t\t\t\t\t\t\t"+t._s(i.name)+"\n\t\t\t\t\t\t\t\t\t")])],1)}},{key:"tags_name",fn:function(e,a){return s("span",{},[0==a.tags_name.length?[t._v("--")]:t._e(),0!=a.tags_name.length?t._l(a.tags_name,(function(e){return s("a-tag",{attrs:{color:"blue"}},[t._v(t._s(e))])})):t._e()],2)}},{key:"status",fn:function(e,a){return s("span",{},[0==a.status?s("span",[t._v("未完成")]):t._e(),1==a.status?s("span",[t._v("进行中")]):t._e(),2==a.status?s("span",[t._v("已完成")]):t._e()])}},{key:"complete_time",fn:function(e,a){return s("span",{},[2==a.status?s("span",[t._v(t._s(a.complete_time))]):t._e(),2!=a.status?s("span",[t._v("--")]):t._e()])}},{key:"help",fn:function(e,a){return s("span",{},[t._v("\n\t\t\t\t\t\t\t"+t._s(a.help_num)+"/"+t._s(a.friend_amount)),2!=a.status?s("span",[t._v("（还差"+t._s(a.invite_amount-a.help_num)+"人成功）")]):t._e()])}},{key:"first_amount",fn:function(e,a){return s("span",{},[t._v("\n\t\t\t\t\t\t\t\t"+t._s(a.first_amount)+"元（\n\t\t\t\t\t\t\t"),s("a-tooltip",[s("template",{slot:"title"},[t._v("\n                                    余额不足，无法发放\n                                ")]),0==a.first_send_status?s("span",[t._v("未发放")]):t._e()],2),1==a.first_send_status?s("span",[t._v("已发放")]):t._e(),t._v("\n\t\t\t\t\t\t\t）\n\t\t\t\t\t\t\t")],1)}},{key:"send_status",fn:function(e,a){return s("span",{},[s("a-tooltip",[s("template",{slot:"title"},[0==t.is_end&&2==a.status&&1==t.send_type?[t._v("\n                                        余额不足，无法发放\n                                    ")]:t._e(),0==t.is_end&&2==a.status&&2==t.send_type?[t._v("\n                                        等活动结束后，再发放\n                                    ")]:t._e(),0==t.is_end&&0==a.status?[t._v("\n                                        尚在裂变中\n                                    ")]:t._e(),1==t.is_end&&2==a.status?[t._v("\n                                        余额不足，无法发放\n                                    ")]:t._e(),1==t.is_end&&0==a.status?[t._v("\n                                        --\n                                    ")]:t._e()],2),0==a.send_status?s("span",[t._v("未发放")]):t._e()],2),1==a.send_status?s("span",[t._v("已发放")]):t._e()],1)}},{key:"action",fn:function(e,a){return s("span",{},[s("a-button",{staticStyle:{margin:"0 5px 5px 0"},on:{click:function(e){return t.helpRecord(a.id,a.name)}}},[t._v("助力记录")]),s("a-popconfirm",{attrs:{okText:"确定",cancelText:"取消"},on:{confirm:function(e){return t.manualRelease(a.id)}}},[s("template",{slot:"title"},[s("div",[t._v("确定发放给该客户吗？")])]),0==a.first_send_status||0==a.send_status&&2==a.status&&(2!=t.send_type||0!=t.is_end)?s("a-button",{staticStyle:{margin:"0 5px 5px 0"}},[t._v("手动发放")]):t._e()],2),s("a-popconfirm",{attrs:{okText:"确定",cancelText:"取消"},on:{confirm:function(e){return t.signRelease(a.id)}}},[s("template",{slot:"title"},[s("div",[t._v("确定发放给该客户吗？")])]),0==a.first_send_status||0==a.send_status&&2==a.status&&(2!=t.send_type||0!=t.is_end)?s("a-button",{staticStyle:{margin:"0 5px 5px 0"}},[t._v("标记发放")]):t._e()],2)],1)}}])}),s("div",{directives:[{name:"show",rawName:"v-show",value:t.total2>0&&t.userKeys.length>0,expression:"total2 > 0 && userKeys.length > 0"}],staticStyle:{margin:"20px"}},[s("a-checkbox",{on:{click:t.batchTypeChange},model:{value:t.batchTypeValue,callback:function(e){t.batchTypeValue=e},expression:"batchTypeValue"}}),s("a-select",{staticStyle:{width:"150px",margin:"0 5px"},attrs:{optionFilterProp:"children"},on:{change:t.changeBatchType},model:{value:t.batchType,callback:function(e){t.batchType=e},expression:"batchType"}},[s("a-select-option",{attrs:{value:"0"}},[t._v("选择当前页")]),s("a-select-option",{attrs:{value:"1"}},[t._v("选择所有")])],1),s("a-popconfirm",{attrs:{okText:"确定",cancelText:"取消",disabled:!(this.selectedRowKeys.length>0)},on:{confirm:function(e){return t.bulkChangeLimit(t.selectedRowKeys)}}},[s("template",{slot:"title"},[s("div",[t._v("确定批量手动发放吗？")])]),s("a-button",{attrs:{type:"primary",disabled:!(this.selectedRowKeys.length>0)}},[t._v("批量手动发放\n\t\t\t\t\t\t\t")])],2)],1),s("div",{directives:[{name:"show",rawName:"v-show",value:t.total2>0,expression:"total2 > 0"},{name:"has",rawName:"v-has",value:"employee-list",expression:"'employee-list'"}],staticClass:"pagination",staticStyle:{width:"100%",position:"absolute",margin:"40px 0px 20px"}},[s("div",{staticStyle:{height:"32px",float:"left","line-height":"32px"}},[t._v("\n\t\t\t\t\t\t\t共\n\t\t\t\t\t\t\t"),s("span",{staticStyle:{color:"blue"}},[t._v(t._s(t.total2))]),t._v("条\n\t\t\t\t\t\t")]),s("div",{staticClass:"pagination",staticStyle:{height:"32px",float:"right"}},[s("a-pagination",{attrs:{total:t.total2,showSizeChanger:"",showQuickJumper:t.quickJumper2,current:t.page2,pageSize:t.pageSize2,pageSizeOptions:["15","30","50","100"]},on:{change:t.changePage2,showSizeChange:t.showSizeChange2}})],1)])],1)],1)]),s("a-modal",{attrs:{width:"888px!important",title:"客户标签"},on:{ok:t.handleTag,cancel:t.handleCancelTag},model:{value:t.tagVisible,callback:function(e){t.tagVisible=e},expression:"tagVisible"}},[t.tagVisible?s("corpChooseTagModal",{attrs:{callback:t.chooseTags,isNotAdd:1,tagname:t.tagName2,hasChoose:t.tag_arr2}}):t._e()],1),s("a-modal",{attrs:{title:"导出进度",footer:!1,closable:t.progressCloseable,maskClosable:!1,maskStyle:{left:t.leftSiderWidth},wrapClassName:"mask-dialog"},on:{cancel:t.progressCancel},model:{value:t.progressVisible,callback:function(e){t.progressVisible=e},expression:"progressVisible"}},[s("div",{staticStyle:{"text-align":"center"}},[s("a-progress",{staticClass:"download-progress",attrs:{"stroke-linecap":"square",percent:t.progressNum,type:"circle",width:t.progressWidth}}),100==t.progressNum?s("p",{staticStyle:{margin:"20px auto"}},[t._v("已导出成功，请点击"),s("span",{staticStyle:{color:"#1890FF",cursor:"pointer"},on:{click:t.progressDownload}},[t._v("下载")])]):t._e()],1)])],1)},i=[],n=a("75fc"),r=(a("4f7f"),a("5df3"),a("1c4c"),a("55dd"),a("6b54"),a("6762"),a("2fdb"),a("ac6a"),a("7f7f"),a("7618")),o=(a("28a5"),a("96cf"),a("3b8d")),c=a("9e0c"),l=[{title:"参与人",dataIndex:"user",key:"user",width:"200px",scopedSlots:{customRender:"user"}},{title:"任务状态",dataIndex:"status",key:"status",scopedSlots:{customRender:"status"}},{title:"中奖标签",dataIndex:"tags_name",key:"tags_name",scopedSlots:{customRender:"tags_name"}},{title:"已拆红包人数/金额（元）",dataIndex:"help",key:"help",scopedSlots:{customRender:"help"}},{title:"参与时间",dataIndex:"join_time",key:"join_time"},{title:"首拆",dataIndex:"first_amount",key:"first_amount",scopedSlots:{customRender:"first_amount"}},{title:"完成时间",dataIndex:"complete_time",key:"complete_time",scopedSlots:{customRender:"complete_time"}},{title:"剩余发放状态",dataIndex:"send_status",key:"send_status",scopedSlots:{customRender:"send_status"}},{title:"操作",dataIndex:"action",key:"action",width:"15%",scopedSlots:{customRender:"action"}}],d={name:"redFissionParticipants",data:function(){return{tagVisible:!1,tag_arr1:[],tagName1:[],tag_arr2:[],tagName2:[],progressVisible:!1,progressNum:0,leftSiderWidth:document.getElementsByClassName("menu-sider")[0].style.width,downLoadUrl:"",progressWidth:120,progressCloseable:!1,title:"",columns1:l,name:"",isLoading1:!1,participantsList:[],fid:"",total2:0,page2:1,pageSize2:15,quickJumper2:!1,selectedRowKeys:[],userKeys:[],batchType:"1",batchTypeValue:!1,checkArr:[],sendStatus:[],is_end:0,send_type:1}},components:{corpChooseTagModal:c["a"]},methods:{rowClassName:function(t,e){var a="dark-row";return e%2===0&&(a="light-row"),a},rollback:function(){this.$router.go(-1)},searchFans:function(){this.is_all="0",this.participants(1,15)},prizeStatus:function(t){var e=this;e.$confirm({title:"确定奖品发放吗？",okText:"确定",okType:"primary",cancelText:"取消",onOk:function(){e.prizeStatusDeal(t)}})},prizeStatusDeal:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(e){var a,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.axios.post("fission/prize-status",{uid:localStorage.getItem("uid"),jid:e});case 2:a=t.sent,s=a.data,0!=s.error?(this.isLoading1=!1,this.$message.error(s.error_msg)):(this.selectedRowKeys=[],this.is_all="0",this.participants(this.page2,this.pageSize2));case 5:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),reloadParticipants:function(){this.name="",this.sendStatus=[],this.is_all="0",this.tag_arr1=[],this.tagName1=[],this.participants(1,15)},chooseTag:function(){this.tag_arr2=JSON.parse(JSON.stringify(this.tag_arr1)),this.tagName2=JSON.parse(JSON.stringify(this.tagName1)),this.tagVisible=!0},handleTag:function(){this.tag_arr1=JSON.parse(JSON.stringify(this.tag_arr2)),this.tagName1=JSON.parse(JSON.stringify(this.tagName2)),this.tagVisible=!1},handleCancelTag:function(){this.tag_arr2=[],this.tagName2=[],this.tagVisible=!1},chooseTags:function(t,e,a){"ok"==t&&(""!=e?(this.tag_arr2=e.split(","),this.tagName2=a):(this.tag_arr2=[],this.tagName2=[]))},chooseDownType:function(t){this.is_all=t.key,this.is_export=1,this.participants(this.page2,this.pageSize2,1)},moveMask:function(){this.leftSiderWidth=document.getElementsByClassName("menu-sider")[0].style.width,this.$nextTick((function(){document.getElementsByClassName("mask-dialog")[0].style.left=document.getElementsByClassName("menu-sider")[0].style.width}))},progressDownload:function(){window.open(this.downLoadUrl),this.progressCancel()},progressCancel:function(){sessionStorage.removeItem("redFissionDownLoadUrl"),this.progressVisible=!1},websocketOnMessage:function(t){"undefined"!=typeof t.type&&"export_red_pack"==t.type&&(this.progressVisible=!0,this.leftSiderWidth=document.getElementsByClassName("menu-sider")[0].style.width,this.$nextTick((function(){document.getElementsByClassName("mask-dialog")[0].style.left=document.getElementsByClassName("menu-sider")[0].style.width})),this.progressNum=parseInt(t.export_num/t.num*100),100==this.progressNum&&(this.progressWidth=100,this.downLoadUrl=t.url,this.progressCloseable=!0),""!=t.url&&sessionStorage.setItem("redFissionDownLoadUrl",this.downLoadUrl))},participants:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(){var e,a,s,i,n,o,c,l=this,d=arguments;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=d.length>0&&void 0!==d[0]?d[0]:1,a=d.length>1&&void 0!==d[1]?d[1]:this.pageSize2,s=d.length>2?d[2]:void 0,this.isLoading1=!0,i=-1,i="object"==Object(r["a"])(this.sendStatus)&&0==this.sendStatus.length?-1:this.sendStatus,t.next=8,this.axios.post("red-pack/join-list",{uid:localStorage.getItem("uid"),rid:this.fid,is_export:s,is_all:this.is_all,tags:this.tag_arr1,name:this.name,send_status:i,page:e,pageSize:a});case 8:n=t.sent,o=n.data,0!=o.error?(this.isLoading1=!1,this.$message.error(o.error_msg)):1!=s?(this.isLoading1=!1,this.page2=e,this.pageSize2=a,this.total2=parseInt(o.data.count),this.participantsList=o.data.join,this.is_end=o.data.is_end,this.userKeys=o.data.keys,this.send_type=o.data.send_type,c=this.selectedRowKeys,this.checkArr=[],this.participantsList.map((function(t){0==t.send_status&&2==t.status&&l.checkArr.push(t.key)})),"0"==this.batchType?this.checkArr.length>0?this.batchTypeValue=this.checkArr.every((function(t){return c.includes(t)})):this.batchTypeDisabled=!0:"1"==this.batchType&&(this.userKeys.length>0?this.batchTypeValue=c.sort().toString()==this.userKeys.sort().toString():this.batchTypeDisabled=!0)):(this.progressVisible=!0,this.progressCloseable=!1,this.progressNum=0,this.progressWidth=120,this.moveMask(),this.isLoading1=!1);case 11:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),changePage2:function(t,e){this.is_all="0",this.participants(t,this.pageSize2),document.getElementsByClassName("scroll")[0].scrollTo(0,0)},showSizeChange2:function(t,e){this.is_all="0",this.participants(this.page2,e)},onSelectChange:function(t){this.selectedRowKeys=t,"0"==this.batchType?this.batchTypeValue=this.checkArr.every((function(e){return t.includes(e)})):"1"==this.batchType&&(this.batchTypeValue=t.sort().toString()==this.userKeys.sort().toString())},helpRecord:function(t,e){this.$router.push("/redFission/helpRecord?jid="+t+"&name="+e)},manualRelease:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(e){var a,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.axios.post("red-pack/join-hand-send",{uid:localStorage.getItem("uid"),rid:this.fid,jid:e});case 2:a=t.sent,s=a.data,0!=s.error?this.$message.error(s.error_msg):(0==s.data.success?this.$message.error(s.data.textHtml):this.$message.success(s.data.textHtml),this.selectedRowKeys=[],this.is_all="0",this.participants());case 5:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),signRelease:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(e){var a,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.axios.post("red-pack/join-status",{uid:localStorage.getItem("uid"),jid:e});case 2:a=t.sent,s=a.data,0!=s.error?this.$message.error(s.error_msg):(this.$message.success("已成功标记发放"),this.selectedRowKeys=[],this.is_all="0",this.participants());case 5:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),batchTypeChange:function(){var t=this;this.batchTypeValue?this.selectedRowKeys=[]:"0"==this.batchType?(this.participantsList.map((function(e){0==e.send_status&&2==e.status&&t.selectedRowKeys.push(e.key)})),this.selectedRowKeys=Array.from(new Set(this.selectedRowKeys))):"1"==this.batchType&&(this.selectedRowKeys=this.userKeys)},changeBatchType:function(){var t=this;this.batchTypeDisabled||(this.batchTypeValue?"0"==this.batchType?(this.selectedRowKeys=[],this.participantsList.map((function(e){0==e.send_status&&2==e.status&&t.selectedRowKeys.push(e.key)})),this.selectedRowKeys=Array.from(new Set(this.selectedRowKeys))):"1"==this.batchType&&(this.selectedRowKeys=Object(n["a"])(this.userKeys.valueOf())):"0"==this.batchType?this.batchTypeValue=this.checkArr.every((function(e){return t.selectedRowKeys.includes(e)})):"1"==this.batchType&&(this.batchTypeValue=this.selectedRowKeys.sort().toString()==this.userKeys.sort().toString()))},bulkChangeLimit:function(t){this.manualRelease(t)}},mounted:function(){this.title=decodeURIComponent(this.$route.query.title),this.fid=decodeURIComponent(this.$route.query.fid),this.participants(),this.ws.setCallback(this.websocketOnMessage)},beforeRouteEnter:function(t,e,a){"/redFission/helpRecord"!=e.path&&a((function(t){t.title=decodeURIComponent(t.$route.query.title),t.fid=decodeURIComponent(t.$route.query.fid),t.page2=1,t.pageSize2=15,t.name="",t.selectedRowKeys=[],t.userKeys=[],t.batchType="1",t.batchTypeValue=!1,t.participants(),t.ws.setCallback(t.websocketOnMessage),sessionStorage.getItem("redFissionDownLoadUrl")&&(t.progressCloseable=!0,t.progressNum=100,t.progressWidth=100,t.downLoadUrl=sessionStorage.getItem("redFissionDownLoadUrl"),t.progressVisible=!0,t.moveMask())})),a()},computed:{rowSelection:function(){var t=this,e=this.selectedRowKeys;return{selectedRowKeys:e,onChange:this.onSelectChange,hideDefaultSelections:!0,getCheckboxProps:function(e){return{props:{disabled:0!=e.first_send_status&&(0!=e.send_status||2!=e.status||2==t.send_type&&0==t.is_end)}}}}}}},p=d,u=(a("0463"),a("2877")),h=Object(u["a"])(p,s,i,!1,null,"300f1328",null);e["default"]=h.exports},b39a:function(t,e,a){var s=a("d3f4");t.exports=function(t,e){if(!s(t)||t._t!==e)throw TypeError("Incompatible receiver, "+e+" required!");return t}},bbaf:function(t,e,a){var s=a("750c");"string"===typeof s&&(s=[[t.i,s,""]]),s.locals&&(t.exports=s.locals);var i=a("499e").default;i("5de9c110",s,!0,{sourceMap:!1,shadowMode:!1})},c26b:function(t,e,a){"use strict";var s=a("86cc").f,i=a("2aeb"),n=a("dcbc"),r=a("9b43"),o=a("f605"),c=a("4a59"),l=a("01f9"),d=a("d53b"),p=a("7a56"),u=a("9e1e"),h=a("67ab").fastKey,g=a("b39a"),f=u?"_s":"size",m=function(t,e){var a,s=h(e);if("F"!==s)return t._i[s];for(a=t._f;a;a=a.n)if(a.k==e)return a};t.exports={getConstructor:function(t,e,a,l){var d=t((function(t,s){o(t,d,e,"_i"),t._t=e,t._i=i(null),t._f=void 0,t._l=void 0,t[f]=0,void 0!=s&&c(s,a,t[l],t)}));return n(d.prototype,{clear:function(){for(var t=g(this,e),a=t._i,s=t._f;s;s=s.n)s.r=!0,s.p&&(s.p=s.p.n=void 0),delete a[s.i];t._f=t._l=void 0,t[f]=0},delete:function(t){var a=g(this,e),s=m(a,t);if(s){var i=s.n,n=s.p;delete a._i[s.i],s.r=!0,n&&(n.n=i),i&&(i.p=n),a._f==s&&(a._f=i),a._l==s&&(a._l=n),a[f]--}return!!s},forEach:function(t){g(this,e);var a,s=r(t,arguments.length>1?arguments[1]:void 0,3);while(a=a?a.n:this._f){s(a.v,a.k,this);while(a&&a.r)a=a.p}},has:function(t){return!!m(g(this,e),t)}}),u&&s(d.prototype,"size",{get:function(){return g(this,e)[f]}}),d},def:function(t,e,a){var s,i,n=m(t,e);return n?n.v=a:(t._l=n={i:i=h(e,!0),k:e,v:a,p:s=t._l,n:void 0,r:!1},t._f||(t._f=n),s&&(s.n=n),t[f]++,"F"!==i&&(t._i[i]=n)),t},getEntry:m,setStrong:function(t,e,a){l(t,e,(function(t,a){this._t=g(t,e),this._k=a,this._l=void 0}),(function(){var t=this,e=t._k,a=t._l;while(a&&a.r)a=a.p;return t._t&&(t._l=a=a?a.n:t._t._f)?d(0,"keys"==e?a.k:"values"==e?a.v:[a.k,a.v]):(t._t=void 0,d(1))}),a?"entries":"values",!a,!0),p(e)}}},c8ca:function(t,e,a){var s=a("7fd5");"string"===typeof s&&(s=[[t.i,s,""]]),s.locals&&(t.exports=s.locals);var i=a("499e").default;i("7aa815fd",s,!0,{sourceMap:!1,shadowMode:!1})},d128:function(t,e,a){"use strict";var s=a("bbaf"),i=a.n(s);i.a},e0b8:function(t,e,a){"use strict";var s=a("7726"),i=a("5ca1"),n=a("2aba"),r=a("dcbc"),o=a("67ab"),c=a("4a59"),l=a("f605"),d=a("d3f4"),p=a("79e5"),u=a("5cc5"),h=a("7f20"),g=a("5dbc");t.exports=function(t,e,a,f,m,_){var v=s[t],y=v,b=m?"set":"add",w=y&&y.prototype,x={},k=function(t){var e=w[t];n(w,t,"delete"==t?function(t){return!(_&&!d(t))&&e.call(this,0===t?0:t)}:"has"==t?function(t){return!(_&&!d(t))&&e.call(this,0===t?0:t)}:"get"==t?function(t){return _&&!d(t)?void 0:e.call(this,0===t?0:t)}:"add"==t?function(t){return e.call(this,0===t?0:t),this}:function(t,a){return e.call(this,0===t?0:t,a),this})};if("function"==typeof y&&(_||w.forEach&&!p((function(){(new y).entries().next()})))){var S=new y,T=S[b](_?{}:-0,1)!=S,N=p((function(){S.has(1)})),C=u((function(t){new y(t)})),L=!_&&p((function(){var t=new y,e=5;while(e--)t[b](e,e);return!t.has(-0)}));C||(y=e((function(e,a){l(e,y,t);var s=g(new v,e,y);return void 0!=a&&c(a,m,s[b],s),s})),y.prototype=w,w.constructor=y),(N||L)&&(k("delete"),k("has"),m&&k("get")),(L||T)&&k(b),_&&w.clear&&delete w.clear}else y=f.getConstructor(e,t,m,b),r(y.prototype,a),o.NEED=!0;return h(y,t),x[t]=y,i(i.G+i.W+i.F*(y!=v),x),_||f.setStrong(y,t,m),y}}}]);