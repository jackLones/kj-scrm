(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-68240c4e"],{"36bd":function(t,e,a){"use strict";var s=a("4bf8"),i=a("77f1"),n=a("9def");t.exports=function(t){var e=s(this),a=n(e.length),o=arguments.length,r=i(o>1?arguments[1]:void 0,a),c=o>2?arguments[2]:void 0,l=void 0===c?a:i(c,a);while(l>r)e[r++]=t;return e}},"4bef":function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAQAAADZc7J/AAABAElEQVR42s3VIY7CUBAG4LkEliC4xKJ6BA6AognXQBLCAVBYNBK3pim7zP8XBAJHSLhAZVURi+jC2+681xD4R89nZiYjIhojQRlQicYiolFQ8600EqZNAKbSpB0lyqcCBeYccIA5ihDgtO3JLdseTr7Ap9wFRx+g2HTuge8PH+AsjuBiBzZO4MsOHJzAwQ7kTiD3mcLsoX3muQcaV9s1DtnENUfssssR1i+6hRcD3GPFBaeccoEV9z7AUodoP4yxrUMs/wd26EtN0MeuBuBYDOH4LyDPWhYga1WXugpMxBhMnIBGVqD6S34B9nqvTUwaAUnNpZue689/DnuwTDUSuQJ1pL7YQ6lKkQAAAABJRU5ErkJggg=="},"6c7b":function(t,e,a){var s=a("5ca1");s(s.P,"Array",{fill:a("36bd")}),a("9c6c")("fill")},"6f73":function(t,e,a){e=t.exports=a("2350")(!1),e.push([t.i,".content-msg[data-v-3609bbe9]{min-width:845px;width:calc(100% - 40px);border:1px solid #ffdda6;background:#fff2db;padding:10px;margin:20px 0 20px 20px;text-align:left}[data-v-3609bbe9] .ant-collapse-arrow svg{color:#1890ff;width:20px;height:20px}[data-v-3609bbe9] .ant-collapse,[data-v-3609bbe9] .ant-collapse-content,[data-v-3609bbe9] .ant-collapse-item{background:#fff2db;border:0}[data-v-3609bbe9] .ant-collapse-content{color:rgba(0,0,0,.85)}[data-v-3609bbe9] .ant-collapse-header{background:#fff2db;border:0;padding:0 16px!important}.content-msg1[data-v-3609bbe9]{width:calc(100% - 40px);border:1px solid #ffdda6;background:#fff2db;padding:10px;margin:20px 0 20px 20px;text-align:left}.statistics-ul[data-v-3609bbe9]{overflow:hidden;padding:0 20px;margin:20px 0;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between}.statistics-ul li[data-v-3609bbe9]{width:30%;height:105px;color:#fff;padding:10px}.statistics-ul li p[data-v-3609bbe9]{margin-bottom:0}.statistics-ul li .number[data-v-3609bbe9]{font-size:30px}.statistics-ul li .count[data-v-3609bbe9]{float:right}.participants[data-v-3609bbe9]{margin:10px 20px;background-color:#fff}[data-v-3609bbe9] .ant-tabs-card-content{padding-bottom:0!important}.participant-name[data-v-3609bbe9]{display:inline-block;float:left;margin-left:10px;line-height:42px;max-width:100px;overflow:hidden;white-space:nowrap;text-overflow:ellipsis}.sign[data-v-3609bbe9]{margin-top:5px;margin-bottom:0;color:#1890ff;cursor:pointer}.sign[data-v-3609bbe9]:first-child{margin-top:0}.sign[data-v-3609bbe9]:hover{text-decoration:underline}.barshadow[data-v-3609bbe9]{height:470px;z-index:9999}.tabBtn[data-v-3609bbe9]{margin:0;margin-right:2px;padding:10px 16px;line-height:38px;background:#fafafa;border:1px solid #e8e8e8;border-bottom:0;border-radius:4px 4px 0 0;cursor:pointer}.activeBtn[data-v-3609bbe9]{color:#1890ff;background:#fff}",""])},7290:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticStyle:{width:"100%",height:"100%",position:"absolute","overflow-y":"auto","padding-bottom":"30px"}},[s("div",[s("div",{staticStyle:{height:"50px","line-height":"50px","background-color":"#FFFFFF"}},[s("label",{staticStyle:{"margin-left":"20px"}},[t._v("\n\t\t\t\t\t"+t._s(t.title)+"：\n\t\t\t\t")]),s("a-button",{staticStyle:{float:"right",margin:"9px 20px 0 0"},attrs:{type:"primary",icon:"rollback"},on:{click:t.rollback}},[t._v("\n\t\t\t\t\t返回列表\n\t\t\t\t")])],1)]),3==t.type?s("div",{staticClass:"content-msg"},[s("a-collapse",{attrs:{"expand-icon-position":"right"}},[s("a-collapse-panel",{key:"1"},[s("template",{slot:"header"},[s("p",{staticStyle:{"margin-bottom":"2px"}},[t._v("\n\t\t\t\t\t\t\t基于公众号+企业微信的裂变模式，即关注公众号并且加员工企业微信为好友才算助力成功，一举双雕，不仅给公众号涨粉，还能给员工的企业微信号带来大量的客户，是一把引流的利器。\n\t\t\t\t\t\t")]),s("p",{staticStyle:{"margin-bottom":"18px"}},[t._v("\n\t\t\t\t\t\t\t「参与活动人数」和「完成任务人数」是随活动进行实时自动统计。如果以红包作为奖品，只要微信支付商户平台账户余额充足，当参与人完成任务，即自动发放至用户的个人零钱里。若出现账户不足，红包无法发放，待补足账户余额后，需手动「标记为」已发奖，同时将把红包发补发出去，「发放奖品人数」数据才会随之变化。\n\t\t\t\t\t\t")]),s("p",{staticStyle:{"margin-bottom":"2px","font-weight":"700"}},[t._v("\n\t\t\t\t\t\t\t参与者身份，分为新用户参与和老用户参与。\n\t\t\t\t\t\t")]),s("p",{staticStyle:{"margin-bottom":"2px","text-indent":"2em"}},[t._v("\n\t\t\t\t\t\t\ta、新用户，尚未添加过活动所设置的企业成员，扫码关注或是回复关键词后，推送员工的企业微信二维码，添加后，欢迎语推送专属个人海报（内含关注公众号的二维码），即新用户参与。\n\t\t\t\t\t\t")]),s("p",{staticStyle:{"margin-bottom":"2px","text-indent":"2em"}},[t._v("\n\t\t\t\t\t\t\tb、老用户，曾经通过其他渠道添加过该活动所设置的企业成员，不论当前是否已将该成员删除/拉黑。通过扫码关注或是回复关键词后，自动推送带其专属个人海报（内含关注公众号的二维码），即老用户参与。\n\t\t\t\t\t\t")]),s("p",{staticStyle:{"margin-bottom":"2px","text-indent":"2em"}},[t._v("\n\t\t\t\t\t\t\t另外，参与人已添加上某场活动所设置的企业成员，中途更换企业成员，不影响参与者继续邀请好友。当该活动设置成员A和B，参与者之前加过A，但没添加过B，依然作为老用户参与。\n\t\t\t\t\t\t")])]),s("p",{staticStyle:{"margin-bottom":"2px","font-weight":"700"}},[t._v("\n\t\t\t\t\t\t助力者身份，分为新用户助力和老用户助力。\n\t\t\t\t\t")]),s("p",{staticStyle:{"margin-bottom":"2px","text-indent":"2em"}},[t._v("\n\t\t\t\t\t\ta、新用户助力，尚未添加过活动所设置的企业成员，通过好友海报，扫码关注公众号后，推送员工的企业微信二维码，添加后，即助力成功。若用户再帮他人助力，则提示老用户助力无效。若中途更换企业成员，可以再帮他人助力，助力成功后，再帮他人助力，则提示老用户助力无效。\n\t\t\t\t\t")]),s("p",{staticStyle:{"margin-bottom":"2px","text-indent":"2em"}},[t._v("\n\t\t\t\t\t\tb、老用户助力，曾经通过其他渠道添加过该活动所设置的企业成员，不论当前是否已将该成员删除/拉黑。通过好友海报，扫码关注公众号后，提示老用户无法助力。若中途更换企业成员，可以再帮他人助力，助力成功后，再帮他人助力，则提示老用户助力无效。\n\t\t\t\t\t")])],2)],1)],1):s("div",{staticClass:"content-msg"},[s("p",{staticStyle:{"margin-bottom":"18px"}},[t._v("\n\t\t\t\t「参与活动人数」和「完成任务人数」是随活动进行实时自动统计。如果以红包作为奖品，只要微信支付商户平台账户余额充足，当参与人完成任务，即自动发放至用户的个人零钱里。若出现账户不足，红包无法发放，待补足账户余额后，需手动「标记为」已发奖，同时将把红包发补发出去，「发放奖品人数」数据才会随之变化。\n\t\t\t")])]),s("ul",{staticClass:"statistics-ul"},[s("li",{staticStyle:{background:"#40A9FF"}},[s("p",[t._v("参与活动人数")]),s("p",{staticClass:"number"},[t._v(t._s(t.fansCount))]),s("p",{staticClass:"count"})]),s("li",{staticStyle:{background:"#FFC71B"}},[s("p",[t._v("\n\t\t\t\t\t完成任务人数\n\t\t\t\t")]),s("p",{staticClass:"number"},[t._v(t._s(t.levelCount))])]),s("li",{staticStyle:{background:"#FF688E"}},[s("p",[t._v("\n\t\t\t\t\t发放奖品人数\n\t\t\t\t")]),s("p",{staticClass:"number"},[t._v(t._s(t.prizeCount))])])]),s("div",{staticClass:"participants"},[s("div",{staticStyle:{margin:"10px 0px",padding:"10px 20px 0 20px"}},[s("a-input",{staticStyle:{width:"170px","margin-right":"10px"},attrs:{placeholder:"搜索参与者名称"},on:{keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.searchFans(e)}},model:{value:t.name,callback:function(e){t.name=e},expression:"name"}}),s("a-select",{staticStyle:{width:"200px","margin-bottom":"20px","margin-right":"10px"},attrs:{showSearch:"",optionFilterProp:"children",placeholder:"完成状态"},model:{value:t.success,callback:function(e){t.success=e},expression:"success"}},[s("a-select-option",{attrs:{value:0}},[t._v("全部完成状态")]),s("a-select-option",{attrs:{value:1}},[t._v("已完成")]),s("a-select-option",{attrs:{value:2}},[t._v("未完成")])],1),s("a-select",{staticStyle:{width:"200px","margin-bottom":"20px","margin-right":"10px"},attrs:{optionFilterProp:"children"},model:{value:t.success_prize,callback:function(e){t.success_prize=e},expression:"success_prize"}},[s("a-select-option",{attrs:{value:0}},[t._v("全部发奖状态")]),s("a-select-option",{attrs:{value:1}},[t._v("已发奖")]),s("a-select-option",{attrs:{value:2}},[t._v("未发奖")])],1),s("a-select",{staticStyle:{width:"200px","margin-bottom":"20px","margin-right":"10px"},attrs:{optionFilterProp:"children"},model:{value:t.status,callback:function(e){t.status=e},expression:"status"}},[s("a-select-option",{attrs:{value:0}},[t._v("全部状态")]),2!=t.type?s("a-select-option",{attrs:{value:1}},[t._v("已关注")]):t._e(),2!=t.type?s("a-select-option",{attrs:{value:2}},[t._v("未关注")]):t._e(),1!=t.type?s("a-select-option",{attrs:{value:3}},[t._v("已添加")]):t._e(),1!=t.type?s("a-select-option",{attrs:{value:4}},[t._v("已删除")]):t._e()],1),1==t.action_type?s("a-select",{staticStyle:{width:"200px","margin-bottom":"20px","margin-right":"10px"},attrs:{optionFilterProp:"children"},model:{value:t.is_form,callback:function(e){t.is_form=e},expression:"is_form"}},[s("a-select-option",{attrs:{value:0}},[t._v("全部填写状态")]),s("a-select-option",{attrs:{value:1}},[t._v("已填写")]),s("a-select-option",{attrs:{value:2}},[t._v("未填写")])],1):t._e(),s("a-button",{attrs:{type:"primary"},on:{click:t.searchFans}},[t._v("查找")]),s("a-button",{staticStyle:{"margin-left":"10px"},on:{click:t.reloadParticipants}},[t._v("清除")]),s("div",{staticStyle:{height:"60px",float:"right"}},[s("a-dropdown",[s("a-menu",{attrs:{slot:"overlay"},on:{click:t.chooseDownType},slot:"overlay"},[s("a-menu-item",{key:"0"},[t._v("当前页导出")]),s("a-menu-item",{key:"1"},[t._v("全部导出")])],1),s("a-button",{staticStyle:{margin:"0 0 10px 0"},attrs:{type:"primary",icon:"download"}},[t._v("导出\n\t\t\t\t\t\t\t"),s("a-icon",{staticStyle:{color:"#FFFFFF"},attrs:{type:"down"}})],1)],1)],1)],1),s("div",{staticStyle:{height:"32px","line-height":"32px","padding-left":"20px"}},[t._v("\n\t\t\t\t共\n\t\t\t\t"),s("span",{staticStyle:{color:"blue"}},[t._v(t._s(t.total2))]),t._v("条\n\t\t\t")]),s("div",{staticStyle:{padding:"0 20px 20px"}},[s("a-spin",{attrs:{tip:"Loading...",size:"large",spinning:t.isLoading1}},[s("a-table",{attrs:{columns:1==t.type&&1==t.action_type?t.columns0:1==t.type&&1!=t.action_type?t.columns:3==t.type&&1==t.action_type?t.columns1:3==t.type&&1!=t.action_type?t.columns2:2==t.type&&1==t.action_type?t.columns7:t.columns8,dataSource:t.participantsList,pagination:!1,rowClassName:t.rowClassName},scopedSlots:t._u([{key:"checkedBox",fn:function(e,a,i){return s("span",{},[s("a-checkbox",{attrs:{disabled:0!=a.status},on:{click:function(e){return t.changeSelectKey(a.id)}},model:{value:t.checkBoxValue[i],callback:function(e){t.$set(t.checkBoxValue,i,e)},expression:"checkBoxValue[index]"}})],1)}},{key:"user",fn:function(e,i){return s("span",{},[i.headerimg?s("a-avatar",{staticStyle:{float:"left"},attrs:{shape:"square",size:42,src:i.headerimg}}):t._e(),i.headerimg?t._e():s("img",{staticStyle:{width:"42px",height:"42px",float:"left"},attrs:{src:a("4bef")}}),s("a-popover",{attrs:{placement:"right"}},[s("span",{attrs:{slot:"content"},slot:"content"},[t._v("\n\t\t\t\t\t\t\t\t\t"+t._s(i.nickname)+"\n\t\t\t\t\t\t\t\t")]),s("span",{staticClass:"participant-name"},[t._v("\n\t\t\t\t\t\t\t\t\t"+t._s(i.nickname)+"\n\t\t\t\t\t\t\t\t")])])],1)}},{key:"subscribe",fn:function(e,a){return s("span",{},[1==a.subscribe?s("span",[t._v("已关注")]):t._e(),0==a.subscribe?s("span",[t._v("未关注")]):t._e(),0!=a.subscribe&&1!=a.subscribe?s("span",[t._v(t._s(e))]):t._e()])}},{key:"complete_time",fn:function(e,a){return s("span",{},[2==a.status?s("span",[t._v(t._s(a.complete_time))]):t._e(),2!=a.status?s("span",[t._v("--")]):t._e()])}},{key:"success",fn:function(e,a){return s("span",{},[null==a.status?s("span",[t._v("未完成")]):s("span",[t._v("已完成")])])}},{key:"tags_name",fn:function(e,a){return s("span",{},[0==a.tags_name.length?[t._v("--")]:t._e(),0!=a.tags_name.length?t._l(a.tags_name,(function(e){return s("a-tag",{attrs:{color:"blue"}},[t._v(t._s(e))])})):t._e()],2)}},{key:"status",fn:function(e,a){return s("span",{},[null==a.status?s("span",[t._v("--")]):t._e(),0==a.status?s("span",[t._v("未发放")]):t._e(),1==a.status?s("span",[t._v("已发放")]):t._e()])}},{key:"action",fn:function(e,a){return s("span",{},[s("a-button",{staticStyle:{margin:"0 5px 5px 0"},on:{click:function(e){return t.helpRecord(a.id,a.nickname)}}},[t._v("助力记录")]),0==a.status?s("a-button",{directives:[{name:"has",rawName:"v-has",value:1==t.menuType?"wholeMarketFission-award":"wxWholeMarketFission-award",expression:"menuType == 1 ? 'wholeMarketFission-award' : 'wxWholeMarketFission-award'"}],staticStyle:{margin:"0 5px 5px 0"},on:{click:function(e){return t.signOne(1,a.id,a.nickname)}}},[t._v("标记为已发奖品")]):t._e()],1)}},{key:"is_form",fn:function(e,a,i){return s("span",{},[a.is_form?s("span",[t._v("已填写（"),s("span",{staticStyle:{cursor:"pointer",color:"#1890FF"},on:{click:function(e){return t.lookForm(i)}}},[t._v("查看")]),t._v("）")]):s("span",[t._v("未填写")])])}}])},[s("span",{attrs:{slot:"activity_num"},slot:"activity_num"},[t._v("\n\t\t\t\t\t\t\t有效助力人数\n\t\t\t\t\t\t\t"),s("a-popover",{attrs:{placement:"top"}},[s("template",{slot:"content"},[s("div",{staticStyle:{width:"240px"}},[s("p",{staticStyle:{"margin-bottom":"0","line-height":"25px"}},[t._v("与当前活动对有效助力人数的定义有关。如本场活动配置为“好友取关扣除有效助力人数”，那么，当前人气，即为扣除取关人数，才算好友有效助力。")])])]),s("a-icon",{staticStyle:{"margin-left":"5px"},attrs:{type:"question-circle"}})],2)],1),s("span",{attrs:{slot:"friendStatus"},slot:"friendStatus"},[t._v("\n\t\t\t\t\t\t\t好友状态\n\t\t\t\t\t\t\t"),s("a-popover",{attrs:{placement:"top"}},[s("template",{slot:"content"},[s("p",{staticStyle:{"margin-bottom":"2px"}},[t._v("已添加：a、参与人曾经通过其他渠道添加过该活动所设置的企业成员，默认标记上")]),s("p",{staticStyle:{"margin-bottom":"2px","text-indent":"4em"}},[t._v(" b、参与人刚参与该场活动新添加上")]),s("p",{staticStyle:{"margin-bottom":"2px"}},[t._v("已删除：企业成员被参与人删除/拉黑")]),s("p",{staticStyle:{"margin-bottom":"2px"}},[t._v(" 未知（--）：参与人已添加上某场活动所设置的企业成员后，中途更换企业成员，不影响参与者继续邀请好友，好友状态显示“--”。")])]),s("a-icon",{staticStyle:{"margin-left":"5px"},attrs:{type:"question-circle"}})],2)],1)]),s("div",{directives:[{name:"show",rawName:"v-show",value:t.total2>0,expression:"total2 > 0"}],staticClass:"pagination",staticStyle:{width:"100%",position:"absolute",margin:"40px 0px 20px"}},[s("div",{staticStyle:{height:"32px",float:"left","line-height":"32px"}},[s("a-checkbox",{directives:[{name:"has",rawName:"v-has",value:1==t.menuType?"wholeMarketFission-award":"wxWholeMarketFission-award",expression:"menuType == 1 ? 'wholeMarketFission-award' : 'wxWholeMarketFission-award'"}],attrs:{disabled:0==t.participantsKeys.length||t.isCurrentPageDisabled},on:{click:t.batchTypeChange},model:{value:t.batchTypeValue,callback:function(e){t.batchTypeValue=e},expression:"batchTypeValue"}}),s("a-select",{directives:[{name:"has",rawName:"v-has",value:1==t.menuType?"wholeMarketFission-award":"wxWholeMarketFission-award",expression:"menuType == 1 ? 'wholeMarketFission-award' : 'wxWholeMarketFission-award'"}],staticStyle:{width:"150px",margin:"0 5px"},attrs:{optionFilterProp:"children",disabled:0==t.participantsKeys.length||t.isCurrentPageDisabled},on:{change:t.changeBatchType},model:{value:t.batchType,callback:function(e){t.batchType=e},expression:"batchType"}},[s("a-select-option",{attrs:{value:"0"}},[t._v("选择当前页")]),s("a-select-option",{attrs:{value:"1"}},[t._v("选择所有")])],1),s("a-button",{directives:[{name:"has",rawName:"v-has",value:1==t.menuType?"wholeMarketFission-award":"wxWholeMarketFission-award",expression:"menuType == 1 ? 'wholeMarketFission-award' : 'wxWholeMarketFission-award'"}],attrs:{disabled:0==t.selectedRowKeys.length},on:{click:function(e){return t.sign(1)}}},[t._v("标记为已发奖品\n\t\t\t\t\t\t\t")])],1),s("div",{staticClass:"pagination",staticStyle:{height:"32px",float:"right"}},[s("a-pagination",{attrs:{total:t.total2,showSizeChanger:"",showQuickJumper:t.quickJumper2,current:t.page2,pageSize:t.pageSize2,pageSizeOptions:["15","30","50","100"]},on:{change:t.changePage2,showSizeChange:t.showSizeChange2}})],1)])],1)],1)]),s("a-drawer",{attrs:{placement:"right",closable:!1,width:"888px!important",visible:t.visible},on:{close:t.onClose}},[s("div",{staticStyle:{"padding-bottom":"100px"}},[s("div",{staticStyle:{height:"50px","line-height":"50px","border-bottom":"1px solid #E8E8E8"}},[s("label",{staticStyle:{"margin-left":"20px","font-weight":"700"}},[t._v(t._s(t.participantName))])]),s("div",{staticStyle:{padding:"0 20px","margin-top":"10px"}},[s("span",{staticClass:"tabBtn",class:{activeBtn:1==t.tabKey},on:{click:function(e){return t.changeTabs("1")}}},[t._v("助力记录")]),s("span",{staticClass:"tabBtn",class:{activeBtn:2==t.tabKey},on:{click:function(e){return t.changeTabs("2")}}},[t._v("裂变层级")])]),s("div",{staticStyle:{padding:"10px 20px",margin:"0 20px",border:"1px solid #E8E8E8"}},[s("a-spin",{attrs:{tip:"Loading...",size:"large",spinning:t.isLoading2}},[2==t.tabKey?s("div",{staticClass:"content-msg1"},[s("p",{staticStyle:{"margin-bottom":"2px"}},[t._v("裂变层级越多，代表参与者的人脉越广，传播效果越好。")]),s("p",{staticStyle:{"margin-bottom":"2px"}},[t._v("活动裂变层级一级：在公众号后台回复关键词参加活动+扫描推广码参加活动。在助力记录中不显示该层级。")]),s("p",{staticStyle:{"margin-bottom":"2px"}},[t._v("二级是扫描一级粉丝海报二维码参加活动的，三级四级以此类推。")]),s("p",{staticStyle:{"margin-bottom":"0px",color:"#F56C6C"}},[t._v("\n\t\t\t\t\t\t\t\t系统在第14级后，用【其他】代替层级，也就是说第1级、第2级。。。。第14级、其他。")])]):t._e(),2==t.tabKey?s("div",{staticStyle:{"margin-bottom":"20px"}},[s("div",[s("BarCharts",{staticStyle:{width:"100%"},attrs:{options:t.fansLineData}})],1),s("div",[s("a-table",{attrs:{columns:t.columns4,dataSource:t.fansList,pagination:!1,rowClassName:t.rowClassName},scopedSlots:t._u([{key:"value",fn:function(e,a,i){return s("span",{},[t._v("\n\t\t\t\t\t\t\t\t\t\t"+t._s(a.value)+"%\n\t\t\t\t\t\t\t\t\t")])}}],null,!1,2801628331)})],1)]):t._e(),1==t.tabKey?s("a-row",{staticStyle:{"margin-bottom":"10px"}},[s("a-input",{staticStyle:{width:"170px","margin-right":"10px"},attrs:{allowClear:!0,placeholder:"搜索助力人名称"},on:{keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.helpRecord1(1,15)}},model:{value:t.helpName,callback:function(e){t.helpName=e},expression:"helpName"}}),s("a-button",{attrs:{type:"primary"},on:{click:function(e){return t.helpRecord1(1,15)}}},[t._v("搜索")])],1):t._e(),1==t.tabKey?s("a-table",{attrs:{columns:1==t.activityType?t.columns3:2==t.activityType?t.columns5:t.columns6,dataSource:t.hlepRecordList,pagination:!1,rowClassName:t.rowClassName},scopedSlots:t._u([{key:"user",fn:function(e,i){return s("span",{},[i.headerimg?s("a-avatar",{staticStyle:{float:"left"},attrs:{shape:"square",size:42,src:i.headerimg}}):t._e(),i.headerimg?t._e():s("img",{staticStyle:{width:"42px",height:"42px",float:"left"},attrs:{src:a("4bef")}}),s("a-popover",{attrs:{placement:"right"}},[s("span",{attrs:{slot:"content"},slot:"content"},[t._v("\n\t\t\t\t\t\t\t\t\t\t"+t._s(i.nickname)+"\n\t\t\t\t\t\t\t\t\t")]),s("span",{staticClass:"participant-name"},[t._v("\n\t\t\t\t\t\t\t\t\t\t"+t._s(i.nickname)+"\n\t\t\t\t\t\t\t\t\t")])])],1)}},{key:"type",fn:function(e,a){return s("span",{},[null==a.type?s("span",[t._v("助力成功")]):t._e(),1==a.type?s("span",[t._v("老客户参与，助力无效")]):t._e(),2==a.type?s("span",[t._v("因取关，助力无效")]):t._e(),3==a.type?s("span",[t._v("因取关+被客户删除/拉黑，助力无效")]):t._e(),4==a.type?s("span",[t._v("被客户删除/拉黑，助力无效")]):t._e(),5==a.type?s("span",[t._v("助力未完成")]):t._e()])}}],null,!1,1879128077)}):t._e(),t.total3>0&&1==t.tabKey?s("div",{staticClass:"pagination",staticStyle:{width:"100%",margin:"20px 0px"}},[s("div",{staticStyle:{height:"32px",display:"inline-block","line-height":"32px"}},[t._v("\n\t\t\t\t\t\t\t\t共\n\t\t\t\t\t\t\t\t"),s("span",{staticStyle:{color:"blue"}},[t._v(t._s(t.total3))]),t._v("条\n\t\t\t\t\t\t\t")]),s("div",{staticClass:"pagination",staticStyle:{height:"32px",float:"right"}},[s("a-pagination",{attrs:{total:t.total3,showSizeChanger:"",showQuickJumper:t.quickJumper3,current:t.page3,pageSize:t.pageSize3,pageSizeOptions:["15","30","50","100"]},on:{change:t.changePage3,showSizeChange:t.showSizeChange3}})],1)]):t._e()],1)],1)])]),s("a-modal",{attrs:{title:"表单填写",width:"666px!important"},on:{close:t.handleCancel},model:{value:t.formVisible,callback:function(e){t.formVisible=e},expression:"formVisible"}},[s("template",{slot:"footer"},[s("a-button",{key:"back",on:{click:t.handleCancel}},[t._v("关闭")])],1),s("a-form",[s("a-form-item",{attrs:{label:"姓名","label-col":{span:4},"wrapper-col":{span:16}}},[t._v("\n\t\t\t\t\t"+t._s(t.nickname)+"\n\t\t\t\t")]),s("a-form-item",{attrs:{label:"手机号码","label-col":{span:4},"wrapper-col":{span:16}}},[t._v("\n\t\t\t\t\t"+t._s(t.mobile)+"\n\t\t\t\t")]),s("a-form-item",{attrs:{label:"收货地址","label-col":{span:4},"wrapper-col":{span:16}}},[s("span",{staticStyle:{"word-break":"break-all"}},[t._v(t._s(t.address))])]),s("a-form-item",{attrs:{label:"备注","label-col":{span:4},"wrapper-col":{span:16}}},[t._v("\n\t\t\t\t\t"+t._s(t.remark)+"\n\t\t\t\t")])],1)],2),s("a-modal",{attrs:{width:"888px!important",title:"客户标签"},on:{ok:t.handleTag,cancel:t.handleCancelTag},model:{value:t.tagVisible,callback:function(e){t.tagVisible=e},expression:"tagVisible"}},[t.tagVisible&&1!=t.type?s("corpChooseTagModal",{attrs:{callback:t.chooseTags,isNotAdd:1,tagname:t.tagName2,hasChoose:t.tag_arr2}}):t._e(),1==t.type?s("div",{staticClass:"current0 ant-col-20",staticStyle:{"background-color":"#FFFFFF",padding:"10px"}},[t._l(t.tagList,(function(e,a){return s("a-checkable-tag",{staticStyle:{margin:"5px",border:"1px solid #C3C3C3"},model:{value:t.tagChecked[a],callback:function(e){t.$set(t.tagChecked,a,e)},expression:"tagChecked[index]"}},[t._v("\n\t\t\t\t\t"+t._s(e.name)+"\n\t\t\t\t")])})),s("div",{staticStyle:{display:"inline-block"}},[s("a-tag",{directives:[{name:"has",rawName:"v-has",value:"tag-add",expression:"'tag-add'"}],on:{click:t.addFansTag}},[s("a-icon",{attrs:{type:"plus",size:14}}),t._v("\n\t\t\t\t\t\t新建标签\n\t\t\t\t\t")],1)],1)],2):t._e()],1),s("a-modal",{attrs:{title:"导出进度",footer:!1,closable:t.progressCloseable,maskClosable:!1,maskStyle:{left:t.leftSiderWidth},wrapClassName:"mask-dialog"},on:{cancel:t.progressCancel},model:{value:t.progressVisible,callback:function(e){t.progressVisible=e},expression:"progressVisible"}},[s("div",{staticStyle:{"text-align":"center"}},[s("a-progress",{staticClass:"download-progress",attrs:{"stroke-linecap":"square",percent:t.progressNum,type:"circle",width:t.progressWidth}}),100==t.progressNum?s("p",{staticStyle:{margin:"20px auto"}},[t._v("已导出成功，请点击"),s("span",{staticStyle:{color:"#1890FF",cursor:"pointer"},on:{click:t.progressDownload}},[t._v("下载")])]):t._e()],1)]),s("a-modal",{attrs:{title:"新建标签",confirmLoading:t.confirmLoading3},on:{ok:function(e){return t.handleOk(t.inputValue)},cancel:t.cancel},model:{value:t.wxTagVisible,callback:function(e){t.wxTagVisible=e},expression:"wxTagVisible"}},[s("p",{staticStyle:{margin:"0px 0px 10px 0","font-size":"13px",color:"#909399"}},[t._v("\n\t\t\t\t每个标签名称最多6个字。同时新建多个标签时，请用“空格”隔开")]),s("a-input",{attrs:{placeholder:"请输入标签（不得超过6个字符）"},model:{value:t.inputValue,callback:function(e){t.inputValue=e},expression:"inputValue"}})],1)],1)},i=[],n=(a("7f7f"),a("ac4d"),a("8a81"),a("ac6a"),a("96cf"),a("3b8d")),o=(a("28a5"),a("20d6"),a("6c7b"),a("20fa")),r=a("9e0c"),c=[{dataIndex:"checkedBox",key:"checkedBox",width:"60px",scopedSlots:{customRender:"checkedBox",title:"checkedBoxTitle"}},{title:"参与人",dataIndex:"user",key:"user",width:"200px",scopedSlots:{customRender:"user"}},{title:"关注状态",dataIndex:"subscribe",key:"subscribe",scopedSlots:{customRender:"subscribe"}},{dataIndex:"activity_num",key:"activity_num",scopedSlots:{title:"activity_num"}},{title:"所属公众号",dataIndex:"nick_name",key:"nick_name"},{title:"完成状况",dataIndex:"success",key:"success",scopedSlots:{customRender:"success"}},{title:"中奖标签",dataIndex:"tags_name",key:"tags_name",scopedSlots:{customRender:"tags_name"}},{title:"发奖状况",dataIndex:"status",key:"status",scopedSlots:{customRender:"status"}},{title:"是否填写表单",dataIndex:"is_form",key:"is_form",width:"180px",scopedSlots:{customRender:"is_form"}},{title:"操作",dataIndex:"action",key:"action",width:"15%",scopedSlots:{customRender:"action"}}],l=[{dataIndex:"checkedBox",key:"checkedBox",width:"60px",scopedSlots:{customRender:"checkedBox",title:"checkedBoxTitle"}},{title:"参与人",dataIndex:"user",key:"user",width:"200px",scopedSlots:{customRender:"user"}},{title:"关注状态",dataIndex:"subscribe",key:"subscribe",scopedSlots:{customRender:"subscribe"}},{dataIndex:"activity_num",key:"activity_num",scopedSlots:{title:"activity_num"}},{title:"所属公众号",dataIndex:"nick_name",key:"nick_name"},{title:"完成状况",dataIndex:"success",key:"success",scopedSlots:{customRender:"success"}},{title:"中奖标签",dataIndex:"tags_name",key:"tags_name",scopedSlots:{customRender:"tags_name"}},{title:"发奖状况",dataIndex:"status",key:"status",scopedSlots:{customRender:"status"}},{title:"操作",dataIndex:"action",key:"action",width:"15%",scopedSlots:{customRender:"action"}}],d=[{dataIndex:"checkedBox",key:"checkedBox",width:"60px",scopedSlots:{customRender:"checkedBox",title:"checkedBoxTitle"}},{title:"参与人",dataIndex:"user",key:"user",width:"200px",scopedSlots:{customRender:"user"}},{title:"关注状态",dataIndex:"subscribe",key:"subscribe",scopedSlots:{customRender:"subscribe"}},{dataIndex:"user_name",key:"user_name",scopedSlots:{title:"friendStatus"}},{dataIndex:"activity_num",key:"activity_num",scopedSlots:{title:"activity_num"}},{title:"所属公众号",dataIndex:"nick_name",key:"nick_name"},{title:"完成状况",dataIndex:"success",key:"success",scopedSlots:{customRender:"success"}},{title:"中奖标签",dataIndex:"tags_name",key:"tags_name",scopedSlots:{customRender:"tags_name"}},{title:"发奖状况",dataIndex:"status",key:"status",scopedSlots:{customRender:"status"}},{title:"是否填写表单",dataIndex:"is_form",key:"is_form",width:"180px",scopedSlots:{customRender:"is_form"}},{title:"操作",dataIndex:"action",key:"action",width:"15%",scopedSlots:{customRender:"action"}}],p=[{dataIndex:"checkedBox",key:"checkedBox",width:"60px",scopedSlots:{customRender:"checkedBox",title:"checkedBoxTitle"}},{title:"参与人",dataIndex:"user",key:"user",width:"200px",scopedSlots:{customRender:"user"}},{title:"关注状态",dataIndex:"subscribe",key:"subscribe",scopedSlots:{customRender:"subscribe"}},{dataIndex:"user_name",key:"user_name",scopedSlots:{title:"friendStatus"}},{dataIndex:"activity_num",key:"activity_num",scopedSlots:{title:"activity_num"}},{title:"所属公众号",dataIndex:"nick_name",key:"nick_name"},{title:"完成状况",dataIndex:"success",key:"success",scopedSlots:{customRender:"success"}},{title:"中奖标签",dataIndex:"tags_name",key:"tags_name",scopedSlots:{customRender:"tags_name"}},{title:"发奖状况",dataIndex:"status",key:"status",scopedSlots:{customRender:"status"}},{title:"操作",dataIndex:"action",key:"action",width:"15%",scopedSlots:{customRender:"action"}}],u=[{dataIndex:"checkedBox",key:"checkedBox",width:"60px",scopedSlots:{customRender:"checkedBox",title:"checkedBoxTitle"}},{title:"参与人",dataIndex:"user",key:"user",width:"200px",scopedSlots:{customRender:"user"}},{dataIndex:"user_name",key:"user_name",scopedSlots:{title:"friendStatus"}},{dataIndex:"activity_num",key:"activity_num",scopedSlots:{title:"activity_num"}},{title:"完成状况",dataIndex:"success",key:"success",scopedSlots:{customRender:"success"}},{title:"中奖标签",dataIndex:"tags_name",key:"tags_name",scopedSlots:{customRender:"tags_name"}},{title:"发奖状况",dataIndex:"status",key:"status",scopedSlots:{customRender:"status"}},{title:"是否填写表单",dataIndex:"is_form",key:"is_form",width:"180px",scopedSlots:{customRender:"is_form"}},{title:"操作",dataIndex:"action",key:"action",width:"15%",scopedSlots:{customRender:"action"}}],h=[{dataIndex:"checkedBox",key:"checkedBox",width:"60px",scopedSlots:{customRender:"checkedBox",title:"checkedBoxTitle"}},{title:"参与人",dataIndex:"user",key:"user",width:"200px",scopedSlots:{customRender:"user"}},{dataIndex:"user_name",key:"user_name",scopedSlots:{title:"friendStatus"}},{dataIndex:"activity_num",key:"activity_num",scopedSlots:{title:"activity_num"}},{title:"完成状况",dataIndex:"success",key:"success",scopedSlots:{customRender:"success"}},{title:"中奖标签",dataIndex:"tags_name",key:"tags_name",scopedSlots:{customRender:"tags_name"}},{title:"发奖状况",dataIndex:"status",key:"status",scopedSlots:{customRender:"status"}},{title:"操作",dataIndex:"action",key:"action",width:"15%",scopedSlots:{customRender:"action"}}],g=[{title:"助力人",dataIndex:"user",key:"user",scopedSlots:{customRender:"user"}},{title:"助力状态",dataIndex:"type",key:"type",scopedSlots:{customRender:"type"}},{title:"关注时间",dataIndex:"f_time",key:"f_time"},{title:"助力时间",dataIndex:"create_time",key:"create_time"}],m=[{title:"助力人",dataIndex:"user",key:"user",scopedSlots:{customRender:"user"}},{title:"添加企业成员",dataIndex:"work_user_name",key:"work_user_name"},{title:"助力状态",dataIndex:"type",key:"type",scopedSlots:{customRender:"type"}},{title:"助力时间",dataIndex:"create_time",key:"create_time"}],f=[{title:"助力人",dataIndex:"user",key:"user",scopedSlots:{customRender:"user"}},{title:"添加企业成员",dataIndex:"work_user_name",key:"work_user_name"},{title:"助力状态",dataIndex:"type",key:"type",scopedSlots:{customRender:"type"}},{title:"关注时间",dataIndex:"f_time",key:"f_time"},{title:"助力时间",dataIndex:"create_time",key:"create_time"}],y=[{title:"层级",dataIndex:"name",key:"name"},{title:"人数",dataIndex:"proportion",key:"proportion"},{title:"占比",dataIndex:"value",key:"value",scopedSlots:{customRender:"value"}}],x={name:"makrketFissionParticipants",data:function(){return{tagVisible:!1,tag_arr1:[],tagName1:[],tag_arr2:[],tagName2:[],tagChecked:[],tagList:[],inputValue:"",wxTagVisible:!1,confirmLoading3:!1,progressVisible:!1,progressNum:0,leftSiderWidth:document.getElementsByClassName("menu-sider")[0].style.width,downLoadUrl:"",progressWidth:120,progressCloseable:!1,menuType:1,formVisible:!1,type:1,action_type:1,title:"",columns0:c,columns:l,columns1:d,columns2:p,columns7:u,columns8:h,is_all:0,is_export:0,address:"",remark:"",mobile:"",nickname:"",name:"",fansCount:0,levelCount:0,oneCount:0,twoCount:0,threeCount:0,prizeCount:0,prizeOneCount:0,prizeTwoCount:0,prizeThreeCount:0,success:0,success_prize:0,status:0,is_form:0,isLoading1:!1,is_end:0,prize_send_type:1,isCurrentPageDisabled:!0,participantsList:[],checkBoxValue:[],activityId:"",total2:0,page2:1,pageSize2:15,quickJumper2:!1,batchType:"0",batchTypeValue:!1,selectedRowKeys:[],participantsKeys:[],visible:!1,tabKey:1,participantName:"",jid:"",columns4:y,columns3:g,columns5:m,columns6:f,isLoading2:!1,helpName:"",activityType:"",hlepRecordList:[],fansList:[],fansLineData:{title:"助力层级",xAxisData:[],name:"助力层级",seriesData:[]},total3:0,page3:1,pageSize3:15,quickJumper3:!1}},components:{BarCharts:o["a"],corpChooseTagModal:r["a"]},methods:{rowClassName:function(t,e){var a="dark-row";return e%2===0&&(a="light-row"),a},isCurrentDisabled:function(){0==this.participantsList.length&&(this.isCurrentPageDisabled=!0);for(var t=0;t<this.participantsList.length;t++)0==this.participantsList[t].status&&(this.isCurrentPageDisabled=!1)},changeSelectKey:function(t){for(var e=0;e<this.selectedRowKeys.length;e++)if(t==this.selectedRowKeys[e])return this.selectedRowKeys.splice(e,1),this.setBox(),!1;this.selectedRowKeys.push(t),this.setBox()},batchTypeChange:function(){this.batchTypeValue?(0==this.batchType?(this.removeKey(this.participantsList),this.setCheckedBox(this.participantsList)):1==this.batchType&&(this.selectedRowKeys=[],this.setBox()),this.batchTypeValue=!1):(0==this.batchType?(this.addKey(this.participantsList),this.setCheckedBox(this.participantsList)):1==this.batchType&&(this.selectedRowKeys=JSON.parse(JSON.stringify(this.participantsKeys)),this.setBox()),this.batchTypeValue=!0)},setBox:function(){this.setCheckedBox(this.participantsList)},setCheckedBox:function(t){this.checkBoxValue=new Array(t.length),this.checkBoxValue.fill(!1);for(var e=0;e<t.length;e++)for(var a=0;a<this.selectedRowKeys.length;a++)t[e].id==this.selectedRowKeys[a]&&(this.checkBoxValue[e]=!0);if(0==this.batchType){this.batchTypeValue=!0;for(var s=0;s<this.checkBoxValue.length;s++)this.checkBoxValue[s]||0!=t[s].status||(this.batchTypeValue=!1);0==this.selectedRowKeys.length&&(this.batchTypeValue=!1)}else this.selectedRowKeys.length==this.participantsKeys.length&&0!=this.participantsKeys.length?this.batchTypeValue=!0:this.batchTypeValue=!1;0==t.length&&(this.batchTypeValue=!1)},changeBatchType:function(t){this.batchType=t,this.batchTypeValue?(0==this.batchType&&(this.selectedRowKeys=[]),this.batchTypeValue=!1,this.batchTypeChange()):this.setBox()},addKey:function(t){for(var e=this,a=function(a){if(0==t[a].status){var s=e.selectedRowKeys.findIndex((function(e){return e===t[a].id}));-1==s&&e.selectedRowKeys.push(t[a].id)}},s=0;s<t.length;s++)a(s)},removeKey:function(t){for(var e=this,a=function(a){var s=e.selectedRowKeys.findIndex((function(e){return e===t[a].id}));-1!=s&&e.selectedRowKeys.splice(s,1)},s=0;s<t.length;s++)a(s)},rollback:function(){1==localStorage.getItem("type")?this.$router.push("/wholeMarket/fissionList?isRefresh=1"):this.$router.push("/wholeMarket/fissionList1?isRefresh=1")},chooseTag:function(){1==this.type?(this.tag_arr2=JSON.parse(JSON.stringify(this.tag_arr1)),this.getTags(this.tag_arr2)):(this.tag_arr2=JSON.parse(JSON.stringify(this.tag_arr1)),this.tagName2=JSON.parse(JSON.stringify(this.tagName1)),this.tagVisible=!0)},handleTag:function(){if(1==this.type){this.tag_arr1=[];for(var t=0;t<this.tagChecked.length;t++)this.tagChecked[t]&&this.tag_arr1.push(this.tagList[t].id)}else this.tag_arr1=JSON.parse(JSON.stringify(this.tag_arr2)),this.tagName1=JSON.parse(JSON.stringify(this.tagName2));this.tagVisible=!1},handleCancelTag:function(){this.tag_arr2=[],this.tagName2=[],this.tagChecked=[],this.tagVisible=!1},chooseTags:function(t,e,a){"ok"==t&&(""!=e?(this.tag_arr2=e.split(","),this.tagName2=a):(this.tag_arr2=[],this.tagName2=[]))},getTags:function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(e){var a,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.axios.post("work-activity-public/tag-list",{public_id:this.wx_id,type:1});case 2:a=t.sent,s=a.data,0!=s.error?(this.$message.destroy(),this.$message.error(s.error_msg)):(this.tagList=s.data,this.setTag(e));case 5:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),setTag:function(t){if(this.tagChecked=new Array(this.tagList.length).fill(!1),t){var e=!0,a=!1,s=void 0;try{for(var i,n=t[Symbol.iterator]();!(e=(i=n.next()).done);e=!0)for(var o=i.value,r=0;r<this.tagList.length;r++)o==this.tagList[r].id&&(this.tagChecked[r]=!0)}catch(c){a=!0,s=c}finally{try{e||null==n.return||n.return()}finally{if(a)throw s}}}this.tagVisible=!0},addFansTag:function(){this.wxTagVisible=!0},handleOk:function(t){var e=this;if(e.confirmLoading3=!0,e.tagList.length>=100)return this.$message.destroy(),e.$message.warning("每个公众号最多添加100个标签！"),e.confirmLoading3=!1,!1;if(""==t)return this.$message.destroy(),e.$message.warning("不能为空"),e.confirmLoading3=!1,!1;for(var a=[],s=0;s<t.split(" ").length;s++){if(t.split(" ")[s].length>6)return this.$message.destroy(),e.$message.error("每个标签最多6个字"),e.confirmLoading3=!1,e.inputValue="",!1;t.split(" ")[s].length>0&&(a.push(t.split(" ")[s]),e.confirmLoading3=!1)}e.addTags(a),e.inputValue=""},addTags:function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(e){var a,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.axios.post("tags/tags-create",{wx_id:this.wx_id,tag_name:e});case 2:a=t.sent,s=a.data,0!=s.error?"标签名非法，请注意不能和其他标签重名"==s.error_msg?(this.confirmLoading3=!1,this.$message.destroy(),this.$message.error("该标签名称与微信标签重复，请手动同步微信标签即可。")):(this.confirmLoading3=!1,this.$message.destroy(),this.$message.error(s.error_msg)):(this.wxTagVisible=!1,this.confirmLoading3=!1,this.getTags(),this.inputValue="");case 5:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),cancel:function(){this.inputValue="",this.wxTagVisible=!1},searchFans:function(){this.is_all="0",this.is_export=0,this.participants(1,15)},sign:function(t){var e=this;e.$confirm({title:"确定标记选中的参与人？",okText:"确定",okType:"primary",cancelText:"取消",onOk:function(){e.isLoading=!0,e.changeStatus(t,e.selectedRowKeys)}})},signOne:function(t,e,a){var s=this;s.$confirm({title:"确定标记【"+a+"】？",okText:"确定",okType:"primary",cancelText:"取消",onOk:function(){s.isLoading=!0;var a=[];a.push(e),s.changeStatus(t,a)}})},changeStatus:function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(e,a){var s,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.axios.post("work-activity-public/activity-prize",{prize_id:a,level:e,activity_id:this.activityId});case 2:s=t.sent,i=s.data,0!=i.error?(this.$message.destroy(),this.$message.error(i.error_msg)):(this.$message.success("标记成功"),this.selectedRowKeys=[],this.is_all="0",this.is_export=0,this.participants(this.page2,this.pageSize3));case 5:case"end":return t.stop()}}),t,this)})));function e(e,a){return t.apply(this,arguments)}return e}(),reloadParticipants:function(){this.name="",this.success=0,this.success_prize=0,this.status=0,this.is_form=0,this.is_all="0",this.is_export=0,this.tag_arr1=[],this.tagName1=[],this.participants(1,15)},chooseDownType:function(t){if(0==this.participantsList.length)return this.$message.destroy(),this.$message.warning("暂无数据，无法导出!"),!1;this.is_all=t.key,this.is_export=1,this.progressVisible=!0,this.progressCloseable=!1,this.progressNum=0,this.progressWidth=120,this.moveMask(),this.participants()},moveMask:function(){this.leftSiderWidth=document.getElementsByClassName("menu-sider")[0].style.width,this.$nextTick((function(){document.getElementsByClassName("mask-dialog")[0].style.left=document.getElementsByClassName("menu-sider")[0].style.width}))},participants:function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(){var e,a,s,i,n=arguments;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=n.length>0&&void 0!==n[0]?n[0]:1,a=n.length>1&&void 0!==n[1]?n[1]:this.pageSize2,this.isLoading1=!0,t.next=5,this.axios.post("work-activity-public/get-activity-detail",{activity_id:this.activityId,nickname:this.name,success:this.success,success_prize:this.success_prize,status:this.status,is_form:this.is_form,tags:this.tag_arr1,page:e,pageSize:a,is_export:this.is_export,is_all:this.is_all});case 5:s=t.sent,i=s.data,0!=i.error?(this.isLoading1=!1,this.$message.error(i.error_msg)):0==this.is_export?(this.type=i.data.type,this.wx_id=i.data.wx_id,this.action_type=i.data.action_type,this.page2=e,this.pageSize2=a,this.participantsList=i.data.fans,this.participantsKeys=i.data.fansIds,this.isCurrentDisabled(),this.setCheckedBox(this.participantsList),this.fansCount=i.data.fansCount,this.levelCount=i.data.levelCount,this.oneCount=i.data.oneCount,this.twoCount=i.data.twoCount,this.threeCount=i.data.threeCount,this.prizeCount=i.data.prizeCount,this.prizeOneCount=i.data.prizeOneCount,this.prizeTwoCount=i.data.prizeTwoCount,this.prizeThreeCount=i.data.prizeThreeCount,this.total2=parseInt(i.data.count),this.isLoading1=!1):this.isLoading1=!1;case 8:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),changePage2:function(t,e){this.is_all="0",this.is_export=0,this.participants(t,this.pageSize2)},showSizeChange2:function(t,e){this.is_all="0",this.is_export=0,this.participants(this.page2,e)},onSelectChange:function(t){this.selectedRowKeys=t},lookForm:function(t){this.address=this.participantsList[t].address,this.remark=this.participantsList[t].remark,this.mobile=this.participantsList[t].mobile,this.nickname=this.participantsList[t].name,this.formVisible=!0},handleCancel:function(){this.formVisible=!1,this.address="",this.remark="",this.mobile="",this.nickname=""},helpRecord:function(t,e){this.jid=t,this.participantName=e,this.helpRecord1(),this.visible=!0},onClose:function(){this.visible=!1,this.helpName="",this.tabKey=1},changeTabs:function(t){this.tabKey=t},helpRecord1:function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(){var e,a,s,i,n,o,r,c,l,d,p=arguments;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=p.length>0&&void 0!==p[0]?p[0]:1,a=p.length>1&&void 0!==p[1]?p[1]:this.pageSize3,this.isLoading2=!0,t.next=5,this.axios.post("work-activity-public/activity-trace",{uid:localStorage.getItem("uid"),fans_id:this.jid,activity_id:this.activityId,name:this.helpName,page:e,pageSize:a});case 5:if(s=t.sent,i=s.data,0==i.error){t.next=12;break}this.isLoading2=!1,this.$message.error(i.error_msg),t.next=40;break;case 12:for(this.fansLineData.xAxisData=[],this.fansLineData.seriesData=[],this.hlepRecordList=i.data.user,this.activityType=i.data.type,this.fansList=i.data.fansUsers,n=!0,o=!1,r=void 0,t.prev=20,c=this.fansList[Symbol.iterator]();!(n=(l=c.next()).done);n=!0)d=l.value,this.fansLineData.xAxisData.push(d.name),this.fansLineData.seriesData.push(d.proportion);t.next=28;break;case 24:t.prev=24,t.t0=t["catch"](20),o=!0,r=t.t0;case 28:t.prev=28,t.prev=29,n||null==c.return||c.return();case 31:if(t.prev=31,!o){t.next=34;break}throw r;case 34:return t.finish(31);case 35:return t.finish(28);case 36:this.page3=e,this.pageSize3=a,this.total3=parseInt(i.data.count),this.isLoading2=!1;case 40:case"end":return t.stop()}}),t,this,[[20,24,28,36],[29,,31,35]])})));function e(){return t.apply(this,arguments)}return e}(),changePage3:function(t,e){this.helpRecord1(t,this.pageSize3)},showSizeChange3:function(t,e){this.helpRecord1(1,e)},websocketOnMessage:function(t){"undefined"!=typeof t.type&&"export_activity"==t.type&&(this.progressVisible=!0,this.leftSiderWidth=document.getElementsByClassName("menu-sider")[0].style.width,this.$nextTick((function(){document.getElementsByClassName("mask-dialog")[0].style.left=document.getElementsByClassName("menu-sider")[0].style.width})),this.progressNum=parseInt(t.export_num/t.num*100),100==this.progressNum&&(this.progressWidth=100,this.downLoadUrl=t.url,this.progressCloseable=!0),""!=t.url&&sessionStorage.setItem("fissionDownLoadUrl",this.downLoadUrl))},progressDownload:function(){window.open(this.downLoadUrl),this.progressCancel()},progressCancel:function(){sessionStorage.removeItem("fissionDownLoadUrl"),this.progressVisible=!1}},mounted:function(){this.title=decodeURIComponent(this.$route.query.title),this.activityId=decodeURIComponent(this.$route.query.id),this.menuType=localStorage.getItem("type"),this.is_all="0",this.is_export=0,this.participants(),this.ws.setCallback(this.websocketOnMessage)},beforeRouteEnter:function(t,e,a){a((function(t){t.ws.setCallback(t.websocketOnMessage),sessionStorage.getItem("fissionDownLoadUrl")&&(t.progressCloseable=!0,t.progressNum=100,t.progressWidth=100,t.downLoadUrl=sessionStorage.getItem("fissionDownLoadUrl"),t.progressVisible=!0,t.moveMask())}))},beforeRouteLeave:function(t,e,a){this.ws.setCallback(),this.progressVisible=!1,a()}},b=x,v=(a("eee5"),a("2877")),_=Object(v["a"])(b,s,i,!1,null,"3609bbe9",null);e["default"]=_.exports},"750c":function(t,e,a){e=t.exports=a("2350")(!1),e.push([t.i,"[data-v-eaddd328] .ant-tree-checkbox{float:right}[data-v-eaddd328] .ant-tree-iconEle{display:none!important}[data-v-eaddd328] .ant-tree-node-content-wrapper.ant-tree-node-selected{background-color:#fff!important}[data-v-eaddd328] .ant-list-item{border-bottom:0;padding:0}[data-v-eaddd328] .ant-list-item-meta-title{font-weight:400;line-height:32px}[data-v-eaddd328] .ant-tree li span.ant-tree-checkbox{margin:4px 20px 0 2px}.content-msg[data-v-eaddd328]{color:red;margin:0 20px 12px 0}.group-name[data-v-eaddd328]{overflow:hidden;white-space:nowrap;text-overflow:ellipsis;width:calc(100% - 4px);display:inline-block;vertical-align:bottom;line-height:21px}.tabBox[data-v-eaddd328]{background:#fff;-webkit-box-sizing:border-box;box-sizing:border-box}[data-v-eaddd328] .ant-tag-checkable{background-color:#fafafa;border-color:#d9d9d9;font-size:13px}[data-v-eaddd328] .ant-tag-checkable-checked{background-color:#1890ff}[data-v-eaddd328] .ant-col-20{margin-left:20px;width:calc(83.33333% - 20px)}.add-tag-group[data-v-eaddd328] .ant-col-20{margin-left:0;width:83.33333333%}.l-h-30[data-v-eaddd328]{line-height:30px}",""])},"9e0c":function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"tabBox"},[a("a-empty",{directives:[{name:"show",rawName:"v-show",value:0==t.groupList.length&&1==t.isNotAdd,expression:"groupList.length == 0 && isNotAdd == 1"}]},[a("span",{attrs:{slot:"description"},slot:"description"},[t._v("\n\t\t\t尚未创建标签，无法选择标签\n\t\t")])]),t._l(t.groupList,(function(e,s){return[t.isMore||!t.isMore&&s<5?a("div",[a("span",{staticClass:"group-name mb-10"},[e.name&&""!=e.name?a("a-popover",{attrs:{trigger:"hover"}},[a("span",{staticStyle:{display:"inline-block","max-width":"500px","word-wrap":"break-word","word-break":"break-all"},attrs:{slot:"content"},slot:"content"},[t._v("\n\t\t\t\t\t\t"+t._s(e.name)+"\n\t\t\t\t\t")]),a("span",{staticStyle:{"font-weight":"700"}},[t._v(" "+t._s(e.name)+"：")])]):t._e()],1),t._l(e.data,(function(i,n){return a("span",[e.disabled[n]?t._e():a("a-checkable-tag",{staticClass:"h-30 l-h-30 mb-10",on:{change:function(e){return t.changeTags(i.id,s,i.tagname)}},model:{value:e.checked[n],callback:function(a){t.$set(e.checked,n,a)},expression:"item.checked[tagIndex]"}},[t._v("\n\t\t\t\t\t"+t._s(i.tagname)+"\n\t\t\t\t")]),e.disabled[n]&&1==t.isDisabled?a("a-button",{staticStyle:{margin:"5px","line-height":"26px","font-size":"12px",height:"auto !important",padding:"0 7px"},attrs:{disabled:e.disabled[n]&&1==t.isDisabled}},[t._v("\n\t\t\t\t\t"+t._s(i.tagname)+"\n\t\t\t\t")]):t._e()],1)})),1!=t.isNotAdd?a("a-button",{directives:[{name:"has",rawName:"v-has",value:"client-tag-add",expression:"'client-tag-add'"}],staticStyle:{"font-size":"13px",height:"30px",color:"#1E90FF","border-color":"#1E90FF"},attrs:{icon:"plus"},on:{click:function(a){return t.createTag(e.id)}}},[t._v("\n\t\t\t\t添加\n\t\t\t")]):t._e()],2):t._e()]})),t.groupList.length>5?a("div",{staticStyle:{"font-size":"13px",height:"26px",color:"#1890FF","text-align":"center",cursor:"pointer"},on:{click:t.showMore}},[t.isMore?t._e():[t._v("更多")],t.isMore?[t._v("收起")]:t._e(),a("a-icon",{attrs:{type:t.isMore?"arrow-up":"arrow-down"}})],2):t._e(),t.groupList.length>0&&1!=t.isNotAdd?a("a-button",{directives:[{name:"has",rawName:"v-has",value:"client-tag-group-add",expression:"'client-tag-group-add'"}],staticStyle:{"font-size":"13px",height:"26px","margin-right":"10px",color:"#1E90FF"},attrs:{icon:"plus"},on:{click:t.addTagGroup}},[t._v("\n\t\t新建标签组\n\t")]):t._e(),a("a-modal",{attrs:{title:"新建标签",zIndex:99999,confirmLoading:t.confirmLoading3,width:"550px"},on:{ok:function(e){return t.handleOk(t.inputValue)},cancel:t.cancel},model:{value:t.visible,callback:function(e){t.visible=e},expression:"visible"}},[a("a-form-item",{attrs:{"label-col":{span:4},"wrapper-col":{span:20}}},[a("template",{slot:"label"},[t._v("\n\t\t\t\t选择分组\n\t\t\t")]),a("a-select",{staticStyle:{width:"250px"},attrs:{showSearch:"",optionFilterProp:"children",disabled:""},model:{value:t.group_id,callback:function(e){t.group_id=e},expression:"group_id"}},t._l(t.groupList,(function(e){return a("a-select-option",{attrs:{value:e.id}},[t._v("\n\t\t\t\t\t"+t._s(e.name)+"\n\t\t\t\t")])})),1)],2),a("a-form-item",{attrs:{"label-col":{span:4},"wrapper-col":{span:20}}},[a("template",{slot:"label"},[t._v("\n\t\t\t\t标签名称\n\t\t\t")]),a("p",{staticStyle:{margin:"0px","font-size":"13px",color:"#909399"}},[t._v("\n\t\t\t\t每个标签名称最多15个字。同时新建多个标签时，请用“空格”隔开")]),a("a-input",{attrs:{placeholder:"请输入标签（不得超过15个字符）"},model:{value:t.inputValue,callback:function(e){t.inputValue=e},expression:"inputValue"}})],2)],1),a("a-modal",{staticClass:"add-tag-group",attrs:{zIndex:99999,title:"新建标签组",visible:t.groupVisible,confirmLoading:t.confirmLoading},on:{ok:t.handleOk2,cancel:t.handleCancel}},[a("a-form-item",{staticClass:"current0",attrs:{"label-col":{span:4},"wrapper-col":{span:20}}},[a("template",{slot:"label"},[a("span",{staticStyle:{color:"red"}},[t._v("*")]),t._v("分组名称\n\t\t\t")]),a("a-input",{attrs:{placeholder:"请输入分组名(不得超过15个字符)",maxLength:15},model:{value:t.teamName,callback:function(e){t.teamName=e},expression:"teamName"}},[a("span",{attrs:{slot:"suffix"},slot:"suffix"},[a("span",[t._v(t._s(t.teamName.length))]),t._v("/15\n\t\t\t\t\t\t\t\t\t\t\t")])])],2),a("a-form-item",{staticClass:"current0",attrs:{"label-col":{span:4},"wrapper-col":{span:20}}},[a("template",{slot:"label"},[a("span",{staticStyle:{color:"red"}},[t._v("*")]),t._v("标签名称\n\t\t\t")]),a("p",{staticStyle:{margin:"0px","font-size":"13px",color:"#909399"}},[t._v("\n\t\t\t\t每个标签名称最多15个字。同时新建多个标签时，请用“空格”隔开\n\t\t\t")]),a("a-input",{attrs:{placeholder:"请输入标签（不得超过15个字符）"},model:{value:t.inputValue2,callback:function(e){t.inputValue2=e},expression:"inputValue2"}})],2)],1)],2)},i=[],n=(a("a481"),a("28a5"),a("6762"),a("2fdb"),a("96cf"),a("3b8d")),o=(a("c5f6"),{name:"corpChooseTagModal",props:{callback:{type:Function,default:null},hasChoose:{type:Array,default:function(){}},tagname:{type:Array,default:function(){}},isDisabled:{type:Number,default:0},disabledTag:{type:Array,default:function(){}},isNotAdd:{type:Number,default:0},id:{type:String,default:""}},data:function(){return{corpId:"",groupList:[],tag_arr:[],tag_ids:"",tagName:[],group_id:[],checked:[],visible:!1,confirmLoading3:!1,inputValue:"",newTagList:[],isMore:!1,groupVisible:!1,confirmLoading:!1,teamName:"",inputValue2:"",newTagList2:[]}},watch:{hasChoose:{handler:function(t){var e=this;"undefined"!=typeof t&&this.groupList.length&&(this.tag_arr=t,this.tag_ids=t.join(),this.tagName=JSON.parse(JSON.stringify(this.tagname)),this.hasChoose.map((function(t){e.groupList.map((function(e){e.data.map((function(a,s){t==a.id&&(e.checked[s]=!0)}))}))})),0==t.length&&this.groupList.map((function(t){t.checked=[]})),this.$forceUpdate())},deep:!0},id:{handler:function(t){""!=typeof t&&(this.corpId=t,this.getTags())},deep:!0},disabledTag:{handler:function(t){var e=this;"undefined"!=typeof t&&this.groupList.length&&(this.disabledTag.map((function(t){e.groupList.map((function(e){e.data.map((function(a,s){t==a.id&&(e.disabled[s]=!0)}))}))})),this.$forceUpdate())},deep:!0}},methods:{getTags:function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(){var e,a,s=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.axios.post("work-tag-group/tag-group",{corp_id:this.corpId||localStorage.getItem("corpId"),is_not_add:this.isNotAdd});case 2:e=t.sent,a=e.data,0!=a.error?this.$message.error(a.error_msg):(this.groupList=a.data,this.groupList.map((function(t){t.checked=[],t.disabled=[]})),"undefined"!=typeof this.disabledTag&&this.disabledTag.length>0&&this.disabledTag.map((function(t){s.groupList.map((function(e){e.data.map((function(a,s){t==a.id&&(e.disabled[s]=!0)}))}))})),"undefined"!=typeof this.hasChoose&&this.hasChoose.length>0&&(this.tag_arr=this.hasChoose,this.tag_ids=this.hasChoose.join(),this.tagName=JSON.parse(JSON.stringify(this.tagname)),this.hasChoose.map((function(t){s.groupList.map((function(e){e.data.map((function(a,s){t==a.id&&(e.checked[s]=!0)}))}))})),this.$forceUpdate()));case 5:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),changeTags:function(t,e,a){Array.prototype.indexOf=function(t){for(var e=0;e<this.length;e++)if(this[e]==t)return e;return-1},Array.prototype.remove=function(t){var e=this.indexOf(t);e>-1&&this.splice(e,1)};var s=String(t);if(this.tag_arr.includes(s))this.tagName.splice(this.tag_arr.indexOf(s),1),this.tag_arr.remove(s);else if(this.tag_arr.length+1>9999){this.$message.warning("不可选中，客户标签数量上限9999个");for(var i=0;i<this.groupList[e].data.length;i++)this.groupList[e].data[i].id==s&&(this.groupList[e].checked[i]=!1)}else this.tag_arr.push(s),this.tagName.push(a);this.$forceUpdate(),this.tag_ids=this.tag_arr.join(),null!==this.callback&&"function"===typeof this.callback&&this.callback("ok",this.tag_ids,this.tagName)},createTag:function(t){this.group_id=t;var e=0;if(this.groupList.map((function(t){e+=t.data.length})),e>=9999)return this.$message.warning("标签数量已超过上限9999个，无法创建"),!1;this.visible=!0},handleOk:function(t){var e=this;if(e.confirmLoading3=!0,""==t)return e.$message.warning("不能为空"),e.confirmLoading3=!1,!1;for(var a=0;a<t.split(" ").length;a++){if(t.split(" ")[a].length>15)return e.$message.error("每个标签最多15个字"),e.confirmLoading3=!1,!1;t.split(" ")[a].length>0&&e.newTagList.push(t.split(" ")[a])}e.addTags(),e.inputValue="",e.newTagList=[],e.confirmLoading3=!1},addTags:function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(){var e,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.axios.post("work-tag/add",{corp_id:this.corpId||localStorage.getItem("corpId"),suite_id:1,type:0,group_id:this.group_id,name:this.newTagList});case 2:e=t.sent,a=e.data,0!=a.error?(this.$message.error(a.error_msg),this.confirmLoading3=!1):(this.isLoading=!1,this.visible=!1,this.confirmLoading3=!1,this.getTags(),this.inputValue="",this.newTagList=[]);case 5:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),cancel:function(){this.visible=!1,this.inputValue=""},showMore:function(){this.isMore=!this.isMore},addTagGroup:function(){this.groupVisible=!0},handleCancel:function(){this.groupVisible=!1,this.teamName="",this.newTagList2=[],this.inputValue2=""},handleOk2:function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(){var e,a,s,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(String.prototype.Trim=function(){return this.replace(/(^\s*)|(\s*$)/g,"")},this.teamName=this.teamName.Trim(),this.teamName){t.next=5;break}return this.$message.error("请输入分组名"),t.abrupt("return",!1);case 5:if(""!=this.inputValue2){t.next=10;break}return this.$message.warning("标签名称不能为空"),t.abrupt("return",!1);case 10:e=JSON.parse(JSON.stringify(this.inputValue2)).split(" "),a=0;case 12:if(!(a<e.length)){t.next=23;break}if(!(e[a].length>15)){t.next=19;break}return this.$message.error("每个标签最多15个字"),this.inputValue2="",t.abrupt("return",!1);case 19:e[a].length>0&&this.newTagList2.push(e[a]);case 20:a++,t.next=12;break;case 23:return this.confirmLoading=!0,t.next=26,this.axios.post("work-tag-group/add",{corp_id:this.corpId||localStorage.getItem("corpId"),suite_id:1,name:this.teamName,type:0,isMasterAccount:localStorage.getItem("isMasterAccount"),sub_id:localStorage.getItem("sub_id"),tag_name:this.newTagList2});case 26:s=t.sent,i=s.data,0!=i.error?this.$message.error(i.error_msg):(this.teamName="",this.newTagList2=[],this.inputValue2="",this.groupVisible=!1,this.getTags()),this.confirmLoading=!1;case 30:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},mounted:function(){this.corpId=this.id||localStorage.getItem("corpId"),this.getTags()}}),r=o,c=(a("d128"),a("2877")),l=Object(c["a"])(r,s,i,!1,null,"eaddd328",null);e["a"]=l.exports},bbaf:function(t,e,a){var s=a("750c");"string"===typeof s&&(s=[[t.i,s,""]]),s.locals&&(t.exports=s.locals);var i=a("499e").default;i("5de9c110",s,!0,{sourceMap:!1,shadowMode:!1})},d128:function(t,e,a){"use strict";var s=a("bbaf"),i=a.n(s);i.a},e953:function(t,e,a){var s=a("6f73");"string"===typeof s&&(s=[[t.i,s,""]]),s.locals&&(t.exports=s.locals);var i=a("499e").default;i("2fab9120",s,!0,{sourceMap:!1,shadowMode:!1})},eee5:function(t,e,a){"use strict";var s=a("e953"),i=a.n(s);i.a}}]);