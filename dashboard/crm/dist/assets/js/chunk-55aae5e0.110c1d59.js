(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-55aae5e0"],{2820:function(t,e,a){"use strict";var i=a("b05b"),n=a.n(i);n.a},5115:function(t,e,a){e=t.exports=a("2350")(!1),e.push([t.i,"#components-layout-demo-basic[data-v-bf75dd66]{height:100%}#components-layout-demo-basic .ant-layout-header[data-v-bf75dd66]{background:#fff;border-bottom:1px solid #e2e2e2;height:50px;min-width:885px;width:100%;line-height:50px}[data-v-bf75dd66] .ant-layout-header{padding:0 20px;font-size:16px;text-align:left}#components-layout-demo-basic .ant-layout-sider[data-v-bf75dd66]{background:#fff;-webkit-box-flex:0!important;-ms-flex:0 0 250px!important;flex:0 0 250px!important;max-width:250px!important;min-width:250px!important;width:250px!important;border-right:1px solid #e2e2e2}#components-layout-demo-basic .ant-layout-content[data-v-bf75dd66]{margin:0 20px 20px;min-width:885px;width:100%;padding-right:40px}.content-msg[data-v-bf75dd66]{width:100%;border:1px solid #ffdda6;background:#fff2db;padding:10px;margin-top:12px}.content-hd[data-v-bf75dd66]{height:60px;line-height:60px}.content-bd[data-v-bf75dd66],.content-hd[data-v-bf75dd66]{width:100%;min-width:885px}.content-bd[data-v-bf75dd66]{background:#fff;min-height:120px;border:1px solid #e2e2e2}#components-layout-demo-basic>.ant-layout[data-v-bf75dd66]{margin-bottom:48px}#components-layout-demo-basic>.ant-layout[data-v-bf75dd66]:last-child{margin:0}.ant-layout.ant-layout-has-sider[data-v-bf75dd66],.list[data-v-bf75dd66]{height:100%}.btn-primary[data-v-bf75dd66]{margin-left:20px}[data-v-bf75dd66] .dark-row{background:#fafafa}[data-v-bf75dd66] .light-row{background:#fff}[data-v-bf75dd66] .ant-radio-button-wrapper{width:90px;margin:0;text-align:center}.help[data-v-bf75dd66]{display:inline-block;margin-left:10px}.help-icon[data-v-bf75dd66]{margin-right:5px;font-size:14px;margin-top:4px}.help-transition[data-v-bf75dd66]{-webkit-animation:help-data-v-bf75dd66 1s infinite;animation:help-data-v-bf75dd66 1s infinite}.help a[data-v-bf75dd66]{font-size:14px}.help a[data-v-bf75dd66]:link,.help a[data-v-bf75dd66]:visited{color:#1890ff;text-decoration:none}.help-transition1[data-v-bf75dd66]{-webkit-animation:help1-data-v-bf75dd66 1s infinite;animation:help1-data-v-bf75dd66 1s infinite}@-webkit-keyframes help-data-v-bf75dd66{0%{-webkit-transform:translate(0);transform:translate(0)}50%{-webkit-transform:translateY(-8px);transform:translateY(-8px)}to{-webkit-transform:translateY(3px);transform:translateY(3px)}}@keyframes help-data-v-bf75dd66{0%{-webkit-transform:translate(0);transform:translate(0)}50%{-webkit-transform:translateY(-8px);transform:translateY(-8px)}to{-webkit-transform:translateY(3px);transform:translateY(3px)}}@-webkit-keyframes help1-data-v-bf75dd66{0%{-webkit-transform:translateY(3px);transform:translateY(3px)}50%{-webkit-transform:translateY(-4px);transform:translateY(-4px)}to{-webkit-transform:translate(0);transform:translate(0)}}@keyframes help1-data-v-bf75dd66{0%{-webkit-transform:translateY(3px);transform:translateY(3px)}50%{-webkit-transform:translateY(-4px);transform:translateY(-4px)}to{-webkit-transform:translate(0);transform:translate(0)}}",""])},b05b:function(t,e,a){var i=a("5115");"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var n=a("499e").default;n("1ea4885a",i,!0,{sourceMap:!1,shadowMode:!1})},e698:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"list"},[a("div",{attrs:{id:"components-layout-demo-basic"}},[a("a-layout",{staticStyle:{position:"relative",height:"100%",overflow:"hidden"}},[a("a-layout",{staticClass:"scroll",staticStyle:{position:"absolute",top:"0",bottom:"0",left:"0",right:"0","overflow-x":"hidden","overflow-y":"auto"}},[a("a-layout-header",[t._v("群打卡\n\t\t\t\t\t"),a("div",{staticClass:"help",class:0==t.showTransition?"help-transition":1==t.showTransition?"help-transition1":""},[a("a",{attrs:{href:"https://support.qq.com/products/312071/faqs/90120",target:"_blank"}},[a("a-icon",{staticClass:"help-icon",attrs:{type:"question-circle"}}),a("span",{staticStyle:{float:"right"}},[t._v("点我帮助")])],1)])]),a("a-layout-content",[a("div",{staticClass:"content-msg"},[t._v("\n\t\t\t\t\t\t群打卡，作为运营社群的常规方式之一，其不仅可以提升老客户的积极性，而且在一定程度上还可以增加用户粘性，提升群聊活跃度及转化率，尤其对于教育、电商非常适用。\n\t\t\t\t\t\t"),a("p",{staticStyle:{margin:"10px 0 2px"}},[t._v("\n\t\t\t\t\t\t\t流程如下：\n\t\t\t\t\t\t")]),a("p",{staticStyle:{"margin-bottom":"2px"}},[t._v("\n\t\t\t\t\t\t\t1、登录企业微信管理后台，在【客户联系】-【聊天工具】-【自动回复】中，将二维码或者链接设置为打卡自动回复语。群成员可以每天在群聊中@小助理，发送指定的关键词，如“签到”，在群内收到打卡入口，进行打卡。\n\t\t\t\t\t\t")]),a("p",{staticStyle:{"margin-bottom":"2px"}},[t._v("\n\t\t\t\t\t\t\t2、群主可将自动回复内容添加到群公告中，方便群内的企业成员使用，以免社群太活跃，导致刚发出去没多久的打卡链接、二维码被刷上去了，而导致客户找不到活动入口。\n\t\t\t\t\t\t")]),a("p",{staticStyle:{"margin-bottom":"2px"}},[t._v("\n\t\t\t\t\t\t\t3、同时，使用客户群 群发工具，由企业管理员或是员工群发，将打卡活动群发到客户群中，邀请客户参与。\n\t\t\t\t\t\t")]),a("p",{staticStyle:{"margin-bottom":"2px",color:"red"}},[t._v("\n\t\t\t\t\t\t\t目前仅限个人微信用户才可以参与打卡活动，企业微信员工不可参与。\n\t\t\t\t\t\t")])]),a("div",{staticClass:"content-hd"},[a("a-col",{staticStyle:{float:"left"}},[t.corpLen>1?a("a-select",{staticStyle:{width:"210px","margin-right":"10px"},attrs:{showSearch:"",optionFilterProp:"children"},on:{change:t.handleChange},model:{value:t.corpId,callback:function(e){t.corpId=e},expression:"corpId"}},[t._l(t.corpInfo,(function(e){return[a("a-select-option",{attrs:{value:e.corpid}},[t._v(t._s(e.corp_full_name||e.corp_name)+"\n\t\t\t\t\t\t\t\t\t")])]}))],2):t._e(),a("a-input",{staticStyle:{width:"150px","margin-right":"10px"},attrs:{placeholder:"搜索活动名称"},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.find(e)}},model:{value:t.title,callback:function(e){t.title=e},expression:"title"}}),a("a-select",{staticStyle:{width:"120px","margin-right":"10px"},attrs:{placeholder:"活动状态"},model:{value:t.status,callback:function(e){t.status=e},expression:"status"}},[a("a-select-option",{attrs:{value:"0"}},[t._v("未开始")]),a("a-select-option",{attrs:{value:"1"}},[t._v("进行中")]),a("a-select-option",{attrs:{value:"2"}},[t._v("已结束")])],1),a("a-range-picker",{staticStyle:{width:"300px"},on:{change:t.changeTime},model:{value:t.activityTime,callback:function(e){t.activityTime=e},expression:"activityTime"}}),a("a-button",{staticStyle:{margin:"0px 10px"},attrs:{type:"primary"},on:{click:t.find}},[t._v("查找")]),a("a-button",{on:{click:t.clear}},[t._v("清空")])],1),a("a-col",{staticStyle:{float:"right"}},[a("a-button",{directives:[{name:"has",rawName:"v-has",value:"groupClockIn-add",expression:"'groupClockIn-add'"}],staticClass:"btn-primary",attrs:{icon:"plus",type:"primary"},on:{click:t.addWelcomeText}},[t._v("\n\t\t\t\t\t\t\t\t新建活动\n\t\t\t\t\t\t\t")])],1)],1),a("div",{staticClass:"content-bd"},[a("a-spin",{attrs:{tip:"Loading...",size:"large",spinning:t.isLoading}},[a("a-table",{directives:[{name:"has",rawName:"v-has",value:"groupClockIn-list",expression:"'groupClockIn-list'"}],attrs:{columns:t.columns,dataSource:t.activityList,pagination:!1,rowClassName:t.rowClassName},scopedSlots:t._u([{key:"url",fn:function(t,e,i){return a("span",{},[a("div",{ref:"qrcode"+i,staticStyle:{width:"100px",margin:"0 auto 6px",float:"left"},attrs:{id:"qrcode"+i}})])}},{key:"title2",fn:function(e,i){return a("span",{},[a("div",{staticStyle:{width:"140px","margin-right":"15px"}},[t._v(t._s(i.title))])])}},{key:"date_str",fn:function(e,i){return a("span",{},[1==i.type?a("div",{staticStyle:{width:"150px"}},[t._v("永久有效")]):t._e(),2==i.type?a("div",{staticStyle:{width:"150px"}},[t._v("\n\t\t\t\t\t\t\t\t\t\t"+t._s(i.start_time)+"至"+t._s(i.end_time)+"\n\t\t\t\t\t\t\t\t\t")]):t._e()])}},{key:"choose_type",fn:function(e,i){return a("span",{},[1==e?a("div",[t._v("连续打卡")]):t._e(),2==e?a("div",[t._v("累计打卡")]):t._e()])}},{key:"taskRule",fn:function(e,i){return a("span",{},t._l(i.task,(function(e){return a("div",[1==i.choose_type?a("span",[t._v("连续打卡")]):t._e(),2==i.choose_type?a("span",[t._v("累计打卡")]):t._e(),a("span",{staticStyle:{color:"red"}},[t._v(t._s(e.days))]),t._v("天，赠送"),1==e.type?a("span",[t._v(t._s(e.reward_name))]):t._e(),2==e.type?a("span",[t._v("红包"+t._s(e.money_amount)+"元")]):t._e()])})),0)}},{key:"num",fn:function(e,i){return a("span",{},[t._v("\n\t\t\t\t\t\t\t\t\t"+t._s(e)+"人\n\t\t\t\t\t\t\t\t")])}},{key:"status",fn:function(e,i){return a("span",{},[0==e?a("div",[t._v("未开始")]):t._e(),1==e?a("div",[t._v("进行中")]):t._e(),2==e?a("div",[t._v("已结束")]):t._e()])}},{key:"action",fn:function(e,i,n){return a("div",{staticStyle:{width:"180px"}},[0==i.status?a("a-button",{directives:[{name:"has",rawName:"v-has",value:"groupClockIn-release",expression:"'groupClockIn-release'"}],staticStyle:{margin:"0 5px 5px 0"},on:{click:function(e){return t.releaseActivity(i.id)}}},[t._v("发布\n\t\t\t\t\t\t\t\t\t")]):t._e(),1==i.status?a("a-button",{directives:[{name:"has",rawName:"v-has",value:"groupClockIn-failure",expression:"'groupClockIn-failure'"}],staticStyle:{margin:"0 5px 5px 0"},on:{click:function(e){return t.failure(i.id,i.title)}}},[t._v("使失效\n\t\t\t\t\t\t\t\t\t")]):t._e(),2!=i.status?a("a-button",{directives:[{name:"has",rawName:"v-has",value:"groupClockIn-edit",expression:"'groupClockIn-edit'"}],staticStyle:{margin:"0 5px 5px 0"},on:{click:function(e){return t.edit(i.id)}}},[t._v("编辑\n\t\t\t\t\t\t\t\t\t")]):t._e(),0!=i.status?a("a-button",{directives:[{name:"has",rawName:"v-has",value:"groupClockIn-detail",expression:"'groupClockIn-detail'"}],staticStyle:{margin:"0 5px 5px 0"},on:{click:function(e){return t.openDetail(i.id,i.title)}}},[t._v("参与明细\n\t\t\t\t\t\t\t\t\t")]):t._e(),1==i.status?a("a-button",{directives:[{name:"has",rawName:"v-has",value:"groupClockIn-load",expression:"'groupClockIn-load'"}],staticClass:"actionBtn",staticStyle:{margin:"0 5px 5px 0"},attrs:{"data-url":i.qr_code,"data-name":i.title,"data-id":"qrcode"+n},on:{click:t.downLoadWay}},[t._v("下载\n\t\t\t\t\t\t\t\t\t")]):t._e(),1==i.status?a("a-button",{directives:[{name:"has",rawName:"v-has",value:"groupClockIn-load",expression:"'groupClockIn-load'"}],staticClass:"actionBtn",staticStyle:{margin:"0 5px 5px 0"},on:{click:function(e){return t.copyText(i.url)}}},[t._v("活动链接\n\t\t\t\t\t\t\t\t\t")]):t._e(),1!=i.status?a("a-button",{directives:[{name:"has",rawName:"v-has",value:"groupClockIn-delete",expression:"'groupClockIn-delete'"}],on:{click:function(e){return t.deleteActivity(i.id,i.title)}}},[t._v("删除\n\t\t\t\t\t\t\t\t\t")]):t._e()],1)}}])}),a("div",{directives:[{name:"show",rawName:"v-show",value:t.total>0,expression:"total > 0"}],staticClass:"pagination",staticStyle:{width:"100%",position:"absolute",margin:"20px 0px"}},[a("div",{staticStyle:{height:"32px",float:"left","line-height":"32px"}},[t._v("\n\t\t\t\t\t\t\t\t\t共\n\t\t\t\t\t\t\t\t\t"),a("span",{staticStyle:{color:"blue"}},[t._v(t._s(t.total))]),t._v("条\n\t\t\t\t\t\t\t\t")]),a("div",{staticClass:"pagination",staticStyle:{height:"32px",float:"right"}},[a("a-pagination",{attrs:{total:t.total,showSizeChanger:"",showQuickJumper:t.quickJumper,current:t.page,pageSize:t.pageSize,pageSizeOptions:["15","30","50","100"]},on:{change:t.changePage,showSizeChange:t.showSizeChange}})],1)])],1)],1)])],1)],1)],1)])},n=[],o=(a("7f7f"),a("96cf"),a("3b8d")),s=a("641c"),r=a("c1df"),c=a.n(r),d=a("d044"),l=a.n(d),p=[{title:"打卡二维码",dataIndex:"url",key:"url",width:"120px",scopedSlots:{customRender:"url"}},{title:"打卡活动名称",dataIndex:"title",key:"title",width:"120px",scopedSlots:{customRender:"title2"}},{title:"活动时间",dataIndex:"date_str",key:"date_str",scopedSlots:{customRender:"date_str"}},{title:"打卡类型",dataIndex:"choose_type",key:"choose_type",scopedSlots:{customRender:"choose_type"}},{title:"规则",dataIndex:"taskRule",key:"taskRule",scopedSlots:{customRender:"taskRule"}},{title:"参与打卡人数",dataIndex:"num",key:"num",scopedSlots:{customRender:"num"}},{title:"状态",dataIndex:"status",key:"status",scopedSlots:{customRender:"status"}},{title:"操作",dataIndex:"action",key:"action",scopedSlots:{customRender:"action"}}],u={name:"groupClockIn",components:{MyIcon:s["a"]},data:function(){var t=localStorage.getItem("corpId")?localStorage.getItem("corpId"):"";return{suite_id:1,corpId:t,corpInfo:[],status:[],title:"",activityTime:[],activityList:[],isLoading:!0,columns:p,total:0,quickJumper:!1,page:1,pageSize:15,corpLen:JSON.parse(localStorage.getItem("corpArr")).length,showTransition:1}},methods:{initHelp:function(){var t=this;setInterval((function(){t.showTransition=(t.showTransition+1)%5}),1e3)},handleChange:function(t){this.corpId=t},rowClassName:function(t,e){var a="dark-row";return e%2===0&&(a="light-row"),a},changeTime:function(t,e){this.activityTime=t},find:function(){this.getActivityList()},clear:function(){this.status=[],this.title="",this.activityTime=[],this.page=1,this.pageSize=15,this.corpId=localStorage.getItem("corpId")?localStorage.getItem("corpId"):"",this.getActivityList()},addWelcomeText:function(){this.$router.push("/group/clockInAdd")},getActivityList:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(){var e,a,i,n,o,s=this,r=arguments;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=r.length>0&&void 0!==r[0]?r[0]:1,a=r.length>1&&void 0!==r[1]?r[1]:this.pageSize,this.isLoading=!0,t.next=5,this.axios.post("work-group-clock-activity/list",{corp_id:this.corpId,status:this.status,title:this.title,start_time:this.activityTime.length>0?c()(this.activityTime[0]).format("YYYY-MM-DD"):"",end_time:this.activityTime.length>0?c()(this.activityTime[1]).format("YYYY-MM-DD"):"",page:e,page_size:a});case 5:i=t.sent,n=i.data,0!=n.error?(this.isLoading=!1,this.$message.error(n.error_msg)):(this.isLoading=!1,this.activityList=n.data.info,this.total=parseInt(n.data.count),this.page=e,this.pageSize=a,this.quickJumper=this.total>this.pageSize,o=this,this.$nextTick((function(){for(var t=0;t<s.activityList.length;t++)document.getElementById("qrcode"+t).innerHTML="";for(var e=0;e<s.activityList.length;e++)o.qrcode(s.activityList[e].url,e)})));case 8:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),qrcode:function(t,e){new l.a("qrcode"+e,{width:100,height:100,text:t,colorDark:"#000",colorLight:"#FFF"})},copyText:function(t){var e=this,a=document.createElement("input");document.body.appendChild(a),a.setAttribute("value",t),a.select(),document.execCommand("copy")&&(document.execCommand("copy"),e.$message.success("复制成功！")),document.body.removeChild(a)},failure:function(t,e){var a=this;a.$confirm({title:"确定结束【"+e+"】活动？",okText:"确定",okType:"primary",cancelText:"取消",onOk:function(){a.isLoading=!0,a.changeStatus(t,0)}})},releaseActivity:function(t){var e=this;e.$confirm({title:"确定发布该活动？",okText:"确定",okType:"primary",cancelText:"取消",onOk:function(){e.isLoading=!0,e.changeStatus(t,1)}})},deleteActivity:function(t,e){var a=this;a.$confirm({title:"确定删除【"+e+"】活动？",okText:"确定",okType:"primary",cancelText:"取消",onOk:function(){a.isLoading=!0,a.changeStatus(t,2)}})},changeStatus:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(e,a){var i,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.axios.post("work-group-clock-activity/invalid",{id:e,type:a});case 2:i=t.sent,n=i.data,0!=n.error?(this.isLoading=!1,this.$message.error(n.error_msg)):0==a&&1==this.activityList.length&&this.page>1?this.getActivityList(this.page-1,this.pageSize):this.getActivityList(this.page,this.pageSize);case 5:case"end":return t.stop()}}),t,this)})));function e(e,a){return t.apply(this,arguments)}return e}(),downLoadWay:function(t){var e=this,a=new Image;a.setAttribute("crossOrigin","anonymous");document.getElementById(t.target.dataset.id);a.src=document.getElementById(t.target.dataset.id).getElementsByTagName("img")[0].getAttribute("src"),a.onload=function(){var i=document.createElement("canvas");i.width=200,i.height=200;var n=i.getContext("2d");n.drawImage(a,0,0,200,200),i.toBlob((function(a){var i=URL.createObjectURL(a);e.download(i,t.target.dataset.name),URL.revokeObjectURL(i)}))}},download:function(t,e){var a=document.createElement("a");a.download=e,a.href=t,a.click(),a.remove()},edit:function(t){this.$router.push("/group/clockInAdd?id="+t)},changePage:function(t,e){this.getActivityList(t,e),this.$nextTick((function(){document.getElementsByClassName("scroll")[0].scrollTo(0,280)}))},showSizeChange:function(t,e){this.getActivityList(1,e)},openDetail:function(t,e){this.$router.push("/group/joinList?joinId="+t+"&joinTitle="+e)}},mounted:function(){var t=this;this.initHelp(),this.$store.dispatch("getCorp",(function(e){t.corpInfo=e,t.getActivityList()}))},beforeRouteEnter:function(t,e,a){"/group/clockIn"==e.path&&"undefined"!=typeof t.query.isRefresh&&"1"==t.query.isRefresh?a((function(t){t.getActivityList(t.page,t.pageSize)})):"/group/joinList"==e.path&&"undefined"!=typeof t.query.isRefresh&&"1"==t.query.isRefresh?a((function(t){t.getActivityList(t.page,t.pageSize)})):a((function(t){t.status=[],t.title="",t.activityTime=[],t.page=1,t.pageSize=15,t.corpId=localStorage.getItem("corpId")?localStorage.getItem("corpId"):"",t.getActivityList()})),a()}},h=u,m=(a("2820"),a("2877")),f=Object(m["a"])(h,i,n,!1,null,"bf75dd66",null);e["default"]=f.exports}}]);