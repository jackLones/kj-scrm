(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-50837cde"],{"0094":function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("a-modal",{attrs:{title:"选择企业微信",width:"888"},on:{ok:t.handleOk,cancel:t.handleCancel},model:{value:t.showModal,callback:function(e){t.showModal=e},expression:"showModal"}},[n("div",{staticStyle:{height:"270px"}},[t.corpInfo[0]?n("a-select",{staticStyle:{width:"200px","margin-bottom":"20px","margin-left":"5px"},attrs:{showSearch:"",optionFilterProp:"children"},on:{change:t.changeWx},model:{value:t.changeBackground,callback:function(e){t.changeBackground=e},expression:"changeBackground"}},[t._l(t.corpInfo,(function(e){return[n("a-select-option",{attrs:{value:e.corpid}},[t._v("\n\t\t\t\t\t\t"+t._s(e.corp_name)+"\n\t\t\t\t\t")])]}))],2):t._e(),n("div",{staticClass:"wxtpl",staticStyle:{height:"230px"}},[t._l(t.corpInfo,(function(e,i){return["scene"!=t.routeName&&"template"!=t.routeName?[n("a-radio-group",{on:{change:function(a){return t.changeWx2(e.corpid,e.corp_name)}},model:{value:t.changeBackground,callback:function(e){t.changeBackground=e},expression:"changeBackground"}},[n("a-radio-button",{attrs:{value:e.corpid}},[n("div",[n("img",{staticStyle:{"border-radius":"4px",width:"32px"},attrs:{src:a("de05"),alt:""}}),n("span",{staticClass:"text"},[t._v(t._s(e.corp_name))])])])],1)]:t._e(),"scene"==t.routeName||"template"==t.routeName?[n("a-radio-group",{on:{change:function(a){return t.changeWx2(e.corpid,e.corp_name)}},model:{value:t.changeBackground,callback:function(e){t.changeBackground=e},expression:"changeBackground"}},[n("a-radio-button",{attrs:{value:e.corpid}},[n("div",[n("a-avatar",{attrs:{src:e.head_img,shape:"square"}}),n("span",{staticClass:"text"},[t._v(t._s(e.corp_name))])],1)])],1)]:t._e()]}))],2)],1)])],1)},i=[],o=(a("7f7f"),a("28a5"),a("96cf"),a("3b8d")),s=(a("7514"),a("bc3a")),r=a.n(s),c=a("f64c"),l={name:"wxModal",props:{show:{type:Boolean,default:!1},callback:{type:Function,default:null},hasName:{type:String,default:""},type:{type:String,default:""},corpId1:{type:String,default:""},wxId:{type:String,default:""}},data:function(){var t=localStorage.getItem("corpId")?localStorage.getItem("corpId"):"";return{showModal:!1,corpInfo:[],changeBackground:t,corpId:t,corpName:this.$store.state.corpName,routeName:""}},methods:{handleOk:function(){var t=this;if(2==localStorage.getItem("isMasterAccount"))this.getPermissionButton();else{this.showModal=!1;var e=this.corpInfo.find((function(e){return e.corpid==t.corpId}));this.$store.dispatch("changeCorp",e),null!==this.callback&&"function"===typeof this.callback&&this.callback("ok",this.corpId,e.corp_name)}},handleCancel:function(t){null!==this.callback&&"function"===typeof this.callback&&this.callback("cancel"),this.showModal=!1},changeWx:function(t){this.corpId=t},changeWx2:function(t,e){this.corpId=t,this.corpName=e},getPermissionButton:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(){var e,a,n,i,o,s,l,d,p=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,r.a.post("sub-user/get-sub-user-authority",{isMasterAccount:localStorage.getItem("isMasterAccount"),sub_id:localStorage.getItem("sub_id"),account_id:this.corpId,type:""!=this.type?this.type:localStorage.getItem("type"),corp_id:2==this.type?this.corpId:"",wx_id:2==this.type?this.wxId:""});case 2:if(e=t.sent,a=e.data,0!=a.error){t.next=34;break}if(!(a.data.length>0)){t.next=31;break}if(""==this.hasName){t.next=25;break}if(n=this.hasName.split(","),!(n.length>0)){t.next=22;break}i=!0,o=0;case 11:if(!(o<n.length)){t.next=19;break}if(-1!=a.data.indexOf(n[o])){t.next=16;break}return c["a"].error("该企业微信未配置相关功能权限，无法选择"),i=!1,t.abrupt("return",!1);case 16:o++,t.next=11;break;case 19:i&&(this.showModal=!1,s=this.corpInfo.find((function(t){return t.corpid==p.corpId})),this.$store.dispatch("changeCorp",s),null!==this.callback&&"function"===typeof this.callback&&this.callback("ok",this.corpId,s.corp_name)),t.next=23;break;case 22:-1==a.data.indexOf(this.hasName)?c["a"].error("该企业微信未配置相关功能权限，无法选择"):(this.showModal=!1,l=this.corpInfo.find((function(t){return t.corpid==p.corpId})),this.$store.dispatch("changeCorp",l),null!==this.callback&&"function"===typeof this.callback&&this.callback("ok",this.corpId,l.corp_name));case 23:t.next=29;break;case 25:this.showModal=!1,d=this.corpInfo.find((function(t){return t.corpid==p.corpId})),this.$store.dispatch("changeCorp",d),null!==this.callback&&"function"===typeof this.callback&&this.callback("ok",this.corpId,d.corp_name);case 29:t.next=32;break;case 31:c["a"].error("无权限");case 32:t.next=35;break;case 34:c["a"].error("获取权限按钮列表失败！");case 35:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},watch:{show:function(t){var e=this;this.showModal=t,this.changeBackground=localStorage.getItem("corpId"),this.$store.dispatch("getCorp",(function(t){e.corpInfo=t,e.corpId=e.$store.state.corpId,!e.changeBackground&&e.corpInfo.length>0&&(e.changeBackground=e.$store.state.corpId,e.corpId=e.$store.state.corpId,e.corpName=e.$store.state.corpName)})),this.routeName=this.$route.name}},created:function(){}},d=l,p=(a("ffd5"),a("2877")),h=Object(p["a"])(d,n,i,!1,null,"440e9184",null);e["a"]=h.exports},3846:function(t,e,a){a("9e1e")&&"g"!=/./g.flags&&a("86cc").f(RegExp.prototype,"flags",{configurable:!0,get:a("0bfb")})},"56b6":function(t,e,a){"use strict";var n=a("b0fe"),i=a.n(n);i.a},"59fe":function(t,e,a){var n=a("b6ee");"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var i=a("499e").default;i("2af37125",n,!0,{sourceMap:!1,shadowMode:!1})},"6b54":function(t,e,a){"use strict";a("3846");var n=a("cb7c"),i=a("0bfb"),o=a("9e1e"),s="toString",r=/./[s],c=function(t){a("2aba")(RegExp.prototype,s,t,!0)};a("79e5")((function(){return"/a/b"!=r.call({source:"a",flags:"b"})}))?c((function(){var t=n(this);return"/".concat(t.source,"/","flags"in t?t.flags:!o&&t instanceof RegExp?i.call(t):void 0)})):r.name!=s&&c((function(){return r.call(this)}))},"709e":function(t,e,a){"use strict";var n=a("c3e9"),i=a.n(n);i.a},"8ba3":function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("a-modal",{attrs:{title:"关联应用",width:"600px"},on:{ok:t.addAgentOk,cancel:t.addAgentCancel},model:{value:t.showAddAgentModal,callback:function(e){t.showAddAgentModal=e},expression:"showAddAgentModal"}},[a("div",{staticClass:"content-msg",staticStyle:{"margin-top":"0","margin-bottom":"15px"}},[a("p",{staticStyle:{"margin-bottom":"5px"}},[t._v("\n\t\t\t\t请登录企业微信官方后台，在应用管理-应用-自建应用，找到您已建好应用的AgentId和Secret，并复制到下面的输入框。提交后将该应用添加到本系统里。\n\t\t\t")]),a("p",{staticStyle:{height:"20px","line-height":"20px","margin-bottom":"2px"}},[t._v("1、前往"),a("a",{attrs:{target:"_blank",href:"https://work.weixin.qq.com/wework_admin/loginpage_wx?from=myhome_baidu"}},[t._v("\n\t\t\t\t企业微信后台")]),t._v("创建自建应用。"),a("a",{attrs:{target:"_blank",href:"https://support.qq.com/products/312071/faqs/90047"}},[t._v("\n\t\t\t\t教程")])]),a("p",{staticStyle:{"line-height":"20px",height:"20px","margin-bottom":"0px"}},[t._v("\n\t\t\t\t2、选择此应用，请确认已设置过应用的可信域名。\n\t\t\t\t"),a("a",{staticClass:"el-link el-link--primary",attrs:{href:t.$store.state.commonUrl+"/upload/slider.png",target:"_blank"}},[a("span",{staticClass:"el-link--inner"},[t._v("查看图示")])])])]),t.agentList.length>0?a("a-form-item",{attrs:{"label-col":{span:4},"wrapper-col":{span:18}}},[a("template",{slot:"label"},[t._v("选择应用\n\t\t\t")]),a("a-radio-group",{model:{value:t.agentType,callback:function(e){t.agentType=e},expression:"agentType"}},[a("a-radio",{attrs:{value:1}},[t._v("选择已有")]),a("a-radio",{attrs:{value:2}},[t._v("新建应用")])],1)],2):t._e(),1==t.agentType?[a("a-select",{staticStyle:{width:"200px","margin-left":"90px"},attrs:{showSearch:"",optionFilterProp:"children"},model:{value:t.agent_id,callback:function(e){t.agent_id=e},expression:"agent_id"}},[t._l(t.agentList,(function(e){return[a("a-select-option",{attrs:{value:e.id}},[t._v(t._s(e.name)+"\n\t\t\t\t\t")])]}))],2)]:t._e(),2==t.agentType?[a("a-form-item",{attrs:{"label-col":{span:4},"wrapper-col":{span:18}}},[a("template",{slot:"label"},[a("span",{staticStyle:{color:"red"}},[t._v(" * ")]),t._v("应用Id\n\t\t\t\t")]),a("a-input",{attrs:{placeholder:"请输入自建应用的AgentId"},model:{value:t.addAgentId,callback:function(e){t.addAgentId=e},expression:"addAgentId"}})],2),a("a-form-item",{attrs:{"label-col":{span:4},"wrapper-col":{span:18}}},[a("template",{slot:"label"},[a("span",{staticStyle:{color:"red"}},[t._v(" * ")]),t._v("应用Secret\n\t\t\t\t")]),a("a-input",{attrs:{placeholder:"请输入自建应用的Secret"},model:{value:t.addAgentSecret,callback:function(e){t.addAgentSecret=e},expression:"addAgentSecret"}})],2)]:t._e()],2)],1)},i=[],o=(a("96cf"),a("3b8d")),s=(a("c5f6"),{props:{showAddAgent:{type:Boolean,default:!1},agent_is_money:{type:Number,default:1},corpId:{type:String,default:localStorage.getItem("corpId")}},name:"index",data:function(){return{addAgentId:"",addAgentSecret:"",agentList:[],agent_id:"",suite_id:1,agentType:1,showAddAgentModal:!1}},mounted:function(){this.showAddAgentModal=this.showAddAgent},methods:{getAgentList:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(){var e,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.axios.post("work-group-sending/agent-list",{corp_id:this.corpId,suite_id:this.suite_id,agent_type:2});case 2:e=t.sent,a=e.data,0!=a.error?(this.isLoading=!1,this.$message.error(a.error_msg)):a.data&&a.data.length>0?(this.agentList=a.data,this.agent_id=this.agentList[0].id,this.agentType=1):this.agentType=2;case 5:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),addAgentOk:function(){if(1==this.agentType)this.linkAgent();else if(2==this.agentType){if(""==this.addAgentId)return this.$message.error("请输入应用Id！"),!1;if(""==this.addAgentSecret)return this.$message.error("请输入应用Secret！"),!1;this.addAgent()}},linkAgent:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(){var e,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.axios.post("work-agent/update-agent-use",{corp_id:this.corpId,agent_id:this.agent_id,agent_is_money:this.agent_is_money});case 2:e=t.sent,a=e.data,0!=a.error?this.$message.error("关联失败，请检查是否正确！"):(this.$message.success("关联成功！"),this.$emit("linkOk"));case 5:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),addAgent:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(){var e,a,n,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.axios.post("work-agent/add",{corp_id:this.corpId,agent_id:this.addAgentId,agent_secret:this.addAgentSecret,agent_is_money:this.agent_is_money});case 2:if(e=t.sent,a=e.data,0==a.error){t.next=8;break}this.$message.error("添加失败，请检查是否正确！"),t.next=13;break;case 8:return t.next=10,this.axios.post("work-agent/get",{corp_id:this.corpId,agent_id:a.data.agent_id});case 10:n=t.sent,i=n.data,0!=i.error?this.$message.error("添加失败，请检查是否正确！错误描述："+i.error_msg):(this.addAgentId="",this.addAgentSecret="",this.$message.success("添加成功！"),this.$emit("addOk"));case 13:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),addAgentCancel:function(){this.addAgentId="",this.addAgentSecret="",this.$emit("addCancel")}},watch:{showAddAgent:{handler:function(t){this.showAddAgentModal=t,this.getAgentList()},deep:!0}}}),r=s,c=a("2877"),l=Object(c["a"])(r,n,i,!1,null,"775cf187",null);e["a"]=l.exports},b0fe:function(t,e,a){var n=a("fe92");"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var i=a("499e").default;i("1ee44db8",n,!0,{sourceMap:!1,shadowMode:!1})},b504:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"list"},[n("div",{attrs:{id:"components-layout-demo-basic"}},[n("a-layout",{staticStyle:{position:"relative"}},[t.isEWechat?n("a-layout-sider",[n("eWechat",{on:{changeWxId:t.handleWxId}})],1):t._e(),n("a-layout",{staticClass:"scroll",staticStyle:{position:"absolute",top:"0",bottom:"0",right:"0"},style:{left:t.isEWechat?"250px":"0px"}},[n("a-layout-header",[t._v("红包管理")]),n("a-layout-content",[n("div",{staticClass:"content-msg"},[n("p",{staticStyle:{"margin-bottom":"2px"}},[t._v("\n\t\t\t\t\t\t\t向客户/客户群派发红包，是维护客情关系的利器之一。其不仅能够刺激消费 , 拉近客户感情 , 还能增强互动\n\t\t\t\t\t\t\t,维护品牌的忠诚度。鉴于此，我们基于企业微信，通过企业微信聊天侧边栏，快速向客户/客户群派发红包，客户领取后，钱直接进入到客户的微信零钱里。\n\t\t\t\t\t\t")]),n("p",{staticStyle:{"margin-bottom":"2px",color:"#FF562D"}},[t._v("\n\t\t\t\t\t\t\t若红包已发送到客户/客户群里，但客户尚未领取，此时微信支付商户平台出现账户余额不足时，客户打开红包页面无法领取，请务必保证账户余额充足，避免客户投诉。\n\t\t\t\t\t\t")]),n("p",{staticStyle:{"margin-bottom":"2px",color:"#FF562D"}},[t._v("\n\t\t\t\t\t\t\t在使用派发红包功能前，需要商户完成以下配置：\n\t\t\t\t\t\t")]),n("p",{staticStyle:{"margin-bottom":"2px"}},[t._v("\n\t\t\t\t\t\t\t1、前往"),n("a",{attrs:{href:"https://pay.weixin.qq.com/index.php/core/home/login?return_url=%2F",target:"_blank"}},[t._v("【微信支付商户平台】")]),t._v("注册微信支付商户号\n\t\t\t\t\t\t")]),n("p",{staticStyle:{"margin-bottom":"2px"}},[t._v("\n\t\t\t\t\t\t\t2、登录"),n("a",{attrs:{href:"https://work.weixin.qq.com/wework_admin/loginpage_wx?from=myhome_baidu",target:"_blank"}},[t._v("【企业微信后台】")]),t._v("开通企业支付，绑定已有商户号（"),n("a",{attrs:{href:"https://support.qq.com/products/312071/faqs/90055",target:"_blank"}},[t._v("查看教程")]),t._v("）\n\t\t\t\t\t\t")]),n("p",{staticStyle:{"margin-bottom":"2px"}},[t._v("\n\t\t\t\t\t\t\t3、登录"),n("a",{attrs:{href:"https://pay.weixin.qq.com/index.php/core/home/login?return_url=%2F",target:"_blank"}},[t._v("【微信支付商户平台】")]),t._v("开通【企业付款到零钱】（"),n("a",{attrs:{href:"https://support.qq.com/products/312071/faqs/90056",target:"_blank"}},[t._v("查看教程")]),t._v("）\n\t\t\t\t\t\t")]),n("p",{staticStyle:{"margin-bottom":"2px"}},[t._v("\n\t\t\t\t\t\t\t4、在本系统，进入【自建应用】--【企业支付】，点击，填入企业支付的应用ID和Secret\n\t\t\t\t\t\t")]),n("p",{staticStyle:{"margin-bottom":"2px"}},[t._v("\n\t\t\t\t\t\t\t5、在本系统，进入【自建应用】--【企业支付】，点击，完成支付配置。（"),n("a",{attrs:{href:"https://support.qq.com/products/312071/faqs/90054",target:"_blank"}},[t._v("查看教程")]),t._v("）\n\t\t\t\t\t\t")])]),n("div",{staticClass:"content-hd"},[n("a-select",{staticStyle:{width:"120px"},attrs:{placeholder:"使用状态"},on:{change:t.selectStatus},model:{value:t.status,callback:function(e){t.status=e},expression:"status"}},[n("a-select-option",{attrs:{value:"0"}},[t._v("全部状态")]),n("a-select-option",{attrs:{value:"1"}},[t._v("启用")]),n("a-select-option",{attrs:{value:"2"}},[t._v("禁用")])],1),n("a-col",{staticStyle:{float:"right"}},[n("a-button",{directives:[{name:"has",rawName:"v-has",value:"redPack-add-money",expression:"'redPack-add-money'"}],staticStyle:{margin:"0 10px"},attrs:{icon:"plus",type:"primary"},on:{click:function(e){return t.addFixedAmount(1)}}},[t._v("\n\t\t\t\t\t\t\t\t添加固定金额\n\t\t\t\t\t\t\t")]),n("a-button",{directives:[{name:"has",rawName:"v-has",value:"redPacket-limit",expression:"'redPacket-limit'"}],on:{click:function(e){return t.openSetFixedAmount(2)}}},[t._v("\n\t\t\t\t\t\t\t\t客户限额\n\t\t\t\t\t\t\t")]),n("a-modal",{staticStyle:{height:"500px"},attrs:{title:"更换自建应用",confirmLoading:t.confirmLoading},on:{ok:t.changeAppOk,cancel:t.changeAppCancel},model:{value:t.changeAppVisible,callback:function(e){t.changeAppVisible=e},expression:"changeAppVisible"}},[n("a-form-model",{ref:"ruleForm",attrs:{model:t.changeAppForm,rules:t.rules,"label-col":{span:6},"wrapper-col":{span:18}}},[n("a-form-model-item",{attrs:{label:"选择企业微信",prop:"corpId"}},[n("div",{staticStyle:{display:"inline-block",cursor:"pointer"},on:{click:t.changeCorp}},[n("img",{staticStyle:{width:"24px",margin:"-3px 6px 0 0"},attrs:{src:a("ed13")}}),n("span",[t._v(t._s(t.changeAppForm.corpName))]),n("a-icon",{staticStyle:{width:"50px",height:"40px","text-align":"left","line-height":"40px","margin-left":"20px"},attrs:{type:"caret-down"}})],1)]),n("a-form-model-item",{attrs:{label:"选择应用",prop:"app"}},[n("a-select",{attrs:{showSearch:"",optionFilterProp:"children"},model:{value:t.changeAppForm.agent_id,callback:function(e){t.$set(t.changeAppForm,"agent_id",e)},expression:"changeAppForm.agent_id"}},[t._l(t.agentList,(function(e,a){return[n("a-select-option",{attrs:{value:e.id}},[t._v("\n\t\t\t\t\t\t\t\t\t\t\t\t\t"+t._s(e.name)+"\n\t\t\t\t\t\t\t\t\t\t\t\t")])]}))],2)],1)],1),n("linkAgent",{attrs:{corpId:t.corpId,showAddAgent:t.showAddAgentModal,agent_is_money:1},on:{addOk:t.addOk,linkOk:t.linkOk,addCancel:t.addCancel}})],1),n("a-modal",{staticStyle:{height:"500px"},attrs:{title:"添加固定金额",confirmLoading:t.confirmLoading},on:{ok:t.handleOk,cancel:t.cancel},model:{value:t.addFixedAmountVisible,callback:function(e){t.addFixedAmountVisible=e},expression:"addFixedAmountVisible"}},[n("a-form-item",{attrs:{"label-col":{span:6},"wrapper-col":{span:18}}},[n("template",{slot:"label"},[n("span",{staticStyle:{color:"red"}},[t._v("*")]),t._v("红包金额\n\t\t\t\t\t\t\t\t\t")]),n("a-input-number",{staticStyle:{width:"250px"},attrs:{step:0,precision:2,placeholder:"请输入金额"},model:{value:t.money,callback:function(e){t.money=e},expression:"money"}}),n("p",{staticStyle:{"font-size":"13px",color:"#909399","margin-bottom":"0"}},[t._v("\n\t\t\t\t\t\t\t\t\t\t精确到小数点后两位，可输入0.30~5000.00")])],2),n("a-form-item",{attrs:{"label-col":{span:6},"wrapper-col":{span:18}}},[n("template",{slot:"label"},[t._v("\n\t\t\t\t\t\t\t\t\t\t红包状态\n\t\t\t\t\t\t\t\t\t")]),n("a-select",{staticStyle:{width:"160px"},attrs:{placeholder:"使用状态"},model:{value:t.addStatus,callback:function(e){t.addStatus=e},expression:"addStatus"}},[n("a-select-option",{attrs:{value:"1"}},[t._v("启用")]),n("a-select-option",{attrs:{value:"2"}},[t._v("禁用")])],1)],2)],1),n("a-modal",{staticStyle:{height:"500px"},attrs:{title:"客户限额设置",confirmLoading:t.setConfirmLoading,width:"675px"},on:{ok:t.setHandleOk,cancel:t.setCancel},model:{value:t.setVisible,callback:function(e){t.setVisible=e},expression:"setVisible"}},[n("div",{staticClass:"content-msg",staticStyle:{margin:"0 0 12px"}},[t._v("\n\t\t\t\t\t\t\t\t\t温馨提示：若在本系统所填写的数值超过在【微信支付商户平台】配置的数值，执行规则依然以官方配置为准，请合理填写。建议您先在【微信支付商户平台】---【产品中心】-【企业付款到零钱】--【产品设置】，将所有数值设置到官方最大值（如下），再到本系统里进行配置。\n\t\t\t\t\t\t\t\t\t"),n("p",{staticStyle:{"margin-bottom":"2px"}},[t._v("a、商户号单日出款额度：10万")]),n("p",{staticStyle:{"margin-bottom":"2px"}},[t._v("b、单人单日付款额度：5000元")]),n("p",{staticStyle:{"margin-bottom":"2px"}},[t._v("c、单笔付款最低额度：0.30元， 默认每天最多可向同一个用户付款10次")])]),n("div",{staticClass:"model-label"},[n("div",{staticClass:"model-label-left"},[n("span",{staticStyle:{color:"red"}},[t._v("*")]),t._v("商户号单日付款总额度：\n\t\t\t\t\t\t\t\t\t")]),n("div",{staticClass:"model-label-right"},[n("a-input-number",{staticStyle:{width:"300px","margin-right":"5px"},attrs:{step:0,precision:2,placeholder:"请输入商户号单日付款总额度"},model:{value:t.singleDayTotalAmount,callback:function(e){t.singleDayTotalAmount=e},expression:"singleDayTotalAmount"}}),t._v("\n\t\t\t\t\t\t\t\t\t\t元\n\t\t\t\t\t\t\t\t\t\t"),n("p",{staticClass:"model-label-right-p"},[t._v("\n\t\t\t\t\t\t\t\t\t\t\t精确到小数点后两位，可输入0.30~100000.00")])],1)]),n("div",{staticClass:"model-label"},[n("div",{staticClass:"model-label-left"},[n("span",{staticStyle:{color:"red"}},[t._v("*")]),t._v("单日客户收到红包次数：\n\t\t\t\t\t\t\t\t\t")]),n("div",{staticClass:"model-label-right"},[n("a-input-number",{staticStyle:{width:"300px","margin-right":"5px"},attrs:{step:0,precision:0,placeholder:"请输入单日客户收到红包次数"},model:{value:t.changeTimes,callback:function(e){t.changeTimes=e},expression:"changeTimes"}}),t._v("\n\t\t\t\t\t\t\t\t\t\t次\n\t\t\t\t\t\t\t\t\t\t"),n("p",{staticClass:"model-label-right-p"},[t._v("\n\t\t\t\t\t\t\t\t\t\t\t可输入1~10正整数")])],1)]),n("div",{staticClass:"model-label"},[n("div",{staticClass:"model-label-left"},[n("span",{staticStyle:{color:"red"}},[t._v("*")]),t._v("单日客户收到红包金额：\n\t\t\t\t\t\t\t\t\t")]),n("div",{staticClass:"model-label-right"},[n("a-input-number",{staticStyle:{width:"300px","margin-right":"5px"},attrs:{step:0,precision:2,placeholder:"请输入单日客户收到红包金额"},model:{value:t.changeQuota,callback:function(e){t.changeQuota=e},expression:"changeQuota"}}),t._v("\n\t\t\t\t\t\t\t\t\t\t元\n\t\t\t\t\t\t\t\t\t\t"),n("p",{staticClass:"model-label-right-p"},[t._v("\n\t\t\t\t\t\t\t\t\t\t\t精确到小数点后两位，可输入0.30~5000.00")])],1)])]),n("linkAgent",{attrs:{corpId:t.corpId,showAddAgent:t.showAddAgentModal,agent_is_money:1},on:{addOk:t.addOk,linkOk:t.linkOk,addCancel:t.addCancel}})],1)],1),n("div",{staticClass:"content-bd"},[n("a-spin",{attrs:{tip:"Loading...",size:"large",spinning:t.isLoading}},[n("a-table",{directives:[{name:"has",rawName:"v-has",value:"redPacket-list",expression:"'redPacket-list'"}],attrs:{columns:t.columns,dataSource:t.redManageList,pagination:!1,rowClassName:t.rowClassName},scopedSlots:t._u([{key:"money",fn:function(e,a,i){return n("div",{},[t._v("\n\t\t\t\t\t\t\t\t\t"+t._s(a.money)+"元\n\t\t\t\t\t\t\t\t")])}},{key:"send_num",fn:function(e,a,i){return n("div",{},[t._v("\n\t\t\t\t\t\t\t\t\t"+t._s(a.send_num)+"次\n\t\t\t\t\t\t\t\t")])}},{key:"send_money",fn:function(e,a,i){return n("div",{},[t._v("\n\t\t\t\t\t\t\t\t\t"+t._s((a.money*a.send_num).toFixed(2))+"元\n\t\t\t\t\t\t\t\t")])}},{key:"status",fn:function(e,a,i){return n("div",{},[1==a.status?n("span",[t._v("启用")]):t._e(),2==a.status?n("span",[t._v("禁用")]):t._e()])}},{key:"action",fn:function(e,a,i){return n("div",{},[1==a.status?n("a-button",{directives:[{name:"has",rawName:"v-has",value:"redPack-active",expression:"'redPack-active'"}],staticStyle:{margin:"0px 5px 5px 0px"},on:{click:function(e){return t.changeStatus(a.money_id,2)}}},[t._v("\n\t\t\t\t\t\t\t\t\t\t禁用\n\t\t\t\t\t\t\t\t\t")]):t._e(),2==a.status?n("a-button",{directives:[{name:"has",rawName:"v-has",value:"redPack-active",expression:"'redPack-active'"}],staticStyle:{margin:"0px 5px 5px 0px"},on:{click:function(e){return t.changeStatus(a.money_id,1)}}},[t._v("\n\t\t\t\t\t\t\t\t\t\t启用\n\t\t\t\t\t\t\t\t\t")]):t._e(),n("a-button",{directives:[{name:"has",rawName:"v-has",value:"redPack-del",expression:"'redPack-del'"}],staticStyle:{margin:"0px 5px 5px 0px"},on:{click:function(e){return t.changeStatus(a.money_id,3)}}},[t._v("\n\t\t\t\t\t\t\t\t\t\t删除\n\t\t\t\t\t\t\t\t\t")])],1)}}])}),n("div",{directives:[{name:"show",rawName:"v-show",value:t.total>0,expression:"total > 0"},{name:"has",rawName:"v-has",value:"redPacket-list",expression:"'redPacket-list'"}],staticClass:"pagination",staticStyle:{width:"100%",position:"absolute",margin:"20px 0px"}},[n("div",{staticStyle:{height:"32px",float:"left","line-height":"32px"}},[t._v("\n\t\t\t\t\t\t\t\t\t共\n\t\t\t\t\t\t\t\t\t"),n("span",{staticStyle:{color:"blue"}},[t._v(t._s(t.total))]),t._v("条\n\t\t\t\t\t\t\t\t")]),n("div",{staticClass:"pagination",staticStyle:{height:"32px",float:"right"}},[n("a-pagination",{attrs:{total:t.total,showSizeChanger:"",showQuickJumper:t.quickJumper,current:t.page,pageSize:t.pageSize,pageSizeOptions:["15","30","50","100"]},on:{change:t.changePage,showSizeChange:t.showSizeChange}})],1)])],1)],1)])],1)],1)],1),n("WeChatModal",{attrs:{show:t.showCoropation,callback:t.coropationChange,hasName:"group-sending-add"}})],1)},i=[],o=(a("6b54"),a("96cf"),a("3b8d")),s=a("d77d"),r=a("8ba3"),c=a("0094"),l=[{title:"零钱金额",dataIndex:"money",key:"money",scopedSlots:{customRender:"money"}},{title:"发送次数",dataIndex:"send_num",key:"send_num",scopedSlots:{customRender:"send_num"}},{title:"发送金额",dataIndex:"send_money",key:"send_money",scopedSlots:{customRender:"send_money"}},{title:"创建人",dataIndex:"user_name",key:"user_name",width:"15%"},{title:"使用状态",dataIndex:"status",key:"status",scopedSlots:{customRender:"status"}},{title:"操作",dataIndex:"action",key:"action",scopedSlots:{customRender:"action"}}],d={components:{eWechat:s["a"],linkAgent:r["a"],WeChatModal:c["a"]},data:function(){var t=localStorage.getItem("corpId")?localStorage.getItem("corpId"):"";return{agent_id:"",agentList:[],isEWechat:!0,corpId:t,isLoading:!0,status:"0",redManageList:[],haveAgent:0,columns:l,total:1,quickJumper:!1,page:1,pageSize:15,deleteList:[],addFixedAmountVisible:!1,confirmLoading:!1,changeAppVisible:!1,changeAppForm:{agent_id:""},money:"",addStatus:"1",setVisible:!1,setConfirmLoading:!1,singleDayTotalAmount:"",changeTimes:"",changeQuota:"",showAddAgentModal:!1,addType:"",suite_id:1,showCoropation:!1,rules:{corpId:[{required:!0,message:"请选择企业",trigger:"blur"}],agent_id:[{required:!0,message:"请选择应用",trigger:"blur"}]}}},methods:{getAgentList:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(){var e,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.axios.post("work-group-sending/agent-list",{corp_id:localStorage.getItem("corpId")});case 2:e=t.sent,a=e.data,0!=a.error?this.$message.error(a.error_msg):this.agentList=a.data;case 5:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),addOk:function(){this.showAddAgentModal=!1,this.getRedManageList(),1==this.addType?this.addFixedAmountVisible=!0:2==this.addType&&(this.setVisible=!0)},linkOk:function(){this.showAddAgentModal=!1,this.getRedManageList(),1==this.addType?this.addFixedAmountVisible=!0:2==this.addType&&this.setFixedAmount()},addCancel:function(){this.showAddAgentModal=!1},handleWxId:function(t){this.isLoading=!0,this.corpId=t,this.getRedManageList()},rowClassName:function(t,e){var a="dark-row";return e%2===0&&(a="light-row"),a},selectStatus:function(){this.getRedManageList()},addFixedAmount:function(t){this.addType=t,0==this.haveAgent?this.showAddAgentModal=!0:this.addFixedAmountVisible=!0},changeAppOk:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(){var e,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.changeAppForm.agent_is_money=1,t.next=3,this.axios.post("work-agent/update-agent-use",this.changeAppForm);case 3:e=t.sent,a=e.data,0!=a.error?this.$message.error(a.error_msg):(this.changeAppVisible=!1,this.$message.success("提交成功"),this.getRedManageList());case 6:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),changeAppCancel:function(){this.changeAppForm.agent_id=this.agent_id},changeCorp:function(){this.showCoropation=!0},handleOk:function(){return""==this.money||null==this.money?(this.$message.error("请填写金额"),!1):this.money<.3||this.money>5e3?(this.$message.error("红包金额必须在0.30~5000.00之间"),!1):void this.add()},add:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(){var e,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.confirmLoading=!0,t.next=3,this.axios.post("send-money-manage/money-set-post",{uid:localStorage.getItem("uid"),corp_id:this.corpId,isMasterAccount:localStorage.getItem("isMasterAccount"),sub_id:localStorage.getItem("sub_id"),money:this.money,status:this.addStatus});case 3:e=t.sent,a=e.data,0!=a.error?(this.confirmLoading=!1,this.$message.error(a.error_msg)):(this.confirmLoading=!1,this.addFixedAmountVisible=!1,this.money="",this.addStatus="1",this.getRedManageList());case 6:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),cancel:function(){this.money="",this.addStatus="1",this.addFixedAmountVisible=!1},openChangeApp:function(){0==this.haveAgent?this.showAddAgentModal=!0:(this.changeAppForm.agent_id=this.agent_id,this.changeAppVisible=!0,this.changeAppForm.corp_id=localStorage.getItem("corpId"),this.changeAppForm.corpName=localStorage.getItem("corpName"),this.getAgentList())},coropationChange:function(t,e,a){"ok"==t?(this.changeAppForm.corp_id=e,this.changeAppForm.corpName=a,this.rules.corpId=[],this.getAgentList()):this.rules.corpId=[{required:!0,message:"请选择企业",trigger:"blur"}],this.showCoropation=!1},openSetFixedAmount:function(){0==this.haveAgent?this.showAddAgentModal=!0:this.setFixedAmount()},setFixedAmount:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(){var e,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.axios.post("send-money-manage/money-send-limit",{uid:localStorage.getItem("uid"),corp_id:this.corpId});case 2:e=t.sent,a=e.data,0!=a.error?this.$message.error(a.error_msg):(this.singleDayTotalAmount=a.data.money.day_sum_money,this.changeTimes=a.data.money.day_external_num,this.changeQuota=a.data.money.day_external_money,this.setVisible=!0);case 5:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),setHandleOk:function(){return""===this.singleDayTotalAmount||null==this.singleDayTotalAmount?(this.$message.error("请输入商户号单日付款总额度"),!1):this.singleDayTotalAmount<.3||this.singleDayTotalAmount>1e5?(this.$message.error("商户号单日付款总额度必须在0.30~100000.00之间"),!1):""===this.changeTimes||null==this.changeTimes?(this.$message.error("请输入单日向每个客户付款到零钱次数上限"),!1):this.changeTimes<1||this.changeTimes>10?(this.$message.error("单日向每个客户付款到零钱次数上限必须为1~10正整数"),!1):""===this.changeQuota||null==this.changeQuota?(this.$message.error("请输入单日每个客户收到零钱额度上限"),!1):this.changeQuota<.3||this.changeQuota>5e3?(this.$message.error("单日每个客户收到零钱额度上限必须在0.30~5000.00之间"),!1):void this.set()},set:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(){var e,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.setConfirmLoading=!0,t.next=3,this.axios.post("send-money-manage/money-send-limit-set",{uid:localStorage.getItem("uid"),corp_id:this.corpId,day_sum_money:this.singleDayTotalAmount,day_external_num:this.changeTimes,day_external_money:this.changeQuota});case 3:e=t.sent,a=e.data,0!=a.error?(this.setConfirmLoading=!1,this.$message.error(a.error_msg)):(this.setConfirmLoading=!1,this.setVisible=!1,this.getRedManageList());case 6:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),setCancel:function(){this.setVisible=!1},getRedManageList:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(){var e,a,n,i,o=arguments;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=o.length>0&&void 0!==o[0]?o[0]:1,a=o.length>1&&void 0!==o[1]?o[1]:this.pageSize,this.isLoading=!0,t.next=5,this.axios.post("send-money-manage/money-set-list",{uid:localStorage.getItem("uid"),corp_id:this.corpId,status:this.status,page:e,page_size:a});case 5:n=t.sent,i=n.data,0!=i.error?(this.isLoading=!1,this.$message.error(i.error_msg)):(this.agent_id=i.data.agentId.toString(),this.redManageList=i.data.money,this.haveAgent=i.data.have_agent,this.isLoading=!1,this.total=parseInt(i.data.count),this.page=e,this.pageSize=a,this.quickJumper=this.total>this.pageSize);case 8:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),changePage:function(t,e){this.getRedManageList(t,e),this.$nextTick((function(){document.getElementsByClassName("scroll")[0].scrollTo(0,200)}))},showSizeChange:function(t,e){this.getRedManageList(1,e)},changeStatus:function(t,e){var a=this,n="确定删除选中的标签？";1==e?n="一旦启用后，可以选择该零钱金额发送给客户，确定启用吗？":2==e?n="一旦禁用后，该零钱金额无法发送给客户，确定禁用吗？":3==e&&(n="一旦删除后，该零钱金额不存在，确定删除吗？"),a.$confirm({title:n,okText:"确定",okType:"primary",cancelText:"取消",onOk:function(){a.changeStatusOk(t,e)}})},changeStatusOk:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(e,a){var n,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.axios.post("send-money-manage/money-set-status",{money_id:e,status:a});case 2:n=t.sent,i=n.data,0!=i.error?this.$message.error(i.error_msg):1==this.redManageList.length&&this.page>1?this.getRedManageList(this.page-1,this.pageSize):this.getRedManageList(this.page,this.pageSize);case 5:case"end":return t.stop()}}),t,this)})));function e(e,a){return t.apply(this,arguments)}return e}()},created:function(){1==JSON.parse(localStorage.getItem("corpArr")).length?this.isEWechat=!1:JSON.parse(localStorage.getItem("corpArr")).length>1&&(this.isEWechat=!0),this.getRedManageList(),this.getAgentList()}},p=d,h=(a("709e"),a("2877")),u=Object(h["a"])(p,n,i,!1,null,"00f01075",null);e["default"]=u.exports},b6ee:function(t,e,a){e=t.exports=a("2350")(!1),e.push([t.i,"[data-v-440e9184] .ant-radio-button-wrapper{width:200px;height:55px;line-height:47px;padding:0 10px;margin:10px 5px}[data-v-440e9184] .wxtpl .ant-radio-button-wrapper-checked{border:2px solid #1890ff!important}.text[data-v-440e9184]{margin-left:5px;vertical-align:middle;display:inline-block;width:calc(100% - 37px);overflow:hidden;text-overflow:ellipsis;white-space:nowrap}",""])},c3e9:function(t,e,a){var n=a("e5e8");"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var i=a("499e").default;i("0e56bc82",n,!0,{sourceMap:!1,shadowMode:!1})},d77d:function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"sider-one"},[n("div",{staticClass:"sider-one-txt"},[t._v("选择企业微信")]),t.corpInfo[0]?n("a-select",{staticStyle:{width:"200px","margin-bottom":"20px"},attrs:{showSearch:"",optionFilterProp:"children"},on:{change:t.handleChange},model:{value:t.changeBackground,callback:function(e){t.changeBackground=e},expression:"changeBackground"}},[t._l(t.corpInfo,(function(e){return[n("a-select-option",{attrs:{value:e.corpid}},[t._v(t._s(e.corp_name))])]}))],2):t._e(),n("div",{ref:"corpInfo",staticClass:"wx-info",staticStyle:{position:"absolute"},on:{mousemove:t.corpInfoMouseOver,mouseout:t.corpInfoMouseOut}},[t._l(t.corpInfo,(function(e,i){return[n("div",{staticClass:"selectWx",class:{active:t.changeBackground==e.corpid},on:{click:function(a){return t.selectWx(e.corpid)}}},[n("img",{staticStyle:{width:"32px","border-radius":"4px"},attrs:{src:a("de05"),alt:""}}),n("span",{staticStyle:{"text-overflow":"ellipsis","white-space":"nowrap",overflow:"hidden",float:"right",width:"calc(100% - 35px)"}},[t._v(t._s(e.corp_name))])])]}))],2)],1)},i=[],o={name:"eWechat",props:{callback:{type:Function,default:null}},data:function(){var t=localStorage.getItem("corpId")?localStorage.getItem("corpId"):"";return{corpInfo:[],changeBackground:t}},created:function(){var t=this;this.$store.dispatch("getCorp",(function(e){t.corpInfo=e,null!==t.callback&&"function"===typeof t.callback&&t.callback(t.changeBackground)}))},methods:{handleChange:function(t){var e=this,a="";this.corpInfo.map((function(n){t==n.corpid&&(a=n.corp_name,e.$store.dispatch("changeCorp",n))})),this.changeBackground=t,this.$emit("changeWxId",t,a),2==localStorage.getItem("isMasterAccount")&&this.$store.dispatch("getPermissionButton")},selectWx:function(t){this.handleChange(t)},corpInfoMouseOver:function(){this.$refs.corpInfo.style.overflowY="auto"},corpInfoMouseOut:function(){this.$refs.corpInfo.style.overflowY="hidden"}}},s=o,r=(a("56b6"),a("2877")),c=Object(r["a"])(s,n,i,!1,null,"2e9ecca2",null);e["a"]=c.exports},e5e8:function(t,e,a){e=t.exports=a("2350")(!1),e.push([t.i,"#components-layout-demo-basic[data-v-00f01075]{height:100%}#components-layout-demo-basic .ant-layout-header[data-v-00f01075]{background:#fff;border-bottom:1px solid #e2e2e2;height:50px;min-width:885px;width:100%;line-height:50px}[data-v-00f01075] .ant-layout-header{padding:0 20px;font-size:16px;text-align:left}#components-layout-demo-basic .ant-layout-sider[data-v-00f01075]{background:#fff;-webkit-box-flex:0!important;-ms-flex:0 0 250px!important;flex:0 0 250px!important;max-width:250px!important;min-width:250px!important;width:250px!important;border-right:1px solid #e2e2e2}#components-layout-demo-basic .ant-layout-content[data-v-00f01075]{margin:0 20px 20px;min-width:885px;width:100%;padding-right:40px}.content-hd[data-v-00f01075]{height:60px;width:100%;min-width:885px;line-height:60px}.content-msg[data-v-00f01075]{width:100%;border:1px solid #ffdda6;background:#fff2db;padding:10px;margin-top:12px}.content-bd[data-v-00f01075]{background:#fff;min-height:120px;border:1px solid #e2e2e2;min-width:885px;width:100%}#components-layout-demo-basic>.ant-layout[data-v-00f01075]{margin-bottom:48px}#components-layout-demo-basic>.ant-layout[data-v-00f01075]:last-child{margin:0}.list[data-v-00f01075]{margin-left:16px}.ant-layout.ant-layout-has-sider[data-v-00f01075],.list[data-v-00f01075]{height:100%}[data-v-00f01075] .dark-row{background:#fafafa}[data-v-00f01075] .light-row{background:#fff}.model-label[data-v-00f01075]{color:rgba(0,0,0,.85);overflow:hidden}.model-label-left[data-v-00f01075]{float:left;width:160px;text-align:center;line-height:32px}.model-label-right[data-v-00f01075]{float:left;margin-left:10px}.model-label-right-p[data-v-00f01075]{font-size:13px;color:#909399;margin-bottom:0;line-height:30px}[data-v-00f01075] .ant-input-number:hover .ant-input-number-handler-wrap{opacity:0}",""])},ed13:function(t,e,a){t.exports=a.p+"assets/img/WeChatLogo.3ad5225d.jpg"},fe92:function(t,e,a){e=t.exports=a("2350")(!1),e.push([t.i,".sider-one[data-v-2e9ecca2]{padding:0 20px}.sider-one-txt[data-v-2e9ecca2]{height:60px;line-height:60px;text-align:left}.wx-info[data-v-2e9ecca2]{width:100%;position:absolute;left:0;top:100px;bottom:0;overflow:hidden}.wx-info[data-v-2e9ecca2]::-webkit-scrollbar{width:2px;height:100%}.wx-info[data-v-2e9ecca2]::-webkit-scrollbar-track-piece{background-color:#fff}.wx-info[data-v-2e9ecca2]::-webkit-scrollbar-thumb{background:#fff}.selectWx[data-v-2e9ecca2]{width:200px;margin-left:20px;height:50px;line-height:50px;cursor:pointer;padding-left:10px}.active[data-v-2e9ecca2]{background:#1e90ff;color:#fff}",""])},ffd5:function(t,e,a){"use strict";var n=a("59fe"),i=a.n(n);i.a}}]);