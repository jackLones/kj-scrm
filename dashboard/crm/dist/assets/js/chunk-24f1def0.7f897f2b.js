(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-24f1def0"],{1662:function(t,e,i){"use strict";var a=i("5946"),n=i.n(a);n.a},2396:function(t,e,i){var a=i("9b58");"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var n=i("499e").default;n("40494232",a,!0,{sourceMap:!1,shadowMode:!1})},"487a":function(t,e,i){(function(e,i){t.exports=i()})(0,(function(){"use strict";var t="@@InfiniteScroll",e=function(t,e){var i,a,n,s,o,r=function(){t.apply(s,o),a=i};return function(){if(s=this,o=arguments,i=Date.now(),n&&(clearTimeout(n),n=null),a){var t=e-(i-a);t<0?r():n=setTimeout((function(){r()}),t)}else r()}},i=function(t){return t===window?Math.max(window.pageYOffset||0,document.documentElement.scrollTop):t.scrollTop},a=document.defaultView.getComputedStyle,n=function(t){var e=t;while(e&&"HTML"!==e.tagName&&"BODY"!==e.tagName&&1===e.nodeType){var i=a(e).overflowY;if("scroll"===i||"auto"===i)return e;e=e.parentNode}return window},s=function(t){return t===window?document.documentElement.clientHeight:t.clientHeight},o=function(t){return t===window?i(window):t.getBoundingClientRect().top+i(window)},r=function(t){var e=t.parentNode;while(e){if("HTML"===e.tagName)return!0;if(11===e.nodeType)return!1;e=e.parentNode}return!1},c=function(){if(!this.binded){this.binded=!0;var t=this,i=t.el,a=i.getAttribute("infinite-scroll-throttle-delay"),s=200;a&&(s=Number(t.vm[a]||a),(isNaN(s)||s<0)&&(s=200)),t.throttleDelay=s,t.scrollEventTarget=n(i),t.scrollListener=e(l.bind(t),t.throttleDelay),t.scrollEventTarget.addEventListener("scroll",t.scrollListener),this.vm.$on("hook:beforeDestroy",(function(){t.scrollEventTarget.removeEventListener("scroll",t.scrollListener)}));var o=i.getAttribute("infinite-scroll-disabled"),r=!1;o&&(this.vm.$watch(o,(function(e){t.disabled=e,!e&&t.immediateCheck&&l.call(t)})),r=Boolean(t.vm[o])),t.disabled=r;var c=i.getAttribute("infinite-scroll-distance"),d=0;c&&(d=Number(t.vm[c]||c),isNaN(d)&&(d=0)),t.distance=d;var h=i.getAttribute("infinite-scroll-immediate-check"),p=!0;h&&(p=Boolean(t.vm[h])),t.immediateCheck=p,p&&l.call(t);var u=i.getAttribute("infinite-scroll-listen-for-event");u&&t.vm.$on(u,(function(){l.call(t)}))}},l=function(t){var e=this.scrollEventTarget,a=this.el,n=this.distance;if(!0===t||!this.disabled){var r=i(e),c=r+s(e),l=!1;if(e===a)l=e.scrollHeight-c<=n;else{var d=o(a)-o(e)+a.offsetHeight+r;l=c+n>=d}l&&this.expression&&this.expression()}},d={bind:function(e,i,a){e[t]={el:e,vm:a.context,expression:i.value};var n=arguments;e[t].vm.$on("hook:mounted",(function(){e[t].vm.$nextTick((function(){r(e)&&c.call(e[t],n),e[t].bindTryCount=0;var i=function i(){e[t].bindTryCount>10||(e[t].bindTryCount++,r(e)?c.call(e[t],n):setTimeout(i,50))};i()}))}))},unbind:function(e){e&&e[t]&&e[t].scrollEventTarget&&e[t].scrollEventTarget.removeEventListener("scroll",e[t].scrollListener)}},h=function(t){t.directive("InfiniteScroll",d)};return window.Vue&&(window.infiniteScroll=d,Vue.use(h)),d.install=h,d}))},"504c":function(t,e,i){var a=i("9e1e"),n=i("0d58"),s=i("6821"),o=i("52a7").f;t.exports=function(t){return function(e){var i,r=s(e),c=n(r),l=c.length,d=0,h=[];while(l>d)i=c[d++],a&&!o.call(r,i)||h.push(t?[i,r[i]]:r[i]);return h}}},5946:function(t,e,i){var a=i("753d");"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var n=i("499e").default;n("3bd734bc",a,!0,{sourceMap:!1,shadowMode:!1})},"5c78":function(t,e,i){var a=i("f8eb");"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var n=i("499e").default;n("65067792",a,!0,{sourceMap:!1,shadowMode:!1})},"613f":function(t,e,i){"use strict";var a=i("2396"),n=i.n(a);n.a},6187:function(t,e,i){e=t.exports=i("2350")(!1),e.push([t.i,"[data-v-3a63b62c] .ant-spin-container,[data-v-3a63b62c] .ant-spin-nested-loading{height:100%}",""])},"753d":function(t,e,i){e=t.exports=i("2350")(!1),e.push([t.i,'[data-v-3d4f042e] .ant-badge-count{top:3px!important}.tab-box[data-v-3d4f042e]{height:34px;display:block}.tab-box .fans-avatar[data-v-3d4f042e]{width:32px;height:32px}.tab-box .tab-info[data-v-3d4f042e]{top:0;right:0;bottom:0;left:40px;position:absolute}.tab-box .tab-info span[data-v-3d4f042e]{padding:5px 0 0 0;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;display:block}.tab-box .tab-info span.fans-nick[data-v-3d4f042e]{font-size:14px;line-height:14px}.tab-box .tab-info span.tab-notice[data-v-3d4f042e]{font-size:12px;line-height:20px;height:25px;color:grey;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.tab-box .tab-info span[data-v-3d4f042e]:first-child{padding-top:.5px}.chat-box[data-v-3d4f042e]{margin:0!important;height:100%}.chat-box .chat-info-box[data-v-3d4f042e]{top:0;left:0;bottom:0;border-right:1px solid #e8e8e8;position:absolute}.chat-box .chat-info-box .chat-title[data-v-3d4f042e]{background:#eaeaea;font-size:20px;height:50px;padding:10px;margin:0 -8px}.chat-box .chat-info-box .chat-title .fans-nick[data-v-3d4f042e]{line-height:30px}.chat-box .chat-info-box .profile[data-v-3d4f042e]{width:350px;height:350px;top:60px;right:10px;position:absolute;background:#fff;z-index:99999;-webkit-box-shadow:.3px .3px 1px #ccc;box-shadow:.3px .3px 1px #ccc;overflow-y:auto}.chat-box .chat-info-box .profile[data-v-3d4f042e] .ant-card-body{padding:24px!important}.chat-box .chat-info-box .profile .profile-cover-box[data-v-3d4f042e]{background:#fafafa;text-align:center;position:relative}.chat-box .chat-info-box .profile .profile-cover-box .profile-close-btn[data-v-3d4f042e]{top:10px;right:10px;position:absolute;cursor:pointer;z-index:999}.chat-box .chat-info-box .profile .profile-cover-box .fans-avatar[data-v-3d4f042e]{margin-top:30px}.chat-box .chat-info-box .profile .profile-cover-box .sex-box[data-v-3d4f042e]{width:20px;height:20px;border-radius:50%;top:62px;left:182px;position:absolute}.chat-box .chat-info-box .profile .profile-cover-box .sex-box.sex-man[data-v-3d4f042e]{background:#00f}.chat-box .chat-info-box .profile .profile-cover-box .sex-box.sex-woman[data-v-3d4f042e]{background:pink}.chat-box .chat-info-box .profile .profile-cover-box .fans-nickname[data-v-3d4f042e]{margin:15px auto;display:inline-block}.chat-box .chat-info-box .profile .profile-info-box[data-v-3d4f042e]{width:100%}.chat-box .chat-info-box .profile .profile-info-box .profile-row[data-v-3d4f042e]{margin-bottom:10px}.chat-box .chat-info-box .profile .profile-info-box .profile-row .fans-remark[data-v-3d4f042e]{padding-right:5px}.chat-box .chat-info-box .profile .profile-info-box .profile-row .fans-remark-edit[data-v-3d4f042e]{cursor:pointer}.chat-box .chat-info-box .profile .profile-info-box .profile-row[data-v-3d4f042e]:last-child{margin-bottom:0}.chat-box .chat-info-box .chat-content[data-v-3d4f042e]{top:50px;right:0;bottom:208px;left:0;position:absolute;padding:10px;overflow-x:hidden;overflow-y:auto}.chat-box .chat-info-box .chat-content .loading-box[data-v-3d4f042e],.chat-box .chat-info-box .chat-content .nomore-box[data-v-3d4f042e]{text-align:center;font-size:12px;color:grey;height:24px;display:block}.chat-box .chat-info-box .chat-content .chat-content-list[data-v-3d4f042e]{width:100%;padding:10px 0;display:block}.chat-box .chat-info-box .chat-content .chat-content-list .time-divider[data-v-3d4f042e]{font-size:12px;color:grey}.chat-box .chat-info-box .chat-content .chat-content-list .time-divider[data-v-3d4f042e] .ant-divider-inner-text{line-height:24px}.chat-box .chat-info-box .chat-content .chat-content-list .content[data-v-3d4f042e]{width:100%;display:inline-block}.chat-box .chat-info-box .chat-content .chat-content-list .content .msg-content[data-v-3d4f042e]{max-width:70%;min-height:32px;margin:0 10px;color:#000;background-color:#fff;border:1px solid #e5e5e5;border-radius:5px;vertical-align:top;position:relative}.chat-box .chat-info-box .chat-content .chat-content-list .content .msg-content-1[data-v-3d4f042e]{padding:8px 11px;word-break:normal;word-wrap:break-word;overflow-wrap:break-word}.chat-box .chat-info-box .chat-content .chat-content-list .content .msg-content-1[data-v-3d4f042e] img{vertical-align:middle}.chat-box .chat-info-box .chat-content .chat-content-list .content .msg-content-1[data-v-3d4f042e]:before{position:absolute;left:-12px;top:9px;width:0;height:0;content:"";border-color:transparent #e9e9e9 transparent transparent;border-style:solid;border-width:6px}.chat-box .chat-info-box .chat-content .chat-content-list .content .msg-content-1[data-v-3d4f042e]:after{position:absolute;left:-9px;top:10px;width:0;height:0;content:"";border-color:transparent #fff transparent transparent;border-style:solid;border-width:5px}.chat-box .chat-info-box .chat-content .chat-content-list .content .msg-content[data-v-3d4f042e] .wrong-notice{padding:8px 11px;word-break:normal;word-wrap:break-word;overflow-wrap:break-word;display:inline-block}.chat-box .chat-info-box .chat-content .chat-content-list .content .msg-content[data-v-3d4f042e] .voice-box{padding:6px 11px;height:32px;cursor:pointer}.chat-box .chat-info-box .chat-content .chat-content-list .content .msg-content[data-v-3d4f042e] .voice-box .voice-symbol{width:10px;height:10px;-webkit-box-sizing:border-box;box-sizing:border-box;-webkit-transform:rotate(135deg);transform:rotate(135deg);overflow:hidden;position:relative;margin-top:5px;margin-left:5px}.chat-box .chat-info-box .chat-content .chat-content-list .content .msg-content[data-v-3d4f042e] .voice-box .voice-symbol .voice-circle{border:2px solid #2390ff;border-radius:50%;position:absolute}.chat-box .chat-info-box .chat-content .chat-content-list .content .msg-content[data-v-3d4f042e] .voice-box .voice-symbol .voice-circle.first{width:20px;height:20px;top:0;left:0}.chat-box .chat-info-box .chat-content .chat-content-list .content .msg-content[data-v-3d4f042e] .voice-box .voice-symbol .voice-circle.second{width:12px;height:12px;top:4px;left:4px}.chat-box .chat-info-box .chat-content .chat-content-list .content .msg-content[data-v-3d4f042e] .voice-box .voice-symbol .voice-circle.third{border:none;width:4px;height:4px;background:#2390ff;top:8px;left:8px}.chat-box .chat-info-box .chat-content .chat-content-list .content .msg-content[data-v-3d4f042e] .voice-box .voice-time{top:6px;right:15px;bottom:6px;position:absolute;display:inline-block}.chat-box .chat-info-box .chat-content .chat-content-list .content .msg-content[data-v-3d4f042e] .media-content{border-radius:5px;display:block}.chat-box .chat-info-box .chat-content .chat-content-list .content .msg-content[data-v-3d4f042e] img.media-content,.chat-box .chat-info-box .chat-content .chat-content-list .content .msg-content[data-v-3d4f042e] video.media-content{cursor:pointer}.chat-box .chat-info-box .chat-content .chat-content-list .content .msg-content[data-v-3d4f042e] .media-play-btn{width:40px;height:40px;top:50%;left:50%;background:hsla(0,0%,50.2%,.5);border:2px solid #fff;border-radius:20px;margin-top:-20px;margin-left:-20px;display:block;position:absolute;cursor:pointer}.chat-box .chat-info-box .chat-content .chat-content-list .content .msg-content[data-v-3d4f042e] .media-play-btn .play-btn{width:0;height:0;margin-top:8px;margin-left:12.34px;border-top:10px solid transparent;border-right:17.32px solid transparent;border-bottom:10px solid transparent;border-left:17.32px solid #fff;display:block}.chat-box .chat-info-box .chat-content .chat-content-list .content .msg-content[data-v-3d4f042e] .voice-duration{right:5px;bottom:5px;color:#fff;font-size:12px;line-height:12px;display:inline-block;position:absolute;cursor:pointer}.chat-box .chat-info-box .chat-content .chat-content-list .content .msg-content[data-v-3d4f042e] .link-box{text-decoration:none}.chat-box .chat-info-box .chat-content .chat-content-list .content .msg-content[data-v-3d4f042e] .link-box .link-title{font-size:18px;line-height:27px;padding:15px 15px 0 15px;color:#000;margin:0}.chat-box .chat-info-box .chat-content .chat-content-list .content .msg-content[data-v-3d4f042e] .link-box .link-description{font-size:14px;line-height:21px;padding:15px;color:#bfbfbf;margin:0}.chat-box .chat-info-box .chat-content .chat-content-list .content .msg-content[data-v-3d4f042e] .new-box{width:300px;border-radius:5px;overflow:hidden;display:block;background:#fff}.chat-box .chat-info-box .chat-content .chat-content-list .content .msg-content[data-v-3d4f042e] .new-box .new-cover{width:300px;height:150px}.chat-box .chat-info-box .chat-content .chat-content-list .content .msg-content[data-v-3d4f042e] .new-box .new-info-box .new-title{font-size:18px;line-height:27px;padding:0;color:#000;margin:10px 15px;word-break:break-all;white-space:normal;letter-spacing:2px;text-overflow:-o-ellipsis-lastline;overflow:hidden;text-overflow:ellipsis;-webkit-line-clamp:2;-webkit-box-orient:vertical;display:-webkit-box}.chat-box .chat-info-box .chat-content .chat-content-list .content .msg-content[data-v-3d4f042e] .new-box .new-info-box .new-digest{font-size:14px;line-height:21px;padding:0;color:#bfbfbf;margin:0 15px 10px;word-break:break-all;white-space:normal;letter-spacing:2px;text-overflow:-o-ellipsis-lastline;overflow:hidden;text-overflow:ellipsis;-webkit-line-clamp:3;-webkit-box-orient:vertical;display:-webkit-box}.chat-box .chat-info-box .chat-content .chat-content-list .content .float-right.msg-content[data-v-3d4f042e]{background-color:#a9ea67;border-color:#7ed321}.chat-box .chat-info-box .chat-content .chat-content-list .content .float-right.msg-content.msg-content-1[data-v-3d4f042e]:before{left:auto;right:-12px;border-color:transparent transparent transparent #7ed322}.chat-box .chat-info-box .chat-content .chat-content-list .content .float-right.msg-content.msg-content-1[data-v-3d4f042e]:after{right:-9px;left:auto;border-color:transparent transparent transparent #b8e986}.chat-box .chat-info-box .new-msg-tag[data-v-3d4f042e]{right:15px;bottom:215px;position:absolute}.chat-box .chat-info-box .chat-send-box[data-v-3d4f042e]{right:0;bottom:0;left:0;height:208px;position:absolute}.chat-box .chat-info-box .chat-send-box .icon-box[data-v-3d4f042e]{background:#fff;font-size:18px;padding:10px;height:44px}.chat-box .chat-info-box .chat-send-box .icon-box .icon-btn[data-v-3d4f042e]{margin-right:10px;width:18px;height:18px}.chat-box .chat-info-box .chat-send-box .send-textarea[data-v-3d4f042e]{border:none;height:110px;resize:none;background-color:#fff;overflow:hidden auto;padding:0 10px 10px 10px}.chat-box .chat-info-box .chat-send-box .send-textarea[data-v-3d4f042e]:focus{outline:none}.chat-box .chat-info-box .chat-send-box .send-textarea[data-v-3d4f042e] p{margin:0}.chat-box .chat-info-box .chat-send-box .send-btn-box[data-v-3d4f042e]{padding:10px 0}.chat-box .chat-info-box .chat-send-box .send-btn-box .send-notice[data-v-3d4f042e]{color:grey;margin-right:15px}.chat-box .chat-info-box .chat-send-box .send-btn-box.float-right[data-v-3d4f042e]{float:right}.chat-box .quick-info-box[data-v-3d4f042e]{top:0;right:0;bottom:0;position:absolute}.chat-box .quick-info-box .quick-title-box[data-v-3d4f042e]{height:42px;padding:10px}.chat-box .quick-info-box .quick-title-box .quick-title[data-v-3d4f042e]{display:inline-block;float:left}.chat-box .quick-info-box .quick-title-box .quick-btn[data-v-3d4f042e]{display:inline-block;float:right;cursor:pointer;margin-top:3.5px}.chat-box .quick-info-box .quick-text-box[data-v-3d4f042e]{background:#fff;margin:0 -10px 20px -10px;position:relative;cursor:pointer}.chat-box .quick-info-box .quick-text-box p[data-v-3d4f042e]{margin:0;padding:10px;white-space:normal;word-break:normal;word-wrap:break-word}.chat-box .quick-info-box .quick-text-box .quick-btn[data-v-3d4f042e]{position:absolute;top:0;right:0;display:none}.chat-box .quick-info-box .quick-text-box .quick-btn .quick-btn-item[data-v-3d4f042e]{background-color:rgba(0,0,0,.8);color:#fff;padding:5px;display:inline-block;margin-left:5px;font-size:14px;line-height:14px;width:24px;height:24px;cursor:pointer}.chat-box .quick-info-box .quick-text-box:hover .quick-btn[data-v-3d4f042e]{display:block}.chat-box .quick-info-box .quick-text-box .quick-modify-area .quick-modify-textarea[data-v-3d4f042e]{height:100px;overflow:hidden auto;padding:10px}.chat-box .quick-info-box .quick-text-box .quick-modify-area .quick-modify-textarea[data-v-3d4f042e]:focus{outline:none}.chat-box .quick-info-box .quick-text-box .quick-modify-area .quick-modify-textarea[data-v-3d4f042e] p{margin-bottom:0}.chat-box .quick-info-box .quick-text-box .quick-modify-area .quick-modify-btn-box[data-v-3d4f042e]{height:30px;display:block;margin:10px}.chat-box .quick-info-box .quick-text-box .quick-modify-area .quick-modify-btn-box .quick-modify-emoji-btn[data-v-3d4f042e]{font-size:16px;margin-top:4px}.chat-box .quick-info-box .quick-text-box .quick-modify-area .quick-modify-btn-box .quick-modify-btn[data-v-3d4f042e]{display:inline-block;float:right}.chat-box .quick-info-box .quick-text-box .quick-modify-area .quick-modify-btn-box .quick-modify-btn button[data-v-3d4f042e]{margin-left:5px}.chat-box .quick-info-box .quick-text-box .quick-modify-area .quick-modify-btn-box .quick-modify-btn button[data-v-3d4f042e]:first-child{margin:0}.chat-box .quick-info-box .quick-tabs[data-v-3d4f042e]{left:8px;right:8px;top:42px;bottom:0;position:absolute}.chat-box .quick-info-box .quick-tabs[data-v-3d4f042e] .ant-tabs-card .ant-tabs-content{top:56px;bottom:0;height:auto;padding-bottom:0;overflow-y:auto;position:absolute}.chat-box .quick-info-box .quick-tabs[data-v-3d4f042e] .ant-tabs-card .ant-tabs-content .ant-tabs-tabpane{padding:16px}.chat-box .quick-info-box .quick-tabs[data-v-3d4f042e] .ant-tabs-card .ant-tabs-bar{border-bottom:1px solid #e0e0e0}.chat-box .quick-info-box .quick-tabs[data-v-3d4f042e] .ant-tabs-card .ant-tabs-bar .ant-tabs-tab{border-color:transparent;background:transparent;max-width:60%}.chat-box .quick-info-box .quick-tabs[data-v-3d4f042e] .ant-tabs-card .ant-tabs-bar .ant-tabs-tab-active{border-color:#e0e0e0;background:#f1f1f1;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}[data-v-3d4f042e] .ant-tabs-nav{width:100%}.quick-body .quick-area[data-v-3d4f042e]{border:1px solid #e2e2e2}.quick-body .quick-area .quick-textarea[data-v-3d4f042e]{height:200px;overflow-y:auto;overflow-x:hidden;padding:5px}.quick-body .quick-area .quick-textarea[data-v-3d4f042e]:focus{outline:none}.quick-body .quick-area .quick-btn-box[data-v-3d4f042e]{height:30px;display:block}.quick-body .quick-area .quick-btn-box .quick-emoji-btn[data-v-3d4f042e]{font-size:20px;margin-top:5px;margin-left:10px}.quick-body .quick-area .quick-btn-box .quick-notice[data-v-3d4f042e]{color:grey;height:30px;font-size:15px;line-height:30px;float:right;display:inline-block;margin-right:10px}.quick-body .quick-style[data-v-3d4f042e]{height:30px;font-size:14px;line-height:30px;margin-top:15px}.little-notice[data-v-3d4f042e]{font-size:12px;color:grey}[data-v-3d4f042e] .ant-tabs-tab{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}[data-v-3d4f042e] .ant-input-affix-wrapper .ant-input-suffix{right:5px}[data-v-3d4f042e] .ant-input:not(:last-child){padding-right:50px}',""])},"7f1b":function(t,e,i){"use strict";var a=i("fd60"),n=i.n(a);n.a},"7f87":function(t,e,i){e=t.exports=i("2350")(!1),e.push([t.i,".search[data-v-405498d4]{padding-left:10px;padding-top:20px;padding-bottom:20px;border-bottom:1px dashed #e2e2e2}.group-list[data-v-405498d4]{padding-left:10px;padding-top:10px;padding-bottom:10px}.demo-infinite-container[data-v-405498d4]{overflow:auto;padding:8px 15px;position:fixed;top:245px;bottom:0;width:19.27%}.demo-infinite-container[data-v-405498d4] .ant-spin-spinning{top:calc(100% - 540px)}.demo-loading-container[data-v-405498d4]{position:absolute;bottom:40px;width:100%;text-align:center}.quick-title[data-v-405498d4]{display:inline-block;float:left}.quick-box[data-v-405498d4]{padding:15px 10px;position:relative;cursor:pointer}.quick-box[data-v-405498d4] .ant-list-item-meta-avatar+.ant-list-item-meta-content{width:calc(100% - 56px)!important}.quick-box[data-v-405498d4] .ant-list-item-meta-title{word-break:normal;word-wrap:break-word;overflow-wrap:break-word}.quick-box[data-v-405498d4] .ant-list-item-meta,.quick-box[data-v-405498d4] .ant-list-item-meta .ant-list-item-meta-content{width:100%}.quick-box[data-v-405498d4] .ant-list-item-meta .ant-list-item-meta-content .quick-description{word-break:normal;word-wrap:break-word;overflow-wrap:break-word}.quick-btn[data-v-405498d4]{position:absolute;top:0;right:0;display:none}.quick-btn .quick-btn-item[data-v-405498d4]{background-color:rgba(0,0,0,.8);color:#fff;padding:5px;display:inline-block;margin-left:5px;font-size:14px;line-height:14px;width:24px;height:24px;cursor:pointer}.quick-box[data-v-405498d4]:hover{background-color:#fafafa}.quick-box:hover .quick-btn[data-v-405498d4]{display:block}.content-editable[data-v-405498d4]{font-size:14px;line-height:21px;padding:15px;height:110px;overflow:auto;border:1px solid rgba(0,0,0,.15)}.content-editable[data-v-405498d4] p{margin:0;word-break:break-word}",""])},8598:function(t,e,i){var a=i("e70c");"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var n=i("499e").default;n("b5e298dc",a,!0,{sourceMap:!1,shadowMode:!1})},8615:function(t,e,i){var a=i("5ca1"),n=i("504c")(!1);a(a.S,"Object",{values:function(t){return n(t)}})},9335:function(t,e,i){"use strict";var a=i("99cb"),n=i.n(a);n.a},9469:function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"container msg-container",staticStyle:{top:"0",right:"0",bottom:"0",left:"0",position:"absolute"}},[i("a-spin",{attrs:{tip:"Loading...",size:"large",spinning:t.isLoading}},[t.isWx?i("fans-msg"):t._e(),t.isMini?i("mini-msg"):t._e()],1)],1)},n=[],s=(i("28a5"),function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{ref:"fansMsgBox",style:{height:"100% !important"}},[i("a-tabs",{style:{height:"100%"},attrs:{activeKey:t.activeKey,tabBarStyle:{width:"180px"},tabPosition:"left"},on:{prevClick:t.callback,nextClick:t.callback,tabClick:t.tabClick}},[i("a-tab-pane",{key:t.changeKey},[i("template",{slot:"tab"},[i("span",{directives:[{name:"has",rawName:"v-has",value:"fansMsg",expression:"'fansMsg'"}],staticClass:"tabMenu tabMenuBorder",staticStyle:{height:"35px"}},[t._v("公众号")]),i("span",{directives:[{name:"has",rawName:"v-has",value:"miniMsg",expression:"'miniMsg'"}],staticClass:"tabMenu",staticStyle:{height:"35px"},on:{click:function(e){return t.changeType("mini")}}},[t._v("小程序")])])],2),i("a-tab-pane",{key:t.searchKey},[i("a-select",{staticStyle:{width:"100%"},attrs:{slot:"tab",showSearch:"",allowClear:"",placeholder:"搜索公众号",defaultActiveFirstOption:!1,showArrow:!1,optionFilterProp:"children",filterOption:t.filterOption},on:{change:t.tabClick},slot:"tab",model:{value:t.searchValue,callback:function(e){t.searchValue=e},expression:"searchValue"}},t._l(t.msgTabList,(function(e,a){return i("a-select-option",{attrs:{value:e.id}},[t._v(t._s(e.name)+"\n\t\t\t\t")])})),1)],1),t._l(t.msgTabList,(function(e,a){return i("a-tab-pane",{key:e.id,style:t.activeKey==e.id?"height: 100%":""},[i("span",{attrs:{slot:"tab"},slot:"tab"},[i("a-avatar",{attrs:{src:e.avatar,shape:"square"}}),t._v("\n\t\t\t\t"+t._s(e.name)+"\n\t\t\t")],1),0==e.fans_list.length?i("div",{staticStyle:{height:"100%",position:"relative"}},[i("div",{staticStyle:{width:"180px",height:"100%",padding:"10px","border-right":"1px solid #E8E8E8"}},[[i("a-empty",{staticStyle:{"margin-top":"200px"}},[i("span",{attrs:{slot:"description"},slot:"description"},[t._v(" 暂无活跃粉丝 ")])])]],2),i("div",{staticStyle:{top:"0",right:"0",bottom:"0",left:"180px",position:"absolute"}},[i("a-row",{staticClass:"chat-box",attrs:{gutter:16}},[i("a-col",{staticClass:"chat-info-box",attrs:{span:18}},[i("a-row",{staticClass:"chat-title"},[i("a-col",{attrs:{span:22}},[i("span",{staticClass:"fans-nick"})]),i("a-col",{staticClass:"text-right",attrs:{span:2}},[i("a-icon",{attrs:{type:"user"}})],1)],1),i("a-row",{staticClass:"chat-content"},[i("a-col",{attrs:{span:24}})],1),i("a-row",{staticClass:"chat-send-box"},[i("a-col",{attrs:{span:24}},[i("div",{staticClass:"icon-box"},[i("a-icon",{staticClass:"icon-btn",attrs:{type:"smile"}}),i("a-icon",{staticClass:"icon-btn",attrs:{type:"picture"}}),i("a-icon",{staticClass:"icon-btn",attrs:{type:"paper-clip"}})],1),i("div",{staticClass:"send-textarea"}),i("div",{staticClass:"send-btn-box float-right"},[i("span",{staticClass:"send-notice"},[t._v("按Shift+Enter换行，Enter发送")]),i("a-button",{attrs:{type:"primary",size:"large",loading:t.sending,disabled:!0}},[t._v("\n\t\t\t\t\t\t\t\t\t\t\t发送\n\t\t\t\t\t\t\t\t\t\t")])],1)])],1)],1),i("content-msg",{staticClass:"quick-info-box ant-col-6",attrs:{sendDisplay:0},on:{replyMsg:t.replyMsg}})],1)],1)]):t._e(),e.fans_list.length>0?i("a-tabs",{staticStyle:{height:"100%"},attrs:{tabBarStyle:{width:"180px",textAlign:"left"},activeKey:t.subActiveKey,tabPosition:"left"},on:{prevClick:t.callback,nextClick:t.callback,tabClick:t.subTabClick}},[i("a-tab-pane",{key:t.msgTitleKey},[i("span",{attrs:{slot:"tab"},slot:"tab"},[t._v("粉丝消息")])]),t._l(e.fans_list,(function(n,s){return i("a-tab-pane",{key:n.openid,ref:n.openid,refInFor:!0,style:t.subActiveKey==n.openid?"height: 100%":"",attrs:{"data-fans-id":n.fans_id}},[i("div",{attrs:{slot:"tab"},slot:"tab"},[i("a-badge",{staticClass:"tab-box",attrs:{count:t.fansUnread[e.id+"_"+n.fans_id]}},[i("a-avatar",{staticClass:"fans-avatar",attrs:{src:n.headerimg,shape:"square"}}),i("div",{staticClass:"tab-info"},[i("span",{staticClass:"fans-nick"},[t._v(t._s(n.remark.length>0?n.remark+"（"+n.nickname+"）":n.nickname))]),i("span",{staticClass:"tab-notice",domProps:{innerHTML:t._s(t.tabText(e.id,n.fans_id,n.openid))}})])],1)],1),t.subActiveKey==n.openid?i("a-row",{staticClass:"chat-box",attrs:{gutter:16}},[i("a-col",{staticClass:"chat-info-box",attrs:{span:18}},[i("a-row",{staticClass:"chat-title"},[i("a-col",{attrs:{span:22}},[i("span",{staticClass:"fans-nick"},[t._v("\n\t\t\t\t\t\t\t\t\t"+t._s(n.remark.length>0?n.remark+"（"+n.nickname+"）":n.nickname)+"\n\t\t\t\t\t\t\t\t\t"),1==n.sex?i("a-icon",{staticStyle:{"font-size":"16px",color:"#427EBA"},attrs:{type:"man"}}):t._e(),2==n.sex?i("a-icon",{staticStyle:{"font-size":"16px",color:"#ED4997"},attrs:{type:"woman"}}):t._e()],1)]),i("a-col",{staticClass:"text-right",attrs:{span:2}},[i("a-icon",{staticStyle:{cursor:"pointer"},attrs:{type:"user"},on:{click:t.toggleProfile}})],1)],1),i("a-card",{directives:[{name:"show",rawName:"v-show",value:t.profileShow,expression:"profileShow"}],staticClass:"profile"},[i("template",{slot:"cover"},[i("a-row",{staticClass:"profile-cover-box"},[i("a-icon",{staticClass:"profile-close-btn",attrs:{type:"close"},on:{click:t.toggleProfile}}),i("a-col",{attrs:{span:24}},[i("a-avatar",{staticClass:"fans-avatar",attrs:{size:50,src:n.headerimg,shape:"square"}}),0!=n.sex?i("div",{staticClass:"sex-box",class:1==n.sex?"sex-man":"sex-woman"},[1==n.sex?i("a-icon",{staticStyle:{"font-size":"14px",color:"white"},attrs:{type:"man"}}):t._e(),2==n.sex?i("a-icon",{staticStyle:{"font-size":"14px",color:"white"},attrs:{type:"woman"}}):t._e()],1):t._e()],1),i("a-col",{attrs:{span:24}},[i("span",{staticClass:"fans-nickname"},[t._v(t._s(n.nickname))])])],1)],1),i("a-card-meta",[i("template",{slot:"description"},[i("div",{staticClass:"profile-info-box"},[i("a-row",{staticClass:"profile-row",attrs:{gutter:16}},[i("a-col",{attrs:{span:7}},[t._v("关注时间：")]),i("a-col",{attrs:{span:17}},[t._v(t._s(t.formatSubTime(n.subscribe_time)))])],1),i("a-row",{staticClass:"profile-row",attrs:{gutter:16}},[i("a-col",{attrs:{span:7}},[t._v("备注：")]),i("a-col",{attrs:{span:17}},[i("span",{directives:[{name:"show",rawName:"v-show",value:!t.remarkVisible&&n.remark.length>0,expression:"!remarkVisible && fans.remark.length > 0"}],staticClass:"fans-remark"},[t._v(t._s(n.remark))]),i("span",{directives:[{name:"show",rawName:"v-show",value:!t.remarkVisible,expression:"!remarkVisible"}],staticClass:"fans-remark-edit",on:{click:function(e){return t.modifyRemark(n.remark.length)}}},[i("a-icon",{attrs:{type:"edit",alt:""}})],1),i("a-input-search",{directives:[{name:"show",rawName:"v-show",value:t.remarkVisible,expression:"remarkVisible"}],attrs:{defaultValue:n.remark,placeholder:"输入用户的备注","data-wk":a,"data-k":s,"data-fid":n.fans_id,maxLength:10},on:{search:t.setRemark,change:t.remarkChange}},[i("span",{attrs:{slot:"suffix"},slot:"suffix"},[i("span",[t._v(t._s(t.remarkLength))]),t._v("/10\n\t\t\t\t\t\t\t\t\t\t\t\t\t")]),i("a-button",{attrs:{slot:"enterButton","data-wk":a,"data-k":s,"data-fid":n.fans_id,type:"primary"},slot:"enterButton"},[i("a-icon",{attrs:{type:"check"}})],1)],1)],1)],1),i("a-row",{staticClass:"profile-row",attrs:{gutter:16}},[i("a-col",{attrs:{span:7}},[t._v("标签：")]),i("a-col",{attrs:{span:17}},[i("span",{staticClass:"fans-remark-edit"},[t._l(t.hasTagsValue,(function(e){return[i("a-tag",[t._v(t._s(e))])]})),i("a-icon",{attrs:{type:"edit",alt:""},on:{click:t.showModal}})],2)])],1)],1)])],2)],2),i("a-modal",{attrs:{title:"为粉丝增加标签",confirmLoading:t.confirmLoading2,width:"800px"},on:{ok:t.handleOk,cancel:t.cancelVisible},model:{value:t.visible,callback:function(e){t.visible=e},expression:"visible"}},[i("p",{staticStyle:{color:"red","margin-bottom":"10px"}},[t._v("\n\t\t\t\t\t\t\t\t\t最多可再打"+t._s(20-t.tagCheckValue.length)+"个标签。")]),i("a-checkbox-group",{on:{change:t.onChange2},model:{value:t.tagCheckValue,callback:function(e){t.tagCheckValue=e},expression:"tagCheckValue"}},[i("a-row",t._l(t.tagsList,(function(e,a){return i("a-col",{key:e.key,staticStyle:{"margin-bottom":"10px"},attrs:{span:6}},[i("a-checkbox",{attrs:{value:e.key,disabled:t.disabled[a]}},[t._v("\n\t\t\t\t\t\t\t\t\t\t\t\t"+t._s(e.name)+"\n\t\t\t\t\t\t\t\t\t\t\t")])],1)})),1)],1),i("a-input-search",{attrs:{placeholder:"请输入标签（不得超过6个字符）",enterButton:"新建"},on:{search:t.onSearch},model:{value:t.inputValue,callback:function(e){t.inputValue=e},expression:"inputValue"}}),i("p",{staticStyle:{margin:"10px 0"}},[t._v("提示：输入一个标签后，空格后输入下一个标签，每个标签最多6个字")])],1),i("a-row",{directives:[{name:"perfect-scroll-bar",rawName:"v-perfect-scroll-bar",value:t.perfectScrollBarOptions,expression:"perfectScrollBarOptions"}],ref:"chat_content",refInFor:!0,staticClass:"chat-content",on:{"ps-scroll-up":t.handlePullOnLoad,"ps-scroll-down":t.handleInfiniteOnLoad,"ps-scroll-y":t.changeScrollPosition}},[i("a-col",{attrs:{span:24}},[t.loading?i("div",{staticClass:"loading-box"},[i("a-spin",[i("a-icon",{staticStyle:{"font-size":"12px",color:"grey","margin-right":"5px"},attrs:{slot:"indicator",type:"loading",spin:""},slot:"indicator"})],1),i("span",[t._v("正在加载")])],1):t._e(),t.noMore[e.id+"_"+n.fans_id]?i("div",{staticClass:"nomore-box"},[i("span",[t._v("无更多消息")])]):t._e(),t._l(t.msgContent[e.id+"_"+n.fans_id],(function(a){return[i("div",{ref:a.id,refInFor:!0,staticClass:"chat-content-list",attrs:{id:"contentList"+a.id}},[t.showTimeDivider(e.id,n.fans_id,a.id,a.create_time)?i("a-divider",{staticClass:"time-divider",attrs:{dashed:""}},[t._v("\n\t\t\t\t\t\t\t\t\t\t\t\t"+t._s(t.formatMsgTime(a.create_time,!0))+"\n\t\t\t\t\t\t\t\t\t\t\t")]):t._e(),i("div",{staticClass:"content"},[1==a.from.type?i("a-avatar",{staticClass:"float-left",attrs:{shape:"square",src:a.from.data.headerimg}}):t._e(),2==a.from.type?i("a-avatar",{staticClass:"float-right",attrs:{shape:"square",src:a.from.data.head_img}}):t._e(),3==a.from.type?i("a-avatar",{staticClass:"float-right",attrs:{shape:"square",src:a.from.data.avatar}}):t._e(),1==a.from.type?i("div",{class:"msg-content msg-content-"+a.type+" float-left",domProps:{innerHTML:t._s(t.initMsgContent(a.content,a.type,a.id))},on:{click:t.addComment}}):t._e(),1!=a.from.type?i("div",{class:"msg-content msg-content-"+a.type+" float-right",domProps:{innerHTML:t._s(t.initMsgContent(a.content,a.type,a.id))},on:{click:t.addComment}}):t._e()],1)],1)]}))],2)],1),i("a-tag",{staticClass:"new-msg-tag",attrs:{visible:t.newMsg[e.id+"_"+n.fans_id],color:"blue"},on:{click:t.newMsgChange}},[t._v("\n\t\t\t\t\t\t\t\t新消息\n\t\t\t\t\t\t\t")]),i("a-row",{staticClass:"chat-send-box"},[i("a-col",{attrs:{span:24}},[i("div",{staticClass:"icon-box"},[i("a-popover",{attrs:{trigger:"click",overlayClassName:"emoji-popover",destroyTooltipOnHide:!0},model:{value:t.emojiShow,callback:function(e){t.emojiShow=e},expression:"emojiShow"}},[i("VEmojiPicker",{attrs:{slot:"content",showSearch:!1},on:{select:t.onSelectEmoji},slot:"content"}),i("a-tooltip",{attrs:{placement:"top"}},[i("template",{slot:"title"},[i("span",[t._v("表情")])]),i("a-icon",{staticClass:"icon-btn",staticStyle:{cursor:"pointer"},attrs:{type:"smile"}})],2)],1),i("a-tooltip",{attrs:{placement:"top"}},[i("template",{slot:"title"},[i("span",[t._v("图片")])]),i("a-icon",{staticClass:"icon-btn",attrs:{type:"picture"},on:{click:function(e){return t.selectMaterial(2)}}})],2),i("a-tooltip",{attrs:{placement:"top"}},[i("template",{slot:"title"},[i("span",[t._v("图文")])]),i("a-icon",{staticClass:"icon-btn",attrs:{type:"paper-clip"},on:{click:function(e){return t.selectMaterial(1)}}})],2)],1),i("medium-editor",{ref:"send_editor",refInFor:!0,staticClass:"send-textarea",attrs:{"data-key":n.fans_id,"data-active-key":e.id,text:t.valueInput[e.id+"_"+n.fans_id].input,options:t.options,"custom-tag":"div"},on:{editorCreated:t.editorCreated,edit:t.changeContentInput}}),i("div",{staticClass:"send-btn-box float-right"},[i("span",{staticClass:"send-notice"},[t._v("按Shift+Enter换行，Enter发送")]),i("a-button",{staticStyle:{"font-size":"14px",height:"34px","margin-right":"10px"},attrs:{type:"primary",size:"large",loading:t.sending,disabled:0==t.valueInput[e.id+"_"+n.fans_id].reply.length||"\n"==t.valueInput[e.id+"_"+n.fans_id].reply},on:{click:t.reply}},[t._v("\n\t\t\t\t\t\t\t\t\t\t\t发送\n\t\t\t\t\t\t\t\t\t\t")])],1)],1)],1)],1),i("content-msg",{staticClass:"quick-info-box ant-col-6",attrs:{container:function(){return t.$refs.fansMsgBox}},on:{replyMsg:t.replyMsg}})],1):t._e()],1)}))],2):t._e()],1)}))],2),i("a-modal",{staticClass:"preview-modal",attrs:{visible:t.previewVisible,footer:null,width:"100%",centered:""},on:{cancel:t.handleCancel}},[i("a-carousel",{ref:"previewCarousel",attrs:{arrows:"",dots:!1,effect:"fade",adaptiveHeight:!0},scopedSlots:t._u([{key:"prevArrow",fn:function(e){return i("div",{staticClass:"custom-slick-arrow",staticStyle:{left:"10px",zIndex:"1"}},[i("a-icon",{attrs:{type:"left-circle"},on:{click:t.videoStop}})],1)}},{key:"nextArrow",fn:function(e){return i("div",{staticClass:"custom-slick-arrow",staticStyle:{right:"10px"}},[i("a-icon",{attrs:{type:"right-circle"},on:{click:t.videoStop}})],1)}}])},t._l(t.previewInfo[t.activeKey+"_"+t.fansId],(function(e,a){return i("div",["undefined"!=typeof e.previewType&&"IMG"==e.previewType?i("img",{staticStyle:{margin:"0 auto",display:"block"},attrs:{alt:e.previewAlt,src:e.previewUrl,width:e.previewWidth,height:e.previewHeight}}):t._e(),"undefined"!=typeof e.previewType&&"VIDEO"==e.previewType?i("video",{staticStyle:{margin:"0 auto",display:"block"},attrs:{src:e.previewUrl,width:e.previewWidth,height:e.previewHeight,preload:"",controls:"","data-key":a},on:{play:t.videoPlay,pause:t.videoPause}}):t._e()])})),0)],1),i("a-modal",{attrs:{title:"创建快捷回复",visible:t.quickVisible},on:{cancel:t.handleQuickCancel,ok:t.handleQuickOk}},[i("div",{staticClass:"quick-body"},[i("div",{staticClass:"quick-area"},[i("medium-editor",{ref:"quick_editor",staticClass:"quick-textarea",attrs:{text:t.quickText.html,options:t.options,"custom-tag":"div"},on:{editorCreated:t.quickEditorCreated,edit:t.quickChangeContentInput}}),i("div",{staticClass:"quick-btn-box"},[i("a-popover",{attrs:{trigger:"click",overlayClassName:"emoji-popover",destroyTooltipOnHide:!0},model:{value:t.quickEmojiShow,callback:function(e){t.quickEmojiShow=e},expression:"quickEmojiShow"}},[i("VEmojiPicker",{attrs:{slot:"content",showSearch:!1},on:{select:t.onQuickSelectEmoji},slot:"content"}),i("a-icon",{staticClass:"quick-emoji-btn",staticStyle:{cursor:"pointer"},attrs:{type:"smile"}})],1),i("span",{staticClass:"quick-notice"},[i("span",[t._v(t._s(t.wordNum)+"/500")]),t._v("（按Shift+Enter换行）")])],1)],1),i("div",{staticClass:"quick-style"},[i("label",[t._v("选择分类：")]),i("a-radio-group",{attrs:{name:"radioGroup"},on:{change:t.quickChange},model:{value:t.quickCheck,callback:function(e){t.quickCheck=e},expression:"quickCheck"}},[i("a-radio",{attrs:{value:t.activeKey}},[t._v(t._s(t.quickName))]),i("a-radio",{attrs:{value:0}},[t._v("通用")])],1)],1)])]),i("choose-msg",{attrs:{show:t.chooseMsg,type:t.chooseMsgType,news_type:1,needConfirm:t.chooseNeedConfirm,callback:t.modalVisibleChange,clearGroup:t.clearGroup}})],1)}),o=[],r=(i("6b54"),i("ac6a"),i("456d"),i("a481"),i("3b2b"),i("386d"),i("7f7f"),i("7618")),c=(i("96cf"),i("3b8d")),l=i("79b5"),d=i("40cf"),h=i("c1df"),p=i.n(h),u=i("4884"),f=i.n(u),m=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("div",{staticClass:"search"},[i("a-input-search",{staticStyle:{width:"96%"},attrs:{placeholder:"输入要搜索的内容",allowClear:!0,enterButton:"搜索"},on:{search:t.onSearch}})],1),i("div",{staticClass:"group-list"},[i("a-form-item",{attrs:{"label-col":{span:3},"wrapper-col":{span:21}}},[i("a-row",{attrs:{gutter:16}},[i("a-col",{attrs:{span:15}},[i("a-tree-select",{style:{width:"100%"},attrs:{dropdownStyle:{maxHeight:"200px",overflow:"auto"},treeData:t.groupList,placeholder:"Please select"},on:{select:t.onSelect},model:{value:t.selectGroupId,callback:function(e){t.selectGroupId=e},expression:"selectGroupId"}})],1),i("a-col",{attrs:{span:6}},[i("a-button",{attrs:{type:"primary"},on:{click:t.addQuick}},[i("a-icon",{attrs:{type:"plus"}}),t._v("\n\t\t\t\t\t\t添加\n\t\t\t\t\t")],1)],1)],1)],1)],1),i("div",[i("a-tabs",{attrs:{defaultActiveKey:"1"},on:{change:t.changeTab}},[i("a-tab-pane",{key:"1",attrs:{tab:"文本"}},[1==t.tabKey?i("a-row",{directives:[{name:"perfect-scroll-bar",rawName:"v-perfect-scroll-bar",value:t.perfectScrollBarOptions,expression:"perfectScrollBarOptions"}],ref:"quick_box",staticClass:"demo-infinite-container",on:{"ps-scroll-down":t.handleInfiniteOnLoad}},[i("a-col",{attrs:{span:24}},[i("a-spin",{attrs:{tip:"Loading...",size:"large",spinning:t.isLoading}},[i("a-list",{staticClass:"quick-text-box",attrs:{dataSource:t.list},scopedSlots:t._u([{key:"renderItem",fn:function(e,a){return i("a-list-item",{staticClass:"quick-box"},[i("a-list-item-meta",[i("div",{attrs:{slot:"title"},slot:"title"},[t._v(t._s(e.file_name)+"\n\t\t\t\t\t\t\t\t\t\t\t"),i("div",{staticClass:"quick-btn"},[1==t.sendDisplay?i("a-tooltip",{attrs:{placement:"top"}},[i("template",{slot:"title"},[i("span",[t._v("发送")])]),i("span",{staticClass:"quick-btn-item",on:{click:function(i){return t.quickSend(1,e.content)}}},[i("a-icon",{attrs:{type:"right-square"}})],1)],2):t._e(),i("a-tooltip",{attrs:{placement:"top"}},[i("template",{slot:"title"},[i("span",[t._v("编辑")])]),i("span",{staticClass:"quick-btn-item",on:{click:function(i){return t.openQuickModify(e.id,a)}}},[i("a-icon",{attrs:{"data-key":e.id,type:"edit",alt:""}})],1)],2),i("a-popconfirm",{attrs:{placement:"leftTop",title:"确定删除？"},on:{confirm:function(i){return t.quickDel(e.id)}}},[i("a-icon",{staticStyle:{color:"red"},attrs:{slot:"icon",type:"question-circle-o"},slot:"icon"}),i("span",{staticClass:"quick-btn-item"},[i("a-tooltip",{attrs:{placement:"top"}},[i("template",{slot:"title"},[i("span",[t._v("删除")])]),i("a-icon",{attrs:{"data-key":e.id,type:"delete",alt:""}})],2)],1)],1)],1)]),i("div",{staticClass:"quick-description",attrs:{slot:"description"},domProps:{innerHTML:t._s(e.content.replace(/[(\r\n)|\r|\n]/g,"<br/>"))},slot:"description"})])],1)}}],null,!1,266116342)})],1)],1)],1):t._e()],1),i("a-tab-pane",{key:"2",attrs:{tab:"图片"}},[2==t.tabKey?i("a-row",{directives:[{name:"perfect-scroll-bar",rawName:"v-perfect-scroll-bar",value:t.perfectScrollBarOptions,expression:"perfectScrollBarOptions"}],ref:"quick_box",staticClass:"demo-infinite-container",on:{"ps-scroll-down":t.handleInfiniteOnLoad}},[i("a-col",{attrs:{span:24}},[i("a-spin",{attrs:{tip:"Loading...",size:"large",spinning:t.isLoading}},[i("a-list",{staticClass:"quick-text-box",attrs:{dataSource:t.list},scopedSlots:t._u([{key:"renderItem",fn:function(e,a){return i("a-list-item",{staticClass:"quick-box"},[i("a-list-item-meta",[i("div",{attrs:{slot:"title"},slot:"title"},[t._v(t._s(e.file_name)+"\n\t\t\t\t\t\t\t\t\t\t\t"),i("div",{staticClass:"quick-btn"},[i("a-tooltip",{attrs:{placement:"top"}},[i("template",{slot:"title"},[i("span",[t._v("发送")])]),i("span",{staticClass:"quick-btn-item",on:{click:function(i){return t.quickSend(2,e.local_path,e)}}},[i("a-icon",{attrs:{type:"right-square"}})],1)],2),i("a-popconfirm",{attrs:{placement:"leftTop",title:"确定删除？"},on:{confirm:function(i){return t.quickDel(e.id)}}},[i("a-icon",{staticStyle:{color:"red"},attrs:{slot:"icon",type:"question-circle-o"},slot:"icon"}),i("span",{staticClass:"quick-btn-item"},[i("a-tooltip",{attrs:{placement:"top"}},[i("template",{slot:"title"},[i("span",[t._v("删除")])]),i("a-icon",{attrs:{"data-key":e.id,type:"delete",alt:""}})],2)],1)],1)],1)]),e.local_path?i("a-avatar",{attrs:{slot:"avatar",shape:"square",size:"large",src:t.commonUrl+e.local_path,alt:""},slot:"avatar"}):t._e()],1)],1)}}],null,!1,2235667860)})],1)],1)],1):t._e()],1),"wx"==this.comeFrom?i("a-tab-pane",{key:"3",attrs:{tab:"图文"}},[3==t.tabKey?i("a-row",{directives:[{name:"perfect-scroll-bar",rawName:"v-perfect-scroll-bar",value:t.perfectScrollBarOptions,expression:"perfectScrollBarOptions"}],ref:"quick_box",staticClass:"demo-infinite-container",on:{"ps-scroll-down":t.handleInfiniteOnLoad}},[i("a-col",{attrs:{span:24}},[i("a-spin",{attrs:{tip:"Loading...",size:"large",spinning:t.isLoading}},[i("a-list",{staticClass:"quick-text-box",attrs:{dataSource:t.list},scopedSlots:t._u([{key:"renderItem",fn:function(e,a){return i("a-list-item",{staticClass:"quick-box"},[i("a-list-item-meta",[i("div",{attrs:{slot:"title"},slot:"title"},[e.artList?[t._v(t._s(e.artList[0].title))]:t._e(),i("div",{staticClass:"quick-btn"},[i("a-tooltip",{attrs:{placement:"top"}},[i("template",{slot:"title"},[i("span",[t._v("发送")])]),e.artList[0].s_local_path?[i("span",{staticClass:"quick-btn-item",on:{click:function(i){return t.quickSend(3,e.artList[0].s_local_path,e)}}},[i("a-icon",{attrs:{type:"right-square"}})],1)]:[i("span",{staticClass:"quick-btn-item",on:{click:function(i){return t.quickSend(3,e.artList[0].local_path,e)}}},[i("a-icon",{attrs:{type:"edit",alt:""}})],1)]],2)],1)],2),e.artList?[e.artList[0].s_local_path?[i("a-avatar",{attrs:{slot:"avatar",shape:"square",size:"large",src:t.commonUrl+e.artList[0].s_local_path,alt:""},slot:"avatar"})]:[i("a-avatar",{attrs:{slot:"avatar",shape:"square",size:"large",src:t.commonUrl+e.artList[0].local_path,alt:""},slot:"avatar"})]]:t._e()],2)],1)}}],null,!1,1132062238)})],1)],1)],1):t._e()],1):t._e(),"wx"==this.comeFrom?i("a-tab-pane",{key:"4",attrs:{tab:"音频"}},[4==t.tabKey?i("a-row",{directives:[{name:"perfect-scroll-bar",rawName:"v-perfect-scroll-bar",value:t.perfectScrollBarOptions,expression:"perfectScrollBarOptions"}],ref:"quick_box",staticClass:"demo-infinite-container",on:{"ps-scroll-down":t.handleInfiniteOnLoad}},[i("a-col",{attrs:{span:24}},[i("a-spin",{attrs:{tip:"Loading...",size:"large",spinning:t.isLoading}},[i("a-list",{staticClass:"quick-text-box",attrs:{dataSource:t.list},scopedSlots:t._u([{key:"renderItem",fn:function(e,a){return i("a-list-item",{staticClass:"quick-box"},[i("a-list-item-meta",[i("div",{attrs:{slot:"title"},slot:"title"},[t._v(t._s(e.file_name)+"\n\t\t\t\t\t\t\t\t\t\t\t"),i("div",{staticClass:"quick-btn"},[i("a-tooltip",{attrs:{placement:"top"}},[i("template",{slot:"title"},[i("span",[t._v("发送")])]),i("span",{staticClass:"quick-btn-item",on:{click:function(i){return t.quickSend(4,e,e)}}},[i("a-icon",{attrs:{type:"right-square"}})],1)],2),i("a-popconfirm",{attrs:{placement:"leftTop",title:"确定删除？"},on:{confirm:function(i){return t.quickDel(e.id)}}},[i("a-icon",{staticStyle:{color:"red"},attrs:{slot:"icon",type:"question-circle-o"},slot:"icon"}),i("span",{staticClass:"quick-btn-item"},[i("a-tooltip",{attrs:{placement:"top"}},[i("template",{slot:"title"},[i("span",[t._v("删除")])]),i("a-icon",{attrs:{"data-key":e.id,type:"delete",alt:""}})],2)],1)],1)],1)])])],1)}}],null,!1,1619320695)})],1)],1)],1):t._e()],1):t._e(),"wx"==this.comeFrom?i("a-tab-pane",{key:"5",attrs:{tab:"视频"}},[5==t.tabKey?i("a-row",{directives:[{name:"perfect-scroll-bar",rawName:"v-perfect-scroll-bar",value:t.perfectScrollBarOptions,expression:"perfectScrollBarOptions"}],ref:"quick_box",staticClass:"demo-infinite-container",on:{"ps-scroll-down":t.handleInfiniteOnLoad}},[i("a-col",{attrs:{span:24}},[i("a-spin",{attrs:{tip:"Loading...",size:"large",spinning:t.isLoading}},[i("a-list",{staticClass:"quick-text-box",attrs:{dataSource:t.list},scopedSlots:t._u([{key:"renderItem",fn:function(e,a){return i("a-list-item",{staticClass:"quick-box"},[i("a-list-item-meta",[i("div",{attrs:{slot:"title"},slot:"title"},[t._v(t._s(e.file_name)+"\n\t\t\t\t\t\t\t\t\t\t\t"),i("div",{staticClass:"quick-btn"},[i("a-tooltip",{attrs:{placement:"top"}},[i("template",{slot:"title"},[i("span",[t._v("发送")])]),i("span",{staticClass:"quick-btn-item",on:{click:function(i){return t.quickSend(5,e,e)}}},[i("a-icon",{attrs:{type:"right-square"}})],1)],2),i("a-popconfirm",{attrs:{placement:"leftTop",title:"确定删除？"},on:{confirm:function(i){return t.quickDel(e.id)}}},[i("a-icon",{staticStyle:{color:"red"},attrs:{slot:"icon",type:"question-circle-o"},slot:"icon"}),i("span",{staticClass:"quick-btn-item"},[i("a-tooltip",{attrs:{placement:"top"}},[i("template",{slot:"title"},[i("span",[t._v("删除")])]),i("a-icon",{attrs:{"data-key":e.id,type:"delete",alt:""}})],2)],1)],1)],1)])])],1)}}],null,!1,2189920150)})],1)],1)],1):t._e()],1):t._e(),"wx"==this.comeFrom?i("a-tab-pane",{key:"6",attrs:{tab:"小程序"}},[6==t.tabKey?i("a-row",{directives:[{name:"perfect-scroll-bar",rawName:"v-perfect-scroll-bar",value:t.perfectScrollBarOptions,expression:"perfectScrollBarOptions"}],ref:"quick_box",staticClass:"demo-infinite-container",on:{"ps-scroll-down":t.handleInfiniteOnLoad}},[i("a-col",{attrs:{span:24}},[i("a-spin",{attrs:{tip:"Loading...",size:"large",spinning:t.isLoading}},[i("a-list",{staticClass:"quick-text-box",attrs:{dataSource:t.list},scopedSlots:t._u([{key:"renderItem",fn:function(e,a){return i("a-list-item",{staticClass:"quick-box"},[i("a-list-item-meta",[i("div",{attrs:{slot:"title"},slot:"title"},[t._v(t._s(e.file_name)+"\n\t\t\t\t\t\t\t\t\t\t\t"),i("div",{staticClass:"quick-btn"},[i("a-tooltip",{attrs:{placement:"top"}},[i("template",{slot:"title"},[i("span",[t._v("发送")])]),i("span",{staticClass:"quick-btn-item",on:{click:function(i){return t.quickSend(6,e,e)}}},[i("a-icon",{attrs:{type:"right-square"}})],1)],2),i("a-popconfirm",{attrs:{placement:"leftTop",title:"确定删除？"},on:{confirm:function(i){return t.quickDel(e.id)}}},[i("a-icon",{staticStyle:{color:"red"},attrs:{slot:"icon",type:"question-circle-o"},slot:"icon"}),i("span",{staticClass:"quick-btn-item"},[i("a-tooltip",{attrs:{placement:"top"}},[i("template",{slot:"title"},[i("span",[t._v("删除")])]),i("a-icon",{attrs:{"data-key":e.id,type:"delete",alt:""}})],2)],1)],1)],1)]),e.local_path?i("a-avatar",{attrs:{slot:"avatar",shape:"square",size:"large",src:t.commonUrl+e.local_path,alt:""},slot:"avatar"}):t._e()],1)],1)}}],null,!1,3980860097)})],1)],1)],1):t._e()],1):t._e()],1)],1),i("a-drawer",{attrs:{title:(-1==t.modifyIndex?"添加":"编辑")+"文本回复",placement:"right",closable:!1,visible:t.showQuickBox,getContainer:t.container},on:{close:t.onClose}},[i("a-form",{style:{marginTop:"10px"},attrs:{"label-col":{span:6},"wrapper-col":{span:15}}},[i("a-form-item",{attrs:{label:"选择分组"}},[i("a-tree-select",{attrs:{dropdownStyle:{maxHeight:"150px",overflow:"auto"},treeData:t.addGroupList,placeholder:"请选择"},model:{value:t.quickSelectGroupId,callback:function(e){t.quickSelectGroupId=e},expression:"quickSelectGroupId"}})],1),i("a-form-item",{attrs:{label:"文本标题"}},[i("a-input",{attrs:{placeholder:"请填写文本标题，仅供备注，不会发送给客户",maxLength:50},model:{value:t.textTitle,callback:function(e){t.textTitle=e},expression:"textTitle"}},[i("span",{attrs:{slot:"suffix"},slot:"suffix"},[t._v("\n\t\t\t\t\t\t\t\t\t\t\t"+t._s(null===t.textTitle?0:t.textTitle.length)+" / 50\n\t\t\t\t\t\t\t\t\t\t")])])],1),i("a-form-item",{attrs:{label:"文本内容"}},[i("div",{staticStyle:{margin:"5px 0px"}},[i("medium-editor",{ref:"medium_editor",staticClass:"content-editable",attrs:{text:t.textValue,options:t.options,"custom-tag":"div"},on:{editorCreated:t.editorCreated,edit:t.changeContentInput}})],1),i("div",{staticStyle:{padding:"0 15px"}},[t._v("\n\t\t\t\t\t点击插入：\n\t\t\t\t\t"),i("a-popover",{attrs:{trigger:"click",destroyTooltipOnHide:!0},model:{value:t.emojiShow,callback:function(e){t.emojiShow=e},expression:"emojiShow"}},[i("VEmojiPicker",{attrs:{slot:"content",showSearch:!1},on:{select:t.onSelectEmoji},slot:"content"}),i("a-icon",{staticClass:"icon-btn",staticStyle:{cursor:"pointer"},attrs:{type:"smile"}})],1),i("div",{staticStyle:{float:"right"}},[t._v("\n\t\t\t\t\t\t"+t._s(t.wordNum)+"/"+t._s(t.wordLimit)+"\n\t\t\t\t\t")])],1)])],1),i("div",{style:{position:"absolute",bottom:"64px",width:"100%",borderTop:"1px solid #e8e8e8",padding:"10px 16px",textAlign:"right",left:0,background:"#FFF",borderRadius:"0 0 4px 4px"}},[i("a-button",{style:{marginRight:"8px"},on:{click:t.onClose}},[t._v("\n\t\t\t\t取消\n\t\t\t")]),i("a-button",{attrs:{loading:t.quickLoading,type:"primary"},on:{click:t.uploadText}},[t._v("\n\t\t\t\t确定\n\t\t\t")])],1)],1)],1)},g=[],b=i("75fc"),x=(i("c5f6"),i("487a")),v=i.n(x),y=i("bc3a"),k=i.n(y),_=k.a.CancelToken,w=_.source(),q={directives:{infiniteScroll:v.a},name:"contentMsg",props:{sendDisplay:{type:Number,default:1},comeFrom:{type:String,default:"wx"},container:{type:HTMLElement|String,default:"body"}},components:{"medium-editor":f.a,VEmojiPicker:l["a"]},data:function(){return{selectGroupId:"",groupList:[],addGroupList:[],isLoading:!0,material_type:"6",file_type:6,news_type:1,comefrom:2,groupId:[],list:[],gData:[],id:"",name:"",length:0,data:[],page:1,pageSize:15,tabKey:1,commonUrl:this.$store.state.commonUrl,showQuickBox:!1,mediumEditor:[],options:{toolbar:!1,placeholder:{text:"请输入……",hideOnClick:!0}},wordNum:0,wordLimit:1e3,textTitle:"",textValue:"",textContent:"",emojiShow:!1,attachmentId:0,quickSelectGroupId:"",quickLoading:!1,modifyIndex:-1,noGroupId:-1,perfectScrollBarOptions:{suppressScrollX:!0,minScrollbarLength:15}}},methods:{getGroupList:function(){var t=Object(c["a"])(regeneratorRuntime.mark((function t(){var e,i,a,n,s=this,o=arguments;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=o.length>0&&void 0!==o[0]?o[0]:1,t.next=3,this.axios.post("attachment/group",{uid:localStorage.getItem("uid")});case 3:i=t.sent,a=i.data,0!=a.error?this.$message.error(a.error_msg):(this.groupList=a.data.group,this.addGroupList=[],this.groupList.map((function(t){2!=t.is_not_group&&s.addGroupList.push(t),1==t.is_not_group&&(s.noGroupId=t.key)})),n={key:"",value:"",parent_id:null,title:"所有",sort:0,is_not_group:0,scopedSlots:{title:"custom"},children:[]},this.groupList.splice(0,0,n),this.selectGroupId||(this.selectGroupId=this.groupList[0].key,this.groupId=[]),this.id?this.getChildrenId(this.id,e):(this.id=this.groupList[0].key,this.getMaterial(1)),this.gData=a.data.group);case 6:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),oncanplay:function(t){var e=t.target.dataset.index;this.$set(this.playTime,e,Math.ceil(t.target.duration))},changeTab:function(t){this.material_type=t,this.tabKey=t,1==t?(this.material_type=6,this.file_type=6):2==t?(this.material_type=1,this.file_type=2):3==t?(this.material_type=4,this.file_type=1):4==t?(this.material_type=2,this.file_type=3):5==t?(this.material_type=3,this.file_type=4):6==t&&(this.material_type=7,this.file_type=7),this.list=[],this.page=1,this.getMaterial()},quickSend:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";this.$emit("replyMsg",t,e,i)},onSelect:function(t){t.length>0&&this.id!=t?(this.id=t,this.getChildrenId(this.id)):""==t&&(this.id="",this.groupId=[],this.getMaterial(1))},onSearch:function(t){this.name=t,this.getMaterial()},getChildrenId:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=[];i.push(t);var a=function t(e,i,a){e.forEach((function(e){return e.key===i?a(e):e.children?t(e.children,i,a):void 0}))},n=function t(e,i,a){return e.forEach((function(e,n,s){if(i.push(e.key),e.children)return t(e.children,i,a)})),a(i)};a(this.gData,t,(function(t){t.children&&n(t.children,i,(function(t){}))})),this.groupId=i,this.getMaterial(e)},getMaterial:function(){var t=Object(c["a"])(regeneratorRuntime.mark((function t(){var e,i,a,n=this,s=arguments;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=s.length>0&&void 0!==s[0]?s[0]:1,this.isLoading=!0,t.next=4,this.axios.post("attachment/list",{uid:localStorage.getItem("uid"),file_type:this.file_type,comefrom:this.comefrom,news_type:this.news_type,group_id:this.groupId,page:e,pageSize:this.pageSize,name:this.name});case 4:i=t.sent,a=i.data,0!=a.error?(this.isLoading=!1,this.$message.error(a.error_msg)):4==this.material_type?this.$nextTick((function(){var t=[].concat(Object(b["a"])(a.data.attachment.single.list),Object(b["a"])(a.data.attachment.double.list));n.list=1==e?t:n.list.concat(t),n.length=a.data.count,n.isLoading=!1,n.loading=!1})):1!=this.material_type&&2!=this.material_type&&3!=this.material_type&&7!=this.material_type&&5!=this.material_type&&6!=this.material_type||this.$nextTick((function(){n.list=1==e?a.data.attachment:n.list.concat(a.data.attachment),n.length=a.data.count,n.isLoading=!1,n.loading=!1}));case 7:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),handleInfiniteOnLoad:function(){var t=this.$refs.quick_box.$el._ps_.reach.y,e=this.list;"end"===t&&(e.length>=this.length?(this.$message.destroy(),this.$message.warning("没有更多了"),this.isLoading=!1):(this.isLoading=!0,this.page++,this.selectGroupId?this.getChildrenId(this.selectGroupId,this.page):this.getMaterial(this.page)))},quickDel:function(){var t=Object(c["a"])(regeneratorRuntime.mark((function t(e){var i,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.axios.post("attachment/delete",{uid:localStorage.getItem("uid"),attachment_id:e});case 2:i=t.sent,a=i.data,0!=a.error?(this.isLoading=!1,this.$message.error(a.error_msg)):(this.$message.success("删除成功"),this.isLoading=!1,this.getGroupList());case 5:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),addQuick:function(){this.quickLoading=!1,this.modifyIndex=-1,this.attachmentId=0,this.quickSelectGroupId=this.noGroupId,this.textTitle="",this.textValue="",this.textContent="",this.wordNum=0,this.showQuickBox=!0},openQuickModify:function(t,e){this.quickLoading=!1,this.modifyIndex=e,this.attachmentId=t,this.quickSelectGroupId=this.list[e].group_id,this.textTitle=this.list[e].file_name,this.textValue=this.list[e].content.replace(/\n/g,"<br>"),this.textContent=this.list[e].content,this.wordNum=this.textContent.replace(/\n/g,"").replace(/(<\/?a.*?>)/g,"").length,this.showQuickBox=!0},onClose:function(){this.quickLoading=!1,this.modifyIndex=-1,this.attachmentId=0,this.quickSelectGroupId="",this.textTitle="",this.textValue="",this.textContent="",this.wordNum=0,this.showQuickBox=!1},uploadText:function(){return this.quickLoading=!0,""==this.textTitle?(this.quickLoading=!1,this.$message.warning("请输入文本标题！"),!1):this.textContent?void this.uploadMaterial():(this.quickLoading=!1,this.$message.warning("请输入文本内容！"),!1)},uploadMaterial:function(){var t=Object(c["a"])(regeneratorRuntime.mark((function t(){var e,i,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.quickLoading=!0,e={uid:localStorage.getItem("uid"),sub_id:localStorage.getItem("sub_id"),isMasterAccount:localStorage.getItem("isMasterAccount"),file_type:6,group_id:this.quickSelectGroupId,content:this.textContent,text_title:this.textTitle,attachment_id:this.attachmentId},t.next=4,this.axios.post("attachment/add",e,{cancelToken:w.token});case 4:i=t.sent,a=i.data,0==a.error?(this.quickLoading=!1,-1==this.modifyIndex?this.getGroupList():(this.list[this.modifyIndex].group_id=this.quickSelectGroupId,this.list[this.modifyIndex].file_name=this.textTitle,this.list[this.modifyIndex].content=this.textContent,this.list[this.modifyIndex].group_id=this.quickSelectGroupId),this.onClose()):(this.$message.error(a.error_msg),this.quickLoading=!1);case 7:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),insertHTMLCommand:function(t,e){if("undefined"===typeof self.lastNode||!self.lastNode.classList.contains("content-editable"))return!1;var i,a,n,s,o,r,c=["insertHTML",!1,e];if(i=self.lastRange,a=i.commonAncestorContainer,f.a.MediumEditor.util.isMediumEditorElement(a)&&!a.firstChild)i.selectNode(a.appendChild(t.createTextNode("")));else if(3===a.nodeType&&0===i.startOffset&&i.endOffset===a.nodeValue.length||3!==a.nodeType&&a.innerHTML===i.toString()){while(!f.a.MediumEditor.util.isMediumEditorElement(a)&&a.parentNode&&1===a.parentNode.childNodes.length&&!f.a.MediumEditor.util.isMediumEditorElement(a.parentNode))a=a.parentNode;i.selectNode(a)}i.deleteContents(),n=t.createElement("div"),n.innerHTML=e,s=t.createDocumentFragment();while(n.firstChild)o=n.firstChild,r=s.appendChild(o);i.insertNode(s),r&&(i=i.cloneRange(),i.setStartAfter(r),i.collapse(!0),f.a.MediumEditor.selection.selectRange(t,i)),t.execCommand.callListeners&&t.execCommand.callListeners(c,!0),this.wordNum=self.lastNode.textContent.length,this.wordNum<=this.wordLimit&&(this.textValue=self.lastNode.innerHTML.replace(/<pre([^>]*)>/g,"<p>").replace(/<\/pre>/g,"</p>").replace(/<font([^>]*)>/g,"<p>").replace(/<\/font>/g,"</p>").replace(/<div([^>]*)>/g,"<p>").replace(/<\/div>/g,"</p>"),this.textContent=self.lastNode.innerHTML.replace(/<br([^>]*)>/g,"\n").replace(/&nbsp;<span contenteditable="false" class="ant-tag ant-tag-orange">粉丝昵称<\/span>&nbsp;/g,"{nickname}").replace(/([^<p>]+)<p([^>]*)>/g,"$1\n").replace(/<p([^>]*)>/g,"").replace(/<\/p>/g,"\n").replace(/<span([^>]*)>/g,"").replace(/<\/span>/g,"").replace(/&nbsp;/g," ").replace(/<div([^>]*)>/g,"\n").replace(/<\/div>/g,"").replace(/miniprogramappid/g,"miniprogram-appid").replace(/miniprogrampath/g,"miniprogram-path").replace(/&amp;/g,"&"));var l={currentTarget:this.mediumEditor.origElements};this.mediumEditor.events.updateInput(l.currentTarget,l)},invlideText:function(){var t=this.$refs.medium_editor.$el,e=this.global.getRangeInfo(t,this.wordLimit),i=e.startNode,a=e.startOffset,n=e.endNode,s=e.endOffset;if("undefined"!==typeof i.nodeValue){var o=document.createRange();o.setStart(i,a),o.setEnd(n,s),o.deleteContents(),this.textValue=self.lastNode.innerHTML.replace(/<pre([^>]*)>/g,"<p>").replace(/<\/pre>/g,"</p>").replace(/<font([^>]*)>/g,"<p>").replace(/<\/font>/g,"</p>").replace(/<div([^>]*)>/g,"<p>").replace(/<\/div>/g,"</p>"),this.textContent=self.lastNode.innerHTML.replace(/<p([^>]*)>/g,"").replace(/<\/p>/g,"\n").replace(/&nbsp;<span contenteditable="false" class="ant-tag ant-tag-orange">粉丝昵称<\/span>&nbsp;/g,"{nickname}").replace(/<br([^>]*)>/g,"\n").replace(/<span([^>]*)>/g,"").replace(/<\/span>/g,"").replace(/&nbsp;/g," ").replace(/miniprogramappid/g,"miniprogram-appid").replace(/miniprogrampath/g,"miniprogram-path").replace(/&amp;/g,"&"),this.wordNum=this.wordLimit}var r=document.getElementsByClassName("content-editable")[0];r.scrollTop=r.clientHeight},editableFocus:function(t){""!==t.target.innerHTML&&"<p></p>"!=t.target.innerHTML&&"<br>"!=t.target.innerHTML||(t.target.innerHTML="<p><br/></p>")},editableKeydown:function(t){this.wordNum>=this.wordLimit&&8!=t.keyCode&&37!=t.keyCode&&38!=t.keyCode&&39!=t.keyCode&&40!=t.keyCode&&(65!=t.keyCode||!t.metaKey&&!t.ctrlKey)&&t.preventDefault(),86==t.keyCode&&(t.metaKey||t.ctrlKey)&&console.log(123)},editablePaste:function(t,e){this.invlideText()},editorCreated:function(t){this.mediumEditor=t,this.mediumEditor.subscribe("focus",this.editableFocus),this.mediumEditor.subscribe("editableKeydown",this.editableKeydown),this.mediumEditor.subscribe("editablePaste",this.editablePaste),delete self.lastRange,delete self.lastNode},changeContentInput:function(t){""!=t.api.origElements.innerHTML&&"<br>"!=t.api.origElements.innerHTML||(t.api.origElements.innerHTML="<p><br/></p>");var e=/href="(?![a-zA-z]+:\/\/)[^"]*/g;e.test(t.api.origElements.innerHTML)&&(this.$message.error("请填写正确的链接"),this.mediumEditor.execAction("unlink")),"undefined"!==typeof self.lastNode&&(this.wordNum=self.lastNode.textContent.length,this.wordNum<=this.wordLimit?(this.textContent=self.lastNode.innerHTML.replace(/<p([^>]*)>/g,"").replace(/<\/p>/g,"\n").replace(/&nbsp;<span contenteditable="false" class="ant-tag ant-tag-orange">粉丝昵称<\/span>&nbsp;/g,"{nickname}").replace(/<br([^>]*)>/g,"\n").replace(/<span([^>]*)>/g,"").replace(/<\/span>/g,"").replace(/&nbsp;/g," ").replace(/miniprogramappid/g,"miniprogram-appid").replace(/miniprogrampath/g,"miniprogram-path").replace(/&amp;/g,"&"),this.textValue=t.api.origElements.innerHTML.replace(/<pre([^>]*)>/g,"<p>").replace(/<\/pre>/g,"</p>").replace(/<font([^>]*)>/g,"<p>").replace(/<\/font>/g,"</p>").replace(/<div([^>]*)>/g,"<p>").replace(/<\/div>/g,"</p>")):this.invlideText())},toggleDialogEmoji:function(){this.emojiShow=!this.emojiShow},onSelectEmoji:function(t){var e=this.mediumEditor.options.ownerDocument;this.wordLimit-this.wordNum>=2&&this.insertHTMLCommand(e,t.data),this.toggleDialogEmoji()},getCursor:function(t){var e=getSelection();if(e){var i=e.anchorNode,a=!1;while(i&&i.nodeType!=i.DOCUMENT_NODE){var n=i.classList;if(n&&n.contains("content-editable")){a=!0;break}i=i.parentNode}a&&(t.lastRange=e.getRangeAt(0),t.lastNode=i)}}},mounted:function(){this.getGroupList()},created:function(){var t=this;document.addEventListener("selectionchange",(function(){t.getCursor(self)}))}},C=q,I=(i("9335"),i("2877")),M=Object(I["a"])(C,m,g,!1,null,"405498d4",null),T=M.exports,L=i("2afe"),E=i("0c63"),S=E["a"].createFromIconfontCN({scriptUrl:"//at.alicdn.com/t/font_8d5l8fzk5b87iudi.js"}),K={name:"fansMsg",components:{VEmojiPicker:l["a"],"content-msg":T,"medium-editor":f.a,"choose-msg":L["a"],IconFont:S},inject:["changeLoading","changeType"],data:function(){var t=localStorage.getItem("wxNum")?localStorage.getItem("wxNum"):"";return{wxId:"",fansId:0,msgFrom:2,msgType:1,chooseMsgType:2,searchKey:"search",changeKey:"change",msgTitleKey:"msgTitle",activeKey:t,subActiveKey:"1-1",searchValue:[],msgTabList:{},wxLocation:[],fansLocation:[],msgContent:[],timeDivider:[],fansUnread:[],chooseMsg:!1,chooseNeedConfirm:!1,profileShow:!1,remarkVisible:!1,valueInput:[],mediumEditor:{},quickMediumEditor:{},quickModifyMediumEditor:[],quickText:{html:"",text:""},quickModifyText:[],options:{toolbar:!1,placeholder:{text:"请输入……",hideOnClick:!0}},scrollData:[],emojiShow:!1,quickEmojiShow:!1,quickModifyEmojiShow:[],modifyEmojiIndex:0,loading:!1,noMore:[],newMsg:[],perfectScrollBarOptions:{suppressScrollX:!0,minScrollbarLength:15},sending:!1,previewVisible:!1,previewInfo:[],previewRelation:[],playAudio:{isPlay:!1,key:0,dom:"",interval:""},playVideo:{isPlay:!1,key:-1,dom:""},quickList:{},quickModify:[],quickVisible:!1,quickCheck:0,quickName:"",confirmLoading2:!1,inputValue:"",tagsList:[],tagCheckValue:[],visible:!1,disabled:[],tagsNum:0,tagValue:[],hasTags:[],hasTagsValue:[],remarkLength:0,quickModifyWordNum:[],wordNum:0,emptyVisible:!1,emptyVisible2:!1,clearGroup:!0}},methods:{showModal:function(){this.getTags(),this.visible=!0},getTags:function(){var t=Object(c["a"])(regeneratorRuntime.mark((function t(){var e,i,a,n,s,o,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.axios.post("tags/tags-get-all",{wx_id:localStorage.getItem("wxNum"),type:1});case 2:if(e=t.sent,i=e.data,0!=i.error)this.$message.error(i.error_msg);else if(this.tagsList=i.data.info,this.disabled=[],20-this.tagCheckValue.length<=0)for(a=0;a<this.tagsList.length;a++)n=!0,this.disabled.push(n);else for(s=0;s<this.tagsList.length;s++)for(o=!1,this.disabled.push(o),r=0;r<this.tagCheckValue.length;r++)this.tagCheckValue[r]==this.tagsList[s].key&&(this.disabled[s]=!0);case 5:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),getHasTags:function(){var t=Object(c["a"])(regeneratorRuntime.mark((function t(){var e,i,a,n=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=[],e.push(this.fansId),this.tagCheckValue=[],t.next=5,this.axios.post("fans/fans-tags",{fans_ids:e});case 5:i=t.sent,a=i.data,0!=a.error?this.$message.error(a.error_msg):(a.data.map((function(t){n.tagCheckValue.push(t.tags_id),n.hasTags.push(t.tags_id),n.hasTagsValue.push(t.tag_name)})),this.tagsNum=this.tagCheckValue.length);case 8:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),handleOk:function(){this.tagCheckValue.length==this.tagsNum?this.$message.warning("请选择要打的标签"):(this.confirmLoading2=!0,this.addTagsMore())},addTagsMore:function(){var t=Object(c["a"])(regeneratorRuntime.mark((function t(){var e,i,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=[],e.push(this.fansId),t.next=4,this.axios.post("fans/give-user-tags",{wx_id:localStorage.getItem("wxNum"),tag_ids:this.tagCheckValue,fans_ids:e,type:0});case 4:i=t.sent,a=i.data,0!=a.error?(this.$message.error(a.error_msg),this.confirmLoading2=!1):(this.$message.success(a.error_msg),this.visible=!1,this.confirmLoading2=!1,this.hasTagsValue=[],this.getHasTags());case 7:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),cancelVisible:function(){this.visible=!1,this.inputValue="",this.tagValue=[],this.tagCheckValue=[],this.hasTagsValue=[],this.getHasTags()},onChange2:function(t){for(var e=[],i=[],a=0;a<this.hasTags.length;a++)e[this.hasTags[a]]=Object(r["a"])(this.hasTags[a]);for(a=0;a<t.length;a++){var n=Object(r["a"])(t[a]);e[t[a]]?e[t[a]].indexOf(n)<0&&i.push(t[a]):i.push(t[a])}if(20-t.length<=0){this.disabled=[];for(var s=0;s<this.tagsList.length;s++){var o=!0;this.disabled.push(o);for(var c=0;c<i.length;c++)this.tagsList[s].key==i[c]&&(this.disabled[s]=!1)}}else{this.disabled=[];for(var l=0;l<this.tagsList.length;l++){var d=!1;this.disabled.push(d);for(var h=0;h<this.hasTags.length;h++)this.tagsList[l].key==this.hasTags[h]&&(this.disabled[l]=!0)}}},onSearch:function(t){if(this.tagsList.length>=100)return this.$message.warning("标签数量已超过上限100个，无法创建"),!1;if(""==t)return this.$message.warning("不能为空"),!1;this.tagValue=[];for(var e=0;e<t.split(" ").length;e++){if(t.split(" ")[e].length>6)return this.$message.error("每个标签最多6个字"),this.inputValue="",!1;t.split(" ")[e].length>0&&this.tagValue.push(t.split(" ")[e])}if(this.tagsList.length+this.tagValue.length>100){var i=100-this.tagsList.length;return this.$message.error("抱歉，您当前最多只能新建"+i+"个标签，请重新提交"),this.inputValue="",this.tagValue=[],!1}this.addTags()},addTags:function(){var t=Object(c["a"])(regeneratorRuntime.mark((function t(){var e,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.axios.post("tags/tags-create",{wx_id:localStorage.getItem("wxNum"),tag_name:this.tagValue});case 2:e=t.sent,i=e.data,0!=i.error?"标签名非法，请注意不能和其他标签重名"==i.error_msg?this.$message.error("该标签名称与微信标签重复，请手动同步微信标签即可。"):this.$message.error(i.error_msg):(this.$message.success("新建标签成功"),this.getTags2());case 5:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),getTags2:function(){var t=Object(c["a"])(regeneratorRuntime.mark((function t(){var e,i,a,n,s,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.axios.post("tags/tags-get-all",{wx_id:localStorage.getItem("wxNum"),type:1});case 2:if(e=t.sent,i=e.data,0!=i.error)this.$message.error(i.error_msg);else{if(this.tagsList=i.data.info,20-this.tagCheckValue.length<=0)for(a=0;a<this.tagValue.length;a++)n=!0,this.disabled.unshift(n);else for(s=0;s<this.tagValue.length;s++)o=!1,this.disabled.unshift(o);this.inputValue="",this.tagValue=[]}case 5:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),changeStore:function(){var t=this;this.$store.state.wxArr.map((function(e){t.activeKey==e.wx_id&&(t.$store.dispatch("changeWxNum",e.wx_id),t.$store.commit("changeAuthorizerType",e.authorizer_type),t.$store.commit("changeWxNickName",e.nick_name))}))},setKeyGetContent:function(t){var e=!1;this.activeKey!=t.id&&(this.activeKey=t.id,e=!0),this.wxId=t.id,t.fans_list.length>0?(this.subActiveKey=t.fans_list[0].openid,this.fansId=t.fans_list[0].fans_id,this.getMsgContent(this.subActiveKey)):this.subActiveKey="empty",e&&this.changeStore()},initData:function(t){var e=this;if(t.length>0){this.msgTabList=t;var i=t[0];this.msgTabList.map((function(t,a){e.wxLocation[t.id]=a,t.id==e.activeKey&&(i=t)})),this.setKeyGetContent(i),this.bindFansRelation(),this.quickCheck=t[0].id,this.quickName=t[0].name}},initMsgContent:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a="";switch(e){case 1:a=this.initTextMsgContent(t);break;case 2:a=this.initImgMsgContent(t,i);break;case 3:a=this.initVoiceMsgContent(t,i);break;case 5:a=this.initNewsMsgContent(t);break;case 4:case 7:a=this.initVideoMsgContent(t,i);break;case 8:a=this.initLocationMsgContent(t);break;case 9:a=this.initLinkMsgContent(t);break;case 10:a=this.initMiniMsgContent(t);break;default:break}return a},initTextMsgContent:function(t){var e=this;return-1!==t.search(/[\/\[\]\(\)\|\$\*\?\+\-\_]/g)&&d["a"].wechatEmojiKey.map((function(i){var a=new RegExp(e.utils.addslashes(i),"g"),n=d["a"].getEmojiUrl(i);t=t.replace(a,'<img src="'+n+'" alt="'+i+'" height="21" width="21"/>')})),t.replace(/[\r\n|\n]/g,"<br/>")},initMiniMsgContent:function(t){return'<span class="wrong-notice">【'+t+"】小程序已发送</span>"},getNewSize:function(t,e){var i=160,a=160,n=840,s=600,o=i,r=a,c=n,l=s;return parseInt(e)>parseInt(t)?(parseInt(e)>a?o=a*t/e:(o=t,r=e),parseInt(e)>s?c=s*t/e:(c=t,l=e),c>n&&(c=n,l=n*e/t)):(parseInt(t)>i?r=i*e/t:(o=t,r=e),parseInt(t)>c?l=n*e/t:(c=t,l=e),l>s&&(c=s*t/e,l=s)),{newWidth:o,newHeight:r,newPreviewWidth:c,newPreviewHeight:l}},initImgMsgContent:function(t,e){var i='<span class="wrong-notice">【图片无法显示】</span>';if("undefined"!==typeof t.local_url||"undefined"!==typeof t.local_path){var a="undefined"!==typeof t.local_url?t.local_url:this.$store.state.commonUrl+t.local_path,n=this.getNewSize(t.media_width,t.media_height),s=n.newWidth,o=n.newHeight,r=n.newPreviewWidth,c=n.newPreviewHeight;i='<img class="media-content" src="'+a+'" alt="'+t.file_name+'" height="'+o+'" width="'+s+'" data-key="'+e+'" />',t.preview_width=r,t.preview_height=c,this.initPreviewInfo(e,t,"IMG")}return i},initVoiceMsgContent:function(t,e){var i='<span class="wrong-notice">【音频无法加载】</span>';if("undefined"!==typeof t.local_url){var a=1,n=0;n="undefined"===typeof t.media_duration.length?Object.keys(t.media_duration).length:t.media_duration.length,n>0&&(a=t.media_duration[2],0!==parseInt(t.media_duration[1])&&(a=60*parseInt(t.media_duration[1])+parseInt(t.media_duration[2])));var s=240,o=75,r=a*s/60;r=r<o?o:r,i='<div class="voice-box voice-btn" style="width: '+r+'px;" data-key="'+e+'"><div class="voice-symbol voice-btn" data-key="'+e+'"><span id="voiceCircleFirst'+e+'" class="voice-circle first voice-btn" data-key="'+e+'"></span><span id="voiceCircleSecond'+e+'"  class="voice-circle second voice-btn" data-key="'+e+'"></span><span id="voiceCircleThird'+e+'"  class="voice-circle third voice-btn" data-key="'+e+'"></span></div>',i+='<span class="voice-time voice-btn" data-key="'+e+'">'+a+"″</span></div>",i+='<audio id="voiceAudio'+e+'" preload src="'+t.local_url+'" style="display: none; "/>'}return i},initVideoMsgContent:function(t,e){var i='<span class="wrong-notice">【视频无法加载】</span>';if("undefined"!==typeof t.local_url){var a=this.getNewSize(t.media_width,t.media_height),n=a.newWidth,s=a.newHeight,o=a.newPreviewWidth,r=a.newPreviewHeight;i='<video class="media-content" src="'+t.local_url+'" preload width="'+n+'" height="'+s+'" data-key="'+e+'"></video><div class="media-play-btn"><span class="play-btn" data-key="'+e+'"></span></div>';var c=0;c="undefined"===typeof t.media_duration.length?Object.keys(t.media_duration).length:t.media_duration.length,4===c&&(i+='<span class="voice-duration" data-key="'+e+'">'+t.media_duration[1]+":"+t.media_duration[2]+"</span>"),t.preview_width=o,t.preview_height=r,this.initPreviewInfo(e,t,"VIDEO")}return i},initLocationMsgContent:function(t){var e='<span class="wrong-notice"><i aria-label="图标: environment" class="anticon anticon-environment" style="color: green; vertical-align: middle; "><svg viewBox="64 64 896 896" data-icon="environment" width="1em" height="1em" fill="currentColor" aria-hidden="true" focusable="false" class=""><path d="M854.6 289.1a362.49 362.49 0 0 0-79.9-115.7 370.83 370.83 0 0 0-118.2-77.8C610.7 76.6 562.1 67 512 67c-50.1 0-98.7 9.6-144.5 28.5-44.3 18.3-84 44.5-118.2 77.8A363.6 363.6 0 0 0 169.4 289c-19.5 45-29.4 92.8-29.4 142 0 70.6 16.9 140.9 50.1 208.7 26.7 54.5 64 107.6 111 158.1 80.3 86.2 164.5 138.9 188.4 153a43.9 43.9 0 0 0 22.4 6.1c7.8 0 15.5-2 22.4-6.1 23.9-14.1 108.1-66.8 188.4-153 47-50.4 84.3-103.6 111-158.1C867.1 572 884 501.8 884 431.1c0-49.2-9.9-97-29.4-142zM512 880.2c-65.9-41.9-300-207.8-300-449.1 0-77.9 31.1-151.1 87.6-206.3C356.3 169.5 431.7 139 512 139s155.7 30.5 212.4 85.9C780.9 280 812 353.2 812 431.1c0 241.3-234.1 407.2-300 449.1zm0-617.2c-97.2 0-176 78.8-176 176s78.8 176 176 176 176-78.8 176-176-78.8-176-176-176zm79.2 255.2A111.6 111.6 0 0 1 512 551c-29.9 0-58-11.7-79.2-32.8A111.6 111.6 0 0 1 400 439c0-29.9 11.7-58 32.8-79.2C454 338.6 482.1 327 512 327c29.9 0 58 11.6 79.2 32.8C612.4 381 624 409.1 624 439c0 29.9-11.6 58-32.8 79.2z"></path></svg></i> <strong style="vertical-align: middle; ">位置信息：</strong><i style="vertical-align: middle; ">'+t.label+"</i></span>";return e},initLinkMsgContent:function(t){var e='<a class="link-box" href="'+t.url+'" target="_blank"><p class="link-title"><i aria-label="图标: link" class="anticon anticon-link" style="color: #1890FF; vertical-align: middle;"><svg viewBox="64 64 896 896" data-icon="link" width="1em" height="1em" fill="currentColor" aria-hidden="true" focusable="false" class=""><path d="M574 665.4a8.03 8.03 0 0 0-11.3 0L446.5 781.6c-53.8 53.8-144.6 59.5-204 0-59.5-59.5-53.8-150.2 0-204l116.2-116.2c3.1-3.1 3.1-8.2 0-11.3l-39.8-39.8a8.03 8.03 0 0 0-11.3 0L191.4 526.5c-84.6 84.6-84.6 221.5 0 306s221.5 84.6 306 0l116.2-116.2c3.1-3.1 3.1-8.2 0-11.3L574 665.4zm258.6-474c-84.6-84.6-221.5-84.6-306 0L410.3 307.6a8.03 8.03 0 0 0 0 11.3l39.7 39.7c3.1 3.1 8.2 3.1 11.3 0l116.2-116.2c53.8-53.8 144.6-59.5 204 0 59.5 59.5 53.8 150.2 0 204L665.3 562.6a8.03 8.03 0 0 0 0 11.3l39.8 39.8c3.1 3.1 8.2 3.1 11.3 0l116.2-116.2c84.5-84.6 84.5-221.5 0-306.1zM610.1 372.3a8.03 8.03 0 0 0-11.3 0L372.3 598.7a8.03 8.03 0 0 0 0 11.3l39.6 39.6c3.1 3.1 8.2 3.1 11.3 0l226.4-226.4c3.1-3.1 3.1-8.2 0-11.3l-39.5-39.6z"></path></svg></i> <span style="vertical-align: middle; ">'+t.title+'</span></p><p class="link-description">'+t.description+"</p></a>";return e},initPreviewInfo:function(t,e,i){var a={};switch(i){case"IMG":a={previewType:"IMG",previewUrl:"undefined"!==typeof e.local_url?e.local_url:this.$store.state.commonUrl+e.local_path,previewAlt:e.file_name,previewWidth:e.preview_width,previewHeight:e.preview_height};break;case"VIDEO":a={previewType:"VIDEO",previewUrl:e.local_url,previewAlt:e.file_name,previewWidth:e.preview_width,previewHeight:e.preview_height};break;default:break}"undefined"===typeof this.previewInfo[this.activeKey+"_"+this.fansId]&&(this.previewInfo[this.activeKey+"_"+this.fansId]=[]),"undefined"===typeof this.previewRelation[this.activeKey+"_"+this.fansId]&&(this.previewRelation[this.activeKey+"_"+this.fansId]=[]),"undefined"===typeof this.previewRelation[this.activeKey+"_"+this.fansId][t]?(this.previewInfo[this.activeKey+"_"+this.fansId].push(a),this.previewRelation[this.activeKey+"_"+this.fansId][t]=this.previewInfo[this.activeKey+"_"+this.fansId].length-1):this.previewInfo[this.activeKey+"_"+this.fansId][this.previewRelation[this.activeKey+"_"+this.fansId][t]]=a},initNewsMsgContent:function(t){if("undefined"===typeof t.article)return'<span class="wrong-notice">【图文无法显示】</span>';var e=t.article[0],i='<a class="new-box" href="'+e.content_source_url+'" target="_blank"><img class="new-cover" src="'+this.$store.state.commonUrl+e.thumb_info.local_path+'"><div class="new-info-box"><p class="new-title">'+e.title+'</p><p class="new-digest">'+e.digest+"</p></div></a>";return i},addComment:function(t){(t.target.classList.contains("media-content")||t.target.classList.contains("play-btn")||t.target.classList.contains("voice-duration"))&&this.preview(t),t.target.classList.contains("voice-btn")&&this.voicePlayOrStop(t)},preview:function(t){var e=this;this.previewVisible=!0,this.$nextTick((function(){e.$refs.previewCarousel.goTo(e.previewRelation[e.activeKey+"_"+e.fansId][t.target.dataset.key],!1)}))},voicePlayOrStop:function(t){var e=this;clearInterval(this.playAudio.interval);var i=t.target.dataset.key,a=document.getElementById("voiceAudio"+i),n=document.getElementById("voiceCircleFirst"+i),s=document.getElementById("voiceCircleSecond"+i),o=document.getElementById("voiceCircleThird"+i);this.playAudio.isPlay?(this.playAudio.dom.pause(),this.playAudio.key==i?(this.playAudio.isPlay=!1,this.playAudio.key=0,this.playAudio.dom="",n.setAttribute("style",""),s.setAttribute("style",""),o.setAttribute("style","")):(document.getElementById("voiceCircleFirst"+this.playAudio.key).setAttribute("style",""),document.getElementById("voiceCircleSecond"+this.playAudio.key).setAttribute("style",""),document.getElementById("voiceCircleThird"+this.playAudio.key).setAttribute("style",""),this.playAudio.key=i,this.playAudio.dom=a,n.setAttribute("style","animation: voiceRun1 3s linear infinite;"),s.setAttribute("style","animation: voiceRun2 3s linear infinite;"),o.setAttribute("style","animation: voiceRun3 3s linear infinite;"),a.currentTime=0,a.play())):(this.playAudio.isPlay=!0,this.playAudio.key=i,this.playAudio.dom=a,n.setAttribute("style","animation: voiceRun1 3s linear infinite;"),s.setAttribute("style","animation: voiceRun2 3s linear infinite;"),o.setAttribute("style","animation: voiceRun3 3s linear infinite;"),a.currentTime=0,a.play()),this.playAudio.isPlay&&(this.playAudio.interval=setInterval((function(){e.playAudio.dom.ended&&(document.getElementById("voiceCircleFirst"+e.playAudio.key).setAttribute("style",""),document.getElementById("voiceCircleSecond"+e.playAudio.key).setAttribute("style",""),document.getElementById("voiceCircleThird"+e.playAudio.key).setAttribute("style",""),e.playAudio.isPlay=!1,e.playAudio.key=0,e.playAudio.dom="",clearInterval(e.playAudio.interval))}),10))},videoPlay:function(t){var e=t.target,i=e.dataset.key;this.playVideo.isPlay=!0,this.playVideo.key=i,this.playVideo.dom=e},videoPause:function(t){this.playVideo.isPlay=!1,this.playVideo.key=-1,this.playVideo.dom=""},videoStop:function(){this.playVideo.isPlay&&(this.playVideo.dom.currentTime=0,this.playVideo.dom.pause())},handleCancel:function(){this.previewVisible=!1,this.videoStop()},tabText:function(t,e,i){if(this.subActiveKey!=i&&"undefined"!==typeof this.valueInput[t+"_"+e]&&0!=this.valueInput[t+"_"+e].reply.length&&"\n"!=this.valueInput[t+"_"+e].reply)return'<span style="color: red">[草稿]</span>'+this.valueInput[t+"_"+e].reply;var a="",n=-1;if("undefined"===typeof this.msgContent[t+"_"+e]||0===this.msgContent[t+"_"+e].length?(a=this.msgTabList[this.fansLocation[t+"_"+e].wx_index].fans_list[this.fansLocation[t+"_"+e].fans_index].last_content,n=a.length-1):(a=this.msgContent[t+"_"+e],n=a.length-1),n<0)return"";var s="";switch(a[n].type){case 1:s=this.initMsgContent(a[n].content,a[n].type);break;case 2:s="【图片】";break;case 3:s="【音频】";break;case 4:s="【视频】";break;case 5:s="【图文】";break;case 6:s="【音乐】";break;case 7:s="【视频】";break;case 8:s="【位置】";break;case 9:s="【链接】";break;default:break}return s},getMsgContent:function(){"undefined"==typeof this.valueInput[this.activeKey+"_"+this.fansId]&&this.$set(this.valueInput,this.activeKey+"_"+this.fansId,{input:"",reply:"",item:""}),"undefined"==typeof this.noMore[this.activeKey+"_"+this.fansId]&&this.$set(this.noMore,this.activeKey+"_"+this.fansId,!1),"undefined"==typeof this.newMsg[this.activeKey+"_"+this.fansId]&&this.$set(this.newMsg,this.activeKey+"_"+this.fansId,!1),"undefined"==typeof this.msgContent[this.activeKey+"_"+this.fansId]?(this.$set(this.msgContent,this.activeKey+"_"+this.fansId,[]),this.getMsgContentList()):(this.changeScrollTop(!1,this.scrollData[this.activeKey+"_"+this.fansId].position),this.setNewMsg())},getCursor:function(t){var e=getSelection();if(e){var i=e.anchorNode,a=!1;while(i&&i.nodeType!=i.DOCUMENT_NODE){var n=i.classList;if(n&&(n.contains("send-textarea")||n.contains("quick-textarea")||n.contains("quick-modify-textarea"))){a=!0;break}i=i.parentNode}a&&(t.lastRange=e.getRangeAt(0),t.lastNode=i)}},insertHTMLCommand:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(0==i){if("undefined"===typeof self.lastNode||!self.lastNode.classList.contains("send-textarea")||self.lastNode.dataset.key!=this.fansId)return!1}else if(1==i){if("undefined"===typeof self.lastNode||!self.lastNode.classList.contains("quick-textarea"))return!1}else{if(2!=i)return!1;if("undefined"===typeof self.lastNode||!self.lastNode.classList.contains("quick-modify-textarea"))return!1}var a,n,s,o,r,c,l=["insertHTML",!1,e];if(a=self.lastRange,n=a.commonAncestorContainer,f.a.MediumEditor.util.isMediumEditorElement(n)&&!n.firstChild)a.selectNode(n.appendChild(t.createTextNode("")));else if(3===n.nodeType&&0===a.startOffset&&a.endOffset===n.nodeValue.length||3!==n.nodeType&&n.innerHTML===a.toString()){while(!f.a.MediumEditor.util.isMediumEditorElement(n)&&n.parentNode&&1===n.parentNode.childNodes.length&&!f.a.MediumEditor.util.isMediumEditorElement(n.parentNode))n=n.parentNode;a.selectNode(n)}a.deleteContents(),s=t.createElement("div"),s.innerHTML=e,o=t.createDocumentFragment();while(s.firstChild)r=s.firstChild,c=o.appendChild(r);switch(a.insertNode(o),c&&(a=a.cloneRange(),a.setStartAfter(c),a.collapse(!0),f.a.MediumEditor.selection.selectRange(t,a)),t.execCommand.callListeners&&t.execCommand.callListeners(l,!0),i){case 0:var d={currentTarget:this.mediumEditor.origElements};this.mediumEditor.events.updateInput(d.currentTarget,d);break;case 1:var h={currentTarget:this.quickMediumEditor.origElements};this.quickMediumEditor.events.updateInput(h.currentTarget,h),this.wordNum=self.lastNode.textContent.length;break;case 2:var p={currentTarget:this.quickModifyMediumEditor[self.lastNode.dataset.key].origElements};this.quickModifyMediumEditor[self.lastNode.dataset.key].events.updateInput(p.currentTarget,p);break;default:break}},editorCreated:function(t){this.mediumEditor=t,this.mediumEditor.subscribe("editableKeydownEnter",this.editableKeydownEnter),this.mediumEditor.subscribe("focus",this.editableFocus),delete self.lastRange,delete self.lastNode},editableFocus:function(t){""===t.target.innerHTML&&(t.target.innerHTML="<p><br/></p>")},editableKeydownEnter:function(t){t.shiftKey&&13===t.keyCode||13===t.keyCode&&(t.preventDefault(),this.sending||0==this.valueInput[this.activeKey+"_"+this.fansId].reply.length||"\n"==this.valueInput[this.activeKey+"_"+this.fansId].reply||(this.msgType=1,this.reply()))},changeContentInput:function(t){this.valueInput[t.api.origElements.dataset.activeKey+"_"+t.api.origElements.dataset.key].input=t.api.origElements.innerHTML,this.valueInput[t.api.origElements.dataset.activeKey+"_"+t.api.origElements.dataset.key].reply=t.api.origElements.innerText},initTimeDivider:function(t,e){this.timeDivider[t+"_"+e]={time:[],show:[]}},formatSubTime:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"YYYY-MM-DD HH:mm:ss";return p.a.unix(t).format(e)},formatMsgTime:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"YYYY-MM-DD HH:mm";return e&&this.utils.isToday(t)?p()(t).format("HH:mm"):p()(t).format(i)},showTimeDivider:function(t,e,i,a){return a=this.formatMsgTime(a),!(this.timeDivider[t+"_"+e].time.indexOf(a)>-1&&this.timeDivider[t+"_"+e].show[a]!==i)&&(-1===this.timeDivider[t+"_"+e].time.indexOf(a)&&(this.timeDivider[t+"_"+e].time.push(a),this.timeDivider[t+"_"+e].show[a]=i),!0)},handleInfiniteOnLoad:function(){var t=this.$refs.chat_content[0].$el._ps_.reach.y;"end"===t&&this.$set(this.newMsg,this.activeKey+"_"+this.fansId,!1)},handlePullOnLoad:function(){var t=this.$refs.chat_content[0].$el._ps_.reach.y;"start"!==t||this.loading||this.noMore[this.activeKey+"_"+this.fansId]||(this.loading=!0,this.getMsgContentList(this.scrollData[this.activeKey+"_"+this.fansId].first_id))},changeScrollPosition:function(t){this.scrollData[this.activeKey+"_"+this.fansId].position=t.srcElement.scrollTop},newMsgChange:function(){this.changeScrollTop(!0),this.msgRead()},changeScrollTop:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.$nextTick((function(){if(null===i){var a=0!=t.scrollData[t.activeKey+"_"+t.fansId].old_first_id?t.scrollData[t.activeKey+"_"+t.fansId].old_first_id:t.scrollData[t.activeKey+"_"+t.fansId].last_id;e&&(a=t.scrollData[t.activeKey+"_"+t.fansId].last_id),"undefined"!==typeof t.$refs[a]&&(i=t.$refs[a][0].offsetTop,a!==t.scrollData[t.activeKey+"_"+t.fansId].last_id&&(i-=24,1===t.$refs[a][0].childElementCount&&(i-=56)))}"undefined"!==typeof t.$refs.chat_content&&"undefined"!==typeof t.$refs.chat_content[0]&&(t.$refs.chat_content[0].$el.scrollTop=i,t.scrollData[t.activeKey+"_"+t.fansId].position=i)}))},setNewMsg:function(){var t=this;this.$nextTick((function(){var e=t.scrollData[t.activeKey+"_"+t.fansId].last_id,i=t.$refs[e][0].offsetTop,a=t.$refs[e][0].offsetHeight,n=t.$refs.chat_content[0].$el.clientHeight;if(i+a>n&&t.scrollData[t.activeKey+"_"+t.fansId].position!=i){var s=0,o=!1;if("undefined"!=typeof t.fansUnread[t.activeKey+"_"+t.fansId]&&0!=t.fansUnread[t.activeKey+"_"+t.fansId]){o=!0;for(var r=1;r<=t.fansUnread[t.activeKey+"_"+t.fansId];r++){var c=t.msgContent[t.activeKey+"_"+t.fansId].length,l=t.msgContent[t.activeKey+"_"+t.fansId][c-r].id;s+=t.$refs[l][0].offsetHeight}}else s=a;t.$refs.chat_content[0].$el.scrollTop+n==t.$refs.chat_content[0].$el.scrollHeight||t.$refs.chat_content[0].$el.scrollTop+n+s==t.$refs.chat_content[0].$el.scrollHeight?(t.changeScrollTop(!0),o&&t.msgRead()):o&&t.$set(t.newMsg,t.activeKey+"_"+t.fansId,!0)}else t.$set(t.newMsg,t.activeKey+"_"+t.fansId,!1),t.msgRead()}))},bindFansRelation:function(){var t=this;t.msgTabList.map((function(e,i){t.wxLocation[e.id]=i,e.fans_list.map((function(a,n){t.fansLocation[e.id+"_"+a.fans_id]={wx_index:i,fans_index:n}}))}))},filterOption:function(t,e){return e.componentOptions.children[0].text.toLowerCase().indexOf(t.toLowerCase())>=0},modifyRemark:function(t){this.remarkVisible=!this.remarkVisible,this.remarkLength=t},toggleProfile:function(){this.profileShow=!this.profileShow,this.hasTagsValue=[],this.profileShow&&this.getHasTags()},callback:function(t){console.log(t)},tabClick:function(t){var e=[this.searchKey,this.changeKey];if("undefined"!==typeof t&&-1==e.indexOf(t)&&t!=this.activeKey){if(this.activeKey=t,this.wxId=t,this.quickCheck=t,this.quickName=this.msgTabList[this.wxLocation[t]].name,this.profileShow=!1,this.searchValue!=this.quickCheck&&(this.searchValue=[]),this.msgTabList[this.wxLocation[t]].fans_list.length>0){var i=this.msgTabList[this.wxLocation[t]].fans_list[0].openid,a=this.msgTabList[this.wxLocation[t]].fans_list[0].fans_id;this.subTabClick(i,a),"undefined"!==typeof this.scrollData[a]&&this.changeScrollTop(!1,this.scrollData[a].position)}else this.subActiveKey="empty";this.changeStore()}},subTabClick:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;t!=this.msgTitleKey&&"empty"!=t&&t!=this.subActiveKey&&(this.subActiveKey=t,this.fansId=null===e?this.$refs[t][0].$attrs["data-fans-id"]:e,this.profileShow=!1,this.getMsgContent())},openQuick:function(){var t=this;this.quickVisible=!0,this.$nextTick((function(){t.$refs.quick_editor.$el.focus()}))},quickEditorCreated:function(t){this.quickMediumEditor=t,this.quickMediumEditor.subscribe("editableKeydownEnter",this.quickEditableKeydownEnter),this.quickMediumEditor.subscribe("focus",this.editableFocus),this.quickMediumEditor.subscribe("editablePaste",this.quickEditablePaste),delete self.lastRange,delete self.lastNode},quickEditableKeydownEnter:function(t){t.shiftKey&&13===t.keyCode||13===t.keyCode&&t.preventDefault()},quickEditablePaste:function(){this.quickInvlideText()},quickInvlideText:function(){var t=this.$refs.quick_editor.$el,e=this.global.getRangeInfo(t,500),i=e.startNode,a=e.startOffset,n=e.endNode,s=e.endOffset;if("undefined"!==typeof i.nodeValue){var o=document.createRange();o.setStart(i,a),o.setEnd(n,s),o.deleteContents(),this.quickText.html=self.lastNode.innerHTML.replace(/<pre([^>]*)>/g,"<p>").replace(/<\/pre>/g,"</p>").replace(/<font([^>]*)>/g,"<p>").replace(/<\/font>/g,"</p>").replace(/<div([^>]*)>/g,"<p>").replace(/<\/div>/g,"</p>"),this.quickText.text=self.lastNode.innerText,this.wordNum=500}},quickChangeContentInput:function(t){this.wordNum=self.lastNode.textContent.length,this.wordNum<=500?(this.quickText.html=t.api.origElements.innerHTML,this.quickText.text=t.api.origElements.innerText):this.quickInvlideText()},handleQuickCancel:function(){this.quickVisible=!1,this.quickText={html:"",text:""}},handleQuickOk:function(){this.quickSave(),this.handleQuickCancel()},toggleQuickDialogEmoji:function(){this.quickEmojiShow=!this.quickEmojiShow},onQuickSelectEmoji:function(t){var e=this.quickMediumEditor.options.ownerDocument;this.wordNum<=498&&this.insertHTMLCommand(e,t.data,1),this.toggleQuickDialogEmoji()},quickChange:function(t){this.quickCheck=t.target.value},quickInput:function(t){var e="quickContent"+t;this.valueInput[this.activeKey+"_"+this.fansId].input=this.$refs[e][0].innerHTML,this.valueInput[this.activeKey+"_"+this.fansId].reply=this.$refs[e][0].innerText},quickSend:function(t){this.quickInput(t),this.sending||(this.msgType=1,this.reply())},openQuickModify:function(t,e,i){var a={html:"<p>"+this.quickList[e][i].content.replace(/[\r|\n]/g,"<br/>")+"</p>",text:this.quickList[e][i].content};this.$set(this.quickModifyText,t,a),this.$set(this.quickModify,t,!0)},quickModifyEditorCreated:function(t){this.quickModifyMediumEditor[t.origElements.dataset.key]=t,this.quickModifyMediumEditor[t.origElements.dataset.key].subscribe("editableKeydownEnter",this.quickEditableKeydownEnter),this.quickModifyMediumEditor[t.origElements.dataset.key].subscribe("focus",this.editableFocus),this.quickModifyMediumEditor[t.origElements.dataset.key].subscribe("editablePaste",this.quickModifyEditablePaste(t.origElements.dataset.key)),delete self.lastRange,delete self.lastNode},quickModifyEditablePaste:function(t){this.quickModifyInvlideText(t)},quickModifyInvlideText:function(t){var e=this.quickModifyMediumEditor[t].origElements,i=this.global.getRangeInfo(e,500),a=i.startNode,n=i.startOffset,s=i.endNode,o=i.endOffset;if("undefined"!==typeof a.nodeValue){var r=document.createRange();r.setStart(a,n),r.setEnd(s,o),r.deleteContents(),this.quickModifyText[t].html=self.lastNode.innerHTML.replace(/<pre([^>]*)>/g,"<p>").replace(/<\/pre>/g,"</p>").replace(/<font([^>]*)>/g,"<p>").replace(/<\/font>/g,"</p>").replace(/<div([^>]*)>/g,"<p>").replace(/<\/div>/g,"</p>"),this.quickModifyText[t].text=self.lastNode.innerText,this.quickModifyWordNum[t]=500}},quickModifyChangeContentInput:function(t){var e=t.api.origElements.dataset.key;"\n"==t.api.origElements.innerText&&(t.api.origElements.innerText=""),this.$set(this.quickModifyWordNum,e,t.api.origElements.innerText.length),this.quickModifyWordNum[e]<=500?(this.quickModifyText[e].html=t.api.origElements.innerHTML,this.quickModifyText[e].text=t.api.origElements.innerText):this.quickModifyInvlideText(e)},modifyEmojiClick:function(t){this.modifyEmojiIndex=t},toggleQuickModifyDialogEmoji:function(){this.$set(this.quickModifyEmojiShow,this.modifyEmojiIndex,!this.quickModifyEmojiShow[this.modifyEmojiIndex])},onQuickModifySelectEmoji:function(t){var e=this.quickModifyMediumEditor[this.modifyEmojiIndex].options.ownerDocument;this.quickModifyWordNum[self.lastNode.dataset.key]<=498&&this.insertHTMLCommand(e,t.data,2),this.toggleQuickModifyDialogEmoji()},cancelQuickModify:function(t){this.$set(this.quickModify,t,!1),this.quickText={html:"",text:""}},quickModifySave:function(t,e,i){this.quickText={html:this.quickModifyText[t].html,text:this.quickModifyText[t].text},"public"==e&&(e=0),this.quickSave(t,e,i),this.cancelQuickModify(t)},toggleDialogEmoji:function(){this.emojiShow=!this.emojiShow},onSelectEmoji:function(t){var e=this.mediumEditor.options.ownerDocument;this.insertHTMLCommand(e,t.data),this.toggleDialogEmoji()},selectMaterial:function(t){this.chooseMsgType=t,2==this.chooseMsgType?this.chooseNeedConfirm=!0:this.chooseNeedConfirm=!1,this.chooseMsg=!0},modalVisibleChange:function(t,e,i,a){"ok"==t&&("undefined"!==typeof a.artList&&a.artList.length>0?this.msgType=5:this.msgType=2,this.valueInput[this.activeKey+"_"+this.fansId].reply=i,this.valueInput[this.activeKey+"_"+this.fansId].item=a,this.getOneMaterial(i)),this.chooseMsg=!1},getOneMaterial:function(){var t=Object(c["a"])(regeneratorRuntime.mark((function t(e){var i,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.axios.post("material/upload-media",{wx_id:localStorage.getItem("wxNum"),attachment_id:e});case 2:i=t.sent,a=i.data,0==a.error?this.reply():this.$message.error(a.error_msg);case 5:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),replySuccess:function(t,e){var i;switch(e.msg_type){case 1:i=e.msg_content.text;break;case 2:var a=this.valueInput[this.activeKey+"_"+this.fansId].item;i={local_path:a.local_path,media_width:a.file_width,media_height:a.file_height};break;case 3:var n=this.valueInput[this.activeKey+"_"+this.fansId].local_url,s=this.valueInput[this.activeKey+"_"+this.fansId].media_duration;i={local_url:n,media_duration:s};break;case 4:var o=this.valueInput[this.activeKey+"_"+this.fansId].local_url,r=this.valueInput[this.activeKey+"_"+this.fansId].media_duration;i={local_url:o,media_duration:r};break;case 5:var c=this.valueInput[this.activeKey+"_"+this.fansId].item.artList[0];i={article:[{thumb_info:{local_path:c.local_path},title:c.title,digest:c.digest,content_source_url:c.content_source_url}]};break;case 10:i=this.valueInput[this.activeKey+"_"+this.fansId].item.file_name;break;default:break}this.msgType=1,this.$set(this.valueInput,this.activeKey+"_"+this.fansId,{input:"",reply:"",item:""});var l={id:t,from:{type:2,data:{alias:"",user_name:this.msgTabList[this.fansLocation[this.activeKey+"_"+this.fansId].wx_index].id,nick_name:this.msgTabList[this.fansLocation[this.activeKey+"_"+this.fansId].wx_index].name,head_img:this.msgTabList[this.fansLocation[this.activeKey+"_"+this.fansId].wx_index].avatar}},to:{type:1,data:{fans_id:this.fansId,openid:this.msgTabList[this.fansLocation[this.activeKey+"_"+this.fansId].wx_index].fans_list[this.fansLocation[this.activeKey+"_"+this.fansId].fans_index].openid,nickname:this.msgTabList[this.fansLocation[this.activeKey+"_"+this.fansId].wx_index].fans_list[this.fansLocation[this.activeKey+"_"+this.fansId].fans_index].nickname,remark:this.msgTabList[this.fansLocation[this.activeKey+"_"+this.fansId].wx_index].fans_list[this.fansLocation[this.activeKey+"_"+this.fansId].fans_index].remark,headerimg:this.msgTabList[this.fansLocation[this.activeKey+"_"+this.fansId].wx_index].fans_list[this.fansLocation[this.activeKey+"_"+this.fansId].fans_index].headerimg}},content:i,type:e.msg_type,create_time:p()().format("YYYY-MM-DD HH:mm:ss")};if(this.scrollData[this.activeKey+"_"+this.fansId].last_id=t,this.msgContent[this.activeKey+"_"+this.fansId].push(l),0!=this.fansLocation[this.activeKey+"_"+this.fansId].fans_index){var d=this.msgTabList[this.fansLocation[this.activeKey+"_"+this.fansId].wx_index].fans_list[this.fansLocation[this.activeKey+"_"+this.fansId].fans_index];this.msgTabList[this.fansLocation[this.activeKey+"_"+this.fansId].wx_index].fans_list.splice(this.fansLocation[this.activeKey+"_"+this.fansId].fans_index,1),this.msgTabList[this.fansLocation[this.activeKey+"_"+this.fansId].wx_index].fans_list.unshift(d),this.bindFansRelation()}this.initTimeDivider(this.activeKey,this.fansId),this.changeScrollTop(!0)},websocketOnMessage:function(t){if("undefined"!=typeof t.type&&"chat"==t.type&&(!t.hasOwnProperty("msg_type")||"wx"==t.msg_type)){var e=!1;"undefined"==typeof this.msgContent[t.wx_id+"_"+t.from]&&(this.msgContent[t.wx_id+"_"+t.from]=[],e=!0),"undefined"==typeof this.scrollData[t.wx_id+"_"+t.from]&&(this.scrollData[t.wx_id+"_"+t.from]={first_id:0,old_first_id:0,last_id:0,position:null});var i=this.msgContent[t.wx_id+"_"+t.from],a=i.concat(t.msg_list);if(this.$set(this.msgContent,t.wx_id+"_"+t.from,a),this.initTimeDivider(t.wx_id,t.from),this.scrollData[t.wx_id+"_"+t.from].last_id=t.msg_list.id,0==this.scrollData[t.wx_id+"_"+t.from].first_id&&(this.scrollData[t.wx_id+"_"+t.from].first_id=this.scrollData[t.wx_id+"_"+t.from].last_id),e&&this.getMsgContentList(t.msg_list.id,14,!1,t.wx_id,t.from),"undefined"==typeof this.fansLocation[t.wx_id+"_"+t.from])this.msgTabList[this.wxLocation[t.wx_id]].fans_list.unshift(t.fans_info),this.bindFansRelation();else if(0!=this.fansLocation[t.wx_id+"_"+t.from].fans_index){var n=this.msgTabList[this.fansLocation[t.wx_id+"_"+t.from].wx_index].fans_list[this.fansLocation[t.wx_id+"_"+t.from].fans_index];this.msgTabList[this.fansLocation[t.wx_id+"_"+t.from].wx_index].fans_list.splice(this.fansLocation[t.wx_id+"_"+t.from].fans_index,1),this.msgTabList[this.fansLocation[t.wx_id+"_"+t.from].wx_index].fans_list.unshift(n),this.bindFansRelation(),this.changeScrollTop(!1,this.scrollData[this.activeKey+"_"+this.fansId].position)}if(this.subActiveKey!=t.fans_info.openid){var s=0;s="undefined"!=typeof this.fansUnread[t.wx_id+"_"+t.from]?++this.fansUnread[t.wx_id+"_"+t.from]:1,this.$set(this.fansUnread,t.wx_id+"_"+t.from,s)}else this.setNewMsg()}},remarkChange:function(t){this.remarkLength=t.target.value.length},getMsgList:function(){var t=Object(c["a"])(regeneratorRuntime.mark((function t(){var e,i,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=1==localStorage.getItem("isMasterAccount")?{}:{sub_id:localStorage.getItem("sub_id")},t.next=3,this.axios.post("fans/msg-list",e);case 3:i=t.sent,a=i.data,0==a.error?(this.changeLoading(),this.initData(a.data)):(this.changeLoading(),this.$message.error(a.error_msg));case 6:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),getQuickList:function(){var t=Object(c["a"])(regeneratorRuntime.mark((function t(){var e,i,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=this,e.emptyVisible=!1,e.emptyVisible2=!1,t.next=5,this.axios.post("quick-msg/get");case 5:i=t.sent,a=i.data,0==a.error?(a.data.map((function(t){var i=t.wx_id.length>0?t.wx_id:"public";"undefined"===typeof e.quickList[i]&&(e.quickList[i]=[]),e.quickList[i].push(t),e.$set(e.quickModify,t.id,!1);var a={html:t.content.replace(/[\r|\n]/g,"<br/>"),text:t.content};e.$set(e.quickModifyText,t.id,a),e.$set(e.quickModifyEmojiShow,t.id,!1)})),"undefined"!=typeof e.quickList[e.activeKey]&&0!=e.quickList[e.activeKey].length||(e.emptyVisible=!0),"undefined"!=typeof e.quickList.public&&0!=e.quickList.public.length||(e.emptyVisible2=!0),e.$forceUpdate()):e.$message.error(a.error_msg);case 8:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),getMsgContentList:function(){var t=Object(c["a"])(regeneratorRuntime.mark((function t(){var e,i,a,n,s,o,r,c,l,d,h,p,u,f,m,g,b,x=arguments;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=x.length>0&&void 0!==x[0]?x[0]:0,i=x.length>1&&void 0!==x[1]?x[1]:15,a=!(x.length>2&&void 0!==x[2])||x[2],n=x.length>3&&void 0!==x[3]?x[3]:null,s=x.length>4&&void 0!==x[4]?x[4]:null,null===n&&(n=this.wxId),null===s&&(s=this.fansId),o={wx_id:n,fans_id:s,last_id:e,msg_size:i},t.next=10,this.axios.post("fans-msg/get-msg-list",o);case 10:r=t.sent,c=r.data,0==c.error?(c.data.msg_list.length>0?(l=c.data.fans_id,d=c.data.wx_id,h=this.msgContent[d+"_"+l],p=h.length>0?h[0].id:0,u=this,c.data.msg_list.map((function(t){u.msgContent[d+"_"+l].unshift(t)})),this.initTimeDivider(d,l),f=this.msgContent[d+"_"+l][0].id,m=this.msgContent[d+"_"+l].length-1,g=this.msgContent[d+"_"+l][m].id,0!=c.data.unread&&(this.subActiveKey!=this.msgTabList[this.fansLocation[d+"_"+l].wx_index].fans_list[this.fansLocation[d+"_"+l].fans_index].openid?this.$set(this.fansUnread,d+"_"+l,c.data.unread):this.msgRead(l)),b={first_id:f,old_first_id:p,last_id:g,position:null},this.$set(this.scrollData,d+"_"+l,b)):a=!1,c.data.msg_list.length<i&&this.$set(this.noMore,c.data.wx_id+"_"+c.data.fans_id,!0),a&&this.changeScrollTop()):this.$message.error("获取失败"),this.loading=!1,this.changeLoading();case 15:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),replyMsg:function(){var t=Object(c["a"])(regeneratorRuntime.mark((function t(e,i,a){var n,s,o,r=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:""==i&&this.$message.error("回复内容不可为空！"),n={wx_id:this.wxId,fans_id:this.fansId,from:this.msgFrom,msg_content:{},msg_type:this.msgType},t.t0=e,t.next=1===t.t0?5:2===t.t0?7:3===t.t0?10:13;break;case 5:return n.msg_content={text:i},t.abrupt("break",13);case 7:return s=this,this.$confirm({title:"确定选择这个吗？",content:function(t){return t("div",[t("img",{attrs:{src:r.$store.state.commonUrl+i},style:{maxWidth:"100%",maxHeight:"300px",marginTop:"10px"}})])},onOk:function(){s.msgType=2,s.valueInput[s.activeKey+"_"+s.fansId].reply=a.id,s.valueInput[s.activeKey+"_"+s.fansId].item=a,s.uploadMedia({wx_id:localStorage.getItem("wxNum"),attachment_id:a.id},a.id)},onCancel:function(){s.showVisible=!0},class:"choose-confirm-modal"}),t.abrupt("break",13);case 10:return o=this,this.$confirm({title:"确定选择这个吗？",content:function(t){return t("div",[t("img",{attrs:{src:r.$store.state.commonUrl+i},style:{maxWidth:"100%",maxHeight:"300px",marginTop:"10px"}})])},onOk:function(){o.msgType=5,o.valueInput[o.activeKey+"_"+o.fansId].item=a,o.uploadMedia({wx_id:localStorage.getItem("wxNum"),attachment_id:a.id},a.id)},onCancel:function(){o.showVisible=!0},class:"choose-confirm-modal"}),t.abrupt("break",13);case 13:if(1==e&&this.sendMsg(n),4==e&&(this.msgType=3,this.valueInput[this.activeKey+"_"+this.fansId].item=a,this.uploadMedia({wx_id:localStorage.getItem("wxNum"),attachment_id:a.id},a.id)),5==e&&(this.msgType=4,this.uploadMedia({wx_id:localStorage.getItem("wxNum"),attachment_id:a.id},a.id)),6!=e){t.next=23;break}if(this.msgType=10,null!=a.attach_id){t.next=21;break}return this.$message.error("当前小程序不合法，请重新选择"),t.abrupt("return",!1);case 21:this.valueInput[this.activeKey+"_"+this.fansId].item=a,this.uploadMedia({wx_id:localStorage.getItem("wxNum"),attachment_id:a.attach_id},a.attach_id,a.appId,a.appPath,a.file_name);case 23:case"end":return t.stop()}}),t,this)})));function e(e,i,a){return t.apply(this,arguments)}return e}(),sendMsg:function(){var t=Object(c["a"])(regeneratorRuntime.mark((function t(e){var i,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.axios.post("fans-msg/send",e);case 2:i=t.sent,a=i.data,0==a.error&&a.data.status?this.replySuccess(a.data.status,e):(this.msgType=1,this.$message.error(a.data.error_info.errmsg));case 5:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),uploadMedia:function(){var t=Object(c["a"])(regeneratorRuntime.mark((function t(e,i){var a,n,s,o,r,c,l=arguments;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=l.length>2&&void 0!==l[2]?l[2]:0,n=l.length>3&&void 0!==l[3]?l[3]:"",s=l.length>4&&void 0!==l[4]?l[4]:"",t.next=5,this.axios.post("material/upload-media",e);case 5:o=t.sent,r=o.data,0==r.error?(c={wx_id:this.wxId,fans_id:this.fansId,from:this.msgFrom,msg_content:{},msg_type:this.msgType},3!=this.msgType&&4!=this.msgType||(this.valueInput[this.activeKey+"_"+this.fansId].local_url=r.data[i].local_url,this.valueInput[this.activeKey+"_"+this.fansId].media_duration=r.data[i].media_duration),10==this.msgType?c.msg_content={media_id:r.data[i].id,appid:a,pagepath:n,title:s}:c.msg_content={media_id:r.data[i].id},this.sendMsg(c)):this.$message.error(r.error_msg);case 8:case"end":return t.stop()}}),t,this)})));function e(e,i){return t.apply(this,arguments)}return e}(),reply:function(){var t=Object(c["a"])(regeneratorRuntime.mark((function t(){var e,i,a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(this.sending=!0,e="",e="number"===typeof this.valueInput[this.activeKey+"_"+this.fansId].reply?this.valueInput[this.activeKey+"_"+this.fansId].reply:this.valueInput[this.activeKey+"_"+this.fansId].reply.replace(/(^\s*)|(\s*$)/g,""),0!=e.length&&/[^\n]/g.test(e)){t.next=7;break}this.$message.error("回复内容不可为空！"),t.next=20;break;case 7:i={wx_id:this.wxId,fans_id:this.fansId,from:this.msgFrom,msg_content:{},msg_type:this.msgType},t.t0=this.msgType,t.next=1===t.t0?11:2===t.t0?13:3===t.t0?13:4===t.t0?13:5===t.t0?13:6===t.t0?13:15;break;case 11:return i.msg_content={text:this.valueInput[this.activeKey+"_"+this.fansId].reply},t.abrupt("break",15);case 13:return i.msg_content={media_id:this.valueInput[this.activeKey+"_"+this.fansId].reply},t.abrupt("break",15);case 15:return t.next=17,this.axios.post("fans-msg/send",i);case 17:a=t.sent,n=a.data,0==n.error&&n.data.status?this.replySuccess(n.data.status,i):(this.msgType=1,this.$message.error(n.data.error_info.errmsg));case 20:this.sending=!1;case 21:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),msgRead:function(){var t=Object(c["a"])(regeneratorRuntime.mark((function t(){var e,i,a,n=arguments;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=n.length>0&&void 0!==n[0]?n[0]:null,null===e&&(e=this.fansId),t.next=4,this.axios.post("fans-msg/msg-read",{fans_id:e,wx_id:localStorage.getItem("wxNum")});case 4:i=t.sent,a=i.data,0==a.error&&a.data.status&&this.$set(this.fansUnread,this.activeKey+"_"+this.fansId,0);case 7:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),quickSave:function(){var t=Object(c["a"])(regeneratorRuntime.mark((function t(){var e,i,a,n,s,o,c,l,d,h,p=arguments;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e=p.length>0&&void 0!==p[0]?p[0]:null,i=p.length>1&&void 0!==p[1]?p[1]:null,a=p.length>2&&void 0!==p[2]?p[2]:null,n=this.quickText.text.replace(/(^\s*)|(\s*$)/g,""),0!=n.length&&/[^\n]/g.test(n)){t.next=8;break}this.$message.error("快捷回复内容不可为空！"),t.next=14;break;case 8:return s={q_id:e,content:this.quickText.text,q_wx_id:"object"===Object(r["a"])(i)?this.quickCheck:i,wx_id:localStorage.getItem("wxNum")},t.next=11,this.axios.post("quick-msg/save",s);case 11:o=t.sent,c=o.data,0==c.error?(l=c.data.wx_id.length>0?c.data.wx_id:"public",d=[c.data],"undefined"!==typeof this.quickList[l]&&(d=this.quickList[l],"object"===Object(r["a"])(a)?d.unshift(c.data):d[a]=c.data,delete this.quickList[l]),this.$set(this.quickList,l,d),this.$set(this.quickModify,c.data.id,!1),h={html:c.data.content.replace(/[\r|\n]/g,"<br/>"),text:c.data.content},this.$set(this.quickModifyText,c.data.id,h),this.$set(this.quickModifyEmojiShow,c.data.id,!1)):this.$message.error(c.error_msg);case 14:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),quickDel:function(){var t=Object(c["a"])(regeneratorRuntime.mark((function t(e,i,a){var n,s,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=this,t.next=3,this.axios.post("quick-msg/delete",{q_id:e});case 3:s=t.sent,o=s.data,0==o.error?(n.quickList=[],n.getQuickList(),n.$message.success("删除成功！")):n.$message.error(o.error_msg);case 6:case"end":return t.stop()}}),t,this)})));function e(e,i,a){return t.apply(this,arguments)}return e}(),setRemark:function(){var t=Object(c["a"])(regeneratorRuntime.mark((function t(e,i){var a,n,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(this.msgTabList[i.target.dataset.wk].fans_list[i.target.dataset.k].remark==e){t.next=9;break}return a={fans_id:i.target.dataset.fid,remark:e,wx_id:localStorage.getItem("wxNum")},t.next=4,this.axios.post("fans/set-remark",a);case 4:n=t.sent,s=n.data,0==s.error?(this.msgTabList[i.target.dataset.wk].fans_list[i.target.dataset.k].remark=e,this.remarkVisible=!this.remarkVisible):this.$message.error(s.error_msg),t.next=11;break;case 9:return this.remarkVisible=!this.remarkVisible,t.abrupt("return",!1);case 11:case"end":return t.stop()}}),t,this)})));function e(e,i){return t.apply(this,arguments)}return e}()},created:function(){this.getMsgList(),this.getQuickList(),this.ws.setCallback(this.websocketOnMessage);var t=this;document.addEventListener("selectionchange",(function(){t.getCursor(self)}));document.getElementsByClassName("quick-info-box")}},N=K,$=(i("1662"),i("ca61"),Object(I["a"])(N,s,o,!1,null,"3d4f042e",null)),V=$.exports,j=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{ref:"miniMsgBox",style:{height:"100% !important"}},[i("a-tabs",{style:{height:"100%"},attrs:{activeKey:t.activeKey,tabBarStyle:{width:"180px"},tabPosition:"left"},on:{prevClick:t.callback,nextClick:t.callback,tabClick:t.tabClick}},[i("a-tab-pane",{key:t.changeKey},[i("template",{slot:"tab"},[i("span",{directives:[{name:"has",rawName:"v-has",value:"fansMsg",expression:"'fansMsg'"}],staticClass:"tabMenu",staticStyle:{height:"35px"},on:{click:function(e){return t.changeType("wx")}}},[t._v("公众号")]),i("span",{directives:[{name:"has",rawName:"v-has",value:"miniMsg",expression:"'miniMsg'"}],staticClass:"tabMenu tabMenuBorder",staticStyle:{height:"35px"}},[t._v("小程序")])])],2),i("a-tab-pane",{key:t.searchKey},[i("a-select",{staticStyle:{width:"100%"},attrs:{slot:"tab",showSearch:"",allowClear:"",placeholder:"搜索小程序",defaultActiveFirstOption:!1,showArrow:!1,optionFilterProp:"children",filterOption:t.filterOption},on:{change:t.tabClick},slot:"tab",model:{value:t.searchValue,callback:function(e){t.searchValue=e},expression:"searchValue"}},t._l(t.msgTabList,(function(e,a){return i("a-select-option",{attrs:{value:e.id}},[t._v(t._s(e.name)+"\n\t\t\t\t")])})),1)],1),t._l(t.msgTabList,(function(e,a){return i("a-tab-pane",{key:e.id,style:t.activeKey==e.id?"height: 100%":""},[i("span",{attrs:{slot:"tab"},slot:"tab"},[i("a-avatar",{attrs:{src:e.avatar,shape:"square"}}),t._v("\n\t\t\t\t"+t._s(e.name)+"\n\t\t\t")],1),0==e.mini_list.length?i("div",{staticStyle:{height:"100%",position:"relative"}},[i("div",{staticStyle:{width:"180px",height:"100%",padding:"10px","border-right":"1px solid #E8E8E8"}},[[i("a-empty",{staticStyle:{"margin-top":"200px"}},[i("span",{attrs:{slot:"description"},slot:"description"},[t._v(" 暂无活跃用户 ")])])]],2),i("div",{staticStyle:{top:"0",right:"0",bottom:"0",left:"180px",position:"absolute"}},[i("a-row",{staticClass:"chat-box",attrs:{gutter:16}},[i("a-col",{staticClass:"chat-info-box",attrs:{span:18}},[i("a-row",{staticClass:"chat-title"},[i("a-col",{attrs:{span:22}},[i("span",{staticClass:"fans-nick"})]),i("a-col",{staticClass:"text-right",attrs:{span:2}},[i("a-icon",{attrs:{type:"user"}})],1)],1),i("a-row",{staticClass:"chat-content"},[i("a-col",{attrs:{span:24}})],1),i("a-row",{staticClass:"chat-send-box"},[i("a-col",{attrs:{span:24}},[i("div",{staticClass:"icon-box"},[i("a-icon",{staticClass:"icon-btn",attrs:{type:"smile"}}),i("a-icon",{staticClass:"icon-btn",attrs:{type:"picture"}})],1),i("div",{staticClass:"send-textarea"}),i("div",{staticClass:"send-btn-box float-right"},[i("span",{staticClass:"send-notice"},[t._v("按Shift+Enter换行，Enter发送")]),i("a-button",{attrs:{type:"primary",size:"large",loading:t.sending,disabled:!0}},[t._v("\n\t\t\t\t\t\t\t\t\t\t\t发送\n\t\t\t\t\t\t\t\t\t\t")])],1)])],1)],1),i("content-msg",{staticClass:"quick-info-box ant-col-6",attrs:{sendDisplay:0,comeFrom:"mini"},on:{replyMsg:t.replyMsg}})],1)],1)]):t._e(),e.mini_list.length>0?i("a-tabs",{staticStyle:{height:"100%"},attrs:{tabBarStyle:{width:"180px",textAlign:"left"},activeKey:t.subActiveKey,tabPosition:"left"},on:{prevClick:t.callback,nextClick:t.callback,tabClick:t.subTabClick}},[i("a-tab-pane",{key:t.msgTitleKey},[i("span",{attrs:{slot:"tab"},slot:"tab"},[t._v("用户消息")])]),t._l(e.mini_list,(function(n,s){return i("a-tab-pane",{key:n.openid,ref:n.openid,refInFor:!0,style:t.subActiveKey==n.openid?"height: 100%":"",attrs:{"data-fans-id":n.mini_id}},[i("div",{attrs:{slot:"tab"},slot:"tab"},[i("a-badge",{staticClass:"tab-box",attrs:{count:t.fansUnread[e.id+"_"+n.mini_id]}},[i("a-avatar",{staticClass:"fans-avatar",attrs:{src:n.head_img,shape:"square"}}),i("div",{staticClass:"tab-info"},[i("span",{staticClass:"fans-nick"},[t._v(t._s(n.remark.length>0?n.remark+"（"+n.openid+"）":n.openid))]),i("span",{staticClass:"tab-notice",domProps:{innerHTML:t._s(t.tabText(e.id,n.mini_id,n.openid))}})])],1)],1),t.subActiveKey==n.openid?i("a-row",{staticClass:"chat-box",attrs:{gutter:16}},[i("a-col",{staticClass:"chat-info-box",attrs:{span:18}},[i("a-row",{staticClass:"chat-title"},[i("a-col",{attrs:{span:22}},[i("span",{directives:[{name:"show",rawName:"v-show",value:!t.remarkVisible,expression:"!remarkVisible"}],staticClass:"fans-nick"},[t._v("\n\t\t\t\t\t\t\t\t\t\t"+t._s(n.remark.length>0?n.remark+"（"+n.openid+"）":n.openid)+"\n\t\t\t\t\t\t\t\t\t")]),i("span",{directives:[{name:"show",rawName:"v-show",value:!t.remarkVisible,expression:"!remarkVisible"}],on:{click:function(e){return t.modifyRemark(n.remark.length)}}},[i("a-icon",{attrs:{type:"edit",alt:""}})],1),i("a-input-search",{directives:[{name:"show",rawName:"v-show",value:t.remarkVisible,expression:"remarkVisible"}],attrs:{defaultValue:n.remark,placeholder:"输入用户的备注","data-wk":a,"data-k":s,"data-fid":n.mini_id,maxLength:10},on:{search:t.setRemark,change:t.remarkChange}},[i("span",{attrs:{slot:"suffix"},slot:"suffix"},[i("span",[t._v(t._s(t.remarkLength))]),t._v("/10\n\t\t\t\t\t\t\t\t\t\t\t\t\t")]),i("a-button",{attrs:{slot:"enterButton","data-wk":a,"data-k":s,"data-fid":n.mini_id,type:"primary"},slot:"enterButton"},[i("a-icon",{attrs:{type:"check"}})],1)],1)],1)],1),i("a-row",{directives:[{name:"perfect-scroll-bar",rawName:"v-perfect-scroll-bar",value:t.perfectScrollBarOptions,expression:"perfectScrollBarOptions"}],ref:"chat_content",refInFor:!0,staticClass:"chat-content",on:{"ps-scroll-up":t.handlePullOnLoad,"ps-scroll-down":t.handleInfiniteOnLoad,"ps-scroll-y":t.changeScrollPosition}},[i("a-col",{attrs:{span:24}},[t.loading?i("div",{staticClass:"loading-box"},[i("a-spin",[i("a-icon",{staticStyle:{"font-size":"12px",color:"grey","margin-right":"5px"},attrs:{slot:"indicator",type:"loading",spin:""},slot:"indicator"})],1),i("span",[t._v("正在加载")])],1):t._e(),t.noMore[e.id+"_"+n.mini_id]?i("div",{staticClass:"nomore-box"},[i("span",[t._v("无更多消息")])]):t._e(),t._l(t.msgContent[e.id+"_"+n.mini_id],(function(a){return[i("div",{ref:a.id,refInFor:!0,staticClass:"chat-content-list",attrs:{id:"contentList"+a.id}},[t.showTimeDivider(e.id,n.mini_id,a.id,a.create_time)?i("a-divider",{staticClass:"time-divider",attrs:{dashed:""}},[t._v("\n\t\t\t\t\t\t\t\t\t\t\t\t"+t._s(t.formatMsgTime(a.create_time,!0))+"\n\t\t\t\t\t\t\t\t\t\t\t")]):t._e(),i("div",{staticClass:"content"},[1==a.from.type?i("a-avatar",{staticClass:"float-left",attrs:{shape:"square",src:a.from.data.head_img}}):t._e(),2==a.from.type?i("a-avatar",{staticClass:"float-right",attrs:{shape:"square",src:a.from.data.head_img}}):t._e(),3==a.from.type?i("a-avatar",{staticClass:"float-right",attrs:{shape:"square",src:a.from.data.avatar}}):t._e(),1==a.from.type?i("div",{class:"msg-content msg-content-"+a.type+" float-left",domProps:{innerHTML:t._s(t.initMsgContent(a.content,a.type,a.id))},on:{click:t.addComment}}):t._e(),1!=a.from.type?i("div",{class:"msg-content msg-content-"+a.type+" float-right",domProps:{innerHTML:t._s(t.initMsgContent(a.content,a.type,a.id))},on:{click:t.addComment}}):t._e()],1)],1)]}))],2)],1),i("a-tag",{staticClass:"new-msg-tag",attrs:{visible:t.newMsg[e.id+"_"+n.mini_id],color:"blue"},on:{click:t.newMsgChange}},[t._v("\n\t\t\t\t\t\t\t\t新消息\n\t\t\t\t\t\t\t")]),i("a-row",{staticClass:"chat-send-box"},[i("a-col",{attrs:{span:24}},[i("div",{staticClass:"icon-box"},[i("a-popover",{attrs:{trigger:"click",overlayClassName:"emoji-popover",destroyTooltipOnHide:!0},model:{value:t.emojiShow,callback:function(e){t.emojiShow=e},expression:"emojiShow"}},[i("VEmojiPicker",{attrs:{slot:"content",showSearch:!1},on:{select:t.onSelectEmoji},slot:"content"}),i("a-tooltip",{attrs:{placement:"top"}},[i("template",{slot:"title"},[i("span",[t._v("表情")])]),i("a-icon",{staticClass:"icon-btn",staticStyle:{cursor:"pointer"},attrs:{type:"smile"}})],2)],1),i("a-tooltip",{attrs:{placement:"top"}},[i("template",{slot:"title"},[i("span",[t._v("图片")])]),i("a-icon",{staticClass:"icon-btn",attrs:{type:"picture"},on:{click:function(e){return t.selectMaterial(2)}}})],2)],1),i("medium-editor",{ref:"send_editor",refInFor:!0,staticClass:"send-textarea",attrs:{"data-key":n.mini_id,"data-active-key":e.id,text:t.valueInput[e.id+"_"+n.mini_id].input,options:t.options,"custom-tag":"div"},on:{editorCreated:t.editorCreated,edit:t.changeContentInput}}),i("div",{staticClass:"send-btn-box float-right"},[i("span",{staticClass:"send-notice"},[t._v("按Shift+Enter换行，Enter发送")]),i("a-button",{staticStyle:{"font-size":"14px",height:"34px","margin-right":"10px"},attrs:{type:"primary",size:"large",loading:t.sending,disabled:0==t.valueInput[e.id+"_"+n.mini_id].reply.length||"\n"==t.valueInput[e.id+"_"+n.mini_id].reply},on:{click:t.reply}},[t._v("\n\t\t\t\t\t\t\t\t\t\t\t发送\n\t\t\t\t\t\t\t\t\t\t")])],1)],1)],1)],1),i("content-msg",{staticClass:"quick-info-box ant-col-6",attrs:{comeFrom:"mini",container:function(){return t.$refs.miniMsgBox}},on:{replyMsg:t.replyMsg}})],1):t._e()],1)}))],2):t._e()],1)}))],2),i("a-modal",{staticClass:"preview-modal",attrs:{visible:t.previewVisible,footer:null,width:"100%",centered:""},on:{cancel:t.handleCancel}},[i("a-carousel",{ref:"previewCarousel",attrs:{arrows:"",dots:!1,effect:"fade",adaptiveHeight:!0},scopedSlots:t._u([{key:"prevArrow",fn:function(t){return i("div",{staticClass:"custom-slick-arrow",staticStyle:{left:"10px",zIndex:"1"}},[i("a-icon",{attrs:{type:"left-circle"}})],1)}},{key:"nextArrow",fn:function(t){return i("div",{staticClass:"custom-slick-arrow",staticStyle:{right:"10px"}},[i("a-icon",{attrs:{type:"right-circle"}})],1)}}])},t._l(t.previewInfo[t.activeKey+"_"+t.miniId],(function(e,a){return i("div",["undefined"!=typeof e.previewType&&"IMG"==e.previewType?i("img",{staticStyle:{margin:"0 auto",display:"block"},attrs:{alt:e.previewAlt,src:e.previewUrl,width:e.previewWidth,height:e.previewHeight}}):t._e()])})),0)],1),i("a-modal",{attrs:{title:"创建快捷回复",visible:t.quickVisible},on:{cancel:t.handleQuickCancel,ok:t.handleQuickOk}},[i("div",{staticClass:"quick-body"},[i("div",{staticClass:"quick-area"},[i("medium-editor",{ref:"quick_editor",staticClass:"quick-textarea",attrs:{text:t.quickText.html,options:t.options,"custom-tag":"div"},on:{editorCreated:t.quickEditorCreated,edit:t.quickChangeContentInput}}),i("div",{staticClass:"quick-btn-box"},[i("a-popover",{attrs:{trigger:"click",overlayClassName:"emoji-popover",destroyTooltipOnHide:!0},model:{value:t.quickEmojiShow,callback:function(e){t.quickEmojiShow=e},expression:"quickEmojiShow"}},[i("VEmojiPicker",{attrs:{slot:"content",showSearch:!1},on:{select:t.onQuickSelectEmoji},slot:"content"}),i("a-icon",{staticClass:"quick-emoji-btn",staticStyle:{cursor:"pointer"},attrs:{type:"smile"}})],1),i("span",{staticClass:"quick-notice"},[i("span",[t._v(t._s(t.wordNum)+"/500")]),t._v("（按Shift+Enter换行）")])],1)],1),i("div",{staticClass:"quick-style"},[i("label",[t._v("选择分类：")]),i("a-radio-group",{attrs:{name:"radioGroup"},on:{change:t.quickChange},model:{value:t.quickCheck,callback:function(e){t.quickCheck=e},expression:"quickCheck"}},[i("a-radio",{attrs:{value:t.activeKey}},[t._v(t._s(t.quickName))]),i("a-radio",{attrs:{value:0}},[t._v("通用")])],1)],1)])]),i("choose-msg",{attrs:{show:t.chooseMsg,type:t.chooseMsgType,news_type:1,needConfirm:t.chooseNeedConfirm,callback:t.modalVisibleChange,clearGroup:t.clearGroup}})],1)},O=[],R=(i("8615"),E["a"].createFromIconfontCN({scriptUrl:"//at.alicdn.com/t/font_8d5l8fzk5b87iudi.js"})),D={name:"MiniMsg",components:{VEmojiPicker:l["a"],"content-msg":T,"medium-editor":f.a,"choose-msg":L["a"],IconFont:R},inject:["changeLoading","changeType"],data:function(){var t=localStorage.getItem("wxNum")?localStorage.getItem("wxNum"):"";return{wxId:"",miniId:0,msgFrom:2,msgType:1,chooseMsgType:2,searchKey:"search",changeKey:"change",msgTitleKey:"msgTitle",activeKey:t,subActiveKey:"1-1",searchValue:[],msgTabList:{},wxLocation:[],fansLocation:[],msgContent:[],timeDivider:[],fansUnread:[],chooseMsg:!1,chooseNeedConfirm:!1,profileShow:!1,remarkVisible:!1,valueInput:[],mediumEditor:{},quickMediumEditor:{},quickModifyMediumEditor:[],quickText:{html:"",text:""},quickModifyText:[],options:{toolbar:!1,placeholder:{text:"请输入……",hideOnClick:!0}},scrollData:[],emojiShow:!1,quickEmojiShow:!1,quickModifyEmojiShow:[],modifyEmojiIndex:0,loading:!1,noMore:[],newMsg:[],perfectScrollBarOptions:{suppressScrollX:!0,minScrollbarLength:15},sending:!1,previewVisible:!1,previewInfo:[],previewRelation:[],playAudio:{isPlay:!1,key:0,dom:"",interval:""},playVideo:{isPlay:!1,key:-1,dom:""},quickList:{},quickModify:[],quickVisible:!1,quickCheck:0,quickName:"",confirmLoading2:!1,inputValue:"",tagsList:[],tagCheckValue:[],visible:!1,disabled:[],tagsNum:0,tagValue:[],hasTags:[],hasTagsValue:[],remarkLength:0,quickModifyWordNum:[],wordNum:0,emptyVisible:!1,emptyVisible2:!1,clearGroup:!0}},methods:{setKeyGetContent:function(t){this.activeKey!=t.id&&(this.activeKey=t.id),this.wxId=t.id,t.mini_list.length>0?(this.subActiveKey=t.mini_list[0].openid,this.miniId=t.mini_list[0].mini_id,this.getMsgContent(this.subActiveKey)):this.subActiveKey="empty"},initData:function(t){var e=this;if(t.length>0){this.msgTabList=t;var i=t[0];this.msgTabList.map((function(t,a){e.wxLocation[t.id]=a,t.id==e.activeKey&&(i=t)})),this.setKeyGetContent(i),this.bindFansRelation(),this.quickCheck=t[0].id,this.quickName=t[0].name}},initMsgContent:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a="";switch(e){case 1:a=this.initTextMsgContent(t);break;case 2:a=this.initImgMsgContent(t,i);break;case 3:a=this.initMiniMsgContent(t);break;default:break}return a},initTextMsgContent:function(t){var e=this;return-1!==t.search(/[\/\[\]\(\)\|\$\*\?\+\-\_]/g)&&d["a"].wechatEmojiKey.map((function(i){var a=new RegExp(e.utils.addslashes(i),"g"),n=d["a"].getEmojiUrl(i);t=t.replace(a,'<img src="'+n+'" alt="'+i+'" height="21" width="21"/>')})),t.replace(/[\r\n|\n]/g,"<br/>")},initMiniMsgContent:function(t){return'<span class="wrong-notice">【'+t+"】小程序已发送</span>"},getNewSize:function(t,e){var i=160,a=160,n=840,s=600,o=i,r=a,c=n,l=s;return parseInt(e)>parseInt(t)?(parseInt(e)>a?o=a*t/e:(o=t,r=e),parseInt(e)>s?c=s*t/e:(c=t,l=e),c>n&&(c=n,l=n*e/t)):(parseInt(t)>i?r=i*e/t:(o=t,r=e),parseInt(t)>c?l=n*e/t:(c=t,l=e),l>s&&(c=s*t/e,l=s)),{newWidth:o,newHeight:r,newPreviewWidth:c,newPreviewHeight:l}},getImgDom:function(t,e){var i="";if("undefined"!==typeof t.local_url||"undefined"!==typeof t.local_path){var a="undefined"!==typeof t.local_url?t.local_url:this.$store.state.commonUrl+t.local_path,n=this.getNewSize(t.media_width,t.media_height),s=n.newWidth,o=n.newHeight,r=n.newPreviewWidth,c=n.newPreviewHeight;i='<img class="media-content" src="'+a+'" alt="'+t.file_name+'" height="'+o+'" width="'+s+'" data-key="'+e+'" />',t.preview_width=r,t.preview_height=c,this.initPreviewInfo(e,t,"IMG")}return i},initImgMsgContent:function(t,e){var i=this,a="";if("object"===Object(r["a"])(t)&&"undefined"!==typeof t[0]){var n=0;t.map((function(t,s){var o=i.getImgDom(t,e+s);""!=o&&(n++,a+=o)})),n>1&&(a='<div class="media-content-box">'+a+"</div>")}else a=this.getImgDom(t,e);return""==a&&(a='<span class="wrong-notice">【图片无法显示】</span>'),a},initVoiceMsgContent:function(t,e){var i='<span class="wrong-notice">【音频无法加载】</span>';if("undefined"!==typeof t.local_url){var a=1,n=0;n="undefined"===typeof t.media_duration.length?Object.keys(t.media_duration).length:t.media_duration.length,n>0&&(a=t.media_duration[2],0!==parseInt(t.media_duration[1])&&(a=60*parseInt(t.media_duration[1])+parseInt(t.media_duration[2])));var s=240,o=75,r=a*s/60;r=r<o?o:r,i='<div class="voice-box voice-btn" style="width: '+r+'px;" data-key="'+e+'"><div class="voice-symbol voice-btn" data-key="'+e+'"><span id="voiceCircleFirst'+e+'" class="voice-circle first voice-btn" data-key="'+e+'"></span><span id="voiceCircleSecond'+e+'"  class="voice-circle second voice-btn" data-key="'+e+'"></span><span id="voiceCircleThird'+e+'"  class="voice-circle third voice-btn" data-key="'+e+'"></span></div>',i+='<span class="voice-time voice-btn" data-key="'+e+'">'+a+"″</span></div>",i+='<audio id="voiceAudio'+e+'" preload src="'+t.local_url+'" style="display: none; "/>'}return i},initPreviewInfo:function(t,e,i){var a={};switch(i){case"IMG":a={previewType:"IMG",previewUrl:"undefined"!==typeof e.local_url?e.local_url:this.$store.state.commonUrl+e.local_path,previewAlt:e.file_name,previewWidth:e.preview_width,previewHeight:e.preview_height};break;default:break}"undefined"===typeof this.previewInfo[this.activeKey+"_"+this.miniId]&&(this.previewInfo[this.activeKey+"_"+this.miniId]=[]),"undefined"===typeof this.previewRelation[this.activeKey+"_"+this.miniId]&&(this.previewRelation[this.activeKey+"_"+this.miniId]=[]),"undefined"===typeof this.previewRelation[this.activeKey+"_"+this.miniId][t]?(this.previewInfo[this.activeKey+"_"+this.miniId].push(a),this.previewRelation[this.activeKey+"_"+this.miniId][t]=this.previewInfo[this.activeKey+"_"+this.miniId].length-1):this.previewInfo[this.activeKey+"_"+this.miniId][this.previewRelation[this.activeKey+"_"+this.miniId][t]]=a},addComment:function(t){t.target.classList.contains("media-content")&&this.preview(t)},preview:function(t){var e=this;this.previewVisible=!0,this.$nextTick((function(){e.$refs.previewCarousel.goTo(e.previewRelation[e.activeKey+"_"+e.miniId][t.target.dataset.key],!1)}))},handleCancel:function(){this.previewVisible=!1},tabText:function(t,e,i){if(this.subActiveKey!=i&&"undefined"!==typeof this.valueInput[t+"_"+e]&&0!=this.valueInput[t+"_"+e].reply.length&&"\n"!=this.valueInput[t+"_"+e].reply)return'<span style="color: red">[草稿]</span>'+this.valueInput[t+"_"+e].reply;var a="",n=-1;if("undefined"===typeof this.msgContent[t+"_"+e]||0===this.msgContent[t+"_"+e].length?(a=this.msgTabList[this.fansLocation[t+"_"+e].wx_index].mini_list[this.fansLocation[t+"_"+e].fans_index].last_content,n=a.length-1):(a=this.msgContent[t+"_"+e],n=a.length-1),n<0)return"";var s="";switch(a[n].type){case 1:s=this.initMsgContent(a[n].content,a[n].type);break;case 2:s="【图片】";break;case 3:s="【音频】";break;case 4:s="【小程序】";break;default:break}return s},getMsgContent:function(){"undefined"==typeof this.valueInput[this.activeKey+"_"+this.miniId]&&this.$set(this.valueInput,this.activeKey+"_"+this.miniId,{input:"",reply:"",item:""}),"undefined"==typeof this.noMore[this.activeKey+"_"+this.miniId]&&this.$set(this.noMore,this.activeKey+"_"+this.miniId,!1),"undefined"==typeof this.newMsg[this.activeKey+"_"+this.miniId]&&this.$set(this.newMsg,this.activeKey+"_"+this.miniId,!1),"undefined"==typeof this.msgContent[this.activeKey+"_"+this.miniId]?(this.$set(this.msgContent,this.activeKey+"_"+this.miniId,[]),this.getMsgContentList()):(this.changeScrollTop(!1,this.scrollData[this.activeKey+"_"+this.miniId].position),this.setNewMsg())},getCursor:function(t){var e=getSelection();if(e){var i=e.anchorNode,a=!1;while(i&&i.nodeType!=i.DOCUMENT_NODE){var n=i.classList;if(n&&(n.contains("send-textarea")||n.contains("quick-textarea")||n.contains("quick-modify-textarea"))){a=!0;break}i=i.parentNode}a&&(t.lastRange=e.getRangeAt(0),t.lastNode=i)}},insertHTMLCommand:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(0==i){if("undefined"===typeof self.lastNode||!self.lastNode.classList.contains("send-textarea")||self.lastNode.dataset.key!=this.miniId)return!1}else if(1==i){if("undefined"===typeof self.lastNode||!self.lastNode.classList.contains("quick-textarea"))return!1}else{if(2!=i)return!1;if("undefined"===typeof self.lastNode||!self.lastNode.classList.contains("quick-modify-textarea"))return!1}var a,n,s,o,r,c,l=["insertHTML",!1,e];if(a=self.lastRange,n=a.commonAncestorContainer,f.a.MediumEditor.util.isMediumEditorElement(n)&&!n.firstChild)a.selectNode(n.appendChild(t.createTextNode("")));else if(3===n.nodeType&&0===a.startOffset&&a.endOffset===n.nodeValue.length||3!==n.nodeType&&n.innerHTML===a.toString()){while(!f.a.MediumEditor.util.isMediumEditorElement(n)&&n.parentNode&&1===n.parentNode.childNodes.length&&!f.a.MediumEditor.util.isMediumEditorElement(n.parentNode))n=n.parentNode;a.selectNode(n)}a.deleteContents(),s=t.createElement("div"),s.innerHTML=e,o=t.createDocumentFragment();while(s.firstChild)r=s.firstChild,c=o.appendChild(r);switch(a.insertNode(o),c&&(a=a.cloneRange(),a.setStartAfter(c),a.collapse(!0),f.a.MediumEditor.selection.selectRange(t,a)),t.execCommand.callListeners&&t.execCommand.callListeners(l,!0),i){case 0:var d={currentTarget:this.mediumEditor.origElements};this.mediumEditor.events.updateInput(d.currentTarget,d);break;case 1:var h={currentTarget:this.quickMediumEditor.origElements};this.quickMediumEditor.events.updateInput(h.currentTarget,h),this.wordNum=self.lastNode.textContent.length;break;case 2:var p={currentTarget:this.quickModifyMediumEditor[self.lastNode.dataset.key].origElements};this.quickModifyMediumEditor[self.lastNode.dataset.key].events.updateInput(p.currentTarget,p);break;default:break}},editorCreated:function(t){this.mediumEditor=t,this.mediumEditor.subscribe("editableKeydownEnter",this.editableKeydownEnter),this.mediumEditor.subscribe("focus",this.editableFocus),delete self.lastRange,delete self.lastNode},editableFocus:function(t){""===t.target.innerHTML&&(t.target.innerHTML="<p><br/></p>")},editableKeydownEnter:function(t){t.shiftKey&&13===t.keyCode||13===t.keyCode&&(t.preventDefault(),this.sending||0==this.valueInput[this.activeKey+"_"+this.miniId].reply.length||"\n"==this.valueInput[this.activeKey+"_"+this.miniId].reply||(this.msgType=1,this.reply()))},changeContentInput:function(t){this.valueInput[t.api.origElements.dataset.activeKey+"_"+t.api.origElements.dataset.key].input=t.api.origElements.innerHTML,this.valueInput[t.api.origElements.dataset.activeKey+"_"+t.api.origElements.dataset.key].reply=t.api.origElements.innerText},initTimeDivider:function(t,e){this.timeDivider[t+"_"+e]={time:[],show:[]}},formatSubTime:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"YYYY-MM-DD HH:mm:ss";return p.a.unix(t).format(e)},formatMsgTime:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"YYYY-MM-DD HH:mm";return e&&this.utils.isToday(t)?p()(t).format("HH:mm"):p()(t).format(i)},showTimeDivider:function(t,e,i,a){return a=this.formatMsgTime(a),!(this.timeDivider[t+"_"+e].time.indexOf(a)>-1&&this.timeDivider[t+"_"+e].show[a]!==i)&&(-1===this.timeDivider[t+"_"+e].time.indexOf(a)&&(this.timeDivider[t+"_"+e].time.push(a),this.timeDivider[t+"_"+e].show[a]=i),!0)},handleInfiniteOnLoad:function(){var t=this.$refs.chat_content[0].$el._ps_.reach.y;"end"===t&&this.$set(this.newMsg,this.activeKey+"_"+this.miniId,!1)},handlePullOnLoad:function(){var t=this.$refs.chat_content[0].$el._ps_.reach.y;"start"!==t||this.loading||this.noMore[this.activeKey+"_"+this.miniId]||(this.loading=!0,this.getMsgContentList(this.scrollData[this.activeKey+"_"+this.miniId].first_id))},changeScrollPosition:function(t){this.scrollData[this.activeKey+"_"+this.miniId].position=t.srcElement.scrollTop},newMsgChange:function(){this.changeScrollTop(!0),this.msgRead()},changeScrollTop:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.$nextTick((function(){if(null===i){var a=0!=t.scrollData[t.activeKey+"_"+t.miniId].old_first_id?t.scrollData[t.activeKey+"_"+t.miniId].old_first_id:t.scrollData[t.activeKey+"_"+t.miniId].last_id;e&&(a=t.scrollData[t.activeKey+"_"+t.miniId].last_id),"undefined"!==typeof t.$refs[a]&&(i=t.$refs[a][0].offsetTop,a!==t.scrollData[t.activeKey+"_"+t.miniId].last_id&&(i-=24,1===t.$refs[a][0].childElementCount&&(i-=56)))}"undefined"!==typeof t.$refs.chat_content&&"undefined"!==typeof t.$refs.chat_content[0]&&(t.$refs.chat_content[0].$el.scrollTop=i,t.scrollData[t.activeKey+"_"+t.miniId].position=i)}))},setNewMsg:function(){var t=this;this.$nextTick((function(){var e=t.scrollData[t.activeKey+"_"+t.miniId].last_id,i=t.$refs[e][0].offsetTop,a=t.$refs[e][0].offsetHeight,n=t.$refs.chat_content[0].$el.clientHeight;if(i+a>n&&t.scrollData[t.activeKey+"_"+t.miniId].position!=i){var s=0,o=!1;if("undefined"!=typeof t.fansUnread[t.activeKey+"_"+t.miniId]&&0!=t.fansUnread[t.activeKey+"_"+t.miniId]){o=!0;for(var r=1;r<=t.fansUnread[t.activeKey+"_"+t.miniId];r++){var c=t.msgContent[t.activeKey+"_"+t.miniId].length,l=t.msgContent[t.activeKey+"_"+t.miniId][c-r].id;s+=t.$refs[l][0].offsetHeight}}else s=a;t.$refs.chat_content[0].$el.scrollTop+n==t.$refs.chat_content[0].$el.scrollHeight||t.$refs.chat_content[0].$el.scrollTop+n+s==t.$refs.chat_content[0].$el.scrollHeight?(t.changeScrollTop(!0),o&&t.msgRead()):o&&t.$set(t.newMsg,t.activeKey+"_"+t.miniId,!0)}else t.$set(t.newMsg,t.activeKey+"_"+t.miniId,!1),t.msgRead()}))},bindFansRelation:function(){var t=this;t.msgTabList.map((function(e,i){t.wxLocation[e.id]=i,e.mini_list.map((function(a,n){t.fansLocation[e.id+"_"+a.mini_id]={wx_index:i,fans_index:n}}))}))},filterOption:function(t,e){return e.componentOptions.children[0].text.toLowerCase().indexOf(t.toLowerCase())>=0},modifyRemark:function(t){this.remarkVisible=!this.remarkVisible,this.remarkLength=t},callback:function(t){console.log(t)},tabClick:function(t){var e=[this.searchKey,this.changeKey];if("undefined"!==typeof t&&-1==e.indexOf(t)&&t!=this.activeKey)if(this.activeKey=t,this.wxId=t,this.quickCheck=t,this.quickName=this.msgTabList[this.wxLocation[t]].name,this.profileShow=!1,this.searchValue!=this.quickCheck&&(this.searchValue=[]),this.msgTabList[this.wxLocation[t]].mini_list.length>0){var i=this.msgTabList[this.wxLocation[t]].mini_list[0].openid,a=this.msgTabList[this.wxLocation[t]].mini_list[0].mini_id;this.subTabClick(i,a),"undefined"!==typeof this.scrollData[a]&&this.changeScrollTop(!1,this.scrollData[a].position)}else this.subActiveKey="empty"},subTabClick:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;t!=this.msgTitleKey&&"empty"!=t&&t!=this.subActiveKey&&(this.subActiveKey=t,this.miniId=null===e?this.$refs[t][0].$attrs["data-fans-id"]:e,this.profileShow=!1,this.getMsgContent())},openQuick:function(){var t=this;this.quickVisible=!0,this.$nextTick((function(){t.$refs.quick_editor.$el.focus()}))},quickEditorCreated:function(t){this.quickMediumEditor=t,this.quickMediumEditor.subscribe("editableKeydownEnter",this.quickEditableKeydownEnter),this.quickMediumEditor.subscribe("focus",this.editableFocus),this.quickMediumEditor.subscribe("editablePaste",this.quickEditablePaste),delete self.lastRange,delete self.lastNode},quickEditableKeydownEnter:function(t){t.shiftKey&&13===t.keyCode||13===t.keyCode&&t.preventDefault()},quickEditablePaste:function(){this.quickInvlideText()},quickInvlideText:function(){var t=this.$refs.quick_editor.$el,e=this.global.getRangeInfo(t,500),i=e.startNode,a=e.startOffset,n=e.endNode,s=e.endOffset;if("undefined"!==typeof i.nodeValue){var o=document.createRange();o.setStart(i,a),o.setEnd(n,s),o.deleteContents(),this.quickText.html=self.lastNode.innerHTML.replace(/<pre([^>]*)>/g,"<p>").replace(/<\/pre>/g,"</p>").replace(/<font([^>]*)>/g,"<p>").replace(/<\/font>/g,"</p>").replace(/<div([^>]*)>/g,"<p>").replace(/<\/div>/g,"</p>"),this.quickText.text=self.lastNode.innerText,this.wordNum=500}},quickChangeContentInput:function(t){this.wordNum=self.lastNode.textContent.length,this.wordNum<=500?(this.quickText.html=t.api.origElements.innerHTML,this.quickText.text=t.api.origElements.innerText):this.quickInvlideText()},handleQuickCancel:function(){this.quickVisible=!1,this.quickText={html:"",text:""}},handleQuickOk:function(){this.quickSave(),this.handleQuickCancel()},toggleQuickDialogEmoji:function(){this.quickEmojiShow=!this.quickEmojiShow},onQuickSelectEmoji:function(t){var e=this.quickMediumEditor.options.ownerDocument;this.wordNum<=498&&this.insertHTMLCommand(e,t.data,1),this.toggleQuickDialogEmoji()},quickChange:function(t){this.quickCheck=t.target.value},quickInput:function(t){var e="quickContent"+t;this.valueInput[this.activeKey+"_"+this.miniId].input=this.$refs[e][0].innerHTML,this.valueInput[this.activeKey+"_"+this.miniId].reply=this.$refs[e][0].innerText},quickSend:function(t){this.quickInput(t),this.sending||(this.msgType=1,this.reply())},openQuickModify:function(t,e,i){var a={html:"<p>"+this.quickList[e][i].content.replace(/[\r|\n]/g,"<br/>")+"</p>",text:this.quickList[e][i].content};this.$set(this.quickModifyText,t,a),this.$set(this.quickModify,t,!0)},quickModifyEditorCreated:function(t){this.quickModifyMediumEditor[t.origElements.dataset.key]=t,this.quickModifyMediumEditor[t.origElements.dataset.key].subscribe("editableKeydownEnter",this.quickEditableKeydownEnter),this.quickModifyMediumEditor[t.origElements.dataset.key].subscribe("focus",this.editableFocus),this.quickModifyMediumEditor[t.origElements.dataset.key].subscribe("editablePaste",this.quickModifyEditablePaste(t.origElements.dataset.key)),delete self.lastRange,delete self.lastNode},quickModifyEditablePaste:function(t){this.quickModifyInvlideText(t)},quickModifyInvlideText:function(t){var e=this.quickModifyMediumEditor[t].origElements,i=this.global.getRangeInfo(e,500),a=i.startNode,n=i.startOffset,s=i.endNode,o=i.endOffset;if("undefined"!==typeof a.nodeValue){var r=document.createRange();r.setStart(a,n),r.setEnd(s,o),r.deleteContents(),this.quickModifyText[t].html=self.lastNode.innerHTML.replace(/<pre([^>]*)>/g,"<p>").replace(/<\/pre>/g,"</p>").replace(/<font([^>]*)>/g,"<p>").replace(/<\/font>/g,"</p>").replace(/<div([^>]*)>/g,"<p>").replace(/<\/div>/g,"</p>"),this.quickModifyText[t].text=self.lastNode.innerText,this.quickModifyWordNum[t]=500}},quickModifyChangeContentInput:function(t){var e=t.api.origElements.dataset.key;"\n"==t.api.origElements.innerText&&(t.api.origElements.innerText=""),this.$set(this.quickModifyWordNum,e,t.api.origElements.innerText.length),this.quickModifyWordNum[e]<=500?(this.quickModifyText[e].html=t.api.origElements.innerHTML,this.quickModifyText[e].text=t.api.origElements.innerText):this.quickModifyInvlideText(e)},modifyEmojiClick:function(t){this.modifyEmojiIndex=t},toggleQuickModifyDialogEmoji:function(){this.$set(this.quickModifyEmojiShow,this.modifyEmojiIndex,!this.quickModifyEmojiShow[this.modifyEmojiIndex])},onQuickModifySelectEmoji:function(t){var e=this.quickModifyMediumEditor[this.modifyEmojiIndex].options.ownerDocument;this.quickModifyWordNum[self.lastNode.dataset.key]<=498&&this.insertHTMLCommand(e,t.data,2),this.toggleQuickModifyDialogEmoji()},cancelQuickModify:function(t){this.$set(this.quickModify,t,!1),this.quickText={html:"",text:""}},quickModifySave:function(t,e,i){this.quickText={html:this.quickModifyText[t].html,text:this.quickModifyText[t].text},"public"==e&&(e=0),this.quickSave(t,e,i),this.cancelQuickModify(t)},toggleDialogEmoji:function(){this.emojiShow=!this.emojiShow},onSelectEmoji:function(t){var e=this.mediumEditor.options.ownerDocument;this.insertHTMLCommand(e,t.data),this.toggleDialogEmoji()},selectMaterial:function(t){this.chooseMsgType=t,2==this.chooseMsgType?this.chooseNeedConfirm=!0:this.chooseNeedConfirm=!1,this.chooseMsg=!0},modalVisibleChange:function(t,e,i,a){"ok"==t&&("undefined"!==typeof a.artList&&a.artList.length>0?this.msgType=5:this.msgType=2,this.valueInput[this.activeKey+"_"+this.miniId].reply=i,this.valueInput[this.activeKey+"_"+this.miniId].item=a,this.getOneMaterial(i)),this.chooseMsg=!1},getOneMaterial:function(){var t=Object(c["a"])(regeneratorRuntime.mark((function t(e){var i,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.axios.post("material/upload-media",{wx_id:this.activeKey,attachment_id:e});case 2:i=t.sent,a=i.data,0==a.error?this.reply():this.$message.error(a.error_msg);case 5:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),replySuccess:function(t,e){var i;switch(e.msg_type){case 1:i=e.msg_content.text;break;case 2:var a=this.valueInput[this.activeKey+"_"+this.miniId].item;i={local_path:a.local_path,media_width:a.file_width,media_height:a.file_height};break;case 3:var n=this.valueInput[this.activeKey+"_"+this.miniId].local_url,s=this.valueInput[this.activeKey+"_"+this.miniId].media_duration;i={local_url:n,media_duration:s};break;case 4:var o=this.valueInput[this.activeKey+"_"+this.miniId].local_url,r=this.valueInput[this.activeKey+"_"+this.miniId].media_duration;i={local_url:o,media_duration:r};break;case 5:var c=this.valueInput[this.activeKey+"_"+this.miniId].item.artList[0];i={article:[{thumb_info:{local_path:c.local_path},title:c.title,digest:c.digest,content_source_url:c.content_source_url}]};break;case 10:i=this.valueInput[this.activeKey+"_"+this.miniId].item.file_name;break;default:break}this.msgType=1,this.$set(this.valueInput,this.activeKey+"_"+this.miniId,{input:"",reply:"",item:""});var l={id:t,from:{type:2,data:{alias:"",user_name:this.msgTabList[this.fansLocation[this.activeKey+"_"+this.miniId].wx_index].id,nick_name:this.msgTabList[this.fansLocation[this.activeKey+"_"+this.miniId].wx_index].name,head_img:this.msgTabList[this.fansLocation[this.activeKey+"_"+this.miniId].wx_index].avatar}},to:{type:1,data:{mini_id:this.miniId,openid:this.msgTabList[this.fansLocation[this.activeKey+"_"+this.miniId].wx_index].mini_list[this.fansLocation[this.activeKey+"_"+this.miniId].fans_index].openid,nickname:this.msgTabList[this.fansLocation[this.activeKey+"_"+this.miniId].wx_index].mini_list[this.fansLocation[this.activeKey+"_"+this.miniId].fans_index].nickname,remark:this.msgTabList[this.fansLocation[this.activeKey+"_"+this.miniId].wx_index].mini_list[this.fansLocation[this.activeKey+"_"+this.miniId].fans_index].remark,headerimg:this.msgTabList[this.fansLocation[this.activeKey+"_"+this.miniId].wx_index].mini_list[this.fansLocation[this.activeKey+"_"+this.miniId].fans_index].headerimg}},content:i,type:e.msg_type,create_time:p()().format("YYYY-MM-DD HH:mm:ss")};if(this.scrollData[this.activeKey+"_"+this.miniId].last_id=t,this.msgContent[this.activeKey+"_"+this.miniId].push(l),0!=this.fansLocation[this.activeKey+"_"+this.miniId].fans_index){var d=this.msgTabList[this.fansLocation[this.activeKey+"_"+this.miniId].wx_index].mini_list[this.fansLocation[this.activeKey+"_"+this.miniId].fans_index];this.msgTabList[this.fansLocation[this.activeKey+"_"+this.miniId].wx_index].mini_list.splice(this.fansLocation[this.activeKey+"_"+this.miniId].fans_index,1),this.msgTabList[this.fansLocation[this.activeKey+"_"+this.miniId].wx_index].mini_list.unshift(d),this.bindFansRelation()}this.initTimeDivider(this.activeKey,this.miniId),this.changeScrollTop(!0)},websocketOnMessage:function(t){if("undefined"!=typeof t.type&&"chat"==t.type&&(!t.hasOwnProperty("msg_type")||"mini"==t.msg_type)){var e=!1;"undefined"==typeof this.msgContent[t.wx_id+"_"+t.from]&&(this.msgContent[t.wx_id+"_"+t.from]=[],e=!0),"undefined"==typeof this.scrollData[t.wx_id+"_"+t.from]&&(this.scrollData[t.wx_id+"_"+t.from]={first_id:0,old_first_id:0,last_id:0,position:null});var i=this.msgContent[t.wx_id+"_"+t.from];2==t.msg_list.type&&(t.msg_list.content=Object.values(t.msg_list.content));var a=i.concat(t.msg_list);if(this.$set(this.msgContent,t.wx_id+"_"+t.from,a),this.initTimeDivider(t.wx_id,t.from),this.scrollData[t.wx_id+"_"+t.from].last_id=t.msg_list.id,0==this.scrollData[t.wx_id+"_"+t.from].first_id&&(this.scrollData[t.wx_id+"_"+t.from].first_id=this.scrollData[t.wx_id+"_"+t.from].last_id),e&&this.getMsgContentList(t.msg_list.id,14,!1,t.wx_id,t.from),"undefined"==typeof this.fansLocation[t.wx_id+"_"+t.from])this.msgTabList[this.wxLocation[t.wx_id]].mini_list.unshift(t.mini_info),this.bindFansRelation();else if(0!=this.fansLocation[t.wx_id+"_"+t.from].fans_index){var n=this.msgTabList[this.fansLocation[t.wx_id+"_"+t.from].wx_index].mini_list[this.fansLocation[t.wx_id+"_"+t.from].fans_index];this.msgTabList[this.fansLocation[t.wx_id+"_"+t.from].wx_index].mini_list.splice(this.fansLocation[t.wx_id+"_"+t.from].fans_index,1),this.msgTabList[this.fansLocation[t.wx_id+"_"+t.from].wx_index].mini_list.unshift(n),this.bindFansRelation(),this.changeScrollTop(!1,this.scrollData[this.activeKey+"_"+this.miniId].position)}if(this.subActiveKey!=t.mini_info.openid){var s=0;s="undefined"!=typeof this.fansUnread[t.wx_id+"_"+t.from]?++this.fansUnread[t.wx_id+"_"+t.from]:1,this.$set(this.fansUnread,t.wx_id+"_"+t.from,s)}else this.setNewMsg()}},remarkChange:function(t){this.remarkLength=t.target.value.length},getMsgList:function(){var t=Object(c["a"])(regeneratorRuntime.mark((function t(){var e,i,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=1==localStorage.getItem("isMasterAccount")?{}:{sub_id:localStorage.getItem("sub_id")},t.next=3,this.axios.post("mini-user/msg-list",e);case 3:i=t.sent,a=i.data,0==a.error?(this.changeLoading(),this.initData(a.data)):(this.changeLoading(),this.$message.error(a.error_msg));case 6:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),getQuickList:function(){var t=Object(c["a"])(regeneratorRuntime.mark((function t(){var e,i,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=this,e.emptyVisible=!1,e.emptyVisible2=!1,t.next=5,this.axios.post("quick-msg/get");case 5:i=t.sent,a=i.data,0==a.error?(a.data.map((function(t){var i=t.wx_id.length>0?t.wx_id:"public";"undefined"===typeof e.quickList[i]&&(e.quickList[i]=[]),e.quickList[i].push(t),e.$set(e.quickModify,t.id,!1);var a={html:t.content.replace(/[\r|\n]/g,"<br/>"),text:t.content};e.$set(e.quickModifyText,t.id,a),e.$set(e.quickModifyEmojiShow,t.id,!1)})),"undefined"!=typeof e.quickList[e.activeKey]&&0!=e.quickList[e.activeKey].length||(e.emptyVisible=!0),"undefined"!=typeof e.quickList.public&&0!=e.quickList.public.length||(e.emptyVisible2=!0),e.$forceUpdate()):e.$message.error(a.error_msg);case 8:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),getMsgContentList:function(){var t=Object(c["a"])(regeneratorRuntime.mark((function t(){var e,i,a,n,s,o,r,c,l,d,h,p,u,f,m,g,b,x=arguments;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=x.length>0&&void 0!==x[0]?x[0]:0,i=x.length>1&&void 0!==x[1]?x[1]:15,a=!(x.length>2&&void 0!==x[2])||x[2],n=x.length>3&&void 0!==x[3]?x[3]:null,s=x.length>4&&void 0!==x[4]?x[4]:null,null===n&&(n=this.wxId),null===s&&(s=this.miniId),o={wx_id:this.activeKey,mini_id:s,last_id:e,msg_size:i},t.next=10,this.axios.post("mini-msg/get-msg-list",o);case 10:r=t.sent,c=r.data,0==c.error?(c.data.msg_list.length>0?(l=c.data.mini_id,d=c.data.wx_id,h=this.msgContent[d+"_"+l],p=h.length>0?h[0].id:0,u=this,c.data.msg_list.map((function(t){u.msgContent[d+"_"+l].unshift(t)})),this.initTimeDivider(d,l),f=this.msgContent[d+"_"+l][0].id,m=this.msgContent[d+"_"+l].length-1,g=this.msgContent[d+"_"+l][m].id,0!=c.data.unread&&(this.subActiveKey!=this.msgTabList[this.fansLocation[d+"_"+l].wx_index].mini_list[this.fansLocation[d+"_"+l].fans_index].openid?this.$set(this.fansUnread,d+"_"+l,c.data.unread):this.msgRead(l)),b={first_id:f,old_first_id:p,last_id:g,position:null},this.$set(this.scrollData,d+"_"+l,b)):a=!1,c.data.msg_list.length<i&&this.$set(this.noMore,c.data.wx_id+"_"+c.data.mini_id,!0),a&&this.changeScrollTop()):this.$message.error("获取失败"),this.loading=!1,this.changeLoading();case 15:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),replyMsg:function(){var t=Object(c["a"])(regeneratorRuntime.mark((function t(e,i,a){var n,s,o=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:""==i&&this.$message.error("回复内容不可为空！"),n={wx_id:this.activeKey,mini_id:this.miniId,from:this.msgFrom,msg_content:{},msg_type:this.msgType},t.t0=e,t.next=1===t.t0?5:2===t.t0?7:10;break;case 5:return n.msg_content={text:i},t.abrupt("break",10);case 7:return s=this,this.$confirm({title:"确定选择这个吗？",content:function(t){return t("div",[t("img",{attrs:{src:o.$store.state.commonUrl+i},style:{maxWidth:"100%",maxHeight:"300px",marginTop:"10px"}})])},onOk:function(){s.msgType=2,s.valueInput[s.activeKey+"_"+s.miniId].reply=a.id,s.valueInput[s.activeKey+"_"+s.miniId].item=a,s.uploadMedia({wx_id:s.activeKey,attachment_id:a.id},a.id)},onCancel:function(){s.showVisible=!0},class:"choose-confirm-modal"}),t.abrupt("break",10);case 10:if(1==e&&this.sendMsg(n),3!=e){t.next=18;break}if(this.msgType=3,null!=a.attach_id){t.next=16;break}return this.$message.error("当前小程序不合法，请重新选择"),t.abrupt("return",!1);case 16:this.valueInput[this.activeKey+"_"+this.miniId].item=a,this.uploadMedia({wx_id:this.activeKey,attachment_id:a.attach_id},a.attach_id,a.appId,a.appPath,a.file_name);case 18:case"end":return t.stop()}}),t,this)})));function e(e,i,a){return t.apply(this,arguments)}return e}(),sendMsg:function(){var t=Object(c["a"])(regeneratorRuntime.mark((function t(e){var i,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.axios.post("mini-msg/send",e);case 2:i=t.sent,a=i.data,0==a.error&&a.data.status?this.replySuccess(a.data.status,e):(this.msgType=1,this.$message.error(a.data.error_info.errmsg));case 5:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),uploadMedia:function(){var t=Object(c["a"])(regeneratorRuntime.mark((function t(e,i){var a,n,s,o=arguments;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return o.length>2&&void 0!==o[2]?o[2]:0,o.length>3&&void 0!==o[3]?o[3]:"",o.length>4&&void 0!==o[4]?o[4]:"",t.next=5,this.axios.post("material/upload-media",e);case 5:a=t.sent,n=a.data,0==n.error?(s={wx_id:this.activeKey,mini_id:this.miniId,from:this.msgFrom,msg_content:{},msg_type:this.msgType},s.msg_content={media_id:n.data[i].id},this.sendMsg(s)):this.$message.error(n.error_msg);case 8:case"end":return t.stop()}}),t,this)})));function e(e,i){return t.apply(this,arguments)}return e}(),reply:function(){var t=Object(c["a"])(regeneratorRuntime.mark((function t(){var e,i,a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(this.sending=!0,e="",e="number"===typeof this.valueInput[this.activeKey+"_"+this.miniId].reply?this.valueInput[this.activeKey+"_"+this.miniId].reply:this.valueInput[this.activeKey+"_"+this.miniId].reply.replace(/(^\s*)|(\s*$)/g,""),0!=e.length&&/[^\n]/g.test(e)){t.next=7;break}this.$message.error("回复内容不可为空！"),t.next=20;break;case 7:i={wx_id:this.activeKey,mini_id:this.miniId,from:this.msgFrom,msg_content:{},msg_type:this.msgType},t.t0=this.msgType,t.next=1===t.t0?11:2===t.t0?13:15;break;case 11:return i.msg_content={text:this.valueInput[this.activeKey+"_"+this.miniId].reply},t.abrupt("break",15);case 13:return i.msg_content={media_id:this.valueInput[this.activeKey+"_"+this.miniId].reply},t.abrupt("break",15);case 15:return t.next=17,this.axios.post("mini-msg/send",i);case 17:a=t.sent,n=a.data,0==n.error&&n.data.status?this.replySuccess(n.data.status,i):(this.msgType=1,this.$message.error(n.data.error_info.errmsg));case 20:this.sending=!1;case 21:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),msgRead:function(){var t=Object(c["a"])(regeneratorRuntime.mark((function t(){var e,i,a,n=arguments;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=n.length>0&&void 0!==n[0]?n[0]:null,null===e&&(e=this.miniId),t.next=4,this.axios.post("mini-msg/msg-read",{mini_id:e,wx_id:localStorage.getItem("wxNum")});case 4:i=t.sent,a=i.data,0==a.error&&a.data.status&&this.$set(this.fansUnread,this.activeKey+"_"+this.miniId,0);case 7:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),quickSave:function(){var t=Object(c["a"])(regeneratorRuntime.mark((function t(){var e,i,a,n,s,o,c,l,d,h,p=arguments;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e=p.length>0&&void 0!==p[0]?p[0]:null,i=p.length>1&&void 0!==p[1]?p[1]:null,a=p.length>2&&void 0!==p[2]?p[2]:null,n=this.quickText.text.replace(/(^\s*)|(\s*$)/g,""),0!=n.length&&/[^\n]/g.test(n)){t.next=8;break}this.$message.error("快捷回复内容不可为空！"),t.next=14;break;case 8:return s={q_id:e,content:this.quickText.text,q_wx_id:"object"===Object(r["a"])(i)?this.quickCheck:i,wx_id:localStorage.getItem("wxNum")},t.next=11,this.axios.post("quick-msg/save",s);case 11:o=t.sent,c=o.data,0==c.error?(l=c.data.wx_id.length>0?c.data.wx_id:"public",d=[c.data],"undefined"!==typeof this.quickList[l]&&(d=this.quickList[l],"object"===Object(r["a"])(a)?d.unshift(c.data):d[a]=c.data,delete this.quickList[l]),this.$set(this.quickList,l,d),this.$set(this.quickModify,c.data.id,!1),h={html:c.data.content.replace(/[\r|\n]/g,"<br/>"),text:c.data.content},this.$set(this.quickModifyText,c.data.id,h),this.$set(this.quickModifyEmojiShow,c.data.id,!1)):this.$message.error(c.error_msg);case 14:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),quickDel:function(){var t=Object(c["a"])(regeneratorRuntime.mark((function t(e,i,a){var n,s,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=this,t.next=3,this.axios.post("quick-msg/delete",{q_id:e});case 3:s=t.sent,o=s.data,0==o.error?(n.quickList=[],n.getQuickList(),n.$message.success("删除成功！")):n.$message.error(o.error_msg);case 6:case"end":return t.stop()}}),t,this)})));function e(e,i,a){return t.apply(this,arguments)}return e}(),setRemark:function(){var t=Object(c["a"])(regeneratorRuntime.mark((function t(e,i){var a,n,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(this.msgTabList[i.target.dataset.wk].mini_list[i.target.dataset.k].remark==e){t.next=9;break}return a={mini_id:i.target.dataset.fid,remark:e,wx_id:localStorage.getItem("wxNum")},t.next=4,this.axios.post("mini-user/set-remark",a);case 4:n=t.sent,s=n.data,0==s.error?(this.msgTabList[i.target.dataset.wk].mini_list[i.target.dataset.k].remark=e,this.remarkVisible=!this.remarkVisible):this.$message.error(s.error_msg),t.next=11;break;case 9:return this.remarkVisible=!this.remarkVisible,t.abrupt("return",!1);case 11:case"end":return t.stop()}}),t,this)})));function e(e,i){return t.apply(this,arguments)}return e}()},created:function(){this.getMsgList(),this.getQuickList(),this.ws.setCallback(this.websocketOnMessage);var t=this;document.addEventListener("selectionchange",(function(){t.getCursor(self)}));document.getElementsByClassName("quick-info-box")}},H=D,A=(i("7f1b"),i("613f"),Object(I["a"])(H,j,O,!1,null,"a3a7fe48",null)),z=A.exports,P={name:"Msg",provide:function(){return{changeLoading:this.changeLoading,changeType:this.changeType}},components:{FansMsg:V,MiniMsg:z},data:function(){return{isLoading:!0,isWx:!0,isMini:!0}},methods:{changeLoading:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.isLoading=t},changeType:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"wx";"wx"==t?(this.isWx=!0,this.isMini=!1):"mini"==t&&(this.isWx=!1,this.isMini=!0)}},created:function(){if("all"==localStorage.getItem("permissionButton"))this.isWx=!0,this.isMini=!1;else{var t=localStorage.getItem("permissionButton").split(",");this.isWx=-1!=t.indexOf("fansMsg"),this.isWx?this.isMini=!1:this.isMini=-1!=t.indexOf("miniMsg")}},destroyed:function(){this.ws.setCallback()}},F=P,B=(i("ede5"),i("c41e"),Object(I["a"])(F,a,n,!1,null,"3a63b62c",null));e["default"]=B.exports},"99cb":function(t,e,i){var a=i("7f87");"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var n=i("499e").default;n("ffb6c490",a,!0,{sourceMap:!1,shadowMode:!1})},"9b58":function(t,e,i){e=t.exports=i("2350")(!1),e.push([t.i,".emoji-popover .ant-popover-inner-content{padding:0}.emoji-popover .ant-popover-inner-content .emoji{height:40px!important;width:40px!important;font-size:20px}.preview-modal .ant-carousel .slick-slide{text-align:center;height:auto;overflow:hidden}.preview-modal .ant-carousel .custom-slick-arrow{width:50px;height:50px;font-size:50px;color:#545454!important;opacity:.3}.preview-modal .ant-carousel .custom-slick-arrow:before{display:none}.preview-modal .ant-carousel .custom-slick-arrow:hover{opacity:.5}@-webkit-keyframes voiceRun1{0%{border-color:transparent}25%{border-color:transparent}50%{border-color:transparent}75%{border-color:#2390ff}to{border-color:transparent}}@keyframes voiceRun1{0%{border-color:transparent}25%{border-color:transparent}50%{border-color:transparent}75%{border-color:#2390ff}to{border-color:transparent}}@-webkit-keyframes voiceRun2{0%{border-color:transparent}25%{border-color:transparent}50%{border-color:#2390ff}75%{border-color:#2390ff}to{border-color:transparent}}@keyframes voiceRun2{0%{border-color:transparent}25%{border-color:transparent}50%{border-color:#2390ff}75%{border-color:#2390ff}to{border-color:transparent}}@-webkit-keyframes voiceRun3{0%{background:#2390ff;border-color:#2390ff}25%{background:#2390ff;border-color:#2390ff}50%{background:#2390ff;border-color:#2390ff}75%{background:#2390ff;border-color:#2390ff}to{background:#2390ff;border-color:#2390ff}}@keyframes voiceRun3{0%{background:#2390ff;border-color:#2390ff}25%{background:#2390ff;border-color:#2390ff}50%{background:#2390ff;border-color:#2390ff}75%{background:#2390ff;border-color:#2390ff}to{background:#2390ff;border-color:#2390ff}}",""])},c41e:function(t,e,i){"use strict";var a=i("5c78"),n=i.n(a);n.a},ca61:function(t,e,i){"use strict";var a=i("8598"),n=i.n(a);n.a},cd0e:function(t,e,i){e=t.exports=i("2350")(!1),e.push([t.i,'[data-v-a3a7fe48] .ant-badge-count{top:3px!important}.tab-box[data-v-a3a7fe48]{height:34px;display:block}.tab-box .fans-avatar[data-v-a3a7fe48]{width:32px;height:32px}.tab-box .tab-info[data-v-a3a7fe48]{top:0;right:0;bottom:0;left:40px;position:absolute}.tab-box .tab-info span[data-v-a3a7fe48]{padding:5px 0 0 0;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;display:block}.tab-box .tab-info span.fans-nick[data-v-a3a7fe48]{font-size:14px;line-height:14px}.tab-box .tab-info span.tab-notice[data-v-a3a7fe48]{font-size:12px;line-height:20px;height:25px;color:grey;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.tab-box .tab-info span[data-v-a3a7fe48]:first-child{padding-top:.5px}.chat-box[data-v-a3a7fe48]{margin:0!important;height:100%}.chat-box .chat-info-box[data-v-a3a7fe48]{top:0;left:0;bottom:0;border-right:1px solid #e8e8e8;position:absolute}.chat-box .chat-info-box .chat-title[data-v-a3a7fe48]{background:#eaeaea;font-size:20px;height:50px;padding:10px;margin:0 -8px}.chat-box .chat-info-box .chat-title .fans-nick[data-v-a3a7fe48]{line-height:30px}.chat-box .chat-info-box .profile[data-v-a3a7fe48]{width:350px;height:350px;top:60px;right:10px;position:absolute;background:#fff;z-index:99999;-webkit-box-shadow:.3px .3px 1px #ccc;box-shadow:.3px .3px 1px #ccc;overflow-y:auto}.chat-box .chat-info-box .profile[data-v-a3a7fe48] .ant-card-body{padding:24px!important}.chat-box .chat-info-box .profile .profile-cover-box[data-v-a3a7fe48]{background:#fafafa;text-align:center;position:relative}.chat-box .chat-info-box .profile .profile-cover-box .profile-close-btn[data-v-a3a7fe48]{top:10px;right:10px;position:absolute;cursor:pointer;z-index:999}.chat-box .chat-info-box .profile .profile-cover-box .fans-avatar[data-v-a3a7fe48]{margin-top:30px}.chat-box .chat-info-box .profile .profile-cover-box .sex-box[data-v-a3a7fe48]{width:20px;height:20px;border-radius:50%;top:62px;left:182px;position:absolute}.chat-box .chat-info-box .profile .profile-cover-box .sex-box.sex-man[data-v-a3a7fe48]{background:#00f}.chat-box .chat-info-box .profile .profile-cover-box .sex-box.sex-woman[data-v-a3a7fe48]{background:pink}.chat-box .chat-info-box .profile .profile-cover-box .fans-nickname[data-v-a3a7fe48]{margin:15px auto;display:inline-block}.chat-box .chat-info-box .profile .profile-info-box[data-v-a3a7fe48]{width:100%}.chat-box .chat-info-box .profile .profile-info-box .profile-row[data-v-a3a7fe48]{margin-bottom:10px}.chat-box .chat-info-box .profile .profile-info-box .profile-row .fans-remark[data-v-a3a7fe48]{padding-right:5px}.chat-box .chat-info-box .profile .profile-info-box .profile-row .fans-remark-edit[data-v-a3a7fe48]{cursor:pointer}.chat-box .chat-info-box .profile .profile-info-box .profile-row[data-v-a3a7fe48]:last-child{margin-bottom:0}.chat-box .chat-info-box .chat-content[data-v-a3a7fe48]{top:50px;right:0;bottom:208px;left:0;position:absolute;padding:10px;overflow-x:hidden;overflow-y:auto}.chat-box .chat-info-box .chat-content .loading-box[data-v-a3a7fe48],.chat-box .chat-info-box .chat-content .nomore-box[data-v-a3a7fe48]{text-align:center;font-size:12px;color:grey;height:24px;display:block}.chat-box .chat-info-box .chat-content .chat-content-list[data-v-a3a7fe48]{width:100%;padding:10px 0;display:block}.chat-box .chat-info-box .chat-content .chat-content-list .time-divider[data-v-a3a7fe48]{font-size:12px;color:grey}.chat-box .chat-info-box .chat-content .chat-content-list .time-divider[data-v-a3a7fe48] .ant-divider-inner-text{line-height:24px}.chat-box .chat-info-box .chat-content .chat-content-list .content[data-v-a3a7fe48]{width:100%;display:inline-block}.chat-box .chat-info-box .chat-content .chat-content-list .content .msg-content[data-v-a3a7fe48]{max-width:70%;min-height:32px;margin:0 10px;color:#000;background-color:#fff;border:1px solid #e5e5e5;border-radius:5px;vertical-align:top;position:relative}.chat-box .chat-info-box .chat-content .chat-content-list .content .msg-content-1[data-v-a3a7fe48]{padding:8px 11px;word-break:normal;word-wrap:break-word;overflow-wrap:break-word}.chat-box .chat-info-box .chat-content .chat-content-list .content .msg-content-1[data-v-a3a7fe48] img{vertical-align:middle}.chat-box .chat-info-box .chat-content .chat-content-list .content .msg-content-1[data-v-a3a7fe48]:before{position:absolute;left:-12px;top:9px;width:0;height:0;content:"";border-color:transparent #e9e9e9 transparent transparent;border-style:solid;border-width:6px}.chat-box .chat-info-box .chat-content .chat-content-list .content .msg-content-1[data-v-a3a7fe48]:after{position:absolute;left:-9px;top:10px;width:0;height:0;content:"";border-color:transparent #fff transparent transparent;border-style:solid;border-width:5px}.chat-box .chat-info-box .chat-content .chat-content-list .content .msg-content[data-v-a3a7fe48] .wrong-notice{padding:8px 11px;word-break:normal;word-wrap:break-word;overflow-wrap:break-word;display:inline-block}.chat-box .chat-info-box .chat-content .chat-content-list .content .msg-content[data-v-a3a7fe48] .voice-box{padding:6px 11px;height:32px;cursor:pointer}.chat-box .chat-info-box .chat-content .chat-content-list .content .msg-content[data-v-a3a7fe48] .voice-box .voice-symbol{width:10px;height:10px;-webkit-box-sizing:border-box;box-sizing:border-box;-webkit-transform:rotate(135deg);transform:rotate(135deg);overflow:hidden;position:relative;margin-top:5px;margin-left:5px}.chat-box .chat-info-box .chat-content .chat-content-list .content .msg-content[data-v-a3a7fe48] .voice-box .voice-symbol .voice-circle{border:2px solid #2390ff;border-radius:50%;position:absolute}.chat-box .chat-info-box .chat-content .chat-content-list .content .msg-content[data-v-a3a7fe48] .voice-box .voice-symbol .voice-circle.first{width:20px;height:20px;top:0;left:0}.chat-box .chat-info-box .chat-content .chat-content-list .content .msg-content[data-v-a3a7fe48] .voice-box .voice-symbol .voice-circle.second{width:12px;height:12px;top:4px;left:4px}.chat-box .chat-info-box .chat-content .chat-content-list .content .msg-content[data-v-a3a7fe48] .voice-box .voice-symbol .voice-circle.third{border:none;width:4px;height:4px;background:#2390ff;top:8px;left:8px}.chat-box .chat-info-box .chat-content .chat-content-list .content .msg-content[data-v-a3a7fe48] .voice-box .voice-time{top:6px;right:15px;bottom:6px;position:absolute;display:inline-block}.chat-box .chat-info-box .chat-content .chat-content-list .content .msg-content[data-v-a3a7fe48] .media-content-box{padding:5px}.chat-box .chat-info-box .chat-content .chat-content-list .content .msg-content[data-v-a3a7fe48] .media-content-box img.media-content,.chat-box .chat-info-box .chat-content .chat-content-list .content .msg-content[data-v-a3a7fe48] .media-content-box video.media-content{margin-bottom:5px;border:1px solid #e5e5e5}.chat-box .chat-info-box .chat-content .chat-content-list .content .msg-content[data-v-a3a7fe48] .media-content-box img.media-content:last-child,.chat-box .chat-info-box .chat-content .chat-content-list .content .msg-content[data-v-a3a7fe48] .media-content-box video.media-content:last-child{margin-bottom:0}.chat-box .chat-info-box .chat-content .chat-content-list .content .msg-content[data-v-a3a7fe48] .media-content{border-radius:5px;display:block}.chat-box .chat-info-box .chat-content .chat-content-list .content .msg-content[data-v-a3a7fe48] img.media-content,.chat-box .chat-info-box .chat-content .chat-content-list .content .msg-content[data-v-a3a7fe48] video.media-content{cursor:pointer}.chat-box .chat-info-box .chat-content .chat-content-list .content .msg-content[data-v-a3a7fe48] .media-play-btn{width:40px;height:40px;top:50%;left:50%;background:hsla(0,0%,50.2%,.5);border:2px solid #fff;border-radius:20px;margin-top:-20px;margin-left:-20px;display:block;position:absolute;cursor:pointer}.chat-box .chat-info-box .chat-content .chat-content-list .content .msg-content[data-v-a3a7fe48] .media-play-btn .play-btn{width:0;height:0;margin-top:8px;margin-left:12.34px;border-top:10px solid transparent;border-right:17.32px solid transparent;border-bottom:10px solid transparent;border-left:17.32px solid #fff;display:block}.chat-box .chat-info-box .chat-content .chat-content-list .content .msg-content[data-v-a3a7fe48] .voice-duration{right:5px;bottom:5px;color:#fff;font-size:12px;line-height:12px;display:inline-block;position:absolute;cursor:pointer}.chat-box .chat-info-box .chat-content .chat-content-list .content .msg-content[data-v-a3a7fe48] .link-box{text-decoration:none}.chat-box .chat-info-box .chat-content .chat-content-list .content .msg-content[data-v-a3a7fe48] .link-box .link-title{font-size:18px;line-height:27px;padding:15px 15px 0 15px;color:#000;margin:0}.chat-box .chat-info-box .chat-content .chat-content-list .content .msg-content[data-v-a3a7fe48] .link-box .link-description{font-size:14px;line-height:21px;padding:15px;color:#bfbfbf;margin:0}.chat-box .chat-info-box .chat-content .chat-content-list .content .msg-content[data-v-a3a7fe48] .new-box{width:300px;border-radius:5px;overflow:hidden;display:block;background:#fff}.chat-box .chat-info-box .chat-content .chat-content-list .content .msg-content[data-v-a3a7fe48] .new-box .new-cover{width:300px;height:150px}.chat-box .chat-info-box .chat-content .chat-content-list .content .msg-content[data-v-a3a7fe48] .new-box .new-info-box .new-title{font-size:18px;line-height:27px;padding:0;color:#000;margin:10px 15px;word-break:break-all;white-space:normal;letter-spacing:2px;text-overflow:-o-ellipsis-lastline;overflow:hidden;text-overflow:ellipsis;-webkit-line-clamp:2;-webkit-box-orient:vertical;display:-webkit-box}.chat-box .chat-info-box .chat-content .chat-content-list .content .msg-content[data-v-a3a7fe48] .new-box .new-info-box .new-digest{font-size:14px;line-height:21px;padding:0;color:#bfbfbf;margin:0 15px 10px;word-break:break-all;white-space:normal;letter-spacing:2px;text-overflow:-o-ellipsis-lastline;overflow:hidden;text-overflow:ellipsis;-webkit-line-clamp:3;-webkit-box-orient:vertical;display:-webkit-box}.chat-box .chat-info-box .chat-content .chat-content-list .content .float-right.msg-content[data-v-a3a7fe48]{background-color:#a9ea67;border-color:#7ed321}.chat-box .chat-info-box .chat-content .chat-content-list .content .float-right.msg-content.msg-content-1[data-v-a3a7fe48]:before{left:auto;right:-12px;border-color:transparent transparent transparent #7ed322}.chat-box .chat-info-box .chat-content .chat-content-list .content .float-right.msg-content.msg-content-1[data-v-a3a7fe48]:after{right:-9px;left:auto;border-color:transparent transparent transparent #b8e986}.chat-box .chat-info-box .new-msg-tag[data-v-a3a7fe48]{right:15px;bottom:215px;position:absolute}.chat-box .chat-info-box .chat-send-box[data-v-a3a7fe48]{right:0;bottom:0;left:0;height:208px;position:absolute}.chat-box .chat-info-box .chat-send-box .icon-box[data-v-a3a7fe48]{background:#fff;font-size:18px;padding:10px;height:44px}.chat-box .chat-info-box .chat-send-box .icon-box .icon-btn[data-v-a3a7fe48]{margin-right:10px;width:18px;height:18px}.chat-box .chat-info-box .chat-send-box .send-textarea[data-v-a3a7fe48]{border:none;height:110px;resize:none;background-color:#fff;overflow:hidden auto;padding:0 10px 10px 10px}.chat-box .chat-info-box .chat-send-box .send-textarea[data-v-a3a7fe48]:focus{outline:none}.chat-box .chat-info-box .chat-send-box .send-textarea[data-v-a3a7fe48] p{margin:0}.chat-box .chat-info-box .chat-send-box .send-btn-box[data-v-a3a7fe48]{padding:10px 0}.chat-box .chat-info-box .chat-send-box .send-btn-box .send-notice[data-v-a3a7fe48]{color:grey;margin-right:15px}.chat-box .chat-info-box .chat-send-box .send-btn-box.float-right[data-v-a3a7fe48]{float:right}.chat-box .quick-info-box[data-v-a3a7fe48]{top:0;right:0;bottom:0;position:absolute}.chat-box .quick-info-box .quick-title-box[data-v-a3a7fe48]{height:42px;padding:10px}.chat-box .quick-info-box .quick-title-box .quick-title[data-v-a3a7fe48]{display:inline-block;float:left}.chat-box .quick-info-box .quick-title-box .quick-btn[data-v-a3a7fe48]{display:inline-block;float:right;cursor:pointer;margin-top:3.5px}.chat-box .quick-info-box .quick-text-box[data-v-a3a7fe48]{background:#fff;margin:0 -10px 20px -10px;position:relative;cursor:pointer}.chat-box .quick-info-box .quick-text-box p[data-v-a3a7fe48]{margin:0;padding:10px;white-space:normal;word-break:normal;word-wrap:break-word}.chat-box .quick-info-box .quick-text-box .quick-btn[data-v-a3a7fe48]{position:absolute;top:0;right:0;display:none}.chat-box .quick-info-box .quick-text-box .quick-btn .quick-btn-item[data-v-a3a7fe48]{background-color:rgba(0,0,0,.8);color:#fff;padding:5px;display:inline-block;margin-left:5px;font-size:14px;line-height:14px;width:24px;height:24px;cursor:pointer}.chat-box .quick-info-box .quick-text-box:hover .quick-btn[data-v-a3a7fe48]{display:block}.chat-box .quick-info-box .quick-text-box .quick-modify-area .quick-modify-textarea[data-v-a3a7fe48]{height:100px;overflow:hidden auto;padding:10px}.chat-box .quick-info-box .quick-text-box .quick-modify-area .quick-modify-textarea[data-v-a3a7fe48]:focus{outline:none}.chat-box .quick-info-box .quick-text-box .quick-modify-area .quick-modify-textarea[data-v-a3a7fe48] p{margin-bottom:0}.chat-box .quick-info-box .quick-text-box .quick-modify-area .quick-modify-btn-box[data-v-a3a7fe48]{height:30px;display:block;margin:10px}.chat-box .quick-info-box .quick-text-box .quick-modify-area .quick-modify-btn-box .quick-modify-emoji-btn[data-v-a3a7fe48]{font-size:16px;margin-top:4px}.chat-box .quick-info-box .quick-text-box .quick-modify-area .quick-modify-btn-box .quick-modify-btn[data-v-a3a7fe48]{display:inline-block;float:right}.chat-box .quick-info-box .quick-text-box .quick-modify-area .quick-modify-btn-box .quick-modify-btn button[data-v-a3a7fe48]{margin-left:5px}.chat-box .quick-info-box .quick-text-box .quick-modify-area .quick-modify-btn-box .quick-modify-btn button[data-v-a3a7fe48]:first-child{margin:0}.chat-box .quick-info-box .quick-tabs[data-v-a3a7fe48]{left:8px;right:8px;top:42px;bottom:0;position:absolute}.chat-box .quick-info-box .quick-tabs[data-v-a3a7fe48] .ant-tabs-card .ant-tabs-content{top:56px;bottom:0;height:auto;padding-bottom:0;overflow-y:auto;position:absolute}.chat-box .quick-info-box .quick-tabs[data-v-a3a7fe48] .ant-tabs-card .ant-tabs-content .ant-tabs-tabpane{padding:16px}.chat-box .quick-info-box .quick-tabs[data-v-a3a7fe48] .ant-tabs-card .ant-tabs-bar{border-bottom:1px solid #e0e0e0}.chat-box .quick-info-box .quick-tabs[data-v-a3a7fe48] .ant-tabs-card .ant-tabs-bar .ant-tabs-tab{border-color:transparent;background:transparent;max-width:60%}.chat-box .quick-info-box .quick-tabs[data-v-a3a7fe48] .ant-tabs-card .ant-tabs-bar .ant-tabs-tab-active{border-color:#e0e0e0;background:#f1f1f1;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}[data-v-a3a7fe48] .ant-tabs-nav{width:100%}.quick-body .quick-area[data-v-a3a7fe48]{border:1px solid #e2e2e2}.quick-body .quick-area .quick-textarea[data-v-a3a7fe48]{height:200px;overflow-y:auto;overflow-x:hidden;padding:5px}.quick-body .quick-area .quick-textarea[data-v-a3a7fe48]:focus{outline:none}.quick-body .quick-area .quick-btn-box[data-v-a3a7fe48]{height:30px;display:block}.quick-body .quick-area .quick-btn-box .quick-emoji-btn[data-v-a3a7fe48]{font-size:20px;margin-top:5px;margin-left:10px}.quick-body .quick-area .quick-btn-box .quick-notice[data-v-a3a7fe48]{color:grey;height:30px;font-size:15px;line-height:30px;float:right;display:inline-block;margin-right:10px}.quick-body .quick-style[data-v-a3a7fe48]{height:30px;font-size:14px;line-height:30px;margin-top:15px}.little-notice[data-v-a3a7fe48]{font-size:12px;color:grey}[data-v-a3a7fe48] .ant-tabs-tab{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}[data-v-a3a7fe48] .ant-input-affix-wrapper .ant-input-suffix{right:5px}[data-v-a3a7fe48] .ant-input:not(:last-child){padding-right:45px}',""])},e70c:function(t,e,i){e=t.exports=i("2350")(!1),e.push([t.i,".emoji-popover .ant-popover-inner-content{padding:0}.emoji-popover .ant-popover-inner-content .emoji{height:40px!important;width:40px!important;font-size:20px}.preview-modal .ant-carousel .slick-slide{text-align:center;height:auto;overflow:hidden}.preview-modal .ant-carousel .custom-slick-arrow{width:50px;height:50px;font-size:50px;color:#545454!important;opacity:.3}.preview-modal .ant-carousel .custom-slick-arrow:before{display:none}.preview-modal .ant-carousel .custom-slick-arrow:hover{opacity:.5}@-webkit-keyframes voiceRun1{0%{border-color:transparent}25%{border-color:transparent}50%{border-color:transparent}75%{border-color:#2390ff}to{border-color:transparent}}@keyframes voiceRun1{0%{border-color:transparent}25%{border-color:transparent}50%{border-color:transparent}75%{border-color:#2390ff}to{border-color:transparent}}@-webkit-keyframes voiceRun2{0%{border-color:transparent}25%{border-color:transparent}50%{border-color:#2390ff}75%{border-color:#2390ff}to{border-color:transparent}}@keyframes voiceRun2{0%{border-color:transparent}25%{border-color:transparent}50%{border-color:#2390ff}75%{border-color:#2390ff}to{border-color:transparent}}@-webkit-keyframes voiceRun3{0%{background:#2390ff;border-color:#2390ff}25%{background:#2390ff;border-color:#2390ff}50%{background:#2390ff;border-color:#2390ff}75%{background:#2390ff;border-color:#2390ff}to{background:#2390ff;border-color:#2390ff}}@keyframes voiceRun3{0%{background:#2390ff;border-color:#2390ff}25%{background:#2390ff;border-color:#2390ff}50%{background:#2390ff;border-color:#2390ff}75%{background:#2390ff;border-color:#2390ff}to{background:#2390ff;border-color:#2390ff}}",""])},ea2c:function(t,e,i){var a=i("6187");"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var n=i("499e").default;n("4d2083dc",a,!0,{sourceMap:!1,shadowMode:!1})},ede5:function(t,e,i){"use strict";var a=i("ea2c"),n=i.n(a);n.a},f8eb:function(t,e,i){e=t.exports=i("2350")(!1),e.push([t.i,".msg-container .ant-tabs.ant-tabs-left .ant-tabs-left-content{padding:0;height:100%}.msg-container .ant-tabs.ant-tabs-left .ant-tabs-left-bar .ant-tabs-tab{text-align:left}",""])},fd60:function(t,e,i){var a=i("cd0e");"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var n=i("499e").default;n("dcc9a3e6",a,!0,{sourceMap:!1,shadowMode:!1})}}]);