(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2e97b1b1"],{"708b":function(t,e,i){var a=i("cc63");"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var n=i("499e").default;n("080f1640",a,!0,{sourceMap:!1,shadowMode:!1})},b5d5:function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"list"},[i("div",{attrs:{id:"components-layout-demo-basic"}},[i("a-layout",{staticClass:"scroll",staticStyle:{position:"absolute",top:"0",bottom:"0",left:"0",right:"0","overflow-x":"hidden","overflow-y":"auto"}},[i("a-layout-header",[t._v("红包规则")]),i("a-layout-content",[i("div",{staticClass:"content-hd"},[i("a-col",{staticStyle:{float:"left"}},[i("a-input",{staticStyle:{width:"150px","margin-right":"10px"},attrs:{placeholder:"搜索规则名称"},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.find(e)}},model:{value:t.title,callback:function(e){t.title=e},expression:"title"}}),i("a-button",{staticStyle:{margin:"0px 10px"},attrs:{type:"primary"},on:{click:t.find}},[t._v("查找")]),i("a-button",{on:{click:t.clear}},[t._v("清空")])],1),i("a-col",{directives:[{name:"has",rawName:"v-has",value:"redRuleList-add",expression:"'redRuleList-add'"}],staticStyle:{float:"right"}},[i("a-button",{staticClass:"btn-primary",attrs:{icon:"plus",type:"primary"},on:{click:t.addRule}},[t._v("\n\t\t\t\t\t\t\t新增红包规则\n\t\t\t\t\t\t")])],1)],1),i("div",{staticClass:"content-bd"},[i("a-spin",{attrs:{tip:"Loading...",size:"large",spinning:t.isLoading}},[i("a-table",{directives:[{name:"has",rawName:"v-has",value:"redRuleList-list",expression:"'redRuleList-list'"}],attrs:{columns:t.columns,dataSource:t.ruleList,pagination:!1,rowClassName:t.rowClassName},scopedSlots:t._u([{key:"type",fn:function(e,a){return i("span",{},[1==a.type?i("span",[t._v("定额 "+t._s(a.fixed_amount)+"元")]):t._e(),2==a.type?i("span",[t._v("拼手气 "+t._s(a.min_random_amount)+"-"+t._s(a.max_random_amount)+"元")]):t._e()])}},{key:"sketch",fn:function(e,a){return i("span",{},[i("div",{staticStyle:{display:"inline-block"}},[i("img",{staticStyle:{"max-width":"100px","max-height":"100px"},attrs:{src:t.commonUrl+a.pic_url}})]),i("div",{staticStyle:{display:"inline-block","margin-left":"10px","vertical-align":"middle",width:"calc(100% - 120px)"}},[i("p",{staticStyle:{"white-space":"nowrap",overflow:"hidden","text-overflow":"ellipsis"}},[t._v(t._s(a.title))]),i("p",{staticStyle:{"word-break":"break-word",overflow:"hidden","text-overflow":"ellipsis",display:"-webkit-box","-webkit-line-clamp":"2","line-clamp":"2","-webkit-box-orient":"vertical"}},[t._v(t._s(a.des||"--"))])])])}},{key:"thanking",fn:function(e,a){return i("span",{},[i("p",[t._v(t._s(a.thanking||"--"))])])}},{key:"action",fn:function(e,a,n){return i("span",{},[i("div",{staticStyle:{width:"150px"}},[i("div",{staticStyle:{display:"inline-block"}},[i("a-button",{directives:[{name:"has",rawName:"v-has",value:"redRuleList-edit",expression:"'redRuleList-edit'"}],staticStyle:{margin:"0 5px 5px 0"},on:{click:function(e){return t.edit(a.id)}}},[t._v("编辑")])],1),i("div",{staticStyle:{display:"inline-block"}},[i("a-button",{directives:[{name:"has",rawName:"v-has",value:"redRuleList-delete",expression:"'redRuleList-delete'"}],staticStyle:{margin:"0 5px 5px 0"},on:{click:function(e){return t.deleteActivity(a.id,a.name)}}},[t._v("删除")])],1)])])}}])}),i("div",{directives:[{name:"has",rawName:"v-has",value:"redRuleList-list",expression:"'redRuleList-list'"},{name:"show",rawName:"v-show",value:t.total>0,expression:"total > 0"}],staticClass:"pagination",staticStyle:{width:"100%",position:"absolute",margin:"20px 0px"}},[i("div",{staticStyle:{height:"32px",float:"left","line-height":"32px"}},[t._v("\n\t\t\t\t\t\t\t\t共\n\t\t\t\t\t\t\t\t"),i("span",{staticStyle:{color:"blue"}},[t._v(t._s(t.total))]),t._v("条\n\t\t\t\t\t\t\t")]),i("div",{staticClass:"pagination",staticStyle:{height:"32px",float:"right"}},[i("a-pagination",{attrs:{total:t.total,showSizeChanger:"",showQuickJumper:t.quickJumper,current:t.page,pageSize:t.pageSize,pageSizeOptions:["15","30","50","100"]},on:{change:t.changePage,showSizeChange:t.showSizeChange}})],1)])],1)],1)])],1)],1)])},n=[],s=(i("96cf"),i("3b8d")),o=[{title:"规则名称",dataIndex:"name",key:"name",width:"180px"},{title:"发放类型",dataIndex:"type",key:"type",width:"20%",scopedSlots:{customRender:"type"}},{title:"推送文案",dataIndex:"sketch",key:"sketch",width:"25%",scopedSlots:{customRender:"sketch"}},{title:"感谢语",dataIndex:"thanking",key:"thanking",width:"180px",scopedSlots:{customRender:"thanking"}},{title:"操作",dataIndex:"action",key:"action",width:"200px",scopedSlots:{customRender:"action"}}],r={name:"redForNewRule",data:function(){return{suite_id:1,title:"",ruleList:[],isLoading:!0,commonUrl:this.$store.state.commonUrl,columns:o,total:0,quickJumper:!1,page:1,pageSize:15}},methods:{rowClassName:function(t,e){var i="dark-row";return e%2===0&&(i="light-row"),i},find:function(){this.getRuleList()},clear:function(){this.status=[],this.title="",this.page=1,this.pageSize=15,this.getRuleList()},addRule:function(){this.$router.push("/redForNew/ruleAdd")},getRuleList:function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(){var e,i,a,n,s=arguments;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=s.length>0&&void 0!==s[0]?s[0]:1,i=s.length>1&&void 0!==s[1]?s[1]:this.pageSize,this.isLoading=!0,t.next=5,this.axios.post("red-pack-rule/rule-list",{uid:localStorage.getItem("uid"),name:this.title,page:e,pageSize:i});case 5:a=t.sent,n=a.data,0!=n.error?(this.isLoading=!1,this.$message.error(n.error_msg)):(this.ruleList=n.data.list,this.isLoading=!1,this.total=parseInt(n.data.count),this.page=e,this.pageSize=i,this.quickJumper=this.total>this.pageSize);case 8:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),deleteActivity:function(t,e){var i=this;i.$confirm({title:"确定删除规则【"+e+"】？",okText:"确定",okType:"primary",cancelText:"取消",onOk:function(){i.isLoading=!0,i.changeStatus(t)}})},changeStatus:function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(e){var i,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.axios.post("red-pack-rule/rule-change-status",{uid:localStorage.getItem("uid"),id:e});case 2:i=t.sent,a=i.data,0!=a.error?(this.isLoading=!1,this.$message.error(a.error_msg)):(this.selectedRowKeys=[],1==this.ruleList.length&&this.page>1?this.getRuleList(this.page-1,this.pageSize):this.getRuleList(this.page,this.pageSize));case 5:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),edit:function(t){this.$router.push("/redForNew/ruleAdd?id="+t)},changePage:function(t,e){this.getRuleList(t,e),this.$nextTick((function(){document.getElementsByClassName("scroll")[0].scrollTo(0,0)}))},showSizeChange:function(t,e){this.getRuleList(1,e)}},mounted:function(){this.getRuleList()},beforeRouteEnter:function(t,e,i){"/redForNew/ruleAdd"==e.path&&"undefined"!=typeof t.query.isRefresh&&"1"==t.query.isRefresh?i((function(t){t.getRuleList(t.page,t.pageSize)})):"/redForNew/ruleAdd"==e.path&&"undefined"==typeof t.query.isRefresh||"/redForNew/ruleAdd"!=e.path?i((function(t){t.status=[],t.title="",t.activityTime=[],t.page=1,t.pageSize=15,t.corpId=localStorage.getItem("corpId")?localStorage.getItem("corpId"):"",t.getRuleList()})):i()}},d=r,l=(i("b8db"),i("2877")),c=Object(l["a"])(d,a,n,!1,null,"9393d578",null);e["default"]=c.exports},b8db:function(t,e,i){"use strict";var a=i("708b"),n=i.n(a);n.a},cc63:function(t,e,i){e=t.exports=i("2350")(!1),e.push([t.i,"#components-layout-demo-basic[data-v-9393d578]{height:100%}#components-layout-demo-basic .ant-layout-header[data-v-9393d578]{background:#fff;border-bottom:1px solid #e2e2e2;height:50px;min-width:885px;width:100%;line-height:50px}[data-v-9393d578] .ant-layout-header{padding:0 20px;font-size:16px;text-align:left}#components-layout-demo-basic .ant-layout-sider[data-v-9393d578]{background:#fff;-webkit-box-flex:0!important;-ms-flex:0 0 250px!important;flex:0 0 250px!important;max-width:250px!important;min-width:250px!important;width:250px!important;border-right:1px solid #e2e2e2}#components-layout-demo-basic .ant-layout-content[data-v-9393d578]{margin:0 20px 20px;min-width:885px;width:100%;padding-right:40px}.content-hd[data-v-9393d578]{height:60px;width:100%;min-width:885px;line-height:60px}.content-msg[data-v-9393d578]{width:100%;border:1px solid #ffdda6;background:#fff2db;padding:10px;margin-top:12px}.content-bd[data-v-9393d578]{background:#fff;min-height:120px;border:1px solid #e2e2e2;min-width:885px;width:100%}#components-layout-demo-basic>.ant-layout[data-v-9393d578]{margin-bottom:48px}#components-layout-demo-basic>.ant-layout[data-v-9393d578]:last-child{margin:0}.ant-layout.ant-layout-has-sider[data-v-9393d578],.list[data-v-9393d578]{height:100%}.btn-primary[data-v-9393d578]{margin-left:20px}[data-v-9393d578] .dark-row{background:#fafafa}[data-v-9393d578] .light-row{background:#fff}[data-v-9393d578] .ant-radio-button-wrapper{width:90px;margin:0;text-align:center}",""])}}]);