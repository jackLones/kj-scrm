(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-198396f5"],{"0796":function(t,e,a){"use strict";var i=a("1621"),s=a.n(i);s.a},"0f93":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticStyle:{width:"100%",height:"100%",position:"absolute","overflow-y":"auto","padding-bottom":"30px"}},[a("div",[a("div",{staticStyle:{height:"50px","line-height":"50px","background-color":"#FFFFFF"}},[a("label",{staticStyle:{"margin-left":"20px"}},[t._v("\n\t\t\t\t\t"+t._s(t.title)+"：\n\t\t\t\t")]),a("a-button",{staticStyle:{float:"right",margin:"9px 20px 0 0"},attrs:{type:"primary",icon:"rollback"},on:{click:t.rollback}},[t._v("\n\t\t\t\t\t返回列表\n\t\t\t\t")])],1)]),a("div",{staticClass:"participants"},[a("div",{staticStyle:{"margin-bottom":"10px"}},[a("span",{directives:[{name:"has",rawName:"v-has",value:"record-list",expression:"'record-list'"}],staticClass:"tabBtn",class:{activeBtn:1==t.tabKey},on:{click:function(e){return t.changeTab("1")}}},[t._v("获奖名单")]),a("span",{directives:[{name:"has",rawName:"v-has",value:"player-list",expression:"'player-list'"}],staticClass:"tabBtn",class:{activeBtn:2==t.tabKey},on:{click:function(e){return t.changeTab("2")}}},[t._v("玩家列表")])]),a("div",{directives:[{name:"show",rawName:"v-show",value:1==t.tabKey,expression:"tabKey == 1"},{name:"has",rawName:"v-has",value:"record-list",expression:"'record-list'"}]},[a("a-input",{staticStyle:{width:"270px","margin-right":"10px"},attrs:{placeholder:"请输入关键字",enterButton:"搜索"},model:{value:t.nick_name,callback:function(e){t.nick_name=e},expression:"nick_name"}}),a("a-button",{attrs:{type:"primary"},on:{click:t.onSearch}},[t._v("查找")]),a("a-button",{staticStyle:{"margin-left":"10px"},on:{click:t.clear}},[t._v("清除")]),a("div",{staticStyle:{"margin-bottom":"16px",float:"right"}},[a("a-dropdown",[a("a-menu",{attrs:{slot:"overlay"},on:{click:t.chooseDownType},slot:"overlay"},[a("a-menu-item",{key:"0"},[t._v("当前页导出")]),a("a-menu-item",{key:"1"},[t._v("全部导出")])],1),a("a-button",{staticStyle:{margin:"0 10px 10px 0"},attrs:{type:"primary",icon:"download"}},[t._v("导出\n\t\t\t\t\t\t\t"),a("a-icon",{staticStyle:{color:"#FFFFFF"},attrs:{type:"down"}})],1)],1),a("a-popconfirm",{attrs:{okText:"确定",cancelText:"取消"},on:{confirm:function(e){return t.start("")}}},[a("template",{slot:"title"},[a("div",[t._v("确定核销吗？")])]),a("a-button",{directives:[{name:"has",rawName:"v-has",value:"record-destroy",expression:"'record-destroy'"}],attrs:{type:"primary",disabled:!t.hasSelected,loading:t.loading}},[t._v("\n\t\t\t\t\t\t\t核销/领取\n\t\t\t\t\t\t")])],2)],1),a("div",{staticClass:"content-bd"},[a("a-spin",{attrs:{tip:"Loading...",size:"large",spinning:t.isLoading}},[a("a-table",{attrs:{rowSelection:t.rowSelection,columns:t.columns1,dataSource:t.participantsList,rowClassName:t.rowClassName,pagination:!1},scopedSlots:t._u([{key:"avatar",fn:function(t,e){return a("span",{},[a("a-avatar",{attrs:{shape:"square",size:42,src:t}})],1)}},{key:"tags_name",fn:function(e,i){return a("span",{},[0==i.tags_name.length?[t._v("--")]:t._e(),0!=i.tags_name.length?t._l(i.tags_name,(function(e){return a("a-tag",{attrs:{color:"blue"}},[t._v(t._s(e))])})):t._e()],2)}},{key:"status",fn:function(e,i){return a("span",{},[0==e?a("span",[0==i.prize_type?a("span",[t._v("未核销")]):t._e(),1==i.prize_type?a("span",[t._v("未领取")]):t._e()]):t._e(),1==e?a("span",[0==i.prize_type?a("span",[t._v("已核销")]):t._e(),1==i.prize_type?a("span",[t._v("已领取")]):t._e()]):t._e()])}},{key:"action",fn:function(e,i){return a("span",{},[a("a-popconfirm",{attrs:{okText:"确定",cancelText:"取消"},on:{confirm:function(e){return t.start(i.id)}}},[a("template",{slot:"title"},[0==i.prize_type?a("div",[t._v("确定核销吗？")]):t._e(),1==i.prize_type?a("div",[t._v("确定发放吗？")]):t._e()]),0==i.status?a("a-button",{directives:[{name:"has",rawName:"v-has",value:"record-destroy",expression:"'record-destroy'"}],staticStyle:{margin:"0 5px 5px 0"}},[0==i.prize_type?a("span",[t._v("核销")]):t._e(),1==i.prize_type?a("span",[t._v("发放")]):t._e()]):t._e()],2),0!=i.status?a("span",[t._v("--")]):t._e()],1)}}])}),a("div",{directives:[{name:"show",rawName:"v-show",value:t.total>0,expression:"total > 0"}],staticClass:"pagination",staticStyle:{width:"100%",position:"absolute",margin:"40px 0px 20px"}},[a("div",{staticStyle:{height:"32px",float:"left","line-height":"32px"}},[t._v("\n\t\t\t\t\t\t\t\t共\n\t\t\t\t\t\t\t\t"),a("span",{staticStyle:{color:"blue"}},[t._v(t._s(t.total))]),t._v("条\n\t\t\t\t\t\t\t")]),a("div",{staticClass:"pagination",staticStyle:{height:"32px",float:"right"}},[a("a-pagination",{attrs:{total:t.total,showSizeChanger:"",showQuickJumper:t.quickJumper,current:t.page,pageSize:t.pageSize,pageSizeOptions:["15","30","50","100"]},on:{change:t.changePage,showSizeChange:t.showSizeChange}})],1)])],1)],1)],1),a("div",{directives:[{name:"show",rawName:"v-show",value:2==t.tabKey,expression:"tabKey == 2"},{name:"has",rawName:"v-has",value:"player-list",expression:"'player-list'"}]},[a("a-input",{staticStyle:{width:"270px","margin-bottom":"16px","margin-right":"10px"},attrs:{placeholder:"请输入关键字",enterButton:"搜索"},model:{value:t.nick_name2,callback:function(e){t.nick_name2=e},expression:"nick_name2"}}),a("a-button",{attrs:{type:"primary"},on:{click:t.onSearch}},[t._v("查找")]),a("a-button",{staticStyle:{"margin-left":"10px"},on:{click:t.clear}},[t._v("清除")]),a("div",{staticStyle:{float:"right"}},[a("a-dropdown",[a("a-menu",{attrs:{slot:"overlay"},on:{click:t.chooseDownType},slot:"overlay"},[a("a-menu-item",{key:"0"},[t._v("当前页导出")]),a("a-menu-item",{key:"1"},[t._v("全部导出")])],1),a("a-button",{staticStyle:{margin:"0 10px 10px 0"},attrs:{type:"primary",icon:"download"}},[t._v("导出\n\t\t\t\t\t\t\t"),a("a-icon",{staticStyle:{color:"#FFFFFF"},attrs:{type:"down"}})],1)],1)],1),a("a-spin",{attrs:{tip:"Loading...",size:"large",spinning:t.isLoading}},[a("a-table",{attrs:{columns:t.columns2,dataSource:t.participantsList2,pagination:!1,rowClassName:t.rowClassName},scopedSlots:t._u([{key:"nick_name",fn:function(e,i){return a("span",{},[a("a-avatar",{staticStyle:{"margin-right":"5px"},attrs:{shape:"square",size:42,src:i.avatar}}),t._v("\n\t\t\t\t\t\t\t"+t._s(i.nick_name)+"\n\t\t\t\t\t\t")],1)}},{key:"tags_name",fn:function(e,i){return a("span",{},[0==i.tags_name.length?[t._v("--")]:t._e(),0!=i.tags_name.length?t._l(i.tags_name,(function(e){return a("a-tag",{attrs:{color:"blue"}},[t._v(t._s(e))])})):t._e()],2)}},{key:"has_num",fn:function(e,i){return a("span",{},[t._v("\n\t\t\t\t\t\t\t\t"+t._s(i.has_num)+"次 / "+t._s(i.total_num)+"次\n\t\t\t\t\t\t\t")])}},{key:"action",fn:function(e,i){return a("span",{},[a("a-button",{staticStyle:{margin:"0 5px 5px 0"},on:{click:function(e){return t.lookDraw(i.award_id,i.key,i.nick_name)}}},[t._v("查看抽奖")]),a("a-button",{staticStyle:{margin:"0 5px 5px 0"},on:{click:function(e){return t.lookHelp(i.key,i.nick_name)}}},[t._v("查看助力")])],1)}}])}),a("div",{directives:[{name:"show",rawName:"v-show",value:t.total2>0,expression:"total2 > 0"}],staticClass:"pagination",staticStyle:{width:"100%",position:"absolute",margin:"40px 0px 20px"}},[a("div",{staticStyle:{height:"32px",float:"left","line-height":"32px"}},[t._v("\n\t\t\t\t\t\t\t共\n\t\t\t\t\t\t\t"),a("span",{staticStyle:{color:"blue"}},[t._v(t._s(t.total2))]),t._v("条\n\t\t\t\t\t\t")]),a("div",{staticClass:"pagination",staticStyle:{height:"32px",float:"right"}},[a("a-pagination",{attrs:{total:t.total2,showSizeChanger:"",showQuickJumper:t.quickJumper2,current:t.page2,pageSize:t.pageSize2,pageSizeOptions:["15","30","50","100"]},on:{change:t.changePage2,showSizeChange:t.showSizeChange2}})],1)])],1)],1)]),a("a-modal",{attrs:{width:"888px!important",title:"客户标签"},on:{ok:t.handleTag,cancel:t.handleCancelTag},model:{value:t.tagVisible,callback:function(e){t.tagVisible=e},expression:"tagVisible"}},[t.tagVisible?a("corpChooseTagModal",{attrs:{callback:t.chooseTags,isNotAdd:1,tagname:t.tagName2,hasChoose:t.tag_arr2}}):t._e()],1),a("a-modal",{attrs:{title:"导出进度",footer:!1,closable:t.progressCloseable,maskClosable:!1,maskStyle:{left:t.leftSiderWidth},wrapClassName:"mask-dialog"},on:{cancel:t.progressCancel},model:{value:t.progressVisible,callback:function(e){t.progressVisible=e},expression:"progressVisible"}},[a("div",{staticStyle:{"text-align":"center"}},[a("a-progress",{staticClass:"download-progress",attrs:{"stroke-linecap":"square",percent:t.progressNum,type:"circle",width:t.progressWidth}}),100==t.progressNum?a("p",{staticStyle:{margin:"20px auto"}},[t._v("已导出成功，请点击"),a("span",{staticStyle:{color:"#1890FF",cursor:"pointer"},on:{click:t.progressDownload}},[t._v("下载")])]):t._e()],1)])],1)},s=[],n=a("75fc"),r=(a("20d6"),a("28a5"),a("ac6a"),a("96cf"),a("3b8d")),o=a("9e0c"),l=[{title:"昵称",dataIndex:"nick_name",key:"nick_name",width:"200px"},{title:"头像",dataIndex:"avatar",key:"avatar",scopedSlots:{customRender:"avatar"}},{title:"中奖标签",dataIndex:"tags_name",key:"tags_name",scopedSlots:{customRender:"tags_name"}},{title:"奖品",dataIndex:"award_name",key:"award_name"},{title:"参与时间",dataIndex:"create_time",key:"create_time"},{title:"领取状态",dataIndex:"status",key:"status",scopedSlots:{customRender:"status"}},{title:"操作",dataIndex:"action",key:"action",width:"15%",scopedSlots:{customRender:"action"}}],c=[{title:"参与人信息（头像+昵称）",dataIndex:"nick_name",key:"nick_name",scopedSlots:{customRender:"nick_name"}},{title:"客户标签",dataIndex:"tags_name",key:"tags_name",scopedSlots:{customRender:"tags_name"}},{title:"已中奖/当前总抽奖次数",dataIndex:"has_num",key:"has_num",scopedSlots:{customRender:"has_num"}},{title:"最后一次抽奖时间",dataIndex:"last_time",key:"last_time"},{title:"操作",dataIndex:"action",key:"action",scopedSlots:{customRender:"action"}}],p={name:"raffleParticipants",data:function(){var t=localStorage.getItem("permissionButton")&&localStorage.getItem("permissionButton").indexOf("record-list")>0?this.$store.state.raffleParticipantsTabKey:"2";return{isLoading:!1,fid:"",title:"",tabKey:t,columns1:l,columns2:c,tagVisible:!1,tag_arr1:[],tagName1:[],tag_arr2:[],tagName2:[],tag_arr3:[],tagName3:[],progressVisible:!1,progressNum:0,leftSiderWidth:document.getElementsByClassName("menu-sider")[0].style.width,downLoadUrl:"",progressWidth:120,progressCloseable:!1,participantsList:[],nick_name:"",selectedRowKeys:[],userKeys:[],loading:!1,total:0,quickJumper:!1,page:1,pageSize:15,participantsList2:[],nick_name2:"",total2:0,quickJumper2:!1,page2:1,pageSize2:15,is_record:1,is_all:"0"}},components:{corpChooseTagModal:o["a"]},methods:{rowClassName:function(t,e){var a="dark-row";return e%2===0&&(a="light-row"),a},rollback:function(){this.$router.go(-1)},participants:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(){var e,a,i,s,n,r=arguments;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=r.length>0&&void 0!==r[0]?r[0]:1,a=r.length>1&&void 0!==r[1]?r[1]:this.pageSize,i=r.length>2?r[2]:void 0,this.isLoading=!0,t.next=6,this.axios.post("awards-activity/records",{uid:localStorage.getItem("uid"),award_id:this.fid,page:e,pageSize:a,is_all:this.is_all,tags:this.tag_arr1,is_export:i,is_record:this.is_record,nick_name:this.nick_name});case 6:s=t.sent,n=s.data,0!=n.error?(this.isLoading=!1,this.$message.error(n.error_msg)):1!=i?(this.participantsList=n.data.info,this.userKeys=n.data.keys,this.isLoading=!1,this.total=parseInt(n.data.count),this.page=e,this.pageSize=a,this.quickJumper=this.total>this.pageSize):(this.progressVisible=!0,this.progressCloseable=!1,this.progressNum=0,this.progressWidth=120,this.moveMask(),this.isLoading=!1);case 9:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),participants2:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(){var e,a,i,s,n,r=arguments;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=r.length>0&&void 0!==r[0]?r[0]:1,a=r.length>1&&void 0!==r[1]?r[1]:this.pageSize2,i=r.length>2?r[2]:void 0,this.isLoading=!0,t.next=6,this.axios.post("awards-activity/awards-join",{id:this.fid,is_all:this.is_all,is_export:i,tags:this.tag_arr3,page:e,pageSize:a,nick_name:this.nick_name2});case 6:s=t.sent,n=s.data,0!=n.error?(this.isLoading=!1,this.$message.error(n.error_msg)):1!=i?(this.participantsList2=n.data.info,this.isLoading=!1,this.total2=parseInt(n.data.count),this.page2=e,this.pageSize2=a,this.quickJumper2=this.total2>this.pageSize2):(this.progressVisible=!0,this.progressCloseable=!1,this.progressNum=0,this.progressWidth=120,this.moveMask(),this.isLoading=!1);case 9:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),changePage:function(t,e){this.is_all="0",this.participants(t,e)},showSizeChange:function(t,e){this.is_all="0",this.participants(1,e)},changePage2:function(t,e){this.is_all="0",this.participants2(t,e)},showSizeChange2:function(t,e){this.is_all="0",this.participants2(1,e)},changeTab:function(t){this.is_all="0",this.tabKey=t,1==t?(this.is_record=1,this.nick_name="",this.participants()):2==t&&(this.is_record=0,this.nick_name2="",this.participants2()),this.$store.commit("changeRaffleParticipantsTabKey",t)},chooseTag:function(){1==this.tabKey?(this.tag_arr2=JSON.parse(JSON.stringify(this.tag_arr1)),this.tagName2=JSON.parse(JSON.stringify(this.tagName1))):(this.tag_arr2=JSON.parse(JSON.stringify(this.tag_arr3)),this.tagName2=JSON.parse(JSON.stringify(this.tagName3))),this.tagVisible=!0},handleTag:function(){1==this.tabKey?(this.tag_arr1=JSON.parse(JSON.stringify(this.tag_arr2)),this.tagName1=JSON.parse(JSON.stringify(this.tagName2))):(this.tag_arr3=JSON.parse(JSON.stringify(this.tag_arr2)),this.tagName3=JSON.parse(JSON.stringify(this.tagName2))),this.tagVisible=!1},handleCancelTag:function(){this.tag_arr2=[],this.tagName2=[],this.tagVisible=!1},chooseTags:function(t,e,a){"ok"==t&&(""!=e?(this.tag_arr2=e.split(","),this.tagName2=a):(this.tag_arr2=[],this.tagName2=[]))},onSearch:function(){this.is_all="0",1==this.tabKey?this.participants():2==this.tabKey&&this.participants2()},clear:function(){this.is_all="0",1==this.tabKey?(this.tag_arr1=[],this.tagName1=[],this.nick_name="",this.participants()):2==this.tabKey&&(this.tag_arr3=[],this.tagName3=[],this.nick_name2="",this.participants2())},chooseDownType:function(t){this.is_all=t.key,this.is_export=1,1==this.tabKey?this.participants(this.page,this.pageSize,1):2==this.tabKey&&this.participants2(this.page2,this.pageSize2,1)},moveMask:function(){this.leftSiderWidth=document.getElementsByClassName("menu-sider")[0].style.width,this.$nextTick((function(){document.getElementsByClassName("mask-dialog")[0].style.left=document.getElementsByClassName("menu-sider")[0].style.width}))},progressDownload:function(){window.open(this.downLoadUrl),this.progressCancel()},progressCancel:function(){sessionStorage.removeItem("raffeDownLoadUrl"),this.progressVisible=!1},start:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(e){var a,i,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=[],a=""==e||null==e?this.selectedRowKeys:e,t.next=4,this.axios.post("awards-activity/update-status",{id:a,award_id:this.fid});case 4:i=t.sent,s=i.data,0!=s.error?(this.loading=!1,this.$message.error(s.error_msg)):(this.$message.success(s.data.textHtml),this.loading=!1,this.selectedRowKeys=[],this.participants());case 7:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),onSelectChange:function(t){this.selectedRowKeys=t},lookDraw:function(t,e,a){this.$router.push("/raffle/drawDetail?award_id="+t+"&join_id="+e+"&title="+a)},lookHelp:function(t,e){this.$router.push("/raffle/helpDetail?join_id="+t+"&title="+e)},websocketOnMessage:function(t){"undefined"!=typeof t.type&&"export_awards"==t.type&&(this.progressVisible=!0,this.leftSiderWidth=document.getElementsByClassName("menu-sider")[0].style.width,this.$nextTick((function(){document.getElementsByClassName("mask-dialog")[0].style.left=document.getElementsByClassName("menu-sider")[0].style.width})),this.progressNum=parseInt(t.export_num/t.num*100),100==this.progressNum&&(this.progressWidth=100,this.downLoadUrl=t.url,this.progressCloseable=!0),""!=t.url&&sessionStorage.setItem("raffeDownLoadUrl",this.downLoadUrl))}},mounted:function(){this.title=decodeURIComponent(this.$route.query.title),this.fid=decodeURIComponent(this.$route.query.fid),1==this.tabKey?this.participants():2==this.tabKey&&this.participants2(),this.ws.setCallback(this.websocketOnMessage)},beforeRouteEnter:function(t,e,a){"/raffle/drawDetail"!=e.path&&"/raffle/helpDetail"!=e.path&&a((function(t){t.ws.setCallback(t.websocketOnMessage),sessionStorage.getItem("raffeDownLoadUrl")&&(t.progressCloseable=!0,t.progressNum=100,t.progressWidth=100,t.downLoadUrl=sessionStorage.getItem("raffeDownLoadUrl"),t.progressVisible=!0,t.moveMask()),t.title=decodeURIComponent(t.$route.query.title),t.fid=decodeURIComponent(t.$route.query.fid),t.nick_name="",t.nick_name2="",t.page=1,t.pageSize=15,t.tag_arr1=[],t.tagName1=[],t.tag_arr2=[],t.tagName2=[],t.tag_arr3=[],t.tagName3=[],t.is_all="0",t.tabKey=localStorage.getItem("permissionButton")&&localStorage.getItem("permissionButton").indexOf("record-list")>0?t.$store.state.raffleParticipantsTabKey:"2",1==t.tabKey?t.participants():2==t.tabKey&&t.participants2()})),a()},computed:{rowSelection:function(){var t=this,e=this,a=this.selectedRowKeys;return{selectedRowKeys:a,onChange:this.onSelectChange,hideDefaultSelections:!0,selections:[{key:"current-data",text:"当前页",onSelect:function(e){var a=t;t.participantsList.map((function(t){var e=a.selectedRowKeys.findIndex((function(e){return e===t.id}));e>=0&&a.selectedRowKeys.splice(e,1)}));for(var i=0;i<e.length;i++)a.selectedRowKeys.push(e[i])}},{key:"all-data",text:"选择所有项",onSelect:function(){e.selectedRowKeys=Object(n["a"])(e.userKeys.valueOf())}}],getCheckboxProps:function(t){return{props:{disabled:1==t.status}}}}},hasSelected:function(){return this.selectedRowKeys.length>0}}},d=p,h=(a("0796"),a("2877")),g=Object(h["a"])(d,i,s,!1,null,"0e882df7",null);e["default"]=g.exports},1621:function(t,e,a){var i=a("5243");"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var s=a("499e").default;s("3dd1c5ec",i,!0,{sourceMap:!1,shadowMode:!1})},5243:function(t,e,a){e=t.exports=a("2350")(!1),e.push([t.i,".participants[data-v-0e882df7]{margin:10px 20px;background-color:#fff;padding:20px}.content-bd[data-v-0e882df7],[data-v-0e882df7] .ant-tabs-bar{background:#fff}.content-bd[data-v-0e882df7]{min-height:120px;min-width:885px}[data-v-0e882df7] .ant-tabs-top-content{padding-bottom:60px}.tabBtn[data-v-0e882df7]{margin:0;margin-right:2px;padding:10px 16px;line-height:38px;background:#fafafa;border:1px solid #e8e8e8;border-bottom:0;border-radius:4px 4px 0 0;cursor:pointer}.activeBtn[data-v-0e882df7]{color:#1890ff;background:#fff}",""])},"750c":function(t,e,a){e=t.exports=a("2350")(!1),e.push([t.i,"[data-v-eaddd328] .ant-tree-checkbox{float:right}[data-v-eaddd328] .ant-tree-iconEle{display:none!important}[data-v-eaddd328] .ant-tree-node-content-wrapper.ant-tree-node-selected{background-color:#fff!important}[data-v-eaddd328] .ant-list-item{border-bottom:0;padding:0}[data-v-eaddd328] .ant-list-item-meta-title{font-weight:400;line-height:32px}[data-v-eaddd328] .ant-tree li span.ant-tree-checkbox{margin:4px 20px 0 2px}.content-msg[data-v-eaddd328]{color:red;margin:0 20px 12px 0}.group-name[data-v-eaddd328]{overflow:hidden;white-space:nowrap;text-overflow:ellipsis;width:calc(100% - 4px);display:inline-block;vertical-align:bottom;line-height:21px}.tabBox[data-v-eaddd328]{background:#fff;-webkit-box-sizing:border-box;box-sizing:border-box}[data-v-eaddd328] .ant-tag-checkable{background-color:#fafafa;border-color:#d9d9d9;font-size:13px}[data-v-eaddd328] .ant-tag-checkable-checked{background-color:#1890ff}[data-v-eaddd328] .ant-col-20{margin-left:20px;width:calc(83.33333% - 20px)}.add-tag-group[data-v-eaddd328] .ant-col-20{margin-left:0;width:83.33333333%}.l-h-30[data-v-eaddd328]{line-height:30px}",""])},"9e0c":function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"tabBox"},[a("a-empty",{directives:[{name:"show",rawName:"v-show",value:0==t.groupList.length&&1==t.isNotAdd,expression:"groupList.length == 0 && isNotAdd == 1"}]},[a("span",{attrs:{slot:"description"},slot:"description"},[t._v("\n\t\t\t尚未创建标签，无法选择标签\n\t\t")])]),t._l(t.groupList,(function(e,i){return[t.isMore||!t.isMore&&i<5?a("div",[a("span",{staticClass:"group-name mb-10"},[e.name&&""!=e.name?a("a-popover",{attrs:{trigger:"hover"}},[a("span",{staticStyle:{display:"inline-block","max-width":"500px","word-wrap":"break-word","word-break":"break-all"},attrs:{slot:"content"},slot:"content"},[t._v("\n\t\t\t\t\t\t"+t._s(e.name)+"\n\t\t\t\t\t")]),a("span",{staticStyle:{"font-weight":"700"}},[t._v(" "+t._s(e.name)+"：")])]):t._e()],1),t._l(e.data,(function(s,n){return a("span",[e.disabled[n]?t._e():a("a-checkable-tag",{staticClass:"h-30 l-h-30 mb-10",on:{change:function(e){return t.changeTags(s.id,i,s.tagname)}},model:{value:e.checked[n],callback:function(a){t.$set(e.checked,n,a)},expression:"item.checked[tagIndex]"}},[t._v("\n\t\t\t\t\t"+t._s(s.tagname)+"\n\t\t\t\t")]),e.disabled[n]&&1==t.isDisabled?a("a-button",{staticStyle:{margin:"5px","line-height":"26px","font-size":"12px",height:"auto !important",padding:"0 7px"},attrs:{disabled:e.disabled[n]&&1==t.isDisabled}},[t._v("\n\t\t\t\t\t"+t._s(s.tagname)+"\n\t\t\t\t")]):t._e()],1)})),1!=t.isNotAdd?a("a-button",{directives:[{name:"has",rawName:"v-has",value:"client-tag-add",expression:"'client-tag-add'"}],staticStyle:{"font-size":"13px",height:"30px",color:"#1E90FF","border-color":"#1E90FF"},attrs:{icon:"plus"},on:{click:function(a){return t.createTag(e.id)}}},[t._v("\n\t\t\t\t添加\n\t\t\t")]):t._e()],2):t._e()]})),t.groupList.length>5?a("div",{staticStyle:{"font-size":"13px",height:"26px",color:"#1890FF","text-align":"center",cursor:"pointer"},on:{click:t.showMore}},[t.isMore?t._e():[t._v("更多")],t.isMore?[t._v("收起")]:t._e(),a("a-icon",{attrs:{type:t.isMore?"arrow-up":"arrow-down"}})],2):t._e(),t.groupList.length>0&&1!=t.isNotAdd?a("a-button",{directives:[{name:"has",rawName:"v-has",value:"client-tag-group-add",expression:"'client-tag-group-add'"}],staticStyle:{"font-size":"13px",height:"26px","margin-right":"10px",color:"#1E90FF"},attrs:{icon:"plus"},on:{click:t.addTagGroup}},[t._v("\n\t\t新建标签组\n\t")]):t._e(),a("a-modal",{attrs:{title:"新建标签",zIndex:99999,confirmLoading:t.confirmLoading3,width:"550px"},on:{ok:function(e){return t.handleOk(t.inputValue)},cancel:t.cancel},model:{value:t.visible,callback:function(e){t.visible=e},expression:"visible"}},[a("a-form-item",{attrs:{"label-col":{span:4},"wrapper-col":{span:20}}},[a("template",{slot:"label"},[t._v("\n\t\t\t\t选择分组\n\t\t\t")]),a("a-select",{staticStyle:{width:"250px"},attrs:{showSearch:"",optionFilterProp:"children",disabled:""},model:{value:t.group_id,callback:function(e){t.group_id=e},expression:"group_id"}},t._l(t.groupList,(function(e){return a("a-select-option",{attrs:{value:e.id}},[t._v("\n\t\t\t\t\t"+t._s(e.name)+"\n\t\t\t\t")])})),1)],2),a("a-form-item",{attrs:{"label-col":{span:4},"wrapper-col":{span:20}}},[a("template",{slot:"label"},[t._v("\n\t\t\t\t标签名称\n\t\t\t")]),a("p",{staticStyle:{margin:"0px","font-size":"13px",color:"#909399"}},[t._v("\n\t\t\t\t每个标签名称最多15个字。同时新建多个标签时，请用“空格”隔开")]),a("a-input",{attrs:{placeholder:"请输入标签（不得超过15个字符）"},model:{value:t.inputValue,callback:function(e){t.inputValue=e},expression:"inputValue"}})],2)],1),a("a-modal",{staticClass:"add-tag-group",attrs:{zIndex:99999,title:"新建标签组",visible:t.groupVisible,confirmLoading:t.confirmLoading},on:{ok:t.handleOk2,cancel:t.handleCancel}},[a("a-form-item",{staticClass:"current0",attrs:{"label-col":{span:4},"wrapper-col":{span:20}}},[a("template",{slot:"label"},[a("span",{staticStyle:{color:"red"}},[t._v("*")]),t._v("分组名称\n\t\t\t")]),a("a-input",{attrs:{placeholder:"请输入分组名(不得超过15个字符)",maxLength:15},model:{value:t.teamName,callback:function(e){t.teamName=e},expression:"teamName"}},[a("span",{attrs:{slot:"suffix"},slot:"suffix"},[a("span",[t._v(t._s(t.teamName.length))]),t._v("/15\n\t\t\t\t\t\t\t\t\t\t\t")])])],2),a("a-form-item",{staticClass:"current0",attrs:{"label-col":{span:4},"wrapper-col":{span:20}}},[a("template",{slot:"label"},[a("span",{staticStyle:{color:"red"}},[t._v("*")]),t._v("标签名称\n\t\t\t")]),a("p",{staticStyle:{margin:"0px","font-size":"13px",color:"#909399"}},[t._v("\n\t\t\t\t每个标签名称最多15个字。同时新建多个标签时，请用“空格”隔开\n\t\t\t")]),a("a-input",{attrs:{placeholder:"请输入标签（不得超过15个字符）"},model:{value:t.inputValue2,callback:function(e){t.inputValue2=e},expression:"inputValue2"}})],2)],1)],2)},s=[],n=(a("a481"),a("28a5"),a("6762"),a("2fdb"),a("96cf"),a("3b8d")),r=(a("c5f6"),{name:"corpChooseTagModal",props:{callback:{type:Function,default:null},hasChoose:{type:Array,default:function(){}},tagname:{type:Array,default:function(){}},isDisabled:{type:Number,default:0},disabledTag:{type:Array,default:function(){}},isNotAdd:{type:Number,default:0},id:{type:String,default:""}},data:function(){return{corpId:"",groupList:[],tag_arr:[],tag_ids:"",tagName:[],group_id:[],checked:[],visible:!1,confirmLoading3:!1,inputValue:"",newTagList:[],isMore:!1,groupVisible:!1,confirmLoading:!1,teamName:"",inputValue2:"",newTagList2:[]}},watch:{hasChoose:{handler:function(t){var e=this;"undefined"!=typeof t&&this.groupList.length&&(this.tag_arr=t,this.tag_ids=t.join(),this.tagName=JSON.parse(JSON.stringify(this.tagname)),this.hasChoose.map((function(t){e.groupList.map((function(e){e.data.map((function(a,i){t==a.id&&(e.checked[i]=!0)}))}))})),0==t.length&&this.groupList.map((function(t){t.checked=[]})),this.$forceUpdate())},deep:!0},id:{handler:function(t){""!=typeof t&&(this.corpId=t,this.getTags())},deep:!0},disabledTag:{handler:function(t){var e=this;"undefined"!=typeof t&&this.groupList.length&&(this.disabledTag.map((function(t){e.groupList.map((function(e){e.data.map((function(a,i){t==a.id&&(e.disabled[i]=!0)}))}))})),this.$forceUpdate())},deep:!0}},methods:{getTags:function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(){var e,a,i=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.axios.post("work-tag-group/tag-group",{corp_id:this.corpId||localStorage.getItem("corpId"),is_not_add:this.isNotAdd});case 2:e=t.sent,a=e.data,0!=a.error?this.$message.error(a.error_msg):(this.groupList=a.data,this.groupList.map((function(t){t.checked=[],t.disabled=[]})),"undefined"!=typeof this.disabledTag&&this.disabledTag.length>0&&this.disabledTag.map((function(t){i.groupList.map((function(e){e.data.map((function(a,i){t==a.id&&(e.disabled[i]=!0)}))}))})),"undefined"!=typeof this.hasChoose&&this.hasChoose.length>0&&(this.tag_arr=this.hasChoose,this.tag_ids=this.hasChoose.join(),this.tagName=JSON.parse(JSON.stringify(this.tagname)),this.hasChoose.map((function(t){i.groupList.map((function(e){e.data.map((function(a,i){t==a.id&&(e.checked[i]=!0)}))}))})),this.$forceUpdate()));case 5:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),changeTags:function(t,e,a){Array.prototype.indexOf=function(t){for(var e=0;e<this.length;e++)if(this[e]==t)return e;return-1},Array.prototype.remove=function(t){var e=this.indexOf(t);e>-1&&this.splice(e,1)};var i=String(t);if(this.tag_arr.includes(i))this.tagName.splice(this.tag_arr.indexOf(i),1),this.tag_arr.remove(i);else if(this.tag_arr.length+1>9999){this.$message.warning("不可选中，客户标签数量上限9999个");for(var s=0;s<this.groupList[e].data.length;s++)this.groupList[e].data[s].id==i&&(this.groupList[e].checked[s]=!1)}else this.tag_arr.push(i),this.tagName.push(a);this.$forceUpdate(),this.tag_ids=this.tag_arr.join(),null!==this.callback&&"function"===typeof this.callback&&this.callback("ok",this.tag_ids,this.tagName)},createTag:function(t){this.group_id=t;var e=0;if(this.groupList.map((function(t){e+=t.data.length})),e>=9999)return this.$message.warning("标签数量已超过上限9999个，无法创建"),!1;this.visible=!0},handleOk:function(t){var e=this;if(e.confirmLoading3=!0,""==t)return e.$message.warning("不能为空"),e.confirmLoading3=!1,!1;for(var a=0;a<t.split(" ").length;a++){if(t.split(" ")[a].length>15)return e.$message.error("每个标签最多15个字"),e.confirmLoading3=!1,!1;t.split(" ")[a].length>0&&e.newTagList.push(t.split(" ")[a])}e.addTags(),e.inputValue="",e.newTagList=[],e.confirmLoading3=!1},addTags:function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(){var e,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.axios.post("work-tag/add",{corp_id:this.corpId||localStorage.getItem("corpId"),suite_id:1,type:0,group_id:this.group_id,name:this.newTagList});case 2:e=t.sent,a=e.data,0!=a.error?(this.$message.error(a.error_msg),this.confirmLoading3=!1):(this.isLoading=!1,this.visible=!1,this.confirmLoading3=!1,this.getTags(),this.inputValue="",this.newTagList=[]);case 5:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),cancel:function(){this.visible=!1,this.inputValue=""},showMore:function(){this.isMore=!this.isMore},addTagGroup:function(){this.groupVisible=!0},handleCancel:function(){this.groupVisible=!1,this.teamName="",this.newTagList2=[],this.inputValue2=""},handleOk2:function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(){var e,a,i,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(String.prototype.Trim=function(){return this.replace(/(^\s*)|(\s*$)/g,"")},this.teamName=this.teamName.Trim(),this.teamName){t.next=5;break}return this.$message.error("请输入分组名"),t.abrupt("return",!1);case 5:if(""!=this.inputValue2){t.next=10;break}return this.$message.warning("标签名称不能为空"),t.abrupt("return",!1);case 10:e=JSON.parse(JSON.stringify(this.inputValue2)).split(" "),a=0;case 12:if(!(a<e.length)){t.next=23;break}if(!(e[a].length>15)){t.next=19;break}return this.$message.error("每个标签最多15个字"),this.inputValue2="",t.abrupt("return",!1);case 19:e[a].length>0&&this.newTagList2.push(e[a]);case 20:a++,t.next=12;break;case 23:return this.confirmLoading=!0,t.next=26,this.axios.post("work-tag-group/add",{corp_id:this.corpId||localStorage.getItem("corpId"),suite_id:1,name:this.teamName,type:0,isMasterAccount:localStorage.getItem("isMasterAccount"),sub_id:localStorage.getItem("sub_id"),tag_name:this.newTagList2});case 26:i=t.sent,s=i.data,0!=s.error?this.$message.error(s.error_msg):(this.teamName="",this.newTagList2=[],this.inputValue2="",this.groupVisible=!1,this.getTags()),this.confirmLoading=!1;case 30:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},mounted:function(){this.corpId=this.id||localStorage.getItem("corpId"),this.getTags()}}),o=r,l=(a("d128"),a("2877")),c=Object(l["a"])(o,i,s,!1,null,"eaddd328",null);e["a"]=c.exports},bbaf:function(t,e,a){var i=a("750c");"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var s=a("499e").default;s("5de9c110",i,!0,{sourceMap:!1,shadowMode:!1})},d128:function(t,e,a){"use strict";var i=a("bbaf"),s=a.n(i);s.a}}]);