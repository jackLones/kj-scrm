(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1646a5c2"],{"428b":function(t,e,a){"use strict";var s=a("d8d9c"),i=a.n(s);i.a},95204:function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("a-select",{staticStyle:{width:"100%"},attrs:{showSearch:"",optionFilterProp:"children",filterOption:!1,placeholder:2==t.type?"请选择导购":"请选择企业成员",disabled:t.disabled},on:{focus:t.focusSelect,select:t.changeSelect,popupScroll:t.popScroll,search:t.searchName},scopedSlots:t._u([{key:"dropdownRender",fn:function(e){return a("div",{},[a("v-nodes",{attrs:{vnodes:e}}),a("a-spin",{staticStyle:{position:"absolute",bottom:"50%",left:"0",right:"0"},attrs:{tip:"Loading...",size:"large",spinning:t.isLoading}})],1)}}]),model:{value:t.userId,callback:function(e){t.userId=e},expression:"userId"}},t._l(t.userList,(function(e,s){return a("a-select-option",{key:2==t.type?s:e.id},[t._v("\n\t\t\t"+t._s(e.name)),2==t.type&&e.group_name?a("span",[t._v("("+t._s(e.group_name)+")")]):t._e()])})),1)],1)},i=[],n=(a("96cf"),a("3b8d")),r=(a("c5f6"),{props:{callback:{type:Function,default:null},index:{type:Number,default:-1},index2:{type:Number,default:-1},disabled:{type:Boolean,default:!1},getFisrstStaff:{type:Boolean,default:!1},type:{type:Number,default:0},ignore_dialout:{type:Number,default:0}},components:{VNodes:{functional:!0,render:function(t,e){return e.props.vnodes}}},data:function(){var t=localStorage.getItem("corpId")?localStorage.getItem("corpId"):"";return{corpId:t,userList:[],userId:[],userName:"",page:1,count:0,isLoading:!1}},created:function(){var t=this;this.$nextTick((function(){t.getAllStaffList()}))},mounted:function(){},methods:{getAllStaffList:function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(){var e,a,s,i,n,r=arguments;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=r.length>0&&void 0!==r[0]?r[0]:1,this.isLoading=!0,2==this.type?(a={corp_id:this.corpId,guide_keyword:this.userName,operator:0,page:e,page_size:10},s="shop-customer-guide/list"):(a={corp_id:this.corpId,name:this.userName,user_id:this.userId,is_all:0,page:e,ignore_dialout:this.ignore_dialout},1==this.type&&(a.sub_id=localStorage.getItem("sub_id"),a.isMasterAccount=localStorage.getItem("isMasterAccount")),s="work-user/get-all-user"),t.next=5,this.axios.post(s,a);case 5:i=t.sent,n=i.data,0!=n.error?(this.isLoading=!1,this.$message.error(n.error_msg)):(this.isLoading=!1,this.count=n.data.count,this.getFisrstStaff&&(this.userId=n.data.info[0].id,null!==this.callback&&"function"===typeof this.callback&&(-1===this.index&&-1===this.index2?this.callback("ok",n.data.info[0].id):this.callback("ok",n.data.info[0].id,this.index,this.index2,n.data.info[0]))),1==e?2==this.type?this.userList=n.data.result:this.userList=n.data.info:2==this.type?this.userList=this.userList.concat(n.data.result):this.userList=this.userList.concat(n.data.info),this.page=e);case 8:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),changeSelect:function(t){null!==this.callback&&"function"===typeof this.callback&&(2==this.type?-1===this.index&&-1===this.index2?this.callback("ok",this.userList[t].id):this.callback("ok",this.userList[t].id,this.index,this.index2,this.userList[t]):-1===this.index&&-1===this.index2?this.callback("ok",t):this.callback("ok",t,this.index,this.index2))},focusSelect:function(){""!=this.userName&&(this.page=1,this.userList=[],this.userName="",this.getAllStaffList())},searchName:function(t){this.userName=t,this.getAllStaffList()},popScroll:function(t){var e=t.target;e.scrollTop+e.offsetHeight===e.scrollHeight&&this.userList.length<this.count&&(this.page++,this.getAllStaffList(this.page))}},watch:{userId:{handler:function(t){this.getAllStaffList()},deep:!0},getFisrstStaff:{handler:function(t){this.getAllStaffList()},deep:!0}}}),o=r,l=a("2877"),c=Object(l["a"])(o,s,i,!1,null,"2fbfc039",null);e["a"]=c.exports},"9a11":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"list"},[a("a-layout",{staticClass:"fans-content"},[a("a-layout",{staticClass:"scroll"},[a("a-layout-header",[t._v("坐席管理")]),a("a-layout-content",[a("div",{staticClass:"header"},[a("div",{staticClass:"static"},[a("div",{staticClass:"static_content"},[a("div",{staticStyle:{"font-size":"14px"}},[t._v("账户余额")]),a("div",{staticStyle:{"font-size":"18px","font-weight":"700"}},[t._v("￥"+t._s(t.staticData.balance))]),a("div",{staticStyle:{color:"#3291F8",cursor:"pointer","text-align":"right"},on:{click:function(e){return t.goDetail(1)}}},[t._v("账户明细\n\t\t\t\t\t\t\t")])]),a("div",{staticClass:"static_content"},[a("div",{staticStyle:{"font-size":"14px"}},[t._v("坐席总数")]),a("div",{staticStyle:{"font-size":"18px","font-weight":"700"}},[t._v(t._s(t.staticData.exten_total))])]),a("div",{staticClass:"static_content"},[a("div",{staticStyle:{"font-size":"14px"}},[t._v("使用中的坐席")]),a("div",{staticStyle:{"font-size":"18px","font-weight":"700"}},[t._v(t._s(t.staticData.exten_used))])]),a("div",{staticClass:"static_content"},[a("div",{staticStyle:{"font-size":"14px"}},[t._v("剩余坐席")]),a("div",{staticStyle:{"font-size":"18px","font-weight":"700"}},[t._v(t._s(t.staticData.exten_usable))])]),a("div",{staticClass:"static_content"},[a("div",{staticStyle:{"font-size":"14px"}},[t._v("已过期的坐席")]),a("div",{staticStyle:{"font-size":"18px","font-weight":"700"}},[t._v(t._s(t.staticData.exten_expired))])])]),a("div",{staticClass:"search_card"},[a("div",{staticClass:"search_content"},[a("a-input",{attrs:{placeholder:"请输入成员名称或手机号进行查找"},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.getList(e)}},model:{value:t.listQuery.keyword,callback:function(e){t.$set(t.listQuery,"keyword","string"===typeof e?e.trim():e)},expression:"listQuery.keyword"}})],1),a("div",{staticClass:"search_content",staticStyle:{width:"10%"}},[a("a-select",{attrs:{showSearch:"",allowClear:"",placeholder:"请选择状态",optionFilterProp:"children"},model:{value:t.listQuery.status,callback:function(e){t.$set(t.listQuery,"status",e)},expression:"listQuery.status"}},[t._l(t.statusList,(function(e){return[a("a-select-option",{attrs:{value:e.value}},[t._v("\n\t\t\t\t\t\t\t\t\t\t"+t._s(e.title)+"\n\t\t\t\t\t\t\t\t\t")])]}))],2)],1),a("div",{staticClass:"search_content"},[a("a-range-picker",{staticStyle:{width:"97%",padding:"0"},on:{change:t.handleTimeChange},model:{value:t.time,callback:function(e){t.time=e},expression:"time"}})],1),a("div",{staticClass:"search_content",staticStyle:{width:"auto","text-align":"left"}},[a("a-button",{attrs:{type:"primary"},on:{click:function(e){return t.getList()}}},[t._v("查找\n\t\t\t\t\t\t\t")]),a("a-button",{staticStyle:{margin:"0 0.5rem"},on:{click:function(e){return t.clear()}}},[t._v("清空")])],1)])]),a("div",{staticClass:"content_table"},[a("a-spin",{attrs:{tip:"Loading...",size:"large",spinning:t.listLoading}},[a("a-table",{attrs:{"data-source":t.seatList,pagination:!1,rowClassName:t.rowClassName}},[a("a-table-column",{key:"exten",attrs:{title:"工号","data-index":"exten"},scopedSlots:t._u([{key:"default",fn:function(e,s){return[a("span",[t._v(t._s(s.exten))])]}}])}),a("a-table-column",{key:"small_phone",attrs:{title:"外呼手机号","data-index":"small_phone"},scopedSlots:t._u([{key:"default",fn:function(e,s){return[a("span",[t._v(t._s(s.small_phone))])]}}])}),a("a-table-column",{key:"use_num",attrs:{title:"历史使用人数","data-index":"use_num"},scopedSlots:t._u([{key:"default",fn:function(e,s){return[a("span",[t._v(t._s(s.use_num))])]}}])}),a("a-table-column",{key:"user_name",attrs:{title:"当前使用成员","data-index":"user_name"},scopedSlots:t._u([{key:"default",fn:function(e,s){return[s.user_name?a("a-tag",{attrs:{color:"orange"}},[t._v("\n\t\t\t\t\t\t\t\t\t\t"+t._s(s.user_name)+"\n\t\t\t\t\t\t\t\t\t")]):t._e(),s.user_name?t._e():a("span",[t._v("--")])]}}])}),a("a-table-column",{key:"exten_money",attrs:{title:"坐席费用","data-index":"exten_money"},scopedSlots:t._u([{key:"default",fn:function(e,s){return[a("span",[t._v("￥"+t._s(s.exten_money))])]}}])}),a("a-table-column",{key:"phone_money",attrs:{title:"话费消耗","data-index":"phone_money"},scopedSlots:t._u([{key:"default",fn:function(e,s){return[a("span",[t._v("￥"+t._s(s.phone_money))])]}}])}),a("a-table-column",{key:"duration_turth",attrs:{title:"实际通话时长","data-index":"duration_turth"},scopedSlots:t._u([{key:"default",fn:function(e,s){return[a("span",[t._v(t._s(s.duration_turth?s.duration_turth:"--"))])]}}])}),a("a-table-column",{key:"duration",attrs:{"data-index":"duration"},scopedSlots:t._u([{key:"default",fn:function(e,s){return[a("span",[t._v(t._s(s.duration?s.duration:"--"))])]}}])},[a("span",{attrs:{slot:"title"},slot:"title"},[t._v("计费通话时长\n\t\t\t\t\t\t\t\t\t\t"),a("a-tooltip",{attrs:{placement:"bottom"}},[a("template",{slot:"title"},[a("span",[t._v("根据运营商要求，通话不满一分钟按一分钟计算。")])]),a("a-icon",{staticStyle:{"margin-left":"5px"},attrs:{type:"question-circle"}})],2)],1)]),a("a-table-column",{key:"status",attrs:{"data-index":"status"},scopedSlots:t._u([{key:"default",fn:function(e,s){return[1==s.status?a("span",[t._v("停用")]):t._e(),2==s.status?a("span",[t._v("使用中")]):t._e(),3==s.status?a("span",[t._v("已过期")]):t._e(),4==s.status?a("span",[t._v("未分配")]):t._e()]}}])},[a("span",{attrs:{slot:"title"},slot:"title"},[t._v("状态\n\t\t\t\t\t\t\t\t\t\t"),a("a-tooltip",{attrs:{placement:"bottom"}},[a("template",{slot:"title"},[a("div",[t._v("停用：当前坐席的使用成员被禁用。")]),a("div",[t._v("使用中：当前坐席正常使用。")]),a("div",[t._v("已过期：当前当前坐席已过期。")]),a("div",[t._v("未分配：当前坐席没有成员使用。")])]),a("a-icon",{staticStyle:{"margin-left":"5px"},attrs:{type:"question-circle"}})],2)],1)]),a("a-table-column",{key:"expire",attrs:{title:"到期时间","data-index":"expire"},scopedSlots:t._u([{key:"default",fn:function(e,s){return[a("span",[t._v(t._s(s.start_time+" 至 "+s.expire))])]}}])}),a("a-table-column",{key:"action",attrs:{title:"操作","data-index":"action"},scopedSlots:t._u([{key:"default",fn:function(e,s){return[a("a-button",{on:{click:function(e){return t.goDetail(2,s)}}},[t._v("坐席明细")]),a("a-button",{staticStyle:{"margin-left":"5px"},on:{click:function(e){return t.seatOperation(s)}}},[t._v("更换坐席成员\n\t\t\t\t\t\t\t\t\t")])]}}])})],1)],1),t.seatList.length>0?a("div",{staticClass:"pagination",staticStyle:{display:"flex","justify-content":"space-between",margin:"20px 0"}},[a("div",{staticStyle:{height:"32px","line-height":"32px"}},[t._v("\n\t\t\t\t\t\t\t共"),a("span",{staticStyle:{color:"blue"}},[t._v(t._s(t.total))]),t._v("条\n\t\t\t\t\t\t")]),a("div",{staticStyle:{height:"32px"}},[a("a-pagination",{attrs:{total:t.total,showSizeChanger:"",showQuickJumper:!1,current:1,pageSize:t.listQuery.page_size,pageSizeOptions:["15","30","50","100"]},on:{change:t.changePage,showSizeChange:t.showSizeChange},model:{value:t.listQuery.page,callback:function(e){t.$set(t.listQuery,"page",e)},expression:"listQuery.page"}})],1)]):t._e()],1)])],1)],1),a("a-modal",{attrs:{title:"坐席转移",visible:t.showAddStaffSeat},on:{ok:t.confirmSeatOperation,cancel:t.handleCancelModal}},[a("a-form-model",{ref:"ruleForm2",attrs:{layout:"horizontal",model:t.addSeatForm}},[a("a-form-model-item",{attrs:{label:"工号","label-col":{span:5},"wrapper-col":{span:13}}},[a("span",[t._v(t._s(t.addSeatForm.exten))])]),a("a-form-model-item",{attrs:{label:"当前成员","label-col":{span:5},"wrapper-col":{span:13}}},[a("span",[t._v(t._s(t.addSeatForm.using_name?t.addSeatForm.using_name:"--"))])]),a("a-form-model-item",{attrs:{label:"坐席成员","label-col":{span:5},"wrapper-col":{span:13}}},[a("chooseStaffSelect",{ref:"staffSelected",attrs:{callback:t.replyMsg,isAll:1,ignore_dialout:1}})],1),t.addSeatForm.using_name?a("a-form-model-item",{attrs:{label:"","label-col":{span:6},"wrapper-col":{span:13}}},[a("span",{staticStyle:{color:"red","margin-left":"1.6rem"}},[t._v("转移后原使用成员将无法正常使用")])]):t._e()],1)],1)],1)},i=[],n=(a("96cf"),a("3b8d")),r=a("95204"),o={page:1,page_size:15,corp_id:localStorage.getItem("corpId"),status:0},l={components:{chooseStaffSelect:r["a"]},data:function(){return{total:0,listQuery:Object.assign({},o),statusList:[{value:0,title:"坐席状态"},{value:1,title:"停用"},{value:2,title:"使用中"},{value:3,title:"已过期"},{value:4,title:"未分配"}],listLoading:!1,recordList:[1],staticData:{},seatList:[],time:[],showAddStaffSeat:!1,selectedStaff:{},addSeatForm:{},message:""}},mounted:function(){this.getList(),this.getStatic()},methods:{getList:function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(){var e,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.listLoading=!0,t.next=3,this.axios.post("/dialout/exten-list",this.listQuery);case 3:e=t.sent,a=e.data,0!=a.error?this.$message.error(a.error_msg):(this.total=parseInt(a.data.count),this.seatList=a.data.list),this.listLoading=!1;case 7:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),getStatic:function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(){var e,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.axios.post("/dialout/exten-summary",{corp_id:localStorage.getItem("corpId")});case 2:e=t.sent,a=e.data,0!=a.error?this.$message.error(a.error_msg):this.staticData=a.data;case 5:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),handleTimeChange:function(t,e){this.listQuery.stime=e[0],this.listQuery.etime=e[1]},clear:function(){this.listQuery=Object.assign({},o),this.getList()},seatOperation:function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(e){var a,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.selectedStaff=e,t.next=3,this.axios.post("dialout/cheak-state",{corp_id:localStorage.getItem("corpId"),id:e.id,option_type:3});case 3:a=t.sent,s=a.data,0!=s.error?(this.isLoading=!1,this.$message.error(s.error_msg)):(this.addSeatForm=s.data,this.showAddStaffSeat=!0);case 6:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),handleCancelModal:function(){this.showAddStaffSeat=!1,this.$refs.staffSelected.userId=[]},confirmSeatOperation:function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(){var e,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.axios.post("dialout/shift-exten",{corp_id:localStorage.getItem("corpId"),id:this.selectedStaff.id,user_id:this.addSeatForm.user_id});case 2:e=t.sent,a=e.data,0!=a.error?this.$message.error(a.error_msg):(this.showAddStaffSeat=!1,this.$refs.staffSelected.userId=[],this.getList());case 5:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),goDetail:function(t,e){var a={};a=2==t?{type:t,id:e.id,from:"callSeatManagement"}:{type:t,from:"callSeatManagement"},this.$router.push({path:"/call/accountBalance",query:a})},replyMsg:function(t,e,a,s){console.log(e),this.addSeatForm.user_id=e},rowClassName:function(t,e){var a="dark-row";return e%2===0&&(a="light-row"),a},changePage:function(){},showSizeChange:function(t,e){this.listQuery.page_size=e}}},c=l,d=(a("428b"),a("2877")),u=Object(d["a"])(c,s,i,!1,null,"55ec88ad",null);e["default"]=u.exports},ac35:function(t,e,a){e=t.exports=a("2350")(!1),e.push([t.i,"[data-v-55ec88ad] .dark-row{background:#fafafa}[data-v-55ec88ad] .light-row{background:#fff}.list[data-v-55ec88ad]{overflow-y:hidden}.fans-content[data-v-55ec88ad]{height:100%;position:absolute;top:0;left:0;bottom:0;right:0}.ant-layout-header[data-v-55ec88ad]{background:#fff;border-bottom:1px solid #e2e2e2;height:50px;min-width:885px;width:100%;line-height:50px;font-size:16px;padding:0 20px}.header[data-v-55ec88ad]{width:98%;background-color:#fff;padding:24px;margin:1rem auto}.search_card[data-v-55ec88ad]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:start;-ms-flex-pack:start;justify-content:flex-start;-ms-flex-wrap:wrap;flex-wrap:wrap;-webkit-box-align:center;-ms-flex-align:center;align-items:center;margin-top:1rem}.search_card .search_content[data-v-55ec88ad]{width:20%}.search_card .search_content .ant-input[data-v-55ec88ad]{width:97%}.search_card .search_content .ant-select[data-v-55ec88ad]{width:94%}.search_card .search_content .ant-radio-button-wrapper[data-v-55ec88ad]{width:4rem;text-align:center}.static[data-v-55ec88ad]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:start;-ms-flex-pack:start;justify-content:flex-start;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.static .static_content[data-v-55ec88ad]{background-color:#f8f8f8;width:24%;height:6.76rem;padding:.64rem 1.067rem;margin-right:16px;line-height:31px}.content_table[data-v-55ec88ad]{padding:16px;margin:1rem auto}",""])},d8d9c:function(t,e,a){var s=a("ac35");"string"===typeof s&&(s=[[t.i,s,""]]),s.locals&&(t.exports=s.locals);var i=a("499e").default;i("82d90b8e",s,!0,{sourceMap:!1,shadowMode:!1})}}]);