(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2865271b"],{"0094":function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("a-modal",{attrs:{title:"选择企业微信",width:"888"},on:{ok:t.handleOk,cancel:t.handleCancel},model:{value:t.showModal,callback:function(e){t.showModal=e},expression:"showModal"}},[n("div",{staticStyle:{height:"270px"}},[t.corpInfo[0]?n("a-select",{staticStyle:{width:"200px","margin-bottom":"20px","margin-left":"5px"},attrs:{showSearch:"",optionFilterProp:"children"},on:{change:t.changeWx},model:{value:t.changeBackground,callback:function(e){t.changeBackground=e},expression:"changeBackground"}},[t._l(t.corpInfo,(function(e){return[n("a-select-option",{attrs:{value:e.corpid}},[t._v("\n\t\t\t\t\t\t"+t._s(e.corp_name)+"\n\t\t\t\t\t")])]}))],2):t._e(),n("div",{staticClass:"wxtpl",staticStyle:{height:"230px"}},[t._l(t.corpInfo,(function(e,i){return["scene"!=t.routeName&&"template"!=t.routeName?[n("a-radio-group",{on:{change:function(a){return t.changeWx2(e.corpid,e.corp_name)}},model:{value:t.changeBackground,callback:function(e){t.changeBackground=e},expression:"changeBackground"}},[n("a-radio-button",{attrs:{value:e.corpid}},[n("div",[n("img",{staticStyle:{"border-radius":"4px",width:"32px"},attrs:{src:a("de05"),alt:""}}),n("span",{staticClass:"text"},[t._v(t._s(e.corp_name))])])])],1)]:t._e(),"scene"==t.routeName||"template"==t.routeName?[n("a-radio-group",{on:{change:function(a){return t.changeWx2(e.corpid,e.corp_name)}},model:{value:t.changeBackground,callback:function(e){t.changeBackground=e},expression:"changeBackground"}},[n("a-radio-button",{attrs:{value:e.corpid}},[n("div",[n("a-avatar",{attrs:{src:e.head_img,shape:"square"}}),n("span",{staticClass:"text"},[t._v(t._s(e.corp_name))])],1)])],1)]:t._e()]}))],2)],1)])],1)},i=[],r=(a("7f7f"),a("28a5"),a("96cf"),a("3b8d")),s=(a("7514"),a("bc3a")),o=a.n(s),l=a("f64c"),c={name:"wxModal",props:{show:{type:Boolean,default:!1},callback:{type:Function,default:null},hasName:{type:String,default:""},type:{type:String,default:""},corpId1:{type:String,default:""},wxId:{type:String,default:""}},data:function(){var t=localStorage.getItem("corpId")?localStorage.getItem("corpId"):"";return{showModal:!1,corpInfo:[],changeBackground:t,corpId:t,corpName:this.$store.state.corpName,routeName:""}},methods:{handleOk:function(){var t=this;if(2==localStorage.getItem("isMasterAccount"))this.getPermissionButton();else{this.showModal=!1;var e=this.corpInfo.find((function(e){return e.corpid==t.corpId}));this.$store.dispatch("changeCorp",e),null!==this.callback&&"function"===typeof this.callback&&this.callback("ok",this.corpId,e.corp_name)}},handleCancel:function(t){null!==this.callback&&"function"===typeof this.callback&&this.callback("cancel"),this.showModal=!1},changeWx:function(t){this.corpId=t},changeWx2:function(t,e){this.corpId=t,this.corpName=e},getPermissionButton:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(){var e,a,n,i,r,s,c,p,d=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,o.a.post("sub-user/get-sub-user-authority",{isMasterAccount:localStorage.getItem("isMasterAccount"),sub_id:localStorage.getItem("sub_id"),account_id:this.corpId,type:""!=this.type?this.type:localStorage.getItem("type"),corp_id:2==this.type?this.corpId:"",wx_id:2==this.type?this.wxId:""});case 2:if(e=t.sent,a=e.data,0!=a.error){t.next=34;break}if(!(a.data.length>0)){t.next=31;break}if(""==this.hasName){t.next=25;break}if(n=this.hasName.split(","),!(n.length>0)){t.next=22;break}i=!0,r=0;case 11:if(!(r<n.length)){t.next=19;break}if(-1!=a.data.indexOf(n[r])){t.next=16;break}return l["a"].error("该企业微信未配置相关功能权限，无法选择"),i=!1,t.abrupt("return",!1);case 16:r++,t.next=11;break;case 19:i&&(this.showModal=!1,s=this.corpInfo.find((function(t){return t.corpid==d.corpId})),this.$store.dispatch("changeCorp",s),null!==this.callback&&"function"===typeof this.callback&&this.callback("ok",this.corpId,s.corp_name)),t.next=23;break;case 22:-1==a.data.indexOf(this.hasName)?l["a"].error("该企业微信未配置相关功能权限，无法选择"):(this.showModal=!1,c=this.corpInfo.find((function(t){return t.corpid==d.corpId})),this.$store.dispatch("changeCorp",c),null!==this.callback&&"function"===typeof this.callback&&this.callback("ok",this.corpId,c.corp_name));case 23:t.next=29;break;case 25:this.showModal=!1,p=this.corpInfo.find((function(t){return t.corpid==d.corpId})),this.$store.dispatch("changeCorp",p),null!==this.callback&&"function"===typeof this.callback&&this.callback("ok",this.corpId,p.corp_name);case 29:t.next=32;break;case 31:l["a"].error("无权限");case 32:t.next=35;break;case 34:l["a"].error("获取权限按钮列表失败！");case 35:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},watch:{show:function(t){var e=this;this.showModal=t,this.changeBackground=localStorage.getItem("corpId"),this.$store.dispatch("getCorp",(function(t){e.corpInfo=t,e.corpId=e.$store.state.corpId,!e.changeBackground&&e.corpInfo.length>0&&(e.changeBackground=e.$store.state.corpId,e.corpId=e.$store.state.corpId,e.corpName=e.$store.state.corpName)})),this.routeName=this.$route.name}},created:function(){}},p=c,d=(a("ffd5"),a("2877")),g=Object(d["a"])(p,n,i,!1,null,"440e9184",null);e["a"]=g.exports},"0cfc":function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"tabBox"},[a("a-empty",{directives:[{name:"show",rawName:"v-show",value:0==t.groupList.length&&1==t.isNotAdd,expression:"groupList.length == 0 && isNotAdd == 1"}]},[a("span",{attrs:{slot:"description"},slot:"description"},[t._v("\n\t\t\t尚未创建标签，无法选择标签\n\t\t")])]),t._l(t.groupList,(function(e,n){return[t.isMore||!t.isMore&&n<5?a("a-form-item",{staticClass:"current0",attrs:{"label-col":{span:4},"wrapper-col":{span:20}}},[a("span",{staticClass:"group-name",attrs:{slot:"label"},slot:"label"},[e.name&&""!=e.name?a("a-popover",{attrs:{trigger:"hover"}},[a("span",{staticStyle:{display:"inline-block","max-width":"500px","word-wrap":"break-word","word-break":"break-all"},attrs:{slot:"content"},slot:"content"},[t._v("\n\t\t\t\t\t\t"+t._s(e.name)+"\n\t\t\t\t\t")]),t._v("\n\t\t\t\t\t"+t._s(e.name)+"\n\t\t\t\t")]):t._e()],1),t._l(e.data,(function(i,r){return a("span",[e.disabled[r]?t._e():a("a-checkable-tag",{on:{change:function(e){return t.changeTags(i.id,n)}},model:{value:e.checked[r],callback:function(a){t.$set(e.checked,r,a)},expression:"item.checked[tagIndex]"}},[t._v("\n\t\t\t\t\t"+t._s(i.tagname)+"\n\t\t\t\t")]),e.disabled[r]&&1==t.isDisabled?a("a-button",{staticStyle:{margin:"5px","line-height":"26px","font-size":"12px",height:"auto !important",padding:"0 7px"},attrs:{disabled:e.disabled[r]&&1==t.isDisabled}},[t._v("\n\t\t\t\t\t"+t._s(i.tagname)+"\n\t\t\t\t")]):t._e()],1)})),1!=t.isNotAdd?a("a-button",{directives:[{name:"has",rawName:"v-has",value:"client-tag-add",expression:"'client-tag-add'"}],staticStyle:{"font-size":"13px",height:"26px",color:"#1890FF",border:"1px solid #1890FF"},attrs:{icon:"plus"},on:{click:function(a){return t.createTag(e.id)}}},[t._v("\n\t\t\t\t新建标签\n\t\t\t")]):t._e()],2):t._e()]})),t.groupList.length>0&&1!=t.isNotAdd?a("a-button",{directives:[{name:"has",rawName:"v-has",value:"client-tag-group-add",expression:"'client-tag-group-add'"}],staticStyle:{"font-size":"13px",height:"26px","margin-right":"10px","margin-left":"16.7%",color:"#1890FF",border:"1px solid #1890FF"},attrs:{icon:"plus"},on:{click:t.addTagGroup}},[t._v("\n\t\t新建标签组\n\t")]):t._e(),t.groupList.length>5?a("div",{staticStyle:{"font-size":"13px",height:"26px",color:"#1890FF","text-align":"center",cursor:"pointer"},on:{click:t.showMore}},[t.isMore?t._e():[t._v("更多")],t.isMore?[t._v("收起")]:t._e(),a("a-icon",{attrs:{type:t.isMore?"arrow-up":"arrow-down"}})],2):t._e(),a("a-modal",{attrs:{title:"新建标签",zIndex:99999,confirmLoading:t.confirmLoading3,width:"550px"},on:{ok:function(e){return t.handleOk(t.inputValue)},cancel:t.cancel},model:{value:t.visible,callback:function(e){t.visible=e},expression:"visible"}},[a("a-form-item",{attrs:{"label-col":{span:4},"wrapper-col":{span:20}}},[a("template",{slot:"label"},[t._v("\n\t\t\t\t选择分组\n\t\t\t")]),a("a-select",{staticStyle:{width:"250px"},attrs:{showSearch:"",optionFilterProp:"children",disabled:""},model:{value:t.group_id,callback:function(e){t.group_id=e},expression:"group_id"}},t._l(t.groupList,(function(e){return a("a-select-option",{attrs:{value:e.id}},[t._v("\n\t\t\t\t\t"+t._s(e.name)+"\n\t\t\t\t")])})),1)],2),a("a-form-item",{attrs:{"label-col":{span:4},"wrapper-col":{span:20}}},[a("template",{slot:"label"},[t._v("\n\t\t\t\t标签名称\n\t\t\t")]),a("p",{staticStyle:{margin:"0px","font-size":"13px",color:"#909399"}},[t._v("\n\t\t\t\t每个标签名称最多15个字。同时新建多个标签时，请用“空格”隔开")]),a("a-input",{attrs:{placeholder:"请输入标签（不得超过15个字符）"},model:{value:t.inputValue,callback:function(e){t.inputValue=e},expression:"inputValue"}})],2)],1),a("a-modal",{staticClass:"add-tag-group",attrs:{zIndex:99999,title:"新建标签组",visible:t.groupVisible,confirmLoading:t.confirmLoading},on:{ok:t.handleOk2,cancel:t.handleCancel}},[a("a-form-item",{staticClass:"current0",attrs:{"label-col":{span:4},"wrapper-col":{span:20}}},[a("template",{slot:"label"},[a("span",{staticStyle:{color:"red"}},[t._v("*")]),t._v("分组名称\n\t\t\t")]),a("a-input",{attrs:{placeholder:"请输入分组名(不得超过15个字符)",maxLength:15},model:{value:t.teamName,callback:function(e){t.teamName=e},expression:"teamName"}},[a("span",{attrs:{slot:"suffix"},slot:"suffix"},[a("span",[t._v(t._s(t.teamName.length))]),t._v("/15\n\t\t\t\t\t\t\t\t\t\t\t")])])],2),a("a-form-item",{staticClass:"current0",attrs:{"label-col":{span:4},"wrapper-col":{span:20}}},[a("template",{slot:"label"},[a("span",{staticStyle:{color:"red"}},[t._v("*")]),t._v("标签名称\n\t\t\t")]),a("p",{staticStyle:{margin:"0px","font-size":"13px",color:"#909399"}},[t._v("\n\t\t\t\t每个标签名称最多15个字。同时新建多个标签时，请用“空格”隔开\n\t\t\t")]),a("a-input",{attrs:{placeholder:"请输入标签（不得超过15个字符）"},model:{value:t.inputValue2,callback:function(e){t.inputValue2=e},expression:"inputValue2"}})],2)],1)],2)},i=[],r=(a("a481"),a("28a5"),a("6762"),a("2fdb"),a("96cf"),a("3b8d")),s=(a("c5f6"),{name:"chooseDepartment",props:{callback:{type:Function,default:null},hasChoose:{type:Array,default:function(){}},isDisabled:{type:Number,default:0},disabledTag:{type:Array,default:function(){}},isNotAdd:{type:Number,default:0},id:{type:String,default:""}},data:function(){return{corpId:"",groupList:[],tag_arr:[],tag_ids:"",group_id:[],checked:[],visible:!1,confirmLoading3:!1,inputValue:"",newTagList:[],isMore:!1,groupVisible:!1,confirmLoading:!1,teamName:"",inputValue2:"",newTagList2:[]}},watch:{hasChoose:{handler:function(t){var e=this;"undefined"!=typeof t&&this.groupList.length&&(this.tag_arr=t,this.tag_ids=t.join(),this.hasChoose.map((function(t){e.groupList.map((function(e){e.data.map((function(a,n){t==a.id&&(e.checked[n]=!0)}))}))})),0==t.length&&this.groupList.map((function(t){t.checked=[]})),this.$forceUpdate())},deep:!0},id:{handler:function(t){""!=typeof t&&(this.corpId=t,this.getTags())},deep:!0},disabledTag:{handler:function(t){var e=this;"undefined"!=typeof t&&this.groupList.length&&(this.disabledTag.map((function(t){e.groupList.map((function(e){e.data.map((function(a,n){t==a.id&&(e.disabled[n]=!0)}))}))})),this.$forceUpdate())},deep:!0}},methods:{getTags:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(){var e,a,n=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.axios.post("work-tag-group/tag-group",{corp_id:this.corpId||localStorage.getItem("corpId"),is_not_add:this.isNotAdd});case 2:e=t.sent,a=e.data,0!=a.error?this.$message.error(a.error_msg):(this.groupList=a.data,this.groupList.map((function(t){t.checked=[],t.disabled=[]})),"undefined"!=typeof this.disabledTag&&this.disabledTag.length>0&&this.disabledTag.map((function(t){n.groupList.map((function(e){e.data.map((function(a,n){t==a.id&&(e.disabled[n]=!0)}))}))})),"undefined"!=typeof this.hasChoose&&this.hasChoose.length>0&&(this.tag_arr=this.hasChoose,this.tag_ids=this.hasChoose.join(),this.hasChoose.map((function(t){n.groupList.map((function(e){e.data.map((function(a,n){t==a.id&&(e.checked[n]=!0)}))}))})),this.$forceUpdate()));case 5:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),changeTags:function(t,e){Array.prototype.indexOf=function(t){for(var e=0;e<this.length;e++)if(this[e]==t)return e;return-1},Array.prototype.remove=function(t){var e=this.indexOf(t);e>-1&&this.splice(e,1)};var a=String(t);if(this.tag_arr.includes(a))this.tag_arr.remove(a);else if(this.tag_arr.length+1>9999){this.$message.warning("不可选中，客户标签数量上限9999个");for(var n=0;n<this.groupList[e].data.length;n++)this.groupList[e].data[n].id==a&&(this.groupList[e].checked[n]=!1)}else this.tag_arr.push(a);this.$forceUpdate(),this.tag_ids=this.tag_arr.join(),null!==this.callback&&"function"===typeof this.callback&&this.callback("ok",this.tag_ids)},createTag:function(t){this.group_id=t;var e=0;if(this.groupList.map((function(t){e+=t.data.length})),e>=9999)return this.$message.warning("标签数量已超过上限9999个，无法创建"),!1;this.visible=!0},handleOk:function(t){var e=this;if(e.confirmLoading3=!0,""==t)return e.$message.warning("不能为空"),e.confirmLoading3=!1,!1;e.newTagList=[];for(var a=0;a<t.split(" ").length;a++){if(t.split(" ")[a].length>15)return e.$message.error("每个标签最多15个字"),e.confirmLoading3=!1,!1;t.split(" ")[a].length>0&&e.newTagList.push(t.split(" ")[a])}e.addTags(),e.inputValue="",e.newTagList=[],e.confirmLoading3=!1},addTags:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(){var e,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.axios.post("work-tag/add",{corp_id:this.corpId||localStorage.getItem("corpId"),suite_id:1,type:0,group_id:this.group_id,name:this.newTagList});case 2:e=t.sent,a=e.data,0!=a.error?(this.$message.error(a.error_msg),this.confirmLoading3=!1):(this.isLoading=!1,this.visible=!1,this.confirmLoading3=!1,this.getTags(),this.inputValue="",this.newTagList=[]);case 5:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),cancel:function(){this.visible=!1,this.inputValue=""},showMore:function(){this.isMore=!this.isMore},addTagGroup:function(){this.groupVisible=!0},handleCancel:function(){this.groupVisible=!1,this.teamName="",this.newTagList2=[],this.inputValue2=""},handleOk2:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(){var e,a,n,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(String.prototype.Trim=function(){return this.replace(/(^\s*)|(\s*$)/g,"")},this.teamName=this.teamName.Trim(),this.teamName){t.next=5;break}return this.$message.error("请输入分组名"),t.abrupt("return",!1);case 5:if(""!=this.inputValue2){t.next=10;break}return this.$message.warning("标签名称不能为空"),t.abrupt("return",!1);case 10:this.newTagList2=[],e=JSON.parse(JSON.stringify(this.inputValue2)).split(" "),a=0;case 13:if(!(a<e.length)){t.next=24;break}if(!(e[a].length>15)){t.next=20;break}return this.$message.error("每个标签最多15个字"),this.inputValue2="",t.abrupt("return",!1);case 20:e[a].length>0&&this.newTagList2.push(e[a]);case 21:a++,t.next=13;break;case 24:return this.confirmLoading=!0,t.next=27,this.axios.post("work-tag-group/add",{corp_id:this.corpId||localStorage.getItem("corpId"),suite_id:1,name:this.teamName,type:0,isMasterAccount:localStorage.getItem("isMasterAccount"),sub_id:localStorage.getItem("sub_id"),tag_name:this.newTagList2});case 27:n=t.sent,i=n.data,0!=i.error?this.$message.error(i.error_msg):(this.teamName="",this.newTagList2=[],this.inputValue2="",this.groupVisible=!1,this.getTags()),this.confirmLoading=!1;case 31:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},mounted:function(){this.corpId=this.id||localStorage.getItem("corpId"),this.getTags()}}),o=s,l=(a("d22e"),a("2877")),c=Object(l["a"])(o,n,i,!1,null,"1c74f8e2",null);e["a"]=c.exports},"156b":function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("medium-editor",{ref:"medium_editor",staticClass:"content-editable",attrs:{text:t.textAreaValueHeader,options:t.options,"custom-tag":"div"},on:{editorCreated:t.editorCreated,edit:t.changeContentInput}}),a("div",{staticStyle:{"margin-right":"15px",float:"right"}},[t._v("\n\t\t"+t._s(t.wordNum)+"/"+t._s(t.wordLimit)+"\n\t")]),t.isNickName||t.isEmoji?a("div",{staticStyle:{padding:"0 15px"}},[t._v("\n\t\t点击插入：\n\t\t"),t.isNickName&&1==t.type?a("a-button",{staticClass:"ant-tag ant-tag-orange",attrs:{size:"small"},on:{click:function(e){return t.addTag("客户名称")}}},[t._v("客户名称\n\t\t")]):t._e(),t.isNickName&&0==t.type?a("a-button",{staticClass:"ant-tag ant-tag-orange",attrs:{size:"small"},on:{click:function(e){return t.addTag("粉丝昵称")}}},[t._v("粉丝昵称\n\t\t")]):t._e(),t.isRanking?a("a-button",{staticClass:"ant-tag ant-tag-orange",attrs:{size:"small"},on:{click:function(e){return t.addTag("排行榜")}}},[t._v("排行榜\n\t\t")]):t._e(),t.isEmoji?a("a-popover",{attrs:{trigger:"click",destroyTooltipOnHide:!0},model:{value:t.emojiShow,callback:function(e){t.emojiShow=e},expression:"emojiShow"}},[a("VEmojiPicker",{attrs:{slot:"content",showSearch:!1},on:{select:t.onSelectEmoji},slot:"content"}),a("a-icon",{staticClass:"icon-btn",staticStyle:{cursor:"pointer"},attrs:{type:"smile"}})],1):t._e()],1):t._e(),a("div",{staticClass:"changeType-text"},[t._v("\n\t\t提示：火狐浏览器可能出现无法正确插入"),1==t.type?[t._v("客户名称")]:t._e(),0==t.type?[t._v("粉丝昵称")]:t._e(),t._v("，请使用谷歌、360浏览器\n\t")],2)],1)},i=[],r=(a("6b54"),a("3b2b"),a("386d"),a("ac6a"),a("28a5"),a("c5f6"),a("a481"),a("4884")),s=a.n(r),o=a("40cf"),l=a("79b5"),c=a("c758"),p={name:"index",components:{TemplateList:c["default"],VEmojiPicker:l["a"],"medium-editor":s.a},watch:{text:{handler:function(t){this.textContent=t;var e=this.textContent.replace(/{nickname}/g,1==this.type?" 客户名称 ":" 粉丝昵称 ").replace(/{ranking}/g," 排行榜 ").replace(/{success}/g," 已完成任务量 ").replace(/{error}/g," 未完成任务量 ").replace(/{oneLevel}/g," 一阶任务剩余库存 ").replace(/{twoLevel}/g," 二阶任务剩余库存 ").replace(/{threeLevel}/g," 三阶任务剩余库存 ").replace(/\n/g,"").replace(/(<\/?a.*?>)/g,"").replace(/&lt;/g,"<").replace(/&gt;/g,">"),a=this.textContent.replace(/{nickname}/g,1==this.type?" 客户名称 ":" 粉丝昵称1 ");this.isMenu?(this.wordNum=e.length+10*this.getLeng(a),this.wordNum>this.wordLimit&&(this.wordNum=this.wordLimit)):this.wordNum=e.length},deep:!0},textValue:{handler:function(t){this.textAreaValueHeader=t},deep:!0}},props:{isMenu:{type:Boolean,default:!1},text:{type:String,default:""},textValue:{type:String,default:""},isNickName:{type:Boolean,default:!0},isRanking:{type:Boolean,default:!1},isEmoji:{type:Boolean,default:!0},wordLimit:{type:Number,default:1e3}},data:function(){return{isTag:!1,type:localStorage.getItem("type"),textContent:"",textAreaValueHeader:"",emojiShow:!1,wordNum:0,mediumEditor:"",options:{toolbar:!1,placeholder:{text:""}},keydownNode:!1,keydownNodeIndex:0}},mounted:function(){var t=this;this.textContent=this.text;var e=this.textContent.replace(/{nickname}/g,1==this.type?" 客户名称 ":" 粉丝昵称 ").replace(/{ranking}/g," 排行榜 ").replace(/\n/g,"").replace(/(<\/?a.*?>)/g,"").replace(/&lt;/g,"<").replace(/&gt;/g,">"),a=this.textContent.replace(/{nickname}/g,1==this.type?" 客户名称 ":" 粉丝昵称1 ");this.isMenu?(this.wordNum=e.length+10*this.getLeng(a),this.wordNum>this.wordLimit&&(this.wordNum=this.wordLimit)):this.wordNum=e.length,this.textAreaValueHeader="<p>"+this.textValue+"</p>",document.addEventListener("selectionchange",(function(){t.getCursor(self)}))},methods:{getLeng:function(t){var e=t.split(" "),a=[];return e.forEach((function(t){"粉丝昵称1"==t&&a.push(t)})),a.length},initTextMsgContent:function(t){var e=this;return-1!==t.search(/[\/\[\]\(\)\|\$\*\?\+\-\_]/g)&&o["a"].wechatEmojiKey.map((function(a){var n=new RegExp(e.utils.addslashes(a),"g"),i=o["a"].getEmojiUrl(a);t=t.replace(n,'<img src="'+i+'" alt="'+a+'" height="21" width="21"/>')})),t.replace(/[\r\n|\n]/g,"<br/>")},toggleDialogEmoji:function(){this.emojiShow=!this.emojiShow},onSelectEmoji:function(t){var e=this.mediumEditor.options.ownerDocument;this.wordLimit-this.wordNum>=2&&this.insertHTMLCommand(e,t.data),this.toggleDialogEmoji()},getCursor:function(t){var e=getSelection();if(e){var a=e.anchorNode,n=!1;while(a&&a.nodeType!=a.DOCUMENT_NODE){var i=a.classList;if(i&&i.contains("content-editable")){n=!0;break}a=a.parentNode}n&&(t.lastRange=e.getRangeAt(0),t.lastNode=a)}},insertHTMLCommand:function(t,e){if("undefined"===typeof self.lastNode||!self.lastNode.classList.contains("content-editable"))return!1;var a,n,i,r,o,l,c=["insertHTML",!1,e];if(a=self.lastRange,n=a.commonAncestorContainer,s.a.MediumEditor.util.isMediumEditorElement(n)&&!n.firstChild)a.selectNode(n.appendChild(t.createTextNode("")));else if(3===n.nodeType&&0===a.startOffset&&a.endOffset===n.nodeValue.length||3!==n.nodeType&&n.innerHTML===a.toString()){while(!s.a.MediumEditor.util.isMediumEditorElement(n)&&n.parentNode&&1===n.parentNode.childNodes.length&&!s.a.MediumEditor.util.isMediumEditorElement(n.parentNode))n=n.parentNode;a.selectNode(n)}a.deleteContents(),i=t.createElement("div"),i.innerHTML=e,r=t.createDocumentFragment();while(i.firstChild)o=i.firstChild,l=r.appendChild(o);a.insertNode(r),l&&(a=a.cloneRange(),a.setStartAfter(l),a.collapse(!0),s.a.MediumEditor.selection.selectRange(t,a)),t.execCommand.callListeners&&t.execCommand.callListeners(c,!0),this.wordNum=self.lastNode.textContent.length,this.wordNum<=this.wordLimit&&(this.textAreaValueHeader=self.lastNode.innerHTML.replace(/<pre([^>]*)>/g,"<p>").replace(/<\/pre>/g,"</p>").replace(/<font([^>]*)>/g,"<p>").replace(/<\/font>/g,"</p>").replace(/<div([^>]*)>/g,"<p>").replace(/<\/div>/g,"</p>"),"undefined"==typeof this.urlId?this.textContent=self.lastNode.innerHTML.replace(/(<p><span>)?<br([^>]*)>(<\/span>)?<\/p>/g,"</p>").replace(/<p([^>]*)>/g,"").replace(/<\/p>/g,"\n").replace(/(&nbsp;)?<span contenteditable="false" class="ant-tag ant-tag-orange">客户名称<\/span>(&nbsp;)?/g,"{nickname}").replace(/(&nbsp;)?<span contenteditable="false" class="ant-tag ant-tag-orange">粉丝昵称<\/span>(&nbsp;)?/g,"{nickname}").replace(/(&nbsp;)?<span contenteditable="false" class="ant-tag ant-tag-orange">排行榜<\/span>(&nbsp;)?/g,"{ranking}").replace(/<br([^>]*)>/g,"\n").replace(/<span([^>]*)>/g,"").replace(/<\/span>/g,"").replace(/&nbsp;/g," ").replace(/miniprogramappid/g,"miniprogram-appid").replace(/miniprogrampath/g,"miniprogram-path").replace(/&amp;/g,"&").replace(/&lt;/g,"<").replace(/&gt;/g,">"):this.textContent=self.lastNode.innerHTML.replace(/(<p><span>)?<br([^>]*)>(<\/span>)?<\/p>/g,"</p>").replace(/<br([^>]*)>/g,"\n").replace(/(&nbsp;)?<span contenteditable="false" class="ant-tag ant-tag-orange">客户名称<\/span>(&nbsp;)?/g,"{nickname}").replace(/(&nbsp;)?<span contenteditable="false" class="ant-tag ant-tag-orange">粉丝昵称<\/span>(&nbsp;)?/g,"{nickname}").replace(/(&nbsp;)?<span contenteditable="false" class="ant-tag ant-tag-orange">排行榜<\/span>(&nbsp;)?/g,"{ranking}").replace(/([^<p>]+)<p([^>]*)>/g,"$1\n").replace(/<p([^>]*)>/g,"").replace(/<\/p>/g,"\n").replace(/<span([^>]*)>/g,"").replace(/<\/span>/g,"").replace(/&nbsp;/g," ").replace(/<div([^>]*)>/g,"\n").replace(/<\/div>/g,"").replace(/miniprogramappid/g,"miniprogram-appid").replace(/miniprogrampath/g,"miniprogram-path").replace(/&amp;/g,"&").replace(/&lt;/g,"<").replace(/&gt;/g,">")),this.mediumEditor.origElements.scrollTop=this.mediumEditor.origElements.scrollHeight;var p={currentTarget:this.mediumEditor.origElements};this.mediumEditor.events.updateInput(p.currentTarget,p),this.$emit("changeText",this.textContent,this.textAreaValueHeader)},editorCreated:function(t){this.mediumEditor=t,this.mediumEditor.subscribe("focus",this.editableFocus),this.mediumEditor.subscribe("editableKeydown",this.editableKeydown),this.mediumEditor.subscribe("editablePaste",this.editablePaste),delete self.lastRange,delete self.lastNode},editableFocus:function(t){""!==t.target.innerHTML&&"<br>"!=t.target.innerHTML&&"<p></p>"!=t.target.innerHTML||(t.target.innerHTML="<p><br/></p>")},editableKeydown:function(t){this.wordNum>=this.wordLimit&&8!=t.keyCode&&37!=t.keyCode&&38!=t.keyCode&&39!=t.keyCode&&40!=t.keyCode&&(65!=t.keyCode||!t.metaKey&&!t.ctrlKey)&&t.preventDefault(),86==t.keyCode&&(t.metaKey||t.ctrlKey),13==t.keyCode&&(this.keydownNodeIndex=0,this.getParentP4Label(self.lastRange.startContainer)),this.keydownNode=13==t.keyCode},getParentP4Label:function(t){"P"!=t.nodeName?this.getParentP4Label(t.parentNode):this.getPreviousSiblingIndex(t)},getPreviousSiblingIndex:function(t){t.previousSibling&&(this.keydownNodeIndex++,this.getPreviousSiblingIndex(t.previousSibling))},editablePaste:function(t,e){this.invlideText()},invlideText:function(){var t=this.mediumEditor.origElements,e=this.global.getRangeInfo(t,this.wordLimit),a=e.startNode,n=e.startOffset,i=e.endNode,r=e.endOffset;if("undefined"!==typeof a.nodeValue){var s=document.createRange();s.setStart(a,n),s.setEnd(i,r),s.deleteContents(),this.textAreaValueHeader=self.lastNode.innerHTML.replace(/<pre([^>]*)>/g,"<p>").replace(/<\/pre>/g,"</p>").replace(/<font([^>]*)>/g,"<p>").replace(/<\/font>/g,"</p>").replace(/<div([^>]*)>/g,"<p>").replace(/<\/div>/g,"</p>"),"undefined"==typeof this.urlId?this.textContent=self.lastNode.innerHTML.replace(/(<p><span>)?<br([^>]*)>(<\/span>)?<\/p>/g,"</p>").replace(/<p([^>]*)>/g,"").replace(/<\/p>/g,"\n").replace(/(&nbsp;)?<span contenteditable="false" class="ant-tag ant-tag-orange">客户名称<\/span>(&nbsp;)?/g,"{nickname}").replace(/(&nbsp;)?<span contenteditable="false" class="ant-tag ant-tag-orange">粉丝昵称<\/span>(&nbsp;)?/g,"{nickname}").replace(/(&nbsp;)?<span contenteditable="false" class="ant-tag ant-tag-orange">排行榜<\/span>(&nbsp;)?/g,"{ranking}").replace(/<br([^>]*)>/g,"\n").replace(/<span([^>]*)>/g,"").replace(/<\/span>/g,"").replace(/&nbsp;/g," ").replace(/miniprogramappid/g,"miniprogram-appid").replace(/miniprogrampath/g,"miniprogram-path").replace(/&amp;/g,"&").replace(/&lt;/g,"<").replace(/&gt;/g,">"):this.textContent=self.lastNode.innerHTML.replace(/(<p><span>)?<br([^>]*)>(<\/span>)?<\/p>/g,"</p>").replace(/<br([^>]*)>/g,"\n").replace(/(&nbsp;)?<span contenteditable="false" class="ant-tag ant-tag-orange">客户名称<\/span>(&nbsp;)?/g,"{nickname}").replace(/(&nbsp;)?<span contenteditable="false" class="ant-tag ant-tag-orange">粉丝昵称<\/span>(&nbsp;)?/g,"{nickname}").replace(/(&nbsp;)?<span contenteditable="false" class="ant-tag ant-tag-orange">排行榜<\/span>(&nbsp;)?/g,"{ranking}").replace(/([^<p>]+)<p([^>]*)>/g,"$1\n").replace(/<p([^>]*)>/g,"").replace(/<\/p>/g,"\n").replace(/<span([^>]*)>/g,"").replace(/<\/span>/g,"").replace(/&nbsp;/g," ").replace(/<div([^>]*)>/g,"\n").replace(/<\/div>/g,"").replace(/miniprogramappid/g,"miniprogram-appid").replace(/miniprogrampath/g,"miniprogram-path").replace(/&amp;/g,"&").replace(/&lt;/g,"<").replace(/&gt;/g,">"),this.wordNum=this.wordLimit}this.$emit("changeText",this.textContent,this.textAreaValueHeader)},changeContentInput:function(t){if(""!=t.api.origElements.innerHTML&&"<br>"!=t.api.origElements.innerHTML||(t.api.origElements.innerHTML="<p><br/></p>"),self.lastNode){if(this.isMenu){var e=this.textContent.replace(/{nickname}/g,1==this.type?" 客户名称 ":" 粉丝昵称1 ");this.wordNum=self.lastNode.textContent.length+10*this.getLeng(e),this.wordNum>this.wordLimit&&(this.wordNum=this.wordLimit)}else this.wordNum=self.lastNode.textContent.length;if(this.wordNum<=this.wordLimit?(this.textAreaValueHeader=t.api.origElements.innerHTML.replace(/<pre([^>]*)>/g,"<p>").replace(/<\/pre>/g,"</p>").replace(/<font([^>]*)>/g,"<p>").replace(/<\/font>/g,"</p>").replace(/<div([^>]*)>/g,"<p>").replace(/<\/div>/g,"</p>"),"undefined"==typeof this.urlId?this.textContent=self.lastNode.innerHTML.replace(/(<p><span>)?<br([^>]*)>(<\/span>)?<\/p>/g,"</p>").replace(/<p([^>]*)>/g,"").replace(/<\/p>/g,"\n").replace(/(&nbsp;)?<span contenteditable="false" class="ant-tag ant-tag-orange">客户名称<\/span>(&nbsp;)?/g,"{nickname}").replace(/(&nbsp;)?<span contenteditable="false" class="ant-tag ant-tag-orange">粉丝昵称<\/span>(&nbsp;)?/g,"{nickname}").replace(/(&nbsp;)?<span contenteditable="false" class="ant-tag ant-tag-orange">排行榜<\/span>(&nbsp;)?/g,"{ranking}").replace(/<br([^>]*)>/g,"\n").replace(/<span([^>]*)>/g,"").replace(/<\/span>/g,"").replace(/&nbsp;/g," ").replace(/miniprogramappid/g,"miniprogram-appid").replace(/miniprogrampath/g,"miniprogram-path").replace(/&amp;/g,"&").replace(/&lt;/g,"<").replace(/&gt;/g,">"):this.textContent=self.lastNode.innerHTML.replace(/(<p><span>)?<br([^>]*)>(<\/span>)?<\/p>/g,"</p>").replace(/<br([^>]*)>/g,"\n").replace(/(&nbsp;)?<span contenteditable="false" class="ant-tag ant-tag-orange">客户名称<\/span>(&nbsp;)?/g,"{nickname}").replace(/(&nbsp;)?<span contenteditable="false" class="ant-tag ant-tag-orange">粉丝昵称<\/span>(&nbsp;)?/g,"{nickname}").replace(/(&nbsp;)?<span contenteditable="false" class="ant-tag ant-tag-orange">排行榜<\/span>(&nbsp;)?/g,"{ranking}").replace(/([^<p>]+)<p([^>]*)>/g,"$1\n").replace(/<p([^>]*)>/g,"").replace(/<\/p>/g,"\n").replace(/<span([^>]*)>/g,"").replace(/<\/span>/g,"").replace(/&nbsp;/g," ").replace(/<div([^>]*)>/g,"\n").replace(/<\/div>/g,"").replace(/miniprogramappid/g,"miniprogram-appid").replace(/miniprogrampath/g,"miniprogram-path").replace(/&amp;/g,"&").replace(/&lt;/g,"<").replace(/&gt;/g,">"),this.$emit("changeText",this.textContent,this.textAreaValueHeader)):this.invlideText(),this.keydownNode){var a=self.lastNode.childNodes[this.keydownNodeIndex+1],n=document.createRange();n.setStart(a,0);var i=window.getSelection();i.removeAllRanges(),i.addRange(n),this.keydownNode=!1}}},addTag:function(t){if("undefined"==typeof this.mediumEditor.options.ownerDocument)var e=this.mediumEditor.options.ownerDocument;else e=this.mediumEditor.options.ownerDocument;var a='<span>&nbsp;<span contenteditable="false" class="ant-tag ant-tag-orange">'+t+"</span>&nbsp;</span>";this.wordLimit-this.wordNum>=6&&this.insertHTMLCommand(e,a)}}},d=p,g=(a("6617"),a("2877")),h=Object(g["a"])(d,n,i,!1,null,"93681f50",null);e["a"]=h.exports},"1fa6":function(t,e,a){e=t.exports=a("2350")(!1),e.push([t.i,".changeType-text[data-v-93681f50]{background:#fff2db;border:1px solid #ffdda6;border-radius:2px;padding:7px 27px 6px 10px;font-size:12px;width:100%;margin-top:12px;max-width:673px;line-height:20px;margin-bottom:15px}.content-editable[data-v-93681f50]{font-size:14px;line-height:21px;padding:15px;border:1px solid #d9d9d9;height:155px;overflow:auto}.content-editable[data-v-93681f50] p{margin:0;word-break:break-word}",""])},"2e4d":function(t,e,a){e=t.exports=a("2350")(!1),e.push([t.i,".content-msg[data-v-7bfb8343]{width:372px;border:1px solid #ffdda6;background:#fff2db;padding:10px;margin-top:12px}#components-layout-demo-basic[data-v-7bfb8343]{height:100%}#components-layout-demo-basic .ant-layout-header[data-v-7bfb8343]{background:#fff;border-bottom:1px solid #e2e2e2;height:50px;min-width:760px;width:100%;line-height:50px}[data-v-7bfb8343] .ant-layout-header{padding:0 20px;font-size:16px;text-align:left}[data-v-7bfb8343] .ant-radio-button-wrapper{width:200px;height:55px;line-height:55px;padding:0 10px;margin:10px 5px}[data-v-7bfb8343] .ant-col-15{margin-left:15px}[data-v-7bfb8343] .ant-card-meta-avatar{float:right;padding:0}#components-layout-demo-basic .ant-layout-content[data-v-7bfb8343]{min-width:760px;width:100%;position:relative}.content[data-v-7bfb8343]{border:1px solid #e2e2e2;min-width:760px;position:absolute;top:20px;left:20px;right:20px;background-color:#fafafa;margin-bottom:20px}#components-layout-demo-basic>.ant-layout[data-v-7bfb8343]{margin-bottom:48px}#components-layout-demo-basic>.ant-layout[data-v-7bfb8343]:last-child{margin:0;height:100%}.list[data-v-7bfb8343]{height:100%;top:0;right:0;bottom:0;left:0;position:absolute;overflow-x:hidden;overflow-y:auto}.content-hd[data-v-7bfb8343]{padding:20px 0;border-bottom:1px solid #e2e2e2}.content-bd[data-v-7bfb8343]{background:#f5f5f5}[data-v-7bfb8343] .ant-tag-checkable{background-color:#fafafa;border-color:#d9d9d9}[data-v-7bfb8343] .ant-tag-checkable-checked{background-color:#1890ff}.msg_content_txt[data-v-7bfb8343]{width:calc(100% - 46px);border:1px solid #e9e9e9;padding:10px 16px;border-radius:4px;font-size:14px;color:#1a1a1a;background:#fff;float:left;word-break:break-word}[data-v-7bfb8343] .ant-input-affix-wrapper .ant-input:not(:last-child){padding-right:50px}[data-v-7bfb8343] .ant-layout,[data-v-7bfb8343] .ant-spin-container,[data-v-7bfb8343] .ant-spin-nested-loading{height:100%}[data-v-7bfb8343] .dark-row{background:#fafafa}[data-v-7bfb8343] .light-row{background:#fff}[data-v-7bfb8343] #components-layout-demo-basic .ant-layout-sider{background:#fff;-webkit-box-flex:0!important;-ms-flex:0 0 24%!important;flex:0 0 24%!important;max-width:24%!important;min-width:24%!important;width:24%!important;border-right:1px solid #e2e2e2;padding:20px 20px}.wrap[data-v-7bfb8343]{border:1px solid #e2d6d6;margin:auto;height:100%;width:100%;background:#f5f5f5;overflow-y:auto;-webkit-box-sizing:content-box;box-sizing:content-box}[data-v-7bfb8343] .ant-form-item-control{margin-left:15px}[data-v-7bfb8343] .ant-form-item{padding:5px 0}.pull-right[data-v-7bfb8343]{width:560px;max-height:630px;height:290px;background:#fff;border:1px solid #d8d8d8;padding:24px;overflow:hidden}[data-v-7bfb8343] .ant-checkbox-wrapper{width:100%;border-bottom:1px dashed #e9e9e9;padding:10px 0}[data-v-7bfb8343] .ant-checkbox{float:right;margin-top:12px}.noMore[data-v-7bfb8343]{text-align:center;padding:10px 0;font-size:12px;color:#999}[data-v-7bfb8343] .ant-input-number-handler-wrap{display:none}[data-v-7bfb8343] .ant-upload.ant-upload-select-picture-card{width:64px;height:64px;margin:0}[data-v-7bfb8343] .ant-upload.ant-upload-select-picture-card>.ant-upload{padding:0}.dataTabble[data-v-7bfb8343]{margin-right:15px;border:1px solid #e8e8e8;width:calc(100% - 15px)}.dataTabble thead[data-v-7bfb8343]{background:#fafafa}.dataTabble thead tr[data-v-7bfb8343]:hover{background:none}.dataTabble thead[data-v-7bfb8343],.dataTabble tr[data-v-7bfb8343]{border-bottom:1px solid #e8e8e8}.dataTabble tr[data-v-7bfb8343]:last-child{border:0}.dataTabble tr[data-v-7bfb8343]:hover{background:#e6f7ff}.dataTabble tr td[data-v-7bfb8343],.dataTabble tr th[data-v-7bfb8343]{width:25%;padding:5px 10px}.dataTabble tr td[data-v-7bfb8343]:first-child,.dataTabble tr th[data-v-7bfb8343]:first-child{width:40%;padding:5px 10px}.dataTabble tr td[data-v-7bfb8343]:last-child,.dataTabble tr th[data-v-7bfb8343]:last-child{width:10%;padding:5px 10px}[data-v-7bfb8343] .ant-tag{margin-right:5px;height:26px;line-height:25px}.changeType-text[data-v-7bfb8343]{background:#fff2db;border:1px solid #ffdda6;border-radius:2px;padding:7px 27px 6px 10px;font-size:12px;width:100%;margin-top:12px;max-width:673px;line-height:20px;margin-bottom:15px}.content-editable[data-v-7bfb8343]{font-size:14px;line-height:21px;padding:15px;border:1px solid #d9d9d9;height:110px;overflow:auto}.content-editable[data-v-7bfb8343] p{margin:0;word-break:break-word}[data-v-7bfb8343] .ant-upload-picture-card-wrapper{width:auto;float:left}.link_pic_url_style[data-v-7bfb8343] .ant-upload.ant-upload-select-picture-card{width:96px;height:96px;overflow:hidden;float:left}[data-v-7bfb8343] .ant-tabs-top-content{padding-bottom:0}",""])},"32a2":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"list"},[n("div",{attrs:{id:"components-layout-demo-basic"}},[n("a-spin",{attrs:{tip:"Loading...",size:"large",spinning:t.isLoading}},[n("a-layout",[n("a-layout-header",["undefined"==typeof t.urlId?[t._v("新建")]:t._e(),"undefined"!=typeof t.urlId?[t._v("修改")]:t._e(),t._v("\n\t\t\t\t\t打卡活动\n\t\t\t\t\t"),n("a-button",{staticStyle:{float:"right","margin-top":"9px"},attrs:{type:"primary",icon:"rollback"},on:{click:t.goBack}},[t._v("返回列表\n\t\t\t\t\t")])],2),n("a-layout",{staticClass:"fans-content"},[n("a-layout-content",[n("div",{staticClass:"content"},[n("div",{staticClass:"content-hd"},[n("a-form",[t.$store.state.corpArr.length>1?n("a-form-item",{attrs:{label:"选择企业微信","label-col":{span:3},"wrapper-col":{span:21}}},[[n("div",{staticStyle:{display:"inline-block",cursor:"pointer"},on:{click:t.add}},[n("img",{staticStyle:{width:"24px","border-radius":"4px"},attrs:{src:a("de05"),alt:""}}),n("span",{staticStyle:{"margin-left":"5px"}},[t._v(t._s(t.$store.state.corpName))]),"undefined"==typeof t.urlId?n("a-icon",{staticStyle:{width:"50px",height:"40px","text-align":"left","line-height":"40px","margin-left":"20px"},attrs:{type:"caret-down"}}):t._e()],1),n("span",{staticStyle:{color:"#F56C6C"}},[t._v("（一旦创建，不可修改）")])]],2):t._e(),n("a-form-item",{staticClass:"current0",attrs:{"label-col":{span:3},"wrapper-col":{span:21}}},[n("template",{slot:"label"},[n("span",{staticStyle:{color:"red"}},[t._v("*")]),t._v("选择应用\n\t\t\t\t\t\t\t\t\t\t")]),[n("a-select",{staticStyle:{width:"200px"},attrs:{showSearch:"",optionFilterProp:"children",placeholder:"请选择应用",disabled:0!=t.status},model:{value:t.agent_id,callback:function(e){t.agent_id=e},expression:"agent_id"}},[t._l(t.agentList,(function(e){return[n("a-select-option",{attrs:{value:e.id}},[t._v(t._s(e.name)+"\n\t\t\t\t\t\t\t\t\t\t\t\t\t")])]}))],2),n("span",{staticStyle:{color:"#F56C6C"}},[t._v("（一旦发布，不可更改）")]),n("div",{staticClass:"content-msg",staticStyle:{"font-size":"13px"}},[n("p",{staticStyle:{height:"20px","line-height":"20px","margin-bottom":"2px"}},[t._v("\n\t\t\t\t\t\t\t\t\t\t\t\t\t1、前往"),n("a",{attrs:{target:"_blank",href:"https://work.weixin.qq.com/wework_admin/loginpage_wx?from=myhome_baidu"}},[t._v("\n\t\t\t\t\t\t\t\t\t\t\t\t\t企业微信后台")]),t._v("创建自建应用。"),n("a",{attrs:{target:"_blank",href:"https://support.qq.com/products/312071/faqs/90047"}},[t._v("\n\t\t\t\t\t\t\t\t\t\t\t\t\t教程")])]),n("p",{staticStyle:{"line-height":"20px",height:"20px","margin-bottom":"0px"}},[t._v("\n\t\t\t\t\t\t\t\t\t\t\t\t\t2、选择此应用，请确认已设置过应用的可信域名。\n\t\t\t\t\t\t\t\t\t\t\t\t\t"),n("a",{staticClass:"el-link el-link--primary",attrs:{href:t.commonUrl+"/upload/slider.png",target:"_blank"}},[n("span",{staticClass:"el-link--inner"},[t._v("查看图示")])])])])]],2)],1)],1),n("div",{staticClass:"content-bd"},[n("a-form",[n("a-form-item",{attrs:{"label-col":{span:3},"wrapper-col":{span:21}}},[n("template",{slot:"label"},[n("span",{staticStyle:{color:"red"}},[t._v("*")]),t._v("活动类型\n\t\t\t\t\t\t\t\t\t\t")]),n("a-radio-group",{attrs:{name:"sceneGroup",disabled:0!=t.status},model:{value:t.activeType,callback:function(e){t.activeType=e},expression:"activeType"}},[n("a-radio",{attrs:{value:1}},[t._v("永久有效")]),n("a-radio",{attrs:{value:2}},[t._v("固定区间")])],1),n("span",{staticStyle:{color:"#F56C6C"}},[t._v("（一旦发布，不可修改）")])],2),2==t.activeType?n("a-form-item",{staticStyle:{"margin-top":"0"},attrs:{"label-col":{span:3},"wrapper-col":{span:21}}},[n("template",{slot:"label"},[n("span",{staticStyle:{color:"red"}},[t._v("*")]),t._v("活动时间\n\t\t\t\t\t\t\t\t\t\t")]),n("a-date-picker",{attrs:{disabled:0!=t.status,disabledDate:t.disabledDate,showTime:{hideDisabledOptions:!0,defaultValue:t.moment("00:00","HH:mm"),format:"HH:mm"},format:"YYYY-MM-DD HH:mm"},on:{change:t.changeStartTime},model:{value:t.startDate,callback:function(e){t.startDate=e},expression:"startDate"}}),t._v("\n\t\t\t\t\t\t\t\t\t\t~\n\t\t\t\t\t\t\t\t\t\t"),n("a-date-picker",{attrs:{disabledDate:t.disabledDate2,showTime:{hideDisabledOptions:!0,defaultValue:t.moment("23:59","HH:mm"),format:"HH:mm"},format:"YYYY-MM-DD HH:mm"},on:{change:t.changeEndTime},model:{value:t.endDate,callback:function(e){t.endDate=e},expression:"endDate"}}),n("span",{staticStyle:{color:"#F56C6C","margin-left":"20px"}},[t._v("（一旦发布，只能延长）")])],2):t._e(),n("a-form-item",{staticStyle:{"margin-top":"0"},attrs:{"label-col":{span:3},"wrapper-col":{span:21}}},[n("template",{slot:"label"},[n("span",{staticStyle:{color:"red"}},[t._v("*")]),t._v("活动名称\n\t\t\t\t\t\t\t\t\t\t")]),n("a-input",{staticStyle:{width:"60%"},attrs:{placeholder:"请输入活动名称",maxLength:20,disabled:0!=t.status},model:{value:t.msg_title,callback:function(e){t.msg_title=e},expression:"msg_title"}}),n("span",{staticStyle:{display:"inline-block",width:"50px","margin-left":"10px",color:"#F56C6C"}},[t._v(t._s(null===t.msg_title?0:t.msg_title.length)+" / 20")]),n("span",{staticStyle:{color:"#F56C6C","margin-left":"20px"}},[t._v("（一旦发布，不可修改）")])],2),n("a-form-item",{attrs:{"label-col":{span:3},"wrapper-col":{span:21}}},[n("template",{slot:"label"},[n("span",{staticStyle:{color:"red"}},[t._v("*")]),t._v("活动规则\n\t\t\t\t\t\t\t\t\t\t")]),n("a-textarea",{staticStyle:{width:"60%","vertical-align":"text-bottom","margin-bottom":"0"},attrs:{placeholder:"请输入活动规则","auto-size":{minRows:5,maxRows:5},maxLength:200},model:{value:t.rule,callback:function(e){t.rule=e},expression:"rule"}}),n("span",{staticStyle:{"margin-left":"10px"}},[t._v(t._s(t.rule.length)+"/200")])],2),n("a-form-item",{attrs:{"label-col":{span:3},"wrapper-col":{span:21}}},[n("template",{slot:"label"},[n("span",{staticStyle:{color:"red"}},[t._v("*")]),t._v("选择打卡类型\n\t\t\t\t\t\t\t\t\t\t")]),n("a-radio-group",{attrs:{name:"sceneGroup",disabled:0!=t.status},model:{value:t.clockInType,callback:function(e){t.clockInType=e},expression:"clockInType"}},[n("a-radio",{attrs:{value:1}},[t._v("连续打卡")]),n("a-radio",{attrs:{value:2}},[t._v("累计打卡")])],1),n("span",{staticStyle:{color:"#F56C6C","margin-left":"20px"}},[t._v("（一旦发布，不可修改）")])],2),n("a-form-item",{attrs:{"label-col":{span:3},"wrapper-col":{span:16}}},[n("template",{slot:"label"},[n("span",{staticStyle:{color:"red"}},[t._v("*")]),t._v("打卡任务设置\n\t\t\t\t\t\t\t\t\t\t")]),n("a-tabs",{staticStyle:{background:"#fff"},attrs:{hideAdd:"",type:"editable-card"},on:{edit:t.onEdit},model:{value:t.activeKey,callback:function(e){t.activeKey=e},expression:"activeKey"}},[t._l(t.clockInList,(function(e,a){return[n("a-tab-pane",{key:e.key,staticStyle:{padding:"0 10px"},attrs:{tab:"第"+(a+1)+"阶段任务",closable:!(0!=t.status&&null!=e.id&&""!=e.id)}},[n("div",{staticStyle:{color:"#F56C6C","margin-bottom":"5px"}},[t._v("每个打卡阶段任务只可奖励1次。一旦关闭，该打卡任务不在手机端展示，但对已获得奖品的用户依然展示。")]),n("div",[n("a-switch",{model:{value:e.is_open,callback:function(a){t.$set(e,"is_open",a)},expression:"item.is_open"}})],1),n("div",[t._v("用户"),1==t.clockInType?n("span",[t._v("连续")]):t._e(),2==t.clockInType?n("span",[t._v("累计")]):t._e(),t._v("打卡\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t"),n("a-input-number",{staticClass:"brush-input",attrs:{min:0,max:99999999,formatter:t.limitDecimals,parse:t.limitDecimals},model:{value:e.days,callback:function(a){t.$set(e,"days",a)},expression:"item.days"}}),t._v("\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t天\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t"),n("a-tooltip",{attrs:{placement:"top"}},[n("template",{slot:"title"},[n("span",[t._v("（修改时长后，不影响在修改前已获得奖品的用户。若设置连续3天打卡获得奖励，某用户已连续打卡2天，此时更改为“2天”，该用户依然无法获得奖励，但是若断掉后，再连续签到2天，即可获得。）")])]),n("a-icon",{staticStyle:{"margin-left":"5px"},attrs:{type:"question-circle"}})],2)],1),n("a-form-item",{attrs:{"label-col":{span:3},"wrapper-col":{span:21}}},[n("template",{slot:"label"},[n("span",{staticStyle:{color:"red"}},[t._v("*")]),t._v("奖品类型\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t")]),n("a-radio-group",{attrs:{name:"radioGroup",disabled:0!=t.status&&null!=e.id&&""!=e.id},model:{value:e.type,callback:function(a){t.$set(e,"type",a)},expression:"item.type"}},[n("a-radio",{attrs:{value:1}},[t._v("实物")]),n("a-radio",{attrs:{value:2}},[t._v("红包")])],1),n("span",{staticStyle:{color:"#F56C6C"}},[t._v("（一旦发布，不可修改。）")])],2),2==e.type?n("a-form-item",{attrs:{"label-col":{span:3},"wrapper-col":{span:21}}},[n("template",{slot:"label"},[n("span",{staticStyle:{color:"red"}},[t._v("*")]),t._v("红包金额\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t")]),n("a-input-number",{staticStyle:{width:"140px","margin-right":"5px"},attrs:{step:0,precision:2,min:.3,max:5e3,disabled:0!=t.status&&null!=e.id&&""!=e.id},model:{value:e.money_amount,callback:function(a){t.$set(e,"money_amount",a)},expression:"item.money_amount"}}),t._v("\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t元\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t"),n("span",{staticStyle:{color:"#F56C6C"}},[t._v("（一旦发布，不可修改。精确到小数点后两位，可输入0.30~5000.00）")])],2):t._e(),1==e.type?n("a-form-item",{attrs:{"label-col":{span:3},"wrapper-col":{span:21}}},[n("template",{slot:"label"},[n("span",{staticStyle:{color:"red"}},[t._v("*")]),t._v("奖品名称\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t")]),n("a-input",{staticStyle:{width:"350px"},attrs:{placeholder:"请填写奖品名称，限10字符",maxLength:10},model:{value:e.reward_name,callback:function(a){t.$set(e,"reward_name",a)},expression:"item.reward_name"}}),n("span",{staticStyle:{display:"inline-block",width:"50px","margin-left":"10px",color:"#F56C6C"}},[t._v(t._s(null===e.reward_name?0:e.reward_name.length)+" / 10")])],2):t._e(),n("a-form-item",{attrs:{"label-col":{span:3},"wrapper-col":{span:21}}},[n("template",{slot:"label"},[n("span",{staticStyle:{color:"red"}},[t._v("*")]),t._v("领奖方式\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t")]),2==e.type?n("div",{staticStyle:{"line-height":"24px"}},[t._v("\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t为了避免微信支付商户平台里的账户余额不足，无法发给参与者而导致的纠纷问题，故在任务完成后，加入客服二维码进行线下联系。若已到账，参与者至于是否加客服，其自定。\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t")]):t._e(),1==e.type?n("a-radio-group",{staticStyle:{"margin-top":"9px"},attrs:{name:"radioGroup",disabled:0!=t.status&&null!=e.id&&""!=e.id},model:{value:e.reward_type,callback:function(a){t.$set(e,"reward_type",a)},expression:"item.reward_type"}},[n("a-radio",{attrs:{value:2}},[t._v("\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t兑换链接\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t"),n("a-tooltip",{attrs:{placement:"bottom"}},[n("template",{slot:"title"},[n("span",[t._v("主要适用于需要快递物流的奖品")])]),n("a-icon",{staticStyle:{"margin-left":"5px"},attrs:{type:"question-circle"}})],2),t._v("\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t（用户完成任务后，让客户填写信息，发送快递）\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t"),n("span",{staticStyle:{color:"#F56C6C"}},[t._v("（一旦发布，不可修改）")])],1),n("a-radio",{staticStyle:{"margin-top":"9px"},attrs:{value:1}},[t._v("\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t联系客服\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t"),n("a-tooltip",{attrs:{placement:"bottom"}},[n("template",{slot:"title"},[n("span",[t._v("主要适用于需要到店自提的奖品、或是以线下发放为主的虚拟奖品。如“XXX运营干货PPT”")])]),n("a-icon",{staticStyle:{"margin-left":"5px"},attrs:{type:"question-circle"}})],2),t._v("\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t（用户完成任务后，联系客服领取奖励）\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t")],1)],1):t._e(),2==e.type||1==e.type&&1==e.reward_type?n("div",[n("div",[n("a-button",{staticStyle:{"margin-top":"10px"},on:{click:function(e){return t.showDepartmentList(a)}}},[e.userKeyNum>0?n("span",[t._v("已选择"+t._s(e.chooseUserNum)+"名成员，"+t._s(e.chooseDepartmentNum)+"个部门")]):n("span",[t._v("选择员工")])]),e.user_keys.length>0?n("a-tooltip",{attrs:{placement:"top"}},[n("template",{slot:"title"},[t._l(e.user_keys,(function(e){return[n("span",[t._v(t._s(e.title)+" ")])]}))],2),n("span",{staticStyle:{display:"inline-block","max-width":"300px",overflow:"hidden","white-space":"nowrap","text-overflow":"ellipsis","vertical-align":"middle","margin-left":"10px",color:"rgba(0, 0, 0, 0.65)"}},[t._l(e.user_keys,(function(e){return[n("span",[t._v(t._s(e.title)+" ")])]}))],2)],2):t._e()],1)]):t._e()],2)],1)]})),n("div",{staticStyle:{"line-height":"30px","text-align":"center",border:"1px solid #1890ff",color:"#1890ff","border-radius":"4px",cursor:"pointer",padding:"0 10px"},attrs:{slot:"tabBarExtraContent"},on:{click:t.addSetting},slot:"tabBarExtraContent"},[t._v("\n\t\t\t\t\t\t\t\t\t\t\t\t新增阶段\n\t\t\t\t\t\t\t\t\t\t\t")])],2)],2),n("a-form-item",{staticStyle:{"margin-bottom":"0","padding-bottom":"10px"}},[n("div",{staticStyle:{height:"20px","border-bottom":"1px solid #E0E0E0"}}),n("div",{staticStyle:{margin:"10px 25% 0"}},[n("a-button",{attrs:{type:"primary",loading:t.createLoading},on:{click:t.submit}},[t._v("\n\t\t\t\t\t\t\t\t\t\t\t\t提交\n\t\t\t\t\t\t\t\t\t\t\t")])],1)])],1)],1)])])],1)],1)],1)],1),n("wxModal",{attrs:{show:t.showModal2,callback:t.modalVisibleChange,hasName:"group-add"}}),n("chooseDepartment",{ref:"user",attrs:{show:t.showModalDepartment,chooseNum:t.chooseNum,departmentDisabled:1,is_from:5,is_external:1,noticeTitle:"只显示具有外部联系人权限的成员",callback:t.modalVisibleChange3}})],1)},i=[],r=a("7618"),s=(a("96cf"),a("3b8d")),o=(a("ac6a"),a("a481"),a("c5f6"),a("0094")),l=a("0cfc"),c=a("c75b"),p=a("e306"),d=a.n(p),g=a("b76a"),h=a.n(g),u=a("156b"),m=a("bc3a"),f=a.n(m),b=a("c1df"),x=a.n(b),v=f.a.CancelToken,k=(v.source(),{components:{wxModal:o["a"],corpChooseTag:l["a"],vuedraggable:h.a,editor:u["a"],chooseDepartment:c["a"]},data:function(){var t=localStorage.getItem("corpId")?localStorage.getItem("corpId"):"";return{img:d.a,commonUrl:this.$store.state.commonUrl,wxInfo:[],corpId:t,avatarImg:"",agent_id:[],agentList:[],showModal2:!1,isLoading:!1,activeType:2,startDate:null,endDate:null,endDate2:null,msg_title:"",rule:"",clockInType:1,status:0,activeKey:1,clockInList:[{id:0,key:1,days:"",type:1,reward_name:"",reward_type:1,money_amount:.3,user_keys:[],userKeyNum:0,chooseUserNum:0,chooseDepartmentNum:0,is_open:!0}],createLoading:!1,urlId:"",moment:x.a,showModalDepartment:!1,chooseNum:0,chooseIndex:0}},methods:{goBack:function(){localStorage.removeItem("notAllow"),localStorage.removeItem("backUrl"),this.$router.push("/group/clockIn")},disabledDate:function(t){return t&&t<x()().startOf("day")},disabledDate2:function(t){if(null!=this.endDate2){var e=null;return e=0!=this.status?this.endDate2:this.startDate,t&&t.valueOf()<e.valueOf()}return t&&t<x()().startOf("day")},changeStartTime:function(t,e){e&&this.startDate&&e>x()(this.endDate).format("YYYY-MM-DD HH:mm")&&(this.$message.destroy(),this.$message.warning("开始时间不能晚于结束时间")),this.startDate=e?t:null},changeEndTime:function(t,e){e&&this.startDate&&e<x()(this.startDate).format("YYYY-MM-DD HH:mm")&&(this.$message.destroy(),this.$message.warning("结束时间不能早于开始时间")),this.endDate=e?t:null},limitDecimals:function(t){var e=/[^\d]/g;return"string"==typeof t?isNaN(Number(t))?"":t.replace(e,""):"number"==typeof t?isNaN(t)?"":String(t).replace(e,""):""},onEdit:function(t,e){this[e](t)},addSetting:function(){var t=this.clockInList,e=Number(this.clockInList[this.clockInList.length-1].key),a=++e;t.push({id:0,key:a,days:"",type:1,reward_name:"",reward_type:1,money_amount:.3,user_keys:[],userKeyNum:0,chooseUserNum:0,chooseDepartmentNum:0,is_open:!0}),this.clockInList=t,this.activeKey=a},remove:function(t){if(!(this.clockInList.length>1))return this.$message.warning("必须存在一个打卡任务"),!1;var e,a=this.activeKey;this.clockInList.forEach((function(a,n){a.key===t&&(e=n-1)}));var n=this.clockInList.filter((function(e){return e.key!==t}));n.length&&a===t&&(a=e>=0?n[e].key:n[0].key),this.clockInList=n,this.activeKey=a},showDepartmentList:function(t){this.chooseNum=this.clockInList[t].userKeyNum,this.chooseIndex=t;var e=[];this.clockInList[t].user_keys.map((function(t){e.push(t.id)})),this.$refs.user.rightIdList=JSON.parse(JSON.stringify(e)),this.$refs.user.rightList=JSON.parse(JSON.stringify(this.clockInList[t].user_keys)),this.showModalDepartment=!0},modalVisibleChange3:function(t,e,a,n,i){"ok"==t&&(this.clockInList[this.chooseIndex].userKeyNum=parseInt(a)+parseInt(n),this.clockInList[this.chooseIndex].chooseUserNum=a,this.clockInList[this.chooseIndex].chooseDepartmentNum=n,this.clockInList[this.chooseIndex].user_keys=i),this.showModalDepartment=!1},add:function(){this.$route.query.id||(this.showModal2=!0,this.isLoading=!0)},modalVisibleChange:function(t,e,a){"ok"==t&&this.corpId!=e?(this.corpId=e,this.isLoading=!1,this.showModal2=!1,this.msg_title=""):(this.isLoading=!1,this.showModal2=!1)},getAgentList:function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(e){var a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.axios.post("work-group-sending/agent-list",{corp_id:this.corpId,suite_id:1,agent_type:2});case 2:a=t.sent,n=a.data,0!=n.error?this.$message.error(n.error_msg):(this.agentList=n.data,e?this.agent_id=e:this.agentList.length>0&&(this.agent_id=this.agentList[0].id));case 5:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),submit:function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(){var e,a,n,i,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if("object"!=Object(r["a"])(this.agent_id)||0!=this.agent_id.length){t.next=3;break}return this.$message.warning("请选择应用"),t.abrupt("return",!1);case 3:if(2!=this.activeType){t.next=13;break}if(null!=this.startDate&&null!=this.endDate){t.next=9;break}return this.$message.warning("请选择活动时间"),t.abrupt("return",!1);case 9:if(0==this.status){t.next=13;break}if(!(this.endDate.valueOf()<this.endDate2.valueOf())){t.next=13;break}return this.$message.warning("发布后活动时间只能延长"),t.abrupt("return",!1);case 13:if(""!=this.msg_title){t.next=16;break}return this.$message.warning("请填写活动名称"),t.abrupt("return",!1);case 16:if(""!=this.rule){t.next=19;break}return this.$message.warning("请填写活动规则"),t.abrupt("return",!1);case 19:for(e=!1,a=0;a<this.clockInList.length;a++)this.clockInList[a].is_open&&(e=!0);if(e){t.next=24;break}return this.$message.warning("请开启第一阶段打卡任务"),t.abrupt("return",!1);case 24:n=0;case 25:if(!(n<this.clockInList.length)){t.next=61;break}if(""!=this.clockInList[n].days&&null!=this.clockInList[n].days){t.next=37;break}if(1!=this.clockInType){t.next=32;break}return this.$message.warning("请填写第"+(n+1)+"阶段连续打卡天数"),t.abrupt("return",!1);case 32:if(2!=this.clockInType){t.next=35;break}return this.$message.warning("请填写第"+(n+1)+"阶段累计打卡天数"),t.abrupt("return",!1);case 35:t.next=41;break;case 37:if("undefined"==typeof this.clockInList[n]||"undefined"==typeof this.clockInList[n].days||"undefined"==typeof this.clockInList[n-1]||"undefined"==typeof this.clockInList[n-1].days){t.next=41;break}if(!(this.clockInList[n].days<=this.clockInList[n-1].days)){t.next=41;break}return this.$message.warning("第"+(n+1)+"阶段打卡天数必须大于前一阶段"),t.abrupt("return",!1);case 41:if(1!=this.clockInList[n].type){t.next=51;break}if(""!=this.clockInList[n].reward_name&&null!=this.clockInList[n].reward_name){t.next=45;break}return this.$message.warning("请填写第"+(n+1)+"阶段奖品名称"),t.abrupt("return",!1);case 45:if(1!=this.clockInList[n].reward_type){t.next=49;break}if(0!=this.clockInList[n].userKeyNum&&0!=this.clockInList[n].user_keys.length){t.next=49;break}return this.$message.warning("请选择第"+(n+1)+"阶段员工"),t.abrupt("return",!1);case 49:t.next=58;break;case 51:if(2!=this.clockInList[n].type){t.next=58;break}if(""!=this.clockInList[n].money_amount&&null!=this.clockInList[n].money_amount){t.next=55;break}return this.$message.warning("请填写第"+(n+1)+"阶段红包金额"),t.abrupt("return",!1);case 55:if(0!=this.clockInList[n].userKeyNum&&0!=this.clockInList[n].user_keys.length){t.next=58;break}return this.$message.warning("请选择第"+(n+1)+"阶段员工"),t.abrupt("return",!1);case 58:n++,t.next=25;break;case 61:return t.next=63,this.axios.post("work-group-clock-activity/add",{id:this.urlId,corp_id:this.corpId,agent_id:this.agent_id,title:this.msg_title,type:this.activeType,start_time:null!=this.startDate?this.startDate.format("YYYY-MM-DD HH:mm"):"",end_time:null!=this.endDate?this.endDate.format("YYYY-MM-DD HH:mm"):"",rule:this.rule,choose_type:this.clockInType,task:this.clockInList});case 63:i=t.sent,s=i.data,0!=s.error?(this.createLoading=!1,this.$message.error(s.error_msg)):(this.createLoading=!1,localStorage.removeItem("notAllow"),localStorage.removeItem("backUrl"),"undefined"!=typeof this.urlId?this.$router.push("/group/clockIn?isRefresh=1"):this.$router.push("/group/clockIn"));case 66:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),getDetail:function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(){var e,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.isLoading=!0,t.next=3,this.axios.post("work-group-clock-activity/detail",{id:this.urlId});case 3:e=t.sent,a=e.data,0!=a.error?(this.isLoading=!1,this.$message.error(a.error_msg)):(this.corpId=a.data.corp_id,this.agent_id=String(a.data.agent_id),this.activeType=a.data.type,this.startDate=null,this.endDate=null,this.endDate2=null,2==this.activeType&&(this.startDate=null!=a.data.start_time&&""!=a.data.start_time?x()(a.data.start_time):null,this.endDate=null!=a.data.end_time&&""!=a.data.end_time?x()(a.data.end_time):null,this.endDate2=null!=a.data.end_time&&""!=a.data.end_time?x()(a.data.end_time):null),this.msg_title=a.data.title,this.rule=a.data.rule,this.clockInType=a.data.choose_type,this.status=a.data.status,this.clockInList=a.data.task,this.clockInList.map((function(t,e){t.reward_type=Number(t.reward_type),t.type=Number(t.type),t.userKeyNum=t.user_keys.length,t.key=e,t.chooseUserNum=0,t.chooseDepartmentNum=0,t.user_keys.length>0&&t.user_keys.map((function(e){"custom"==e.scopedSlots.title?t.chooseUserNum++:"title"==e.scopedSlots.title&&t.chooseDepartmentNum++}))})),this.activeKey=0,this.isLoading=!1);case 6:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},created:function(){var t=this;this.urlId=this.$route.query.id;var e=this;this.$store.dispatch("getWx",(function(a){e.wxInfo=a,t.getAgentList()})),"undefined"!=typeof this.urlId&&(localStorage.setItem("notAllow",1),localStorage.setItem("backUrl","/group/autoCreate"),this.getDetail())}}),y=k,w=(a("b15d"),a("2877")),_=Object(w["a"])(y,n,i,!1,null,"7bfb8343",null);e["default"]=_.exports},"59fe":function(t,e,a){var n=a("b6ee");"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var i=a("499e").default;i("2af37125",n,!0,{sourceMap:!1,shadowMode:!1})},6617:function(t,e,a){"use strict";var n=a("a3bb"),i=a.n(n);i.a},a245:function(t,e,a){var n=a("2e4d");"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var i=a("499e").default;i("74212b44",n,!0,{sourceMap:!1,shadowMode:!1})},a3bb:function(t,e,a){var n=a("1fa6");"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var i=a("499e").default;i("0708ddb1",n,!0,{sourceMap:!1,shadowMode:!1})},b15d:function(t,e,a){"use strict";var n=a("a245"),i=a.n(n);i.a},b6ee:function(t,e,a){e=t.exports=a("2350")(!1),e.push([t.i,"[data-v-440e9184] .ant-radio-button-wrapper{width:200px;height:55px;line-height:47px;padding:0 10px;margin:10px 5px}[data-v-440e9184] .wxtpl .ant-radio-button-wrapper-checked{border:2px solid #1890ff!important}.text[data-v-440e9184]{margin-left:5px;vertical-align:middle;display:inline-block;width:calc(100% - 37px);overflow:hidden;text-overflow:ellipsis;white-space:nowrap}",""])},b884:function(t,e,a){e=t.exports=a("2350")(!1),e.push([t.i,"[data-v-1c74f8e2] .ant-tree-checkbox{float:right}[data-v-1c74f8e2] .ant-tree-iconEle{display:none!important}[data-v-1c74f8e2] .ant-tree-node-content-wrapper.ant-tree-node-selected{background-color:#fff!important}[data-v-1c74f8e2] .ant-list-item{border-bottom:0;padding:0}[data-v-1c74f8e2] .ant-list-item-meta-title{font-weight:400;line-height:32px}[data-v-1c74f8e2] .ant-tree li span.ant-tree-checkbox{margin:4px 20px 0 2px}.content-msg[data-v-1c74f8e2]{color:red;margin:0 20px 12px 0}.group-name[data-v-1c74f8e2]{overflow:hidden;white-space:nowrap;text-overflow:ellipsis;width:calc(100% - 4px);display:inline-block;vertical-align:bottom}.tabBox[data-v-1c74f8e2]{background:#fff;padding:10px;-webkit-box-sizing:border-box;box-sizing:border-box;margin-right:20px;border:1px solid #d8d8d8}[data-v-1c74f8e2] .ant-tag-checkable{background-color:#fafafa;border-color:#d9d9d9;height:26px;line-height:25px}[data-v-1c74f8e2] .ant-tag-checkable-checked{background-color:#1890ff}[data-v-1c74f8e2] .ant-col-20{margin-left:20px;width:calc(83.33333% - 20px)}.add-tag-group[data-v-1c74f8e2] .ant-col-20{margin-left:0;width:83.33333333%}",""])},c814:function(t,e,a){var n=a("b884");"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var i=a("499e").default;i("688da18d",n,!0,{sourceMap:!1,shadowMode:!1})},d22e:function(t,e,a){"use strict";var n=a("c814"),i=a.n(n);i.a},e306:function(t,e,a){t.exports=a.p+"assets/img/chat.29abd713.png"},ffd5:function(t,e,a){"use strict";var n=a("59fe"),i=a.n(n);i.a}}]);