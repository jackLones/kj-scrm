(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-673467c6"],{"0094":function(t,e,i){"use strict";var a=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("a-modal",{attrs:{title:"选择企业微信",width:"888"},on:{ok:t.handleOk,cancel:t.handleCancel},model:{value:t.showModal,callback:function(e){t.showModal=e},expression:"showModal"}},[a("div",{staticStyle:{height:"270px"}},[t.corpInfo[0]?a("a-select",{staticStyle:{width:"200px","margin-bottom":"20px","margin-left":"5px"},attrs:{showSearch:"",optionFilterProp:"children"},on:{change:t.changeWx},model:{value:t.changeBackground,callback:function(e){t.changeBackground=e},expression:"changeBackground"}},[t._l(t.corpInfo,(function(e){return[a("a-select-option",{attrs:{value:e.corpid}},[t._v("\n\t\t\t\t\t\t"+t._s(e.corp_name)+"\n\t\t\t\t\t")])]}))],2):t._e(),a("div",{staticClass:"wxtpl",staticStyle:{height:"230px"}},[t._l(t.corpInfo,(function(e,n){return["scene"!=t.routeName&&"template"!=t.routeName?[a("a-radio-group",{on:{change:function(i){return t.changeWx2(e.corpid,e.corp_name)}},model:{value:t.changeBackground,callback:function(e){t.changeBackground=e},expression:"changeBackground"}},[a("a-radio-button",{attrs:{value:e.corpid}},[a("div",[a("img",{staticStyle:{"border-radius":"4px",width:"32px"},attrs:{src:i("de05"),alt:""}}),a("span",{staticClass:"text"},[t._v(t._s(e.corp_name))])])])],1)]:t._e(),"scene"==t.routeName||"template"==t.routeName?[a("a-radio-group",{on:{change:function(i){return t.changeWx2(e.corpid,e.corp_name)}},model:{value:t.changeBackground,callback:function(e){t.changeBackground=e},expression:"changeBackground"}},[a("a-radio-button",{attrs:{value:e.corpid}},[a("div",[a("a-avatar",{attrs:{src:e.head_img,shape:"square"}}),a("span",{staticClass:"text"},[t._v(t._s(e.corp_name))])],1)])],1)]:t._e()]}))],2)],1)])],1)},n=[],r=(i("7f7f"),i("28a5"),i("96cf"),i("3b8d")),s=(i("7514"),i("bc3a")),o=i.n(s),l=i("f64c"),c={name:"wxModal",props:{show:{type:Boolean,default:!1},callback:{type:Function,default:null},hasName:{type:String,default:""},type:{type:String,default:""},corpId1:{type:String,default:""},wxId:{type:String,default:""}},data:function(){var t=localStorage.getItem("corpId")?localStorage.getItem("corpId"):"";return{showModal:!1,corpInfo:[],changeBackground:t,corpId:t,corpName:this.$store.state.corpName,routeName:""}},methods:{handleOk:function(){var t=this;if(2==localStorage.getItem("isMasterAccount"))this.getPermissionButton();else{this.showModal=!1;var e=this.corpInfo.find((function(e){return e.corpid==t.corpId}));this.$store.dispatch("changeCorp",e),null!==this.callback&&"function"===typeof this.callback&&this.callback("ok",this.corpId,e.corp_name)}},handleCancel:function(t){null!==this.callback&&"function"===typeof this.callback&&this.callback("cancel"),this.showModal=!1},changeWx:function(t){this.corpId=t},changeWx2:function(t,e){this.corpId=t,this.corpName=e},getPermissionButton:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(){var e,i,a,n,r,s,c,d,p=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,o.a.post("sub-user/get-sub-user-authority",{isMasterAccount:localStorage.getItem("isMasterAccount"),sub_id:localStorage.getItem("sub_id"),account_id:this.corpId,type:""!=this.type?this.type:localStorage.getItem("type"),corp_id:2==this.type?this.corpId:"",wx_id:2==this.type?this.wxId:""});case 2:if(e=t.sent,i=e.data,0!=i.error){t.next=34;break}if(!(i.data.length>0)){t.next=31;break}if(""==this.hasName){t.next=25;break}if(a=this.hasName.split(","),!(a.length>0)){t.next=22;break}n=!0,r=0;case 11:if(!(r<a.length)){t.next=19;break}if(-1!=i.data.indexOf(a[r])){t.next=16;break}return l["a"].error("该企业微信未配置相关功能权限，无法选择"),n=!1,t.abrupt("return",!1);case 16:r++,t.next=11;break;case 19:n&&(this.showModal=!1,s=this.corpInfo.find((function(t){return t.corpid==p.corpId})),this.$store.dispatch("changeCorp",s),null!==this.callback&&"function"===typeof this.callback&&this.callback("ok",this.corpId,s.corp_name)),t.next=23;break;case 22:-1==i.data.indexOf(this.hasName)?l["a"].error("该企业微信未配置相关功能权限，无法选择"):(this.showModal=!1,c=this.corpInfo.find((function(t){return t.corpid==p.corpId})),this.$store.dispatch("changeCorp",c),null!==this.callback&&"function"===typeof this.callback&&this.callback("ok",this.corpId,c.corp_name));case 23:t.next=29;break;case 25:this.showModal=!1,d=this.corpInfo.find((function(t){return t.corpid==p.corpId})),this.$store.dispatch("changeCorp",d),null!==this.callback&&"function"===typeof this.callback&&this.callback("ok",this.corpId,d.corp_name);case 29:t.next=32;break;case 31:l["a"].error("无权限");case 32:t.next=35;break;case 34:l["a"].error("获取权限按钮列表失败！");case 35:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},watch:{show:function(t){var e=this;this.showModal=t,this.changeBackground=localStorage.getItem("corpId"),this.$store.dispatch("getCorp",(function(t){e.corpInfo=t,e.corpId=e.$store.state.corpId,!e.changeBackground&&e.corpInfo.length>0&&(e.changeBackground=e.$store.state.corpId,e.corpId=e.$store.state.corpId,e.corpName=e.$store.state.corpName)})),this.routeName=this.$route.name}},created:function(){}},d=c,p=(i("ffd5"),i("2877")),u=Object(p["a"])(d,a,n,!1,null,"440e9184",null);e["a"]=u.exports},"0426":function(t,e,i){"use strict";var a=i("8aa1"),n=i.n(a);n.a},"0902":function(t,e,i){var a=i("6ce0");"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var n=i("499e").default;n("6090c2c4",a,!0,{sourceMap:!1,shadowMode:!1})},"0cfc":function(t,e,i){"use strict";var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"tabBox"},[i("a-empty",{directives:[{name:"show",rawName:"v-show",value:0==t.groupList.length&&1==t.isNotAdd,expression:"groupList.length == 0 && isNotAdd == 1"}]},[i("span",{attrs:{slot:"description"},slot:"description"},[t._v("\n\t\t\t尚未创建标签，无法选择标签\n\t\t")])]),t._l(t.groupList,(function(e,a){return[t.isMore||!t.isMore&&a<5?i("div",{staticClass:"mb-10"},[i("span",{staticClass:"group-name mb-10"},[e.name&&""!=e.name?i("a-popover",{attrs:{trigger:"hover"}},[i("span",{staticStyle:{display:"inline-block","max-width":"500px","word-wrap":"break-word","word-break":"break-all"},attrs:{slot:"content"},slot:"content"},[t._v("\n\t\t\t\t\t\t"+t._s(e.name)+"\n\t\t\t\t\t")]),i("span",{staticStyle:{"font-weight":"700"}},[t._v(" "+t._s(e.name)+"：")])]):t._e()],1),t._l(e.data,(function(n,r){return i("span",[e.disabled[r]?t._e():i("a-checkable-tag",{staticClass:"h-30 l-h-30 mb-10",on:{change:function(e){return t.changeTags(n.id,a)}},model:{value:e.checked[r],callback:function(i){t.$set(e.checked,r,i)},expression:"item.checked[tagIndex]"}},[t._v("\n\t\t\t\t\t"+t._s(n.tagname)+"\n\t\t\t\t")]),e.disabled[r]&&1==t.isDisabled?i("a-button",{staticStyle:{margin:"5px","line-height":"26px","font-size":"12px",height:"auto !important",padding:"0 7px"},attrs:{disabled:e.disabled[r]&&1==t.isDisabled}},[t._v("\n\t\t\t\t\t"+t._s(n.tagname)+"\n\t\t\t\t")]):t._e()],1)})),1!=t.isNotAdd&&t.showAddTag?i("a-button",{staticStyle:{"font-size":"13px",height:"30px",color:"#1890FF",border:"1px solid #1890FF"},attrs:{icon:"plus"},on:{click:function(i){return t.createTag(e.id)}}},[t._v("\n\t\t\t\t添加\n\t\t\t")]):t._e()],2):t._e()]})),t.groupList.length>5?i("div",{staticStyle:{"font-size":"13px",height:"26px",color:"#1890FF","text-align":"center",cursor:"pointer"},on:{click:t.showMore}},[t.isMore?t._e():[t._v("更多")],t.isMore?[t._v("收起")]:t._e(),i("a-icon",{attrs:{type:t.isMore?"arrow-up":"arrow-down"}})],2):t._e(),t.showAddGroupTag&&t.groupList.length>0&&1!=t.isNotAdd?i("a-button",{staticStyle:{"font-size":"13px",height:"26px","margin-right":"10px",color:"#1E90FF"},attrs:{icon:"plus"},on:{click:t.addTagGroup}},[t._v("\n\t\t新建标签组\n\t")]):t._e(),i("a-modal",{attrs:{title:"新建标签",zIndex:99999,confirmLoading:t.confirmLoading3,width:"550px"},on:{ok:function(e){return t.handleOk(t.inputValue)},cancel:t.cancel},model:{value:t.visible,callback:function(e){t.visible=e},expression:"visible"}},[i("a-form-item",{attrs:{"label-col":{span:4},"wrapper-col":{span:20}}},[i("template",{slot:"label"},[t._v("\n\t\t\t\t选择分组\n\t\t\t")]),i("a-select",{staticStyle:{width:"250px"},attrs:{showSearch:"",optionFilterProp:"children",disabled:""},model:{value:t.group_id,callback:function(e){t.group_id=e},expression:"group_id"}},t._l(t.groupList,(function(e){return i("a-select-option",{attrs:{value:e.id}},[t._v("\n\t\t\t\t\t"+t._s(e.name)+"\n\t\t\t\t")])})),1)],2),i("a-form-item",{attrs:{"label-col":{span:4},"wrapper-col":{span:20}}},[i("template",{slot:"label"},[t._v("\n\t\t\t\t标签名称\n\t\t\t")]),i("p",{staticStyle:{margin:"0px","font-size":"13px",color:"#909399"}},[t._v("\n\t\t\t\t每个标签名称最多15个字。同时新建多个标签时，请用“空格”隔开")]),i("a-input",{attrs:{placeholder:"请输入标签（不得超过15个字符）"},model:{value:t.inputValue,callback:function(e){t.inputValue=e},expression:"inputValue"}})],2)],1),i("a-modal",{staticClass:"add-tag-group",attrs:{zIndex:99999,title:"新建标签组",visible:t.groupVisible,confirmLoading:t.confirmLoading},on:{ok:t.handleOk2,cancel:t.handleCancel}},[i("a-form-item",{staticClass:"current0",attrs:{"label-col":{span:4},"wrapper-col":{span:20}}},[i("template",{slot:"label"},[i("span",{staticStyle:{color:"red"}},[t._v("*")]),t._v("分组名称\n\t\t\t")]),i("a-input",{attrs:{placeholder:"请输入分组名(不得超过15个字符)",maxLength:15},model:{value:t.teamName,callback:function(e){t.teamName=e},expression:"teamName"}},[i("span",{attrs:{slot:"suffix"},slot:"suffix"},[i("span",[t._v(t._s(t.teamName.length))]),t._v("/15\n\t\t\t\t\t\t\t\t\t\t\t")])])],2),i("a-form-item",{staticClass:"current0",attrs:{"label-col":{span:4},"wrapper-col":{span:20}}},[i("template",{slot:"label"},[i("span",{staticStyle:{color:"red"}},[t._v("*")]),t._v("标签名称\n\t\t\t")]),i("p",{staticStyle:{margin:"0px","font-size":"13px",color:"#909399"}},[t._v("\n\t\t\t\t每个标签名称最多15个字。同时新建多个标签时，请用“空格”隔开\n\t\t\t")]),i("a-input",{attrs:{placeholder:"请输入标签（不得超过15个字符）"},model:{value:t.inputValue2,callback:function(e){t.inputValue2=e},expression:"inputValue2"}})],2)],1)],2)},n=[],r=(i("a481"),i("28a5"),i("6762"),i("2fdb"),i("96cf"),i("3b8d")),s=(i("c5f6"),{name:"corpChooseTag",props:{type:{type:Number,default:0},index:{type:Number,default:0},callback:{type:Function,default:null},hasChoose:{type:Array,default:function(){}},isDisabled:{type:Number,default:0},disabledTag:{type:Array,default:function(){}},isNotAdd:{type:Number,default:0},id:{type:String,default:""},isGroup:{type:Number,default:0}},data:function(){return{corpId:"",groupList:[],tag_arr:[],tag_ids:"",group_id:[],checked:[],visible:!1,confirmLoading3:!1,inputValue:"",newTagList:[],isMore:!1,groupVisible:!1,confirmLoading:!1,teamName:"",inputValue2:"",newTagList2:[],showAddTag:!1,showAddGroupTag:!1}},watch:{hasChoose:{handler:function(t){var e=this;"undefined"!=typeof t&&this.groupList.length&&(this.tag_arr=t,this.tag_ids=t.join(),this.hasChoose.map((function(t){e.groupList.map((function(e){e.data.map((function(i,a){t==i.id&&(e.checked[a]=!0)}))}))})),0==t.length&&this.groupList.map((function(t){t.checked=[]})),this.$forceUpdate())},deep:!0},id:{handler:function(t){""!=typeof t&&(this.corpId=t,this.getTags())},deep:!0},disabledTag:{handler:function(t){var e=this;"undefined"!=typeof t&&this.groupList.length&&(this.disabledTag.map((function(t){e.groupList.map((function(e){e.data.map((function(i,a){t==i.id&&(e.disabled[a]=!0)}))}))})),this.$forceUpdate())},deep:!0}},methods:{getTags:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(){var e,i,a=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.axios.post("work-tag-group/tag-group",{corp_id:this.corpId||localStorage.getItem("corpId"),is_not_add:this.isNotAdd,type:this.type});case 2:e=t.sent,i=e.data,0!=i.error?this.$message.error(i.error_msg):(this.groupList=i.data,this.groupList.map((function(t){t.checked=[],t.disabled=[]})),"undefined"!=typeof this.disabledTag&&this.disabledTag.length>0&&this.disabledTag.map((function(t){a.groupList.map((function(e){e.data.map((function(i,a){t==i.id&&(e.disabled[a]=!0)}))}))})),"undefined"!=typeof this.hasChoose&&this.hasChoose.length>0&&(this.tag_arr=this.hasChoose,this.tag_ids=this.hasChoose.join(),this.hasChoose.map((function(t){a.groupList.map((function(e){e.data.map((function(i,a){t==i.id&&(e.checked[a]=!0)}))}))})),this.$forceUpdate()));case 5:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),changeTags:function(t,e){Array.prototype.indexOf=function(t){for(var e=0;e<this.length;e++)if(this[e]==t)return e;return-1},Array.prototype.remove=function(t){var e=this.indexOf(t);e>-1&&this.splice(e,1)};var i=String(t);if(this.tag_arr.includes(i))this.tag_arr.remove(i);else if(this.tag_arr.length+1>9999){this.$message.warning("不可选中，客户标签数量上限9999个");for(var a=0;a<this.groupList[e].data.length;a++)this.groupList[e].data[a].id==i&&(this.groupList[e].checked[a]=!1)}else this.tag_arr.push(i);this.$forceUpdate(),this.tag_ids=this.tag_arr.join(),null!==this.callback&&"function"===typeof this.callback&&this.callback("ok",this.tag_ids,this.index)},createTag:function(t){this.group_id=t;var e=0;if(this.groupList.map((function(t){e+=t.data.length})),e>=9999)return this.$message.warning("标签数量已超过上限9999个，无法创建"),!1;this.visible=!0},handleOk:function(t){var e=this;if(e.confirmLoading3=!0,""==t)return e.$message.warning("不能为空"),e.confirmLoading3=!1,!1;e.newTagList=[];for(var i=0;i<t.split(" ").length;i++){if(t.split(" ")[i].length>15)return e.$message.error("每个标签最多15个字"),e.confirmLoading3=!1,!1;t.split(" ")[i].length>0&&e.newTagList.push(t.split(" ")[i])}e.addTags(),e.inputValue="",e.newTagList=[],e.confirmLoading3=!1},addTags:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(){var e,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.axios.post("work-tag/add",{corp_id:this.corpId||localStorage.getItem("corpId"),suite_id:1,type:this.type,group_id:this.group_id,name:this.newTagList});case 2:e=t.sent,i=e.data,0!=i.error?(this.$message.error(i.error_msg),this.confirmLoading3=!1):(this.isLoading=!1,this.visible=!1,this.confirmLoading3=!1,this.getTags(),this.inputValue="",this.newTagList=[],this.$emit("addTag"));case 5:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),cancel:function(){this.visible=!1,this.inputValue=""},showMore:function(){this.isMore=!this.isMore},addTagGroup:function(){this.groupVisible=!0},handleCancel:function(){this.groupVisible=!1,this.teamName="",this.newTagList2=[],this.inputValue2=""},handleOk2:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(){var e,i,a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(String.prototype.Trim=function(){return this.replace(/(^\s*)|(\s*$)/g,"")},this.teamName=this.teamName.Trim(),this.teamName){t.next=5;break}return this.$message.error("请输入分组名"),t.abrupt("return",!1);case 5:if(""!=this.inputValue2){t.next=10;break}return this.$message.warning("标签名称不能为空"),t.abrupt("return",!1);case 10:this.newTagList2=[],e=JSON.parse(JSON.stringify(this.inputValue2)).split(" "),i=0;case 13:if(!(i<e.length)){t.next=24;break}if(!(e[i].length>15)){t.next=20;break}return this.$message.error("每个标签最多15个字"),this.inputValue2="",t.abrupt("return",!1);case 20:e[i].length>0&&this.newTagList2.push(e[i]);case 21:i++,t.next=13;break;case 24:return this.confirmLoading=!0,t.next=27,this.axios.post("work-tag-group/add",{corp_id:this.corpId||localStorage.getItem("corpId"),suite_id:1,name:this.teamName,type:this.type,isMasterAccount:localStorage.getItem("isMasterAccount"),sub_id:localStorage.getItem("sub_id"),tag_name:this.newTagList2});case 27:a=t.sent,n=a.data,0!=n.error?this.$message.error(n.error_msg):(this.teamName="",this.newTagList2=[],this.inputValue2="",this.groupVisible=!1,this.getTags(),this.$emit("addTag")),this.confirmLoading=!1;case 31:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},mounted:function(){if(this.corpId=this.id||localStorage.getItem("corpId"),1==localStorage.getItem("isMasterAccount"))this.showAddTag=!0,this.showAddGroupTag=!0;else{var t=JSON.parse(JSON.stringify(localStorage.getItem("permissionButton"))).split(",");0==this.isGroup?(t.indexOf("client-tag-add")>-1?this.showAddTag=!0:this.showAddTag=!1,t.indexOf("client-tag-group-add")>-1?this.showAddGroupTag=!0:this.showAddGroupTag=!1):1==this.isGroup&&(t.indexOf("groupTag-add")>-1?this.showAddTag=!0:this.showAddTag=!1,t.indexOf("groupTag-group-add")>-1?this.showAddGroupTag=!0:this.showAddGroupTag=!1)}this.getTags()}}),o=s,l=(i("e33a"),i("2877")),c=Object(l["a"])(o,a,n,!1,null,"1dc98380",null);e["a"]=c.exports},"156b":function(t,e,i){"use strict";var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("medium-editor",{ref:"medium_editor",staticClass:"content-editable",attrs:{text:t.textAreaValueHeader,options:t.options,"custom-tag":"div"},on:{editorCreated:t.editorCreated,edit:t.changeContentInput}}),i("div",{staticStyle:{"margin-right":"15px",float:"right"}},[t._v("\n\t\t"+t._s(t.wordNum)+"/"+t._s(t.wordLimit)+"\n\t")]),t.isNickName||t.isEmoji?i("div",{staticStyle:{padding:"0 15px"}},[t._v("\n\t\t点击插入：\n\t\t"),t.isNickName&&1==t.type?i("a-button",{staticClass:"ant-tag ant-tag-orange",attrs:{size:"small"},on:{click:function(e){return t.addTag("客户名称")}}},[t._v("客户名称\n\t\t")]):t._e(),t.isNickName&&0==t.type?i("a-button",{staticClass:"ant-tag ant-tag-orange",attrs:{size:"small"},on:{click:function(e){return t.addTag("粉丝昵称")}}},[t._v("粉丝昵称\n\t\t")]):t._e(),t.isRanking?i("a-button",{staticClass:"ant-tag ant-tag-orange",attrs:{size:"small"},on:{click:function(e){return t.addTag("排行榜")}}},[t._v("排行榜\n\t\t")]):t._e(),t.isEmoji?i("a-popover",{attrs:{trigger:"click",destroyTooltipOnHide:!0},model:{value:t.emojiShow,callback:function(e){t.emojiShow=e},expression:"emojiShow"}},[i("VEmojiPicker",{attrs:{slot:"content",showSearch:!1},on:{select:t.onSelectEmoji},slot:"content"}),i("a-icon",{staticClass:"icon-btn",staticStyle:{cursor:"pointer"},attrs:{type:"smile"}})],1):t._e()],1):t._e(),i("div",{staticClass:"changeType-text"},[t._v("\n\t\t提示：火狐浏览器可能出现无法正确插入"),1==t.type?[t._v("客户名称")]:t._e(),0==t.type?[t._v("粉丝昵称")]:t._e(),t._v("，请使用谷歌、360浏览器\n\t")],2)],1)},n=[],r=(i("6b54"),i("3b2b"),i("386d"),i("ac6a"),i("28a5"),i("c5f6"),i("a481"),i("4884")),s=i.n(r),o=i("40cf"),l=i("79b5"),c=i("c758"),d={name:"index",components:{TemplateList:c["default"],VEmojiPicker:l["a"],"medium-editor":s.a},watch:{text:{handler:function(t){this.textContent=t;var e=this.textContent.replace(/{nickname}/g,1==this.type?" 客户名称 ":" 粉丝昵称 ").replace(/{ranking}/g," 排行榜 ").replace(/{success}/g," 已完成任务量 ").replace(/{error}/g," 未完成任务量 ").replace(/{oneLevel}/g," 一阶任务剩余库存 ").replace(/{twoLevel}/g," 二阶任务剩余库存 ").replace(/{threeLevel}/g," 三阶任务剩余库存 ").replace(/\n/g,"").replace(/(<\/?a.*?>)/g,"").replace(/&lt;/g,"<").replace(/&gt;/g,">"),i=this.textContent.replace(/{nickname}/g,1==this.type?" 客户名称 ":" 粉丝昵称1 ");this.isMenu?(this.wordNum=e.length+10*this.getLeng(i),this.wordNum>this.wordLimit&&(this.wordNum=this.wordLimit)):this.wordNum=e.length},deep:!0},textValue:{handler:function(t){this.textAreaValueHeader=t},deep:!0}},props:{isMenu:{type:Boolean,default:!1},text:{type:String,default:""},textValue:{type:String,default:""},isNickName:{type:Boolean,default:!0},isRanking:{type:Boolean,default:!1},isEmoji:{type:Boolean,default:!0},wordLimit:{type:Number,default:1e3}},data:function(){return{isTag:!1,type:localStorage.getItem("type"),textContent:"",textAreaValueHeader:"",emojiShow:!1,wordNum:0,mediumEditor:"",options:{toolbar:!1,placeholder:{text:""}},keydownNode:!1,keydownNodeIndex:0}},mounted:function(){var t=this;this.textContent=this.text;var e=this.textContent.replace(/{nickname}/g,1==this.type?" 客户名称 ":" 粉丝昵称 ").replace(/{ranking}/g," 排行榜 ").replace(/\n/g,"").replace(/(<\/?a.*?>)/g,"").replace(/&lt;/g,"<").replace(/&gt;/g,">"),i=this.textContent.replace(/{nickname}/g,1==this.type?" 客户名称 ":" 粉丝昵称1 ");this.isMenu?(this.wordNum=e.length+10*this.getLeng(i),this.wordNum>this.wordLimit&&(this.wordNum=this.wordLimit)):this.wordNum=e.length,this.textAreaValueHeader="<p>"+this.textValue+"</p>",document.addEventListener("selectionchange",(function(){t.getCursor(self)}))},methods:{getLeng:function(t){var e=t.split(" "),i=[];return e.forEach((function(t){"粉丝昵称1"==t&&i.push(t)})),i.length},initTextMsgContent:function(t){var e=this;return-1!==t.search(/[\/\[\]\(\)\|\$\*\?\+\-\_]/g)&&o["a"].wechatEmojiKey.map((function(i){var a=new RegExp(e.utils.addslashes(i),"g"),n=o["a"].getEmojiUrl(i);t=t.replace(a,'<img src="'+n+'" alt="'+i+'" height="21" width="21"/>')})),t.replace(/[\r\n|\n]/g,"<br/>")},toggleDialogEmoji:function(){this.emojiShow=!this.emojiShow},onSelectEmoji:function(t){var e=this.mediumEditor.options.ownerDocument;this.wordLimit-this.wordNum>=2&&this.insertHTMLCommand(e,t.data),this.toggleDialogEmoji()},getCursor:function(t){var e=getSelection();if(e){var i=e.anchorNode,a=!1;while(i&&i.nodeType!=i.DOCUMENT_NODE){var n=i.classList;if(n&&n.contains("content-editable")){a=!0;break}i=i.parentNode}a&&(t.lastRange=e.getRangeAt(0),t.lastNode=i)}},insertHTMLCommand:function(t,e){if("undefined"===typeof self.lastNode||!self.lastNode.classList.contains("content-editable"))return!1;var i,a,n,r,o,l,c=["insertHTML",!1,e];if(i=self.lastRange,a=i.commonAncestorContainer,s.a.MediumEditor.util.isMediumEditorElement(a)&&!a.firstChild)i.selectNode(a.appendChild(t.createTextNode("")));else if(3===a.nodeType&&0===i.startOffset&&i.endOffset===a.nodeValue.length||3!==a.nodeType&&a.innerHTML===i.toString()){while(!s.a.MediumEditor.util.isMediumEditorElement(a)&&a.parentNode&&1===a.parentNode.childNodes.length&&!s.a.MediumEditor.util.isMediumEditorElement(a.parentNode))a=a.parentNode;i.selectNode(a)}i.deleteContents(),n=t.createElement("div"),n.innerHTML=e,r=t.createDocumentFragment();while(n.firstChild)o=n.firstChild,l=r.appendChild(o);i.insertNode(r),l&&(i=i.cloneRange(),i.setStartAfter(l),i.collapse(!0),s.a.MediumEditor.selection.selectRange(t,i)),t.execCommand.callListeners&&t.execCommand.callListeners(c,!0),this.wordNum=self.lastNode.textContent.length,this.wordNum<=this.wordLimit&&(this.textAreaValueHeader=self.lastNode.innerHTML.replace(/<pre([^>]*)>/g,"<p>").replace(/<\/pre>/g,"</p>").replace(/<font([^>]*)>/g,"<p>").replace(/<\/font>/g,"</p>").replace(/<div([^>]*)>/g,"<p>").replace(/<\/div>/g,"</p>"),"undefined"==typeof this.urlId?this.textContent=self.lastNode.innerHTML.replace(/(<p><span>)?<br([^>]*)>(<\/span>)?<\/p>/g,"</p>").replace(/<p([^>]*)>/g,"").replace(/<\/p>/g,"\n").replace(/(&nbsp;)?<span contenteditable="false" class="ant-tag ant-tag-orange">客户名称<\/span>(&nbsp;)?/g,"{nickname}").replace(/(&nbsp;)?<span contenteditable="false" class="ant-tag ant-tag-orange">粉丝昵称<\/span>(&nbsp;)?/g,"{nickname}").replace(/(&nbsp;)?<span contenteditable="false" class="ant-tag ant-tag-orange">排行榜<\/span>(&nbsp;)?/g,"{ranking}").replace(/<br([^>]*)>/g,"\n").replace(/<span([^>]*)>/g,"").replace(/<\/span>/g,"").replace(/&nbsp;/g," ").replace(/miniprogramappid/g,"miniprogram-appid").replace(/miniprogrampath/g,"miniprogram-path").replace(/&amp;/g,"&").replace(/&lt;/g,"<").replace(/&gt;/g,">"):this.textContent=self.lastNode.innerHTML.replace(/(<p><span>)?<br([^>]*)>(<\/span>)?<\/p>/g,"</p>").replace(/<br([^>]*)>/g,"\n").replace(/(&nbsp;)?<span contenteditable="false" class="ant-tag ant-tag-orange">客户名称<\/span>(&nbsp;)?/g,"{nickname}").replace(/(&nbsp;)?<span contenteditable="false" class="ant-tag ant-tag-orange">粉丝昵称<\/span>(&nbsp;)?/g,"{nickname}").replace(/(&nbsp;)?<span contenteditable="false" class="ant-tag ant-tag-orange">排行榜<\/span>(&nbsp;)?/g,"{ranking}").replace(/([^<p>]+)<p([^>]*)>/g,"$1\n").replace(/<p([^>]*)>/g,"").replace(/<\/p>/g,"\n").replace(/<span([^>]*)>/g,"").replace(/<\/span>/g,"").replace(/&nbsp;/g," ").replace(/<div([^>]*)>/g,"\n").replace(/<\/div>/g,"").replace(/miniprogramappid/g,"miniprogram-appid").replace(/miniprogrampath/g,"miniprogram-path").replace(/&amp;/g,"&").replace(/&lt;/g,"<").replace(/&gt;/g,">")),this.mediumEditor.origElements.scrollTop=this.mediumEditor.origElements.scrollHeight;var d={currentTarget:this.mediumEditor.origElements};this.mediumEditor.events.updateInput(d.currentTarget,d),this.$emit("changeText",this.textContent,this.textAreaValueHeader)},editorCreated:function(t){this.mediumEditor=t,this.mediumEditor.subscribe("focus",this.editableFocus),this.mediumEditor.subscribe("editableKeydown",this.editableKeydown),this.mediumEditor.subscribe("editablePaste",this.editablePaste),delete self.lastRange,delete self.lastNode},editableFocus:function(t){""!==t.target.innerHTML&&"<br>"!=t.target.innerHTML&&"<p></p>"!=t.target.innerHTML||(t.target.innerHTML="<p><br/></p>")},editableKeydown:function(t){this.wordNum>=this.wordLimit&&8!=t.keyCode&&37!=t.keyCode&&38!=t.keyCode&&39!=t.keyCode&&40!=t.keyCode&&(65!=t.keyCode||!t.metaKey&&!t.ctrlKey)&&t.preventDefault(),86==t.keyCode&&(t.metaKey||t.ctrlKey),13==t.keyCode&&(this.keydownNodeIndex=0,this.getParentP4Label(self.lastRange.startContainer)),this.keydownNode=13==t.keyCode},getParentP4Label:function(t){"P"!=t.nodeName?this.getParentP4Label(t.parentNode):this.getPreviousSiblingIndex(t)},getPreviousSiblingIndex:function(t){t.previousSibling&&(this.keydownNodeIndex++,this.getPreviousSiblingIndex(t.previousSibling))},editablePaste:function(t,e){this.invlideText()},invlideText:function(){var t=this.mediumEditor.origElements,e=this.global.getRangeInfo(t,this.wordLimit),i=e.startNode,a=e.startOffset,n=e.endNode,r=e.endOffset;if("undefined"!==typeof i.nodeValue){var s=document.createRange();s.setStart(i,a),s.setEnd(n,r),s.deleteContents(),this.textAreaValueHeader=self.lastNode.innerHTML.replace(/<pre([^>]*)>/g,"<p>").replace(/<\/pre>/g,"</p>").replace(/<font([^>]*)>/g,"<p>").replace(/<\/font>/g,"</p>").replace(/<div([^>]*)>/g,"<p>").replace(/<\/div>/g,"</p>"),"undefined"==typeof this.urlId?this.textContent=self.lastNode.innerHTML.replace(/(<p><span>)?<br([^>]*)>(<\/span>)?<\/p>/g,"</p>").replace(/<p([^>]*)>/g,"").replace(/<\/p>/g,"\n").replace(/(&nbsp;)?<span contenteditable="false" class="ant-tag ant-tag-orange">客户名称<\/span>(&nbsp;)?/g,"{nickname}").replace(/(&nbsp;)?<span contenteditable="false" class="ant-tag ant-tag-orange">粉丝昵称<\/span>(&nbsp;)?/g,"{nickname}").replace(/(&nbsp;)?<span contenteditable="false" class="ant-tag ant-tag-orange">排行榜<\/span>(&nbsp;)?/g,"{ranking}").replace(/<br([^>]*)>/g,"\n").replace(/<span([^>]*)>/g,"").replace(/<\/span>/g,"").replace(/&nbsp;/g," ").replace(/miniprogramappid/g,"miniprogram-appid").replace(/miniprogrampath/g,"miniprogram-path").replace(/&amp;/g,"&").replace(/&lt;/g,"<").replace(/&gt;/g,">"):this.textContent=self.lastNode.innerHTML.replace(/(<p><span>)?<br([^>]*)>(<\/span>)?<\/p>/g,"</p>").replace(/<br([^>]*)>/g,"\n").replace(/(&nbsp;)?<span contenteditable="false" class="ant-tag ant-tag-orange">客户名称<\/span>(&nbsp;)?/g,"{nickname}").replace(/(&nbsp;)?<span contenteditable="false" class="ant-tag ant-tag-orange">粉丝昵称<\/span>(&nbsp;)?/g,"{nickname}").replace(/(&nbsp;)?<span contenteditable="false" class="ant-tag ant-tag-orange">排行榜<\/span>(&nbsp;)?/g,"{ranking}").replace(/([^<p>]+)<p([^>]*)>/g,"$1\n").replace(/<p([^>]*)>/g,"").replace(/<\/p>/g,"\n").replace(/<span([^>]*)>/g,"").replace(/<\/span>/g,"").replace(/&nbsp;/g," ").replace(/<div([^>]*)>/g,"\n").replace(/<\/div>/g,"").replace(/miniprogramappid/g,"miniprogram-appid").replace(/miniprogrampath/g,"miniprogram-path").replace(/&amp;/g,"&").replace(/&lt;/g,"<").replace(/&gt;/g,">"),this.wordNum=this.wordLimit}this.$emit("changeText",this.textContent,this.textAreaValueHeader)},changeContentInput:function(t){if(""!=t.api.origElements.innerHTML&&"<br>"!=t.api.origElements.innerHTML||(t.api.origElements.innerHTML="<p><br/></p>"),self.lastNode){if(this.isMenu){var e=this.textContent.replace(/{nickname}/g,1==this.type?" 客户名称 ":" 粉丝昵称1 ");this.wordNum=self.lastNode.textContent.length+10*this.getLeng(e),this.wordNum>this.wordLimit&&(this.wordNum=this.wordLimit)}else this.wordNum=self.lastNode.textContent.length;if(this.wordNum<=this.wordLimit?(this.textAreaValueHeader=t.api.origElements.innerHTML.replace(/<pre([^>]*)>/g,"<p>").replace(/<\/pre>/g,"</p>").replace(/<font([^>]*)>/g,"<p>").replace(/<\/font>/g,"</p>").replace(/<div([^>]*)>/g,"<p>").replace(/<\/div>/g,"</p>"),"undefined"==typeof this.urlId?this.textContent=self.lastNode.innerHTML.replace(/(<p><span>)?<br([^>]*)>(<\/span>)?<\/p>/g,"</p>").replace(/<p([^>]*)>/g,"").replace(/<\/p>/g,"\n").replace(/(&nbsp;)?<span contenteditable="false" class="ant-tag ant-tag-orange">客户名称<\/span>(&nbsp;)?/g,"{nickname}").replace(/(&nbsp;)?<span contenteditable="false" class="ant-tag ant-tag-orange">粉丝昵称<\/span>(&nbsp;)?/g,"{nickname}").replace(/(&nbsp;)?<span contenteditable="false" class="ant-tag ant-tag-orange">排行榜<\/span>(&nbsp;)?/g,"{ranking}").replace(/<br([^>]*)>/g,"\n").replace(/<span([^>]*)>/g,"").replace(/<\/span>/g,"").replace(/&nbsp;/g," ").replace(/miniprogramappid/g,"miniprogram-appid").replace(/miniprogrampath/g,"miniprogram-path").replace(/&amp;/g,"&").replace(/&lt;/g,"<").replace(/&gt;/g,">"):this.textContent=self.lastNode.innerHTML.replace(/(<p><span>)?<br([^>]*)>(<\/span>)?<\/p>/g,"</p>").replace(/<br([^>]*)>/g,"\n").replace(/(&nbsp;)?<span contenteditable="false" class="ant-tag ant-tag-orange">客户名称<\/span>(&nbsp;)?/g,"{nickname}").replace(/(&nbsp;)?<span contenteditable="false" class="ant-tag ant-tag-orange">粉丝昵称<\/span>(&nbsp;)?/g,"{nickname}").replace(/(&nbsp;)?<span contenteditable="false" class="ant-tag ant-tag-orange">排行榜<\/span>(&nbsp;)?/g,"{ranking}").replace(/([^<p>]+)<p([^>]*)>/g,"$1\n").replace(/<p([^>]*)>/g,"").replace(/<\/p>/g,"\n").replace(/<span([^>]*)>/g,"").replace(/<\/span>/g,"").replace(/&nbsp;/g," ").replace(/<div([^>]*)>/g,"\n").replace(/<\/div>/g,"").replace(/miniprogramappid/g,"miniprogram-appid").replace(/miniprogrampath/g,"miniprogram-path").replace(/&amp;/g,"&").replace(/&lt;/g,"<").replace(/&gt;/g,">"),this.$emit("changeText",this.textContent,this.textAreaValueHeader)):this.invlideText(),this.keydownNode){var i=self.lastNode.childNodes[this.keydownNodeIndex+1],a=document.createRange();a.setStart(i,0);var n=window.getSelection();n.removeAllRanges(),n.addRange(a),this.keydownNode=!1}}},addTag:function(t){if("undefined"==typeof this.mediumEditor.options.ownerDocument)var e=this.mediumEditor.options.ownerDocument;else e=this.mediumEditor.options.ownerDocument;var i='<span>&nbsp;<span contenteditable="false" class="ant-tag ant-tag-orange">'+t+"</span>&nbsp;</span>";this.wordLimit-this.wordNum>=6&&this.insertHTMLCommand(e,i)}}},p=d,u=(i("6617"),i("2877")),m=Object(u["a"])(p,a,n,!1,null,"93681f50",null);e["a"]=m.exports},"18e2":function(t,e,i){e=t.exports=i("2350")(!1),e.push([t.i,".changeType-text[data-v-1b2a8f7c]{background:#fff2db;border:1px solid #ffdda6;border-radius:2px;padding:7px 27px 6px 10px;font-size:12px;width:100%;margin-top:12px;max-width:673px;line-height:20px;margin-bottom:15px}.content-editable[data-v-1b2a8f7c]{font-size:14px;line-height:21px;padding:15px;border:1px solid #d9d9d9;height:110px;overflow:auto}.content-editable[data-v-1b2a8f7c] p{margin:0;word-break:break-word}",""])},"1fa6":function(t,e,i){e=t.exports=i("2350")(!1),e.push([t.i,".changeType-text[data-v-93681f50]{background:#fff2db;border:1px solid #ffdda6;border-radius:2px;padding:7px 27px 6px 10px;font-size:12px;width:100%;margin-top:12px;max-width:673px;line-height:20px;margin-bottom:15px}.content-editable[data-v-93681f50]{font-size:14px;line-height:21px;padding:15px;border:1px solid #d9d9d9;height:155px;overflow:auto}.content-editable[data-v-93681f50] p{margin:0;word-break:break-word}",""])},"36bd":function(t,e,i){"use strict";var a=i("4bf8"),n=i("77f1"),r=i("9def");t.exports=function(t){var e=a(this),i=r(e.length),s=arguments.length,o=n(s>1?arguments[1]:void 0,i),l=s>2?arguments[2]:void 0,c=void 0===l?i:n(l,i);while(c>o)e[o++]=t;return e}},"3d37":function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"list"},[a("div",{attrs:{id:"components-layout-demo-basic"}},[a("a-spin",{attrs:{tip:"Loading...",size:"large",spinning:t.isLoading}},[a("a-layout",[a("a-layout-header",["undefined"==typeof t.urlId?[t._v("新建")]:t._e(),"undefined"!=typeof t.urlId?[t._v("修改")]:t._e(),t._v("\n\t\t\t\t\t红包渠道活码\n\t\t\t\t\t"),a("a-button",{staticStyle:{float:"right","margin-top":"9px"},attrs:{type:"primary",icon:"rollback"},on:{click:t.goBack}},[t._v("返回列表\n\t\t\t\t\t")])],2),a("a-layout",{staticClass:"fans-content"},[a("a-layout-content",[a("a-steps",{staticStyle:{padding:"20px 30px",cursor:"pointer","background-color":"#FFFFFF"},attrs:{current:t.current}},t._l(t.steps,(function(e,i){return a("a-step",{key:e.title,attrs:{title:e.title},on:{click:function(e){return t.changeCurrent(i)}}})})),1),a("div",{staticClass:"content steps-content"},[a("div",{staticClass:"content-bd"},[0==t.current?a("a-form",[t.$store.state.corpArr.length>1?a("a-form-item",{attrs:{label:"选择企业微信","label-col":{span:3},"wrapper-col":{span:21}}},[[a("div",{staticStyle:{display:"inline-block",cursor:"pointer"},on:{click:t.add}},[a("img",{staticStyle:{width:"24px","border-radius":"4px"},attrs:{src:i("de05"),alt:""}}),a("span",{staticStyle:{"margin-left":"5px"}},[t._v(t._s(t.corpName))]),"undefined"==typeof t.urlId?a("a-icon",{staticStyle:{width:"50px",height:"40px","text-align":"left","line-height":"40px","margin-left":"20px"},attrs:{type:"caret-down"}}):t._e()],1),a("span",{staticStyle:{color:"#F56C6C"}},[t._v("（一旦创建，不可修改）")])]],2):t._e(),a("a-form-item",{staticStyle:{"padding-top":"15px"},attrs:{label:"活码名称","label-col":{span:3},"wrapper-col":{span:21}}},[a("a-input",{staticStyle:{width:"60%"},attrs:{placeholder:"如：扫码送试用装01，限30字符",maxLength:30,disabled:"undefined"!=typeof t.urlId},model:{value:t.rule.name,callback:function(e){t.$set(t.rule,"name",e)},expression:"rule.name"}}),a("span",{staticStyle:{display:"inline-block",width:"50px","margin-left":"10px",color:"#F56C6C"}},[t._v(t._s(null===t.rule.name?0:t.rule.name.length)+" / 30")]),a("span",{staticStyle:{color:"#F56C6C","margin-left":"20px"}},[t._v("（一旦创建，不可修改）")])],1),a("a-form-item",{staticStyle:{"padding-top":"15px"},attrs:{label:"结束设置","label-col":{span:3},"wrapper-col":{span:21}}},[a("a-radio-group",{attrs:{disabled:"undefined"!=typeof t.urlId&&1!=t.redpacket_status},model:{value:t.rule.time_type,callback:function(e){t.$set(t.rule,"time_type",e)},expression:"rule.time_type"}},[a("a-radio",{attrs:{value:1}},[t._v("永久有效")]),a("a-radio",{staticStyle:{"margin-left":"25px"},attrs:{value:2}},[t._v("\n\t\t\t\t\t\t\t\t\t\t\t\t固定时间区间\n\t\t\t\t\t\t\t\t\t\t\t\t"),2==t.rule.time_type?a("div",{staticStyle:{display:"inline-block","margin-left":"10px"}},[a("a-date-picker",{attrs:{disabled:"undefined"!=typeof this.urlId&&1!=t.redpacket_status,disabledDate:t.disabledDate,showTime:{hideDisabledOptions:!0,defaultValue:t.moment("00:00:00","HH:mm:ss"),format:"HH:mm:ss"},format:"YYYY-MM-DD HH:mm:ss"},on:{change:t.changeRedStartTime},model:{value:t.startDate,callback:function(e){t.startDate=e},expression:"startDate"}}),t._v("\n\t\t\t\t\t\t\t\t\t\t\t\t\t~\n\t\t\t\t\t\t\t\t\t\t\t\t\t"),a("a-date-picker",{attrs:{disabledDate:t.disabledDate,showTime:{hideDisabledOptions:!0,defaultValue:t.moment("23:59:59","HH:mm:ss"),format:"HH:mm:ss"},format:"YYYY-MM-DD HH:mm:ss"},on:{change:t.changeRedEndTime},model:{value:t.endDate,callback:function(e){t.endDate=e},expression:"endDate"}}),a("a-tooltip",{attrs:{placement:"top"}},[a("template",{slot:"title"},[a("span",[t._v("在活动时间内，微信支付商户平台账户余额充足情况下，扫码添加企业成员发红包。")])]),a("a-icon",{staticStyle:{"margin-left":"15px"},attrs:{type:"question-circle"}})],2),a("span",{staticStyle:{"margin-left":"5px",color:"#F56C6C"}},[t._v("（一旦发布，只可更改结束时间）")])],1):t._e()]),1==t.rule.time_type?a("span",{staticStyle:{"margin-left":"5px",color:"#F56C6C"}},[t._v("（一旦发布，不可更改）")]):t._e()],1)],1),2==t.rule.time_type?a("a-form-item",{staticStyle:{"padding-top":"15px"},attrs:{label:"活码有效期","label-col":{span:3},"wrapper-col":{span:21}}},[t._v("\n\t\t\t\t\t\t\t\t\t\t自活动结束后\n\t\t\t\t\t\t\t\t\t\t"),a("a-input-number",{staticStyle:{width:"120px",margin:"0 5px"},attrs:{min:1,max:999999,disabled:"undefined"!=typeof t.urlId&&1!=t.redpacket_status},model:{value:t.rule.reserve_day,callback:function(e){t.$set(t.rule,"reserve_day",e)},expression:"rule.reserve_day"}}),t._v("\n\t\t\t\t\t\t\t\t\t\t天内，客户扫码不影响加员工，但红包不再发放。\n\t\t\t\t\t\t\t\t\t\t"),a("a-tooltip",{attrs:{placement:"top"}},[a("template",{slot:"title"},[a("span",[t._v("如设置3天，那么，当活动在1号结束，2号、3号及4号依然可以扫码加人，但不发红包，5号凌晨则扫码失效，即提示“扫码不存在”。若手动提前结束活动，则以结束当日后往后延3天，如原本是在5号结束，但3号时提前结束，那么，在7号凌晨扫码失效。")])]),a("a-icon",{staticStyle:{"margin-left":"15px"},attrs:{type:"question-circle"}})],2),a("span",{staticStyle:{color:"#F56C6C","margin-left":"20px"}},[t._v("（一旦发布，不可修改）")])],1):t._e(),a("a-form-item",{staticStyle:{"padding-top":"15px"},attrs:{label:"红包规则","label-col":{span:3},"wrapper-col":{span:21}}},[a("a-radio-group",{attrs:{disabled:"undefined"!=typeof t.urlId&&1!=t.redpacket_status},model:{value:t.rule.redrule_type,callback:function(e){t.$set(t.rule,"redrule_type",e)},expression:"rule.redrule_type"}},[a("a-radio",{attrs:{value:1}},[t._v("选择已有规则\n\t\t\t\t\t\t\t\t\t\t\t\t"),1==t.rule.redrule_type?a("chooseRule",{staticStyle:{display:"inline-block",width:"200px"},attrs:{disabled:"undefined"!=typeof t.urlId&&1!=t.redpacket_status,rule_id:t.rule.rule_id},on:{changeSelect:t.changeSelect}}):t._e()],1),a("a-radio",{staticStyle:{"margin-left":"25px"},attrs:{value:2}},[t._v("新建红包规则")])],1),1==t.rule.redrule_type&&t.rule.rule_id||2==t.rule.redrule_type?a("a-form",{staticStyle:{padding:"20px","background-color":"#FFFFFF"}},[a("a-form-item",{staticClass:"current0",attrs:{"label-col":{span:3},"wrapper-col":{span:19}}},[a("span",{attrs:{slot:"label"},slot:"label"},[a("span",{staticStyle:{color:"#FF562D"}},[t._v("*")]),t._v("规则名称\n\t\t\t\t\t\t\t\t\t\t\t\t")]),2==t.rule.redrule_type?a("a-input",{staticStyle:{width:"340px"},attrs:{placeholder:"请输入红包规则",maxLength:30},model:{value:t.rule2.rule_name,callback:function(e){t.$set(t.rule2,"rule_name",e)},expression:"rule2.rule_name"}},[2==t.rule.redrule_type?a("span",{attrs:{slot:"suffix"},slot:"suffix"},[a("span",[t._v(t._s(t.rule2.rule_name.length))]),t._v("/30\n\t\t\t\t\t\t\t                        ")]):t._e()]):t._e(),1==t.rule.redrule_type?a("span",[t._v(t._s(t.rule1.rule_name))]):t._e()],1),a("a-form-item",{staticClass:"current0",attrs:{"label-col":{span:3},"wrapper-col":{span:19}}},[a("span",{attrs:{slot:"label"},slot:"label"},[a("span",{staticStyle:{color:"#FF562D"}},[t._v("*")]),t._v("单个红包金额\n\t\t\t\t\t\t\t\t\t\t\t\t")]),2==t.rule.redrule_type?a("a-radio-group",{attrs:{name:"radioGroup",value:t.rule2.rule_type},on:{change:t.changeType2}},[a("a-radio",{staticStyle:{display:"inline-block",height:"35px","line-height":"35px"},attrs:{value:1}},[t._v("\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t定额\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t"),1==t.rule2.rule_type?a("span",[a("a-input-number",{staticStyle:{width:"140px",margin:"0 5px"},attrs:{step:0,precision:2,min:.3,max:200},model:{value:t.rule2.rule_fixed_amount,callback:function(e){t.$set(t.rule2,"rule_fixed_amount",e)},expression:"rule2.rule_fixed_amount"}}),t._v("元\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t")],1):t._e()]),a("a-radio",{staticStyle:{display:"inline-block",height:"35px","line-height":"35px","margin-left":"25px"},attrs:{value:2}},[t._v("\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t按随机金额\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t"),2==t.rule2.rule_type?a("span",[a("a-input-number",{staticStyle:{width:"100px",margin:"0 5px"},attrs:{step:0,precision:2,min:.3,max:200},model:{value:t.rule2.rule_min_random_amount,callback:function(e){t.$set(t.rule2,"rule_min_random_amount",e)},expression:"rule2.rule_min_random_amount"}}),t._v("元 ——\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t"),a("a-input-number",{staticStyle:{width:"100px","margin-right":"5px"},attrs:{step:0,precision:2,min:.3,max:200},model:{value:t.rule2.rule_max_random_amount,callback:function(e){t.$set(t.rule2,"rule_max_random_amount",e)},expression:"rule2.rule_max_random_amount"}}),t._v("元\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t")],1):t._e()])],1):t._e(),1==t.rule.redrule_type?a("a-radio-group",{attrs:{name:"radioGroup",disabled:1==t.rule.redrule_type||1!=t.redpacket_status,value:t.rule1.rule_type},on:{change:t.changeType1}},[a("a-radio",{staticStyle:{display:"inline-block",height:"35px","line-height":"35px"},attrs:{value:1}},[t._v("\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t定额\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t"),1==t.rule1.rule_type?a("span",[t._v(t._s(t.rule1.rule_fixed_amount)+"元")]):t._e()]),a("a-radio",{staticStyle:{display:"inline-block",height:"35px","line-height":"35px","margin-left":"25px"},attrs:{value:2}},[t._v("\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t按随机金额\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t"),2==t.rule1.rule_type?a("span",[t._v(t._s(t.rule1.rule_min_random_amount)+"-"+t._s(t.rule1.rule_max_random_amount)+"元")]):t._e()])],1):t._e(),a("div",{staticStyle:{color:"#F56C6C"}},[t._v("（一旦发布，不可修改。精确到小数点后两位，可输入0.30~200.00）\n\t\t\t\t\t\t\t\t\t\t\t\t")])],1),a("a-form-item",{staticClass:"current0",attrs:{label:"红包封面","label-col":{span:3},"wrapper-col":{span:19}}},[2==t.rule.redrule_type?a("a-upload",{attrs:{action:"https://www.mocky.io/v2/5cc8019d300000980a055e76",showUploadList:!1,beforeUpload:t.beforeUpload}},[a("div",{directives:[{name:"show",rawName:"v-show",value:!t.rule2.rule_pic_url,expression:"!rule2.rule_pic_url"}]},[a("a-button",[a("a-icon",{attrs:{type:t.loading?"loading":"upload"}}),t._v("\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t上传封面\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t")],1)],1),a("img",{directives:[{name:"show",rawName:"v-show",value:t.rule2.rule_pic_url,expression:"rule2.rule_pic_url"}],staticStyle:{"max-width":"128px","max-height":"128px"},attrs:{src:t.commonUrl+t.rule2.rule_pic_url}}),a("div",{directives:[{name:"show",rawName:"v-show",value:t.rule2.rule_pic_url,expression:"rule2.rule_pic_url"}],staticStyle:{display:"inline-block","vertical-align":"bottom","margin-left":"5px"}},[a("a-button",[a("a-icon",{attrs:{type:t.loading?"loading":"upload"}}),t._v("\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t替换\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t")],1)],1)]):t._e(),a("div",{staticStyle:{"margin-top":"10px"}},[t._v("\n\t\t\t\t\t\t\t\t\t\t\t\t\t图片像素建议为200px*200px，格式为jpg、jpeg、png，大小不超过2M\n\t\t\t\t\t\t\t\t\t\t\t\t")]),t.rule1.rule_pic_url&&1==t.rule.redrule_type?a("img",{staticStyle:{"max-width":"128px","max-height":"128px"},attrs:{src:t.commonUrl+t.rule1.rule_pic_url}}):t._e()],1),a("a-form-item",{staticClass:"current0",attrs:{"label-col":{span:3},"wrapper-col":{span:19}}},[a("span",{attrs:{slot:"label"},slot:"label"},[a("span",{staticStyle:{color:"#FF562D"}},[t._v("*")]),t._v("标题\n\t\t\t\t\t\t\t\t\t\t\t\t")]),2==t.rule.redrule_type?a("a-input",{staticStyle:{width:"340px"},attrs:{placeholder:"请填写标题",maxLength:32},model:{value:t.rule2.rule_title,callback:function(e){t.$set(t.rule2,"rule_title",e)},expression:"rule2.rule_title"}},[a("span",{attrs:{slot:"suffix"},slot:"suffix"},[a("span",[t._v(t._s(t.rule2.rule_title.length))]),t._v("/32\n\t\t\t\t\t\t\t\t\t\t\t\t\t")])]):t._e(),1==t.rule.redrule_type?a("span",[t._v(t._s(t.rule1.rule_title))]):t._e()],1),a("a-form-item",{staticClass:"current0",attrs:{label:"添加描述","label-col":{span:3},"wrapper-col":{span:19}}},[a("div",[2==t.rule.redrule_type?a("a-textarea",{staticStyle:{"max-width":"500px"},attrs:{placeholder:"请填写描述",maxLength:128,rows:4},model:{value:t.rule2.rule_des,callback:function(e){t.$set(t.rule2,"rule_des",e)},expression:"rule2.rule_des"}}):t._e()],1),2==t.rule.redrule_type&&1==t.redpacket_status?a("div",{staticStyle:{"max-width":"500px","text-align":"right"}},[a("span",[t._v(t._s(t.rule2.rule_des.length))]),t._v("/128\n\t\t\t\t\t\t\t\t\t\t\t\t")]):t._e(),1==t.rule.redrule_type||1!=t.redpacket_status?a("span",[t._v(t._s(t.rule1.rule_des))]):t._e()]),a("a-form-item",{staticClass:"current0",attrs:{label:"感谢语","label-col":{span:3},"wrapper-col":{span:19}}},[2==t.rule.redrule_type?a("a-input",{staticStyle:{width:"340px"},attrs:{placeholder:"恭喜发财，大吉大利",maxLength:32},model:{value:t.rule2.rule_thanking,callback:function(e){t.$set(t.rule2,"rule_thanking",e)},expression:"rule2.rule_thanking"}},[a("span",{attrs:{slot:"suffix"},slot:"suffix"},[a("span",[t._v(t._s(t.rule2.rule_thanking.length))]),t._v("/32\n\t\t\t\t\t\t\t\t\t\t\t\t\t")])]):t._e(),1==t.rule.redrule_type?a("span",[t._v(t._s(t.rule1.rule_thanking||"恭喜发财，大吉大利"))]):t._e()],1)],1):t._e()],1),2==t.rule.redrule_type?a("a-form-item",{attrs:{label:"是否存入红包规则","label-col":{span:3},"wrapper-col":{span:21}}},[a("a-switch",{attrs:{disabled:1!=t.redpacket_status,checked:1==t.rule.rule_save},on:{click:t.changeRuleSave}})],1):t._e(),a("a-form-item",{attrs:{label:"投放金额","label-col":{span:3},"wrapper-col":{span:21}}},[a("a-input-number",{staticStyle:{width:"140px",margin:"0 5px"},attrs:{step:0,precision:2,min:.3,max:1e5},model:{value:t.rule.redpacket_amount,callback:function(e){t.$set(t.rule,"redpacket_amount",e)},expression:"rule.redpacket_amount"}}),t._v("\n\t\t\t\t\t\t\t\t\t\t元（精确到小数点后两位，可输入0.30~100000.00。发送红包达到这个数额之后，对下一个新客户不再推送。"),a("span",{staticStyle:{color:"#FF562D"}},[t._v("只可增加不可减少")]),t._v("）\n\t\t\t\t\t\t\t\t\t\t"),a("p",[t._v("最多领取人数可达"),a("span",{staticStyle:{color:"#FF562D"}},[t._v("\n\t\t\t\t\t\t\t\t\t\t\t"+t._s(1==t.rule.redrule_type?1==t.rule1.rule_type?t.rule1.rule_fixed_amount?Math.floor(t.rule.redpacket_amount/t.rule1.rule_fixed_amount):"--":t.rule1.rule_min_random_amount?Math.floor(t.rule.redpacket_amount/t.rule1.rule_min_random_amount):"--":1==t.rule2.rule_type?t.rule2.rule_fixed_amount?Math.floor(t.rule.redpacket_amount/t.rule2.rule_fixed_amount):"--":t.rule2.rule_min_random_amount?Math.floor(t.rule.redpacket_amount/t.rule2.rule_min_random_amount):"--"))]),t._v("人")])],1)],1):t._e(),1==t.current?a("a-form",[a("div",{staticClass:"content-msg"},[a("p",{staticStyle:{"margin-bottom":"0px","line-height":"20px",color:"#F56C6C"}},[t._v("\n\t\t\t\t\t\t\t\t\t\t\t扫码添加成员规则：在周期和特殊时期共存情况下，扫码优先添加特殊时期的成员\n\t\t\t\t\t\t\t\t\t\t")])]),a("div",{staticStyle:{height:"50px","margin-top":"10px"}},[a("a-button",{staticStyle:{float:"right","margin-right":"20px"},attrs:{type:"primary"},on:{click:t.showChannelCode}},[t._v("导入已有渠道活码")])],1),a("a-form-item",{attrs:{label:"类型","label-col":{span:3},"wrapper-col":{span:21}}},[a("a-radio-group",{attrs:{name:"typeGroup",disabled:"undefined"!=typeof t.urlId},on:{change:t.changeInfoType},model:{value:t.info.type,callback:function(e){t.$set(t.info,"type",e)},expression:"info.type"}},[a("a-radio",{attrs:{value:1}},[t._v("单人")]),a("a-radio",{attrs:{value:2}},[t._v("多人")])],1),a("span",{staticStyle:{color:"#F56C6C"}},[t._v("（一旦创建，不可修改）")])],1),a("a-form-item",{attrs:{label:"企业成员","label-col":{span:3},"wrapper-col":{span:21}}},[a("div",[a("a-button",{directives:[{name:"show",rawName:"v-show",value:0==t.info.specialWeekList[0].mon.length||0==t.info.specialWeekList[0].tues.length||0==t.info.specialWeekList[0].wednes.length||0==t.info.specialWeekList[0].thurs.length||0==t.info.specialWeekList[0].fri.length||0==t.info.specialWeekList[0].satur.length||0==t.info.specialWeekList[0].sun.length,expression:"info.specialWeekList[0].mon.length == 0 || info.specialWeekList[0].tues.length == 0 || info.specialWeekList[0].wednes.length == 0 || info.specialWeekList[0].thurs.length == 0 || info.specialWeekList[0].fri.length == 0 || info.specialWeekList[0].satur.length == 0 || info.specialWeekList[0].sun.length == 0 "}],attrs:{icon:"plus"},on:{click:t.addSpecialTime}},[t._v("\n\t\t\t\t\t\t\t\t\t\t\t\t添加\n\t\t\t\t\t\t\t\t\t\t\t")])],1)]),a("a-form-item",[a("a-table",{staticStyle:{"max-width":"92%","margin-left":"6%"},attrs:{columns:t.specialWeekColumns,dataSource:t.info.specialWeekList,pagination:!1,rowClassName:t.rowClassName},scopedSlots:t._u([{key:"mon",fn:function(e,i,n){return a("span",{},[t._l(i.mon,(function(e){return 2==t.info.type?a("div",[a("div",[t._v("\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t"+t._s(e.start_time)+"~"+t._s(e.end_time)+"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t"),a("a-tooltip",{attrs:{placement:"top"}},[a("template",{slot:"title"},[a("div",t._l(e.userList,(function(e){return a("span",["custom"==e.scopedSlots.title?[t._v(" "+t._s(e.title)+" ")]:t._e()],2)})),0)]),a("div",{staticStyle:{width:"80px",overflow:"hidden","text-overflow":"ellipsis","white-space":"nowrap"}},t._l(e.userList,(function(e){return a("span",["custom"==e.scopedSlots.title?[t._v(" "+t._s(e.title)+" ")]:t._e()],2)})),0)],2),a("a-tooltip",{attrs:{placement:"top"}},[a("template",{slot:"title"},[t._l(e.userList,(function(e,i){return["custom"!=e.scopedSlots.title?a("a-tag",{staticStyle:{"margin-bottom":"5px"},attrs:{color:"orange"}},[t._v(t._s(e.title))]):t._e()]}))],2),a("div",[t._l(e.userList,(function(i,n){return["custom"!=i.scopedSlots.title&&t.getThreePartyIndex(e.userList)>=n?a("a-tag",{attrs:{color:"orange"}},[t._v(t._s(i.title))]):t._e()]})),t.getPartyNum(e.userList)>3?[t._v("等"+t._s(t.getPartyNum(e.userList))+"个部门")]:t._e()],2)],2)],1)]):t._e()})),t._l(i.mon,(function(e){return 1==t.info.type?a("div",[a("div",[t._v("\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t"+t._s(e.start_time)+"~"+t._s(e.end_time)+"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t"),a("div",{staticStyle:{width:"80px",overflow:"hidden","text-overflow":"ellipsis","white-space":"nowrap"}},[a("a-select",{staticStyle:{width:"100%"},attrs:{showSearch:"",optionFilterProp:"children",disabled:!0,showArrow:!1,mode:1==t.info.type?"default":"multiple",placeholder:"请选择企业成员"},model:{value:e.userList,callback:function(i){t.$set(e,"userList",i)},expression:"item.userList"}},t._l(t.user,(function(e,i){return a("a-select-option",{key:e.id},[t._v("\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t"+t._s(e.name)+"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t")])})),1)],1)])]):t._e()})),0==i.mon.length?a("div",[t._v("--")]):t._e()],2)}},{key:"tues",fn:function(e,i,n){return a("span",{},[t._l(i.tues,(function(e){return 2==t.info.type?a("div",[a("div",[t._v("\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t"+t._s(e.start_time)+"~"+t._s(e.end_time)+"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t"),a("a-tooltip",{attrs:{placement:"top"}},[a("template",{slot:"title"},[a("div",t._l(e.userList,(function(e){return a("span",["custom"==e.scopedSlots.title?[t._v(" "+t._s(e.title)+" ")]:t._e()],2)})),0)]),a("div",{staticStyle:{width:"80px",overflow:"hidden","text-overflow":"ellipsis","white-space":"nowrap"}},t._l(e.userList,(function(e){return a("span",["custom"==e.scopedSlots.title?[t._v(" "+t._s(e.title)+" ")]:t._e()],2)})),0)],2),a("a-tooltip",{attrs:{placement:"top"}},[a("template",{slot:"title"},[t._l(e.userList,(function(e,i){return["custom"!=e.scopedSlots.title?a("a-tag",{staticStyle:{"margin-bottom":"5px"},attrs:{color:"orange"}},[t._v(t._s(e.title))]):t._e()]}))],2),a("div",[t._l(e.userList,(function(i,n){return["custom"!=i.scopedSlots.title&&t.getThreePartyIndex(e.userList)>=n?a("a-tag",{attrs:{color:"orange"}},[t._v(t._s(i.title))]):t._e()]})),t.getPartyNum(e.userList)>3?[t._v("等"+t._s(t.getPartyNum(e.userList))+"个部门")]:t._e()],2)],2)],1)]):t._e()})),t._l(i.tues,(function(e){return 1==t.info.type?a("div",[a("div",[t._v("\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t"+t._s(e.start_time)+"~"+t._s(e.end_time)+"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t"),a("div",{staticStyle:{width:"80px",overflow:"hidden","text-overflow":"ellipsis","white-space":"nowrap"}},[a("a-select",{staticStyle:{width:"100%"},attrs:{showSearch:"",optionFilterProp:"children",disabled:!0,showArrow:!1,mode:1==t.info.type?"default":"multiple",placeholder:"请选择企业成员"},model:{value:e.userList,callback:function(i){t.$set(e,"userList",i)},expression:"item.userList"}},t._l(t.user,(function(e,i){return a("a-select-option",{key:e.id},[t._v("\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t"+t._s(e.name)+"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t")])})),1)],1)])]):t._e()})),0==i.tues.length?a("div",[t._v("--")]):t._e()],2)}},{key:"wednes",fn:function(e,i,n){return a("span",{},[t._l(i.wednes,(function(e){return 2==t.info.type?a("div",[a("div",[t._v("\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t"+t._s(e.start_time)+"~"+t._s(e.end_time)+"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t"),a("a-tooltip",{attrs:{placement:"top"}},[a("template",{slot:"title"},[a("div",t._l(e.userList,(function(e){return a("span",["custom"==e.scopedSlots.title?[t._v(" "+t._s(e.title)+" ")]:t._e()],2)})),0)]),a("div",{staticStyle:{width:"80px",overflow:"hidden","text-overflow":"ellipsis","white-space":"nowrap"}},t._l(e.userList,(function(e){return a("span",["custom"==e.scopedSlots.title?[t._v(" "+t._s(e.title)+" ")]:t._e()],2)})),0)],2),a("a-tooltip",{attrs:{placement:"top"}},[a("template",{slot:"title"},[t._l(e.userList,(function(e,i){return["custom"!=e.scopedSlots.title?a("a-tag",{staticStyle:{"margin-bottom":"5px"},attrs:{color:"orange"}},[t._v(t._s(e.title))]):t._e()]}))],2),a("div",[t._l(e.userList,(function(i,n){return["custom"!=i.scopedSlots.title&&t.getThreePartyIndex(e.userList)>=n?a("a-tag",{attrs:{color:"orange"}},[t._v(t._s(i.title))]):t._e()]})),t.getPartyNum(e.userList)>3?[t._v("等"+t._s(t.getPartyNum(e.userList))+"个部门")]:t._e()],2)],2)],1)]):t._e()})),t._l(i.wednes,(function(e){return 1==t.info.type?a("div",[a("div",[t._v("\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t"+t._s(e.start_time)+"~"+t._s(e.end_time)+"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t"),a("div",{staticStyle:{width:"80px",overflow:"hidden","text-overflow":"ellipsis","white-space":"nowrap"}},[a("a-select",{staticStyle:{width:"100%"},attrs:{showSearch:"",optionFilterProp:"children",disabled:!0,showArrow:!1,mode:1==t.info.type?"default":"multiple",placeholder:"请选择企业成员"},model:{value:e.userList,callback:function(i){t.$set(e,"userList",i)},expression:"item.userList"}},t._l(t.user,(function(e,i){return a("a-select-option",{key:e.id},[t._v("\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t"+t._s(e.name)+"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t")])})),1)],1)])]):t._e()})),0==i.wednes.length?a("div",[t._v("--")]):t._e()],2)}},{key:"thurs",fn:function(e,i,n){return a("span",{},[t._l(i.thurs,(function(e){return 2==t.info.type?a("div",[a("div",[t._v("\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t"+t._s(e.start_time)+"~"+t._s(e.end_time)+"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t"),a("a-tooltip",{attrs:{placement:"top"}},[a("template",{slot:"title"},[a("div",t._l(e.userList,(function(e){return a("span",["custom"==e.scopedSlots.title?[t._v(" "+t._s(e.title)+" ")]:t._e()],2)})),0)]),a("div",{staticStyle:{width:"80px",overflow:"hidden","text-overflow":"ellipsis","white-space":"nowrap"}},t._l(e.userList,(function(e){return a("span",["custom"==e.scopedSlots.title?[t._v(" "+t._s(e.title)+" ")]:t._e()],2)})),0)],2),a("a-tooltip",{attrs:{placement:"top"}},[a("template",{slot:"title"},[t._l(e.userList,(function(e,i){return["custom"!=e.scopedSlots.title?a("a-tag",{staticStyle:{"margin-bottom":"5px"},attrs:{color:"orange"}},[t._v(t._s(e.title))]):t._e()]}))],2),a("div",[t._l(e.userList,(function(i,n){return["custom"!=i.scopedSlots.title&&t.getThreePartyIndex(e.userList)>=n?a("a-tag",{attrs:{color:"orange"}},[t._v(t._s(i.title))]):t._e()]})),t.getPartyNum(e.userList)>3?[t._v("等"+t._s(t.getPartyNum(e.userList))+"个部门")]:t._e()],2)],2)],1)]):t._e()})),t._l(i.thurs,(function(e){return 1==t.info.type?a("div",[a("div",[t._v("\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t"+t._s(e.start_time)+"~"+t._s(e.end_time)+"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t"),a("div",{staticStyle:{width:"80px",overflow:"hidden","text-overflow":"ellipsis","white-space":"nowrap"}},[a("a-select",{staticStyle:{width:"100%"},attrs:{showSearch:"",optionFilterProp:"children",disabled:!0,showArrow:!1,mode:1==t.info.type?"default":"multiple",placeholder:"请选择企业成员"},model:{value:e.userList,callback:function(i){t.$set(e,"userList",i)},expression:"item.userList"}},t._l(t.user,(function(e,i){return a("a-select-option",{key:e.id},[t._v("\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t"+t._s(e.name)+"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t")])})),1)],1)])]):t._e()})),0==i.thurs.length?a("div",[t._v("--")]):t._e()],2)}},{key:"fri",fn:function(e,i,n){return a("span",{},[t._l(i.fri,(function(e){return 2==t.info.type?a("div",[a("div",[t._v("\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t"+t._s(e.start_time)+"~"+t._s(e.end_time)+"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t"),a("a-tooltip",{attrs:{placement:"top"}},[a("template",{slot:"title"},[a("div",t._l(e.userList,(function(e){return a("span",["custom"==e.scopedSlots.title?[t._v(" "+t._s(e.title)+" ")]:t._e()],2)})),0)]),a("div",{staticStyle:{width:"80px",overflow:"hidden","text-overflow":"ellipsis","white-space":"nowrap"}},t._l(e.userList,(function(e){return a("span",["custom"==e.scopedSlots.title?[t._v(" "+t._s(e.title)+" ")]:t._e()],2)})),0)],2),a("a-tooltip",{attrs:{placement:"top"}},[a("template",{slot:"title"},[t._l(e.userList,(function(e,i){return["custom"!=e.scopedSlots.title?a("a-tag",{staticStyle:{"margin-bottom":"5px"},attrs:{color:"orange"}},[t._v(t._s(e.title))]):t._e()]}))],2),a("div",[t._l(e.userList,(function(i,n){return["custom"!=i.scopedSlots.title&&t.getThreePartyIndex(e.userList)>=n?a("a-tag",{attrs:{color:"orange"}},[t._v(t._s(i.title))]):t._e()]})),t.getPartyNum(e.userList)>3?[t._v("等"+t._s(t.getPartyNum(e.userList))+"个部门")]:t._e()],2)],2)],1)]):t._e()})),t._l(i.fri,(function(e){return 1==t.info.type?a("div",[a("div",[t._v("\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t"+t._s(e.start_time)+"~"+t._s(e.end_time)+"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t"),a("div",{staticStyle:{width:"80px",overflow:"hidden","text-overflow":"ellipsis","white-space":"nowrap"}},[a("a-select",{staticStyle:{width:"100%"},attrs:{showSearch:"",optionFilterProp:"children",disabled:!0,showArrow:!1,mode:1==t.info.type?"default":"multiple",placeholder:"请选择企业成员"},model:{value:e.userList,callback:function(i){t.$set(e,"userList",i)},expression:"item.userList"}},t._l(t.user,(function(e,i){return a("a-select-option",{key:e.id},[t._v("\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t"+t._s(e.name)+"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t")])})),1)],1)])]):t._e()})),0==i.fri.length?a("div",[t._v("--")]):t._e()],2)}},{key:"satur",fn:function(e,i,n){return a("span",{},[t._l(i.satur,(function(e){return 2==t.info.type?a("div",[a("div",[t._v("\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t"+t._s(e.start_time)+"~"+t._s(e.end_time)+"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t"),a("a-tooltip",{attrs:{placement:"top"}},[a("template",{slot:"title"},[a("div",t._l(e.userList,(function(e){return a("span",["custom"==e.scopedSlots.title?[t._v(" "+t._s(e.title)+" ")]:t._e()],2)})),0)]),a("div",{staticStyle:{width:"80px",overflow:"hidden","text-overflow":"ellipsis","white-space":"nowrap"}},t._l(e.userList,(function(e){return a("span",["custom"==e.scopedSlots.title?[t._v(" "+t._s(e.title)+" ")]:t._e()],2)})),0)],2),a("a-tooltip",{attrs:{placement:"top"}},[a("template",{slot:"title"},[t._l(e.userList,(function(e,i){return["custom"!=e.scopedSlots.title?a("a-tag",{staticStyle:{"margin-bottom":"5px"},attrs:{color:"orange"}},[t._v(t._s(e.title))]):t._e()]}))],2),a("div",[t._l(e.userList,(function(i,n){return["custom"!=i.scopedSlots.title&&t.getThreePartyIndex(e.userList)>=n?a("a-tag",{attrs:{color:"orange"}},[t._v(t._s(i.title))]):t._e()]})),t.getPartyNum(e.userList)>3?[t._v("等"+t._s(t.getPartyNum(e.userList))+"个部门")]:t._e()],2)],2)],1)]):t._e()})),t._l(i.satur,(function(e){return 1==t.info.type?a("div",[a("div",[t._v("\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t"+t._s(e.start_time)+"~"+t._s(e.end_time)+"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t"),a("div",{staticStyle:{width:"80px",overflow:"hidden","text-overflow":"ellipsis","white-space":"nowrap"}},[a("a-select",{staticStyle:{width:"100%"},attrs:{showSearch:"",optionFilterProp:"children",disabled:!0,showArrow:!1,mode:1==t.info.type?"default":"multiple",placeholder:"请选择企业成员"},model:{value:e.userList,callback:function(i){t.$set(e,"userList",i)},expression:"item.userList"}},t._l(t.user,(function(e,i){return a("a-select-option",{key:e.id},[t._v("\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t"+t._s(e.name)+"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t")])})),1)],1)])]):t._e()})),0==i.satur.length?a("div",[t._v("--")]):t._e()],2)}},{key:"sun",fn:function(e,i,n){return a("span",{},[t._l(i.sun,(function(e){return 2==t.info.type?a("div",[a("div",[t._v("\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t"+t._s(e.start_time)+"~"+t._s(e.end_time)+"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t"),a("a-tooltip",{attrs:{placement:"top"}},[a("template",{slot:"title"},[a("div",t._l(e.userList,(function(e){return a("span",["custom"==e.scopedSlots.title?[t._v(" "+t._s(e.title)+" ")]:t._e()],2)})),0)]),a("div",{staticStyle:{width:"80px",overflow:"hidden","text-overflow":"ellipsis","white-space":"nowrap"}},t._l(e.userList,(function(e){return a("span",["custom"==e.scopedSlots.title?[t._v(" "+t._s(e.title)+" ")]:t._e()],2)})),0)],2),a("a-tooltip",{attrs:{placement:"top"}},[a("template",{slot:"title"},[t._l(e.userList,(function(e,i){return["custom"!=e.scopedSlots.title?a("a-tag",{staticStyle:{"margin-bottom":"5px"},attrs:{color:"orange"}},[t._v(t._s(e.title))]):t._e()]}))],2),a("div",[t._l(e.userList,(function(i,n){return["custom"!=i.scopedSlots.title&&t.getThreePartyIndex(e.userList)>=n?a("a-tag",{attrs:{color:"orange"}},[t._v(t._s(i.title))]):t._e()]})),t.getPartyNum(e.userList)>3?[t._v("等"+t._s(t.getPartyNum(e.userList))+"个部门")]:t._e()],2)],2)],1)]):t._e()})),t._l(i.sun,(function(e){return 1==t.info.type?a("div",[a("div",[t._v("\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t"+t._s(e.start_time)+"~"+t._s(e.end_time)+"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t"),a("div",{staticStyle:{width:"80px",overflow:"hidden","text-overflow":"ellipsis","white-space":"nowrap"}},[a("a-select",{staticStyle:{width:"100%"},attrs:{showSearch:"",optionFilterProp:"children",disabled:!0,showArrow:!1,mode:1==t.info.type?"default":"multiple",placeholder:"请选择企业成员"},model:{value:e.userList,callback:function(i){t.$set(e,"userList",i)},expression:"item.userList"}},t._l(t.user,(function(e,i){return a("a-select-option",{key:e.id},[t._v("\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t"+t._s(e.name)+"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t")])})),1)],1)])]):t._e()})),0==i.sun.length?a("div",[t._v("--")]):t._e()],2)}}],null,!1,1459710597)},[a("span",{attrs:{slot:"mon"},slot:"mon"},[t._v("\n\t\t\t\t\t\t\t\t\t\t\t\t周一"),0!=t.info.specialWeekList[0].mon.length?a("a-icon",{staticStyle:{cursor:"pointer"},attrs:{type:"edit"},on:{click:function(e){return t.editSpecialTime("mon")}}}):t._e()],1),a("span",{attrs:{slot:"tues"},slot:"tues"},[t._v("\n\t\t\t\t\t\t\t\t\t\t\t\t周二"),0!=t.info.specialWeekList[0].tues.length?a("a-icon",{staticStyle:{cursor:"pointer"},attrs:{type:"edit"},on:{click:function(e){return t.editSpecialTime("tues")}}}):t._e()],1),a("span",{attrs:{slot:"wednes"},slot:"wednes"},[t._v("\n\t\t\t\t\t\t\t\t\t\t\t\t周三"),0!=t.info.specialWeekList[0].wednes.length?a("a-icon",{staticStyle:{cursor:"pointer"},attrs:{type:"edit"},on:{click:function(e){return t.editSpecialTime("wednes")}}}):t._e()],1),a("span",{attrs:{slot:"thurs"},slot:"thurs"},[t._v("\n\t\t\t\t\t\t\t\t\t\t\t\t周四"),0!=t.info.specialWeekList[0].thurs.length?a("a-icon",{staticStyle:{cursor:"pointer"},attrs:{type:"edit"},on:{click:function(e){return t.editSpecialTime("thurs")}}}):t._e()],1),a("span",{attrs:{slot:"fri"},slot:"fri"},[t._v("\n\t\t\t\t\t\t\t\t\t\t\t\t周五"),0!=t.info.specialWeekList[0].fri.length?a("a-icon",{staticStyle:{cursor:"pointer"},attrs:{type:"edit"},on:{click:function(e){return t.editSpecialTime("fri")}}}):t._e()],1),a("span",{attrs:{slot:"satur"},slot:"satur"},[t._v("\n\t\t\t\t\t\t\t\t\t\t\t\t周六"),0!=t.info.specialWeekList[0].satur.length?a("a-icon",{staticStyle:{cursor:"pointer"},attrs:{type:"edit"},on:{click:function(e){return t.editSpecialTime("satur")}}}):t._e()],1),a("span",{attrs:{slot:"sun"},slot:"sun"},[t._v("\n\t\t\t\t\t\t\t\t\t\t\t\t周日"),0!=t.info.specialWeekList[0].sun.length?a("a-icon",{staticStyle:{cursor:"pointer"},attrs:{type:"edit"},on:{click:function(e){return t.editSpecialTime("sun")}}}):t._e()],1)])],1),a("a-form-item",{staticStyle:{"margin-left":"12.5%","padding-bottom":"20px"}},[a("label",{staticStyle:{"margin-right":"20px"}},[t._v("特殊时期：")]),a("a-switch",{attrs:{checked:1==t.info.specialTime},on:{change:function(e){return t.changeSpecilTime()}}}),a("span",{staticStyle:{color:"#F56C6C","margin-left":"10px"}},[t._v("如遇到国家节假日或是企业自身重要日子，在特殊时期内，需要更换活码成员")]),a("div",{directives:[{name:"show",rawName:"v-show",value:1==t.info.specialTime,expression:"info.specialTime == 1"}],staticStyle:{"background-color":"white",padding:"10px 20px",width:"560px",border:"1px solid #D8D8D8"}},[a("div",{staticClass:"content-msg"},[a("p",{staticStyle:{"margin-bottom":"2px","line-height":"20px"}},[t._v("\n\t\t\t\t\t\t\t\t\t\t\t\t\t1、系统默认生成一条每日24小时（00:00~00:00）数据，当时间点不在所新增的时段内，客户扫码后，添加的是“24小时”的企业成员。\n\t\t\t\t\t\t\t\t\t\t\t\t")]),2==t.info.type?a("p",{staticStyle:{"margin-bottom":"2px","line-height":"20px",color:"#FF562D"}},[t._v("\n\t\t\t\t\t\t\t\t\t\t\t\t\t2、因受官方限制，无法对动态部门的员工设置添加好友上限，只可针对指定活码成员进行设置。\n\t\t\t\t\t\t\t\t\t\t\t\t")]):t._e(),2==t.info.type?a("p",{staticStyle:{"margin-bottom":"0px","line-height":"20px",color:"#FF562D"}},[t._v("\n\t\t\t\t\t\t\t\t\t\t\t\t\t3、渠道活码设置部门时，请确保设置的部门具有外部联系人权限，否则会导致该区间段的活码设置失效。\n\t\t\t\t\t\t\t\t\t\t\t\t")]):t._e()]),t._l(t.info.specialDateList,(function(e,i){return a("div",{class:i!=t.info.specialDateList.length-1?"border-dashed":"",staticStyle:{padding:"10px 10px 40px 10px"}},[a("label",[t._v("特殊时期"+t._s(i+1)+"：")]),a("a-range-picker",{staticStyle:{width:"200px"},attrs:{allowClear:!1,disabledDate:t.disabledDateDay,value:e.specialDate,defaultValue:[t.moment(new Date,"YYYY-MM-DD"),t.moment(new Date,"YYYY-MM-DD")],format:"YYYY-MM-DD"},on:{change:function(e){return t.changeSpecialDate(e,i)}}}),t._l(e.time,(function(n,r){return a("div",{staticStyle:{"margin-left":"77px"}},[a("a-time-picker",{staticStyle:{width:"100px"},attrs:{disabled:0==r,allowClear:!1,minuteStep:60,defaultOpenValue:t.moment("00:00","HH:mm"),format:"HH:mm"},on:{change:function(e){return t.changeSpecialStartTime(e,i,r)}},model:{value:n.startTime,callback:function(e){t.$set(n,"startTime",e)},expression:"time.startTime"}}),t._v("\n\t\t\t\t\t\t\t\t\t\t\t\t\t~\n\t\t\t\t\t\t\t\t\t\t\t\t\t"),a("a-time-picker",{staticStyle:{width:"100px"},attrs:{disabled:0==r,allowClear:!1,minuteStep:60,defaultOpenValue:t.moment("00:00","HH:mm"),format:"HH:mm"},on:{change:function(e){return t.changeSpecialEndTime(e,i,r)}},model:{value:n.endTime,callback:function(e){t.$set(n,"endTime",e)},expression:"time.endTime"}}),2==t.info.type?[a("a-button",{staticStyle:{"margin-left":"10px"},on:{click:function(e){return t.showDepartmentList(i,0,r)}}},[t._v("\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t选择企业成员\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t")]),a("a-tooltip",{attrs:{placement:"top"}},[a("template",{slot:"title"},[a("div",t._l(n.userList,(function(e){return a("span",["custom"==e.scopedSlots.title?[t._v(" "+t._s(e.title)+" ")]:t._e()],2)})),0)]),n.userList.length>0?a("span",{staticStyle:{display:"inline-block",width:"80px",overflow:"hidden","text-overflow":"ellipsis","white-space":"nowrap"}},t._l(n.userList,(function(e){return a("span",["custom"==e.scopedSlots.title?[t._v(" "+t._s(e.title)+" ")]:t._e()],2)})),0):t._e()],2),a("a-tooltip",{attrs:{placement:"top"}},[a("template",{slot:"title"},[t._l(n.userList,(function(e,i){return["custom"!=e.scopedSlots.title?a("a-tag",{staticStyle:{"margin-bottom":"5px"},attrs:{color:"orange"}},[t._v(t._s(e.title))]):t._e()]}))],2),n.userList.length>0?a("span",{staticStyle:{display:"inline-block","vertical-align":"top"}},[t._l(n.userList,(function(e,i){return["custom"!=e.scopedSlots.title&&t.getThreePartyIndex(n.userList)>=i?a("a-tag",{attrs:{color:"orange"}},[t._v(t._s(e.title))]):t._e()]})),t.getPartyNum(n.userList)>3?[t._v("等"+t._s(t.getPartyNum(n.userList))+"个部门")]:t._e()],2):t._e()],2)]:t._e(),2==t.info.type&&r==e.time.length-1?a("a-tooltip",{attrs:{placement:"top"}},[a("template",{slot:"title"},[t._v("\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t选择企业成员和选择部门必须选择一个。选择部门后，扫码后最多可添加当前部门的企业成员。如原来某部门是5人，后新增1人，则客户最多可添加该部门6位企业成员\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t")]),a("span",{staticStyle:{"margin-left":"10px","vertical-align":"top"}},[a("a-icon",{attrs:{type:"question-circle"}})],1)],2):t._e(),1==t.info.type?a("chooseStaffSelect",{ref:"staffSelect",refInFor:!0,staticStyle:{width:"160px","margin-left":"10px",display:"inline-block"},attrs:{index:i,index2:r,callback:t.selectStaffCallback}}):t._e(),a("div",[a("span",{directives:[{name:"show",rawName:"v-show",value:r==e.time.length-1,expression:"timeIndex == item.time.length - 1"}],staticStyle:{"margin-right":"10px",color:"#1890FF",cursor:"pointer"},on:{click:function(e){return t.addSpecialDateTimeList(i,r)}}},[t._v("\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t添加\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t")]),a("span",{directives:[{name:"show",rawName:"v-show",value:0!=r,expression:"timeIndex != 0"}],staticStyle:{cursor:"pointer",color:"#F56C6C"},on:{click:function(e){return t.deleteSpecialDateTimeList(i,r)}}},[t._v("删除\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t")])])],2)})),a("div",{staticStyle:{float:"right"}},[a("a-button",{directives:[{name:"show",rawName:"v-show",value:i==t.info.specialDateList.length-1,expression:"index == info.specialDateList.length - 1"}],staticStyle:{height:"26px",width:"94px",padding:"0px 5px","margin-right":"10px","font-size":"12px"},attrs:{type:"primary",icon:"plus"},on:{click:function(e){return t.addSpecialDate(i)}}},[t._v("\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t添加时期\n\t\t\t\t\t\t\t\t\t\t\t\t\t")]),a("a-icon",{directives:[{name:"show",rawName:"v-show",value:0!=i||t.info.specialDateList.length>1,expression:"index != 0 || info.specialDateList.length > 1"}],staticStyle:{color:"#F56C6C"},attrs:{type:"delete"},on:{click:function(e){return t.deleteSpecialDate(i)}}})],1)],2)}))],2)],1),a("a-form-item",{attrs:{label:"员工添加上限","label-col":{span:3},"wrapper-col":{span:21}}},[a("a-switch",{attrs:{checked:2==t.info.is_limit},on:{change:t.changeIsCeiling}}),a("span",{staticStyle:{color:"#F56C6C"}},[t._v("（因受官方限制，无法对动态部门的员工设置添加好友上限，只可针对指定活码成员进行设置）")]),2==t.info.is_limit?a("a-table",{staticStyle:{"max-width":"60%"},attrs:{scroll:{y:450},columns:t.limitUserColumns,dataSource:t.info.user_limit,pagination:!1,rowClassName:t.rowClassName},scopedSlots:t._u([{key:"limit",fn:function(e,i,n){return a("span",{},[a("a-input-number",{staticClass:"brush-input",attrs:{min:1,max:99999999,placeholder:"请填写上限人数",formatter:t.limitDecimals,parse:t.limitDecimals},nativeOn:{input:function(e){return function(e){return t.inputLimitNum(e,n)}(e)}},model:{value:i.limit,callback:function(e){t.$set(i,"limit",e)},expression:"record.limit"}})],1)}}],null,!1,2354248732)}):t._e()],1),1==t.current&&2==t.info.is_limit?a("a-form-item",{staticStyle:{"padding-bottom":"20px"},attrs:{label:"备用员工","label-col":{span:3},"wrapper-col":{span:21}}},[2==t.info.type?[a("a-button",{staticStyle:{"margin-left":"10px"},on:{click:function(e){return t.showDepartmentList("",2)}}},[t._v("\n\t\t\t\t\t\t\t\t\t\t\t\t选择企业成员\n\t\t\t\t\t\t\t\t\t\t\t")]),a("a-tooltip",{attrs:{placement:"top"}},[a("template",{slot:"title"},[a("div",t._l(t.info.spare_employee,(function(e){return a("span",["custom"==e.scopedSlots.title?[t._v(" "+t._s(e.title)+" ")]:t._e()],2)})),0)]),t.info.spare_employee.length>0?a("span",{staticStyle:{display:"inline-block","max-width":"80px",overflow:"hidden","text-overflow":"ellipsis","white-space":"nowrap","vertical-align":"middle",margin:"0 10px"}},t._l(t.info.spare_employee,(function(e){return a("span",["custom"==e.scopedSlots.title?[t._v(" "+t._s(e.title)+" ")]:t._e()],2)})),0):t._e()],2),a("a-tooltip",{attrs:{placement:"top"}},[a("template",{slot:"title"},[t._l(t.info.spare_employee,(function(e,i){return["custom"!=e.scopedSlots.title?a("a-tag",{staticStyle:{"margin-bottom":"5px"},attrs:{color:"orange"}},[t._v(t._s(e.title))]):t._e()]}))],2),t.info.spare_employee.length>0?a("span",{staticStyle:{display:"inline-block","vertical-align":"middle"}},[t._l(t.info.spare_employee,(function(e,i){return["custom"!=e.scopedSlots.title&&t.getThreePartyIndex(t.info.spare_employee)>=i?a("a-tag",{attrs:{color:"orange"}},[t._v(t._s(e.title))]):t._e()]})),t.getPartyNum(t.info.spare_employee)>3?[t._v("等"+t._s(t.getPartyNum(t.info.spare_employee))+"个部门")]:t._e()],2):t._e()],2)]:t._e(),1==t.info.type?a("chooseStaffSelect",{ref:"staffSelect3",staticStyle:{width:"160px","margin-left":"10px",display:"inline-block"},attrs:{index:-1,index2:-1,callback:t.selectStaffCallback}}):t._e()],2):t._e()],1):t._e(),2==t.current?a("a-form",[a("a-form-item",{attrs:{label:"自动添加好友","label-col":{span:3},"wrapper-col":{span:21}}},[a("a-switch",{attrs:{checked:0==t.info.skip_verify},on:{change:t.changeSkipVerify}}),a("span",{staticStyle:{color:"#F56C6C"}},[t._v("（开启时，客户添加时无需企业成员确认，自动成为好友）")]),0==t.info.skip_verify?a("div",[a("a-radio-group",{attrs:{name:"radioGroup"},model:{value:t.info.verify_all_day,callback:function(e){t.$set(t.info,"verify_all_day",e)},expression:"info.verify_all_day"}},[a("a-radio",{attrs:{value:1}},[t._v("\n\t\t\t\t\t\t\t\t\t\t\t\t\t全天开启\n\t\t\t\t\t\t\t\t\t\t\t\t")]),a("a-radio",{attrs:{value:2}},[t._v("\n\t\t\t\t\t\t\t\t\t\t\t\t\t选择时间段\n\t\t\t\t\t\t\t\t\t\t\t\t")])],1),2==t.info.verify_all_day?a("div",[t._l(t.timeList,(function(e,i){return a("div",[a("a-time-picker",{attrs:{allowClear:!1,minuteStep:60,format:"HH:mm"},on:{change:function(e){return t.changeSkipStartTime(i)}},model:{value:e.startTime,callback:function(i){t.$set(e,"startTime",i)},expression:"item.startTime"}}),t._v("\n\t\t\t\t\t\t\t\t\t\t\t\t\t~\n\t\t\t\t\t\t\t\t\t\t\t\t\t"),a("a-time-picker",{attrs:{allowClear:!1,minuteStep:60,format:"HH:mm"},on:{change:function(e){return t.changeSkipEndTime(i)}},model:{value:e.endTime,callback:function(i){t.$set(e,"endTime",i)},expression:"item.endTime"}}),1!=t.timeList.length?a("a-icon",{staticStyle:{color:"#FF562D","margin-left":"10px"},attrs:{minuteStep:60,type:"delete"},on:{click:function(e){return t.deleteSkipTime(i)}}}):t._e()],1)})),a("a-button",{on:{click:t.addSkipTime}},[t._v("添加")])],2):t._e()],1):t._e()],1),a("a-form-item",{staticStyle:{"padding-bottom":"20px"},attrs:{"label-col":{span:3},"wrapper-col":{span:21}}},[a("span",{attrs:{slot:"label"},slot:"label"},[t._v("\n\t\t\t\t\t\t\t\t\t        客户标签 \n\t\t\t\t\t\t\t\t\t        "),a("a-tooltip",{attrs:{title:"客户通过该渠道活码扫码添加企业成员后，其将会被自动打上选中的客户标签"}},[a("a-icon",{attrs:{type:"question-circle"}})],1)],1),t.isShowTag?a("corpChooseTag",{attrs:{callback:t.modalVisibleChange4,hasChoose:t.tag_arr}}):t._e()],1)],1):t._e(),3==t.current?a("a-form",[a("div",{staticClass:"content-msg"},[a("p",{staticStyle:{"margin-bottom":"0px","line-height":"20px",color:"#F56C6C"}},[t._v("\n\t\t\t\t\t\t\t\t\t\t\t欢迎语推送规则：在通用、周期及特殊时期欢迎语共存情况下，推送优先顺序为特殊时期的欢迎语 > 按周期的欢迎语 >\n\t\t\t\t\t\t\t\t\t\t\t通用欢迎语。若企业微信官方后台已配置了欢迎语，则在第三方系统配置的欢迎语均失效，客户收到的依然是官方推送的。\n\t\t\t\t\t\t\t\t\t\t")])]),a("a-form-item",{attrs:{label:"扫码推送","label-col":{span:3},"wrapper-col":{span:21}}},[a("a-switch",{attrs:{checked:t.pushValue},on:{click:t.changeStatus}}),t._v("\n\t\t\t\t\t\t\t\t\t\t（关闭后，客户扫该渠道活码，依然可对该客户自动打标签）\n\t\t\t\t\t\t\t\t\t")],1),t.pushValue?a("a-tabs",{staticStyle:{"margin-top":"20px"},attrs:{tabPosition:"left","default-active-key":"1"}},[a("a-tab-pane",{key:"1",attrs:{tab:"通用欢迎语"}},[t.pushValue?a("a-form-item",{staticStyle:{"padding-bottom":"20px"},attrs:{label:"","label-col":{span:3},"wrapper-col":{span:21}}},[a("div",{staticStyle:{width:"900px","background-color":"#FFFFFF",padding:"10px 0","margin-top":"10px"}},[a("div",{staticClass:"wrap left-sider-content",staticStyle:{"margin-left":"68px"}},[a("img",{staticStyle:{width:"350px","border-bottom":"1px solid #E2D6D6"},attrs:{src:i("eb7e"),alt:""}}),a("div",{staticClass:"msg_content_body"},[t.textAreaValueHeader&&t.pushValue?a("div",{staticClass:"mt"},[a("a-avatar",{staticStyle:{"margin-right":"10px",float:"left"},attrs:{src:"https://zos.alipayobjects.com/rmsportal/ODTLcjxAfvqbxHnVXCYX.png",size:36}}),a("span",{staticClass:"item-info msg_content_txt",staticStyle:{display:"block","white-space":"pre-wrap","word-wrap":"break-word"},domProps:{innerHTML:t._s(t.textAreaValueHeader)}})],1):t._e()])]),a("div",{staticClass:"pull-right fl"},[t.editorFlag?a("editor",{attrs:{text:t.textContent,textValue:t.textAreaValueHeader},on:{changeText:t.changeText}}):t._e()],1)])]):t._e()],1),a("a-tab-pane",{key:"2",attrs:{tab:"周期欢迎语","force-render":""}},[t.pushValue?a("a-form-item",{staticStyle:{"padding-bottom":"20px"},attrs:{label:"","label-col":{span:3},"wrapper-col":{span:21}}},[a("a-switch",{attrs:{checked:2==t.info.is_welcome_week},on:{change:t.changeIsWelcomeWeek}}),2==t.info.is_welcome_week?a("a-tabs",{staticStyle:{width:"900px","margin-top":"5px","background-color":"#FFF","padding-bottom":"20px"},attrs:{size:"large",tabPosition:"top",type:"editable-card"},on:{edit:t.addWelcomeWeek},model:{value:t.weekTabKey,callback:function(e){t.weekTabKey=e},expression:"weekTabKey"}},t._l(t.welcome_week_list,(function(e,n){return a("a-tab-pane",{key:n,staticStyle:{"margin-left":"26px",height:"550px","overflow-y":"auto",width:"calc(100% - 26px)"},attrs:{tab:"欢迎语"+(n+1)}},[a("div",{key:t.weekKey},[a("div",{staticStyle:{margin:"10px 0"}},[a("label",[t._v("选择周期：")]),t._l(t.weekList,(function(i){return[t.isDisabled(n,i.key)?t._e():a("a-checkable-tag",{staticStyle:{cursor:"pointer"},attrs:{checked:e.date.indexOf(i.key)>-1},on:{change:function(e){return t.selctedWeekDay(n,i.key)}}},[t._v("\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t"+t._s(i.name)+"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t")]),t.isDisabled(n,i.key)?a("a-button",{staticStyle:{padding:"0 7px","margin-right":"5px",height:"26px","line-height":"25px","font-size":"12px"},attrs:{disabled:!0}},[t._v("\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t"+t._s(i.name)+"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t")]):t._e()]}))],2),t._l(e.time,(function(r,s){return a("div",{staticStyle:{"margin-left":"40px"}},[a("div",{staticStyle:{"margin-bottom":"10px"}},[a("label",{staticStyle:{"margin-right":"10px"}},[t._v("时间段"+t._s(s+1)+"：")]),a("a-time-picker",{attrs:{allowClear:!1,minuteStep:60,format:"HH:mm"},model:{value:r.startTime,callback:function(e){t.$set(r,"startTime",e)},expression:"item.startTime"}}),t._v("\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t~\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t"),a("a-time-picker",{attrs:{allowClear:!1,minuteStep:60,format:"HH:mm"},model:{value:r.endTime,callback:function(e){t.$set(r,"endTime",e)},expression:"item.endTime"}}),e.time.length>1?a("a-icon",{staticStyle:{color:"#FF562D","margin-left":"10px"},attrs:{type:"delete"},on:{click:function(e){return t.deleteWelcomeWeekTime(n,s)}}}):t._e()],1),a("div",{staticClass:"wrap left-sider-content"},[a("img",{staticStyle:{width:"350px","border-bottom":"1px solid #E2D6D6"},attrs:{src:i("eb7e"),alt:""}}),a("div",{staticClass:"msg_content_body"},[r.content.textAreaValueHeader&&t.pushValue?a("div",{staticClass:"mt"},[a("a-avatar",{staticStyle:{"margin-right":"10px",float:"left"},attrs:{src:"https://zos.alipayobjects.com/rmsportal/ODTLcjxAfvqbxHnVXCYX.png",size:36}}),a("span",{staticClass:"item-info msg_content_txt",staticStyle:{display:"block","white-space":"pre-wrap","word-wrap":"break-word"},domProps:{innerHTML:t._s(r.content.textAreaValueHeader)}})],1):t._e()])]),a("div",{staticClass:"pull-right fl"},[a("cEditor",{attrs:{text:r.content.textContent,type:1,index:n,idx:s,textValue:r.content.textAreaValueHeader},on:{changeText:t.changeText1}})],1),a("a-divider")],1)})),a("div",{staticStyle:{"margin-left":"40px"}},[a("a-button",{on:{click:function(e){return t.addWelcomeWeekTime(n)}}},[t._v("添加时间段\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t")])],1)],2)])})),1):t._e()],1):t._e()],1),a("a-tab-pane",{key:"3",attrs:{tab:"特殊时期欢迎语"}},[t.pushValue?a("a-form-item",{staticStyle:{"padding-bottom":"20px"},attrs:{label:"","label-col":{span:3},"wrapper-col":{span:21}}},[a("a-switch",{attrs:{checked:2==t.info.is_welcome_date},on:{change:t.changeIsWelcomeDate}}),2==t.info.is_welcome_date?a("a-tabs",{staticStyle:{width:"900px","margin-top":"5px","background-color":"#FFF","padding-bottom":"20px"},attrs:{size:"large",tabPosition:"top",type:"editable-card"},on:{edit:t.addWelcomeDate},model:{value:t.dateTabKey,callback:function(e){t.dateTabKey=e},expression:"dateTabKey"}},t._l(t.welcome_date_list,(function(e,n){return a("a-tab-pane",{key:n,staticStyle:{"margin-left":"26px",height:"550px","overflow-y":"auto",width:"calc(100% - 26px)"},attrs:{tab:"欢迎语"+(n+1)}},[a("div",{key:t.dateKey},[a("div",{staticStyle:{margin:"10px 0"}},[a("label",[t._v("时期"+t._s(n+1)+"：")]),a("a-range-picker",{staticStyle:{width:"270px"},attrs:{allowClear:!1,disabledDate:t.disabledDateDay,format:"YYYY-MM-DD"},model:{value:e.date,callback:function(i){t.$set(e,"date",i)},expression:"week.date"}})],1),t._l(e.time,(function(r,s){return a("div",{staticStyle:{"margin-left":"40px"}},[a("div",{staticStyle:{"margin-bottom":"10px"}},[a("label",{staticStyle:{"margin-right":"10px"}},[t._v("时间段"+t._s(s+1)+"：")]),a("a-time-picker",{attrs:{allowClear:!1,minuteStep:60,format:"HH:mm"},model:{value:r.startTime,callback:function(e){t.$set(r,"startTime",e)},expression:"item.startTime"}}),t._v("\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t~\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t"),a("a-time-picker",{attrs:{allowClear:!1,minuteStep:60,format:"HH:mm"},model:{value:r.endTime,callback:function(e){t.$set(r,"endTime",e)},expression:"item.endTime"}}),e.time.length>1?a("a-icon",{staticStyle:{color:"#FF562D","margin-left":"10px"},attrs:{type:"delete"},on:{click:function(e){return t.deleteWelcomeDateTime(n,s)}}}):t._e()],1),a("div",{staticClass:"wrap left-sider-content"},[a("img",{staticStyle:{width:"350px","border-bottom":"1px solid #E2D6D6"},attrs:{src:i("eb7e"),alt:""}}),a("div",{staticClass:"msg_content_body"},[r.content.textAreaValueHeader&&t.pushValue?a("div",{staticClass:"mt"},[a("a-avatar",{staticStyle:{"margin-right":"10px",float:"left"},attrs:{src:"https://zos.alipayobjects.com/rmsportal/ODTLcjxAfvqbxHnVXCYX.png",size:36}}),a("span",{staticClass:"item-info msg_content_txt",staticStyle:{display:"block","white-space":"pre-wrap","word-wrap":"break-word"},domProps:{innerHTML:t._s(r.content.textAreaValueHeader)}})],1):t._e()])]),a("div",{staticClass:"pull-right fl",staticStyle:{"margin-left":"40px"}},[a("cEditor",{attrs:{text:r.content.textContent,type:2,index:n,idx:s,textValue:r.content.textAreaValueHeader},on:{changeText:t.changeText1}})],1),a("a-divider")],1)})),a("div",{staticStyle:{"margin-left":"40px"}},[a("a-button",{on:{click:function(e){return t.addWelcomeDateTime(n)}}},[t._v("添加时间段\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t")])],1)],2)])})),1):t._e()],1):t._e()],1)],1):t._e()],1):t._e()],1)]),a("div",{staticClass:"steps-action"},[a("div",{staticStyle:{position:"fixed",left:"50%",transform:"translate(-50%, 0)"}},[t.current>0?a("a-button",{on:{click:t.prev}},[t._v("\n\t\t\t\t\t\t\t\t\t上一步\n\t\t\t\t\t\t\t\t")]):t._e(),t.current<t.steps.length-1?a("a-button",{staticStyle:{"margin-left":"8px"},attrs:{type:"primary"},on:{click:t.next}},[t._v("\n\t\t\t\t\t\t\t\t\t下一步\n\t\t\t\t\t\t\t\t")]):t._e(),t.current==t.steps.length-1?a("a-button",{staticStyle:{"margin-left":"8px"},attrs:{disabled:t.createDisabled,type:"primary"},on:{click:t.saveWay}},["undefined"==typeof t.urlId?[t._v("创建")]:[t._v("提交")]],2):t._e()],1)])],1)],1)],1)],1)],1),a("chooseDepartment",{ref:"user",attrs:{show:t.showModalDepartment,is_from:7,departmentDisabled:t.departmentDisabled,chooseNum:t.chooseDepartmentNum,callback:t.modalVisibleChange3}}),a("wxModal",{attrs:{show:t.showModal2,callback:t.modalVisibleChange,hasName:"channel-add"}}),a("a-modal",{attrs:{visible:t.specialTimeVisible,title:t.specialTimeTitle,width:"720px",confirmLoading:t.addSpecialTimeLoading},on:{ok:t.handleSpecialTime,cancel:t.handleCancelSpecialTime}},[a("div",{staticClass:"content-msg"},[a("p",{staticStyle:{"margin-bottom":"2px","line-height":"20px"}},[t._v("\n\t\t\t\t1、系统默认生成一条每日24小时（00:00~00:00）数据，当时间点不在所新增的时段内，客户扫码后，添加的是“24小时”的企业成员。\n\t\t\t")]),2==t.info.type?a("p",{staticStyle:{"margin-bottom":"2px","line-height":"20px",color:"#FF562D"}},[t._v("\n\t\t\t\t2、因受官方限制，无法对动态部门的员工设置添加好友上限，只可针对指定活码成员进行设置。\n\t\t\t")]):t._e(),2==t.info.type?a("p",{staticStyle:{"margin-bottom":"0px","line-height":"20px",color:"#FF562D"}},[t._v("\n\t\t\t\t3、渠道活码设置部门时，请确保设置的部门具有外部联系人权限，否则会导致该区间段的活码设置失效。\n\t\t\t")]):t._e()]),a("a-form-item",{attrs:{label:"固定时段","label-col":{span:3},"wrapper-col":{span:21}}},[a("div",t._l(t.specialTimeList,(function(e,i){return a("div",[a("a-time-picker",{staticStyle:{width:"100px"},attrs:{disabled:0==i,allowClear:!1,minuteStep:60,defaultOpenValue:t.moment("00:00","HH:mm"),format:"HH:mm"},on:{change:function(e){return t.changeStartTime(e,i)}},model:{value:e.startTime,callback:function(i){t.$set(e,"startTime",i)},expression:"item.startTime"}}),t._v("\n\t\t\t\t\t~\n\t\t\t\t\t"),a("a-time-picker",{staticStyle:{width:"100px"},attrs:{disabled:0==i,allowClear:!1,minuteStep:60,defaultOpenValue:t.moment("00:00","HH:mm"),format:"HH:mm"},on:{change:function(e){return t.changeEndTime(e,i)}},model:{value:e.endTime,callback:function(i){t.$set(e,"endTime",i)},expression:"item.endTime"}}),1==t.info.type&&t.specialTimeVisible?a("chooseStaffSelect",{ref:"staffSelect2",refInFor:!0,staticStyle:{width:"160px","margin-left":"10px",display:"inline-block"},attrs:{index:i,index2:0,callback:t.selectStaffCallback2}}):t._e(),2==t.info.type?[a("a-button",{staticStyle:{"margin-left":"10px"},on:{click:function(e){return t.showDepartmentList(i,1)}}},[t._v("\n\t\t\t\t\t\t\t选择\n\t\t\t\t\t\t")]),a("span",{directives:[{name:"show",rawName:"v-show",value:e.userList.length+e.party.length>0,expression:"item.userList.length + item.party.length> 0"}],staticStyle:{"margin-left":"5px"}},[t._v("已选择"+t._s(t.getUserNum(e.userList))+"名成员，"+t._s(e.party.length)+"个部门")])]:t._e(),2==t.info.type&&i==t.specialTimeList.length-1?a("a-tooltip",{attrs:{placement:"top"}},[a("template",{slot:"title"},[t._v("\n\t\t\t\t\t\t\t选择企业成员和选择部门必须选择一个。选择部门后，扫码后最多可添加当前部门的企业成员。如原来某部门是5人，后新增1人，则客户最多可添加该部门6位企业成员\n\t\t\t\t\t\t")]),a("span",{staticStyle:{"margin-left":"10px"}},[a("a-icon",{attrs:{type:"question-circle"}})],1)],2):t._e(),a("div",[a("span",{directives:[{name:"show",rawName:"v-show",value:i==t.specialTimeList.length-1,expression:"index == specialTimeList.length - 1"}],staticStyle:{color:"#1890FF",cursor:"pointer","margin-right":"10px"},on:{click:function(e){return t.addTime(i)}}},[t._v("添加")]),a("span",{directives:[{name:"show",rawName:"v-show",value:0!=i,expression:"index != 0"}],staticStyle:{cursor:"pointer",color:"#F56C6C"},on:{click:function(e){return t.deleteTime(i)}}},[t._v("删除\n\t\t\t\t\t\t")])])],2)})),0)]),a("a-form-item",{attrs:{label:"适用周期","label-col":{span:3},"wrapper-col":{span:21}}},[t._l(t.weekList,(function(e,i){return[a("a-checkable-tag",{staticStyle:{cursor:"pointer"},on:{change:function(i){return t.changeWeekDay(e.key)}},model:{value:t.weekChecked[i],callback:function(e){t.$set(t.weekChecked,i,e)},expression:"weekChecked[index]"}},[t._v("\n\t\t\t\t\t"+t._s(e.name)+"\n\t\t\t\t")])]}))],2)],1),a("a-modal",{attrs:{visible:t.codeVisible,title:"选择渠道活码",confirmLoading:t.codeLoading,width:"888"},on:{ok:t.handleCode,cancel:t.handleCancelCode}},[a("div",[a("div",{staticStyle:{"margin-bottom":"10px"}},[a("a-input",{staticStyle:{width:"200px"},attrs:{placeholder:"请输入活码名称"},on:{keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.searchName(e)}},model:{value:t.name,callback:function(e){t.name=e},expression:"name"}}),a("a-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"primary"},on:{click:t.searchName}},[t._v("搜索")]),a("a-button",{staticStyle:{"margin-left":"10px"},on:{click:t.clear}},[t._v("清除")])],1),a("a-spin",{attrs:{tip:"Loading...",size:"large",spinning:t.isTableLoading}},[a("a-table",{attrs:{columns:t.columns,dataSource:t.codeList,pagination:!1,rowClassName:t.rowClassName,rowSelection:{selectedRowKeys:t.codeId,onChange:t.onSelectChange,type:"radio"}},scopedSlots:t._u([{key:"type",fn:function(e){return a("span",{},[1==e?[t._v("单人")]:[t._v("多人")]],2)}}])}),a("div",{directives:[{name:"show",rawName:"v-show",value:t.count>0,expression:"count > 0"}],staticStyle:{width:"100%",height:"32px","margin-top":"20px"}},[a("div",{staticStyle:{height:"32px",float:"left","line-height":"32px"}},[t._v("\n\t\t\t\t\t\t共有\n\t\t\t\t\t\t"),a("span",{staticStyle:{color:"blue"}},[t._v(t._s(t.count))]),t._v("个活码\n\t\t\t\t\t")]),a("div",{staticClass:"pagination",staticStyle:{height:"32px",float:"right"}},[a("a-pagination",{attrs:{total:t.count,showSizeChanger:"",showQuickJumper:!1,current:t.page,pageSize:t.pageSize,pageSizeOptions:["15","30"]},on:{change:t.changePage,showSizeChange:t.showSizeChange}})],1)])],1)],1)])],1)},n=[],r=(i("7514"),i("c5f6"),i("20d6"),i("28a5"),i("6b54"),i("ac4d"),i("8a81"),i("ac6a"),i("a481"),i("7f7f"),i("96cf"),i("3b8d")),s=(i("6c7b"),i("0094")),o=i("b76a"),l=i.n(o),c=i("79b5"),d=(i("40cf"),i("156b")),p=i("c75b"),u=i("c1df"),m=i.n(u),h=i("0cfc"),f=i("95204"),g=i("e488"),_=i("4262"),b={text:"",textAreaValueHeader:"",textContent:""},y=[{title:"活码名称",dataIndex:"title",key:"title"},{title:"类型",dataIndex:"type",key:"type",scopedSlots:{customRender:"type"}},{title:"分组",dataIndex:"way_group_name",key:"way_group_name"}],x={components:{cEditor:g["a"],wxModal:s["a"],chooseRule:_["a"],vuedraggable:l.a,VEmojiPicker:c["a"],editor:d["a"],chooseDepartment:p["a"],corpChooseTag:h["a"],chooseStaffSelect:f["a"],VNodes:{functional:!0,render:function(t,e){return e.props.vnodes}}},props:{defaultTypeName:{type:Object,default:function(){return{1:"文字",2:"图片",3:"音频",4:"视频",5:"图文"}}}},data:function(){var t=localStorage.getItem("corpId")?localStorage.getItem("corpId"):"";return{corpName:"",showModalDepartment:!1,departmentDisabled:0,isShowTag:!0,chooseDepartmentNum:0,current:0,steps:[{title:"活动信息"},{title:"引流成员设置"},{title:"高级设置"},{title:"欢迎语设置"}],editorFlag:!1,textAreaValueHeader:"",textContent:"",wxInfo:[],avatarImg:"",showModal2:!1,groupList2:[],msg_title:"",validity:1,tag_arr:[],img:!1,text:"",group_id:[],checked:[],localChecked:[],pushValue:!0,jumpVisible:!1,commonUrl:this.$store.state.commonUrl,urlId:"",agentId:"",newTagList:[],createDisabled:!1,isLoading:!1,formLayout:"horizontal",form:this.$form.createForm(this,{name:"contactWay"}),startDate:null,endDate:null,loading:!1,name:"",page:1,pageSize:15,isTableLoading:!1,columns:y,count:0,codeId:[],codeList:[],codeVisible:!1,codeLoading:!1,redpacket_status:1,redpacket_amount:0,rule1:{rule_type:1,rule_name:"",rule_fixed_amount:"0.3",rule_min_random_amount:"0.3",rule_max_random_amount:"200",rule_pic_url:"/static/image/default-redpacket.png",rule_title:"",rule_des:"",rule_thanking:""},rule2:{rule_name:"",rule_type:1,rule_fixed_amount:.3,rule_min_random_amount:"",rule_max_random_amount:"",rule_pic_url:"/static/image/default-redpacket.png",rule_title:"恭喜发财，大吉大利",rule_des:"戳我领取红包",rule_thanking:"恭喜发财，大吉大利"},rule:{name:"",time_type:1,start_time:"",end_time:"",reserve_day:30,redrule_type:2,rule_id:0,rule_name:"",rule_type:1,rule_fixed_amount:.3,rule_min_random_amount:"",rule_max_random_amount:"",rule_pic_url:"/static/image/default-redpacket.png",rule_title:"恭喜发财，大吉大利",rule_des:"戳我领取红包~",rule_thanking:"恭喜发财，大吉大利",rule_save:1,redpacket_amount:6e3},info:{type:1,scene:2,remark:"",skip_verify:0,verify_all_day:1,state:"",style:1,user:[],specialTime:0,specialWeekList:[{mon:[],tues:[],wednes:[],thurs:[],fri:[],satur:[],sun:[]}],specialDateList:[{specialDate:[m()(new Date),m()(new Date)],date:[m()(new Date).format("YYYY-MM-DD"),m()(new Date).format("YYYY-MM-DD")],time:[{startTime:m()("00:00","HH:mm"),endTime:m()("00:00","HH:mm"),start_time:"00:00",end_time:"00:00",userList:[],party:[]}]}],is_limit:1,spare_employee:[],user_limit:[],party:[],tag_ids:[],is_welcome_week:1,is_welcome_date:1},timeList:[{startTime:m()("09:00","HH-mm"),endTime:m()("17:00","HH-mm")}],welcomeTabKey:1,weekTabKey:0,weekKey:0,welcome_week_list:[{date:[],time:[{startTime:null,endTime:null,content:JSON.parse(JSON.stringify(b))}]}],dateTabKey:0,dateKey:0,welcome_date_list:[{date:[],time:[{startTime:null,endTime:null,content:JSON.parse(JSON.stringify(b))}]}],specialTimeVisible:!1,addSpecialTimeLoading:!1,specialTimeTitle:"添加企业成员",weekList:[{key:"mon",name:"周一"},{key:"tues",name:"周二"},{key:"wednes",name:"周三"},{key:"thurs",name:"周四"},{key:"fri",name:"周五"},{key:"satur",name:"周六"},{key:"sun",name:"周日"}],weekArr:{mon:0,tues:1,wednes:2,thurs:3,fri:4,satur:5,sun:6},weekDayKey:[],weekChecked:new Array(7).fill(!1),limitUserColumns:[{title:"名称",dataIndex:"name",key:"name"},{title:"上限",dataIndex:"limit",key:"limit",scopedSlots:{customRender:"limit"}}],specialWeekColumns:[{slots:{title:"mon"},dataIndex:"mon",width:"14%",key:"mon",scopedSlots:{customRender:"mon"}},{slots:{title:"tues"},dataIndex:"tues",width:"14%",key:"tues",scopedSlots:{customRender:"tues"}},{slots:{title:"wednes"},dataIndex:"wednes",width:"14%",key:"wednes",scopedSlots:{customRender:"wednes"}},{slots:{title:"thurs"},dataIndex:"thurs",width:"14%",key:"thurs",scopedSlots:{customRender:"thurs"}},{slots:{title:"fri"},dataIndex:"fri",width:"14%",key:"fri",scopedSlots:{customRender:"fri"}},{slots:{title:"satur"},dataIndex:"satur",width:"14%",key:"satur",scopedSlots:{customRender:"satur"}},{slots:{title:"sun"},dataIndex:"sun",width:"14%",key:"sun",scopedSlots:{customRender:"sun"}}],specialTimeUserList:[],timeIndex:"",currentType:"",currentIndex:"",specialTimeList:[{startTime:m()("00:00","HH:mm"),endTime:m()("00:00","HH:mm"),start_time:"00:00",end_time:"00:00",userList:[],party:[]}],user:[],party:[],corpId:t,groupList:[],editGroupId:"",selectedUser:[]}},methods:{goBack:function(){localStorage.removeItem("notAllow"),localStorage.removeItem("backUrl"),this.$router.push("/redForNew/list?isRefresh=1")},changeCurrent:function(t){if(this.current=t,1==this.current){var e=this;this.$nextTick((function(){2==e.info.is_limit&&(e.$refs.staffSelect3.userId=e.info.spare_employee?e.info.spare_employee:[])})),this.changeUser()}},changeUser:function(){var t=this,e=[];t.info.specialDateList.map((function(t,i){t.time.map((function(t,i){e.push(t.userList)}))})),t.$nextTick((function(){e.map((function(e,i){t.$refs.staffSelect&&(t.$refs.staffSelect[i].userId=e)}))}))},disabledDate:function(t){return t&&t<m()().startOf("day")},changeRedStartTime:function(t,e){e&&this.startDate&&e>m()(this.endDate).format("YYYY-MM-DD HH:mm:ss")&&this.$message.warning("开始时间不能晚于结束时间"),this.startDate=e?t:null,this.rule.start_time=e},changeRedEndTime:function(t,e){e&&this.startDate&&e<m()(this.startDate).format("YYYY-MM-DD HH:mm:ss")&&this.$message.warning("结束时间不能早于开始时间"),this.endDate=e?t:null,this.rule.end_time=e},changeSelect:function(t){this.rule.rule_id=t,this.rule.rule_id&&this.getRuleDetail()},changeRuleSave:function(){this.rule.rule_save=(this.rule.rule_save+1)%2},getRuleDetail:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(){var e,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.axios.post("red-pack-rule/rule-info",{uid:localStorage.getItem("uid"),id:this.rule.rule_id});case 2:e=t.sent,i=e.data,0!=i.error?this.$message.error(i.error_msg):(this.rule1.rule_name=i.data.name,this.rule1.rule_type=i.data.type,this.rule1.rule_fixed_amount=i.data.fixed_amount,this.rule1.rule_min_random_amount=i.data.min_random_amount,this.rule1.rule_max_random_amount=i.data.max_random_amount,this.rule1.rule_pic_url=i.data.pic_url,this.rule1.rule_title=i.data.title,this.rule1.rule_des=i.data.des,this.rule1.rule_thanking=i.data.thanking);case 5:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),changeType2:function(t){this.rule2.rule_type=t.target.value},changeType1:function(t){this.rule1.rule_type=t.target.value},beforeUpload:function(t){var e="image/jpeg"===t.type||"image/png"===t.type;if(!e)return this.$message.error("封面仅支持jpg、jpeg、png格式！"),!1;var i=t.size/1024/1024<2;if(!i)return this.$message.error("图片大小不超过2M"),!1;this.uploadImage(t)},uploadImage:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(e){var i,a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.loading=!0,i=new FormData,i.append("uid",localStorage.getItem("uid")),i.append("fileInfo",e),t.next=6,this.axios.post("sub-user/upload-image",i);case 6:a=t.sent,n=a.data,0!=n.error?(this.$message.error(n.error_msg),this.loading=!1):(this.rule2.rule_pic_url=n.data.local_path,this.loading=!1);case 9:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),moment:m.a,getUserNum:function(t){for(var e=0,i=0;i<t.length;i++)"custom"==t[i].scopedSlots.title&&e++;return e},getPartyNum:function(t){for(var e=0,i=0;i<t.length;i++)"custom"!=t[i].scopedSlots.title&&e++;return e},getThreePartyIndex:function(t){for(var e=0,i=0,a=0;a<t.length;a++){if(i=a,!(e<2))return i;"custom"!=t[a].scopedSlots.title&&e++}return i},showDepartmentList:function(t,e,i){if(1==e){this.currentIndex=t,this.currentType=e;var a=[];this.specialTimeList[t].userList.map((function(t){a.push(t.id)})),this.chooseDepartmentNum=this.specialTimeList[t].userList.length,this.departmentDisabled=0,this.$refs.user.rightIdList=JSON.parse(JSON.stringify(a)),this.$refs.user.rightList=JSON.parse(JSON.stringify(this.specialTimeList[t].userList))}else if(2==e){this.currentIndex=t,this.currentType=e;var n=[];this.info.spare_employee.map((function(t){n.push(t.id)})),this.chooseDepartmentNum=this.info.spare_employee.length,this.departmentDisabled=1,this.$refs.user.rightIdList=JSON.parse(JSON.stringify(n)),this.$refs.user.rightList=JSON.parse(JSON.stringify(this.info.spare_employee))}else{this.currentType=0,this.currentIndex=t,this.timeIndex=i,this.currentType=e;var r=[];this.info.specialDateList[t].time[i].userList.map((function(t){r.push(t.id)})),this.chooseDepartmentNum=this.info.specialDateList[t].time[i].userList.length,this.departmentDisabled=0,this.$refs.user.rightIdList=JSON.parse(JSON.stringify(r)),this.$refs.user.rightList=JSON.parse(JSON.stringify(this.info.specialDateList[t].time[i].userList))}this.specialTimeVisible=!1,this.showModalDepartment=!0},clearDepartmentList:function(t,e){1==e?this.specialTimeList[t].userList=[]:0==e?this.specialTimeUserList=[]:2==e?this.info.spare_employee=[]:(this.checkedList=[],this.chooseNum=0),this.$refs.user.rightIdList=[],this.$refs.user.rightList=[]},modalVisibleChange3:function(t,e,i,a,n){var r=this;if("ok"==t)if(1==this.currentType)this.specialTimeList[this.currentIndex].userList=[],this.specialTimeList[this.currentIndex].party=[],i+a>0&&n.map((function(t){r.specialTimeList[r.currentIndex].userList.push(JSON.parse(JSON.stringify(t))),"custom"!=t.scopedSlots.title&&r.specialTimeList[r.currentIndex].party.push(t.ids)})),this.getUniqueUserList(),this.specialTimeVisible=!0;else if(2==this.currentType){this.info.spare_employee=[];for(var s=!1,o=0;o<n.length;o++)!0===n[o].isLeaf&&"custom"!=n[o].scopedSlots.title||(s=!0);if(!s)return this.$message.destroy(),this.$message.warning("备用员工不能为空部门"),this.showModalDepartment=!1,!1;i+a>0&&n.map((function(t){r.info.spare_employee.push(JSON.parse(JSON.stringify(t)))}))}else this.info.specialDateList[this.currentIndex].time[this.timeIndex].userList=[],this.info.specialDateList[this.currentIndex].time[this.timeIndex].party=[],i+a>0&&n.map((function(t){r.info.specialDateList[r.currentIndex].time[r.timeIndex].userList.push(JSON.parse(JSON.stringify(t))),"custom"!=t.scopedSlots.title&&r.info.specialDateList[r.currentIndex].time[r.timeIndex].party.push(t.ids)})),this.getUniqueUserList();else 1==this.currentType&&(this.specialTimeVisible=!0);this.showModalDepartment=!1},getUserList:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(){var e,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.axios.post("work-user/get-all-user",{suite_id:1,corp_id:this.corpId,is_all:1});case 2:e=t.sent,i=e.data,0!=i.error?(this.$message.error(i.error_msg),this.isLoading=!1):(this.user=i.data.info,this.isLoading=!1);case 5:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),getPartyList:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(){var e,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.axios.post("work-contact-way/get-party-list",{suite_id:1,corp_id:this.corpId});case 2:e=t.sent,i=e.data,0!=i.error?(this.isLoading=!1,this.$message.error(i.error_msg)):(this.isLoading=!1,this.party=i.data.party_list);case 5:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),selectStaffCallback:function(t,e,i,a){"ok"==t&&(-1==i||"undefined"==typeof a?this.info.spare_employee=e:(this.info.specialDateList[i].time[a].userList=e,this.getUniqueUserList()))},selectStaffCallback2:function(t,e,i){"ok"==t&&(this.specialTimeList[i].userList=e)},changeWelcome:function(t,e){t.textContent=e.text_content,t.textAreaValueHeader=e.text_content.replace(/{nickname}/g,'<span>&nbsp;<span contenteditable="false" class="ant-tag ant-tag-orange">客户名称</span>&nbsp;</span>').replace(/\n/g,"<br>"),t.editorFlag=!0},getCodeDetail:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(){var e,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this,t.next=3,this.axios.post("work-contact-way/get",{suite_id:1,corp_id:this.corpId,config_id:this.codeId[0],id:this.codeId[0]});case 3:e=t.sent,i=e.data,0!=i.error?(this.$message.destroy(),this.$message.error(i.error_msg),this.codeVisible=!1,this.codeLoading=!1):(this.changeContent(i),this.codeVisible=!1,this.codeLoading=!1,this.codeId=[],this.name="");case 6:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),changeContent:function(t){var e=this;if(t.data.contact_way.welcome_content){var i=t.data.contact_way.welcome_content;this.pushValue=1==i.status,this.changeWelcome(this,i)}var a=t.data.contact_way;a.user,a.department;if(a.remark||(a.remark=""),0==a.skip_verify&&2==a.verify_all_day){this.timeList=[];var n=!0,r=!1,s=void 0;try{for(var o,l=a.verify_date[Symbol.iterator]();!(n=(o=l.next()).done);n=!0){var c=o.value,d={startTime:null,endTime:null};d.startTime=m()(c.start_time,"HH:mm"),d.endTime=m()(c.end_time,"HH:mm"),this.timeList.push(JSON.parse(JSON.stringify(d)))}}catch(B){r=!0,s=B}finally{try{n||null==l.return||l.return()}finally{if(r)throw s}}}delete a.welcome_content,delete a.id,delete a.corp_id,delete a.is_del,delete a.qr_code,delete a.add_num,delete a.department,delete a.update_time,delete a.create_time,this.info=a;for(var p=0;p<this.info.specialDateList.length;p++){this.info.specialDateList[p]["specialDate"]=[m()(new Date,"YYYY-MM-DD"),m()(new Date,"YYYY-MM-DD")],this.info.specialDateList[p]["specialDate"][0]=m()(this.info.specialDateList[p].date[0],"YYYY-MM-DD"),this.info.specialDateList[p]["specialDate"][1]=m()(this.info.specialDateList[p].date[1],"YYYY-MM-DD");for(var u=0;u<this.info.specialDateList[p].time.length;u++)this.info.specialDateList[p].time[u]["startTime"]=m()(new Date,"HH:mm"),this.info.specialDateList[p].time[u]["endTime"]=m()(new Date,"HH:mm"),this.info.specialDateList[p].time[u]["startTime"]=m()(this.info.specialDateList[p].time[u]["start_time"],"HH:mm"),this.info.specialDateList[p].time[u]["endTime"]=m()(this.info.specialDateList[p].time[u]["end_time"],"HH:mm")}0==this.info.specialDateList.length&&(this.info.specialDateList=[{specialDate:[m()(new Date),m()(new Date)],date:[m()(new Date).format("YYYY-MM-DD"),m()(new Date).format("YYYY-MM-DD")],time:[{startTime:m()("00:00","HH:mm"),endTime:m()("00:00","HH:mm"),start_time:"00:00",end_time:"00:00",userList:[],party:[]}]}]);for(var h=["mon","tues","wednes","thurs","fri","satur","sun"],f=0;f<7;f++)for(var g=this.info.specialWeekList[0][h[f]],_=0;_<g.length;_++)g[_]["startTime"]=m()(g[_]["start_time"],"HH:mm"),g[_]["endTime"]=m()(g[_]["end_time"],"HH:mm");if(this.tag_arr=[],a.tag_ids.length>0&&a.tag_ids.map((function(t){e.tag_arr.push(String(t))})),this.isShowTag=!0,this.is_welcome_week=a.is_welcome_week,2==a.is_welcome_week){this.welcome_week_list=[];var b=!0,y=!1,x=void 0;try{for(var v,w=a.welcome_week_list[Symbol.iterator]();!(b=(v=w.next()).done);b=!0){var k=v.value,L={};L.date=JSON.parse(JSON.stringify(k.date));var S=[],T=!0,N=!1,D=void 0;try{for(var C,$=k.time[Symbol.iterator]();!(T=(C=$.next()).done);T=!0){var I=C.value,H={startTime:null,endTime:null,content:{}};H.startTime=m()(I.start_time,"HH:mm"),H.endTime=m()(I.end_time,"HH:mm"),this.changeWelcome(H.content,I.content),S.push(JSON.parse(JSON.stringify(H)))}}catch(B){N=!0,D=B}finally{try{T||null==$.return||$.return()}finally{if(N)throw D}}L.time=JSON.parse(JSON.stringify(S)),this.welcome_week_list.push(JSON.parse(JSON.stringify(L)))}}catch(B){y=!0,x=B}finally{try{b||null==w.return||w.return()}finally{if(y)throw x}}}if(this.weekKey++,this.is_welcome_date=a.is_welcome_date,2==a.is_welcome_date){this.welcome_date_list=[];var M=!0,O=!1,E=void 0;try{for(var Y,V=a.welcome_date_list[Symbol.iterator]();!(M=(Y=V.next()).done);M=!0){var A=Y.value,F={};F.date=JSON.parse(JSON.stringify([m()(A.date[0],"YYYY-MM-DD"),m()(A.date[1],"YYYY-MM-DD")]));var j=[],P=!0,R=!1,W=void 0;try{for(var J,z=A.time[Symbol.iterator]();!(P=(J=z.next()).done);P=!0){var U=J.value,K={startTime:null,endTime:null,content:{}};K.startTime=m()(U.start_time,"HH:mm"),K.endTime=m()(U.end_time,"HH:mm"),this.changeWelcome(K.content,U.content),j.push(JSON.parse(JSON.stringify(K)))}}catch(B){R=!0,W=B}finally{try{P||null==z.return||z.return()}finally{if(R)throw W}}F.time=JSON.parse(JSON.stringify(j)),this.welcome_date_list.push(JSON.parse(JSON.stringify(F)))}}catch(B){O=!0,E=B}finally{try{M||null==V.return||V.return()}finally{if(O)throw E}}}this.dateKey++,this.getUniqueUserList()},setUser:function(t){var e=this,i=[],a=[],n=[],r={avatar:"",disabled:!1,id:"",key:"",scopedSlots:{title:"custom"},title:""};t.length>0&&t.map((function(t){if(r.avatar=t.avatar,r.id=t.id,r.title=t.name,t.user_key.toString().indexOf(",")>0){var e=t.user_key.split(",");i=i.concat(e),r.key=e[0],a.push(JSON.parse(JSON.stringify(r))),r.key=t.user_key,n.push(JSON.parse(JSON.stringify(r)))}else i.push(t.user_key),r.key=t.user_key,a.push(JSON.parse(JSON.stringify(r))),n.push(JSON.parse(JSON.stringify(r)))})),e.$refs.user.checkedKeys=i,e.$refs.user.checkedKeysArr=i,e.$refs.user.checkedNodes=i,e.$refs.user.staffListArr=a,e.chooseDepartmentNum=a.length,e.$refs.user.keyList=n},next:function(){if(this.checkedOut(this.current)&&(this.current++,1==this.current)){var t=this,e=[];this.$nextTick((function(){2==t.info.is_limit&&(t.$refs.staffSelect3.userId=t.info.spare_employee?t.info.spare_employee:[]),t.info.specialDateList.map((function(t,i){t.time.map((function(t,i){e.push(t.userList)}))})),t.$nextTick((function(){e.map((function(e,i){t.$refs.staffSelect&&(t.$refs.staffSelect[i].userId=e)}))}))}))}},prev:function(){if(this.current--,1==this.current){var t=this,e=[];this.$nextTick((function(){2==t.info.is_limit&&(t.$refs.staffSelect3.userId=t.info.spare_employee?t.info.spare_employee:[]),t.info.specialDateList.map((function(t,i){t.time.map((function(t,i){e.push(t.userList)}))})),t.$nextTick((function(){e.map((function(e,i){t.$refs.staffSelect&&(t.$refs.staffSelect[i].userId=e)}))}))}))}},checkedOut:function(t){var e=this,i=!1;JSON.parse(JSON.stringify(this.info));if(0==t){if(""==this.rule.name.trim())return this.$message.destroy(),this.$message.warning("请填写红包渠道活码名称！"),this.current=0,!1;if(2==this.rule.time_type&&(""==this.rule.end_time||""==this.rule.start_time))return this.$message.destroy(),this.$message.warning("请检查活动时间！"),this.current=0,!1;if(2==this.rule.time_type&&this.rule.end_time<=this.rule.start_time)return this.$message.destroy(),this.$message.warning("开始时间需早于结束时间！"),this.current=0,!1;if(2==this.rule.time_type&&!this.rule.reserve_day)return this.$message.destroy(),this.$message.warning("请填写活码有效期！"),this.current=0,!1;if(1==this.rule.redrule_type){if(!this.rule.rule_id)return this.$message.destroy(),this.$message.warning("请选择红包规则！"),this.current=0,!1;if(1==this.rule1.rule_type&&this.rule.redpacket_amount<this.rule1.rule_fixed_amount)return this.$message.destroy(),this.$message.warning("投放金额不能小于单个红包金额"),!1;if(2==this.rule1.rule_type&&this.rule.redpacket_amount<=this.rule1.rule_min_random_amount)return this.$message.destroy(),this.$message.warning("投放金额不能小于单个红包金额"),!1}else if(2==this.rule.redrule_type){if(""==this.rule2.rule_name.trim())return this.$message.destroy(),this.$message.warning("请输入红包规则名称"),!1;if(1==this.rule2.rule_type){if(!this.rule2.rule_fixed_amount)return this.$message.destroy(),this.$message.warning("请输入红包金额"),!1;if(this.rule.redpacket_amount<this.rule2.rule_fixed_amount)return this.$message.destroy(),this.$message.warning("投放金额不能小于单个红包金额"),!1}if(2==this.rule2.rule_type){if(!this.rule2.rule_min_random_amount||!this.rule2.rule_max_random_amount)return this.$message.destroy(),this.$message.warning("请输入红包金额"),!1;if(this.rule2.rule_min_random_amount>=this.rule2.rule_max_random_amount)return this.$message.destroy(),this.$message.warning("随机金额最大值必须大于最小值"),!1;if(this.rule.redpacket_amount<this.rule2.rule_min_random_amount)return this.$message.destroy(),this.$message.warning("投放金额不能小于单个红包金额"),!1}if(""==this.rule2.rule_title.trim())return this.$message.destroy(),this.$message.warning("请填写标题"),!1}if(!this.rule.redpacket_amount)return this.$message.destroy(),this.$message.warning("请输入投放金额"),!1;if(1!=this.redpacket_status&&this.redpacket_amount>this.rule.redpacket_amount)return this.$message.destroy(),this.$message.warning("投放金额只可增加，不可减少！"),!1}else if(2==t){if(0==this.info.skip_verify&&2==this.info.verify_all_day){for(var a=0;a<this.timeList.length;a++){var n=this.timeList[a];if(null==n.startTime||null==n.endTime)return e.$message.destroy(),e.$message.warning("请补全自动添加好友第"+(a+1)+"个时间段！"),e.current=1,i=!0,!1;var r=m()(n.startTime).format("HH:mm"),s=m()(n.endTime).format("HH:mm");if(r>=s&&"00:00"!=s)return e.$message.destroy(),e.$message.warning("自动添加好友第"+(a+1)+"个时间段开始时间需早于结束时间！"),e.current=1,i=!0,!1;if(i)return!1;for(var o=a+1;o<e.timeList.length;o++)if(o>a){var l=m()(e.timeList[o].startTime).format("HH:mm"),c=m()(e.timeList[o].endTime).format("HH:mm");if(r>=l&&r<c||s>l&&s<=c||r>=l&&"00:00"==c||s>l&&"00:00"==c||l>=r&&l<s||c>r&&s>=c||l>=r&&"00:00"==s||c>r&&"00:00"==s)return e.$message.destroy(),e.$message.warning("自动加好友的第"+(a+1)+"个时间段与第"+(o+1)+"个时间段存在冲突，请修改！"),i=!0,e.current=1,!1}if(i)return!1}if(i)return!1}}else if(1==t){var d=this.info.specialWeekList[0];if(0==d.mon.length||0==d.tues.length||0==d.wednes.length||0==d.thurs.length||0==d.fri.length||0==d.satur.length||0==d.sun.length)return e.$message.destroy(),e.$message.warning("周成员缺失！"),e.current=2,!1;for(var p=["mon","tues","wednes","thurs","fri","satur","sun"],u=0;u<7;u++)for(var h=0;h<this.info.specialWeekList[0][p[u]].length;h++){var f=this.info.specialWeekList[0][p[u]][h];if(2==this.info.type&&0==f.userList.length&&0==f.party.length)return e.$message.destroy(),this.$message.warning("请选择成员或企业微信部门"),this.addSpecialTimeLoading=!1,e.current=2,!1;if(2==this.info.type&&1==f.userList.length&&1==f.userList[0].is_del)return e.$message.destroy(),this.$message.warning("当前成员不可用，请修改"),this.addSpecialTimeLoading=!1,e.current=2,!1;if(2==this.info.type&&f.userList.length>0){var g=!1;if(f.userList.map((function(t){if(1!=t.is_del)return g=!0,!1})),!g)return e.$message.destroy(),this.$message.warning("当前成员不可用，请修改"),this.addSpecialTimeLoading=!1,e.current=2,!1}if(1==this.info.type&&0==f.userList.length)return e.$message.destroy(),this.$message.warning("请选择成员"),this.addSpecialTimeLoading=!1,e.current=2,!1;if(1==this.info.type&&"number"!=typeof f.userList)return e.$message.destroy(),this.$message.warning("当前成员不可用，请修改"),this.addSpecialTimeLoading=!1,e.current=2,!1}for(var _=0;_<this.info.specialDateList.length;_++){for(var b=_+1;b<this.info.specialDateList.length;b++){var y=this.info.specialDateList;if(y[b].date[0]>=y[_].date[0]&&y[b].date[0]<=y[_].date[1]||y[b].date[1]>=y[_].date[0]&&y[b].date[1]<=y[_].date[1])return e.$message.destroy(),this.$message.warning("特殊时期"+(_+1)+"和特殊时期"+(b+1)+"存在冲突，请修改！"),i=!0,this.current=2,!1}for(var x=0;x<this.info.specialDateList[_].time.length;x++){if(this.info.specialDateList[_].time[x].start_time>=this.info.specialDateList[_].time[x].end_time&&"00:00"!=this.info.specialDateList[_].time[x].end_time)return e.$message.destroy(),this.$message.warning("特殊时期"+(_+1)+"的第"+(x+1)+"个时间段开始时间需早于结束时间，请修改！"),i=!0,this.current=2,!1;if(2==this.info.type&&1==this.info.specialTime&&(0==this.info.specialDateList[_].time[x].userList.length||1==this.info.specialDateList[_].time[x].userList.length&&1==this.info.specialDateList[_].time[x].userList[0].is_del)&&0==this.info.specialDateList[_].time[x].party.length)return e.$message.destroy(),this.$message.warning("特殊时期"+(_+1)+"的第"+(x+1)+"个时间段请选择企业成员或企业部门！"),i=!0,this.current=2,!1;if(1==this.info.type&&1==this.info.specialTime&&(0==this.info.specialDateList[_].time[x].userList.length||1==this.info.specialDateList[_].time[x].is_del))return e.$message.destroy(),this.$message.warning("特殊时期"+(_+1)+"的第"+(x+1)+"个时间段请选择企业成员！"),i=!0,this.current=2,!1;for(var v=x+1;v<this.info.specialDateList[_].time.length;v++){if("00:00"==this.info.specialDateList[_].time[v].start_time&&"00:00"==this.info.specialDateList[_].time[v].end_time)return e.$message.destroy(),this.$message.warning("第"+(_+1)+"个的特殊时期第"+(v+1)+"个时间段不能与默认时间段相同，请修改！"),i=!0,this.current=2,!1;if(0!=x){var w=this.info.specialDateList[_].time[x].start_time,k=this.info.specialDateList[_].time[x].end_time,L=this.info.specialDateList[_].time[v].start_time,S=this.info.specialDateList[_].time[v].end_time;if(w>=L&&w<S||k>L&&k<=S||w>=L&&"00:00"==S||k>L&&"00:00"==S||L>=w&&L<k||S>w&&k>=S||L>=w&&"00:00"==k||S>w&&"00:00"==k)return e.$message.destroy(),this.$message.warning("特殊时期"+(_+1)+"的第"+(x+1)+"个时间段与第"+(v+1)+"个时间段存在冲突，请修改！"),i=!0,this.current=2,!1}}if(i)return!1}if(i)return!1}if(i)return!1;if(2==this.info.is_limit){for(var T=0;T<this.info.user_limit.length;T++)if(!this.info.user_limit[T].limit)return e.$message.destroy(),this.$message.warning("员工上限不可为空！"),this.current=2,i=!0,!1;if(2==this.info.type&&0==this.info.spare_employee.length)return e.$message.destroy(),this.$message.warning("请选择备用员工！"),this.current=2,i=!0,!1;if(1==this.info.type&&"number"!=typeof this.info.spare_employee)return e.$message.destroy(),this.$message.warning("请选择备用员工！"),this.current=2,i=!0,!1;if(i)return!1}}else if(3==t&&this.pushValue){if(""==this.textContent.trim().replace(/\n/g,""))return e.$message.destroy(),this.$message.warning("默认欢迎语内容不能为空！"),this.current=3,!1;if(2==this.info.is_welcome_week){for(var N=0;N<this.welcome_week_list.length;N++){var D=this.welcome_week_list[N];if(0==D.date.length)return e.$message.destroy(),e.$message.warning("请填写周期欢迎语"+(N+1)+"的周期！"),i=!0,e.current=3,!1;for(var C=0;C<D.time.length;C++){var $=D.time[C];if(null!=$.startTime&&null!=$.endTime||(e.$message.destroy(),e.$message.warning("请填写周期欢迎语"+(N+1)+"时间段"+(C+1)+"！"),i=!0,e.current=3),i)return!1;if(m()($.startTime).format("HH:mm")>=m()($.endTime).format("HH:mm")&&"00:00"!=m()($.endTime).format("HH:mm"))return e.$message.destroy(),e.$message.warning("周期欢迎语"+(N+1)+"的时间段"+(C+1)+"的开始时间需早于结束时间，请修改！"),i=!0,e.current=3,!1;for(var I=C+1;I<D.time.length;I++){var H=m()(D.time[I].startTime).format("HH:mm"),M=m()($.startTime).format("HH:mm"),O=m()(D.time[I].endTime).format("HH:mm"),E=m()($.endTime).format("HH:mm");if(H>=M&&H<E||O>M&&O<=E||H>=M&&"00:00"==E||O>M&&"00:00"==E||M>=H&&M<O||E>H&&O>=E||O==E&&H==M)return e.$message.destroy(),e.$message.warning("周期欢迎语"+(N+1)+"的时间段"+(C+1)+"个和时间段"+(I+1)+"存在冲突！"),i=!0,e.current=3,!1}if(i)return!1;$.content.textContent.trim().replace(/\n/g,"");if(""==$.content.textContent.trim().replace(/\n/g,"")&&(e.$message.destroy(),e.$message.warning("周期欢迎语"+(N+1)+"的时间段"+(C+1)+"欢迎语内容不能为空！"),i=!0,e.current=3),i)return!1}if(i)return!1}if(i)return!1}if(2==this.info.is_welcome_date){for(var Y=0;Y<this.welcome_date_list.length;Y++){var V=this.welcome_date_list[Y];if(0==V.date.length)return e.$message.destroy(),e.$message.warning("请填写特殊时期欢迎语"+(Y+1)+"的时期！"),i=!0,e.current=3,!1}if(i)return!1;for(var A=0;A<this.welcome_date_list.length;A++){for(var F=A+1;F<e.welcome_date_list.length;F++){var j=m()(e.welcome_date_list[F].date[0]).format("YYYY-MM-DD"),P=m()(e.welcome_date_list[A].date[0]).format("YYYY-MM-DD"),R=m()(e.welcome_date_list[F].date[1]).format("YYYY-MM-DD"),W=m()(e.welcome_date_list[A].date[1]).format("YYYY-MM-DD");if(j>=P&&j<W||R>P&&R<=W||j>=P&&"00:00"==W||R>P&&"00:00"==W||P>=j&&P<R||W>j&&endTime>=W||R==W&&j==P)return e.$message.destroy(),e.$message.warning("特殊时期欢迎语"+(A+1)+"和特殊时期欢迎语"+(F+1)+"日期存在冲突！"),i=!0,e.current=3,!1}if(i)return!1;for(var J=this.welcome_date_list[A],z=0;z<J.time.length;z++){var U=J.time[z];if(null==U.startTime||null==U.endTime)return e.$message.destroy(),e.$message.warning("请填写特殊时期欢迎语"+(A+1)+"时间段"+(z+1)+"！"),i=!0,e.current=3,!1;if(m()(U.startTime).format("HH:mm")>=m()(U.endTime).format("HH:mm")&&"00:00"!=m()(U.endTime).format("HH:mm"))return e.$message.destroy(),e.$message.warning("特殊时期欢迎语"+(A+1)+"的时间段"+(z+1)+"的开始时间需早于结束时间，请修改！"),i=!0,e.current=3,!1;if(""==U.content.textContent.trim().replace(/\n/g,""))return e.$message.destroy(),e.$message.warning("特殊时期欢迎语"+(A+1)+"的时间段"+(z+1)+"欢迎语内容不能为空！"),i=!0,e.current=3,!1;for(var K=z+1;K<J.time.length;K++){var B=m()(J.time[K].startTime).format("HH:mm"),q=m()(U.startTime).format("HH:mm"),G=m()(J.time[K].endTime).format("HH:mm"),X=m()(U.endTime).format("HH:mm");if(B>=q&&B<X||G>q&&G<=X||B>=q&&"00:00"==X||G>q&&"00:00"==X||q>=B&&q<G||X>B&&G>=X||G==X&&B==q)return e.$message.destroy(),e.$message.warning("特殊时期欢迎语"+(A+1)+"的时间段"+(z+1)+"个和时间段"+(K+1)+"存在冲突！"),i=!0,e.current=3,!1}if(i)return!1}if(i)return!1}if(i)return!1}}return!0},saveWay:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(){var e,i,a,n,r,s,o,l;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(this.isLoading=!0,this.createDisabled=!0,this.checkedOut(0)&&this.checkedOut(1)&&this.checkedOut(2)&&this.checkedOut(3)){t.next=6;break}return this.isLoading=!1,this.createDisabled=!1,t.abrupt("return",!1);case 6:return e=JSON.parse(JSON.stringify(this.info)),i="work-contact-way-redpacket/add-redpacket",e.suite_id=1,e.corp_id=this.corpId,e.tag_ids=this.tag_arr.join(),"undefined"!=typeof this.urlId&&(i="work-contact-way-redpacket/update-redpacket",e.id=this.urlId),e.uid=localStorage.getItem("uid"),e.status=this.pushValue?1:0,e.text_content=this.textContent,a=[],this.timeList.forEach((function(t){a.push({start_time:m()(t.startTime).format("HH:mm"),end_time:m()(t.endTime).format("HH:mm")})})),e.verify_date=a,n=[],2==e.is_welcome_week&&this.welcome_week_list.forEach((function(t){var e=[];t.time.forEach((function(t){e.push({start_time:m()(t.startTime).format("HH:mm"),end_time:m()(t.endTime).format("HH:mm"),content:{add_type:0,attachment_id:"",groupId:"",link_attachment_id:"",link_desc:"",link_title:"",link_url:"",materialSync:0,media_id:"",mini_appid:"",mini_page:"",mini_pic_media_id:"",mini_title:"",text_content:t.content.textContent}})})),n.push({date:JSON.parse(JSON.stringify(t.date)),time:JSON.parse(JSON.stringify(e))})})),e.welcome_week_list=n,r=[],2==e.is_welcome_date&&this.welcome_date_list.forEach((function(t){var e=[m()(t.date[0]).format("YYYY-MM-DD"),m()(t.date[1]).format("YYYY-MM-DD")],i=[];t.time.forEach((function(t){i.push({start_time:m()(t.startTime).format("HH:mm"),end_time:m()(t.endTime).format("HH:mm"),content:{add_type:0,attachment_id:"",groupId:"",link_attachment_id:"",link_desc:"",link_title:"",link_url:"",materialSync:0,media_id:"",mini_appid:"",mini_page:"",mini_pic_media_id:"",mini_title:"",text_content:t.content.textContent||""}})})),r.push({date:JSON.parse(JSON.stringify(e)),time:JSON.parse(JSON.stringify(i))})})),s={name:this.rule.name,time_type:this.rule.time_type,start_time:this.rule.start_time,end_time:this.rule.end_time,reserve_day:this.rule.reserve_day,redrule_type:this.rule.redrule_type,rule_id:this.rule.rule_id,rule_save:this.rule.rule_save,redpacket_amount:this.rule.redpacket_amount},1==this.rule.redrule_type?s=Object.assign(s,this.rule1):(s=Object.assign(s,this.rule2),s.rule_id=0),s.rule_thanking=s.rule_thanking||"恭喜发财，大吉大利",e.welcome_date_list=r,e=Object.assign(e,s),e.agent_id=this.agentId,t.next=31,this.axios.post(i,e);case 31:o=t.sent,l=o.data,0!=l.error?(this.$message.error(l.error_msg),this.createDisabled=!1,this.isLoading=!1):(this.$message.success("操作成功"),localStorage.removeItem("notAllow"),localStorage.removeItem("backUrl"),this.createDisabled=!1,"undefined"!=typeof this.urlId?(this.isLoading=!1,this.$router.push("/redForNew/list?isRefresh=1")):(this.isLoading=!1,this.$router.push("/redForNew/list?")));case 34:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),add:function(){this.$route.query.id||(this.showModal2=!0,this.isLoading=!0)},modalVisibleChange:function(t,e,i){"ok"==t&&this.corpId!=e?(this.corpId=e,this.isLoading=!1,this.showModal2=!1,this.info.user=[],this.info.party=[],this.info.tag_ids=[],this.resetInfoSpecialWeekAndDate(),this.getUserList(),this.getPartyList(),this.chooseNum=0,this.$refs.user.staffList=[],this.$refs.user.keyList=[]):(this.isLoading=!1,this.showModal2=!1)},showChannelCode:function(){this.codeId=[],this.name="",this.codeList=[],this.getCodeList(),this.codeVisible=!0},onSelectChange:function(t,e){this.codeId=[],this.codeId.push(t[0])},handleCode:function(){if(this.codeLoading=!0,0==this.codeId.length)return this.$message.destroy(),this.$message.warning("请选择活码"),this.codeLoading=!1,!1;this.getCodeDetail(this.codeList[0])},changePage:function(t,e){this.getCodeList(t)},showSizeChange:function(t,e){this.getCodeList(1,e)},handleCancelCode:function(){this.codeVisible=!1,this.codeId=[],this.name=""},getCodeList:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(){var e,i,a,n,r=arguments;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=r.length>0&&void 0!==r[0]?r[0]:1,i=r.length>1&&void 0!==r[1]?r[1]:this.pageSize,this.isTableLoading=!0,t.next=5,this.axios.post("work-contact-way/get-list",{corp_id:this.corpId,page:e,pageSize:i,suite_id:1,title:this.name,type:0,way_group_id:[]});case 5:a=t.sent,n=a.data,0!=n.error?(this.isLoading=!1,this.$message.error(n.error_msg)):(this.isTableLoading=!1,this.count=parseInt(n.data.count),this.codeList=n.data.contact_way_list,this.page=e,this.pageSize=i);case 8:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),clear:function(){this.name="",this.getCodeList(1,15)},searchName:function(){this.getCodeList()},changeInfoType:function(){this.info.is_limit=1,this.info.user_limit=[],this.info.spare_employee=[],this.resetInfoSpecialWeekAndDate()},changeSkipVerify:function(){this.info.skip_verify=0==this.info.skip_verify?1:0},changeTimeFormat:function(t){return m()(t).format("HH:mm")},changeSkipStartTime:function(t){for(var e=this,i=!1,a=0;a<t;a++)if(t>a&&(null==this.timeList[a].startTime||null==this.timeList[a].endTime))return this.$message.destroy(),this.$message.warning("请填写上面的时间"),this.$nextTick((function(){e.timeList[t].startTime=null})),i=!0,!1;if(i)return!1;for(var n=0;n<this.timeList.length;n++){var r=this.changeTimeFormat(this.timeList[t].startTime),s=this.timeList[t].endTime?this.changeTimeFormat(this.timeList[t].endTime):"";if(t!=n){var o=this.changeTimeFormat(this.timeList[n].startTime),l=this.changeTimeFormat(this.timeList[n].endTime);if(""!=s){if(r>=o&&r<l||s>o&&s<=l||r>=o&&"00:00"==l||s>o&&"00:00"==l||o>=r&&o<s||l>r&&s>=l||o>=r&&"00:00"==s||l>r&&"00:00"==s)return this.$message.destroy(),this.$message.warning("当前开始时间在第"+(n+1)+"个时间段内，会造成冲突，请修改"),!1}else if(r>o&&r<l||r>o&&"00:00"==l)return this.$message.destroy(),this.$message.warning("当前结束时间在第"+(n+1)+"个时间段内，会造成冲突，请修改"),!1}if(r>=s&&null!=this.timeList[t].endTime&&"00:00"!=m()(this.timeList[t].endTime).format("HH:mm"))return this.$message.destroy(),this.$message.warning("开始时间需早于结束时间"),!1}},changeSkipEndTime:function(t){for(var e=this,i=!1,a=0;a<t;a++)if(t>a&&(null==this.timeList[a].startTime||null==this.timeList[a].endTime))return this.$message.destroy(),this.$message.warning("请填写上面的时间"),this.$nextTick((function(){e.timeList[t].startTime=null})),i=!0,!1;if(i)return!1;for(var n=0;n<this.timeList.length;n++){var r=this.timeList[t].startTime?this.changeTimeFormat(this.timeList[t].startTime):"",s=this.changeTimeFormat(this.timeList[t].endTime);if(t!=n){var o=this.changeTimeFormat(this.timeList[n].startTime),l=this.changeTimeFormat(this.timeList[n].endTime);if(""!=r){if(r>=o&&r<l||s>o&&s<=l||r>=o&&"00:00"==l||s>o&&"00:00"==l||o>=r&&o<s||l>r&&s>=l||o>=r&&"00:00"==s||l>r&&"00:00"==s)return this.$message.destroy(),this.$message.warning("当前结束时间在第"+(n+1)+"个时间段内，会造成冲突，请修改"),!1}else if(s>o&&s<l||s>o&&"00:00"==l)return this.$message.destroy(),this.$message.warning("当前结束时间在第"+(n+1)+"个时间段内，会造成冲突，请修改"),!1}if(r>=s&&null!=this.timeList[t].startTime&&"00:00"!=m()(this.timeList[t].endTime).format("HH:mm"))return this.$message.destroy(),this.$message.warning("开始时间需早于结束时间"),!1}},addSkipTime:function(){this.timeList.push({startTime:null,endTime:null})},deleteSkipTime:function(t){this.timeList.splice(t,1)},resetInfoSpecialWeekAndDate:function(){this.info.specialWeekList=[{mon:[],tues:[],wednes:[],thurs:[],fri:[],satur:[],sun:[]}],this.info.specialDateList=[{specialDate:[m()(new Date),m()(new Date)],date:[m()(new Date).format("YYYY-MM-DD"),m()(new Date).format("YYYY-MM-DD")],time:[{startTime:m()("00:00","HH:mm"),endTime:m()("00:00","HH:mm"),start_time:"00:00",end_time:"00:00",userList:[],party:[]}]}]},changeSpecilTime:function(){this.info.specialTime=(this.info.specialTime+1)%2,this.getUniqueUserList()},addSpecialTime:function(){this.specialTimeTitle="添加企业成员",this.specialTimeVisible=!0;var t=this;t.$nextTick((function(){t.$refs.staffSelect2.userId=[]}))},editSpecialTime:function(t){if(this.specialTimeTitle="编辑企业成员",this.specialTimeList=JSON.parse(JSON.stringify(this.info.specialWeekList[0][t])),this.specialTimeList.map((function(t){t.startTime=m()(t.start_time,"HH:mm"),t.endTime=m()(t.end_time,"HH:mm")})),this.weekChecked[this.weekArr[t]]=!0,this.weekDayKey.push(t),this.specialTimeVisible=!0,1==this.info.type){var e=this;e.$nextTick((function(){e.specialTimeList.map((function(t,i){e.$refs.staffSelect2[i].userId=t.userList}))}))}},handleSpecialTime:function(){if(this.addSpecialTimeLoading=!0,0==this.weekDayKey.length)return this.$message.warning("请选择适用周期"),this.addSpecialTimeLoading=!1,!1;var t=!1,e=!0,i=!1,a=void 0;try{for(var n,r=this.specialTimeList[Symbol.iterator]();!(e=(n=r.next()).done);e=!0){var s=n.value;if(console.log(JSON.stringify(s)),2==this.info.type&&0==s.userList.length&&0==s.party.length)return this.$message.warning("请选择成员或企业微信部门"),this.addSpecialTimeLoading=!1,t=!0,!1;if(2==this.info.type&&1==s.userList.length&&1==s.userList[0].is_del)return this.$message.warning("当前成员不可用，请修改"),this.addSpecialTimeLoading=!1,t=!0,!1;if(2==this.info.type&&s.userList.length>0){var o=!1;if(s.userList.map((function(t){if(1!=t.is_del)return o=!0,!1})),!o)return this.$message.warning("当前成员不可用，请修改"),this.addSpecialTimeLoading=!1,t=!0,!1}if(1==this.info.type&&0==s.userList.length)return this.$message.warning("请选择成员"),this.addSpecialTimeLoading=!1,t=!0,!1;if(1==this.info.type&&"number"!=typeof s.userList)return this.$message.warning("当前成员不可用，请修改"),this.addSpecialTimeLoading=!1,t=!0,!1}}catch(v){i=!0,a=v}finally{try{e||null==r.return||r.return()}finally{if(i)throw a}}if(t)return!1;for(var l=1;l<this.specialTimeList.length;l++){if(this.specialTimeList[l].start_time>=this.specialTimeList[l].end_time&&"00:00"!=this.specialTimeList[l].end_time)return this.$message.warning("第"+(l+1)+"个时间段开始时间需早于结束时间，请修改"),t=!0,this.addSpecialTimeLoading=!1,!1;if("00:00"==this.specialTimeList[l].start_time&&"00:00"==this.specialTimeList[l].end_time)return this.$message.warning("第"+(l+1)+"个时间段不能与默认时间段相同，请修改"),t=!0,this.addSpecialTimeLoading=!1,!1;for(var c=l+1;c<this.specialTimeList.length;c++){var d=this.specialTimeList[l].start_time,p=this.specialTimeList[l].end_time,u=this.specialTimeList[c].start_time,h=this.specialTimeList[c].end_time;if(d>=u&&d<h||p>u&&p<=h||d>=u&&"00:00"==h||p>u&&"00:00"==h||u>=d&&u<p||h>d&&p>=h||u>=d&&"00:00"==p||h>d&&"00:00"==p)return this.$message.warning("第"+(l+1)+"个时间段与第"+(c+1)+"个时间段存在冲突，请修改"),t=!0,this.addSpecialTimeLoading=!1,!1}}if(t)return!1;var f=!0,g=!1,_=void 0;try{for(var b,y=this.weekDayKey[Symbol.iterator]();!(f=(b=y.next()).done);f=!0){var x=b.value;this.info.specialWeekList[0][x]=[],this.info.specialWeekList[0][x]=this.specialTimeList.concat(this.info.specialWeekList[0][x])}}catch(v){g=!0,_=v}finally{try{f||null==y.return||y.return()}finally{if(g)throw _}}this.getUniqueUserList(),this.$forceUpdate(),this.specialTimeVisible=!1,this.addSpecialTimeLoading=!1,this.weekDayKey=[],this.weekChecked=new Array(7).fill(!1),this.specialTimeUserList=[],this.specialTimeList=[{startTime:m()("00:00","HH:mm"),endTime:m()("00:00","HH:mm"),start_time:"00:00",end_time:"00:00",userList:[],party:[]}]},handleCancelSpecialTime:function(){this.specialTimeVisible=!1,this.weekDayKey=[],this.weekChecked=new Array(7).fill(!1),this.specialTimeUserList=[],this.specialTimeList=[{startTime:m()("00:00","HH:mm"),endTime:m()("00:00","HH:mm"),start_time:"00:00",end_time:"00:00",userList:[],party:[]}]},addTime:function(t){var e={start_time:"00:00",end_time:"00:00",startTime:m()("00:00","HH:mm"),endTime:m()("00:00","HH:mm"),userList:[],party:[]};this.specialTimeList.splice(t+1,0,e)},deleteTime:function(t){this.specialTimeList.splice(t,1)},changeStartTime:function(t,e){this.specialTimeList[e].startTime=t,this.specialTimeList[e].start_time=m()(this.specialTimeList[e].startTime).format("HH:mm"),this.specialTimeList[e].start_time>=this.specialTimeList[e].end_time&&"00:00"!=this.specialTimeList[e].end_time&&this.$message.warning("开始时间需早于结束时间")},changeEndTime:function(t,e){this.specialTimeList[e].endTime=t,this.specialTimeList[e].end_time=m()(this.specialTimeList[e].endTime).format("HH:mm"),this.specialTimeList[e].start_time>=this.specialTimeList[e].end_time&&"00:00"!=this.specialTimeList[e].end_time&&this.$message.warning("开始时间需早于结束时间")},changeWeekDay:function(t){Array.prototype.indexOf=function(t){for(var e=0;e<this.length;e++)if(this[e]==t)return e;return-1},Array.prototype.remove=function(t){var e=this.indexOf(t);e>-1&&this.splice(e,1)},-1!=this.weekDayKey.indexOf(t)?this.weekDayKey.remove(t):this.weekDayKey.push(t)},disabledDateDay:function(t){return t.valueOf()<(new Date).getTime()-864e5},addSpecialDate:function(t){var e={specialDate:[m()(new Date),m()(new Date)],date:[m()(new Date).format("YYYY-MM-DD"),m()(new Date).format("YYYY-MM-DD")],time:[{startTime:m()("00:00","HH:mm"),endTime:m()("00:00","HH:mm"),start_time:"00:00",end_time:"00:00",userList:[],party:[]}]};this.info.specialDateList.splice(t+1,0,e)},deleteSpecialDate:function(t){this.info.specialDateList.splice(t,1),this.changeUser()},changeSpecialDate:function(t,e){t&&t.length>1&&(this.info.specialDateList[e].specialDate=t,this.info.specialDateList[e].date=[m()(t[0]).format("YYYY-MM-DD"),m()(t[1]).format("YYYY-MM-DD")],this.$forceUpdate())},changeSpecialStartTime:function(t,e,i){this.info.specialDateList[e].time[i].startTime=t,this.info.specialDateList[e].time[i].start_time=t.format("HH:mm"),this.info.specialDateList[e].time[i].start_time>=this.info.specialDateList[e].time[i].end_time&&"00:00"!=this.info.specialDateList[e].time[i].end_time&&this.$message.warning("开始时间需早于结束时间"),this.$forceUpdate()},changeSpecialEndTime:function(t,e,i){this.info.specialDateList[e].time[i].endTime=m()(t._d,"HH:mm"),this.info.specialDateList[e].time[i].end_time=t.format("HH:mm"),this.info.specialDateList[e].time[i].start_time>=this.info.specialDateList[e].time[i].end_time&&"00:00"!=this.info.specialDateList[e].time[i].end_time&&this.$message.warning("开始时间需早于结束时间"),this.$forceUpdate()},addSpecialDateTimeList:function(t,e){var i={startTime:m()("00:00","HH:mm"),endTime:m()("00:00","HH:mm"),start_time:"00:00",end_time:"00:00",userList:[],party:[]};this.info.specialDateList[t].time.splice(e+1,0,i)},deleteSpecialDateTimeList:function(t,e){this.info.specialDateList[t].time.splice(e,1),this.changeUser(),this.getUniqueUserList()},getUniqueUserList:function(){for(var t=[],e=["mon","tues","wednes","thurs","fri","satur","sun"],i=0,a=e;i<a.length;i++){var n=a[i],r=!0,s=!1,o=void 0;try{for(var l,c=this.info.specialWeekList[0][n][Symbol.iterator]();!(r=(l=c.next()).done);r=!0){var d=l.value;1==this.info.type?d.userList&&t.push(d.userList):d.userList&&0!=d.userList.length&&(t=t.concat(d.userList))}}catch(S){s=!0,o=S}finally{try{r||null==c.return||c.return()}finally{if(s)throw o}}}if(1==this.info.specialTime){var p=!0,u=!1,m=void 0;try{for(var h,f=this.info.specialDateList[Symbol.iterator]();!(p=(h=f.next()).done);p=!0){var g=h.value,_=!0,b=!1,y=void 0;try{for(var x,v=g.time[Symbol.iterator]();!(_=(x=v.next()).done);_=!0){var w=x.value;1==this.info.type?t.push(w.userList):t=t.concat(w.userList)}}catch(S){b=!0,y=S}finally{try{_||null==v.return||v.return()}finally{if(b)throw y}}}}catch(S){u=!0,m=S}finally{try{p||null==f.return||f.return()}finally{if(u)throw m}}}if(0==t.length)this.info.user_limit=[],this.info.is_limit=1;else if(2==this.info.type){for(var k=[],L=0;L<t.length;L++)"custom"==t[L].scopedSlots.title&&k.push({user_id:t[L].id,name:t[L].title,limit:100});this.getLimitUser(k)}else this.getUserList1(t)},getLimitUser:function(t){var e=this,i={};t=t.reduce((function(t,e){return!i[e.user_id]&&(i[e.user_id]=t.push(e)),t}),[]);for(var a=function(i){-1==t.findIndex((function(t){return t.user_id==e.info.user_limit[i].user_id}))&&(e.info.user_limit.splice(i,1),i--),n=i},n=0;n<this.info.user_limit.length;n++)a(n);for(var r=function(i){-1==e.info.user_limit.findIndex((function(e){return e.user_id==t[i].user_id}))&&e.info.user_limit.push(t[i])},s=0;s<t.length;s++)r(s);0==this.info.user_limit.length&&(this.info.is_limit=1)},getUserList1:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(e){var i,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.axios.post("work-contact-way/get-users",{id:e,corp_id:this.corpId});case 2:i=t.sent,a=i.data,0!=a.error?this.$message.error(a.error_msg):(e=a.data,this.getLimitUser(e));case 5:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),changeIsCeiling:function(){if(0==this.info.user_limit.length){for(var t=[],e=["mon","tues","wednes","thurs","fri","satur","sun"],i=0,a=e;i<a.length;i++){var n=a[i],r=!0,s=!1,o=void 0;try{for(var l,c=this.info.specialWeekList[0][n][Symbol.iterator]();!(r=(l=c.next()).done);r=!0){var d=l.value;2==this.info.type&&d.party&&0!=d.party.length&&(t=t.concat(d.party))}}catch(k){s=!0,o=k}finally{try{r||null==c.return||c.return()}finally{if(s)throw o}}}if(1==this.info.specialTime){var p=!0,u=!1,m=void 0;try{for(var h,f=this.info.specialDateList[Symbol.iterator]();!(p=(h=f.next()).done);p=!0){var g=h.value,_=!0,b=!1,y=void 0;try{for(var x,v=g.time[Symbol.iterator]();!(_=(x=v.next()).done);_=!0){var w=x.value;2==this.info.type&&w.party&&0!=w.party.length&&(t=t.concat(w.party))}}catch(k){b=!0,y=k}finally{try{_||null==v.return||v.return()}finally{if(b)throw y}}}}catch(k){u=!0,m=k}finally{try{p||null==f.return||f.return()}finally{if(u)throw m}}}return t.length>0?(this.$message.destroy(),this.$message.warning("因受官方限制，无法对动态部门的员工设置添加好友上限"),!1):(this.$message.destroy(),this.$message.warning("请先选择成员"),!1)}this.info.is_limit=1==this.info.is_limit?2:1,this.$forceUpdate()},limitDecimals:function(t){var e=/[^\d]/g;return"string"==typeof t?isNaN(Number(t))?"":t.replace(e,""):"number"==typeof t?isNaN(t)?"":String(t).replace(e,""):""},inputLimitNum:function(t,e){if(t.data){var i=/^[0-9]+$/;i.test(t.data)?this.info.user_limit[e].limit>99999999&&(this.info.user_limit[e].limit=99999999,this.$forceUpdate()):(this.info.user_limit[e].limit=parseInt(this.info.user_limit[e].limit.toString().substring(0,this.info.user_limit[e].limit.toString().length-1))||"",this.$forceUpdate())}},rowClassName:function(){var t="light-row";return t},modalVisibleChange4:function(t,e){"ok"==t&&(this.tag_arr=e.split(","))},changeStatus:function(t){this.pushValue=t},changeWelcomeTabKey:function(t){this.welcomeTabKey=t},changeText:function(t,e){this.textContent=t,this.textAreaValueHeader=e},changeText1:function(t,e,i,a,n){1==i?(this.welcome_week_list[a].time[n].content.textContent=t,this.welcome_week_list[a].time[n].content.textAreaValueHeader=e):2==i&&(this.welcome_date_list[a].time[n].content.textContent=t,this.welcome_date_list[a].time[n].content.textAreaValueHeader=e)},changeIsWelcomeWeek:function(){this.info.is_welcome_week=1==this.info.is_welcome_week?2:1},isDisabled:function(t,e){var i=[];return this.welcome_week_list.forEach((function(e,a){t!=a&&(i=i.concat(e.date))})),i.indexOf(e)>-1},selctedWeekDay:function(t,e){var i=this.welcome_week_list[t].date.indexOf(e);i>-1?this.welcome_week_list[t].date.splice(i,1):this.welcome_week_list[t].date.push(e),this.weekKey++},addWelcomeWeek:function(t,e){var i=this;if("add"==e)this.welcome_week_list.push({date:[],time:[{startTime:null,endTime:null,content:JSON.parse(JSON.stringify(b))}]}),this.weekKey++,this.$nextTick((function(){i.weekTabKey=i.welcome_week_list.length-1}));else if("remove"==e){if(this.welcome_week_list.length<2)return!1;this.welcome_week_list.splice(t,1),t<=this.weekTabKey&&0!=this.weekTabKey&&this.weekTabKey--,this.weekKey++}},addWelcomeWeekTime:function(t){this.welcome_week_list[t].time.push({startTime:null,endTime:null,content:JSON.parse(JSON.stringify(b))}),this.weekKey++},deleteWelcomeWeekTime:function(t,e){this.welcome_week_list[t].time.splice(e,1),this.weekKey++},changeIsWelcomeDate:function(){this.info.is_welcome_date=1==this.info.is_welcome_date?2:1},addWelcomeDate:function(t,e){var i=this;if("add"==e)this.welcome_date_list.push({date:[],time:[{startTime:null,endTime:null,content:JSON.parse(JSON.stringify(b))}]}),this.dateKey++,this.$nextTick((function(){i.dateTabKey=i.welcome_date_list.length-1}));else if("remove"==e){if(this.welcome_date_list.length<2)return!1;this.welcome_date_list.splice(t,1),t<=this.dateTabKey&&0!=this.dateTabKey&&this.dateTabKey--,this.dateKey++}},addWelcomeDateTime:function(t){this.welcome_date_list[t].time.push({startTime:null,endTime:null,content:JSON.parse(JSON.stringify(b))}),this.dateKey++},deleteWelcomeDateTime:function(t,e){this.welcome_date_list[t].time.splice(e,1),this.dateKey++},getAgentList:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(e){var i,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.axios.post("work-group-sending/agent-list",{corp_id:this.corpId,suite_id:this.suite_id,agent_type:2});case 2:i=t.sent,a=i.data,0!=a.error?(this.isLoading=!1,this.$message.error(a.error_msg)):e?this.agentId=e:0==a.data.length||e||(this.agentId=a.data[0].id);case 5:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),getDetail:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(){var e,i,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.axios.post("work-contact-way-redpacket/get-redpacket-info",{corp_id:this.corpId,uid:localStorage.getItem("uid"),id:this.urlId});case 2:e=t.sent,i=e.data,0!=i.error?this.$message.error(i.error_msg):(this.changeContent(i),this.agentId=i.data.agent_id||"",this.getAgentList(this.agentId),a=i.data.contact_way,this.redpacket_status=a.redpacket_status,this.redpacket_amount=a.redpacket_amount,a.rule_id?(this.rule.rule_id=a.rule_id,this.rule.redrule_type=1,this.rule1={rule_type:a.rule_type,rule_name:a.rule_name,rule_fixed_amount:a.rule_fixed_amount,rule_min_random_amount:a.rule_min_random_amount,rule_max_random_amount:a.rule_max_random_amount,rule_pic_url:a.rule_pic_url,rule_title:a.rule_title,rule_des:a.rule_des,rule_thanking:a.rule_thanking},this.rule=Object.assign(this.rule,this.rule1)):(this.rule.redrule_type=2,this.rule2={rule_type:a.rule_type,rule_name:a.rule_name,rule_fixed_amount:a.rule_fixed_amount,rule_min_random_amount:a.rule_min_random_amount,rule_max_random_amount:a.rule_max_random_amount,rule_pic_url:a.rule_pic_url,rule_title:a.rule_title,rule_des:a.rule_des,rule_thanking:a.rule_thanking},this.rule=Object.assign(this.rule,this.rule2)),this.rule=Object.assign(this.rule,{name:a.name,time_type:a.time_type,start_time:a.start_time,end_time:a.end_time,reserve_day:a.reserve_day,rule_save:0,redpacket_amount:a.redpacket_amount}),""!=this.rule.start_time&&(this.startDate=m()(this.rule.start_time,"YYYY-MM-DD HH-mm:ss"),this.endDate=m()(this.rule.end_time,"YYYY-MM-DD HH-mm:ss")));case 5:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},created:function(){var t=this;this.urlId=this.$route.query.id,this.corpName=localStorage.getItem("corpName"),"undefined"!=typeof this.urlId?(this.corpId=this.$route.query.id1,this.corpName=this.$store.state.corpArr.find((function(e){return e.corpid==t.corpId})).corp_name,this.isLoading=!0,localStorage.setItem("notAllow",1),localStorage.setItem("backUrl","/channelCode/list"),this.getDetail()):(this.getAgentList(),this.editorFlag=!0);"undefined"!=typeof this.corpId&&(this.getUserList(),this.getPartyList())}},v=x,w=(i("b44d"),i("2877")),k=Object(w["a"])(v,a,n,!1,null,"f4313b72",null);e["default"]=k.exports},"3ff8":function(t,e,i){e=t.exports=i("2350")(!1),e.push([t.i,"[data-v-1dc98380] .ant-tree-checkbox{float:right}[data-v-1dc98380] .ant-tree-iconEle{display:none!important}[data-v-1dc98380] .ant-tree-node-content-wrapper.ant-tree-node-selected{background-color:#fff!important}[data-v-1dc98380] .ant-list-item{border-bottom:0;padding:0}[data-v-1dc98380] .ant-list-item-meta-title{font-weight:400;line-height:32px}[data-v-1dc98380] .ant-tree li span.ant-tree-checkbox{margin:4px 20px 0 2px}.content-msg[data-v-1dc98380]{color:red;margin:0 20px 12px 0}.group-name[data-v-1dc98380]{overflow:hidden;white-space:nowrap;text-overflow:ellipsis;width:calc(100% - 4px);display:inline-block;vertical-align:bottom;line-height:21px}.tabBox[data-v-1dc98380]{display:block!important;background:#fff;padding:20px;-webkit-box-sizing:border-box;box-sizing:border-box;margin-bottom:20px;border:1px solid #d8d8d8}[data-v-1dc98380] .ant-tag-checkable{background-color:#fafafa;border-color:#d9d9d9;font-size:13px}[data-v-1dc98380] .ant-tag-checkable-checked{background-color:#1890ff}.l-h-30[data-v-1dc98380]{line-height:30px}",""])},4262:function(t,e,i){"use strict";var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("a-select",{staticStyle:{width:"100%"},attrs:{showSearch:"",optionFilterProp:"children",filterOption:!1,placeholder:"请选择红包规则",disabled:t.disabled},on:{focus:t.focusSelect,select:t.changeSelect,popupScroll:t.popScroll,search:t.searchName},scopedSlots:t._u([{key:"dropdownRender",fn:function(e){return i("div",{},[i("v-nodes",{attrs:{vnodes:e}}),i("a-spin",{staticStyle:{position:"absolute",bottom:"50%",left:"0",right:"0"},attrs:{tip:"Loading...",size:"large",spinning:t.isLoading}})],1)}}]),model:{value:t.ruleId,callback:function(e){t.ruleId=e},expression:"ruleId"}},t._l(t.ruleList,(function(e,a){return i("a-select-option",{key:e.id},[t._v("\n\t\t\t"+t._s(e.name)+"\n\t\t")])})),1)],1)},n=[],r=i("bd86"),s=i("7618"),o=(i("7f7f"),i("96cf"),i("3b8d")),l=(i("c5f6"),Object(r["a"])({props:{rule_id:{type:Number,default:0},disabled:{type:Boolean,default:!1}},components:{VNodes:{functional:!0,render:function(t,e){return e.props.vnodes}}},watch:{rule_id:{handler:function(t){this.ruleId=0==t?[]:t},deep:!0}},data:function(){var t=localStorage.getItem("corpId")?localStorage.getItem("corpId"):"";return{corpId:t,ruleList:[],ruleId:[],name:"",page:1,count:0,isLoading:!1}},created:function(){var t=this;this.$nextTick((function(){t.ruleId=0==t.rule_id?[]:t.rule_id,t.getAllStaffList()}))},mounted:function(){},methods:{getAllStaffList:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(){var e,i,a,n=arguments;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=n.length>0&&void 0!==n[0]?n[0]:1,this.isLoading=!0,t.next=4,this.axios.post("red-pack-rule/rule-list",{uid:localStorage.getItem("uid"),name:this.name,rule_id:"object"==Object(s["a"])(this.ruleId)||0==this.ruleId?"":this.ruleId,page:e});case 4:i=t.sent,a=i.data,0!=a.error?(this.isLoading=!1,this.$message.error(a.error_msg)):(this.isLoading=!1,this.count=a.data.count,this.ruleList=1==e?a.data.list:this.ruleList.concat(a.data.list),this.page=e);case 7:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),changeSelect:function(t){this.$emit("changeSelect",t)},focusSelect:function(){""!=this.name&&(this.page=1,this.ruleList=[],this.name="",this.getAllStaffList())},searchName:function(t){this.name=t,this.getAllStaffList()},popScroll:function(t){var e=t.target;e.scrollTop+e.offsetHeight===e.scrollHeight&&this.ruleList.length<this.count&&(this.page++,this.getAllStaffList(this.page))}}},"watch",{ruleId:{handler:function(t){this.getAllStaffList()},deep:!0}})),c=l,d=i("2877"),p=Object(d["a"])(c,a,n,!1,null,"24752360",null);e["a"]=p.exports},"59fe":function(t,e,i){var a=i("b6ee");"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var n=i("499e").default;n("2af37125",a,!0,{sourceMap:!1,shadowMode:!1})},6617:function(t,e,i){"use strict";var a=i("a3bb"),n=i.n(a);n.a},"6c7b":function(t,e,i){var a=i("5ca1");a(a.P,"Array",{fill:i("36bd")}),i("9c6c")("fill")},"6ce0":function(t,e,i){e=t.exports=i("2350")(!1),e.i(i("83fb"),""),e.i(i("9249"),""),e.push([t.i,".steps-action[data-v-f4313b72]{position:fixed;bottom:0;background-color:#f0f2f5;height:60px;line-height:60px;z-index:99999}.content-msg[data-v-f4313b72]{border:1px solid #ffdda6;background:#fff2db;padding:10px;margin:0 0 5px 10px;text-align:left}.content-msg a[data-v-f4313b72]:link,.content-msg a[data-v-f4313b72]:visited{color:#1890ff;text-decoration:none}.item-info[data-v-f4313b72] p{margin:0;word-break:break-word}.content-editable[data-v-f4313b72]{font-size:14px;line-height:21px;padding:15px;border:1px solid #d9d9d9;height:110px;overflow:auto}.content-editable[data-v-f4313b72] p{margin:0;word-break:break-word}.hide[data-v-f4313b72]{display:none!important}#components-layout-demo-basic[data-v-f4313b72]{height:100%}#components-layout-demo-basic .ant-layout-header[data-v-f4313b72]{background:#fff;border-bottom:1px solid #e2e2e2;height:50px;min-width:760px;width:100%;line-height:50px}[data-v-f4313b72] .ant-layout-header{padding:0 20px;font-size:16px;text-align:left}[data-v-f4313b72] .ant-radio-button-wrapper{width:200px;height:55px;line-height:55px;padding:0 10px;margin:10px 5px}[data-v-f4313b72] .ant-col-15{margin-left:15px}[data-v-f4313b72] .ant-card-meta-avatar{float:right;padding:0}#components-layout-demo-basic .ant-layout-content[data-v-f4313b72]{min-width:760px;width:100%;position:relative}.content[data-v-f4313b72]{border:1px solid #e2e2e2;background-color:#fafafa}.steps-content[data-v-f4313b72]{border-radius:6px;height:calc(100% - 130px);padding:0 30px;overflow-y:auto}#components-layout-demo-basic>.ant-layout[data-v-f4313b72]{margin-bottom:48px}#components-layout-demo-basic>.ant-layout[data-v-f4313b72]:last-child{margin:0;height:100%}.list[data-v-f4313b72]{height:100%;top:0;right:0;bottom:0;left:0;position:absolute;overflow-x:hidden;overflow-y:auto}.content-hd[data-v-f4313b72]{padding:20px 0;border-bottom:1px solid #e2e2e2}.content-bd[data-v-f4313b72]{padding:15px 0;background:#f5f5f5}.msg_content_body[data-v-f4313b72]{border-radius:4px;font-size:14px;color:#333;margin:20px}.pull-left[data-v-f4313b72]{width:88px}.push-type-item[data-v-f4313b72]{position:relative;margin-bottom:8px;border:1px solid #d8d8d8;border-right:0;z-index:1;cursor:pointer;line-height:38px}.active[data-v-f4313b72]{background:#fff;margin-right:-1px}.index[data-v-f4313b72]{float:left;width:30px;height:38px;line-height:38px;border-right:1px solid #d8d8d8}.index[data-v-f4313b72],.type[data-v-f4313b72]{text-align:center}.type[data-v-f4313b72]{display:inline-block;width:57px;border-right:1px solid transparent}.add-new[data-v-f4313b72]{background:#f9f9f9;cursor:pointer}.add-icon[data-v-f4313b72]{font-size:12px;width:30px}.add-btn[data-v-f4313b72],.add-icon[data-v-f4313b72]{float:left;height:38px;line-height:38px;text-align:center;border:1px dashed #d8d8d8;border-right:0}.add-btn[data-v-f4313b72]{width:58px}.pull-right[data-v-f4313b72]{margin-left:40px;width:430px;max-height:630px;height:360px;background:#fff;border:1px solid #d8d8d8;padding:24px;overflow:hidden}.fl[data-v-f4313b72]{display:inline-block}.msg_content_txt[data-v-f4313b72]{line-height:21px;width:calc(100% - 46px);border:1px solid #e9e9e9;padding:10px 16px;border-radius:4px;font-size:14px;color:#1a1a1a;background:#fff;float:left;word-break:break-word}.audio[data-v-f4313b72]{width:100%;height:65px;padding:10px 20px;background:#fff}.box[data-v-f4313b72]{float:right;width:46px;height:46px;border-radius:50%;position:relative;border:2px solid #1890ff}.box[data-v-f4313b72],.wifi-symbol[data-v-f4313b72]{-webkit-box-sizing:border-box;box-sizing:border-box}.wifi-symbol[data-v-f4313b72]{width:30px;height:30px;overflow:hidden;-webkit-transform:rotate(135deg);transform:rotate(135deg);position:absolute;left:13px;top:6px}.wifi-circle[data-v-f4313b72]{border:2px solid #1890ff;border-radius:50%;position:absolute}.first[data-v-f4313b72]{width:5px;height:5px;background:#1890ff;top:25px;left:25px}.second[data-v-f4313b72]{width:25px;height:25px;top:15px;left:15px}.third[data-v-f4313b72]{width:40px;height:40px;top:5px;left:5px}.second1[data-v-f4313b72]{width:25px;height:25px;top:15px;left:15px;-webkit-animation:fadeInOut-data-v-f4313b72 1s .2s infinite;animation:fadeInOut-data-v-f4313b72 1s .2s infinite}.third1[data-v-f4313b72]{width:40px;height:40px;top:5px;left:5px;-webkit-animation:fadeInOut-data-v-f4313b72 1s .4s infinite;animation:fadeInOut-data-v-f4313b72 1s .4s infinite}@-webkit-keyframes fadeInOut-data-v-f4313b72{0%{opacity:0}to{opacity:1}}@keyframes fadeInOut-data-v-f4313b72{0%{opacity:0}to{opacity:1}}.upload-wrap[data-v-f4313b72]{width:96px;height:96px;text-align:center;border:1px dashed #d8d8d8;background:#fff;cursor:pointer;margin-bottom:10px;float:left}.upload-plus[data-v-f4313b72]{font-size:32px;line-height:96px;font-weight:300;color:#686868}[data-v-f4313b72] .ant-form-item{margin:5px 0 5px 0}[data-v-f4313b72] .ant-form-item-control{margin-left:15px}.changeType-text[data-v-f4313b72]{background:#fff2db;border:1px solid #ffdda6;border-radius:2px;padding:7px 27px 6px 10px;font-size:12px;width:100%;margin-top:12px;max-width:673px;line-height:20px;margin-bottom:15px}.upload-border[data-v-f4313b72]{background:#fff;border:1px dotted #d8d8d8;height:110px;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;cursor:pointer;margin-bottom:10px}[data-v-f4313b72] .ant-form-item-children{display:block}.mt[data-v-f4313b72]{margin-bottom:15px;overflow:hidden}[data-v-f4313b72] .emoji{font-size:20px;height:40px!important;width:40px!important}.icon-btn[data-v-f4313b72]{margin-right:10px}[data-v-f4313b72] .inputTitle{height:30px;line-height:30px;background:#0f0f0f;opacity:.3;color:#fff;padding:0 10px;margin-top:-30px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}[data-v-f4313b72] .inputTitle p{display:inline-block}[data-v-f4313b72] .inputTitle2{background:#fff;height:104px;padding:20px}[data-v-f4313b72] .inputTitle2 p{display:inline-block;word-break:break-word;width:calc(100% - 74px);text-overflow:-o-ellipsis-lastline;overflow:hidden;text-overflow:ellipsis;display:-webkit-box;-webkit-line-clamp:2;line-clamp:2;-webkit-box-orient:vertical;float:left}.hideMask[data-v-f4313b72]{color:rgba(0,0,0,.25);background-color:#f5f5f5;cursor:not-allowed;opacity:.5;position:absolute;top:0;left:0;right:0;bottom:0}[data-v-f4313b72] .ant-tag{margin-right:5px;height:26px;line-height:25px;border:1px solid #d9d9d9}[data-v-f4313b72] #components-layout-demo-basic .ant-layout-sider{background:#fff;-webkit-box-flex:0!important;-ms-flex:0 0 24%!important;flex:0 0 24%!important;max-width:24%!important;min-width:24%!important;width:24%!important;border-right:1px solid #e2e2e2;padding:20px 20px}.upload-wrap-pic[data-v-f4313b72]{max-width:80px;max-height:80px;position:absolute;top:50%;left:50%;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%)}.wrap[data-v-f4313b72]{border:1px solid #e2d6d6;display:inline-block;height:360px;width:352px;background:#f5f5f5;overflow-y:auto;-webkit-box-sizing:content-box;box-sizing:content-box}[data-v-f4313b72] .ant-input-affix-wrapper .ant-input:not(:last-child){padding-right:50px}[data-v-f4313b72] .ant-layout,[data-v-f4313b72] .ant-spin-container,[data-v-f4313b72] .ant-spin-nested-loading{height:100%}.popover-menu[data-v-f4313b72]{cursor:pointer;text-align:center;display:inline-block;width:80px;border:1px solid rgba(0,0,0,.2)}.popover-menu1[data-v-f4313b72],.popover-menu2[data-v-f4313b72]{margin-left:10px}.popover-menu p[data-v-f4313b72]{margin-bottom:5px}.url-text[data-v-f4313b72]{float:left;max-width:calc(100% - 74px);word-break:break-word;overflow:hidden;text-overflow:ellipsis;display:-webkit-box;-webkit-line-clamp:2;line-clamp:2;-webkit-box-orient:vertical;color:#a3a3a3}[data-v-f4313b72] .light-row{background:#fff}.border-dashed[data-v-f4313b72]{border-bottom:1px dashed #e2e2e2}[data-v-f4313b72] .ant-tabs-top-content{padding-bottom:10px!important}[data-v-f4313b72] .ant-input-number-handler-wrap,[data-v-f4313b72] .ant-tabs-tabpane-inactive{display:none}[data-v-f4313b72] .ant-tabs-extra-content{width:25px;height:25px}[data-v-f4313b72] .ant-tabs-extra-content span i{width:25px;height:25px;color:#1890ff;border-color:#1890ff}[data-v-f4313b72] .ant-tabs-tab{font-size:15px}[data-v-f4313b72] .ant-tabs-top-content{margin-left:0!important}[data-v-f4313b72] .ant-tabs-tab{border:1px solid #e2e2e2}[data-v-f4313b72] .ant-tabs-tab-active{background-color:#fff}.code-list[data-v-f4313b72]{width:180px;margin:10px;text-align:center}.code[data-v-f4313b72],.code-list[data-v-f4313b72]{display:inline-block}.code[data-v-f4313b72]{width:170px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;border:1px solid #c3c3c3;padding:5px}.active-code[data-v-f4313b72],.code[data-v-f4313b72]:hover{color:#1890ff;border-color:#1890ff}",""])},"83fb":function(t,e,i){e=t.exports=i("2350")(!1),e.push([t.i,".medium-toolbar-arrow-under:after{border-color:#242424 transparent transparent transparent;top:50px}.medium-toolbar-arrow-over:before{border-color:transparent transparent #242424 transparent;top:-8px}.medium-editor-toolbar{background-color:#242424;background:-webkit-gradient(linear,left top,left bottom,from(#242424),to(rgba(36,36,36,.75)));background:linear-gradient(180deg,#242424,rgba(36,36,36,.75));border:1px solid #000;border-radius:5px;-webkit-box-shadow:0 0 3px #000;box-shadow:0 0 3px #000}.medium-editor-toolbar li button{background-color:#242424;background:-webkit-gradient(linear,left top,left bottom,from(#242424),to(rgba(36,36,36,.89)));background:linear-gradient(180deg,#242424,rgba(36,36,36,.89));border:0;border-right:1px solid #000;border-left:1px solid #333;border-left:1px solid hsla(0,0%,100%,.1);-webkit-box-shadow:0 2px 2px rgba(0,0,0,.3);box-shadow:0 2px 2px rgba(0,0,0,.3);color:#fff;height:50px;min-width:50px;-webkit-transition:background-color .2s ease-in;transition:background-color .2s ease-in}.medium-editor-toolbar li button:hover{background-color:#000;color:#ff0}.medium-editor-toolbar li .medium-editor-button-first{border-bottom-left-radius:5px;border-top-left-radius:5px}.medium-editor-toolbar li .medium-editor-button-last{border-bottom-right-radius:5px;border-top-right-radius:5px}.medium-editor-toolbar li .medium-editor-button-active{background-color:#000;background:-webkit-gradient(linear,left top,left bottom,from(#242424),to(rgba(0,0,0,.89)));background:linear-gradient(180deg,#242424,rgba(0,0,0,.89));color:#fff}.medium-editor-toolbar-form{background:#242424;border-radius:5px;color:#999}.medium-editor-toolbar-form .medium-editor-toolbar-input{background:#242424;-webkit-box-sizing:border-box;box-sizing:border-box;color:#ccc;height:50px}.medium-editor-toolbar-form a{color:#fff}.medium-editor-toolbar-anchor-preview{background:#242424;border-radius:5px;color:#fff}.medium-editor-placeholder:after{color:#b3b3b1}",""])},"875d":function(t,e,i){var a=i("3ff8");"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var n=i("499e").default;n("0c85575b",a,!0,{sourceMap:!1,shadowMode:!1})},"8aa1":function(t,e,i){var a=i("18e2");"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var n=i("499e").default;n("2c8e544e",a,!0,{sourceMap:!1,shadowMode:!1})},9249:function(t,e,i){e=t.exports=i("2350")(!1),e.push([t.i,'@-webkit-keyframes medium-editor-image-loading{0%{-webkit-transform:scale(0);transform:scale(0)}to{-webkit-transform:scale(1);transform:scale(1)}}@keyframes medium-editor-image-loading{0%{-webkit-transform:scale(0);transform:scale(0)}to{-webkit-transform:scale(1);transform:scale(1)}}@-webkit-keyframes medium-editor-pop-upwards{0%{opacity:0;-webkit-transform:matrix(.97,0,0,1,0,12);transform:matrix(.97,0,0,1,0,12)}20%{opacity:.7;-webkit-transform:matrix(.99,0,0,1,0,2);transform:matrix(.99,0,0,1,0,2)}40%{opacity:1;-webkit-transform:matrix(1,0,0,1,0,-1);transform:matrix(1,0,0,1,0,-1)}to{-webkit-transform:matrix(1,0,0,1,0,0);transform:matrix(1,0,0,1,0,0)}}@keyframes medium-editor-pop-upwards{0%{opacity:0;-webkit-transform:matrix(.97,0,0,1,0,12);transform:matrix(.97,0,0,1,0,12)}20%{opacity:.7;-webkit-transform:matrix(.99,0,0,1,0,2);transform:matrix(.99,0,0,1,0,2)}40%{opacity:1;-webkit-transform:matrix(1,0,0,1,0,-1);transform:matrix(1,0,0,1,0,-1)}to{-webkit-transform:matrix(1,0,0,1,0,0);transform:matrix(1,0,0,1,0,0)}}.medium-editor-anchor-preview{font-family:Helvetica Neue,Helvetica,Arial,sans-serif;font-size:16px;left:0;line-height:1.4;max-width:280px;position:absolute;text-align:center;top:0;word-break:break-all;word-wrap:break-word;visibility:hidden;z-index:2000}.medium-editor-anchor-preview a{color:#fff;display:inline-block;margin:5px 5px 10px}.medium-editor-anchor-preview-active{visibility:visible}.medium-editor-dragover{background:#ddd}.medium-editor-image-loading{-webkit-animation:medium-editor-image-loading 1s ease-in-out infinite;animation:medium-editor-image-loading 1s ease-in-out infinite;background-color:#333;border-radius:100%;display:inline-block;height:40px;width:40px}.medium-editor-placeholder{position:relative}.medium-editor-placeholder:after{content:attr(data-placeholder)!important;font-style:italic;position:absolute;left:0;top:0;white-space:pre;padding:inherit;margin:inherit}.medium-editor-placeholder-relative{position:relative}.medium-editor-placeholder-relative:after{content:attr(data-placeholder)!important;font-style:italic;position:relative;white-space:pre;padding:inherit;margin:inherit}.medium-toolbar-arrow-over:before,.medium-toolbar-arrow-under:after{border-style:solid;content:"";display:block;height:0;left:50%;margin-left:-8px;position:absolute;width:0}.medium-toolbar-arrow-under:after{border-width:8px 8px 0 8px}.medium-toolbar-arrow-over:before{border-width:0 8px 8px 8px;top:-8px}.medium-editor-toolbar{font-family:Helvetica Neue,Helvetica,Arial,sans-serif;font-size:16px;left:0;position:absolute;top:0;visibility:hidden;z-index:2000}.medium-editor-toolbar ul{margin:0;padding:0}.medium-editor-toolbar li{float:left;list-style:none;margin:0;padding:0}.medium-editor-toolbar li button{-webkit-box-sizing:border-box;box-sizing:border-box;cursor:pointer;display:block;font-size:14px;line-height:1.33;margin:0;padding:15px;text-decoration:none}.medium-editor-toolbar li button:focus{outline:none}.medium-editor-toolbar li .medium-editor-action-underline{text-decoration:underline}.medium-editor-toolbar li .medium-editor-action-pre{font-family:Consolas,Liberation Mono,Menlo,Courier,monospace;font-size:12px;font-weight:100;padding:15px 0}.medium-editor-toolbar-active{visibility:visible}.medium-editor-sticky-toolbar{position:fixed;top:1px}.medium-editor-relative-toolbar{position:relative}.medium-editor-toolbar-active.medium-editor-stalker-toolbar{-webkit-animation:medium-editor-pop-upwards .16s linear forwards;animation:medium-editor-pop-upwards .16s linear forwards}.medium-editor-action-bold{font-weight:bolder}.medium-editor-action-italic{font-style:italic}.medium-editor-toolbar-form{display:none}.medium-editor-toolbar-form a,.medium-editor-toolbar-form input{font-family:Helvetica Neue,Helvetica,Arial,sans-serif}.medium-editor-toolbar-form .medium-editor-toolbar-form-row{line-height:14px;margin-left:5px;padding-bottom:5px}.medium-editor-toolbar-form .medium-editor-toolbar-input,.medium-editor-toolbar-form label{border:none;-webkit-box-sizing:border-box;box-sizing:border-box;font-size:14px;margin:0;padding:6px;width:316px;display:inline-block}.medium-editor-toolbar-form .medium-editor-toolbar-input:focus,.medium-editor-toolbar-form label:focus{-webkit-appearance:none;-moz-appearance:none;appearance:none;border:none;-webkit-box-shadow:none;box-shadow:none;outline:0}.medium-editor-toolbar-form a{display:inline-block;font-size:24px;font-weight:bolder;margin:0 10px;text-decoration:none}.medium-editor-toolbar-form-active{display:block}.medium-editor-toolbar-actions:after{clear:both;content:"";display:table}.medium-editor-element{word-wrap:break-word;min-height:30px}.medium-editor-element img{max-width:100%}.medium-editor-element sub{vertical-align:sub}.medium-editor-element sup{vertical-align:super}.medium-editor-hidden{display:none}',""])},95204:function(t,e,i){"use strict";var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("a-select",{staticStyle:{width:"100%"},attrs:{showSearch:"",optionFilterProp:"children",filterOption:!1,placeholder:2==t.type?"请选择导购":"请选择企业成员",disabled:t.disabled},on:{focus:t.focusSelect,select:t.changeSelect,popupScroll:t.popScroll,search:t.searchName},scopedSlots:t._u([{key:"dropdownRender",fn:function(e){return i("div",{},[i("v-nodes",{attrs:{vnodes:e}}),i("a-spin",{staticStyle:{position:"absolute",bottom:"50%",left:"0",right:"0"},attrs:{tip:"Loading...",size:"large",spinning:t.isLoading}})],1)}}]),model:{value:t.userId,callback:function(e){t.userId=e},expression:"userId"}},t._l(t.userList,(function(e,a){return i("a-select-option",{key:2==t.type?a:e.id},[t._v("\n\t\t\t"+t._s(e.name)),2==t.type&&e.group_name?i("span",[t._v("("+t._s(e.group_name)+")")]):t._e()])})),1)],1)},n=[],r=(i("96cf"),i("3b8d")),s=(i("c5f6"),{props:{callback:{type:Function,default:null},index:{type:Number,default:-1},index2:{type:Number,default:-1},disabled:{type:Boolean,default:!1},getFisrstStaff:{type:Boolean,default:!1},type:{type:Number,default:0},ignore_dialout:{type:Number,default:0}},components:{VNodes:{functional:!0,render:function(t,e){return e.props.vnodes}}},data:function(){var t=localStorage.getItem("corpId")?localStorage.getItem("corpId"):"";return{corpId:t,userList:[],userId:[],userName:"",page:1,count:0,isLoading:!1}},created:function(){var t=this;this.$nextTick((function(){t.getAllStaffList()}))},mounted:function(){},methods:{getAllStaffList:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(){var e,i,a,n,r,s=arguments;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=s.length>0&&void 0!==s[0]?s[0]:1,this.isLoading=!0,2==this.type?(i={corp_id:this.corpId,guide_keyword:this.userName,operator:0,page:e,page_size:10},a="shop-customer-guide/list"):(i={corp_id:this.corpId,name:this.userName,user_id:this.userId,is_all:0,page:e,ignore_dialout:this.ignore_dialout},1==this.type&&(i.sub_id=localStorage.getItem("sub_id"),i.isMasterAccount=localStorage.getItem("isMasterAccount")),a="work-user/get-all-user"),t.next=5,this.axios.post(a,i);case 5:n=t.sent,r=n.data,0!=r.error?(this.isLoading=!1,this.$message.error(r.error_msg)):(this.isLoading=!1,this.count=r.data.count,this.getFisrstStaff&&(this.userId=r.data.info[0].id,null!==this.callback&&"function"===typeof this.callback&&(-1===this.index&&-1===this.index2?this.callback("ok",r.data.info[0].id):this.callback("ok",r.data.info[0].id,this.index,this.index2,r.data.info[0]))),1==e?2==this.type?this.userList=r.data.result:this.userList=r.data.info:2==this.type?this.userList=this.userList.concat(r.data.result):this.userList=this.userList.concat(r.data.info),this.page=e);case 8:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),changeSelect:function(t){null!==this.callback&&"function"===typeof this.callback&&(2==this.type?-1===this.index&&-1===this.index2?this.callback("ok",this.userList[t].id):this.callback("ok",this.userList[t].id,this.index,this.index2,this.userList[t]):-1===this.index&&-1===this.index2?this.callback("ok",t):this.callback("ok",t,this.index,this.index2))},focusSelect:function(){""!=this.userName&&(this.page=1,this.userList=[],this.userName="",this.getAllStaffList())},searchName:function(t){this.userName=t,this.getAllStaffList()},popScroll:function(t){var e=t.target;e.scrollTop+e.offsetHeight===e.scrollHeight&&this.userList.length<this.count&&(this.page++,this.getAllStaffList(this.page))}},watch:{userId:{handler:function(t){this.getAllStaffList()},deep:!0},getFisrstStaff:{handler:function(t){this.getAllStaffList()},deep:!0}}}),o=s,l=i("2877"),c=Object(l["a"])(o,a,n,!1,null,"2fbfc039",null);e["a"]=c.exports},a3bb:function(t,e,i){var a=i("1fa6");"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var n=i("499e").default;n("0708ddb1",a,!0,{sourceMap:!1,shadowMode:!1})},b44d:function(t,e,i){"use strict";var a=i("0902"),n=i.n(a);n.a},b6ee:function(t,e,i){e=t.exports=i("2350")(!1),e.push([t.i,"[data-v-440e9184] .ant-radio-button-wrapper{width:200px;height:55px;line-height:47px;padding:0 10px;margin:10px 5px}[data-v-440e9184] .wxtpl .ant-radio-button-wrapper-checked{border:2px solid #1890ff!important}.text[data-v-440e9184]{margin-left:5px;vertical-align:middle;display:inline-block;width:calc(100% - 37px);overflow:hidden;text-overflow:ellipsis;white-space:nowrap}",""])},e33a:function(t,e,i){"use strict";var a=i("875d"),n=i.n(a);n.a},e488:function(t,e,i){"use strict";var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("medium-editor",{ref:"medium_editor",staticClass:"content-editable",attrs:{text:t.textAreaValueHeader,options:t.options,"custom-tag":"div"},on:{editorCreated:t.editorCreated,edit:t.changeContentInput}}),i("div",{staticStyle:{"margin-right":"15px","margin-top":"10px",float:"right"}},[t._v("\n\t\t"+t._s(t.wordNum)+"/"+t._s(t.wordLimit)+"\n\t")]),t.isNickName||t.isEmoji?i("div",{staticStyle:{padding:"0 15px","margin-top":"10px"}},[t._v("\n\t\t点击插入：\n\t\t"),t.isNickName?i("a-button",{staticClass:"ant-tag ant-tag-orange",attrs:{size:"small"},on:{click:t.addTag}},[t._v("客户名称\n\t\t")]):t._e(),t.isEmoji?i("a-popover",{attrs:{trigger:"click",destroyTooltipOnHide:!0},model:{value:t.emojiShow,callback:function(e){t.emojiShow=e},expression:"emojiShow"}},[i("VEmojiPicker",{attrs:{slot:"content",showSearch:!1},on:{select:t.onSelectEmoji},slot:"content"}),i("a-icon",{staticClass:"icon-btn",staticStyle:{cursor:"pointer"},attrs:{type:"smile"}})],1):t._e()],1):t._e(),i("div",{staticClass:"changeType-text"},[t._v("\n\t\t提示：火狐浏览器可能出现无法正确插入客户名称，请使用谷歌、360浏览器\n\t")])],1)},n=[],r=(i("6b54"),i("3b2b"),i("386d"),i("a481"),i("c5f6"),i("4884")),s=i.n(r),o=i("40cf"),l=i("79b5"),c={name:"channelCodeEditor",components:{VEmojiPicker:l["a"],"medium-editor":s.a},props:{text:{type:String,default:""},textValue:{type:String,default:""},isNickName:{type:Boolean,default:!0},isEmoji:{type:Boolean,default:!0},type:{type:Number,default:1},index:{type:Number,default:0},idx:{type:Number,default:0}},data:function(){return{textContent:"",textAreaValueHeader:"",emojiShow:!1,wordNum:0,wordLimit:1e3,mediumEditor:"",options:{toolbar:!1,placeholder:{text:""}},keydownNode:!1,keydownNodeIndex:0}},mounted:function(){var t=this;this.textContent=this.text;var e=this.textContent.replace(/{nickname}/g," 客户名称 ").replace(/\n/g,"").replace(/(<\/?a.*?>)/g,"").replace(/&lt;/g,"<").replace(/&gt;/g,">");this.wordNum=e.length,this.textAreaValueHeader="<p>"+this.textValue+"</p>",document.addEventListener("selectionchange",(function(){t.getCursor(self)}))},methods:{initTextMsgContent:function(t){var e=this;return-1!==t.search(/[\/\[\]\(\)\|\$\*\?\+\-\_]/g)&&o["a"].wechatEmojiKey.map((function(i){var a=new RegExp(e.utils.addslashes(i),"g"),n=o["a"].getEmojiUrl(i);t=t.replace(a,'<img src="'+n+'" alt="'+i+'" height="21" width="21"/>')})),t.replace(/[\r\n|\n]/g,"<br/>")},toggleDialogEmoji:function(){this.emojiShow=!this.emojiShow},onSelectEmoji:function(t){var e=this.mediumEditor.options.ownerDocument;this.wordLimit-this.wordNum>=2&&this.insertHTMLCommand(e,t.data),this.toggleDialogEmoji()},getCursor:function(t){var e=getSelection();if(e){var i=e.anchorNode,a=!1;while(i&&i.nodeType!=i.DOCUMENT_NODE){var n=i.classList;if(n&&n.contains("content-editable")){a=!0;break}i=i.parentNode}a&&(t.lastRange=e.getRangeAt(0),t.lastNode=i)}},insertHTMLCommand:function(t,e){if(localStorage.getItem("welcomeType")!=this.type||localStorage.getItem("welcomeIndex")!=this.index||localStorage.getItem("welcomeIdx")!=this.idx)return!1;if("undefined"===typeof self.lastNode||!self.lastNode.classList.contains("content-editable"))return!1;var i,a,n,r,o,l,c=["insertHTML",!1,e];if(i=self.lastRange,a=i.commonAncestorContainer,s.a.MediumEditor.util.isMediumEditorElement(a)&&!a.firstChild)i.selectNode(a.appendChild(t.createTextNode("")));else if(3===a.nodeType&&0===i.startOffset&&i.endOffset===a.nodeValue.length||3!==a.nodeType&&a.innerHTML===i.toString()){while(!s.a.MediumEditor.util.isMediumEditorElement(a)&&a.parentNode&&1===a.parentNode.childNodes.length&&!s.a.MediumEditor.util.isMediumEditorElement(a.parentNode))a=a.parentNode;i.selectNode(a)}i.deleteContents(),n=t.createElement("div"),n.innerHTML=e,r=t.createDocumentFragment();while(n.firstChild)o=n.firstChild,l=r.appendChild(o);i.insertNode(r),l&&(i=i.cloneRange(),i.setStartAfter(l),i.collapse(!0),s.a.MediumEditor.selection.selectRange(t,i)),t.execCommand.callListeners&&t.execCommand.callListeners(c,!0),this.wordNum=self.lastNode.textContent.length,this.wordNum<=this.wordLimit&&(this.textAreaValueHeader=self.lastNode.innerHTML.replace(/<pre([^>]*)>/g,"<p>").replace(/<\/pre>/g,"</p>").replace(/<font([^>]*)>/g,"<p>").replace(/<\/font>/g,"</p>").replace(/<div([^>]*)>/g,"<p>").replace(/<\/div>/g,"</p>"),"undefined"==typeof this.urlId?this.textContent=self.lastNode.innerHTML.replace(/(<p><span>)?<br([^>]*)>(<\/span>)?<\/p>/g,"</p>").replace(/<p([^>]*)>/g,"").replace(/<\/p>/g,"\n").replace(/(&nbsp;)?<span contenteditable="false" class="ant-tag ant-tag-orange">客户名称<\/span>(&nbsp;)?/g,"{nickname}").replace(/<br([^>]*)>/g,"\n").replace(/<span([^>]*)>/g,"").replace(/<\/span>/g,"").replace(/&nbsp;/g," ").replace(/miniprogramappid/g,"miniprogram-appid").replace(/miniprogrampath/g,"miniprogram-path").replace(/&amp;/g,"&").replace(/&lt;/g,"<").replace(/&gt;/g,">"):this.textContent=self.lastNode.innerHTML.replace(/(<p><span>)?<br([^>]*)>(<\/span>)?<\/p>/g,"</p>").replace(/<br([^>]*)>/g,"\n").replace(/(&nbsp;)?<span contenteditable="false" class="ant-tag ant-tag-orange">客户名称<\/span>(&nbsp;)?/g,"{nickname}").replace(/([^<p>]+)<p([^>]*)>/g,"$1\n").replace(/<p([^>]*)>/g,"").replace(/<\/p>/g,"\n").replace(/<span([^>]*)>/g,"").replace(/<\/span>/g,"").replace(/&nbsp;/g," ").replace(/<div([^>]*)>/g,"\n").replace(/<\/div>/g,"").replace(/miniprogramappid/g,"miniprogram-appid").replace(/miniprogrampath/g,"miniprogram-path").replace(/&amp;/g,"&").replace(/&lt;/g,"<").replace(/&gt;/g,">")),this.mediumEditor.origElements.scrollTop=this.mediumEditor.origElements.scrollHeight;var d={currentTarget:this.mediumEditor.origElements};this.mediumEditor.events.updateInput(d.currentTarget,d),this.$emit("changeText",this.textContent,this.textAreaValueHeader,this.type,this.index,this.idx)},editorCreated:function(t){this.mediumEditor=t,this.mediumEditor.subscribe("focus",this.editableFocus),this.mediumEditor.subscribe("editableKeydown",this.editableKeydown),this.mediumEditor.subscribe("editablePaste",this.editablePaste),delete self.lastRange,delete self.lastNode},editableFocus:function(t){localStorage.setItem("welcomeType",this.type),localStorage.setItem("welcomeIndex",this.index),localStorage.setItem("welcomeIdx",this.idx),""!==t.target.innerHTML&&"<br>"!=t.target.innerHTML&&"<p></p>"!=t.target.innerHTML||(t.target.innerHTML="<p><br/></p>")},editableKeydown:function(t){this.wordNum>=this.wordLimit&&8!=t.keyCode&&37!=t.keyCode&&38!=t.keyCode&&39!=t.keyCode&&40!=t.keyCode&&(65!=t.keyCode||!t.metaKey&&!t.ctrlKey)&&t.preventDefault(),86==t.keyCode&&(t.metaKey||t.ctrlKey),13==t.keyCode&&(this.keydownNodeIndex=0,this.getParentP4Label(self.lastRange.startContainer)),this.keydownNode=13==t.keyCode},getParentP4Label:function(t){"P"!=t.nodeName?this.getParentP4Label(t.parentNode):this.getPreviousSiblingIndex(t)},getPreviousSiblingIndex:function(t){t.previousSibling&&(this.keydownNodeIndex++,this.getPreviousSiblingIndex(t.previousSibling))},editablePaste:function(t,e){this.invlideText()},invlideText:function(){var t=this.mediumEditor.origElements,e=this.global.getRangeInfo(t,this.wordLimit),i=e.startNode,a=e.startOffset,n=e.endNode,r=e.endOffset;if("undefined"!==typeof i.nodeValue){var s=document.createRange();s.setStart(i,a),s.setEnd(n,r),s.deleteContents(),this.textAreaValueHeader=self.lastNode.innerHTML.replace(/<pre([^>]*)>/g,"<p>").replace(/<\/pre>/g,"</p>").replace(/<font([^>]*)>/g,"<p>").replace(/<\/font>/g,"</p>").replace(/<div([^>]*)>/g,"<p>").replace(/<\/div>/g,"</p>"),"undefined"==typeof this.urlId?this.textContent=self.lastNode.innerHTML.replace(/(<p><span>)?<br([^>]*)>(<\/span>)?<\/p>/g,"</p>").replace(/<p([^>]*)>/g,"").replace(/<\/p>/g,"\n").replace(/(&nbsp;)?<span contenteditable="false" class="ant-tag ant-tag-orange">客户名称<\/span>(&nbsp;)?/g,"{nickname}").replace(/<br([^>]*)>/g,"\n").replace(/<span([^>]*)>/g,"").replace(/<\/span>/g,"").replace(/&nbsp;/g," ").replace(/miniprogramappid/g,"miniprogram-appid").replace(/miniprogrampath/g,"miniprogram-path").replace(/&amp;/g,"&").replace(/&lt;/g,"<").replace(/&gt;/g,">"):this.textContent=self.lastNode.innerHTML.replace(/(<p><span>)?<br([^>]*)>(<\/span>)?<\/p>/g,"</p>").replace(/<br([^>]*)>/g,"\n").replace(/(&nbsp;)?<span contenteditable="false" class="ant-tag ant-tag-orange">客户名称<\/span>(&nbsp;)?/g,"{nickname}").replace(/([^<p>]+)<p([^>]*)>/g,"$1\n").replace(/<p([^>]*)>/g,"").replace(/<\/p>/g,"\n").replace(/<span([^>]*)>/g,"").replace(/<\/span>/g,"").replace(/&nbsp;/g," ").replace(/<div([^>]*)>/g,"\n").replace(/<\/div>/g,"").replace(/miniprogramappid/g,"miniprogram-appid").replace(/miniprogrampath/g,"miniprogram-path").replace(/&amp;/g,"&").replace(/&lt;/g,"<").replace(/&gt;/g,">"),this.wordNum=this.wordLimit}this.$emit("changeText",this.textContent,this.textAreaValueHeader,this.type,this.index,this.idx)},changeContentInput:function(t){if(""!=t.api.origElements.innerHTML&&"<br>"!=t.api.origElements.innerHTML||(t.api.origElements.innerHTML="<p><br/></p>"),self.lastNode&&(this.wordNum=self.lastNode.textContent.length,this.wordNum<=this.wordLimit?(this.textAreaValueHeader=t.api.origElements.innerHTML.replace(/<pre([^>]*)>/g,"<p>").replace(/<\/pre>/g,"</p>").replace(/<font([^>]*)>/g,"<p>").replace(/<\/font>/g,"</p>").replace(/<div([^>]*)>/g,"<p>").replace(/<\/div>/g,"</p>"),"undefined"==typeof this.urlId?this.textContent=self.lastNode.innerHTML.replace(/(<p><span>)?<br([^>]*)>(<\/span>)?<\/p>/g,"</p>").replace(/<p([^>]*)>/g,"").replace(/<\/p>/g,"\n").replace(/(&nbsp;)?<span contenteditable="false" class="ant-tag ant-tag-orange">客户名称<\/span>(&nbsp;)?/g,"{nickname}").replace(/<br([^>]*)>/g,"\n").replace(/<span([^>]*)>/g,"").replace(/<\/span>/g,"").replace(/&nbsp;/g," ").replace(/miniprogramappid/g,"miniprogram-appid").replace(/miniprogrampath/g,"miniprogram-path").replace(/&amp;/g,"&").replace(/&lt;/g,"<").replace(/&gt;/g,">"):this.textContent=self.lastNode.innerHTML.replace(/(<p><span>)?<br([^>]*)>(<\/span>)?<\/p>/g,"</p>").replace(/<br([^>]*)>/g,"\n").replace(/(&nbsp;)?<span contenteditable="false" class="ant-tag ant-tag-orange">客户名称<\/span>(&nbsp;)?/g,"{nickname}").replace(/([^<p>]+)<p([^>]*)>/g,"$1\n").replace(/<p([^>]*)>/g,"").replace(/<\/p>/g,"\n").replace(/<span([^>]*)>/g,"").replace(/<\/span>/g,"").replace(/&nbsp;/g," ").replace(/<div([^>]*)>/g,"\n").replace(/<\/div>/g,"").replace(/miniprogramappid/g,"miniprogram-appid").replace(/miniprogrampath/g,"miniprogram-path").replace(/&amp;/g,"&").replace(/&lt;/g,"<").replace(/&gt;/g,">"),this.$emit("changeText",this.textContent,this.textAreaValueHeader,this.type,this.index,this.idx)):this.invlideText(),this.keydownNode)){var e=self.lastNode.childNodes[this.keydownNodeIndex+1],i=document.createRange();i.setStart(e,0);var a=window.getSelection();a.removeAllRanges(),a.addRange(i),this.keydownNode=!1}},addTag:function(){if("undefined"==typeof this.mediumEditor.options.ownerDocument)var t=this.mediumEditor.options.ownerDocument;else t=this.mediumEditor.options.ownerDocument;var e='<span>&nbsp;<span contenteditable="false" class="ant-tag ant-tag-orange">客户名称</span>&nbsp;</span>';this.wordLimit-this.wordNum>=6&&this.insertHTMLCommand(t,e)}}},d=c,p=(i("0426"),i("2877")),u=Object(p["a"])(d,a,n,!1,null,"1b2a8f7c",null);e["a"]=u.exports},ffd5:function(t,e,i){"use strict";var a=i("59fe"),n=i.n(a);n.a}}]);