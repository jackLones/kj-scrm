(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-924203bc"],{"2f2d":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticStyle:{position:"absolute",left:"0",top:"0",right:"0",background:"#FFF"}},[a("a-spin",{attrs:{tip:"Loading...",size:"large",spinning:t.isLoading}},[a("div",{staticClass:"view-title"},[t._v(t._s(t.title)+"\n\t\t\t"),a("router-link",{staticStyle:{"font-size":"16px",float:"right","margin-right":"15px"},attrs:{to:"/group/list"}},[a("a-button",{attrs:{type:"primary",icon:"rollback"}},[t._v("返回列表")])],1)],1),a("div",{staticStyle:{padding:"20px"}},[a("ul",{staticClass:"statistics-ul"},[a("li",{staticStyle:{background:"#40A9FF"}},[a("p",[t._v("今日新增成员数\n\t\t\t\t\t\t"),a("a-tooltip",{attrs:{placement:"right"}},[a("template",{slot:"title"},[a("span",[t._v("今日新加入群成员的数量")])]),a("a-icon",{staticStyle:{"margin-left":"5px"},attrs:{type:"question-circle"}})],2)],1),a("p",{staticClass:"number"},[t._v(t._s(t.today_member_num))])]),a("li",{staticStyle:{background:"#FFC71B"}},[a("p",[t._v("今日退群成员数\n\t\t\t\t\t\t"),a("a-tooltip",{attrs:{placement:"right"}},[a("template",{slot:"title"},[a("span",[t._v("今日退群成员的数量")])]),a("a-icon",{staticStyle:{"margin-left":"5px"},attrs:{type:"question-circle"}})],2)],1),a("p",{staticClass:"number"},[t._v(t._s(t.today_leave_member_num))])]),a("li",{staticStyle:{background:"#8E8AFF"}},[a("p",[t._v("当前群成员数\n\t\t\t\t\t\t"),a("a-tooltip",{attrs:{placement:"right"}},[a("template",{slot:"title"},[a("span",[t._v("当前群成员的总数量")])]),a("a-icon",{staticStyle:{"margin-left":"5px"},attrs:{type:"question-circle"}})],2)],1),a("p"),a("p",{staticClass:"number"},[t._v(t._s(t.member_sum))])]),a("li",{staticStyle:{background:"#FF688E"}},[a("p",[t._v("累计退群成员数\n\t\t\t\t\t\t"),a("a-tooltip",{attrs:{placement:"right"}},[a("template",{slot:"title"},[a("span",[t._v("历史累计退群成员的数量")])]),a("a-icon",{staticStyle:{"margin-left":"5px"},attrs:{type:"question-circle"}})],2)],1),a("p",{staticClass:"number"},[t._v(t._s(t.leave_member_sum))])])]),a("div",{staticClass:"all-card-calendar"},[a("div",{staticClass:"card-caledar"},[a("div",{staticClass:"day-picker-contain picker-contain"},[a("a-button",{class:"1"==t.timeType?"caledar-btn-selected":"",on:{click:function(e){return t.changeFansTimeType1(1)}}},[t._v("\n\t\t\t\t\t\t\t按日\n\t\t\t\t\t\t")]),"1"==t.timeType?a("a-range-picker",{attrs:{allowClear:!1,disabledDate:t.disabledDateDay,defaultValue:[t.moment(t.moment().subtract(30,"days").calendar(),"YYYY-MM-DD"),t.moment(t.moment().subtract(1,"days"),"YYYY-MM-DD")],format:"YYYY-MM-DD"},on:{change:t.changeFansTime1}}):t._e()],1),a("div",{staticClass:"week-picker-contain picker-contain"},[a("a-button",{class:"2"==t.timeType?"caledar-btn-selected":"",on:{click:function(e){return t.changeFansTimeType1(2)}}},[t._v("\n\t\t\t\t\t\t\t按周\n\t\t\t\t\t\t")]),"2"==t.timeType?a("a-week-picker",{attrs:{allowClear:!1,value:t.weekStart,disabledDate:t.disabledDateWeek},on:{change:t.changeFansStartWeek1}}):t._e(),"2"==t.timeType?a("a-week-picker",{attrs:{allowClear:!1,value:t.weekEnd,disabledDate:t.disabledDateWeek},on:{change:t.changeFansEndWeek1}}):t._e()],1),a("div",{staticClass:"month-picker-contain picker-contain"},[a("a-button",{class:"3"==t.timeType?"caledar-btn-selected":"",on:{click:function(e){return t.changeFansTimeType1(3)}}},[t._v("\n\t\t\t\t\t\t\t按月\n\t\t\t\t\t\t")])],1)]),a("div",{staticClass:"sec-card-caledar down-text",staticStyle:{"border-top":"0px"}},[a("p",{staticStyle:{"margin-bottom":"0px"}},[t._v("\n\t\t\t\t\t\t这段时间里，该群共新增成员数\n\t\t\t\t\t\t"),a("span",[t._v(t._s(t.time_member_num))]),t._v("\n\t\t\t\t\t\t人、成员退群\n\t\t\t\t\t\t"),a("span",[t._v(t._s(t.time_leave_member_num))]),t._v("\n\t\t\t\t\t\t人\n\t\t\t\t\t")])])]),a("LineCharts",{staticStyle:{margin:"20px 0"},attrs:{options:t.fansInteractive}}),a("div",{staticStyle:{overflow:"hidden","margin-bottom":"20px"}},[a("div",{staticStyle:{float:"left"}},[t._v("详细数据")]),a("a-button",{staticStyle:{float:"right"},attrs:{type:"primary",loading:t.btnLoading},on:{click:t.exportData}},[a("icon-font",{directives:[{name:"show",rawName:"v-show",value:!t.btnLoading,expression:"!btnLoading"}],attrs:{type:"icon-tuichu"}}),t._v("\n\t\t\t\t\t导出数据\n\t\t\t\t")],1)],1),a("a-table",{attrs:{columns:t.columns,dataSource:t.timeData,pagination:!1,rowClassName:t.rowClassName}},[a("span",{attrs:{slot:"add_num"},slot:"add_num"},[t._v("\n\t\t\t        新增成员数\n\t\t\t\t    "),a("a-tooltip",{attrs:{placement:"top"}},[a("template",{slot:"title"},[a("span",[t._v("新加入群成员的数量")])]),a("a-icon",{staticStyle:{"margin-left":"5px"},attrs:{type:"question-circle"}})],2)],1),a("span",{attrs:{slot:"leave_num"},slot:"leave_num"},[t._v("\n\t\t\t        退群人数\n\t\t\t\t\t"),a("a-tooltip",{attrs:{placement:"top"}},[a("template",{slot:"title"},[a("span",[t._v("同一个员工重复被删除会重复计算")])]),a("a-icon",{staticStyle:{"margin-left":"5px"},attrs:{type:"question-circle"}})],2)],1),a("span",{attrs:{slot:"member_snum"},slot:"member_snum"},[t._v("\n\t\t\t       当前群成员数\n\t\t\t\t    "),a("a-tooltip",{attrs:{placement:"top"}},[a("template",{slot:"title"},[a("span",[t._v("当前群成员的总数量")])]),a("a-icon",{staticStyle:{"margin-left":"5px"},attrs:{type:"question-circle"}})],2)],1),a("span",{attrs:{slot:"leave_snum"},slot:"leave_snum"},[t._v("\n\t\t\t        累计退群成员数\n\t\t\t\t\t"),a("a-tooltip",{attrs:{placement:"top"}},[a("template",{slot:"title"},[a("span",[t._v("历史累计退群成员的数量")])]),a("a-icon",{staticStyle:{"margin-left":"5px"},attrs:{type:"question-circle"}})],2)],1)]),a("div",{directives:[{name:"show",rawName:"v-show",value:t.total>0,expression:"total > 0"}],staticStyle:{width:"100%"}},[a("div",{staticStyle:{height:"32px",display:"inline-block","margin-top":"25px"}},[t._v("\n\t\t\t\t\t共"),a("span",{staticStyle:{color:"blue"}},[t._v(t._s(t.total))]),t._v("条\n\t\t\t\t")]),a("div",{staticClass:"pagination",staticStyle:{"margin-top":"20px",float:"right"}},[a("a-pagination",{attrs:{total:t.total,showSizeChanger:"",showQuickJumper:t.quickJumper,current:t.page,pageSize:t.pageSize,pageSizeOptions:["10","20","30","60"]},on:{change:t.changeFansPage,showSizeChange:t.showFansSizeChange}})],1)])],1)])],1)},s=[],n=(a("28a5"),a("7f7f"),a("96cf"),a("3b8d")),r=a("7304"),o=a("c1df"),l=a.n(o),d=a("0c63"),c=d["a"].createFromIconfontCN({scriptUrl:"//at.alicdn.com/t/font_8d5l8fzk5b87iudi.js"}),m=[{title:"时间",dataIndex:"hour",key:"hour"},{dataIndex:"add_num",slots:{title:"add_num"},key:"add_num"},{dataIndex:"leave_num",slots:{title:"leave_num"},key:"leave_num"},{slots:{title:"member_snum"},dataIndex:"member_snum",key:"member_snum"},{slots:{title:"leave_snum"},dataIndex:"leave_snum",key:"leave_snum"}],p={components:{LineCharts:r["a"],IconFont:c},data:function(){return{urlId:"",today_member_num:"0",today_leave_member_num:"0",member_sum:"0",leave_member_sum:"0",time_member_num:"0",time_leave_member_num:"0",statisticsList:[],timeType:"1",ds_date:"",de_date:"",weekStart:l()().subtract(7,"days"),weekEnd:l()().subtract(7,"days"),ws_date:l()().subtract(7,"days").weekday(0).format("YYYY-MM-DD"),we_date:l()().subtract(7,"days").weekday(6).format("YYYY-MM-DD"),ws_week:l()(new Date).week()-1||52,is_export:0,fansInteractive:{legendData:[],xAxisData:[],seriesData:[]},title:"",columns:m,timeDataList:[],timeData:[],total:0,quickJumper:!1,page:1,pageSize:10,btnLoading:!1,dateFormat:"YYYY-MM-DD",isLoading:!0}},methods:{moment:l.a,rowClassName:function(t,e){var a="dark-row";return e%2===0&&(a="light-row"),a},changeFansPage:function(t){var e=this;e.page=t;var a=e.getPageData(e.timeDataList,e.page,e.pageSize);e.timeData=a.list,e.page=a.page,this.$nextTick((function(){document.getElementsByClassName("ant-layout").length>1&&document.getElementsByClassName("ant-layout")[2].scrollTo(0,700)}))},showFansSizeChange:function(t,e){var a=this;a.pageSize=e;var i=a.getPageData(a.timeDataList,a.page,a.pageSize);a.timeData=i.list,a.page=i.page},getPageData:function(t,e,a){var i=e*a,s=(e-1)*a,n={page:e,list:[]};if(0==t.length)n.list=[];else{t.length<i&&(i=t.length),s>t.length-1&&(t.length%a!=0?(s=parseInt(t.length/a)*a,n.page=parseInt(t.length/a)+1):(s=(parseInt(t.length/a)-1)*a,n.page=parseInt(t.length/a)));for(var r=s;r<i;r++)n.list.push(t[r])}return n},getStatisticsList:function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(){var e,a,i,s,n,r,o=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e="",a="",1==this.timeType?(e=this.ds_date||l()(new Date(new Date-2592e6)).format("YYYY-MM-DD"),a=this.de_date||l()(new Date-864e5).format("YYYY-MM-DD")):2==this.timeType?(l()().subtract(7,"days").weekday(6).format("YYYY-MM-DD")>l()().format("YYYY-MM-DD")&&(this.we_date=l()().format("YYYY-MM-DD")),e=this.ws_date,a=this.we_date):3==this.timeType&&(e=l()().startOf("month").format("YYYY-MM-DD"),a=l()(new Date).format("YYYY-MM-DD")),t.next=5,this.axios.post("work-chat/chat-info-statistic",{corp_id:localStorage.getItem("corpId"),chat_id:this.urlId,type:this.timeType,s_date:e,e_date:a,s_week:this.ws_week,is_export:this.is_export});case 5:if(i=t.sent,s=i.data,0!=s.error)this.is_export=0,this.$message.error(s.error_msg);else if(0==this.is_export){for(this.isLoading=!1,this.today_member_num=s.data.chat_stat.today_member_num,this.today_leave_member_num=s.data.chat_stat.today_leave_member_num,this.member_sum=s.data.chat_stat.member_sum,this.leave_member_sum=s.data.chat_stat.leave_member_sum,this.time_member_num=s.data.chat_stat.time_member_num,this.time_leave_member_num=s.data.chat_stat.time_leave_member_num,this.fansInteractive.xAxisData=s.data.xData,n=0;n<s.data.seriesData.length;n++)this.fansInteractive.seriesData.push({name:"",type:"line",smooth:!0,data:[]}),this.fansInteractive.seriesData[n].name=s.data.seriesData[n].name,this.fansInteractive.seriesData[n].data=s.data.seriesData[n].data,this.fansInteractive.legendData.push(s.data.seriesData[n].name);this.timeDataList=s.data.chat_data,this.total=s.data.chat_data.length,r=this.getPageData(this.timeDataList,this.page,this.pageSize),this.timeData=r.list,this.page=r.page}else setTimeout((function(){window.open(s.data.url),o.is_export=0,o.btnLoading=!1,o.isLoading=!1}),2e3);case 8:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),changeFansTimeType1:function(t){this.timeType!=t&&(1==t&&(this.ds_date=l()(new Date(new Date-2592e6)).format("YYYY-MM-DD"),this.de_date=l()(new Date-864e5).format("YYYY-MM-DD")),this.page=1,this.isLoading=!0,this.timeType=t,this.getStatisticsList())},changeFansTime1:function(t,e){this.isLoading=!0,1==this.timeType&&(this.ds_date=e[0],this.de_date=e[1]),this.getStatisticsList()},changeFansStartWeek1:function(t,e){if(this.isLoading=!0,t>this.weekEnd){this.weekStart=l()(JSON.parse(JSON.stringify(this.weekEnd))),this.weekEnd=l()(JSON.parse(JSON.stringify(t)));var a=l()(this.weekStart).format("E");this.ws_date=l()(this.weekStart).subtract(a-1,"days").format("YYYY-MM-DD"),a=l()(this.weekEnd).format("E"),this.we_date=l()(this.weekEnd).add(7-a,"days").format("YYYY-MM-DD"),this.we_date>l()().format("YYYY-MM-DD")&&(this.we_date=l()().format("YYYY-MM-DD")),this.ws_week=l()(this.ws_date,"YYYY-MM-DD").week()}else{this.weekStart=t;var i=e.split("-")[1],s=i.substring(0,i.length-1),n=l()(this.weekStart).format("E");this.ws_date=l()(this.weekStart).subtract(n-1,"days").format("YYYY-MM-DD"),this.ws_week=s}this.getStatisticsList()},changeFansEndWeek1:function(t,e){if(this.isLoading=!0,t<this.weekStart){this.weekEnd=l()(JSON.parse(JSON.stringify(this.weekStart))),this.weekStart=l()(JSON.parse(JSON.stringify(t)));var a=l()(this.weekStart).format("E");this.ws_date=l()(this.weekStart).subtract(a-1,"days").format("YYYY-MM-DD"),a=l()(this.weekEnd).format("E"),this.we_date=l()(this.weekEnd).add(7-a,"days").format("YYYY-MM-DD"),this.we_date>l()().format("YYYY-MM-DD")&&(this.we_date=l()().format("YYYY-MM-DD")),this.ws_week=l()(this.ws_date,"YYYY-MM-DD").week()}else{this.weekEnd=t;var i=e.split("-")[1],s=i.substring(0,i.length-1),n=l()(this.weekEnd).format("E");this.we_date=l()(this.weekEnd).add(7-n,"days").format("YYYY-MM-DD"),this.we_week=s}this.getStatisticsList()},disabledDateDay:function(t){return t.valueOf()>(new Date).getTime()-864e5||t<l()().subtract(31,"days")},disabledDateWeek:function(t){var e=l()(new Date).format("E");return t.valueOf()>l()(new Date).subtract(e,"days")||t<l()().subtract(365,"days")},exportData:function(){this.is_export=1,this.btnLoading=!0,this.getStatisticsList()}},created:function(){this.urlId=this.$route.query.id,this.title=decodeURIComponent(this.$route.query.title),"undefined"!=typeof this.urlId&&this.getStatisticsList()}},h=p,u=(a("8bda"),a("2877")),g=Object(u["a"])(h,i,s,!1,null,"1bd8e26c",null);e["default"]=g.exports},"8bda":function(t,e,a){"use strict";var i=a("dca0"),s=a.n(i);s.a},b8df:function(t,e,a){e=t.exports=a("2350")(!1),e.push([t.i,".statistics-ul[data-v-1bd8e26c]{overflow:hidden;padding:0;margin-bottom:0;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between}.statistics-ul li[data-v-1bd8e26c]{width:24%;height:105px;color:#fff;padding:10px}.statistics-ul li p[data-v-1bd8e26c]{margin-bottom:0}.statistics-ul li .number[data-v-1bd8e26c]{font-size:30px}.statistics-ul li .count[data-v-1bd8e26c]{float:right}.card-caledar[data-v-1bd8e26c]{margin:12px 0;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-ms-flex-wrap:wrap;flex-wrap:wrap;color:#686868}.caledar-btn-selected[data-v-1bd8e26c]{boder:0;border-right:1px solid #3b74ff;background:#3b74ff;color:#fff}.ant-btn[data-v-1bd8e26c],[data-v-1bd8e26c] .ant-input{border-radius:0}.picker-contain[data-v-1bd8e26c]{margin-right:10px}[data-v-1bd8e26c] .ant-table-wrapper{background:#fff}[data-v-1bd8e26c] .dark-row{background:#fafafa}.view-title[data-v-1bd8e26c],[data-v-1bd8e26c] .light-row{background:#fff}.view-title[data-v-1bd8e26c]{border-bottom:1px solid #e2e2e2;height:50px;min-width:885px;width:100%;line-height:50px;font-size:16px;padding:0 20px;text-align:left}.picker-contain[data-v-1bd8e26c]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.picker-contain .caledar-btn-selected[data-v-1bd8e26c]{boder:0;border-right:1px solid #3b74ff;background:#3b74ff;border-radius:0;color:#fff}.picker-contain button[data-v-1bd8e26c]{margin:0 0 0 5px}.sec-card-caledar[data-v-1bd8e26c]{height:auto;padding:5px;display:-webkit-box;display:-ms-flexbox;display:flex;-ms-flex-wrap:wrap;flex-wrap:wrap;-webkit-box-align:center;-ms-flex-align:center;align-items:center;background:#f7f7f7}.sec-card-caledar.down-text[data-v-1bd8e26c]{background:#fff}.sec-card-caledar.down-text p[data-v-1bd8e26c]{color:#1a1a1a!important}.sec-card-caledar.down-text span[data-v-1bd8e26c]{color:#ff562d!important}",""])},dca0:function(t,e,a){var i=a("b8df");"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var s=a("499e").default;s("7b04afbc",i,!0,{sourceMap:!1,shadowMode:!1})}}]);