(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4bf0ecc3"],{"14b9":function(t,e,i){var a=i("5ca1");a(a.P,"String",{repeat:i("9744")})},"86b0":function(t,e,i){e=t.exports=i("2350")(!1),e.push([t.i,"[data-v-c30baaf6] .ant-card-bordered{border:0}.tpl-title[data-v-c30baaf6]{float:left;font-size:16px;vertical-align:top}.content-bd[data-v-c30baaf6]{background:#fff;min-height:120px;border:1px solid #e2e2e2;min-width:885px;margin:0 20px}[data-v-c30baaf6] .dark-row{background:#fafafa}[data-v-c30baaf6] .light-row{background:#fff}a[data-v-c30baaf6]:active,a[data-v-c30baaf6]:hover,a[data-v-c30baaf6]:link,a[data-v-c30baaf6]:visited{text-decoration:none}[data-v-c30baaf6] .ant-input-number-handler-wrap{display:none}.content-msg[data-v-c30baaf6]{border:1px solid #ffdda6;background:#fff2db;padding:10px;text-align:left;margin:12px 20px 20px}",""])},"86c3":function(t,e,i){"use strict";var a=i("e890"),s=i.n(a);s.a},9744:function(t,e,i){"use strict";var a=i("4588"),s=i("be13");t.exports=function(t){var e=String(s(this)),i="",r=a(t);if(r<0||r==1/0)throw RangeError("Count can't be negative");for(;r>0;(r>>>=1)&&(e+=e))1&r&&(i+=e);return i}},9769:function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"scroll",staticStyle:{width:"100%",height:"100%",position:"absolute","overflow-y":"auto","padding-bottom":"30px"}},[i("a-card",{staticStyle:{"margin-bottom":"20px",padding:"10px 20px"}},[i("label",{staticClass:"tpl-title"},[t._v("客户回收")])]),t._m(0),i("a-row",{staticStyle:{"margin-bottom":"20px",padding:"0 20px"}},[i("a-col",{staticStyle:{float:"left"}},[t.corpLen>1?i("a-select",{staticStyle:{width:"210px","margin-right":"5px"},attrs:{showSearch:"",optionFilterProp:"children"},on:{change:t.handleChange},model:{value:t.corpId,callback:function(e){t.corpId=e},expression:"corpId"}},[t._l(t.corpInfo,(function(e){return[i("a-select-option",{attrs:{value:e.corpid}},[t._v(t._s(e.corp_full_name||e.corp_name)+"\n\t\t\t\t\t")])]}))],2):t._e()],1),i("a-col",{staticStyle:{float:"right"}},[i("a-button",{directives:[{name:"has",rawName:"v-has",value:"highSeasCustomerRecyclingRules-add",expression:"'highSeasCustomerRecyclingRules-add'"}],attrs:{type:"primary",icon:"plus"},on:{click:t.addRules}},[t._v("客户回收规则\n\t\t\t")])],1)],1),i("div",{staticClass:"content-bd"},[i("a-spin",{attrs:{tip:"Loading...",size:"large",spinning:t.isLoading}},[i("div",{staticClass:"spin-content"},[i("a-table",{directives:[{name:"has",rawName:"v-has",value:"highSeasCustomerRecyclingRules-list",expression:"'highSeasCustomerRecyclingRules-list'"}],attrs:{columns:t.columns,dataSource:t.list,pagination:!1,rowClassName:t.rowClassName},scopedSlots:t._u([{key:"nameArr",fn:function(e,a,s){return[1==a.valid_type?t._l(a.nameArr,(function(e){return i("a-tag",{attrs:{color:"purple"}},[t._v("\n\t\t\t\t\t\t\t\t"+t._s(e)+"\n\t\t\t\t\t\t\t")])})):t._e(),2==a.valid_type?[t._l(a.user_key,(function(e){return[e.scopedSlots&&e.scopedSlots.title&&"custom"==e.scopedSlots.title?i("a-tag",{staticStyle:{"margin-top":"5px"},attrs:{color:"orange"}},[t._v(t._s(e.title)+"\n\t\t\t\t\t\t\t\t")]):t._e()]})),t._l(a.user_key,(function(e){return[e.scopedSlots&&e.scopedSlots.title&&"custom"!=e.scopedSlots.title?i("a-tag",{staticStyle:{"margin-top":"5px"},attrs:{color:"blue"}},[t._v(t._s(e.title)+"\n\t\t\t\t\t\t\t\t")]):t._e()]}))]:t._e()]}},{key:"ruleData",fn:function(e,a,s){return t._l(a.ruleData,(function(e){return i("div",[t._v("\n\t\t\t\t\t\t\t"+t._s(e)+"\n\t\t\t\t\t\t")])}))}},{key:"userLimit",fn:function(e,a,s){return[t._l(a.userLimit,(function(e){return i("div",[t._v(t._s(e))])})),i("div",[t._v("每个员工可保护客户数量"+t._s(a.protect_num)+"个")])]}},{key:"action",fn:function(e,a,s){return[i("a-button",{directives:[{name:"has",rawName:"v-has",value:"highSeasCustomerRecyclingRules-edit",expression:"'highSeasCustomerRecyclingRules-edit'"}],staticStyle:{margin:"10px 5px 0 0"},on:{click:function(e){return t.editList(a)}}},[t._v("编辑\n\t\t\t\t\t\t")]),i("a-popconfirm",{attrs:{title:"确定删除吗?",okText:"确定",cancelText:"取消"},on:{confirm:function(e){return t.delList(a.id)}}},[i("a-button",{directives:[{name:"has",rawName:"v-has",value:"highSeasCustomerRecyclingRules-del",expression:"'highSeasCustomerRecyclingRules-del'"}]},[t._v("删除")])],1)]}}])}),i("div",{directives:[{name:"show",rawName:"v-show",value:t.total>0,expression:"total > 0"},{name:"has",rawName:"v-has",value:"highSeasCustomerRecyclingRules-list",expression:"'highSeasCustomerRecyclingRules-list'"}],staticClass:"pagination",staticStyle:{width:"100%",position:"absolute",margin:"20px 0px 80px"}},[i("div",{staticStyle:{height:"32px",float:"left","line-height":"32px"}},[t._v("\n\t\t\t\t\t\t共\n\t\t\t\t\t\t"),i("span",{staticStyle:{color:"blue"}},[t._v(t._s(t.total))]),t._v("\n\t\t\t\t\t\t条\n\t\t\t\t\t")]),i("div",{staticClass:"pagination",staticStyle:{height:"32px",float:"right"}},[i("a-pagination",{attrs:{total:t.total,showSizeChanger:"",showQuickJumper:t.quickJumper,current:t.page,pageSize:t.pageSize,pageSizeOptions:["15","30","50","100"]},on:{change:t.changePage,showSizeChange:t.showSizeChange}})],1)])],1)])],1),i("a-modal",{attrs:{title:"客户回收规则",confirmLoading:t.confirmLoading,width:"888px"},on:{ok:t.handleOk,cancel:t.cancel},model:{value:t.addVisible,callback:function(e){t.addVisible=e},expression:"addVisible"}},[i("div",{staticStyle:{color:"red","margin-bottom":"8px"}},[t._v("当客户满足回收条件后，将其自动回收至公海池，交给新员工认领。")]),t.corpLen>1?i("a-form-item",{attrs:{"label-col":{span:4},"wrapper-col":{span:20}}},[i("template",{slot:"label"},[i("span",{staticStyle:{color:"red"}},[t._v("*")]),t._v("选择企业微信\n\t\t\t")]),t.corpLen>1?i("a-select",{staticStyle:{width:"210px"},attrs:{showSearch:"",optionFilterProp:"children"},on:{change:t.handleChange2},model:{value:t.corpId2,callback:function(e){t.corpId2=e},expression:"corpId2"}},[t._l(t.corpInfo,(function(e){return[i("a-select-option",{attrs:{value:e.corpid}},[t._v(t._s(e.corp_full_name||e.corp_name)+"\n\t\t\t\t\t")])]}))],2):t._e()],2):t._e(),i("a-form-item",{attrs:{"label-col":{span:4},"wrapper-col":{span:20}}},[i("template",{slot:"label"},[i("span",{staticStyle:{color:"red"}},[t._v("*")]),t._v("生效成员\n\t\t\t")]),i("div",{staticStyle:{color:"red"}},[t._v("针对不同员工配置不同的客户回收规则")]),i("a-radio-group",{model:{value:t.effectiveMemberType,callback:function(e){t.effectiveMemberType=e},expression:"effectiveMemberType"}},[i("a-radio",{attrs:{value:1,disabled:1==t.isAll}},[t._v("通用")]),i("a-radio",{attrs:{value:2}},[t._v("仅企业成员适用\n\t\t\t\t\t"),i("a-button",{staticStyle:{"margin-left":"10px"},attrs:{disabled:1==t.effectiveMemberType},on:{click:t.showDepartmentList}},[t._v("\n\t\t\t\t\t\t选择\n\t\t\t\t\t")]),i("span",{directives:[{name:"show",rawName:"v-show",value:t.chooseNum>0,expression:"chooseNum > 0"}],staticStyle:{"margin-left":"5px"}},[t._v("已选择"+t._s(t.chooseUserNum)+"名成员，"+t._s(t.chooseDepartmentNum)+"个部门")]),i("a",{directives:[{name:"show",rawName:"v-show",value:t.chooseNum>0,expression:"chooseNum > 0"}],staticStyle:{"margin-left":"10px"},on:{click:t.clearDepartmentList}},[t._v("\n\t\t\t\t\t\t重置\n\t\t\t\t\t")]),i("a-tooltip",{attrs:{placement:"top"}},[i("template",{slot:"title"},[t._v("\n\t\t\t\t\t\t\t企业成员和动态部门必须选择一个。选择部门后，如原来某部门是5人，后新增1人，则对这6位企业成员分别发送提醒。\n\t\t\t\t\t\t")]),i("span",{staticStyle:{"margin-left":"10px"}},[i("a-icon",{attrs:{type:"question-circle"}})],1)],2)],1)],1)],2),t._l(t.ruleList,(function(e,a){return i("a-form-item",{attrs:{"label-col":{span:4},"wrapper-col":{span:20}}},[i("template",{slot:"label"},[i("span",{staticStyle:{color:"red"}},[t._v("*")]),t._v("规则"+t._s(a+1)+"\n\t\t\t")]),i("div",[t._v("进入\n\t\t\t\t"),i("a-select",{staticStyle:{width:"120px"},model:{value:e.follow_id,callback:function(i){t.$set(e,"follow_id",i)},expression:"item.follow_id"}},t._l(t.follows,(function(e){return i("a-select-option",{attrs:{value:e.id}},[t._v("\n\t\t\t\t\t\t"+t._s(e.title)+"\n\t\t\t\t\t")])})),1),t._v("\n\t\t\t\t阶段\n\t\t\t\t"),i("a-input-number",{staticClass:"brush-input",attrs:{min:0,max:9999,formatter:t.limitDecimals,parse:t.limitDecimals},model:{value:e.day,callback:function(i){t.$set(e,"day",i)},expression:"item.day"}}),t._v("\n\t\t\t\t天未添加跟进记录，自动回收至公海池\n\t\t\t")],1),i("div",{staticStyle:{margin:"10px 0"}},[t._v("在回收前\n\t\t\t\t"),i("a-input-number",{staticClass:"brush-input",attrs:{min:0,max:9999,formatter:t.limitDecimals,parse:t.limitDecimals},model:{value:e.reclaim_day,callback:function(i){t.$set(e,"reclaim_day",i)},expression:"item.reclaim_day"}}),t._v("\n\t\t\t\t天提醒员工\n\t\t\t\t"),i("a-tooltip",{attrs:{placement:"top"}},[i("template",{slot:"title"},[t._v("\n\t\t\t\t\t\t比如进入某阶段，3个自然日未添加记录自动回收至公海池，在回收前1天提醒，那么在1号 10:30客户跟进，在5号00:00自动回收至公海池，4号早上9点发送即将回收通知给该员工。\n\t\t\t\t\t")]),i("span",[i("a-icon",{attrs:{type:"question-circle"}})],1)],2)],1),i("div",[a==t.ruleList.length-1&&t.ruleList.length<t.follows.length?i("a-button",{attrs:{type:"primary"},on:{click:t.addRule}},[t._v("添加规则\n\t\t\t\t")]):t._e(),1!=t.ruleList.length?i("a-button",{staticStyle:{"margin-left":"10px"},on:{click:function(e){return t.delRule(a)}}},[t._v("删除\n\t\t\t\t")]):t._e()],1)],2)})),t.agentList.length>1?i("a-form-item",{staticStyle:{"border-bottom":"1px dashed #CCC",padding:"10px 0"},attrs:{"label-col":{span:4},"wrapper-col":{span:20}}},[i("template",{slot:"label"},[i("span",{staticStyle:{color:"red"}},[t._v("*")]),t._v("员工提醒应用\n\t\t\t")]),i("a-select",{staticStyle:{width:"210px"},attrs:{showSearch:"",optionFilterProp:"children",placeholder:"请选择应用"},model:{value:t.agentId,callback:function(e){t.agentId=e},expression:"agentId"}},[t._l(t.agentList,(function(e){return[i("a-select-option",{attrs:{value:e.id}},[t._v(t._s(e.name)+"\n\t\t\t\t\t")])]}))],2),i("a-tooltip",{attrs:{placement:"top"}},[i("template",{slot:"title"},[t._v("\n\t\t\t\t\t在回收前，发送应用通知提醒员工，该客户即将进入公海池。\n\t\t\t\t")]),i("span",{staticStyle:{"margin-left":"10px"}},[i("a-icon",{attrs:{type:"question-circle"}})],1)],2)],2):t._e(),i("div",{staticStyle:{border:"1px dashed #CCC",padding:"10px 0"}},[i("a-form-item",{attrs:{"label-col":{span:4},"wrapper-col":{span:20}}},[i("template",{slot:"label"},[i("span",{staticStyle:{color:"red"}},[t._v("*")]),t._v("非企微客户认领数量\n\t\t\t\t")]),t._v("\n\t\t\t\t每个员工个人所持有的非企微客户认领上限数量\n\t\t\t\t"),i("a-input-number",{staticClass:"brush-input",attrs:{min:0,max:9999,formatter:t.limitDecimals,parse:t.limitDecimals},model:{value:t.distributionLimit,callback:function(e){t.distributionLimit=e},expression:"distributionLimit"}}),t._v("\n\t\t\t\t位\n\t\t\t\t"),i("div",[t._v("（在【客户管理】-【非企微客户】列表，员工录入/批量导入客户数量不计入在其中。）")])],2),i("a-form-item",{attrs:{"label-col":{span:4},"wrapper-col":{span:20}}},[i("template",{slot:"label"},[i("span",{staticStyle:{color:"red"}},[t._v("*")]),t._v("客户保护\n\t\t\t\t")]),i("a-switch",{model:{value:t.isProtect,callback:function(e){t.isProtect=e},expression:"isProtect"}}),t.isProtect?i("div",[t._v("允许客户保护数量\n\t\t\t\t\t"),i("a-input-number",{staticClass:"brush-input",attrs:{min:0,max:99999,formatter:t.limitDecimals,parse:t.limitDecimals},model:{value:t.protectNum,callback:function(e){t.protectNum=e},expression:"protectNum"}}),t._v("\n\t\t\t\t\t个\n\t\t\t\t")],1):t._e()],2),i("a-form-item",{attrs:{"label-col":{span:4},"wrapper-col":{span:20}}},[i("template",{slot:"label"},[i("span",{staticStyle:{color:"red"}},[t._v("*")]),t._v("允许延期\n\t\t\t\t")]),i("a-switch",{model:{value:t.isDelay,callback:function(e){t.isDelay=e},expression:"isDelay"}}),t.isDelay?i("div",[t._v("允许员工延期\n\t\t\t\t\t"),i("a-input-number",{staticClass:"brush-input",attrs:{min:0,max:9999,formatter:t.limitDecimals,parse:t.limitDecimals},model:{value:t.delayDay,callback:function(e){t.delayDay=e},expression:"delayDay"}}),t._v("\n\t\t\t\t\t天\n\t\t\t\t")],1):t._e()],2),i("a-form-item",{attrs:{"label-col":{span:4},"wrapper-col":{span:20}}},[i("template",{slot:"label"},[i("span",{staticStyle:{color:"red"}},[t._v("*")]),t._v("员工捡回\n\t\t\t\t\t"),i("a-tooltip",{attrs:{placement:"top"}},[i("template",{slot:"title"},[t._v("\n\t\t\t\t\t\t\t在某员工手上丢失的客户，回收至公海池，只可在规定的时间后才可重新认领。如设置7天后可重新捡回，1号回收至公海池，8号00：00该员工才能重新认领。\n\t\t\t\t\t\t")]),i("span",[i("a-icon",{attrs:{type:"question-circle"}})],1)],2)],1),i("div",[t._v("自回收至公海池\n\t\t\t\t\t"),i("a-input-number",{staticClass:"brush-input",attrs:{min:0,max:9999,formatter:t.limitDecimals,parse:t.limitDecimals},model:{value:t.againDay,callback:function(e){t.againDay=e},expression:"againDay"}}),t._v("\n\t\t\t\t\t天后可重新捡回（在某员工手上丢失的客户，回收至公海池，只可在规定的时间后才可重新认领）\n\t\t\t\t")],1)],2)],1)],2),i("chooseDepartment",{ref:"user",attrs:{show:t.showModalDepartment,id:t.corpId2,chooseNum:t.chooseNum,is_from:1,is_from_edit:1,from_id:t.id,callback:t.modalVisibleChange,disabled_id:t.disabled_id}})],1)},s=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"content-msg"},[i("p",{staticStyle:{"margin-bottom":"2px"}},[t._v("\n\t\t\t当通用规则（指所有员工）和特殊化规则（指个人规则）同时存在的情况下，员工则执行某执行特殊化规则。比如，张三既在通用规则，又在特殊化规则，那么，就按特殊化规则执行。")])])}],r=(i("c5f6"),i("14b9"),i("ac6a"),i("5df3"),i("f400"),i("a481"),i("96cf"),i("3b8d")),n=i("c75b"),o=[{title:"生效成员",dataIndex:"nameArr",key:"nameArr",scopedSlots:{customRender:"nameArr"}},{title:"回收规则",dataIndex:"ruleData",key:"ruleData",scopedSlots:{customRender:"ruleData"}},{title:"成员限制",dataIndex:"userLimit",key:"userLimit",scopedSlots:{customRender:"userLimit"}},{title:"操作",dataIndex:"action",key:"action",scopedSlots:{customRender:"action"}}],l={components:{chooseDepartment:n["a"]},data:function(){var t=localStorage.getItem("corpId")?localStorage.getItem("corpId"):"";return{corpLen:1,corpInfo:[],corpId:t,isLoading:!1,list:[],columns:o,page:1,pageSize:15,total:0,quickJumper:!1,addVisible:!1,confirmLoading:!1,corpId2:t,agentList:[],agentId:"",effectiveMemberType:1,showModalDepartment:!1,checkedList:[],chooseNum:0,chooseUserNum:0,chooseDepartmentNum:0,partyList:[],departmentId:[],follows:[],ruleList:[{follow_id:0,day:3,reclaim_day:1}],distributionLimit:300,isProtect:!1,protectNum:99999,isDelay:!1,delayDay:15,againDay:7,id:0,isAll:0,disabled_id:[]}},methods:{rowClassName:function(t,e){var i="dark-row";return e%2===0&&(i="light-row"),i},handleChange:function(t){this.corpId=t,this.getList()},getList:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(){var e,i,a,s,r=arguments;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=r.length>0&&void 0!==r[0]?r[0]:1,i=r.length>1&&void 0!==r[1]?r[1]:this.pageSize,this.isLoading=!0,t.next=5,this.axios.post("public-sea-customer/reclaim",{corp_id:this.corpId,page:e,pageSize:i});case 5:a=t.sent,s=a.data,0!=s.error?(this.isLoading=!1,this.$message.error(s.message)):(this.list=s.data.claimData,this.total=parseInt(s.data.count),this.page=e,this.pageSize=i,this.quickJumper=this.total>this.page_size,this.isLoading=!1);case 8:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),changePage:function(t,e){this.getList(t,e),this.$nextTick((function(){document.getElementsByClassName("scroll")[0].scrollTo(0,40)}))},showSizeChange:function(t,e){this.getList(1,e)},addRules:function(){this.corpId2=this.corpId,this.addVisible=!0,this.getFollowStatus(),this.getAgentList();var t=this;t.editList({id:0})},handleOk:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(){var e,i,a,s,r,n,o=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(""!=this.agentId){t.next=3;break}return this.$message.warning("请选择员工提醒应用"),t.abrupt("return",!1);case 3:if(2!=this.effectiveMemberType){t.next=9;break}if(this.departmentId=[],this.checkedList.map((function(t){"title"==t.scopedSlots.title&&o.departmentId.push(t.id.replace("d-",""))})),0!=this.departmentId.length||0!=this.checkedList.length){t.next=9;break}return this.$message.warning("成员或者部门要选择一个"),t.abrupt("return",!1);case 9:e=new Map,i=[],this.ruleList.forEach((function(t){e.get(t.follow_id)!==t.follow_id?(e.set(t.follow_id,t.follow_id),t.repeat=!1,i.unshift(t)):(t.repeat=!0,i.unshift(t))})),a=0;case 13:if(!(a<i.length)){t.next=20;break}if(!i[a].repeat){t.next=17;break}return this.$message.warning("规则中的阶段不可重复"),t.abrupt("return",!1);case 17:a++,t.next=13;break;case 20:s=0;case 21:if(!(s<this.ruleList.length)){t.next=31;break}if(null!=this.ruleList[s].day&&0!=this.ruleList[s].day){t.next=25;break}return this.$message.warning("请正确填写规则"+(s+1)+"的时间限制"),t.abrupt("return",!1);case 25:if(!(this.ruleList[s].day<this.ruleList[s].reclaim_day)){t.next=28;break}return this.$message.warning("规则"+(s+1)+"的回收提醒天数要小于未跟进记录天数"),t.abrupt("return",!1);case 28:s++,t.next=21;break;case 31:if(null!=this.distributionLimit){t.next=34;break}return this.$message.warning("请设置私有池数量"),t.abrupt("return",!1);case 34:if(!this.isDelay){t.next=38;break}if(null!=this.delayDay){t.next=38;break}return this.$message.warning("请设置员工延期时间"),t.abrupt("return",!1);case 38:if(!this.isProtect){t.next=42;break}if(null!=this.protectNum){t.next=42;break}return this.$message.warning("请设置客户保护数量"),t.abrupt("return",!1);case 42:if(null!=this.againDay){t.next=45;break}return this.$message.warning("请设置员工捡回天数"),t.abrupt("return",!1);case 45:return t.next=47,this.axios.post("public-sea-customer/reclaim-set",{uid:localStorage.getItem("uid"),corp_id:this.corpId2,agent_id:this.agentId,valid_type:this.effectiveMemberType,user_key:this.checkedList,party:this.departmentId,ruleData:this.ruleList,private_num:this.distributionLimit,is_protect:this.isProtect,protect_num:this.protectNum,is_delay:this.isDelay,delay_day:this.delayDay,reclaim_day:this.againDay,id:this.id});case 47:r=t.sent,n=r.data,0!=n.error?this.$message.error(n.error_msg):(this.cancel(),this.getList());case 50:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),cancel:function(){this.corpId2=this.corpId,this.effectiveMemberType=1,this.checkedList=[],this.chooseNum=0,this.departmentId=[],this.ruleList=[{follow_id:0,day:3,reclaim_day:1}],this.distributionLimit=300,this.isProtect=!1,this.protectNum=99999,this.isDelay=!1,this.delayDay=15,this.againDay=7,this.addVisible=!1,this.id=0},getAgentList:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(){var e,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.axios.post("work-group-sending/agent-list",{corp_id:this.corpId2,suite_id:1,agent_type:2});case 2:e=t.sent,i=e.data,0!=i.error?this.$message.error(i.error_msg):(this.agentList=i.data,0==this.id&&(this.agentList.length>0?this.agentId=this.agentList[0].id:this.agentId=""));case 5:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),handleChange2:function(t){this.corpId2=t,this.getAgentList(),this.departmentId=[]},chooseAgent:function(t){this.getPartyList()},showDepartmentList:function(){var t=[];this.checkedList.map((function(e){t.push(e.id)})),this.$refs.user.rightIdList=JSON.parse(JSON.stringify(t)),this.$refs.user.rightList=JSON.parse(JSON.stringify(this.checkedList)),this.showModalDepartment=!0},modalVisibleChange:function(t,e,i,a,s){"ok"==t&&(this.chooseNum=parseInt(i)+parseInt(a),this.chooseUserNum=i,this.chooseDepartmentNum=a,this.chooseNum>0?this.checkedList=JSON.parse(JSON.stringify(s)):this.checkedList=[]),this.showModalDepartment=!1},clearDepartmentList:function(){this.checkedList=[],this.chooseNum=0,this.chooseUserNum=0,this.chooseDepartmentNum=0},getPartyList:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(){var e,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.axios.post("work-follow-msg/get-party-list",{suite_id:1,corp_id:this.corpId2});case 2:e=t.sent,i=e.data,0!=i.error?this.$message.error(i.error_msg):(this.partyList=i.data.party_list,this.partyList.map((function(t){t.disabled=!1})));case 5:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),getFollowStatus:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(){var e,i,a=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.axios.post("custom-field/follow",{uid:localStorage.getItem("uid"),status:1});case 2:e=t.sent,i=e.data,0!=i.error?this.$message.error(i.error_msg):(this.follows=i.data.follow,0==this.id&&this.ruleList.map((function(t,e){t.follow_id=a.follows[e].id})));case 5:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),limitDecimals:function(t){var e=/[^\d]/g;return"string"==typeof t?isNaN(Number(t))?"":t.replace(e,""):"number"==typeof t?isNaN(t)?"":String(t).replace(e,""):""},addRule:function(){var t={follow_id:this.follows[0].id,day:3,reclaim_day:1};this.ruleList.push(t)},delRule:function(t){this.ruleList.splice(t,1)},delList:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(e){var i,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.isLoading=!0,t.next=3,this.axios.post("public-sea-customer/reclaim-del",{claim_id:e});case 3:i=t.sent,a=i.data,0!=a.error?(this.isLoading=!1,this.$message.error(a.error_msg)):(this.isLoading=!1,this.getList());case 6:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),editList:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(e){var i,a,s=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.id=e.id,t.next=3,this.axios.post("public-sea-customer/reclaim-info",{corp_id:this.corpId,claim_id:e.id});case 3:i=t.sent,a=i.data,0!=a.error?this.$message.error(a.error_msg):(0!=e.id&&(this.$refs.user.getDepartmentList(),this.addVisible=!0,this.agentId=String(a.data.agent_id),this.getAgentList(),this.effectiveMemberType=a.data.valid_type,2==this.effectiveMemberType&&(this.chooseNum=a.data.user_key.length,this.checkedList=a.data.user_key,this.chooseUserNum=0,this.chooseDepartmentNum=0,this.checkedList.map((function(t){"custom"==t.scopedSlots.title?s.chooseUserNum++:"title"==t.scopedSlots.title&&s.chooseDepartmentNum++})),this.departmentId=a.data.party),this.ruleList=a.data.reclaim_rule,this.distributionLimit=a.data.private_num,0==a.data.is_protect?this.isProtect=!1:(this.isProtect=!0,this.protectNum=a.data.protect_num),0==a.data.is_delay?this.isDelay=!1:(this.isDelay=!0,this.delayDay=a.data.delay_day),this.againDay=a.data.reclaim_day),this.partyList.map((function(t){t.disabled=!1})),a.data.notParty.map((function(t){s.partyList.map((function(e){t==e.id&&(e.disabled=!0)}))})),this.isAll=a.data.isAll,1==this.isAll&&(this.effectiveMemberType=2));case 6:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},created:function(){var t=this;this.$store.dispatch("getCorp",(function(e){t.corpInfo=e,t.$emit("changeCorpId",t.corpId),t.getList(),t.getFollowStatus(),t.getPartyList()}))}},c=l,u=(i("86c3"),i("2877")),d=Object(u["a"])(c,a,s,!1,null,"c30baaf6",null);e["default"]=d.exports},b39a:function(t,e,i){var a=i("d3f4");t.exports=function(t,e){if(!a(t)||t._t!==e)throw TypeError("Incompatible receiver, "+e+" required!");return t}},c26b:function(t,e,i){"use strict";var a=i("86cc").f,s=i("2aeb"),r=i("dcbc"),n=i("9b43"),o=i("f605"),l=i("4a59"),c=i("01f9"),u=i("d53b"),d=i("7a56"),p=i("9e1e"),h=i("67ab").fastKey,m=i("b39a"),f=p?"_s":"size",g=function(t,e){var i,a=h(e);if("F"!==a)return t._i[a];for(i=t._f;i;i=i.n)if(i.k==e)return i};t.exports={getConstructor:function(t,e,i,c){var u=t((function(t,a){o(t,u,e,"_i"),t._t=e,t._i=s(null),t._f=void 0,t._l=void 0,t[f]=0,void 0!=a&&l(a,i,t[c],t)}));return r(u.prototype,{clear:function(){for(var t=m(this,e),i=t._i,a=t._f;a;a=a.n)a.r=!0,a.p&&(a.p=a.p.n=void 0),delete i[a.i];t._f=t._l=void 0,t[f]=0},delete:function(t){var i=m(this,e),a=g(i,t);if(a){var s=a.n,r=a.p;delete i._i[a.i],a.r=!0,r&&(r.n=s),s&&(s.p=r),i._f==a&&(i._f=s),i._l==a&&(i._l=r),i[f]--}return!!a},forEach:function(t){m(this,e);var i,a=n(t,arguments.length>1?arguments[1]:void 0,3);while(i=i?i.n:this._f){a(i.v,i.k,this);while(i&&i.r)i=i.p}},has:function(t){return!!g(m(this,e),t)}}),p&&a(u.prototype,"size",{get:function(){return m(this,e)[f]}}),u},def:function(t,e,i){var a,s,r=g(t,e);return r?r.v=i:(t._l=r={i:s=h(e,!0),k:e,v:i,p:a=t._l,n:void 0,r:!1},t._f||(t._f=r),a&&(a.n=r),t[f]++,"F"!==s&&(t._i[s]=r)),t},getEntry:g,setStrong:function(t,e,i){c(t,e,(function(t,i){this._t=m(t,e),this._k=i,this._l=void 0}),(function(){var t=this,e=t._k,i=t._l;while(i&&i.r)i=i.p;return t._t&&(t._l=i=i?i.n:t._t._f)?u(0,"keys"==e?i.k:"values"==e?i.v:[i.k,i.v]):(t._t=void 0,u(1))}),i?"entries":"values",!i,!0),d(e)}}},e0b8:function(t,e,i){"use strict";var a=i("7726"),s=i("5ca1"),r=i("2aba"),n=i("dcbc"),o=i("67ab"),l=i("4a59"),c=i("f605"),u=i("d3f4"),d=i("79e5"),p=i("5cc5"),h=i("7f20"),m=i("5dbc");t.exports=function(t,e,i,f,g,v){var _=a[t],b=_,y=g?"set":"add",w=b&&b.prototype,x={},k=function(t){var e=w[t];r(w,t,"delete"==t?function(t){return!(v&&!u(t))&&e.call(this,0===t?0:t)}:"has"==t?function(t){return!(v&&!u(t))&&e.call(this,0===t?0:t)}:"get"==t?function(t){return v&&!u(t)?void 0:e.call(this,0===t?0:t)}:"add"==t?function(t){return e.call(this,0===t?0:t),this}:function(t,i){return e.call(this,0===t?0:t,i),this})};if("function"==typeof b&&(v||w.forEach&&!d((function(){(new b).entries().next()})))){var L=new b,S=L[y](v?{}:-0,1)!=L,D=d((function(){L.has(1)})),I=p((function(t){new b(t)})),N=!v&&d((function(){var t=new b,e=5;while(e--)t[y](e,e);return!t.has(-0)}));I||(b=e((function(e,i){c(e,b,t);var a=m(new _,e,b);return void 0!=i&&l(i,g,a[y],a),a})),b.prototype=w,w.constructor=b),(D||N)&&(k("delete"),k("has"),g&&k("get")),(N||S)&&k(y),v&&w.clear&&delete w.clear}else b=f.getConstructor(e,t,g,y),n(b.prototype,i),o.NEED=!0;return h(b,t),x[t]=b,s(s.G+s.W+s.F*(b!=_),x),v||f.setStrong(b,t,g),b}},e890:function(t,e,i){var a=i("86b0");"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var s=i("499e").default;s("4522e9f8",a,!0,{sourceMap:!1,shadowMode:!1})},f400:function(t,e,i){"use strict";var a=i("c26b"),s=i("b39a"),r="Map";t.exports=i("e0b8")(r,(function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}}),{get:function(t){var e=a.getEntry(s(this,r),t);return e&&e.v},set:function(t,e){return a.def(s(this,r),0===t?0:t,e)}},a,!0)}}]);