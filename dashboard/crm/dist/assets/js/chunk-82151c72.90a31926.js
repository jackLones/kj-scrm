(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-82151c72"],{"688c":function(e,t,a){"use strict";var i=a("7c15"),s=a.n(i);s.a},"76ce":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"custom-set"},[a("a-layout",{staticStyle:{position:"relative",height:"100%",overflow:"hidden"}},[a("a-layout",{staticClass:"scroll",staticStyle:{position:"absolute",left:"0",top:"0",bottom:"0",right:"0","overflow-x":"hidden","overflow-y":"auto"}},[a("a-layout-header",[e._v("顾客设置")]),a("a-layout-content",[a("div",{ref:"tabParent",staticStyle:{"margin-top":"20px"}},[a("span",{directives:[{name:"has",rawName:"v-has",value:"customSet-grade",expression:"'customSet-grade'"}],staticClass:"tabBtn",class:{activeBtn:1==e.tabKey},on:{click:function(t){return e.changeTab(1)}}},[e._v("等级设置")]),a("span",{directives:[{name:"has",rawName:"v-has",value:"customSet-rfm",expression:"'customSet-rfm'"}],staticClass:"tabBtn",class:{activeBtn:2==e.tabKey},on:{click:function(t){return e.changeTab(2)}}},[e._v("RFM设置")])]),a("div",{directives:[{name:"show",rawName:"v-show",value:1==e.tabKey,expression:"tabKey == 1"},{name:"has",rawName:"v-has",value:"customSet-grade",expression:"'customSet-grade'"}],staticStyle:{padding:"15px 20px",background:"#FFF"}},[a("div",{staticClass:"content-msg"},[a("p",{staticStyle:{"margin-bottom":"0px"}},[e._v("\n\t\t\t\t\t\t\t1、等级为自定义创建，不跟其他业务有直接联系，一个用户只能存在一个等级，可以手工更改。\n\t\t\t\t\t\t")]),a("p",{staticStyle:{"margin-bottom":"0px"}},[e._v("\n\t\t\t\t\t\t\t2、可以将某等级的所有用户全部移动到其他等级或者无等级，要删除等级也需要先把下面用户先挪走。\n\t\t\t\t\t\t")])]),a("div",{staticClass:"content-hd"},[a("a-button",{attrs:{type:"primary"},on:{click:function(t){return e.addLevel("add")}}},[e._v("添加等级")]),a("div",{staticClass:"level-list"},[e._l(e.listData.result,(function(t,i){return a("div",{key:i,staticClass:"level-item"},[a("a-row",[a("a-col",{attrs:{span:12}},[a("div",{staticClass:"level-l"},[a("div",{staticClass:"level-color",style:{"background-color":t.color}}),a("div",{staticClass:"level-mes"},[a("div",{staticClass:"level-name"},[e._v(e._s(t.title))]),a("div",{staticClass:"level-des"},[e._v(e._s(t.desc))])])])]),a("a-col",{attrs:{span:8}},[a("div",{staticClass:"level-m"},[a("div",{staticClass:"level-customer_num"},[e._v("现有顾客："+e._s(t.customer_num))]),a("div",{staticClass:"circle-box"},[a("svg",{attrs:{width:"50",height:"50",viewBox:"0 0 50 50"}},[a("circle",{staticClass:"circle-grey",attrs:{cx:"25",cy:"25",r:"20"}}),a("circle",{staticClass:"circle-color",attrs:{cx:"25",cy:"25",r:"20","stroke-dasharray":"125","stroke-dashoffset":125*(100-t.customer_rate)/100}})]),a("span",[e._v(e._s(t.customer_rate)+"%")])])])]),a("a-col",{attrs:{span:4}},[a("div",{staticClass:"level-r"},[a("a",{staticClass:"level-edit",on:{click:function(a){return e.addLevel("edit",t)}}},[e._v("编辑")]),a("a-dropdown",{attrs:{trigger:["click"]}},[a("a",{staticClass:"ant-dropdown-link",on:{click:function(e){return e.preventDefault()}}},[e._v("\n\t\t\t\t\t\t\t\t\t\t\t\t\t更多"),a("a-icon",{attrs:{type:"down"}})],1),a("a-menu",{attrs:{slot:"overlay"},on:{click:function(a){return e.handleMenuClick(a,t)}},slot:"overlay"},[a("a-menu-item",{key:"0"},[e._v("删除")]),a("a-menu-item",{key:"1"},[e._v("全部变更")])],1)],1)],1)])],1)],1)})),a("div",{staticClass:"level-item"},[a("a-row",[a("a-col",{attrs:{span:12}},[a("div",{staticClass:"level-l"},[a("div",{staticClass:"level-color",staticStyle:{"background-color":"#FFFFFF"}}),a("div",{staticClass:"level-mes"},[a("div",{staticClass:"level-name"},[e._v(e._s(e.listData.no_level.title))]),a("div",{staticClass:"level-des"},[e._v(e._s(e.listData.no_level.desc))])])])]),a("a-col",{attrs:{span:8}},[a("div",{staticClass:"level-m"},[a("div",[e._v("现有顾客："+e._s(e.listData.no_level.customer_num))])])])],1)],1)],2)],1)]),a("div",{directives:[{name:"show",rawName:"v-show",value:2==e.tabKey,expression:"tabKey == 2"},{name:"has",rawName:"v-has",value:"customSet-rfm",expression:"'customSet-rfm'"}],staticStyle:{padding:"15px 20px",background:"#FFF"}},[a("div",{staticClass:"content-msg"},[a("p",{staticStyle:{"margin-bottom":"0px"}},[e._v("\n\t\t\t\t\t\t\t1、会话相关的参数设置必须要依赖"),a("router-link",{attrs:{to:"/archive/message"}},[e._v("【会话存档】")]),e._v("功能，未开启的情况下不可配置会话相关的参数。\n\t\t\t\t\t\t")],1),a("p",{staticStyle:{"margin-bottom":"0px"}},[e._v("\n\t\t\t\t\t\t\t2、顾客需要有消费明细的记录，否则无法使用额度维度，只可使用近度和频率维度，也无法设置按照消费订单相关的参数。\n\t\t\t\t\t\t")]),a("p",{staticStyle:{"margin-bottom":"0px"}},[e._v("\n\t\t\t\t\t\t\t3、建议先开启会话存档功能和消费数据，系统会自动计算所有顾客的数据，得出一个中位数参考值，可作为参考再设置RFM的基准值。\n\t\t\t\t\t\t")]),a("p",{staticStyle:{"margin-bottom":"0px"}},[e._v("\n\t\t\t\t\t\t\t4、根据三个维度分别设置的考量方式和基准数据，低于基准的此条判别为低，三个维度叠加形成评级级别。\n\t\t\t\t\t\t")]),a("p",{staticStyle:{"margin-bottom":"0px"}},[e._v("\n\t\t\t\t\t\t\t5、会话频率，考量顾客有会话的次数，可以排除掉系统或企微员工主动发起会话若干时间段之内的回复内容。\n\t\t\t\t\t\t")]),a("p",{staticStyle:{"margin-bottom":"0px"}},[e._v("\n\t\t\t\t\t\t\t6、近度，考量的是顾客最后一次主动会话或者是消费，距离当前的天数。\n\t\t\t\t\t\t")]),a("p",{staticStyle:{"margin-bottom":"0px"}},[e._v("\n\t\t\t\t\t\t\t7、额度，考量的是顾客平均消费客单价，为总消费额除以消费次数。开启了消费数据之后，顾客若没有消费记录，统一以额度为低来进行处理。详细的概念和使用说明可以点击 "),a("a",{attrs:{href:"https://support.qq.com/products/104790/faqs/90393",target:"_blank"}},[e._v("说明文档")])])]),a("div",{staticClass:"content-hd"},[a("div",{staticClass:"content-box"},[a("div",{staticClass:"rfm-set"},[a("div",{staticClass:"rfm-set-item"},[e._v("当前【会话存档】功能"+e._s(e.openTopic?"已":"未")+"开启"),e.openTopic?e._e():a("router-link",{attrs:{to:"/archive/message"}},[e._v("，点击前往")]),e._v("。")],1),a("div",{staticClass:"rfm-set-item"},[a("label",[e._v("会话排除回复内容")]),a("a-input",{model:{value:e.timeTopic,callback:function(t){e.timeTopic=t},expression:"timeTopic"}}),a("span",[e._v("分钟内的顾客回复内容不纳入顾客RFM会话数据。")]),a("a-tooltip",{attrs:{placement:"top"}},[a("template",{slot:"title"},[a("div",[e._v("默认为0，则所有的会话都计算在内。若想排除回复内容，可设置比如30分钟内，员工给顾客发的消息，顾客的回复不作为主动会话。")])]),a("a-icon",{staticStyle:{"margin-left":"5px",color:"#000000"},attrs:{type:"question-circle",theme:"filled"}})],2)],1),a("div",{staticClass:"rfm-set-item"},[a("label",[e._v("会话记录开启")]),a("a-switch",{attrs:{"default-checked":"",disabled:!e.openTopic},on:{change:function(t){return e.onSession(t,"session")}},model:{value:e.openSession,callback:function(t){e.openSession=t},expression:"openSession"}}),a("a-tooltip",{attrs:{placement:"top"}},[a("template",{slot:"title"},[a("div",[e._v("开启后，每个顾客的会话情况会自动计算，前期可以先开启，积累一部分数据再设置基准值。")])]),a("a-icon",{staticStyle:{color:"#000000",fontSize:"14px"},attrs:{type:"question-circle",theme:"filled"}})],2)],1),a("div",{staticClass:"rfm-set-item"},[a("label",[e._v("消费数据开启")]),a("a-switch",{attrs:{"default-checked":"",disabled:e.opendis},on:{change:function(t){return e.onSession(t,"buy")}},model:{value:e.openBuy,callback:function(t){e.openBuy=t},expression:"openBuy"}}),a("a-tooltip",{attrs:{placement:"bottom"}},[a("template",{slot:"title"},[a("div",[e._v("当前店铺可以通过订单导入、订单录入来补全顾客的消费记录，就可以开启这个功能，系统将自动计算每个顾客的消费RFM数据。若没有任何消费数据的导入，请不要开启。")])]),a("a-icon",{attrs:{type:"question-circle"}})],2)],1)])]),a("div",{staticClass:"content-box"},[a("div",{staticClass:"rfm-statis"},[a("div",{staticClass:"rfm-title"},[a("span",[e._v("当前顾客RFM中位数参考值（截止"+e._s(e.rfmStatisTime)+"的数据）")]),a("a-tooltip",{attrs:{placement:"top"}},[a("template",{slot:"title"},[a("div",[e._v("以下数据是取现有顾客的中位数数据。以消费额度为例，总共101个顾客，按照额度排序，第51个顾客的消费额度即为消费额度中位数。")])]),a("a-icon",{staticStyle:{"margin-left":"5px",color:"#000000"},attrs:{type:"question-circle",theme:"filled"}})],2)],1),a("div",{staticClass:"rfm-statis-list"},[a("div",{staticClass:"rfm-statis-item"},[a("span",[e._v("顾客总数")]),a("div",[e._v(e._s(e.rfmStatis.customer_num))])]),a("div",{staticClass:"rfm-statis-item"},[a("span",[e._v("会话频率")]),a("div",[e._v(e._s(e.openSession?e.rfmStatis.frequency_msg+"次":"--"))])]),a("div",{staticClass:"rfm-statis-item"},[a("span",[e._v("会话近度")]),a("div",[e._v(e._s(e.openSession?e.rfmStatis.recency_msg+"天":"--"))])]),a("div",{staticClass:"rfm-statis-item"},[a("span",[e._v("消费频率")]),a("div",[e._v(e._s(e.openBuy?e.rfmStatis.frequency_shopping+"次":"--"))])]),a("div",{staticClass:"rfm-statis-item"},[a("span",[e._v("消费近度")]),a("div",[e._v(e._s(e.openBuy?e.rfmStatis.recency_shopping+"天":"--"))])]),a("div",{staticClass:"rfm-statis-item"},[a("span",[e._v("消费额度")]),a("div",[e._v(e._s(e.openBuy?e.rfmStatis.amount+"元":"--"))])])])])]),a("div",{staticClass:"content-box"},[a("div",{staticClass:"rfm-config"},[a("div",{staticClass:"rfm-title"},[a("span",[e._v("设置RFM基准值配置")]),a("a-tooltip",{attrs:{placement:"top"}},[a("template",{slot:"title"},[a("div",[e._v("设置了基准，所有顾客自己的数值会与基准值比对，来判别高低关系，从而进行评级。基准值可以参考上面的中位数值进行设置。选择方式和数值可以随时调整，但对顾客的评级变化需要第二天生效")])]),a("a-icon",{staticStyle:{"margin-left":"5px",color:"#000000"},attrs:{type:"question-circle",theme:"filled"}})],2)],1),a("div",{staticClass:"rfm-config-list"},[a("div",{staticClass:"rfm-config-item"},[a("label",[e._v("频率基准")]),a("a-radio-group",{attrs:{name:"radioGroup","default-value":e.rateType},model:{value:e.rateType,callback:function(t){e.rateType=t},expression:"rateType"}},[a("a-radio",{attrs:{value:1,disabled:!e.openSession}},[e._v("会话频率")]),a("a-radio",{attrs:{value:2,disabled:!e.openBuy}},[e._v("消费频率")])],1),a("a-input",{attrs:{"allow-clear":"",disabled:!e.openSession&&!e.openBuy},model:{value:e.rateStandard,callback:function(t){e.rateStandard=t},expression:"rateStandard"}})],1),a("div",{staticClass:"rfm-config-item"},[a("label",[e._v("近度基准")]),a("a-radio-group",{attrs:{name:"radioGroup","default-value":e.progressType},model:{value:e.progressType,callback:function(t){e.progressType=t},expression:"progressType"}},[a("a-radio",{attrs:{value:1,disabled:!e.openSession}},[e._v("会话近度")]),a("a-radio",{attrs:{value:2,disabled:!e.openBuy}},[e._v("消费近度")])],1),a("a-input",{attrs:{"allow-clear":"",disabled:!e.openSession&&!e.openBuy},model:{value:e.progressStandard,callback:function(t){e.progressStandard=t},expression:"progressStandard"}})],1),a("div",{staticClass:"rfm-config-item"},[a("label",[e._v("额度基准")]),a("a-radio-group",{attrs:{name:"radioGroup","default-value":1}},[a("a-radio",{attrs:{value:1,disabled:!e.openBuy}},[e._v("消费额度")])],1),a("a-input",{attrs:{"allow-clear":"",disabled:!e.openBuy},model:{value:e.quotaStandard,callback:function(t){e.quotaStandard=t},expression:"quotaStandard"}})],1)])])]),a("div",{staticClass:"content-box"},[a("div",{staticClass:"rfm-grade"},[a("div",{staticClass:"rfm-title"},[e._v("RFM评级对应关系")])]),a("div",{staticClass:"rfm-grade-table"},[a("a-table",{attrs:{columns:e.columns,"data-source":e.rfmData,pagination:!1,rowKey:"id"},scopedSlots:e._u([{key:"grade",fn:function(t,i,s){return[a("span",[e._v(e._s(s+1))])]}},{key:"alis_name",fn:function(t,i){return[a("a-input",{attrs:{placeholder:"自定义名称",value:t},on:{blur:function(t){return e.checkEnter(i.id,"alis_name","blur")},focus:function(a){return e.checkFocus(i.id,t)},change:function(t){return e.onCellChange(t)},pressEnter:function(t){return e.checkEnter(i.id,"alis_name","enter")}}}),i.id==e.customId?a("a",{on:{click:function(t){return e.checkEnter(i.id,"alis_name","save")}}},[e._v("保存")]):e._e()]}}])})],1)])]),a("div",{staticClass:"content-bd"},[a("a-button",{attrs:{type:"primary"},on:{click:e.saveRfm}},[e._v("保存")])],1)]),a("a-modal",{staticClass:"level-modal",attrs:{width:"600px",title:1==e.levelType?"编辑等级":"添加等级"},on:{ok:function(t){return e.submitLevel(e.levelType)},cancel:e.cancelLevel},model:{value:e.bindLevelVisible,callback:function(t){e.bindLevelVisible=t},expression:"bindLevelVisible"}},[a("div",{staticClass:"level-set-list"},[a("div",{staticClass:"set-item"},[a("label",[e._v("等级名称：")]),a("a-input",{attrs:{placeholder:"等级名称","allow-clear":""},model:{value:e.levelName,callback:function(t){e.levelName=t},expression:"levelName"}}),a("span",[e._v("等级名称不可重复")])],1),a("div",{staticClass:"set-item"},[a("label",[e._v("等级描述：")]),a("a-input",{attrs:{placeholder:"等级描述","allow-clear":""},model:{value:e.levelDes,callback:function(t){e.levelDes=t},expression:"levelDes"}}),a("span",[e._v("对等级进行描述")])],1),a("div",{staticClass:"set-item"},[a("label",[e._v("权重值：")]),a("a-input",{attrs:{placeholder:"权重值","allow-clear":""},model:{value:e.levelHeavy,callback:function(t){e.levelHeavy=t},expression:"levelHeavy"}}),a("span",[e._v("权重值越高，表明等级越高")])],1),a("div",{staticClass:"set-item"},[a("label",[e._v("选择颜色：")]),a("a-input",{staticClass:"ipt-color",attrs:{type:"color"},model:{value:e.levelColor,callback:function(t){e.levelColor=t},expression:"levelColor"}}),a("span",[e._v(e._s(e.levelColor))])],1)])]),a("a-modal",{staticClass:"level-modal change-level-modal",attrs:{width:"600px",title:2==e.levelType?"删除等级":"全部变更等级"},model:{value:e.changeLevelVisible,callback:function(t){e.changeLevelVisible=t},expression:"changeLevelVisible"}},[a("template",{slot:"footer"},[a("div",[a("a-checkbox",{on:{change:e.onCheckbox},model:{value:e.isCheckbox,callback:function(t){e.isCheckbox=t},expression:"isCheckbox"}},[e._v("勾选，代表确定知晓操作带来的影响。")])],1),a("div",[a("a-button",{key:"back",on:{click:e.cancelLevel}},[e._v("取消")]),a("a-button",{key:"submit",attrs:{type:"primary",disabled:!e.isCheckbox,loading:e.loading},on:{click:function(t){return e.submitLevel(e.levelType)}}},[e._v("确定")])],1)]),a("div",{staticClass:"level-set-list"},[a("div",{staticClass:"set-item"},[a("label",[e._v("原等级：")]),a("a-input",{attrs:{disabled:""},model:{value:e.levelName,callback:function(t){e.levelName=t},expression:"levelName"}})],1),a("div",{staticClass:"set-item"},[a("label",[e._v("变更等级：")]),a("a-select",{attrs:{showSearch:"",optionFilterProp:"children"},model:{value:e.gradeVal,callback:function(t){e.gradeVal=t},expression:"gradeVal"}},[a("a-select-option",{attrs:{value:-1}},[e._v("选择变更的等级")]),e._l(e.gradeArr,(function(t){return[t.title!=e.levelName?a("a-select-option",{key:t.id},[e._v(e._s(t.title))]):e._e()]}))],2)],1)]),a("div",{staticClass:"level-tip-box"},[a("div",{staticClass:"level-tip"},[e._v(e._s(2==e.levelType?"该等级将被删除，所有该等级顾客都将变更为其他等级。":"所有该等级顾客都将变更为其他等级。"))])])],2)],1)],1)],1)],1)},s=[],l=(a("7514"),a("96cf"),a("3b8d")),n=[{title:"评级",scopedSlots:{customRender:"grade"}},{title:"近度",dataIndex:"recency",key:"recency"},{title:"频率",dataIndex:"frequency",key:"frequency"},{title:"额度",dataIndex:"monetary",key:"monetary"},{title:"默认名称",dataIndex:"default_name",key:"default_name"},{title:"自定义名称",dataIndex:"alis_name",key:"alis_name",width:"30%",scopedSlots:{customRender:"alis_name"}}],o={name:"CustomSet",components:{},data:function(){return{tabKey:1,listData:{no_level:{},result:[]},levelType:0,bindLevelVisible:!1,levelName:"",levelDes:"",levelHeavy:"",levelColor:"#000000",levelId:0,changeLevelVisible:!1,loading:!1,isCheckbox:!1,gradeArr:[],gradeVal:-1,openTopic:!1,timeTopic:"",openSession:!1,opendis:!0,openBuy:!1,rfmStatis:{},rfmStatisTime:"",rateType:1,rateStandard:"",progressType:1,progressStandard:"",quotaStandard:"",columns:n,rfmData:[],rfmData1:[],rfmData2:[],customVal:"",customId:""}},methods:{changeTab:function(e){this.tabKey=e},levelList:function(){var e=Object(l["a"])(regeneratorRuntime.mark((function e(){var t,a,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=this,t.loading=!0,e.next=4,t.axios.post("shop-customer-level/list",{corp_id:localStorage.getItem("corpId")?localStorage.getItem("corpId"):""});case 4:a=e.sent,i=a.data,0!=i.error?(t.loading=!1,t.$message.error(i.error_msg)):(t.loading=!1,t.listData=i.data);case 7:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),addLevel:function(e,t){var a=this;a.bindLevelVisible=!0,"add"==e?(a.levelType=0,a.levelName="",a.levelDes="",a.levelHeavy="",a.levelColor="#ff0000"):"edit"==e&&(a.levelType=1,a.levelName=t.title,a.levelDes=t.desc,a.levelHeavy=t.weight,a.levelColor=t.color,a.levelId=t.id)},handleMenuClick:function(e,t){var a=this;a.changeLevelVisible=!0,this.isCheckbox=!1,a.loading=!1,0==e.key?a.levelType=2:1==e.key&&(a.levelType=3),a.gradeVal=-1,a.levelName=t.title,a.levelId=t.id,a.rfmLevel()},rfmLevel:function(){var e=Object(l["a"])(regeneratorRuntime.mark((function e(){var t,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.isLoading=!0,e.next=3,this.axios.post("shop-customer/level-rfm",{corp_id:localStorage.getItem("corpId")?localStorage.getItem("corpId"):""});case 3:t=e.sent,a=t.data,0!=a.error?(this.isLoading=!1,this.$message.error(a.error_msg)):(this.isLoading=!1,this.gradeArr=a.data.level);case 6:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),onCheckbox:function(e){this.isCheckbox=e.target.checked},submitLevel:function(){var e=Object(l["a"])(regeneratorRuntime.mark((function e(t){var a,i,s,l,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=this,a.loading=!0,0==t?(s={corp_id:localStorage.getItem("corpId")?localStorage.getItem("corpId"):"",title:a.levelName,desc:a.levelDes,weight:a.levelHeavy,color:a.levelColor},i="shop-customer-level/add-level"):1==t?(s={corp_id:localStorage.getItem("corpId")?localStorage.getItem("corpId"):"",title:a.levelName,desc:a.levelDes,weight:a.levelHeavy,color:a.levelColor,id:a.levelId},i="shop-customer-level/update-level"):2!=t&&3!=t||(s={corp_id:localStorage.getItem("corpId")?localStorage.getItem("corpId"):"",id:a.levelId,level_id:-1==a.gradeVal?"":a.gradeVal,type:2==t?1:0,check:1},i="shop-customer-level/delete-level"),e.next=5,a.axios.post(i,s);case 5:l=e.sent,n=l.data,0!=n.error?(a.loading=!1,a.$message.error(n.error_msg)):(a.loading=!1,a.cancelLevel(),a.levelList());case 8:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),cancelLevel:function(){this.bindLevelVisible=!1,this.changeLevelVisible=!1},frmSet:function(){var e=Object(l["a"])(regeneratorRuntime.mark((function e(){var t,a,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=this,t.isLoading=!0,e.next=4,t.axios.post("shop-customer-rfm/list",{corp_id:localStorage.getItem("corpId")?localStorage.getItem("corpId"):""});case 4:a=e.sent,i=a.data,0!=i.error?(t.isLoading=!1,t.$message.error(i.error_msg)):(t.isLoading=!1,t.openTopic=!!i.data.work_audit,null!=i.data.rfm_setting&&(t.rfmData=i.data.rfm_setting.consumption_data_open?i.data.open_rfm_list:i.data.close_rfm_list,t.timeTopic=i.data.rfm_setting.msg_allow_time,t.openSession=!!i.data.rfm_setting.msg_audit_open,t.openBuy=!!i.data.rfm_setting.consumption_data_open,t.rfmStatisTime=i.data.rfm_setting.update_time,t.rateType=1*i.data.rfm_setting.frequency_type,t.rateStandard=i.data.rfm_setting.frequency_value,t.progressType=1*i.data.rfm_setting.recency_type,t.progressStandard=i.data.rfm_setting.recency_value,t.quotaStandard=i.data.rfm_setting.monetary_value),t.rfmData1=i.data.open_rfm_list,t.rfmData2=i.data.close_rfm_list,t.opendis=!1,t.rfmStatis=i.data.rfm_data,1==t.$refs.tabParent.childNodes.length&&"RFM设置"==t.$refs.tabParent.childNodes[0].innerText&&(t.tabKey=2));case 7:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),onSession:function(e,t){"session"==t?this.openSession=e:"buy"==t&&(this.openBuy=e,this.rfmData=e?this.rfmData1:this.rfmData2)},checkFocus:function(e,t){this.customId=e,this.customVal=t},onCellChange:function(e){this.customVal=e.target.value},checkEnter:function(e,t,a){var i=this,s=i.rfmData,l=s.find((function(t){return t.id===e}));l&&(l[t]=i.customVal,i.rfmData=s,"blur"!=a&&i.addAlias())},addAlias:function(){var e=Object(l["a"])(regeneratorRuntime.mark((function e(){var t,a,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=this,t.isLoading=!0,e.next=4,t.axios.post("shop-customer-rfm/add-alias",{corp_id:localStorage.getItem("corpId")?localStorage.getItem("corpId"):"",rfm_id:t.customId,rfm_name:t.customVal});case 4:a=e.sent,i=a.data,0!=i.error?(t.isLoading=!1,t.$message.error(i.error_msg)):(t.isLoading=!1,t.$message.success("保存成功"),t.customId="");case 7:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),saveRfm:function(){var e=Object(l["a"])(regeneratorRuntime.mark((function e(){var t,a,i,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=this,t.loading=!0,a={corp_id:localStorage.getItem("corpId")?localStorage.getItem("corpId"):"",consumption_data_open:t.openBuy?1:0,msg_audit_open:t.openSession?1:0,msg_allow_time:t.timeTopic,frequency_type:t.rateType,frequency_value:t.rateStandard,recency_type:t.progressType,recency_value:t.progressStandard,monetary_value:t.quotaStandard},e.next=5,t.axios.post("shop-customer-rfm/change-setting",a);case 5:i=e.sent,s=i.data,0!=s.error?(t.loading=!1,t.$message.error(s.error_msg)):(t.loading=!1,t.$message.success("保存成功"));case 8:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},mounted:function(){var e=this;this.$store.dispatch("getCorp",(function(t){e.levelList(),e.frmSet()}))}},r=o,c=(a("688c"),a("2877")),d=Object(c["a"])(r,i,s,!1,null,"763e11de",null);t["default"]=d.exports},"7c15":function(e,t,a){var i=a("e35c");"string"===typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);var s=a("499e").default;s("748b3d9b",i,!0,{sourceMap:!1,shadowMode:!1})},e35c:function(e,t,a){t=e.exports=a("2350")(!1),t.push([e.i,".custom-set[data-v-763e11de]{width:100%;height:100%}.ant-layout-header[data-v-763e11de]{background:#fff;border-bottom:1px solid #e2e2e2;height:50px;min-width:885px;width:100%;line-height:50px;padding:0 20px;font-size:16px;text-align:left}.ant-layout-content[data-v-763e11de]{margin:0 20px 20px;min-width:885px}.tabBtn[data-v-763e11de]{margin:0;margin-right:2px;padding:10px 16px;line-height:38px;background:#fafafa;border:1px solid #e8e8e8;border-bottom:0;border-radius:4px 4px 0 0;cursor:pointer}.activeBtn[data-v-763e11de]{color:#1890ff;background:#fff}.content-msg[data-v-763e11de]{border:1px solid #ffdda6;background:#fff2db;padding:10px;margin-top:12px}.content-hd[data-v-763e11de]{margin-top:20px;width:100%;min-width:885px}.level-list[data-v-763e11de]{margin-top:20px;padding:0 24px}.level-item[data-v-763e11de]{border-bottom:1px solid #eaeaea;padding:20px 0}.level-item[data-v-763e11de],.level-item .ant-row[data-v-763e11de]{width:100%;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.level-item[data-v-763e11de]:last-child{border-bottom:none}.level-l[data-v-763e11de]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.level-color[data-v-763e11de]{width:25px;height:25px;margin-right:15px}.level-mes[data-v-763e11de]{color:#333;font-weight:650}.level-des[data-v-763e11de]{overflow:hidden;text-overflow:ellipsis;white-space:nowrap;color:#999;font-weight:400}.level-m[data-v-763e11de]{color:#999;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.level-m .level-customer_num[data-v-763e11de]{min-width:120px}.circle-box[data-v-763e11de]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;margin-left:5px}.circle-box svg[data-v-763e11de]{-webkit-transform:rotate(-90deg);transform:rotate(-90deg);-webkit-transform-origin:50% 50%;transform-origin:50% 50%;margin-right:10px}.circle-grey[data-v-763e11de]{stroke:#dfdfdf;stroke-width:8px;fill:none}.circle-color[data-v-763e11de]{stroke:#1890ff;stroke-width:8px;fill:none;-webkit-transition:stroke-dashoffset 1s linear;transition:stroke-dashoffset 1s linear}.level-edit[data-v-763e11de]{border-right:2px solid #999;display:inline-block;height:12px;line-height:12px;padding-right:5px;margin-right:1px}.ant-dropdown-menu-item[data-v-763e11de]{color:#1890ff}.set-item[data-v-763e11de]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;margin-bottom:15px}.set-item label[data-v-763e11de]{width:80px;text-align:right;-ms-flex-negative:0;flex-shrink:0}.ant-input[data-v-763e11de],.ant-input-affix-wrapper[data-v-763e11de],.ant-select[data-v-763e11de]{width:220px;margin-right:10px}.ipt-color[data-v-763e11de]{width:32px;padding:0 2px;margin-right:10px}.change-level-modal[data-v-763e11de] .ant-modal-footer{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.level-tip-box[data-v-763e11de]{width:100%;height:30px}.level-tip[data-v-763e11de]{position:absolute;left:0;bottom:53px;width:100%;padding:5px 0;text-align:center;background-color:#fff2db}.content-box[data-v-763e11de]{background:#f5f5f5;border:1px solid #e2e2e2;margin-bottom:20px;padding:10px}.content-box[data-v-763e11de]:last-child{margin-bottom:0}.content-box .rfm-title[data-v-763e11de]{font-size:16px;font-weight:600;margin:10px}.content-box .rfm-set[data-v-763e11de]{margin-left:50px}.content-box .rfm-set .rfm-set-item[data-v-763e11de]{margin-bottom:15px;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.content-box .rfm-set .rfm-set-item[data-v-763e11de]:last-child{margin-bottom:0}.content-box .rfm-set .rfm-set-item .ant-input[data-v-763e11de]{margin-left:10px;width:80px}.content-box .rfm-set .rfm-set-item .ant-switch[data-v-763e11de]{margin:0 10px}.content-box .rfm-statis .rfm-statis-list[data-v-763e11de]{padding:30px 0;display:-webkit-box;display:-ms-flexbox;display:flex;-ms-flex-pack:distribute;justify-content:space-around}.content-box .rfm-statis .rfm-statis-list .rfm-statis-item[data-v-763e11de]{text-align:center}.content-box .rfm-statis .rfm-statis-list .rfm-statis-item div[data-v-763e11de]{color:#000;font-size:30px;font-weight:600}.content-box .rfm-config .rfm-config-list[data-v-763e11de]{margin-left:50px}.content-box .rfm-config .rfm-config-list .rfm-config-item[data-v-763e11de]{margin-bottom:15px;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.content-box .rfm-config .rfm-config-list .rfm-config-item[data-v-763e11de]:last-child{margin-bottom:0}.content-box .rfm-config .rfm-config-list .rfm-config-item .ant-radio-group[data-v-763e11de]{margin-left:20px}.content-bd[data-v-763e11de]{background:#fff;min-height:120px;min-width:885px;width:100%;text-align:center}.content-bd .ant-btn[data-v-763e11de]{margin-top:50px}",""])}}]);