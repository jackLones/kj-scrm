(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-c1c9d8fa"],{"2a16":function(t,e,a){"use strict";a.r(e);var o=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"list"},[o("div",{attrs:{id:"components-layout-demo-basic"}},[o("a-layout",{staticStyle:{position:"relative",height:"100%",overflow:"hidden"}},[o("a-layout-sider",[t.corpLen>1?o("eWechat",{on:{changeWxId:t.handleWxId}}):t._e()],1),o("a-layout",{staticClass:"scroll",staticStyle:{position:"absolute",top:"0",bottom:"0",right:"0","overflow-x":"hidden","overflow-y":"auto"},style:t.corpLen>1?{left:"250px"}:{left:"0px"}},[o("a-layout-header",[t._v("被客户删除记录")]),o("a-layout-content",[o("div",{staticClass:"content-msg"},[t._v("\n                            当你被微信联系人从好友列表中删除，企业微信营销工具会自动发一条消息通知你。你也可以在企业微信营销工具后台查看历史被删除记录，知道是谁在什么时间把你删除。配合带参数的对外名片功能，也可以知道这个人是从什么渠道来的。\n                        ")]),o("div",{staticClass:"content-hd"},[o("a-input",{staticStyle:{width:"15%"},attrs:{placeholder:"客户昵称搜索"},on:{keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.search(e)}},model:{value:t.name,callback:function(e){t.name="string"===typeof e?e.trim():e},expression:"name"}}),o("a-button",{staticStyle:{margin:"0 10px"},on:{click:t.showDepartmentList}},[t.chooseNum<=0?o("span",[t._v("选择部门成员")]):t._e(),t.chooseNum>0?o("span",[t._v("已选择"+t._s(t.chooseUserNum)+"名成员，"+t._s(t.chooseDepartmentNum)+"个部门")]):t._e()]),o("a-select",{staticStyle:{width:"120px"},on:{change:t.changeTimeType},model:{value:t.timeType,callback:function(e){t.timeType=e},expression:"timeType"}},[o("a-select-option",{attrs:{value:1}},[t._v("删除时间")]),o("a-select-option",{attrs:{value:2}},[t._v("添加时间")])],1),t._v("\n                            ——\n                            "),o("a-range-picker",{staticStyle:{width:"220px","margin-right":"10px"},attrs:{disabledDate:t.disabledDateDay,format:"YYYY-MM-DD"},on:{change:t.changeSelectDate},model:{value:t.deleteDate,callback:function(e){t.deleteDate=e},expression:"deleteDate"}}),o("a-button",{staticStyle:{margin:"0 10px"},attrs:{type:"primary"},on:{click:t.search}},[t._v("查找")]),o("a-button",{on:{click:t.clearSearch}},[t._v("清空")]),o("div",{staticStyle:{height:"60px",float:"right"}},[o("a-dropdown",{directives:[{name:"has",rawName:"v-has",value:"customRecord-export",expression:"'customRecord-export'"}]},[o("a-menu",{attrs:{slot:"overlay"},on:{click:t.chooseDownType},slot:"overlay"},[o("a-menu-item",{key:"0"},[t._v("当前页导出")]),o("a-menu-item",{key:"1"},[t._v("全部导出")])],1),o("a-button",{staticStyle:{float:"right","margin-top":"14px"},attrs:{type:"primary",icon:"download"}},[t._v("导出\n                                        "),o("a-icon",{staticStyle:{color:"#FFFFFF"},attrs:{type:"down"}})],1)],1)],1)],1),o("div",{staticClass:"content-bd"},[o("a-spin",{attrs:{tip:"Loading...",size:"large",spinning:t.isLoading}},[o("a-table",{directives:[{name:"has",rawName:"v-has",value:"customRecord-list",expression:"'customRecord-list'"}],attrs:{columns:t.columns,dataSource:t.deleteList,pagination:!1,rowClassName:t.rowClassName},scopedSlots:t._u([{key:"customerInfo",fn:function(e,n,i){return o("div",{staticStyle:{width:"200px"}},[e.avatar?o("a-avatar",{staticStyle:{display:"inline-block","vertical-align":"top"},attrs:{shape:"square",size:42,src:e.avatar}}):t._e(),e.avatar?t._e():o("img",{staticStyle:{width:"42px",height:"42px",display:"inline-block","vertical-align":"top"},attrs:{src:a("4bef")}}),o("div",{staticStyle:{display:"inline-block","margin-left":"10px","line-height":"42px"}},[o("div",{staticStyle:{width:"140px","line-height":"20px"}},[t._v(t._s(e.name)+"\n                                                "),o("span",{class:null!=e.corp_name?"corp-name":"wx-name"},[null!=e.corp_name?[t._v("@"+t._s(e.corp_name))]:[t._v("@微信")]],2),"男性"==e.gender?o("a-icon",{staticStyle:{color:"#427EBA"},attrs:{slot:"prefix",type:"man"},slot:"prefix"}):t._e(),"女性"==e.gender?o("a-icon",{staticStyle:{color:"#ED4997"},attrs:{slot:"prefix",type:"woman"},slot:"prefix"}):t._e()],1)])],1)}},{key:"tag_name",fn:function(e,a,n){return o("div",{},[0==a.customerInfo.tag_name.length&&0==a.customerInfo.per_name.length?o("span",[t._v("--")]):t._e(),0==a.customerInfo.per_name.length&&a.customerInfo.tag_name.length>5?o("span",[o("a-popover",[o("span",{attrs:{slot:"content"},slot:"content"},[o("div",{staticClass:"over-width"},t._l(a.customerInfo.tag_name,(function(e){return o("a-tag",{staticStyle:{"margin-top":"5px"},attrs:{color:"blue"}},[t._v("\n\t\t\t\t\t\t\t\t\t\t\t\t              "+t._s(e)+"\n\t\t\t\t\t\t\t\t\t\t\t            ")])})),1)]),t._l(a.customerInfo.tag_name,(function(e,a){return o("span",[a<5?o("a-tag",{staticStyle:{"margin-top":"5px"},attrs:{color:"blue"}},[t._v("\n\t\t\t\t\t\t\t\t\t\t\t\t              "+t._s(e)+"\n\t\t\t\t\t\t\t\t\t\t\t            ")]):t._e()],1)})),o("span",[t._v("等"+t._s(a.customerInfo.tag_name.length)+"个标签")])],2)],1):t._e(),0==a.customerInfo.per_name.length&&a.customerInfo.tag_name.length<=5?o("span",t._l(a.customerInfo.tag_name,(function(e){return o("a-tag",{staticStyle:{"margin-top":"5px"},attrs:{color:"blue"}},[t._v("\n\t\t\t\t\t\t\t\t\t\t\t\t              "+t._s(e)+"\n\t\t\t\t\t\t\t\t\t\t\t            ")])})),1):t._e(),0==a.customerInfo.tag_name.length&&a.customerInfo.per_name.length>0?o("span",[t._v("\n\t\t\t\t\t\t\t\t\t\t\t私有标签："),t._l(a.customerInfo.per_name,(function(e){return o("a-tag",{staticStyle:{"margin-top":"5px"},attrs:{color:"blue"}},[t._v("\n\t\t\t\t\t\t\t\t\t\t\t"+t._s(e)+"\n\t\t\t\t\t\t\t\t\t\t")])}))],2):t._e(),a.customerInfo.tag_name.length>0&&a.customerInfo.per_name.length>0?[o("div",[t._v("\n                                                公有标签：\n                                                "),t._l(a.customerInfo.tag_name,(function(e){return o("a-tag",{staticStyle:{"margin-top":"5px"},attrs:{color:"blue"}},[t._v("\n                                                    "+t._s(e)+"\n                                                ")])}))],2),o("div",[t._v("\n                                                私有标签：\n                                                "),t._l(a.customerInfo.per_name,(function(e){return o("a-tag",{staticStyle:{"margin-top":"5px"},attrs:{color:"blue"}},[t._v("\n                                                    "+t._s(e)+"\n                                                ")])}))],2)]:t._e()],2)}},{key:"action",fn:function(e,a,n){return o("div",{},[o("a-button",{staticStyle:{margin:"0 5px 5px 0"},on:{click:function(e){return t.handleShowDetail(a.key)}}},[t._v("客户详情\n                                        ")])],1)}}])},[o("div",{attrs:{slot:"tag_name2"},slot:"tag_name2"},[t._v("\n                                        标签\n                                        "),o("a-tooltip",{attrs:{placement:"bottom"}},[o("template",{slot:"title"},[o("div",[t._v("企业微信给客户打标签：分公有标签和私有标签")]),o("div",[t._v("1、公有标签：即企业标签。管理员创建，所有员工可见，在本系统定义为“公有标签”。")]),o("div",[t._v("2、私有标签：即个人标签。员工创建，仅自己可见。在本系统定义为“私有标签”）。")])]),o("a-icon",{staticStyle:{"margin-left":"5px"},attrs:{type:"question-circle"}})],2)],1)]),o("div",{directives:[{name:"show",rawName:"v-show",value:t.total>0,expression:"total > 0"},{name:"has",rawName:"v-has",value:"customRecord-list",expression:"'customRecord-list'"}],staticClass:"pagination",staticStyle:{width:"100%",position:"absolute",margin:"20px 0px"}},[o("div",{staticStyle:{height:"32px",float:"left","line-height":"32px"}},[t._v("\n                                        共\n                                        "),o("span",{staticStyle:{color:"blue"}},[t._v(t._s(t.total))]),t._v("条\n                                    ")]),o("div",{staticClass:"pagination",staticStyle:{height:"32px",float:"right"}},[o("a-pagination",{attrs:{total:t.total,showSizeChanger:"",showQuickJumper:t.quickJumper,current:t.page,pageSize:t.pageSize,pageSizeOptions:["15","30","50","100"]},on:{change:t.changePage,showSizeChange:t.showSizeChange}})],1)])],1)],1),o("chooseDepartment",{ref:"user",attrs:{show:t.showModalDepartment,chooseNum:t.chooseNum,callback:t.modalVisibleChange3,is_special:1}})],1)],1)],1)],1)])},n=[],i=(a("7f7f"),a("96cf"),a("3b8d")),s=a("d77d"),r=a("c75b"),c=a("c1df"),l=a.n(c),p=[{title:"客户信息",dataIndex:"customerInfo",width:"200",scopedSlots:{customRender:"customerInfo"},key:"customerInfo"},{dataIndex:"tag_name",key:"tag_name",width:"30%",slots:{title:"tag_name2"},scopedSlots:{customRender:"tag_name"}},{title:"归属成员",dataIndex:"member",key:"member"},{title:"备注",dataIndex:"remark",key:"remark"},{title:"删除时间",dataIndex:"del_time",key:"del_time"},{title:"添加时间",dataIndex:"createtime",key:"createtime"},{title:"操作",dataIndex:"action",key:"action",scopedSlots:{customRender:"action"}}],d={name:"customRecord",components:{eWechat:s["a"],chooseDepartment:r["a"]},data:function(){var t=localStorage.getItem("corpId")?localStorage.getItem("corpId"):"";return{name:"",corpLen:JSON.parse(localStorage.getItem("corpArr")).length,corpId:t,isLoading:!0,columns:p,total:1,quickJumper:!1,page:1,pageSize:15,deleteList:[],checkedList:[],user:[],showModalDepartment:!1,chooseNum:0,chooseUserNum:0,chooseDepartmentNum:0,deleteDate:null,timeType:1}},methods:{handleWxId:function(t){this.isLoading=!0,this.corpId=t,this.getDeleteList()},rowClassName:function(t,e){var a="dark-row";return e%2===0&&(a="light-row"),a},changeTimeType:function(){this.deleteDate=null},disabledDateDay:function(t){return t.valueOf()>(new Date).getTime()},changeSelectDate:function(t,e){this.deleteDate=t},showDepartmentList:function(){this.$refs.user.rightIdList=JSON.parse(JSON.stringify(this.checkedList)),this.$refs.user.rightList=JSON.parse(JSON.stringify(this.user)),this.showModalDepartment=!0},modalVisibleChange3:function(t,e,a,o,n){"ok"==t&&(this.checkedList=e,this.chooseNum=parseInt(a)+parseInt(o),this.chooseUserNum=a,this.chooseDepartmentNum=o,this.chooseNum>0?this.user=JSON.parse(JSON.stringify(n)):this.user=[]),this.showModalDepartment=!1},search:function(){this.getDeleteList()},clearSearch:function(){this.deleteDate=null,this.name="",this.checkedList=[],this.user=[],this.chooseNum=0,this.chooseUserNum=0,this.chooseDepartmentNum=0,this.getDeleteList()},chooseDownType:function(t){this.is_export=1,this.getDeleteList(this.page,this.pageSize,1,t.key)},handleShowDetail:function(t){var e={id:t};this.$router.push({path:"/customRecord/detail",query:e})},moment:l.a,getDeleteList:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){var e,a,o,n,i,s,r=arguments;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=r.length>0&&void 0!==r[0]?r[0]:1,a=r.length>1&&void 0!==r[1]?r[1]:this.pageSize,o=r.length>2&&void 0!==r[2]?r[2]:"",n=r.length>3&&void 0!==r[3]?r[3]:0,this.isLoading=!0,t.next=7,this.axios.post("work-external-contact-follow-user/list",{suite_id:1,corp_id:this.corpId,user_ids:this.checkedList,time_type:this.timeType,sData:null==this.deleteDate||0==this.deleteDate.length?"":l()(this.deleteDate[0]).format("YYYY-MM-DD"),eData:null==this.deleteDate||0==this.deleteDate.length?"":l()(this.deleteDate[1]).format("YYYY-MM-DD"),page:e,page_size:a,is_all:n,is_export:o,name:this.name});case 7:i=t.sent,s=i.data,0!=s.error?(this.isLoading=!1,this.$message.error(s.error_msg)):1==o?(window.open(s.data.url),this.isLoading=!1):(this.deleteList=s.data.info,this.isLoading=!1,this.total=parseInt(s.data.count),this.page=e,this.pageSize=a,this.quickJumper=this.total>this.pageSize);case 10:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),changePage:function(t,e){this.getDeleteList(t,e),this.$nextTick((function(){document.getElementsByClassName("scroll")[0].scrollTo(0,90)}))},showSizeChange:function(t,e){this.getDeleteList(1,e)}},created:function(){this.getDeleteList()},beforeRouteEnter:function(t,e,a){"/customRecord/detail"==e.path?a((function(t){t.getDeleteList(t.page)})):a((function(t){t.getDeleteList()})),a()}},h=d,u=(a("83ef"),a("2877")),f=Object(u["a"])(h,o,n,!1,null,"1f79fa6f",null);e["default"]=f.exports},"4bef":function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAQAAADZc7J/AAABAElEQVR42s3VIY7CUBAG4LkEliC4xKJ6BA6AognXQBLCAVBYNBK3pim7zP8XBAJHSLhAZVURi+jC2+681xD4R89nZiYjIhojQRlQicYiolFQ8600EqZNAKbSpB0lyqcCBeYccIA5ihDgtO3JLdseTr7Ap9wFRx+g2HTuge8PH+AsjuBiBzZO4MsOHJzAwQ7kTiD3mcLsoX3muQcaV9s1DtnENUfssssR1i+6hRcD3GPFBaeccoEV9z7AUodoP4yxrUMs/wd26EtN0MeuBuBYDOH4LyDPWhYga1WXugpMxBhMnIBGVqD6S34B9nqvTUwaAUnNpZue689/DnuwTDUSuQJ1pL7YQ6lKkQAAAABJRU5ErkJggg=="},"56b6":function(t,e,a){"use strict";var o=a("b0fe"),n=a.n(o);n.a},"83ef":function(t,e,a){"use strict";var o=a("e68b"),n=a.n(o);n.a},b0fe:function(t,e,a){var o=a("fe92");"string"===typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);var n=a("499e").default;n("1ee44db8",o,!0,{sourceMap:!1,shadowMode:!1})},d77d:function(t,e,a){"use strict";var o=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"sider-one"},[o("div",{staticClass:"sider-one-txt"},[t._v("选择企业微信")]),t.corpInfo[0]?o("a-select",{staticStyle:{width:"200px","margin-bottom":"20px"},attrs:{showSearch:"",optionFilterProp:"children"},on:{change:t.handleChange},model:{value:t.changeBackground,callback:function(e){t.changeBackground=e},expression:"changeBackground"}},[t._l(t.corpInfo,(function(e){return[o("a-select-option",{attrs:{value:e.corpid}},[t._v(t._s(e.corp_name))])]}))],2):t._e(),o("div",{ref:"corpInfo",staticClass:"wx-info",staticStyle:{position:"absolute"},on:{mousemove:t.corpInfoMouseOver,mouseout:t.corpInfoMouseOut}},[t._l(t.corpInfo,(function(e,n){return[o("div",{staticClass:"selectWx",class:{active:t.changeBackground==e.corpid},on:{click:function(a){return t.selectWx(e.corpid)}}},[o("img",{staticStyle:{width:"32px","border-radius":"4px"},attrs:{src:a("de05"),alt:""}}),o("span",{staticStyle:{"text-overflow":"ellipsis","white-space":"nowrap",overflow:"hidden",float:"right",width:"calc(100% - 35px)"}},[t._v(t._s(e.corp_name))])])]}))],2)],1)},n=[],i={name:"eWechat",props:{callback:{type:Function,default:null}},data:function(){var t=localStorage.getItem("corpId")?localStorage.getItem("corpId"):"";return{corpInfo:[],changeBackground:t}},created:function(){var t=this;this.$store.dispatch("getCorp",(function(e){t.corpInfo=e,null!==t.callback&&"function"===typeof t.callback&&t.callback(t.changeBackground)}))},methods:{handleChange:function(t){var e=this,a="";this.corpInfo.map((function(o){t==o.corpid&&(a=o.corp_name,e.$store.dispatch("changeCorp",o))})),this.changeBackground=t,this.$emit("changeWxId",t,a),2==localStorage.getItem("isMasterAccount")&&this.$store.dispatch("getPermissionButton")},selectWx:function(t){this.handleChange(t)},corpInfoMouseOver:function(){this.$refs.corpInfo.style.overflowY="auto"},corpInfoMouseOut:function(){this.$refs.corpInfo.style.overflowY="hidden"}}},s=i,r=(a("56b6"),a("2877")),c=Object(r["a"])(s,o,n,!1,null,"2e9ecca2",null);e["a"]=c.exports},e0e9:function(t,e,a){e=t.exports=a("2350")(!1),e.push([t.i,"#components-layout-demo-basic[data-v-1f79fa6f]{height:100%}#components-layout-demo-basic .ant-layout-header[data-v-1f79fa6f]{background:#fff;border-bottom:1px solid #e2e2e2;height:50px;min-width:885px;width:100%;line-height:50px}[data-v-1f79fa6f] .ant-layout-header{padding:0 20px;font-size:16px;text-align:left}#components-layout-demo-basic .ant-layout-sider[data-v-1f79fa6f]{background:#fff;-webkit-box-flex:0!important;-ms-flex:0 0 250px!important;flex:0 0 250px!important;max-width:250px!important;min-width:250px!important;width:250px!important;border-right:1px solid #e2e2e2}#components-layout-demo-basic .ant-layout-content[data-v-1f79fa6f]{margin:0 20px 20px;min-width:885px;width:100%;padding-right:40px}.content-hd[data-v-1f79fa6f]{height:60px;width:100%;min-width:885px;line-height:60px}.content-msg[data-v-1f79fa6f]{width:100%;border:1px solid #ffdda6;background:#fff2db;padding:10px;margin-top:12px}.content-bd[data-v-1f79fa6f]{background:#fff;min-height:120px;border:1px solid #e2e2e2;min-width:885px;width:100%}#components-layout-demo-basic>.ant-layout[data-v-1f79fa6f]{margin-bottom:48px}#components-layout-demo-basic>.ant-layout[data-v-1f79fa6f]:last-child{margin:0}.list[data-v-1f79fa6f]{margin-left:16px}.ant-layout.ant-layout-has-sider[data-v-1f79fa6f],.list[data-v-1f79fa6f]{height:100%}.btn-primary[data-v-1f79fa6f]{margin-left:20px}.tag-name[data-v-1f79fa6f]{padding:6px 14px;height:34px;font-size:13px;border:1px solid #d9d9d9;background-color:transparent!important;color:rgba(0,0,0,.65)}[data-v-1f79fa6f] .dark-row{background:#fafafa}[data-v-1f79fa6f] .light-row{background:#fff}.over-width[data-v-1f79fa6f]{width:500px!important;max-height:400px!important;overflow-y:auto!important}",""])},e68b:function(t,e,a){var o=a("e0e9");"string"===typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);var n=a("499e").default;n("3757c7f8",o,!0,{sourceMap:!1,shadowMode:!1})},fe92:function(t,e,a){e=t.exports=a("2350")(!1),e.push([t.i,".sider-one[data-v-2e9ecca2]{padding:0 20px}.sider-one-txt[data-v-2e9ecca2]{height:60px;line-height:60px;text-align:left}.wx-info[data-v-2e9ecca2]{width:100%;position:absolute;left:0;top:100px;bottom:0;overflow:hidden}.wx-info[data-v-2e9ecca2]::-webkit-scrollbar{width:2px;height:100%}.wx-info[data-v-2e9ecca2]::-webkit-scrollbar-track-piece{background-color:#fff}.wx-info[data-v-2e9ecca2]::-webkit-scrollbar-thumb{background:#fff}.selectWx[data-v-2e9ecca2]{width:200px;margin-left:20px;height:50px;line-height:50px;cursor:pointer;padding-left:10px}.active[data-v-2e9ecca2]{background:#1e90ff;color:#fff}",""])}}]);